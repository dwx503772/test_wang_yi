<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="34">
  <HTTPTask id="76" hostname="192.168.0.106" path="/testlink/third_party/ext-js/ext-all.js" url="http://192.168.0.106/testlink/third_party/ext-js/ext-all.js" ip="192.168.0.106" port="80" connectionId="14" origin="Primary" frame="1" startTime="7444289" endTime="7444320">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzE5Mi4xNjguMC4xMDYvdGVzdGxpbmsvbGliL2dlbmVyYWwvbWFpblBhZ2UucGhw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>emgtQ04=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgOS4wOyBXaW5kb3dzIE5UIDYuMTsgVHJpZGVudC81LjAp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyLjE2OC4wLjEwNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UEhQU0VTU0lEPTY1NDAzaXUybGw5ZzdnY2ttdGJ2NWk1NTU3OyBURVNUTElOS19VU0VSX0FVVEhfQ09PS0lFPTVkYTY4M2JiOGYwMDRkZDM4MjAwMDc5OTBkYTQyY2JmZjI0NmJkNTZmZjRkZWZkNGJjZWJlNzdiNWMxMmQ2M2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC90ZXN0bGluay90aGlyZF9wYXJ0eS9leHQtanMvZXh0LWFsbC5qcyBIVFRQLzEuMQ0KQWNjZXB0OiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCAqLyo7cT0wLjgNClJlZmVyZXI6IGh0dHA6Ly8xOTIuMTY4LjAuMTA2L3Rlc3RsaW5rL2xpYi9nZW5lcmFsL21haW5QYWdlLnBocA0KQWNjZXB0LUxhbmd1YWdlOiB6aC1DTg0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgOS4wOyBXaW5kb3dzIE5UIDYuMTsgVHJpZGVudC81LjApDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUNCkhvc3Q6IDE5Mi4xNjguMC4xMDYNCkNvbm5lY3Rpb246IEtlZXAtQWxpdmUNCkNvb2tpZTogUEhQU0VTU0lEPTY1NDAzaXUybGw5ZzdnY2ttdGJ2NWk1NTU3OyBURVNUTElOS19VU0VSX0FVVEhfQ09PS0lFPTVkYTY4M2JiOGYwMDRkZDM4MjAwMDc5OTBkYTQyY2JmZjI0NmJkNTZmZjRkZWZkNGJjZWJlNzdiNWMxMmQ2M2UNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="PHPSESSID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjU0MDNpdTJsbDlnN2dja210YnY1aTU1NTc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="TESTLINK_USER_AUTH_COOKIE" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NWRhNjgzYmI4ZjAwNGRkMzgyMDAwNzk5MGRhNDJjYmZmMjQ2YmQ1NmZmNGRlZmQ0YmNlYmU3N2I1YzEyZDYzZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBBdWcgMjAxNiAxNTo1ODo1OSBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLzIuNC4xMCAoVWJ1bnR1KQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U2F0LCAwMSBTZXAgMjAxMiAxMzo1NTozMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ImFmMmJiLTRjOGE0NDJlZjE4ODAtZ3ppcCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Keep-Alive" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGltZW91dD01LCBtYXg9MTAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUdWUsIDE2IEF1ZyAyMDE2IDE1OjU4OjU5IEdNVA0KU2VydmVyOiBBcGFjaGUvMi40LjEwIChVYnVudHUpDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDAxIFNlcCAyMDEyIDEzOjU1OjMwIEdNVA0KRVRhZzogImFmMmJiLTRjOGE0NDJlZjE4ODAtZ3ppcCINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCktlZXAtQWxpdmU6IHRpbWVvdXQ9NSwgbWF4PTEwMA0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWQNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vamF2YXNjcmlwdA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoKICogRXh0IEpTIExpYnJhcnkgMy40LjAKICogQ29weXJpZ2h0KGMpIDIwMDYtMjAxMSBTZW5jaGEgSW5jLgogKiBsaWNlbnNpbmdAc2VuY2hhLmNvbQogKiBodHRwOi8vd3d3LnNlbmNoYS5jb20vbGljZW5zZQogKi8KKGZ1bmN0aW9uKCl7dmFyIGg9RXh0LnV0aWwsaj1FeHQuZWFjaCxnPXRydWUsaT1mYWxzZTtoLk9ic2VydmFibGU9ZnVuY3Rpb24oKXt2YXIgaz10aGlzLGw9ay5ldmVudHM7aWYoay5saXN0ZW5lcnMpe2sub24oay5saXN0ZW5lcnMpO2RlbGV0ZSBrLmxpc3RlbmVyc31rLmV2ZW50cz1sfHx7fX07aC5PYnNlcnZhYmxlLnByb3RvdHlwZT17ZmlsdGVyT3B0UmU6L14oPzpzY29wZXxkZWxheXxidWZmZXJ8c2luZ2xlKSQvLGZpcmVFdmVudDpmdW5jdGlvbigpe3ZhciBrPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSxtPWtbMF0udG9Mb3dlckNhc2UoKSxuPXRoaXMsbD1nLHA9bi5ldmVudHNbbV0scyxvLHI7aWYobi5ldmVudHNTdXNwZW5kZWQ9PT1nKXtpZihvPW4uZXZlbnRRdWV1ZSl7by5wdXNoKGspfX1lbHNle2lmKHR5cGVvZiBwPT0ib2JqZWN0Iil7aWYocC5idWJibGUpe2lmKHAuZmlyZS5hcHBseShwLGsuc2xpY2UoMSkpPT09aSl7cmV0dXJuIGl9cj1uLmdldEJ1YmJsZVRhcmdldCYmbi5nZXRCdWJibGVUYXJnZXQoKTtpZihyJiZyLmVuYWJsZUJ1YmJsZSl7cz1yLmV2ZW50c1ttXTtpZighc3x8dHlwZW9mIHMhPSJvYmplY3QifHwhcy5idWJibGUpe3IuZW5hYmxlQnViYmxlKG0pfXJldHVybiByLmZpcmVFdmVudC5hcHBseShyLGspfX1lbHNle2suc2hpZnQoKTtsPXAuZmlyZS5hcHBseShwLGspfX19cmV0dXJuIGx9LGFkZExpc3RlbmVyOmZ1bmN0aW9uKGssbSxsLHIpe3ZhciBuPXRoaXMscSxzLHA7aWYodHlwZW9mIGs9PSJvYmplY3QiKXtyPWs7Zm9yKHEgaW4gcil7cz1yW3FdO2lmKCFuLmZpbHRlck9wdFJlLnRlc3QocSkpe24uYWRkTGlzdGVuZXIocSxzLmZufHxzLHMuc2NvcGV8fHIuc2NvcGUscy5mbj9zOnIpfX19ZWxzZXtrPWsudG9Mb3dlckNhc2UoKTtwPW4uZXZlbnRzW2tdfHxnO2lmKHR5cGVvZiBwPT0iYm9vbGVhbiIpe24uZXZlbnRzW2tdPXA9bmV3IGguRXZlbnQobixrKX1wLmFkZExpc3RlbmVyKG0sbCx0eXBlb2Ygcj09Im9iamVjdCI/cjp7fSl9fSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihrLG0sbCl7dmFyIG49dGhpcy5ldmVudHNbay50b0xvd2VyQ2FzZSgpXTtpZih0eXBlb2Ygbj09Im9iamVjdCIpe24ucmVtb3ZlTGlzdGVuZXIobSxsKX19LHB1cmdlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5ldmVudHMsayxsO2ZvcihsIGluIG0pe2s9bVtsXTtpZih0eXBlb2Ygaz09Im9iamVjdCIpe2suY2xlYXJMaXN0ZW5lcnMoKX19fSxhZGRFdmVudHM6ZnVuY3Rpb24obil7dmFyIG09dGhpczttLmV2ZW50cz1tLmV2ZW50c3x8e307aWYodHlwZW9mIG49PSJzdHJpbmciKXt2YXIgaz1hcmd1bWVudHMsbD1rLmxlbmd0aDt3aGlsZShsLS0pe20uZXZlbnRzW2tbbF1dPW0uZXZlbnRzW2tbbF1dfHxnfX1lbHNle0V4dC5hcHBseUlmKG0uZXZlbnRzLG4pfX0saGFzTGlzdGVuZXI6ZnVuY3Rpb24oayl7dmFyIGw9dGhpcy5ldmVudHNbay50b0xvd2VyQ2FzZSgpXTtyZXR1cm4gdHlwZW9mIGw9PSJvYmplY3QiJiZsLmxpc3RlbmVycy5sZW5ndGg+MH0sc3VzcGVuZEV2ZW50czpmdW5jdGlvbihrKXt0aGlzLmV2ZW50c1N1c3BlbmRlZD1nO2lmKGsmJiF0aGlzLmV2ZW50UXVldWUpe3RoaXMuZXZlbnRRdWV1ZT1bXX19LHJlc3VtZUV2ZW50czpmdW5jdGlvbigpe3ZhciBrPXRoaXMsbD1rLmV2ZW50UXVldWV8fFtdO2suZXZlbnRzU3VzcGVuZGVkPWk7ZGVsZXRlIGsuZXZlbnRRdWV1ZTtqKGwsZnVuY3Rpb24obSl7ay5maXJlRXZlbnQuYXBwbHkoayxtKX0pfX07dmFyIGQ9aC5PYnNlcnZhYmxlLnByb3RvdHlwZTtkLm9uPWQuYWRkTGlzdGVuZXI7ZC51bj1kLnJlbW92ZUxpc3RlbmVyO2guT2JzZXJ2YWJsZS5yZWxlYXNlQ2FwdHVyZT1mdW5jdGlvbihrKXtrLmZpcmVFdmVudD1kLmZpcmVFdmVudH07ZnVuY3Rpb24gZShsLG0sayl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYobS50YXJnZXQ9PWFyZ3VtZW50c1swXSl7bC5hcHBseShrLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSl9fX1mdW5jdGlvbiBiKG4scCxrLG0pe2sudGFzaz1uZXcgaC5EZWxheWVkVGFzaygpO3JldHVybiBmdW5jdGlvbigpe2sudGFzay5kZWxheShwLmJ1ZmZlcixuLG0sQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKX19ZnVuY3Rpb24gYyhtLG4sbCxrKXtyZXR1cm4gZnVuY3Rpb24oKXtuLnJlbW92ZUxpc3RlbmVyKGwsayk7cmV0dXJuIG0uYXBwbHkoayxhcmd1bWVudHMpfX1mdW5jdGlvbiBhKG4scCxrLG0pe3JldHVybiBmdW5jdGlvbigpe3ZhciBsPW5ldyBoLkRlbGF5ZWRUYXNrKCksbz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7aWYoIWsudGFza3Mpe2sudGFza3M9W119ay50YXNrcy5wdXNoKGwpO2wuZGVsYXkocC5kZWxheXx8MTAsZnVuY3Rpb24oKXtrLnRhc2tzLnJlbW92ZShsKTtuLmFwcGx5KG0sbyl9LG0pfX1oLkV2ZW50PWZ1bmN0aW9uKGwsayl7dGhpcy5uYW1lPWs7dGhpcy5vYmo9bDt0aGlzLmxpc3RlbmVycz1bXX07aC5FdmVudC5wcm90b3R5cGU9e2FkZExpc3RlbmVyOmZ1bmN0aW9uKG8sbixtKXt2YXIgcD10aGlzLGs7bj1ufHxwLm9iajtpZighcC5pc0xpc3RlbmluZyhvLG4pKXtrPXAuY3JlYXRlTGlzdGVuZXIobyxuLG0pO2lmKHAuZmlyaW5nKXtwLmxpc3RlbmVycz1wLmxpc3RlbmVycy5zbGljZSgwKX1wLmxpc3RlbmVycy5wdXNoKGspfX0sY3JlYXRlTGlzdGVuZXI6ZnVuY3Rpb24ocCxuLHEpe3E9cXx8e307bj1ufHx0aGlzLm9iajt2YXIgaz17Zm46cCxzY29wZTpuLG9wdGlvbnM6cX0sbT1wO2lmKHEudGFyZ2V0KXttPWUobSxxLG4pfWlmKHEuZGVsYXkpe209YShtLHEsayxuKX1pZihxLnNpbmdsZSl7bT1jKG0sdGhpcyxwLG4pfWlmKHEuYnVmZmVyKXttPWIobSxxLGssbil9ay5maXJlRm49bTtyZXR1cm4ga30sZmluZExpc3RlbmVyOmZ1bmN0aW9uKG8sbil7dmFyIHA9dGhpcy5saXN0ZW5lcnMsbT1wLmxlbmd0aCxrO249bnx8dGhpcy5vYmo7d2hpbGUobS0tKXtrPXBbbV07aWYoayl7aWYoay5mbj09byYmay5zY29wZT09bil7cmV0dXJuIG19fX1yZXR1cm4gLTF9LGlzTGlzdGVuaW5nOmZ1bmN0aW9uKGwsayl7cmV0dXJuIHRoaXMuZmluZExpc3RlbmVyKGwsaykhPS0xfSxyZW1vdmVMaXN0ZW5lcjpmdW5jdGlvbihyLHEpe3ZhciBwLG0sbixzPXRoaXMsbz1pO2lmKChwPXMuZmluZExpc3RlbmVyKHIscSkpIT0tMSl7aWYocy5maXJpbmcpe3MubGlzdGVuZXJzPXMubGlzdGVuZXJzLnNsaWNlKDApfW09cy5saXN0ZW5lcnNbcF07aWYobS50YXNrKXttLnRhc2suY2FuY2VsKCk7ZGVsZXRlIG0udGFza31uPW0udGFza3MmJm0udGFza3MubGVuZ3RoO2lmKG4pe3doaWxlKG4tLSl7bS50YXNrc1tuXS5jYW5jZWwoKX1kZWxldGUgbS50YXNrc31zLmxpc3RlbmVycy5zcGxpY2UocCwxKTtvPWd9cmV0dXJuIG99LGNsZWFyTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIG49dGhpcyxrPW4ubGlzdGVuZXJzLG09ay5sZW5ndGg7d2hpbGUobS0tKXtuLnJlbW92ZUxpc3RlbmVyKGtbbV0uZm4sa1ttXS5zY29wZSl9fSxmaXJlOmZ1bmN0aW9uKCl7dmFyIHE9dGhpcyxwPXEubGlzdGVuZXJzLGs9cC5sZW5ndGgsbz0wLG07aWYoaz4wKXtxLmZpcmluZz1nO3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtmb3IoO288aztvKyspe209cFtvXTtpZihtJiZtLmZpcmVGbi5hcHBseShtLnNjb3BlfHxxLm9ianx8d2luZG93LG4pPT09aSl7cmV0dXJuKHEuZmlyaW5nPWkpfX19cS5maXJpbmc9aTtyZXR1cm4gZ319fSkoKTtFeHQuRG9tSGVscGVyPWZ1bmN0aW9uKCl7dmFyIHg9bnVsbCxrPS9eKD86YnJ8ZnJhbWV8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxyYW5nZXxzcGFjZXJ8d2JyfGFyZWF8cGFyYW18Y29sKSQvaSxtPS9edGFibGV8dGJvZHl8dHJ8dGQkL2ksZD0vdGFnfGNoaWxkcmVufGNufGh0bWwkL2ksdD0vdGR8dHJ8dGJvZHkvaSxvPS8oW2EtejAtOS1dKylccyo6XHMqKFteO1xzXSsoPzpccypbXjtcc10rKSopOz8vZ2ksdj0vZW5kL2kscixuPSJhZnRlcmJlZ2luIixwPSJhZnRlcmVuZCIsYz0iYmVmb3JlYmVnaW4iLHE9ImJlZm9yZWVuZCIsYT0iPHRhYmxlPiIsaT0iPC90YWJsZT4iLGI9YSsiPHRib2R5PiIsaj0iPC90Ym9keT4iK2ksbD1iKyI8dHI+Iix3PSI8L3RyPiIrajtmdW5jdGlvbiBoKEIsRCxDLEUsQSx5KXt2YXIgej1yLmluc2VydEh0bWwoRSxFeHQuZ2V0RG9tKEIpLHUoRCkpO3JldHVybiBDP0V4dC5nZXQoeix0cnVlKTp6fWZ1bmN0aW9uIHUoRCl7dmFyIHo9IiIseSxDLEIsRTtpZih0eXBlb2YgRD09InN0cmluZyIpe3o9RH1lbHNle2lmKEV4dC5pc0FycmF5KEQpKXtmb3IodmFyIEE9MDtBPEQubGVuZ3RoO0ErKyl7aWYoRFtBXSl7eis9dShEW0FdKX19fWVsc2V7eis9IjwiKyhELnRhZz1ELnRhZ3x8ImRpdiIpO2Zvcih5IGluIEQpe0M9RFt5XTtpZighZC50ZXN0KHkpKXtpZih0eXBlb2YgQz09Im9iamVjdCIpe3orPSIgIit5Kyc9Iic7Zm9yKEIgaW4gQyl7eis9QisiOiIrQ1tCXSsiOyJ9eis9JyInfWVsc2V7eis9IiAiKyh7Y2xzOiJjbGFzcyIsaHRtbEZvcjoiZm9yIn1beV18fHkpKyc9IicrQysnIid9fX1pZihrLnRlc3QoRC50YWcpKXt6Kz0iLz4ifWVsc2V7eis9Ij4iO2lmKChFPUQuY2hpbGRyZW58fEQuY24pKXt6Kz11KEUpfWVsc2V7aWYoRC5odG1sKXt6Kz1ELmh0bWx9fXorPSI8LyIrRC50YWcrIj4ifX19cmV0dXJuIHp9ZnVuY3Rpb24gZyhGLEMsQixEKXt4LmlubmVySFRNTD1bQyxCLERdLmpvaW4oIiIpO3ZhciB5PS0xLEE9eCx6O3doaWxlKCsreTxGKXtBPUEuZmlyc3RDaGlsZH1pZih6PUEubmV4dFNpYmxpbmcpe3ZhciBFPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt3aGlsZShBKXt6PUEubmV4dFNpYmxpbmc7RS5hcHBlbmRDaGlsZChBKTtBPXp9QT1FfXJldHVybiBBfWZ1bmN0aW9uIGUoeSx6LEIsQSl7dmFyIEMsRDt4PXh8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO2lmKHk9PSJ0ZCImJih6PT1ufHx6PT1xKXx8IXQudGVzdCh5KSYmKHo9PWN8fHo9PXApKXtyZXR1cm59RD16PT1jP0I6ej09cD9CLm5leHRTaWJsaW5nOno9PW4/Qi5maXJzdENoaWxkOm51bGw7aWYoej09Y3x8ej09cCl7Qj1CLnBhcmVudE5vZGV9aWYoeT09InRkInx8KHk9PSJ0ciImJih6PT1xfHx6PT1uKSkpe0M9Zyg0LGwsQSx3KX1lbHNle2lmKCh5PT0idGJvZHkiJiYoej09cXx8ej09bikpfHwoeT09InRyIiYmKHo9PWN8fHo9PXApKSl7Qz1nKDMsYixBLGopfWVsc2V7Qz1nKDIsYSxBLGkpfX1CLmluc2VydEJlZm9yZShDLEQpO3JldHVybiBDfWZ1bmN0aW9uIHMoQSl7dmFyIEQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikseT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksej0wLEIsQztELmlubmVySFRNTD1BO0M9RC5jaGlsZE5vZGVzO0I9Qy5sZW5ndGg7Zm9yKDt6PEI7eisrKXt5LmFwcGVuZENoaWxkKENbel0uY2xvbmVOb2RlKHRydWUpKX1yZXR1cm4geX1yPXttYXJrdXA6ZnVuY3Rpb24oeSl7cmV0dXJuIHUoeSl9LGFwcGx5U3R5bGVzOmZ1bmN0aW9uKHkseil7aWYoeil7dmFyIEE7eT1FeHQuZmx5KHkpO2lmKHR5cGVvZiB6PT0iZnVuY3Rpb24iKXt6PXouY2FsbCgpfWlmKHR5cGVvZiB6PT0ic3RyaW5nIil7by5sYXN0SW5kZXg9MDt3aGlsZSgoQT1vLmV4ZWMoeikpKXt5LnNldFN0eWxlKEFbMV0sQVsyXSl9fWVsc2V7aWYodHlwZW9mIHo9PSJvYmplY3QiKXt5LnNldFN0eWxlKHopfX19fSxpbnNlcnRIdG1sOmZ1bmN0aW9uKEQseSxFKXt2YXIgQj17fSxBLEYsQyxHLEgsejtEPUQudG9Mb3dlckNhc2UoKTtCW2NdPVsiQmVmb3JlQmVnaW4iLCJwcmV2aW91c1NpYmxpbmciXTtCW3BdPVsiQWZ0ZXJFbmQiLCJuZXh0U2libGluZyJdO2lmKHkuaW5zZXJ0QWRqYWNlbnRIVE1MKXtpZihtLnRlc3QoeS50YWdOYW1lKSYmKHo9ZSh5LnRhZ05hbWUudG9Mb3dlckNhc2UoKSxELHksRSkpKXtyZXR1cm4gen1CW25dPVsiQWZ0ZXJCZWdpbiIsImZpcnN0Q2hpbGQiXTtCW3FdPVsiQmVmb3JlRW5kIiwibGFzdENoaWxkIl07aWYoKEE9QltEXSkpe3kuaW5zZXJ0QWRqYWNlbnRIVE1MKEFbMF0sRSk7cmV0dXJuIHlbQVsxXV19fWVsc2V7Rj15Lm93bmVyRG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtHPSJzZXRTdGFydCIrKHYudGVzdChEKT8iQWZ0ZXIiOiJCZWZvcmUiKTtpZihCW0RdKXtGW0ddKHkpO2lmKCFGLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCl7SD1zKEUpfWVsc2V7SD1GLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChFKX15LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKEgsRD09Yz95OnkubmV4dFNpYmxpbmcpO3JldHVybiB5WyhEPT1jPyJwcmV2aW91cyI6Im5leHQiKSsiU2libGluZyJdfWVsc2V7Qz0oRD09bj8iZmlyc3QiOiJsYXN0IikrIkNoaWxkIjtpZih5LmZpcnN0Q2hpbGQpe0ZbR10oeVtDXSk7aWYoIUYuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KXtIPXMoRSl9ZWxzZXtIPUYuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KEUpfWlmKEQ9PW4pe3kuaW5zZXJ0QmVmb3JlKEgseS5maXJzdENoaWxkKX1lbHNle3kuYXBwZW5kQ2hpbGQoSCl9fWVsc2V7eS5pbm5lckhUTUw9RX1yZXR1cm4geVtDXX19dGhyb3cnSWxsZWdhbCBpbnNlcnRpb24gcG9pbnQgLT4gIicrRCsnIid9LGluc2VydEJlZm9yZTpmdW5jdGlvbih5LEEseil7cmV0dXJuIGgoeSxBLHosYyl9LGluc2VydEFmdGVyOmZ1bmN0aW9uKHksQSx6KXtyZXR1cm4gaCh5LEEseixwLCJuZXh0U2libGluZyIpfSxpbnNlcnRGaXJzdDpmdW5jdGlvbih5LEEseil7cmV0dXJuIGgoeSxBLHosbiwiZmlyc3RDaGlsZCIpfSxhcHBlbmQ6ZnVuY3Rpb24oeSxBLHope3JldHVybiBoKHksQSx6LHEsIiIsdHJ1ZSl9LG92ZXJ3cml0ZTpmdW5jdGlvbih5LEEseil7eT1FeHQuZ2V0RG9tKHkpO3kuaW5uZXJIVE1MPXUoQSk7cmV0dXJuIHo/RXh0LmdldCh5LmZpcnN0Q2hpbGQpOnkuZmlyc3RDaGlsZH0sY3JlYXRlSHRtbDp1fTtyZXR1cm4gcn0oKTtFeHQuVGVtcGxhdGU9ZnVuY3Rpb24oaCl7dmFyIGo9dGhpcyxjPWFyZ3VtZW50cyxlPVtdLGQ7aWYoRXh0LmlzQXJyYXkoaCkpe2g9aC5qb2luKCIiKX1lbHNle2lmKGMubGVuZ3RoPjEpe2Zvcih2YXIgZz0wLGI9Yy5sZW5ndGg7ZzxiO2crKyl7ZD1jW2ddO2lmKHR5cGVvZiBkPT0ib2JqZWN0Iil7RXh0LmFwcGx5KGosZCl9ZWxzZXtlLnB1c2goZCl9fWg9ZS5qb2luKCIiKX19ai5odG1sPWg7aWYoai5jb21waWxlZCl7ai5jb21waWxlKCl9fTtFeHQuVGVtcGxhdGUucHJvdG90eXBlPXtyZTovXHsoW1x3XC1dKylcfS9nLGFwcGx5VGVtcGxhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztyZXR1cm4gYi5jb21waWxlZD9iLmNvbXBpbGVkKGEpOmIuaHRtbC5yZXBsYWNlKGIucmUsZnVuY3Rpb24oYyxkKXtyZXR1cm4gYVtkXSE9PXVuZGVmaW5lZD9hW2RdOiIifSl9LHNldDpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXM7Yi5odG1sPWE7Yi5jb21waWxlZD1udWxsO3JldHVybiBjP2IuY29tcGlsZSgpOmJ9LGNvbXBpbGU6ZnVuY3Rpb24oKXt2YXIgbWU9dGhpcyxzZXA9RXh0LmlzR2Vja28/IisiOiIsIjtmdW5jdGlvbiBmbihtLG5hbWUpe25hbWU9InZhbHVlc1snIituYW1lKyInXSI7cmV0dXJuIiciK3NlcCsiKCIrbmFtZSsiID09IHVuZGVmaW5lZCA/ICcnIDogIituYW1lKyIpIitzZXArIicifWV2YWwoInRoaXMuY29tcGlsZWQgPSBmdW5jdGlvbih2YWx1ZXMpeyByZXR1cm4gIisoRXh0LmlzR2Vja28/IiciOiJbJyIpK21lLmh0bWwucmVwbGFjZSgvXFwvZywiXFxcXCIpLnJlcGxhY2UoLyhcclxufFxuKS9nLCJcXG4iKS5yZXBsYWNlKC8nL2csIlxcJyIpLnJlcGxhY2UodGhpcy5yZSxmbikrKEV4dC5pc0dlY2tvPyInO307IjoiJ10uam9pbignJyk7fTsiKSk7cmV0dXJuIG1lfSxpbnNlcnRGaXJzdDpmdW5jdGlvbihiLGEsYyl7cmV0dXJuIHRoaXMuZG9JbnNlcnQoImFmdGVyQmVnaW4iLGIsYSxjKX0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdGhpcy5kb0luc2VydCgiYmVmb3JlQmVnaW4iLGIsYSxjKX0saW5zZXJ0QWZ0ZXI6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0aGlzLmRvSW5zZXJ0KCJhZnRlckVuZCIsYixhLGMpfSxhcHBlbmQ6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0aGlzLmRvSW5zZXJ0KCJiZWZvcmVFbmQiLGIsYSxjKX0sZG9JbnNlcnQ6ZnVuY3Rpb24oYyxlLGIsYSl7ZT1FeHQuZ2V0RG9tKGUpO3ZhciBkPUV4dC5Eb21IZWxwZXIuaW5zZXJ0SHRtbChjLGUsdGhpcy5hcHBseVRlbXBsYXRlKGIpKTtyZXR1cm4gYT9FeHQuZ2V0KGQsdHJ1ZSk6ZH0sb3ZlcndyaXRlOmZ1bmN0aW9uKGIsYSxjKXtiPUV4dC5nZXREb20oYik7Yi5pbm5lckhUTUw9dGhpcy5hcHBseVRlbXBsYXRlKGEpO3JldHVybiBjP0V4dC5nZXQoYi5maXJzdENoaWxkLHRydWUpOmIuZmlyc3RDaGlsZH19O0V4dC5UZW1wbGF0ZS5wcm90b3R5cGUuYXBwbHk9RXh0LlRlbXBsYXRlLnByb3RvdHlwZS5hcHBseVRlbXBsYXRlO0V4dC5UZW1wbGF0ZS5mcm9tPWZ1bmN0aW9uKGIsYSl7Yj1FeHQuZ2V0RG9tKGIpO3JldHVybiBuZXcgRXh0LlRlbXBsYXRlKGIudmFsdWV8fGIuaW5uZXJIVE1MLGF8fCIiKX07RXh0LkRvbVF1ZXJ5PWZ1bmN0aW9uKCl7dmFyIGNhY2hlPXt9LHNpbXBsZUNhY2hlPXt9LHZhbHVlQ2FjaGU9e30sbm9uU3BhY2U9L1xTLyx0cmltUmU9L15ccyt8XHMrJC9nLHRwbFJlPS9ceyhcZCspXH0vZyxtb2RlUmU9L14oXHM/W1wvPit+XVxzP3xcc3wkKS8sdGFnVG9rZW5SZT0vXigjKT8oW1x3XC1cKl0rKS8sbnRoUmU9LyhcZCopblwrPyhcZCopLyxudGhSZTI9L1xELyxpc0lFPXdpbmRvdy5BY3RpdmVYT2JqZWN0P3RydWU6ZmFsc2Usa2V5PTMwODAzO2V2YWwoInZhciBiYXRjaCA9IDMwODAzOyIpO2Z1bmN0aW9uIGNoaWxkKHBhcmVudCxpbmRleCl7dmFyIGk9MCxuPXBhcmVudC5maXJzdENoaWxkO3doaWxlKG4pe2lmKG4ubm9kZVR5cGU9PTEpe2lmKCsraT09aW5kZXgpe3JldHVybiBufX1uPW4ubmV4dFNpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gbmV4dChuKXt3aGlsZSgobj1uLm5leHRTaWJsaW5nKSYmbi5ub2RlVHlwZSE9MSl7fXJldHVybiBufWZ1bmN0aW9uIHByZXYobil7d2hpbGUoKG49bi5wcmV2aW91c1NpYmxpbmcpJiZuLm5vZGVUeXBlIT0xKXt9cmV0dXJuIG59ZnVuY3Rpb24gY2hpbGRyZW4ocGFyZW50KXt2YXIgbj1wYXJlbnQuZmlyc3RDaGlsZCxub2RlSW5kZXg9LTEsbmV4dE5vZGU7d2hpbGUobil7bmV4dE5vZGU9bi5uZXh0U2libGluZztpZihuLm5vZGVUeXBlPT0zJiYhbm9uU3BhY2UudGVzdChuLm5vZGVWYWx1ZSkpe3BhcmVudC5yZW1vdmVDaGlsZChuKX1lbHNle24ubm9kZUluZGV4PSsrbm9kZUluZGV4fW49bmV4dE5vZGV9cmV0dXJuIHRoaXN9ZnVuY3Rpb24gYnlDbGFzc05hbWUobm9kZVNldCxjbHMpe2lmKCFjbHMpe3JldHVybiBub2RlU2V0fXZhciByZXN1bHQ9W10scmk9LTE7Zm9yKHZhciBpPTAsY2k7Y2k9bm9kZVNldFtpXTtpKyspe2lmKCgiICIrY2kuY2xhc3NOYW1lKyIgIikuaW5kZXhPZihjbHMpIT0tMSl7cmVzdWx0WysrcmldPWNpfX1yZXR1cm4gcmVzdWx0fWZ1bmN0aW9uIGF0dHJWYWx1ZShuLGF0dHIpe2lmKCFuLnRhZ05hbWUmJnR5cGVvZiBuLmxlbmd0aCE9InVuZGVmaW5lZCIpe249blswXX1pZighbil7cmV0dXJuIG51bGx9aWYoYXR0cj09ImZvciIpe3JldHVybiBuLmh0bWxGb3J9aWYoYXR0cj09ImNsYXNzInx8YXR0cj09ImNsYXNzTmFtZSIpe3JldHVybiBuLmNsYXNzTmFtZX1yZXR1cm4gbi5nZXRBdHRyaWJ1dGUoYXR0cil8fG5bYXR0cl19ZnVuY3Rpb24gZ2V0Tm9kZXMobnMsbW9kZSx0YWdOYW1lKXt2YXIgcmVzdWx0PVtdLHJpPS0xLGNzO2lmKCFucyl7cmV0dXJuIHJlc3VsdH10YWdOYW1lPXRhZ05hbWV8fCIqIjtpZih0eXBlb2YgbnMuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPSJ1bmRlZmluZWQiKXtucz1bbnNdfWlmKCFtb2RlKXtmb3IodmFyIGk9MCxuaTtuaT1uc1tpXTtpKyspe2NzPW5pLmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpO2Zvcih2YXIgaj0wLGNpO2NpPWNzW2pdO2orKyl7cmVzdWx0WysrcmldPWNpfX19ZWxzZXtpZihtb2RlPT0iLyJ8fG1vZGU9PSI+Iil7dmFyIHV0YWc9dGFnTmFtZS50b1VwcGVyQ2FzZSgpO2Zvcih2YXIgaT0wLG5pLGNuO25pPW5zW2ldO2krKyl7Y249bmkuY2hpbGROb2Rlcztmb3IodmFyIGo9MCxjajtjaj1jbltqXTtqKyspe2lmKGNqLm5vZGVOYW1lPT11dGFnfHxjai5ub2RlTmFtZT09dGFnTmFtZXx8dGFnTmFtZT09IioiKXtyZXN1bHRbKytyaV09Y2p9fX19ZWxzZXtpZihtb2RlPT0iKyIpe3ZhciB1dGFnPXRhZ05hbWUudG9VcHBlckNhc2UoKTtmb3IodmFyIGk9MCxuO249bnNbaV07aSsrKXt3aGlsZSgobj1uLm5leHRTaWJsaW5nKSYmbi5ub2RlVHlwZSE9MSl7fWlmKG4mJihuLm5vZGVOYW1lPT11dGFnfHxuLm5vZGVOYW1lPT10YWdOYW1lfHx0YWdOYW1lPT0iKiIpKXtyZXN1bHRbKytyaV09bn19fWVsc2V7aWYobW9kZT09In4iKXt2YXIgdXRhZz10YWdOYW1lLnRvVXBwZXJDYXNlKCk7Zm9yKHZhciBpPTAsbjtuPW5zW2ldO2krKyl7d2hpbGUoKG49bi5uZXh0U2libGluZykpe2lmKG4ubm9kZU5hbWU9PXV0YWd8fG4ubm9kZU5hbWU9PXRhZ05hbWV8fHRhZ05hbWU9PSIqIil7cmVzdWx0WysrcmldPW59fX19fX19cmV0dXJuIHJlc3VsdH1mdW5jdGlvbiBjb25jYXQoYSxiKXtpZihiLnNsaWNlKXtyZXR1cm4gYS5jb25jYXQoYil9Zm9yKHZhciBpPTAsbD1iLmxlbmd0aDtpPGw7aSsrKXthW2EubGVuZ3RoXT1iW2ldfXJldHVybiBhfWZ1bmN0aW9uIGJ5VGFnKGNzLHRhZ05hbWUpe2lmKGNzLnRhZ05hbWV8fGNzPT1kb2N1bWVudCl7Y3M9W2NzXX1pZighdGFnTmFtZSl7cmV0dXJuIGNzfXZhciByZXN1bHQ9W10scmk9LTE7dGFnTmFtZT10YWdOYW1lLnRvTG93ZXJDYXNlKCk7Zm9yKHZhciBpPTAsY2k7Y2k9Y3NbaV07aSsrKXtpZihjaS5ub2RlVHlwZT09MSYmY2kudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT10YWdOYW1lKXtyZXN1bHRbKytyaV09Y2l9fXJldHVybiByZXN1bHR9ZnVuY3Rpb24gYnlJZChjcyxpZCl7aWYoY3MudGFnTmFtZXx8Y3M9PWRvY3VtZW50KXtjcz1bY3NdfWlmKCFpZCl7cmV0dXJuIGNzfXZhciByZXN1bHQ9W10scmk9LTE7Zm9yKHZhciBpPTAsY2k7Y2k9Y3NbaV07aSsrKXtpZihjaSYmY2kuaWQ9PWlkKXtyZXN1bHRbKytyaV09Y2k7cmV0dXJuIHJlc3VsdH19cmV0dXJuIHJlc3VsdH1mdW5jdGlvbiBieUF0dHJpYnV0ZShjcyxhdHRyLHZhbHVlLG9wLGN1c3RvbSl7dmFyIHJlc3VsdD1bXSxyaT0tMSx1c2VHZXRTdHlsZT1jdXN0b209PSJ7Iixmbj1FeHQuRG9tUXVlcnkub3BlcmF0b3JzW29wXSxhLHhtbCxoYXNYbWw7Zm9yKHZhciBpPTAsY2k7Y2k9Y3NbaV07aSsrKXtpZihjaS5ub2RlVHlwZSE9MSl7Y29udGludWV9aWYoIWhhc1htbCl7eG1sPUV4dC5Eb21RdWVyeS5pc1htbChjaSk7aGFzWG1sPXRydWV9aWYoIXhtbCl7aWYodXNlR2V0U3R5bGUpe2E9RXh0LkRvbVF1ZXJ5LmdldFN0eWxlKGNpLGF0dHIpfWVsc2V7aWYoYXR0cj09ImNsYXNzInx8YXR0cj09ImNsYXNzTmFtZSIpe2E9Y2kuY2xhc3NOYW1lfWVsc2V7aWYoYXR0cj09ImZvciIpe2E9Y2kuaHRtbEZvcn1lbHNle2lmKGF0dHI9PSJocmVmIil7YT1jaS5nZXRBdHRyaWJ1dGUoImhyZWYiLDIpfWVsc2V7YT1jaS5nZXRBdHRyaWJ1dGUoYXR0cil9fX19fWVsc2V7YT1jaS5nZXRBdHRyaWJ1dGUoYXR0cil9aWYoKGZuJiZmbihhLHZhbHVlKSl8fCghZm4mJmEpKXtyZXN1bHRbKytyaV09Y2l9fXJldHVybiByZXN1bHR9ZnVuY3Rpb24gYnlQc2V1ZG8oY3MsbmFtZSx2YWx1ZSl7cmV0dXJuIEV4dC5Eb21RdWVyeS5wc2V1ZG9zW25hbWVdKGNzLHZhbHVlKX1mdW5jdGlvbiBub2R1cElFWG1sKGNzKXt2YXIgZD0rK2tleSxyO2NzWzBdLnNldEF0dHJpYnV0ZSgiX25vZHVwIixkKTtyPVtjc1swXV07Zm9yKHZhciBpPTEsbGVuPWNzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciBjPWNzW2ldO2lmKCFjLmdldEF0dHJpYnV0ZSgiX25vZHVwIikhPWQpe2Muc2V0QXR0cmlidXRlKCJfbm9kdXAiLGQpO3Jbci5sZW5ndGhdPWN9fWZvcih2YXIgaT0wLGxlbj1jcy5sZW5ndGg7aTxsZW47aSsrKXtjc1tpXS5yZW1vdmVBdHRyaWJ1dGUoIl9ub2R1cCIpfXJldHVybiByfWZ1bmN0aW9uIG5vZHVwKGNzKXtpZighY3Mpe3JldHVybltdfXZhciBsZW49Y3MubGVuZ3RoLGMsaSxyPWNzLGNqLHJpPS0xO2lmKCFsZW58fHR5cGVvZiBjcy5ub2RlVHlwZSE9InVuZGVmaW5lZCJ8fGxlbj09MSl7cmV0dXJuIGNzfWlmKGlzSUUmJnR5cGVvZiBjc1swXS5zZWxlY3RTaW5nbGVOb2RlIT0idW5kZWZpbmVkIil7cmV0dXJuIG5vZHVwSUVYbWwoY3MpfXZhciBkPSsra2V5O2NzWzBdLl9ub2R1cD1kO2ZvcihpPTE7Yz1jc1tpXTtpKyspe2lmKGMuX25vZHVwIT1kKXtjLl9ub2R1cD1kfWVsc2V7cj1bXTtmb3IodmFyIGo9MDtqPGk7aisrKXtyWysrcmldPWNzW2pdfWZvcihqPWkrMTtjaj1jc1tqXTtqKyspe2lmKGNqLl9ub2R1cCE9ZCl7Y2ouX25vZHVwPWQ7clsrK3JpXT1jan19cmV0dXJuIHJ9fXJldHVybiByfWZ1bmN0aW9uIHF1aWNrRGlmZklFWG1sKGMxLGMyKXt2YXIgZD0rK2tleSxyPVtdO2Zvcih2YXIgaT0wLGxlbj1jMS5sZW5ndGg7aTxsZW47aSsrKXtjMVtpXS5zZXRBdHRyaWJ1dGUoIl9xZGlmZiIsZCl9Zm9yKHZhciBpPTAsbGVuPWMyLmxlbmd0aDtpPGxlbjtpKyspe2lmKGMyW2ldLmdldEF0dHJpYnV0ZSgiX3FkaWZmIikhPWQpe3Jbci5sZW5ndGhdPWMyW2ldfX1mb3IodmFyIGk9MCxsZW49YzEubGVuZ3RoO2k8bGVuO2krKyl7YzFbaV0ucmVtb3ZlQXR0cmlidXRlKCJfcWRpZmYiKX1yZXR1cm4gcn1mdW5jdGlvbiBxdWlja0RpZmYoYzEsYzIpe3ZhciBsZW4xPWMxLmxlbmd0aCxkPSsra2V5LHI9W107aWYoIWxlbjEpe3JldHVybiBjMn1pZihpc0lFJiZ0eXBlb2YgYzFbMF0uc2VsZWN0U2luZ2xlTm9kZSE9InVuZGVmaW5lZCIpe3JldHVybiBxdWlja0RpZmZJRVhtbChjMSxjMil9Zm9yKHZhciBpPTA7aTxsZW4xO2krKyl7YzFbaV0uX3FkaWZmPWR9Zm9yKHZhciBpPTAsbGVuPWMyLmxlbmd0aDtpPGxlbjtpKyspe2lmKGMyW2ldLl9xZGlmZiE9ZCl7cltyLmxlbmd0aF09YzJbaV19fXJldHVybiByfWZ1bmN0aW9uIHF1aWNrSWQobnMsbW9kZSxyb290LGlkKXtpZihucz09cm9vdCl7dmFyIGQ9cm9vdC5vd25lckRvY3VtZW50fHxyb290O3JldHVybiBkLmdldEVsZW1lbnRCeUlkKGlkKX1ucz1nZXROb2Rlcyhucyxtb2RlLCIqIik7cmV0dXJuIGJ5SWQobnMsaWQpfXJldHVybntnZXRTdHlsZTpmdW5jdGlvbihlbCxuYW1lKXtyZXR1cm4gRXh0LmZseShlbCkuZ2V0U3R5bGUobmFtZSl9LGNvbXBpbGU6ZnVuY3Rpb24ocGF0aCx0eXBlKXt0eXBlPXR5cGV8fCJzZWxlY3QiO3ZhciBmbj1bInZhciBmID0gZnVuY3Rpb24ocm9vdCl7XG4gdmFyIG1vZGU7ICsrYmF0Y2g7IHZhciBuID0gcm9vdCB8fCBkb2N1bWVudDtcbiJdLG1vZGUsbGFzdFBhdGgsbWF0Y2hlcnM9RXh0LkRvbVF1ZXJ5Lm1hdGNoZXJzLG1hdGNoZXJzTG49bWF0Y2hlcnMubGVuZ3RoLG1vZGVNYXRjaCxsbW9kZT1wYXRoLm1hdGNoKG1vZGVSZSk7aWYobG1vZGUmJmxtb2RlWzFdKXtmbltmbi5sZW5ndGhdPSdtb2RlPSInK2xtb2RlWzFdLnJlcGxhY2UodHJpbVJlLCIiKSsnIjsnO3BhdGg9cGF0aC5yZXBsYWNlKGxtb2RlWzFdLCIiKX13aGlsZShwYXRoLnN1YnN0cigwLDEpPT0iLyIpe3BhdGg9cGF0aC5zdWJzdHIoMSl9d2hpbGUocGF0aCYmbGFzdFBhdGghPXBhdGgpe2xhc3RQYXRoPXBhdGg7dmFyIHRva2VuTWF0Y2g9cGF0aC5tYXRjaCh0YWdUb2tlblJlKTtpZih0eXBlPT0ic2VsZWN0Iil7aWYodG9rZW5NYXRjaCl7aWYodG9rZW5NYXRjaFsxXT09IiMiKXtmbltmbi5sZW5ndGhdPSduID0gcXVpY2tJZChuLCBtb2RlLCByb290LCAiJyt0b2tlbk1hdGNoWzJdKyciKTsnfWVsc2V7Zm5bZm4ubGVuZ3RoXT0nbiA9IGdldE5vZGVzKG4sIG1vZGUsICInK3Rva2VuTWF0Y2hbMl0rJyIpOyd9cGF0aD1wYXRoLnJlcGxhY2UodG9rZW5NYXRjaFswXSwiIil9ZWxzZXtpZihwYXRoLnN1YnN0cigwLDEpIT0iQCIpe2ZuW2ZuLmxlbmd0aF09J24gPSBnZXROb2RlcyhuLCBtb2RlLCAiKiIpOyd9fX1lbHNle2lmKHRva2VuTWF0Y2gpe2lmKHRva2VuTWF0Y2hbMV09PSIjIil7Zm5bZm4ubGVuZ3RoXT0nbiA9IGJ5SWQobiwgIicrdG9rZW5NYXRjaFsyXSsnIik7J31lbHNle2ZuW2ZuLmxlbmd0aF09J24gPSBieVRhZyhuLCAiJyt0b2tlbk1hdGNoWzJdKyciKTsnfXBhdGg9cGF0aC5yZXBsYWNlKHRva2VuTWF0Y2hbMF0sIiIpfX13aGlsZSghKG1vZGVNYXRjaD1wYXRoLm1hdGNoKG1vZGVSZSkpKXt2YXIgbWF0Y2hlZD1mYWxzZTtmb3IodmFyIGo9MDtqPG1hdGNoZXJzTG47aisrKXt2YXIgdD1tYXRjaGVyc1tqXTt2YXIgbT1wYXRoLm1hdGNoKHQucmUpO2lmKG0pe2ZuW2ZuLmxlbmd0aF09dC5zZWxlY3QucmVwbGFjZSh0cGxSZSxmdW5jdGlvbih4LGkpe3JldHVybiBtW2ldfSk7cGF0aD1wYXRoLnJlcGxhY2UobVswXSwiIik7bWF0Y2hlZD10cnVlO2JyZWFrfX1pZighbWF0Y2hlZCl7dGhyb3cnRXJyb3IgcGFyc2luZyBzZWxlY3RvciwgcGFyc2luZyBmYWlsZWQgYXQgIicrcGF0aCsnIid9fWlmKG1vZGVNYXRjaFsxXSl7Zm5bZm4ubGVuZ3RoXT0nbW9kZT0iJyttb2RlTWF0Y2hbMV0ucmVwbGFjZSh0cmltUmUsIiIpKyciOyc7cGF0aD1wYXRoLnJlcGxhY2UobW9kZU1hdGNoWzFdLCIiKX19Zm5bZm4ubGVuZ3RoXT0icmV0dXJuIG5vZHVwKG4pO1xufSI7ZXZhbChmbi5qb2luKCIiKSk7cmV0dXJuIGZ9LGpzU2VsZWN0OmZ1bmN0aW9uKHBhdGgscm9vdCx0eXBlKXtyb290PXJvb3R8fGRvY3VtZW50O2lmKHR5cGVvZiByb290PT0ic3RyaW5nIil7cm9vdD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChyb290KX12YXIgcGF0aHM9cGF0aC5zcGxpdCgiLCIpLHJlc3VsdHM9W107Zm9yKHZhciBpPTAsbGVuPXBhdGhzLmxlbmd0aDtpPGxlbjtpKyspe3ZhciBzdWJQYXRoPXBhdGhzW2ldLnJlcGxhY2UodHJpbVJlLCIiKTtpZighY2FjaGVbc3ViUGF0aF0pe2NhY2hlW3N1YlBhdGhdPUV4dC5Eb21RdWVyeS5jb21waWxlKHN1YlBhdGgpO2lmKCFjYWNoZVtzdWJQYXRoXSl7dGhyb3cgc3ViUGF0aCsiIGlzIG5vdCBhIHZhbGlkIHNlbGVjdG9yIn19dmFyIHJlc3VsdD1jYWNoZVtzdWJQYXRoXShyb290KTtpZihyZXN1bHQmJnJlc3VsdCE9ZG9jdW1lbnQpe3Jlc3VsdHM9cmVzdWx0cy5jb25jYXQocmVzdWx0KX19aWYocGF0aHMubGVuZ3RoPjEpe3JldHVybiBub2R1cChyZXN1bHRzKX1yZXR1cm4gcmVzdWx0c30saXNYbWw6ZnVuY3Rpb24oZWwpe3ZhciBkb2NFbD0oZWw/ZWwub3duZXJEb2N1bWVudHx8ZWw6MCkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBkb2NFbD9kb2NFbC5ub2RlTmFtZSE9PSJIVE1MIjpmYWxzZX0sc2VsZWN0OmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw/ZnVuY3Rpb24ocGF0aCxyb290LHR5cGUpe3Jvb3Q9cm9vdHx8ZG9jdW1lbnQ7aWYoIUV4dC5Eb21RdWVyeS5pc1htbChyb290KSl7dHJ5e3ZhciBjcz1yb290LnF1ZXJ5U2VsZWN0b3JBbGwocGF0aCk7cmV0dXJuIEV4dC50b0FycmF5KGNzKX1jYXRjaChleCl7fX1yZXR1cm4gRXh0LkRvbVF1ZXJ5LmpzU2VsZWN0LmNhbGwodGhpcyxwYXRoLHJvb3QsdHlwZSl9OmZ1bmN0aW9uKHBhdGgscm9vdCx0eXBlKXtyZXR1cm4gRXh0LkRvbVF1ZXJ5LmpzU2VsZWN0LmNhbGwodGhpcyxwYXRoLHJvb3QsdHlwZSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24ocGF0aCxyb290KXtyZXR1cm4gRXh0LkRvbVF1ZXJ5LnNlbGVjdChwYXRoLHJvb3QpWzBdfSxzZWxlY3RWYWx1ZTpmdW5jdGlvbihwYXRoLHJvb3QsZGVmYXVsdFZhbHVlKXtwYXRoPXBhdGgucmVwbGFjZSh0cmltUmUsIiIpO2lmKCF2YWx1ZUNhY2hlW3BhdGhdKXt2YWx1ZUNhY2hlW3BhdGhdPUV4dC5Eb21RdWVyeS5jb21waWxlKHBhdGgsInNlbGVjdCIpfXZhciBuPXZhbHVlQ2FjaGVbcGF0aF0ocm9vdCksdjtuPW5bMF0/blswXTpuO2lmKHR5cGVvZiBuLm5vcm1hbGl6ZT09ImZ1bmN0aW9uIil7bi5ub3JtYWxpemUoKX12PShuJiZuLmZpcnN0Q2hpbGQ/bi5maXJzdENoaWxkLm5vZGVWYWx1ZTpudWxsKTtyZXR1cm4oKHY9PT1udWxsfHx2PT09dW5kZWZpbmVkfHx2PT09IiIpP2RlZmF1bHRWYWx1ZTp2KX0sc2VsZWN0TnVtYmVyOmZ1bmN0aW9uKHBhdGgscm9vdCxkZWZhdWx0VmFsdWUpe3ZhciB2PUV4dC5Eb21RdWVyeS5zZWxlY3RWYWx1ZShwYXRoLHJvb3QsZGVmYXVsdFZhbHVlfHwwKTtyZXR1cm4gcGFyc2VGbG9hdCh2KX0saXM6ZnVuY3Rpb24oZWwsc3Mpe2lmKHR5cGVvZiBlbD09InN0cmluZyIpe2VsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKX12YXIgaXNBcnJheT1FeHQuaXNBcnJheShlbCkscmVzdWx0PUV4dC5Eb21RdWVyeS5maWx0ZXIoaXNBcnJheT9lbDpbZWxdLHNzKTtyZXR1cm4gaXNBcnJheT8ocmVzdWx0Lmxlbmd0aD09ZWwubGVuZ3RoKToocmVzdWx0Lmxlbmd0aD4wKX0sZmlsdGVyOmZ1bmN0aW9uKGVscyxzcyxub25NYXRjaGVzKXtzcz1zcy5yZXBsYWNlKHRyaW1SZSwiIik7aWYoIXNpbXBsZUNhY2hlW3NzXSl7c2ltcGxlQ2FjaGVbc3NdPUV4dC5Eb21RdWVyeS5jb21waWxlKHNzLCJzaW1wbGUiKX12YXIgcmVzdWx0PXNpbXBsZUNhY2hlW3NzXShlbHMpO3JldHVybiBub25NYXRjaGVzP3F1aWNrRGlmZihyZXN1bHQsZWxzKTpyZXN1bHR9LG1hdGNoZXJzOlt7cmU6L15cLihbXHdcLV0rKS8sc2VsZWN0OiduID0gYnlDbGFzc05hbWUobiwgIiB7MX0gIik7J30se3JlOi9eXDooW1x3XC1dKykoPzpcKCgoPzpbXlxzPlwvXSp8Lio/KSlcKSk/LyxzZWxlY3Q6J24gPSBieVBzZXVkbyhuLCAiezF9IiwgInsyfSIpOyd9LHtyZTovXig/OihbXFtce10pKD86QCk/KFtcd1wtXSspXHM/KD86KD18Lj0pXHM/KFsiJ10/KSguKj8pXDQpP1tcXVx9XSkvLHNlbGVjdDonbiA9IGJ5QXR0cmlidXRlKG4sICJ7Mn0iLCAiezV9IiwgInszfSIsICJ7MX0iKTsnfSx7cmU6L14jKFtcd1wtXSspLyxzZWxlY3Q6J24gPSBieUlkKG4sICJ7MX0iKTsnfSx7cmU6L15AKFtcd1wtXSspLyxzZWxlY3Q6J3JldHVybiB7Zmlyc3RDaGlsZDp7bm9kZVZhbHVlOmF0dHJWYWx1ZShuLCAiezF9Iil9fTsnfV0sb3BlcmF0b3JzOnsiPSI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYT09dn0sIiE9IjpmdW5jdGlvbihhLHYpe3JldHVybiBhIT12fSwiXj0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJmEuc3Vic3RyKDAsdi5sZW5ndGgpPT12fSwiJD0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJmEuc3Vic3RyKGEubGVuZ3RoLXYubGVuZ3RoKT09dn0sIio9IjpmdW5jdGlvbihhLHYpe3JldHVybiBhJiZhLmluZGV4T2YodikhPT0tMX0sIiU9IjpmdW5jdGlvbihhLHYpe3JldHVybihhJXYpPT0wfSwifD0iOmZ1bmN0aW9uKGEsdil7cmV0dXJuIGEmJihhPT12fHxhLnN1YnN0cigwLHYubGVuZ3RoKzEpPT12KyItIil9LCJ+PSI6ZnVuY3Rpb24oYSx2KXtyZXR1cm4gYSYmKCIgIithKyIgIikuaW5kZXhPZigiICIrdisiICIpIT0tMX19LHBzZXVkb3M6eyJmaXJzdC1jaGlsZCI6ZnVuY3Rpb24oYyl7dmFyIHI9W10scmk9LTEsbjtmb3IodmFyIGk9MCxjaTtjaT1uPWNbaV07aSsrKXt3aGlsZSgobj1uLnByZXZpb3VzU2libGluZykmJm4ubm9kZVR5cGUhPTEpe31pZighbil7clsrK3JpXT1jaX19cmV0dXJuIHJ9LCJsYXN0LWNoaWxkIjpmdW5jdGlvbihjKXt2YXIgcj1bXSxyaT0tMSxuO2Zvcih2YXIgaT0wLGNpO2NpPW49Y1tpXTtpKyspe3doaWxlKChuPW4ubmV4dFNpYmxpbmcpJiZuLm5vZGVUeXBlIT0xKXt9aWYoIW4pe3JbKytyaV09Y2l9fXJldHVybiByfSwibnRoLWNoaWxkIjpmdW5jdGlvbihjLGEpe3ZhciByPVtdLHJpPS0xLG09bnRoUmUuZXhlYyhhPT0iZXZlbiImJiIybiJ8fGE9PSJvZGQiJiYiMm4rMSJ8fCFudGhSZTIudGVzdChhKSYmIm4rIithfHxhKSxmPShtWzFdfHwxKS0wLGw9bVsyXS0wO2Zvcih2YXIgaT0wLG47bj1jW2ldO2krKyl7dmFyIHBuPW4ucGFyZW50Tm9kZTtpZihiYXRjaCE9cG4uX2JhdGNoKXt2YXIgaj0wO2Zvcih2YXIgY249cG4uZmlyc3RDaGlsZDtjbjtjbj1jbi5uZXh0U2libGluZyl7aWYoY24ubm9kZVR5cGU9PTEpe2NuLm5vZGVJbmRleD0rK2p9fXBuLl9iYXRjaD1iYXRjaH1pZihmPT0xKXtpZihsPT0wfHxuLm5vZGVJbmRleD09bCl7clsrK3JpXT1ufX1lbHNle2lmKChuLm5vZGVJbmRleCtsKSVmPT0wKXtyWysrcmldPW59fX1yZXR1cm4gcn0sIm9ubHktY2hpbGQiOmZ1bmN0aW9uKGMpe3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXtpZighcHJldihjaSkmJiFuZXh0KGNpKSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9LGVtcHR5OmZ1bmN0aW9uKGMpe3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXt2YXIgY25zPWNpLmNoaWxkTm9kZXMsaj0wLGNuLGVtcHR5PXRydWU7d2hpbGUoY249Y25zW2pdKXsrK2o7aWYoY24ubm9kZVR5cGU9PTF8fGNuLm5vZGVUeXBlPT0zKXtlbXB0eT1mYWxzZTticmVha319aWYoZW1wdHkpe3JbKytyaV09Y2l9fXJldHVybiByfSxjb250YWluczpmdW5jdGlvbihjLHYpe3ZhciByPVtdLHJpPS0xO2Zvcih2YXIgaT0wLGNpO2NpPWNbaV07aSsrKXtpZigoY2kudGV4dENvbnRlbnR8fGNpLmlubmVyVGV4dHx8IiIpLmluZGV4T2YodikhPS0xKXtyWysrcmldPWNpfX1yZXR1cm4gcn0sbm9kZVZhbHVlOmZ1bmN0aW9uKGMsdil7dmFyIHI9W10scmk9LTE7Zm9yKHZhciBpPTAsY2k7Y2k9Y1tpXTtpKyspe2lmKGNpLmZpcnN0Q2hpbGQmJmNpLmZpcnN0Q2hpbGQubm9kZVZhbHVlPT12KXtyWysrcmldPWNpfX1yZXR1cm4gcn0sY2hlY2tlZDpmdW5jdGlvbihjKXt2YXIgcj1bXSxyaT0tMTtmb3IodmFyIGk9MCxjaTtjaT1jW2ldO2krKyl7aWYoY2kuY2hlY2tlZD09dHJ1ZSl7clsrK3JpXT1jaX19cmV0dXJuIHJ9LG5vdDpmdW5jdGlvbihjLHNzKXtyZXR1cm4gRXh0LkRvbVF1ZXJ5LmZpbHRlcihjLHNzLHRydWUpfSxhbnk6ZnVuY3Rpb24oYyxzZWxlY3RvcnMpe3ZhciBzcz1zZWxlY3RvcnMuc3BsaXQoInwiKSxyPVtdLHJpPS0xLHM7Zm9yKHZhciBpPTAsY2k7Y2k9Y1tpXTtpKyspe2Zvcih2YXIgaj0wO3M9c3Nbal07aisrKXtpZihFeHQuRG9tUXVlcnkuaXMoY2kscykpe3JbKytyaV09Y2k7YnJlYWt9fX1yZXR1cm4gcn0sb2RkOmZ1bmN0aW9uKGMpe3JldHVybiB0aGlzWyJudGgtY2hpbGQiXShjLCJvZGQiKX0sZXZlbjpmdW5jdGlvbihjKXtyZXR1cm4gdGhpc1sibnRoLWNoaWxkIl0oYywiZXZlbiIpfSxudGg6ZnVuY3Rpb24oYyxhKXtyZXR1cm4gY1thLTFdfHxbXX0sZmlyc3Q6ZnVuY3Rpb24oYyl7cmV0dXJuIGNbMF18fFtdfSxsYXN0OmZ1bmN0aW9uKGMpe3JldHVybiBjW2MubGVuZ3RoLTFdfHxbXX0saGFzOmZ1bmN0aW9uKGMsc3Mpe3ZhciBzPUV4dC5Eb21RdWVyeS5zZWxlY3Qscj1bXSxyaT0tMTtmb3IodmFyIGk9MCxjaTtjaT1jW2ldO2krKyl7aWYocyhzcyxjaSkubGVuZ3RoPjApe3JbKytyaV09Y2l9fXJldHVybiByfSxuZXh0OmZ1bmN0aW9uKGMsc3Mpe3ZhciBpcz1FeHQuRG9tUXVlcnkuaXMscj1bXSxyaT0tMTtmb3IodmFyIGk9MCxjaTtjaT1jW2ldO2krKyl7dmFyIG49bmV4dChjaSk7aWYobiYmaXMobixzcykpe3JbKytyaV09Y2l9fXJldHVybiByfSxwcmV2OmZ1bmN0aW9uKGMsc3Mpe3ZhciBpcz1FeHQuRG9tUXVlcnkuaXMscj1bXSxyaT0tMTtmb3IodmFyIGk9MCxjaTtjaT1jW2ldO2krKyl7dmFyIG49cHJldihjaSk7aWYobiYmaXMobixzcykpe3JbKytyaV09Y2l9fXJldHVybiByfX19fSgpO0V4dC5xdWVyeT1FeHQuRG9tUXVlcnkuc2VsZWN0O0V4dC51dGlsLkRlbGF5ZWRUYXNrPWZ1bmN0aW9uKGQsYyxhKXt2YXIgZT10aGlzLGcsYj1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoZyk7Zz1udWxsO2QuYXBwbHkoYyxhfHxbXSl9O2UuZGVsYXk9ZnVuY3Rpb24oaSxrLGosaCl7ZS5jYW5jZWwoKTtkPWt8fGQ7Yz1qfHxjO2E9aHx8YTtnPXNldEludGVydmFsKGIsaSl9O2UuY2FuY2VsPWZ1bmN0aW9uKCl7aWYoZyl7Y2xlYXJJbnRlcnZhbChnKTtnPW51bGx9fX07KGZ1bmN0aW9uKCl7dmFyIGg9ZG9jdW1lbnQ7RXh0LkVsZW1lbnQ9ZnVuY3Rpb24obCxtKXt2YXIgbj10eXBlb2YgbD09InN0cmluZyI/aC5nZXRFbGVtZW50QnlJZChsKTpsLG87aWYoIW4pe3JldHVybiBudWxsfW89bi5pZDtpZighbSYmbyYmRXh0LmVsQ2FjaGVbb10pe3JldHVybiBFeHQuZWxDYWNoZVtvXS5lbH10aGlzLmRvbT1uO3RoaXMuaWQ9b3x8RXh0LmlkKG4pfTt2YXIgZD1FeHQuRG9tSGVscGVyLGU9RXh0LkVsZW1lbnQsYT1FeHQuZWxDYWNoZTtlLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKHEsbSl7dmFyIG49dGhpcy5kb20sbCxwLG09KG0hPT1mYWxzZSkmJiEhbi5zZXRBdHRyaWJ1dGU7Zm9yKGwgaW4gcSl7aWYocS5oYXNPd25Qcm9wZXJ0eShsKSl7cD1xW2xdO2lmKGw9PSJzdHlsZSIpe2QuYXBwbHlTdHlsZXMobixwKX1lbHNle2lmKGw9PSJjbHMiKXtuLmNsYXNzTmFtZT1wfWVsc2V7aWYobSl7bi5zZXRBdHRyaWJ1dGUobCxwKX1lbHNle25bbF09cH19fX19cmV0dXJuIHRoaXN9LGRlZmF1bHRVbml0OiJweCIsaXM6ZnVuY3Rpb24obCl7cmV0dXJuIEV4dC5Eb21RdWVyeS5pcyh0aGlzLmRvbSxsKX0sZm9jdXM6ZnVuY3Rpb24obyxuKXt2YXIgbD10aGlzLG49bnx8bC5kb207dHJ5e2lmKE51bWJlcihvKSl7bC5mb2N1cy5kZWZlcihvLG51bGwsW251bGwsbl0pfWVsc2V7bi5mb2N1cygpfX1jYXRjaChtKXt9cmV0dXJuIGx9LGJsdXI6ZnVuY3Rpb24oKXt0cnl7dGhpcy5kb20uYmx1cigpfWNhdGNoKGwpe31yZXR1cm4gdGhpc30sZ2V0VmFsdWU6ZnVuY3Rpb24obCl7dmFyIG09dGhpcy5kb20udmFsdWU7cmV0dXJuIGw/cGFyc2VJbnQobSwxMCk6bX0sYWRkTGlzdGVuZXI6ZnVuY3Rpb24obCxvLG4sbSl7RXh0LkV2ZW50TWFuYWdlci5vbih0aGlzLmRvbSxsLG8sbnx8dGhpcyxtKTtyZXR1cm4gdGhpc30scmVtb3ZlTGlzdGVuZXI6ZnVuY3Rpb24obCxuLG0pe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlTGlzdGVuZXIodGhpcy5kb20sbCxuLG18fHRoaXMpO3JldHVybiB0aGlzfSxyZW1vdmVBbGxMaXN0ZW5lcnM6ZnVuY3Rpb24oKXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUFsbCh0aGlzLmRvbSk7cmV0dXJuIHRoaXN9LHB1cmdlQWxsTGlzdGVuZXJzOmZ1bmN0aW9uKCl7RXh0LkV2ZW50TWFuYWdlci5wdXJnZUVsZW1lbnQodGhpcyx0cnVlKTtyZXR1cm4gdGhpc30sYWRkVW5pdHM6ZnVuY3Rpb24obCl7aWYobD09PSIifHxsPT0iYXV0byJ8fGw9PT11bmRlZmluZWQpe2w9bHx8IiJ9ZWxzZXtpZighaXNOYU4obCl8fCFpLnRlc3QobCkpe2w9bCsodGhpcy5kZWZhdWx0VW5pdHx8InB4Iil9fXJldHVybiBsfSxsb2FkOmZ1bmN0aW9uKG0sbixsKXtFeHQuQWpheC5yZXF1ZXN0KEV4dC5hcHBseSh7cGFyYW1zOm4sdXJsOm0udXJsfHxtLGNhbGxiYWNrOmwsZWw6dGhpcy5kb20saW5kaWNhdG9yVGV4dDptLmluZGljYXRvclRleHR8fCIifSxFeHQuaXNPYmplY3QobSk/bTp7fSkpO3JldHVybiB0aGlzfSxpc0JvcmRlckJveDpmdW5jdGlvbigpe3JldHVybiBFeHQuaXNCb3JkZXJCb3h8fEV4dC5pc0ZvcmNlZEJvcmRlckJveHx8Z1sodGhpcy5kb20udGFnTmFtZXx8IiIpLnRvTG93ZXJDYXNlKCldfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLG09bC5kb207aWYobSl7ZGVsZXRlIGwuZG9tO0V4dC5yZW1vdmVOb2RlKG0pfX0saG92ZXI6ZnVuY3Rpb24obSxsLG8sbil7dmFyIHA9dGhpcztwLm9uKCJtb3VzZWVudGVyIixtLG98fHAuZG9tLG4pO3Aub24oIm1vdXNlbGVhdmUiLGwsb3x8cC5kb20sbik7cmV0dXJuIHB9LGNvbnRhaW5zOmZ1bmN0aW9uKGwpe3JldHVybiAhbD9mYWxzZTpFeHQubGliLkRvbS5pc0FuY2VzdG9yKHRoaXMuZG9tLGwuZG9tP2wuZG9tOmwpfSxnZXRBdHRyaWJ1dGVOUzpmdW5jdGlvbihtLGwpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZShsLG0pfSxnZXRBdHRyaWJ1dGU6KGZ1bmN0aW9uKCl7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGFibGUiKSxvPWZhbHNlLG09ImdldEF0dHJpYnV0ZSIgaW4gcCxsPS91bmRlZmluZWR8dW5rbm93bi87aWYobSl7dHJ5e3AuZ2V0QXR0cmlidXRlKCJleHQ6cXRpcCIpfWNhdGNoKG4pe289dHJ1ZX1yZXR1cm4gZnVuY3Rpb24ocSxzKXt2YXIgcj10aGlzLmRvbSx0O2lmKHIuZ2V0QXR0cmlidXRlTlMpe3Q9ci5nZXRBdHRyaWJ1dGVOUyhzLHEpfHxudWxsfWlmKHQ9PW51bGwpe2lmKHMpe2lmKG8mJnIudGFnTmFtZS50b1VwcGVyQ2FzZSgpPT0iVEFCTEUiKXt0cnl7dD1yLmdldEF0dHJpYnV0ZShzKyI6IitxKX1jYXRjaCh1KXt0PSIifX1lbHNle3Q9ci5nZXRBdHRyaWJ1dGUocysiOiIrcSl9fWVsc2V7dD1yLmdldEF0dHJpYnV0ZShxKXx8cltxXX19cmV0dXJuIHR8fCIifX1lbHNle3JldHVybiBmdW5jdGlvbihxLHMpe3ZhciByPXRoaXMub20sdSx0O2lmKHMpe3Q9cltzKyI6IitxXTt1PWwudGVzdCh0eXBlb2YgdCk/dW5kZWZpbmVkOnR9ZWxzZXt1PXJbcV19cmV0dXJuIHV8fCIifX1wPW51bGx9KSgpLHVwZGF0ZTpmdW5jdGlvbihsKXtpZih0aGlzLmRvbSl7dGhpcy5kb20uaW5uZXJIVE1MPWx9cmV0dXJuIHRoaXN9fTt2YXIgaz1lLnByb3RvdHlwZTtlLmFkZE1ldGhvZHM9ZnVuY3Rpb24obCl7RXh0LmFwcGx5KGssbCl9O2sub249ay5hZGRMaXN0ZW5lcjtrLnVuPWsucmVtb3ZlTGlzdGVuZXI7ay5hdXRvQm94QWRqdXN0PXRydWU7dmFyIGk9L1xkKyhweHxlbXwlfGVufGV4fHB0fGlufGNtfG1tfHBjKSQvaSxjO2UuZ2V0PWZ1bmN0aW9uKG0pe3ZhciBsLHAsbztpZighbSl7cmV0dXJuIG51bGx9aWYodHlwZW9mIG09PSJzdHJpbmciKXtpZighKHA9aC5nZXRFbGVtZW50QnlJZChtKSkpe3JldHVybiBudWxsfWlmKGFbbV0mJmFbbV0uZWwpe2w9YVttXS5lbDtsLmRvbT1wfWVsc2V7bD1lLmFkZFRvQ2FjaGUobmV3IGUocCkpfXJldHVybiBsfWVsc2V7aWYobS50YWdOYW1lKXtpZighKG89bS5pZCkpe289RXh0LmlkKG0pfWlmKGFbb10mJmFbb10uZWwpe2w9YVtvXS5lbDtsLmRvbT1tfWVsc2V7bD1lLmFkZFRvQ2FjaGUobmV3IGUobSkpfXJldHVybiBsfWVsc2V7aWYobSBpbnN0YW5jZW9mIGUpe2lmKG0hPWMpe2lmKEV4dC5pc0lFJiYobS5pZD09dW5kZWZpbmVkfHxtLmlkPT0iIikpe20uZG9tPW0uZG9tfWVsc2V7bS5kb209aC5nZXRFbGVtZW50QnlJZChtLmlkKXx8bS5kb219fXJldHVybiBtfWVsc2V7aWYobS5pc0NvbXBvc2l0ZSl7cmV0dXJuIG19ZWxzZXtpZihFeHQuaXNBcnJheShtKSl7cmV0dXJuIGUuc2VsZWN0KG0pfWVsc2V7aWYobT09aCl7aWYoIWMpe3ZhciBuPWZ1bmN0aW9uKCl7fTtuLnByb3RvdHlwZT1lLnByb3RvdHlwZTtjPW5ldyBuKCk7Yy5kb209aH1yZXR1cm4gY319fX19fXJldHVybiBudWxsfTtlLmFkZFRvQ2FjaGU9ZnVuY3Rpb24obCxtKXttPW18fGwuaWQ7YVttXT17ZWw6bCxkYXRhOnt9LGV2ZW50czp7fX07cmV0dXJuIGx9O2UuZGF0YT1mdW5jdGlvbihtLGwsbil7bT1lLmdldChtKTtpZighbSl7cmV0dXJuIG51bGx9dmFyIG89YVttLmlkXS5kYXRhO2lmKGFyZ3VtZW50cy5sZW5ndGg9PTIpe3JldHVybiBvW2xdfWVsc2V7cmV0dXJuKG9bbF09bil9fTtmdW5jdGlvbiBqKCl7aWYoIUV4dC5lbmFibGVHYXJiYWdlQ29sbGVjdG9yKXtjbGVhckludGVydmFsKGUuY29sbGVjdG9yVGhyZWFkSWQpfWVsc2V7dmFyIGwsbixxLHA7Zm9yKGwgaW4gYSl7cD1hW2xdO2lmKHAuc2tpcEdDKXtjb250aW51ZX1uPXAuZWw7cT1uLmRvbTtpZighcXx8IXEucGFyZW50Tm9kZXx8KCFxLm9mZnNldFBhcmVudCYmIWguZ2V0RWxlbWVudEJ5SWQobCkpKXtpZihFeHQuZW5hYmxlTGlzdGVuZXJDb2xsZWN0aW9uKXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUFsbChxKX1kZWxldGUgYVtsXX19aWYoRXh0LmlzSUUpe3ZhciBtPXt9O2ZvcihsIGluIGEpe21bbF09YVtsXX1hPUV4dC5lbENhY2hlPW19fX1lLmNvbGxlY3RvclRocmVhZElkPXNldEludGVydmFsKGosMzAwMDApO3ZhciBiPWZ1bmN0aW9uKCl7fTtiLnByb3RvdHlwZT1lLnByb3RvdHlwZTtlLkZseXdlaWdodD1mdW5jdGlvbihsKXt0aGlzLmRvbT1sfTtlLkZseXdlaWdodC5wcm90b3R5cGU9bmV3IGIoKTtlLkZseXdlaWdodC5wcm90b3R5cGUuaXNGbHl3ZWlnaHQ9dHJ1ZTtlLl9mbHl3ZWlnaHRzPXt9O2UuZmx5PWZ1bmN0aW9uKG4sbCl7dmFyIG09bnVsbDtsPWx8fCJfZ2xvYmFsIjtpZihuPUV4dC5nZXREb20obikpeyhlLl9mbHl3ZWlnaHRzW2xdPWUuX2ZseXdlaWdodHNbbF18fG5ldyBlLkZseXdlaWdodCgpKS5kb209bjttPWUuX2ZseXdlaWdodHNbbF19cmV0dXJuIG19O0V4dC5nZXQ9ZS5nZXQ7RXh0LmZseT1lLmZseTt2YXIgZz1FeHQuaXNTdHJpY3Q/e3NlbGVjdDoxfTp7aW5wdXQ6MSxzZWxlY3Q6MSx0ZXh0YXJlYToxfTtpZihFeHQuaXNJRXx8RXh0LmlzR2Vja28pe2cuYnV0dG9uPTF9fSkoKTtFeHQuRWxlbWVudC5hZGRNZXRob2RzKGZ1bmN0aW9uKCl7dmFyIGQ9InBhcmVudE5vZGUiLGI9Im5leHRTaWJsaW5nIixjPSJwcmV2aW91c1NpYmxpbmciLGU9RXh0LkRvbVF1ZXJ5LGE9RXh0LmdldDtyZXR1cm57ZmluZFBhcmVudDpmdW5jdGlvbihtLGwsaCl7dmFyIGo9dGhpcy5kb20sZz1kb2N1bWVudC5ib2R5LGs9MCxpO2lmKEV4dC5pc0dlY2tvJiZPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaik9PSJbb2JqZWN0IFhVTEVsZW1lbnRdIil7cmV0dXJuIG51bGx9bD1sfHw1MDtpZihpc05hTihsKSl7aT1FeHQuZ2V0RG9tKGwpO2w9TnVtYmVyLk1BWF9WQUxVRX13aGlsZShqJiZqLm5vZGVUeXBlPT0xJiZrPGwmJmohPWcmJmohPWkpe2lmKGUuaXMoaixtKSl7cmV0dXJuIGg/YShqKTpqfWsrKztqPWoucGFyZW50Tm9kZX1yZXR1cm4gbnVsbH0sZmluZFBhcmVudE5vZGU6ZnVuY3Rpb24oaixpLGcpe3ZhciBoPUV4dC5mbHkodGhpcy5kb20ucGFyZW50Tm9kZSwiX2ludGVybmFsIik7cmV0dXJuIGg/aC5maW5kUGFyZW50KGosaSxnKTpudWxsfSx1cDpmdW5jdGlvbihoLGcpe3JldHVybiB0aGlzLmZpbmRQYXJlbnROb2RlKGgsZyx0cnVlKX0sc2VsZWN0OmZ1bmN0aW9uKGcpe3JldHVybiBFeHQuRWxlbWVudC5zZWxlY3QoZyx0aGlzLmRvbSl9LHF1ZXJ5OmZ1bmN0aW9uKGcpe3JldHVybiBlLnNlbGVjdChnLHRoaXMuZG9tKX0sY2hpbGQ6ZnVuY3Rpb24oZyxoKXt2YXIgaT1lLnNlbGVjdE5vZGUoZyx0aGlzLmRvbSk7cmV0dXJuIGg/aTphKGkpfSxkb3duOmZ1bmN0aW9uKGcsaCl7dmFyIGk9ZS5zZWxlY3ROb2RlKCIgPiAiK2csdGhpcy5kb20pO3JldHVybiBoP2k6YShpKX0scGFyZW50OmZ1bmN0aW9uKGcsaCl7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKGQsZCxnLGgpfSxuZXh0OmZ1bmN0aW9uKGcsaCl7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKGIsYixnLGgpfSxwcmV2OmZ1bmN0aW9uKGcsaCl7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKGMsYyxnLGgpfSxmaXJzdDpmdW5jdGlvbihnLGgpe3JldHVybiB0aGlzLm1hdGNoTm9kZShiLCJmaXJzdENoaWxkIixnLGgpfSxsYXN0OmZ1bmN0aW9uKGcsaCl7cmV0dXJuIHRoaXMubWF0Y2hOb2RlKGMsImxhc3RDaGlsZCIsZyxoKX0sbWF0Y2hOb2RlOmZ1bmN0aW9uKGgsayxnLGkpe3ZhciBqPXRoaXMuZG9tW2tdO3doaWxlKGope2lmKGoubm9kZVR5cGU9PTEmJighZ3x8ZS5pcyhqLGcpKSl7cmV0dXJuICFpP2Eoaik6an1qPWpbaF19cmV0dXJuIG51bGx9fX0oKSk7RXh0LkVsZW1lbnQuYWRkTWV0aG9kcyhmdW5jdGlvbigpe3ZhciBjPUV4dC5nZXREb20sYT1FeHQuZ2V0LGI9RXh0LkRvbUhlbHBlcjtyZXR1cm57YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oZCl7cmV0dXJuIGEoZCkuYXBwZW5kVG8odGhpcyl9LGFwcGVuZFRvOmZ1bmN0aW9uKGQpe2MoZCkuYXBwZW5kQ2hpbGQodGhpcy5kb20pO3JldHVybiB0aGlzfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oZCl7KGQ9YyhkKSkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5kb20sZCk7cmV0dXJuIHRoaXN9LGluc2VydEFmdGVyOmZ1bmN0aW9uKGQpeyhkPWMoZCkpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLGQubmV4dFNpYmxpbmcpO3JldHVybiB0aGlzfSxpbnNlcnRGaXJzdDpmdW5jdGlvbihlLGQpe2U9ZXx8e307aWYoZS5ub2RlVHlwZXx8ZS5kb218fHR5cGVvZiBlPT0ic3RyaW5nIil7ZT1jKGUpO3RoaXMuZG9tLmluc2VydEJlZm9yZShlLHRoaXMuZG9tLmZpcnN0Q2hpbGQpO3JldHVybiAhZD9hKGUpOmV9ZWxzZXtyZXR1cm4gdGhpcy5jcmVhdGVDaGlsZChlLHRoaXMuZG9tLmZpcnN0Q2hpbGQsZCl9fSxyZXBsYWNlOmZ1bmN0aW9uKGQpe2Q9YShkKTt0aGlzLmluc2VydEJlZm9yZShkKTtkLnJlbW92ZSgpO3JldHVybiB0aGlzfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihkKXt2YXIgZT10aGlzO2lmKGQubm9kZVR5cGV8fGQuZG9tfHx0eXBlb2YgZD09InN0cmluZyIpe2Q9YyhkKTtlLmRvbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShkLGUuZG9tKX1lbHNle2Q9Yi5pbnNlcnRCZWZvcmUoZS5kb20sZCl9ZGVsZXRlIEV4dC5lbENhY2hlW2UuaWRdO0V4dC5yZW1vdmVOb2RlKGUuZG9tKTtlLmlkPUV4dC5pZChlLmRvbT1kKTtFeHQuRWxlbWVudC5hZGRUb0NhY2hlKGUuaXNGbHl3ZWlnaHQ/bmV3IEV4dC5FbGVtZW50KGUuZG9tKTplKTtyZXR1cm4gZX0sY3JlYXRlQ2hpbGQ6ZnVuY3Rpb24oZSxkLGcpe2U9ZXx8e3RhZzoiZGl2In07cmV0dXJuIGQ/Yi5pbnNlcnRCZWZvcmUoZCxlLGchPT10cnVlKTpiWyF0aGlzLmRvbS5maXJzdENoaWxkPyJvdmVyd3JpdGUiOiJhcHBlbmQiXSh0aGlzLmRvbSxlLGchPT10cnVlKX0sd3JhcDpmdW5jdGlvbihkLGUpe3ZhciBnPWIuaW5zZXJ0QmVmb3JlKHRoaXMuZG9tLGR8fHt0YWc6ImRpdiJ9LCFlKTtnLmRvbT9nLmRvbS5hcHBlbmRDaGlsZCh0aGlzLmRvbSk6Zy5hcHBlbmRDaGlsZCh0aGlzLmRvbSk7cmV0dXJuIGd9LGluc2VydEh0bWw6ZnVuY3Rpb24oZSxnLGQpe3ZhciBoPWIuaW5zZXJ0SHRtbChlLHRoaXMuZG9tLGcpO3JldHVybiBkP0V4dC5nZXQoaCk6aH19fSgpKTtFeHQuRWxlbWVudC5hZGRNZXRob2RzKGZ1bmN0aW9uKCl7dmFyIEE9RXh0LnN1cHBvcnRzLGg9e30seD0vKC1bYS16XSkvZ2kscz1kb2N1bWVudC5kZWZhdWx0VmlldyxEPS9hbHBoYVwob3BhY2l0eT0oLiopXCkvaSxsPS9eXHMrfFxzKyQvZyxCPUV4dC5FbGVtZW50LHU9L1xzKy8sYj0vXHcvZyxkPSJwYWRkaW5nIixjPSJtYXJnaW4iLHk9ImJvcmRlciIsdD0iLWxlZnQiLHE9Ii1yaWdodCIsdz0iLXRvcCIsbz0iLWJvdHRvbSIsaj0iLXdpZHRoIixyPU1hdGgsej0iaGlkZGVuIixlPSJpc0NsaXBwZWQiLGs9Im92ZXJmbG93IixuPSJvdmVyZmxvdy14IixtPSJvdmVyZmxvdy15IixDPSJvcmlnaW5hbENsaXAiLGk9e2w6eSt0K2oscjp5K3Eraix0OnkrdytqLGI6eStvK2p9LGc9e2w6ZCt0LHI6ZCtxLHQ6ZCt3LGI6ZCtvfSxhPXtsOmMrdCxyOmMrcSx0OmMrdyxiOmMrb30sRT1FeHQuRWxlbWVudC5kYXRhO2Z1bmN0aW9uIHAoRixHKXtyZXR1cm4gRy5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX1mdW5jdGlvbiB2KEYpe3JldHVybiBoW0ZdfHwoaFtGXT1GPT0iZmxvYXQiPyhBLmNzc0Zsb2F0PyJjc3NGbG9hdCI6InN0eWxlRmxvYXQiKTpGLnJlcGxhY2UoeCxwKSl9cmV0dXJue2FkanVzdFdpZHRoOmZ1bmN0aW9uKEYpe3ZhciBHPXRoaXM7dmFyIEg9KHR5cGVvZiBGPT0ibnVtYmVyIik7aWYoSCYmRy5hdXRvQm94QWRqdXN0JiYhRy5pc0JvcmRlckJveCgpKXtGLT0oRy5nZXRCb3JkZXJXaWR0aCgibHIiKStHLmdldFBhZGRpbmcoImxyIikpfXJldHVybihIJiZGPDApPzA6Rn0sYWRqdXN0SGVpZ2h0OmZ1bmN0aW9uKEYpe3ZhciBHPXRoaXM7dmFyIEg9KHR5cGVvZiBGPT0ibnVtYmVyIik7aWYoSCYmRy5hdXRvQm94QWRqdXN0JiYhRy5pc0JvcmRlckJveCgpKXtGLT0oRy5nZXRCb3JkZXJXaWR0aCgidGIiKStHLmdldFBhZGRpbmcoInRiIikpfXJldHVybihIJiZGPDApPzA6Rn0sYWRkQ2xhc3M6ZnVuY3Rpb24oSil7dmFyIEs9dGhpcyxJLEYsSCxHPVtdO2lmKCFFeHQuaXNBcnJheShKKSl7aWYodHlwZW9mIEo9PSJzdHJpbmciJiYhdGhpcy5oYXNDbGFzcyhKKSl7Sy5kb20uY2xhc3NOYW1lKz0iICIrSn19ZWxzZXtmb3IoST0wLEY9Si5sZW5ndGg7STxGO0krKyl7SD1KW0ldO2lmKHR5cGVvZiBIPT0ic3RyaW5nIiYmKCIgIitLLmRvbS5jbGFzc05hbWUrIiAiKS5pbmRleE9mKCIgIitIKyIgIik9PS0xKXtHLnB1c2goSCl9fWlmKEcubGVuZ3RoKXtLLmRvbS5jbGFzc05hbWUrPSIgIitHLmpvaW4oIiAiKX19cmV0dXJuIEt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKEspe3ZhciBMPXRoaXMsSixHLEYsSSxIO2lmKCFFeHQuaXNBcnJheShLKSl7Sz1bS119aWYoTC5kb20mJkwuZG9tLmNsYXNzTmFtZSl7SD1MLmRvbS5jbGFzc05hbWUucmVwbGFjZShsLCIiKS5zcGxpdCh1KTtmb3IoSj0wLEY9Sy5sZW5ndGg7SjxGO0orKyl7ST1LW0pdO2lmKHR5cGVvZiBJPT0ic3RyaW5nIil7ST1JLnJlcGxhY2UobCwiIik7Rz1ILmluZGV4T2YoSSk7aWYoRyE9LTEpe0guc3BsaWNlKEcsMSl9fX1MLmRvbS5jbGFzc05hbWU9SC5qb2luKCIgIil9cmV0dXJuIEx9LHJhZGlvQ2xhc3M6ZnVuY3Rpb24oSSl7dmFyIEo9dGhpcy5kb20ucGFyZW50Tm9kZS5jaGlsZE5vZGVzLEcsSCxGO0k9RXh0LmlzQXJyYXkoSSk/STpbSV07Zm9yKEg9MCxGPUoubGVuZ3RoO0g8RjtIKyspe0c9SltIXTtpZihHJiZHLm5vZGVUeXBlPT0xKXtFeHQuZmx5KEcsIl9pbnRlcm5hbCIpLnJlbW92ZUNsYXNzKEkpfX1yZXR1cm4gdGhpcy5hZGRDbGFzcyhJKX0sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oRil7cmV0dXJuIHRoaXMuaGFzQ2xhc3MoRik/dGhpcy5yZW1vdmVDbGFzcyhGKTp0aGlzLmFkZENsYXNzKEYpfSxoYXNDbGFzczpmdW5jdGlvbihGKXtyZXR1cm4gRiYmKCIgIit0aGlzLmRvbS5jbGFzc05hbWUrIiAiKS5pbmRleE9mKCIgIitGKyIgIikhPS0xfSxyZXBsYWNlQ2xhc3M6ZnVuY3Rpb24oRyxGKXtyZXR1cm4gdGhpcy5yZW1vdmVDbGFzcyhHKS5hZGRDbGFzcyhGKX0saXNTdHlsZTpmdW5jdGlvbihGLEcpe3JldHVybiB0aGlzLmdldFN0eWxlKEYpPT1HfSxnZXRTdHlsZTpmdW5jdGlvbigpe3JldHVybiBzJiZzLmdldENvbXB1dGVkU3R5bGU/ZnVuY3Rpb24oSyl7dmFyIEk9dGhpcy5kb20sRixILEcsSjtpZihJPT1kb2N1bWVudCl7cmV0dXJuIG51bGx9Sz12KEspO0c9KEY9SS5zdHlsZVtLXSk/RjooSD1zLmdldENvbXB1dGVkU3R5bGUoSSwiIikpP0hbS106bnVsbDtpZihLPT0ibWFyZ2luUmlnaHQiJiZHIT0iMHB4IiYmIUEuY29ycmVjdFJpZ2h0TWFyZ2luKXtKPUkuc3R5bGUuZGlzcGxheTtJLnN0eWxlLmRpc3BsYXk9ImlubGluZS1ibG9jayI7Rz1zLmdldENvbXB1dGVkU3R5bGUoSSwiIikubWFyZ2luUmlnaHQ7SS5zdHlsZS5kaXNwbGF5PUp9aWYoSz09ImJhY2tncm91bmRDb2xvciImJkc9PSJyZ2JhKDAsIDAsIDAsIDApIiYmIUEuY29ycmVjdFRyYW5zcGFyZW50Q29sb3Ipe0c9InRyYW5zcGFyZW50In1yZXR1cm4gR306ZnVuY3Rpb24oSil7dmFyIEg9dGhpcy5kb20sRixHO2lmKEg9PWRvY3VtZW50KXtyZXR1cm4gbnVsbH1pZihKPT0ib3BhY2l0eSIpe2lmKEguc3R5bGUuZmlsdGVyLm1hdGNoKXtpZihGPUguc3R5bGUuZmlsdGVyLm1hdGNoKEQpKXt2YXIgST1wYXJzZUZsb2F0KEZbMV0pO2lmKCFpc05hTihJKSl7cmV0dXJuIEk/SS8xMDA6MH19fXJldHVybiAxfUo9dihKKTtyZXR1cm4gSC5zdHlsZVtKXXx8KChHPUguY3VycmVudFN0eWxlKT9HW0pdOm51bGwpfX0oKSxnZXRDb2xvcjpmdW5jdGlvbihGLEcsSyl7dmFyIEk9dGhpcy5nZXRTdHlsZShGKSxIPSh0eXBlb2YgSyE9InVuZGVmaW5lZCIpP0s6IiMiLEo7aWYoIUl8fCgvdHJhbnNwYXJlbnR8aW5oZXJpdC8udGVzdChJKSkpe3JldHVybiBHfWlmKC9eci8udGVzdChJKSl7RXh0LmVhY2goSS5zbGljZSg0LEkubGVuZ3RoLTEpLnNwbGl0KCIsIiksZnVuY3Rpb24oTCl7Sj1wYXJzZUludChMLDEwKTtIKz0oSjwxNj8iMCI6IiIpK0oudG9TdHJpbmcoMTYpfSl9ZWxzZXtJPUkucmVwbGFjZSgiIyIsIiIpO0grPUkubGVuZ3RoPT0zP0kucmVwbGFjZSgvXihcdykoXHcpKFx3KSQvLCIkMSQxJDIkMiQzJDMiKTpJfXJldHVybihILmxlbmd0aD41P0gudG9Mb3dlckNhc2UoKTpHKX0sc2V0U3R5bGU6ZnVuY3Rpb24oSSxIKXt2YXIgRixHO2lmKHR5cGVvZiBJIT0ib2JqZWN0Iil7Rj17fTtGW0ldPUg7ST1GfWZvcihHIGluIEkpe0g9SVtHXTtHPT0ib3BhY2l0eSI/dGhpcy5zZXRPcGFjaXR5KEgpOnRoaXMuZG9tLnN0eWxlW3YoRyldPUh9cmV0dXJuIHRoaXN9LHNldE9wYWNpdHk6ZnVuY3Rpb24oRyxGKXt2YXIgSj10aGlzLEg9Si5kb20uc3R5bGU7aWYoIUZ8fCFKLmFuaW0pe2lmKEV4dC5pc0lFKXt2YXIgST1HPDE/ImFscGhhKG9wYWNpdHk9IitHKjEwMCsiKSI6IiIsSz1ILmZpbHRlci5yZXBsYWNlKEQsIiIpLnJlcGxhY2UobCwiIik7SC56b29tPTE7SC5maWx0ZXI9SysoSy5sZW5ndGg+MD8iICI6IiIpK0l9ZWxzZXtILm9wYWNpdHk9R319ZWxzZXtKLmFuaW0oe29wYWNpdHk6e3RvOkd9fSxKLnByZWFuaW0oYXJndW1lbnRzLDEpLG51bGwsMC4zNSwiZWFzZUluIil9cmV0dXJuIEp9LGNsZWFyT3BhY2l0eTpmdW5jdGlvbigpe3ZhciBGPXRoaXMuZG9tLnN0eWxlO2lmKEV4dC5pc0lFKXtpZighRXh0LmlzRW1wdHkoRi5maWx0ZXIpKXtGLmZpbHRlcj1GLmZpbHRlci5yZXBsYWNlKEQsIiIpLnJlcGxhY2UobCwiIil9fWVsc2V7Ri5vcGFjaXR5PUZbIi1tb3otb3BhY2l0eSJdPUZbIi1raHRtbC1vcGFjaXR5Il09IiJ9cmV0dXJuIHRoaXN9LGdldEhlaWdodDpmdW5jdGlvbihIKXt2YXIgRz10aGlzLEo9Ry5kb20sST1FeHQuaXNJRSYmRy5pc1N0eWxlKCJkaXNwbGF5Iiwibm9uZSIpLEY9ci5tYXgoSi5vZmZzZXRIZWlnaHQsST8wOkouY2xpZW50SGVpZ2h0KXx8MDtGPSFIP0Y6Ri1HLmdldEJvcmRlcldpZHRoKCJ0YiIpLUcuZ2V0UGFkZGluZygidGIiKTtyZXR1cm4gRjwwPzA6Rn0sZ2V0V2lkdGg6ZnVuY3Rpb24oRyl7dmFyIEg9dGhpcyxKPUguZG9tLEk9RXh0LmlzSUUmJkguaXNTdHlsZSgiZGlzcGxheSIsIm5vbmUiKSxGPXIubWF4KEoub2Zmc2V0V2lkdGgsST8wOkouY2xpZW50V2lkdGgpfHwwO0Y9IUc/RjpGLUguZ2V0Qm9yZGVyV2lkdGgoImxyIiktSC5nZXRQYWRkaW5nKCJsciIpO3JldHVybiBGPDA/MDpGfSxzZXRXaWR0aDpmdW5jdGlvbihHLEYpe3ZhciBIPXRoaXM7Rz1ILmFkanVzdFdpZHRoKEcpOyFGfHwhSC5hbmltP0guZG9tLnN0eWxlLndpZHRoPUguYWRkVW5pdHMoRyk6SC5hbmltKHt3aWR0aDp7dG86R319LEgucHJlYW5pbShhcmd1bWVudHMsMSkpO3JldHVybiBIfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oRixHKXt2YXIgSD10aGlzO0Y9SC5hZGp1c3RIZWlnaHQoRik7IUd8fCFILmFuaW0/SC5kb20uc3R5bGUuaGVpZ2h0PUguYWRkVW5pdHMoRik6SC5hbmltKHtoZWlnaHQ6e3RvOkZ9fSxILnByZWFuaW0oYXJndW1lbnRzLDEpKTtyZXR1cm4gSH0sZ2V0Qm9yZGVyV2lkdGg6ZnVuY3Rpb24oRil7cmV0dXJuIHRoaXMuYWRkU3R5bGVzKEYsaSl9LGdldFBhZGRpbmc6ZnVuY3Rpb24oRil7cmV0dXJuIHRoaXMuYWRkU3R5bGVzKEYsZyl9LGNsaXA6ZnVuY3Rpb24oKXt2YXIgRj10aGlzLEc9Ri5kb207aWYoIUUoRyxlKSl7RShHLGUsdHJ1ZSk7RShHLEMse286Ri5nZXRTdHlsZShrKSx4OkYuZ2V0U3R5bGUobikseTpGLmdldFN0eWxlKG0pfSk7Ri5zZXRTdHlsZShrLHopO0Yuc2V0U3R5bGUobix6KTtGLnNldFN0eWxlKG0seil9cmV0dXJuIEZ9LHVuY2xpcDpmdW5jdGlvbigpe3ZhciBGPXRoaXMsSD1GLmRvbTtpZihFKEgsZSkpe0UoSCxlLGZhbHNlKTt2YXIgRz1FKEgsQyk7aWYoRy5vKXtGLnNldFN0eWxlKGssRy5vKX1pZihHLngpe0Yuc2V0U3R5bGUobixHLngpfWlmKEcueSl7Ri5zZXRTdHlsZShtLEcueSl9fXJldHVybiBGfSxhZGRTdHlsZXM6ZnVuY3Rpb24oTSxMKXt2YXIgSj0wLEs9TS5tYXRjaChiKSxJLEgsRyxGPUsubGVuZ3RoO2ZvcihHPTA7RzxGO0crKyl7ST1LW0ddO0g9SSYmcGFyc2VJbnQodGhpcy5nZXRTdHlsZShMW0ldKSwxMCk7aWYoSCl7Sis9ci5hYnMoSCl9fXJldHVybiBKfSxtYXJnaW5zOmF9fSgpKTsoZnVuY3Rpb24oKXt2YXIgYT1FeHQubGliLkRvbSxiPSJsZWZ0IixnPSJyaWdodCIsZD0idG9wIixpPSJib3R0b20iLGg9InBvc2l0aW9uIixjPSJzdGF0aWMiLGU9InJlbGF0aXZlIixqPSJhdXRvIixrPSJ6LWluZGV4IjtFeHQuRWxlbWVudC5hZGRNZXRob2RzKHtnZXRYOmZ1bmN0aW9uKCl7cmV0dXJuIGEuZ2V0WCh0aGlzLmRvbSl9LGdldFk6ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRZKHRoaXMuZG9tKX0sZ2V0WFk6ZnVuY3Rpb24oKXtyZXR1cm4gYS5nZXRYWSh0aGlzLmRvbSl9LGdldE9mZnNldHNUbzpmdW5jdGlvbihsKXt2YXIgbj10aGlzLmdldFhZKCksbT1FeHQuZmx5KGwsIl9pbnRlcm5hbCIpLmdldFhZKCk7cmV0dXJuW25bMF0tbVswXSxuWzFdLW1bMV1dfSxzZXRYOmZ1bmN0aW9uKGwsbSl7cmV0dXJuIHRoaXMuc2V0WFkoW2wsdGhpcy5nZXRZKCldLHRoaXMuYW5pbVRlc3QoYXJndW1lbnRzLG0sMSkpfSxzZXRZOmZ1bmN0aW9uKG0sbCl7cmV0dXJuIHRoaXMuc2V0WFkoW3RoaXMuZ2V0WCgpLG1dLHRoaXMuYW5pbVRlc3QoYXJndW1lbnRzLGwsMSkpfSxzZXRMZWZ0OmZ1bmN0aW9uKGwpe3RoaXMuc2V0U3R5bGUoYix0aGlzLmFkZFVuaXRzKGwpKTtyZXR1cm4gdGhpc30sc2V0VG9wOmZ1bmN0aW9uKGwpe3RoaXMuc2V0U3R5bGUoZCx0aGlzLmFkZFVuaXRzKGwpKTtyZXR1cm4gdGhpc30sc2V0UmlnaHQ6ZnVuY3Rpb24obCl7dGhpcy5zZXRTdHlsZShnLHRoaXMuYWRkVW5pdHMobCkpO3JldHVybiB0aGlzfSxzZXRCb3R0b206ZnVuY3Rpb24obCl7dGhpcy5zZXRTdHlsZShpLHRoaXMuYWRkVW5pdHMobCkpO3JldHVybiB0aGlzfSxzZXRYWTpmdW5jdGlvbihuLGwpe3ZhciBtPXRoaXM7aWYoIWx8fCFtLmFuaW0pe2Euc2V0WFkobS5kb20sbil9ZWxzZXttLmFuaW0oe3BvaW50czp7dG86bn19LG0ucHJlYW5pbShhcmd1bWVudHMsMSksIm1vdGlvbiIpfXJldHVybiBtfSxzZXRMb2NhdGlvbjpmdW5jdGlvbihsLG4sbSl7cmV0dXJuIHRoaXMuc2V0WFkoW2wsbl0sdGhpcy5hbmltVGVzdChhcmd1bWVudHMsbSwyKSl9LG1vdmVUbzpmdW5jdGlvbihsLG4sbSl7cmV0dXJuIHRoaXMuc2V0WFkoW2wsbl0sdGhpcy5hbmltVGVzdChhcmd1bWVudHMsbSwyKSl9LGdldExlZnQ6ZnVuY3Rpb24obCl7cmV0dXJuICFsP3RoaXMuZ2V0WCgpOnBhcnNlSW50KHRoaXMuZ2V0U3R5bGUoYiksMTApfHwwfSxnZXRSaWdodDpmdW5jdGlvbihsKXt2YXIgbT10aGlzO3JldHVybiAhbD9tLmdldFgoKSttLmdldFdpZHRoKCk6KG0uZ2V0TGVmdCh0cnVlKSttLmdldFdpZHRoKCkpfHwwfSxnZXRUb3A6ZnVuY3Rpb24obCl7cmV0dXJuICFsP3RoaXMuZ2V0WSgpOnBhcnNlSW50KHRoaXMuZ2V0U3R5bGUoZCksMTApfHwwfSxnZXRCb3R0b206ZnVuY3Rpb24obCl7dmFyIG09dGhpcztyZXR1cm4gIWw/bS5nZXRZKCkrbS5nZXRIZWlnaHQoKToobS5nZXRUb3AodHJ1ZSkrbS5nZXRIZWlnaHQoKSl8fDB9LHBvc2l0aW9uOmZ1bmN0aW9uKHAsbyxsLG4pe3ZhciBtPXRoaXM7aWYoIXAmJm0uaXNTdHlsZShoLGMpKXttLnNldFN0eWxlKGgsZSl9ZWxzZXtpZihwKXttLnNldFN0eWxlKGgscCl9fWlmKG8pe20uc2V0U3R5bGUoayxvKX1pZihsfHxuKXttLnNldFhZKFtsfHxmYWxzZSxufHxmYWxzZV0pfX0sY2xlYXJQb3NpdGlvbmluZzpmdW5jdGlvbihsKXtsPWx8fCIiO3RoaXMuc2V0U3R5bGUoe2xlZnQ6bCxyaWdodDpsLHRvcDpsLGJvdHRvbTpsLCJ6LWluZGV4IjoiIixwb3NpdGlvbjpjfSk7cmV0dXJuIHRoaXN9LGdldFBvc2l0aW9uaW5nOmZ1bmN0aW9uKCl7dmFyIG09dGhpcy5nZXRTdHlsZShiKTt2YXIgbj10aGlzLmdldFN0eWxlKGQpO3JldHVybntwb3NpdGlvbjp0aGlzLmdldFN0eWxlKGgpLGxlZnQ6bSxyaWdodDptPyIiOnRoaXMuZ2V0U3R5bGUoZyksdG9wOm4sYm90dG9tOm4/IiI6dGhpcy5nZXRTdHlsZShpKSwiei1pbmRleCI6dGhpcy5nZXRTdHlsZShrKX19LHNldFBvc2l0aW9uaW5nOmZ1bmN0aW9uKGwpe3ZhciBuPXRoaXMsbT1uLmRvbS5zdHlsZTtuLnNldFN0eWxlKGwpO2lmKGwucmlnaHQ9PWope20ucmlnaHQ9IiJ9aWYobC5ib3R0b209PWope20uYm90dG9tPSIifXJldHVybiBufSx0cmFuc2xhdGVQb2ludHM6ZnVuY3Rpb24obSx1KXt1PWlzTmFOKG1bMV0pP3U6bVsxXTttPWlzTmFOKG1bMF0pP206bVswXTt2YXIgcT10aGlzLHI9cS5pc1N0eWxlKGgsZSkscz1xLmdldFhZKCksbj1wYXJzZUludChxLmdldFN0eWxlKGIpLDEwKSxwPXBhcnNlSW50KHEuZ2V0U3R5bGUoZCksMTApO249IWlzTmFOKG4pP246KHI/MDpxLmRvbS5vZmZzZXRMZWZ0KTtwPSFpc05hTihwKT9wOihyPzA6cS5kb20ub2Zmc2V0VG9wKTtyZXR1cm57bGVmdDoobS1zWzBdK24pLHRvcDoodS1zWzFdK3ApfX0sYW5pbVRlc3Q6ZnVuY3Rpb24obSxsLG4pe3JldHVybiAhIWwmJnRoaXMucHJlYW5pbT90aGlzLnByZWFuaW0obSxuKTpmYWxzZX19KX0pKCk7RXh0LkVsZW1lbnQuYWRkTWV0aG9kcyh7aXNTY3JvbGxhYmxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kb207cmV0dXJuIGEuc2Nyb2xsSGVpZ2h0PmEuY2xpZW50SGVpZ2h0fHxhLnNjcm9sbFdpZHRoPmEuY2xpZW50V2lkdGh9LHNjcm9sbFRvOmZ1bmN0aW9uKGEsYil7dGhpcy5kb21bInNjcm9sbCIrKC90b3AvaS50ZXN0KGEpPyJUb3AiOiJMZWZ0IildPWI7cmV0dXJuIHRoaXN9LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBpPXRoaXMuZG9tLGg9ZG9jdW1lbnQsYT1oLmJvZHksYz1oLmRvY3VtZW50RWxlbWVudCxiLGcsZTtpZihpPT1ofHxpPT1hKXtpZihFeHQuaXNJRSYmRXh0LmlzU3RyaWN0KXtiPWMuc2Nyb2xsTGVmdDtnPWMuc2Nyb2xsVG9wfWVsc2V7Yj13aW5kb3cucGFnZVhPZmZzZXQ7Zz13aW5kb3cucGFnZVlPZmZzZXR9ZT17bGVmdDpifHwoYT9hLnNjcm9sbExlZnQ6MCksdG9wOmd8fChhP2Euc2Nyb2xsVG9wOjApfX1lbHNle2U9e2xlZnQ6aS5zY3JvbGxMZWZ0LHRvcDppLnNjcm9sbFRvcH19cmV0dXJuIGV9fSk7RXh0LkVsZW1lbnQuVklTSUJJTElUWT0xO0V4dC5FbGVtZW50LkRJU1BMQVk9MjtFeHQuRWxlbWVudC5PRkZTRVRTPTM7RXh0LkVsZW1lbnQuQVNDTEFTUz00O0V4dC5FbGVtZW50LnZpc2liaWxpdHlDbHM9IngtaGlkZS1ub3NpemUiO0V4dC5FbGVtZW50LmFkZE1ldGhvZHMoZnVuY3Rpb24oKXt2YXIgZT1FeHQuRWxlbWVudCxwPSJvcGFjaXR5IixqPSJ2aXNpYmlsaXR5IixnPSJkaXNwbGF5IixkPSJoaWRkZW4iLG49Im9mZnNldHMiLGs9ImFzY2xhc3MiLG09Im5vbmUiLGE9Im5vc2l6ZSIsYj0ib3JpZ2luYWxEaXNwbGF5IixjPSJ2aXNpYmlsaXR5TW9kZSIsaD0iaXNWaXNpYmxlIixpPWUuZGF0YSxsPWZ1bmN0aW9uKHIpe3ZhciBxPWkocixiKTtpZihxPT09dW5kZWZpbmVkKXtpKHIsYixxPSIiKX1yZXR1cm4gcX0sbz1mdW5jdGlvbihyKXt2YXIgcT1pKHIsYyk7aWYocT09PXVuZGVmaW5lZCl7aShyLGMscT0xKX1yZXR1cm4gcX07cmV0dXJue29yaWdpbmFsRGlzcGxheToiIix2aXNpYmlsaXR5TW9kZToxLHNldFZpc2liaWxpdHlNb2RlOmZ1bmN0aW9uKHEpe2kodGhpcy5kb20sYyxxKTtyZXR1cm4gdGhpc30sYW5pbWF0ZTpmdW5jdGlvbihyLHQscyx1LHEpe3RoaXMuYW5pbShyLHtkdXJhdGlvbjp0LGNhbGxiYWNrOnMsZWFzaW5nOnV9LHEpO3JldHVybiB0aGlzfSxhbmltOmZ1bmN0aW9uKHQsdSxyLHcscyxxKXtyPXJ8fCJydW4iO3U9dXx8e307dmFyIHY9dGhpcyx4PUV4dC5saWIuQW5pbVtyXSh2LmRvbSx0LCh1LmR1cmF0aW9ufHx3KXx8MC4zNSwodS5lYXNpbmd8fHMpfHwiZWFzZU91dCIsZnVuY3Rpb24oKXtpZihxKXtxLmNhbGwodil9aWYodS5jYWxsYmFjayl7dS5jYWxsYmFjay5jYWxsKHUuc2NvcGV8fHYsdix1KX19LHYpO3UuYW5pbT14O3JldHVybiB4fSxwcmVhbmltOmZ1bmN0aW9uKHEscil7cmV0dXJuICFxW3JdP2ZhbHNlOih0eXBlb2YgcVtyXT09Im9iamVjdCI/cVtyXTp7ZHVyYXRpb246cVtyKzFdLGNhbGxiYWNrOnFbcisyXSxlYXNpbmc6cVtyKzNdfSl9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3ZhciBxPXRoaXMscz1xLmRvbSxyPWkocyxoKTtpZih0eXBlb2Ygcj09ImJvb2xlYW4iKXtyZXR1cm4gcn1yPSFxLmlzU3R5bGUoaixkKSYmIXEuaXNTdHlsZShnLG0pJiYhKChvKHMpPT1lLkFTQ0xBU1MpJiZxLmhhc0NsYXNzKHEudmlzaWJpbGl0eUNsc3x8ZS52aXNpYmlsaXR5Q2xzKSk7aShzLGgscik7cmV0dXJuIHJ9LHNldFZpc2libGU6ZnVuY3Rpb24odCxxKXt2YXIgdz10aGlzLHIseSx4LHYsdT13LmRvbSxzPW8odSk7aWYodHlwZW9mIHE9PSJzdHJpbmciKXtzd2l0Y2gocSl7Y2FzZSBnOnM9ZS5ESVNQTEFZO2JyZWFrO2Nhc2UgajpzPWUuVklTSUJJTElUWTticmVhaztjYXNlIG46cz1lLk9GRlNFVFM7YnJlYWs7Y2FzZSBhOmNhc2UgazpzPWUuQVNDTEFTUzticmVha313LnNldFZpc2liaWxpdHlNb2RlKHMpO3E9ZmFsc2V9aWYoIXF8fCF3LmFuaW0pe2lmKHM9PWUuQVNDTEFTUyl7d1t0PyJyZW1vdmVDbGFzcyI6ImFkZENsYXNzIl0ody52aXNpYmlsaXR5Q2xzfHxlLnZpc2liaWxpdHlDbHMpfWVsc2V7aWYocz09ZS5ESVNQTEFZKXtyZXR1cm4gdy5zZXREaXNwbGF5ZWQodCl9ZWxzZXtpZihzPT1lLk9GRlNFVFMpe2lmKCF0KXt3LmhpZGVNb2RlU3R5bGVzPXtwb3NpdGlvbjp3LmdldFN0eWxlKCJwb3NpdGlvbiIpLHRvcDp3LmdldFN0eWxlKCJ0b3AiKSxsZWZ0OncuZ2V0U3R5bGUoImxlZnQiKX07dy5hcHBseVN0eWxlcyh7cG9zaXRpb246ImFic29sdXRlIix0b3A6Ii0xMDAwMHB4IixsZWZ0OiItMTAwMDBweCJ9KX1lbHNle3cuYXBwbHlTdHlsZXMody5oaWRlTW9kZVN0eWxlc3x8e3Bvc2l0aW9uOiIiLHRvcDoiIixsZWZ0OiIifSk7ZGVsZXRlIHcuaGlkZU1vZGVTdHlsZXN9fWVsc2V7dy5maXhEaXNwbGF5KCk7dS5zdHlsZS52aXNpYmlsaXR5PXQ/InZpc2libGUiOmR9fX19ZWxzZXtpZih0KXt3LnNldE9wYWNpdHkoMC4wMSk7dy5zZXRWaXNpYmxlKHRydWUpfXcuYW5pbSh7b3BhY2l0eTp7dG86KHQ/MTowKX19LHcucHJlYW5pbShhcmd1bWVudHMsMSksbnVsbCwwLjM1LCJlYXNlSW4iLGZ1bmN0aW9uKCl7dHx8dy5zZXRWaXNpYmxlKGZhbHNlKS5zZXRPcGFjaXR5KDEpfSl9aSh1LGgsdCk7cmV0dXJuIHd9LGhhc01ldHJpY3M6ZnVuY3Rpb24oKXt2YXIgcT10aGlzLmRvbTtyZXR1cm4gdGhpcy5pc1Zpc2libGUoKXx8KG8ocSk9PWUuVklTSUJJTElUWSl9LHRvZ2dsZTpmdW5jdGlvbihxKXt2YXIgcj10aGlzO3Iuc2V0VmlzaWJsZSghci5pc1Zpc2libGUoKSxyLnByZWFuaW0oYXJndW1lbnRzLDApKTtyZXR1cm4gcn0sc2V0RGlzcGxheWVkOmZ1bmN0aW9uKHEpe2lmKHR5cGVvZiBxPT0iYm9vbGVhbiIpe3E9cT9sKHRoaXMuZG9tKTptfXRoaXMuc2V0U3R5bGUoZyxxKTtyZXR1cm4gdGhpc30sZml4RGlzcGxheTpmdW5jdGlvbigpe3ZhciBxPXRoaXM7aWYocS5pc1N0eWxlKGcsbSkpe3Euc2V0U3R5bGUoaixkKTtxLnNldFN0eWxlKGcsbCh0aGlzLmRvbSkpO2lmKHEuaXNTdHlsZShnLG0pKXtxLnNldFN0eWxlKGcsImJsb2NrIil9fX0saGlkZTpmdW5jdGlvbihxKXtpZih0eXBlb2YgcT09InN0cmluZyIpe3RoaXMuc2V0VmlzaWJsZShmYWxzZSxxKTtyZXR1cm4gdGhpc310aGlzLnNldFZpc2libGUoZmFsc2UsdGhpcy5wcmVhbmltKGFyZ3VtZW50cywwKSk7cmV0dXJuIHRoaXN9LHNob3c6ZnVuY3Rpb24ocSl7aWYodHlwZW9mIHE9PSJzdHJpbmciKXt0aGlzLnNldFZpc2libGUodHJ1ZSxxKTtyZXR1cm4gdGhpc310aGlzLnNldFZpc2libGUodHJ1ZSx0aGlzLnByZWFuaW0oYXJndW1lbnRzLDApKTtyZXR1cm4gdGhpc319fSgpKTsoZnVuY3Rpb24oKXt2YXIgeT1udWxsLEE9dW5kZWZpbmVkLGs9dHJ1ZSx0PWZhbHNlLGo9InNldFgiLGg9InNldFkiLGE9InNldFhZIixuPSJsZWZ0IixsPSJib3R0b20iLHM9InRvcCIsbT0icmlnaHQiLHE9ImhlaWdodCIsZz0id2lkdGgiLGk9InBvaW50cyIsdz0iaGlkZGVuIix6PSJhYnNvbHV0ZSIsdT0idmlzaWJsZSIsZT0ibW90aW9uIixvPSJwb3NpdGlvbiIscj0iZWFzZU91dCIsZD1uZXcgRXh0LkVsZW1lbnQuRmx5d2VpZ2h0KCksdj17fSx4PWZ1bmN0aW9uKEIpe3JldHVybiBCfHx7fX0scD1mdW5jdGlvbihCKXtkLmRvbT1CO2QuaWQ9RXh0LmlkKEIpO3JldHVybiBkfSxjPWZ1bmN0aW9uKEIpe2lmKCF2W0JdKXt2W0JdPVtdfXJldHVybiB2W0JdfSxiPWZ1bmN0aW9uKEMsQil7dltDXT1CfTtFeHQuZW5hYmxlRng9aztFeHQuRng9e3N3aXRjaFN0YXRlbWVudHM6ZnVuY3Rpb24oQyxELEIpe3JldHVybiBELmFwcGx5KHRoaXMsQltDXSl9LHNsaWRlSW46ZnVuY3Rpb24oSCxFKXtFPXgoRSk7dmFyIEo9dGhpcyxHPUouZG9tLE09Ry5zdHlsZSxPLEIsTCxELEMsTSxJLE4sSyxGO0g9SHx8InQiO0oucXVldWVGeChFLGZ1bmN0aW9uKCl7Tz1wKEcpLmdldFhZKCk7cChHKS5maXhEaXNwbGF5KCk7Qj1wKEcpLmdldEZ4UmVzdG9yZSgpO0w9e3g6T1swXSx5Ok9bMV0sMDpPWzBdLDE6T1sxXSx3aWR0aDpHLm9mZnNldFdpZHRoLGhlaWdodDpHLm9mZnNldEhlaWdodH07TC5yaWdodD1MLngrTC53aWR0aDtMLmJvdHRvbT1MLnkrTC5oZWlnaHQ7cChHKS5zZXRXaWR0aChMLndpZHRoKS5zZXRIZWlnaHQoTC5oZWlnaHQpO0Q9cChHKS5meFdyYXAoQi5wb3MsRSx3KTtNLnZpc2liaWxpdHk9dTtNLnBvc2l0aW9uPXo7ZnVuY3Rpb24gUCgpe3AoRykuZnhVbndyYXAoRCxCLnBvcyxFKTtNLndpZHRoPUIud2lkdGg7TS5oZWlnaHQ9Qi5oZWlnaHQ7cChHKS5hZnRlckZ4KEUpfU49e3RvOltMLngsTC55XX07Sz17dG86TC53aWR0aH07Rj17dG86TC5oZWlnaHR9O2Z1bmN0aW9uIFEoVSxSLFYsUyxYLFosYWMsYWIsYWEsVyxUKXt2YXIgWT17fTtwKFUpLnNldFdpZHRoKFYpLnNldEhlaWdodChTKTtpZihwKFUpW1hdKXtwKFUpW1hdKFopfVJbYWNdPVJbYWJdPSIwIjtpZihhYSl7WS53aWR0aD1hYX1pZihXKXtZLmhlaWdodD1XfWlmKFQpe1kucG9pbnRzPVR9cmV0dXJuIFl9ST1wKEcpLnN3aXRjaFN0YXRlbWVudHMoSC50b0xvd2VyQ2FzZSgpLFEse3Q6W0QsTSxMLndpZHRoLDAseSx5LG4sbCx5LEYseV0sbDpbRCxNLDAsTC5oZWlnaHQseSx5LG0scyxLLHkseV0scjpbRCxNLEwud2lkdGgsTC5oZWlnaHQsaixMLnJpZ2h0LG4scyx5LHksTl0sYjpbRCxNLEwud2lkdGgsTC5oZWlnaHQsaCxMLmJvdHRvbSxuLHMseSxGLE5dLHRsOltELE0sMCwwLHkseSxtLGwsSyxGLE5dLGJsOltELE0sMCwwLGgsTC55K0wuaGVpZ2h0LG0scyxLLEYsTl0sYnI6W0QsTSwwLDAsYSxbTC5yaWdodCxMLmJvdHRvbV0sbixzLEssRixOXSx0cjpbRCxNLDAsMCxqLEwueCtMLndpZHRoLG4sbCxLLEYsTl19KTtNLnZpc2liaWxpdHk9dTtwKEQpLnNob3coKTthcmd1bWVudHMuY2FsbGVlLmFuaW09cChEKS5meGFuaW0oSSxFLGUsMC41LHIsUCl9KTtyZXR1cm4gSn0sc2xpZGVPdXQ6ZnVuY3Rpb24oRixEKXtEPXgoRCk7dmFyIEg9dGhpcyxFPUguZG9tLEs9RS5zdHlsZSxMPUguZ2V0WFkoKSxDLEIsSSxKLEc9e3RvOjB9O0Y9Rnx8InQiO0gucXVldWVGeChELGZ1bmN0aW9uKCl7Qj1wKEUpLmdldEZ4UmVzdG9yZSgpO0k9e3g6TFswXSx5OkxbMV0sMDpMWzBdLDE6TFsxXSx3aWR0aDpFLm9mZnNldFdpZHRoLGhlaWdodDpFLm9mZnNldEhlaWdodH07SS5yaWdodD1JLngrSS53aWR0aDtJLmJvdHRvbT1JLnkrSS5oZWlnaHQ7cChFKS5zZXRXaWR0aChJLndpZHRoKS5zZXRIZWlnaHQoSS5oZWlnaHQpO0M9cChFKS5meFdyYXAoQi5wb3MsRCx1KTtLLnZpc2liaWxpdHk9dTtLLnBvc2l0aW9uPXo7cChDKS5zZXRXaWR0aChJLndpZHRoKS5zZXRIZWlnaHQoSS5oZWlnaHQpO2Z1bmN0aW9uIE0oKXtELnVzZURpc3BsYXk/cChFKS5zZXREaXNwbGF5ZWQodCk6cChFKS5oaWRlKCk7cChFKS5meFVud3JhcChDLEIucG9zLEQpO0sud2lkdGg9Qi53aWR0aDtLLmhlaWdodD1CLmhlaWdodDtwKEUpLmFmdGVyRngoRCl9ZnVuY3Rpb24gTihPLFcsVSxYLFMsVixSLFQsUSl7dmFyIFA9e307T1tXXT1PW1VdPSIwIjtQW1hdPVM7aWYoVil7UFtWXT1SfWlmKFQpe1BbVF09UX1yZXR1cm4gUH1KPXAoRSkuc3dpdGNoU3RhdGVtZW50cyhGLnRvTG93ZXJDYXNlKCksTix7dDpbSyxuLGwscSxHXSxsOltLLG0scyxnLEddLHI6W0ssbixzLGcsRyxpLHt0bzpbSS5yaWdodCxJLnldfV0sYjpbSyxuLHMscSxHLGkse3RvOltJLngsSS5ib3R0b21dfV0sdGw6W0ssbSxsLGcsRyxxLEddLGJsOltLLG0scyxnLEcscSxHLGkse3RvOltJLngsSS5ib3R0b21dfV0sYnI6W0ssbixzLGcsRyxxLEcsaSx7dG86W0kueCtJLndpZHRoLEkuYm90dG9tXX1dLHRyOltLLG4sbCxnLEcscSxHLGkse3RvOltJLnJpZ2h0LEkueV19XX0pO2FyZ3VtZW50cy5jYWxsZWUuYW5pbT1wKEMpLmZ4YW5pbShKLEQsZSwwLjUscixNKX0pO3JldHVybiBIfSxwdWZmOmZ1bmN0aW9uKEgpe0g9eChIKTt2YXIgRj10aGlzLEc9Ri5kb20sQz1HLnN0eWxlLEQsQixFO0YucXVldWVGeChILGZ1bmN0aW9uKCl7RD1wKEcpLmdldFdpZHRoKCk7Qj1wKEcpLmdldEhlaWdodCgpO3AoRykuY2xlYXJPcGFjaXR5KCk7cChHKS5zaG93KCk7RT1wKEcpLmdldEZ4UmVzdG9yZSgpO2Z1bmN0aW9uIEkoKXtILnVzZURpc3BsYXk/cChHKS5zZXREaXNwbGF5ZWQodCk6cChHKS5oaWRlKCk7cChHKS5jbGVhck9wYWNpdHkoKTtwKEcpLnNldFBvc2l0aW9uaW5nKEUucG9zKTtDLndpZHRoPUUud2lkdGg7Qy5oZWlnaHQ9RS5oZWlnaHQ7Qy5mb250U2l6ZT0iIjtwKEcpLmFmdGVyRngoSCl9YXJndW1lbnRzLmNhbGxlZS5hbmltPXAoRykuZnhhbmltKHt3aWR0aDp7dG86cChHKS5hZGp1c3RXaWR0aChEKjIpfSxoZWlnaHQ6e3RvOnAoRykuYWRqdXN0SGVpZ2h0KEIqMil9LHBvaW50czp7Ynk6Wy1EKjAuNSwtQiowLjVdfSxvcGFjaXR5Ont0bzowfSxmb250U2l6ZTp7dG86MjAwLHVuaXQ6IiUifX0sSCxlLDAuNSxyLEkpfSk7cmV0dXJuIEZ9LHN3aXRjaE9mZjpmdW5jdGlvbihGKXtGPXgoRik7dmFyIEQ9dGhpcyxFPUQuZG9tLEI9RS5zdHlsZSxDO0QucXVldWVGeChGLGZ1bmN0aW9uKCl7cChFKS5jbGVhck9wYWNpdHkoKTtwKEUpLmNsaXAoKTtDPXAoRSkuZ2V0RnhSZXN0b3JlKCk7ZnVuY3Rpb24gRygpe0YudXNlRGlzcGxheT9wKEUpLnNldERpc3BsYXllZCh0KTpwKEUpLmhpZGUoKTtwKEUpLmNsZWFyT3BhY2l0eSgpO3AoRSkuc2V0UG9zaXRpb25pbmcoQy5wb3MpO0Iud2lkdGg9Qy53aWR0aDtCLmhlaWdodD1DLmhlaWdodDtwKEUpLmFmdGVyRngoRil9cChFKS5meGFuaW0oe29wYWNpdHk6e3RvOjAuM319LHkseSwwLjEseSxmdW5jdGlvbigpe3AoRSkuY2xlYXJPcGFjaXR5KCk7KGZ1bmN0aW9uKCl7cChFKS5meGFuaW0oe2hlaWdodDp7dG86MX0scG9pbnRzOntieTpbMCxwKEUpLmdldEhlaWdodCgpKjAuNV19fSxGLGUsMC4zLCJlYXNlSW4iLEcpfSkuZGVmZXIoMTAwKX0pfSk7cmV0dXJuIER9LGhpZ2hsaWdodDpmdW5jdGlvbihELEgpe0g9eChIKTt2YXIgRj10aGlzLEc9Ri5kb20sQj1ILmF0dHJ8fCJiYWNrZ3JvdW5kQ29sb3IiLEM9e30sRTtGLnF1ZXVlRngoSCxmdW5jdGlvbigpe3AoRykuY2xlYXJPcGFjaXR5KCk7cChHKS5zaG93KCk7ZnVuY3Rpb24gSSgpe0cuc3R5bGVbQl09RTtwKEcpLmFmdGVyRngoSCl9RT1HLnN0eWxlW0JdO0NbQl09e2Zyb206RHx8ImZmZmY5YyIsdG86SC5lbmRDb2xvcnx8cChHKS5nZXRDb2xvcihCKXx8ImZmZmZmZiJ9O2FyZ3VtZW50cy5jYWxsZWUuYW5pbT1wKEcpLmZ4YW5pbShDLEgsImNvbG9yIiwxLCJlYXNlSW4iLEkpfSk7cmV0dXJuIEZ9LGZyYW1lOmZ1bmN0aW9uKEIsRSxIKXtIPXgoSCk7dmFyIEQ9dGhpcyxHPUQuZG9tLEMsRjtELnF1ZXVlRngoSCxmdW5jdGlvbigpe0I9Qnx8IiNDM0RBRjkiO2lmKEIubGVuZ3RoPT02KXtCPSIjIitCfUU9RXx8MTtwKEcpLnNob3coKTt2YXIgTD1wKEcpLmdldFhZKCksSj17eDpMWzBdLHk6TFsxXSwwOkxbMF0sMTpMWzFdLHdpZHRoOkcub2Zmc2V0V2lkdGgsaGVpZ2h0Okcub2Zmc2V0SGVpZ2h0fSxJPWZ1bmN0aW9uKCl7Qz1wKGRvY3VtZW50LmJvZHl8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuY3JlYXRlQ2hpbGQoe3N0eWxlOntwb3NpdGlvbjp6LCJ6LWluZGV4IjozNTAwMCxib3JkZXI6IjBweCBzb2xpZCAiK0J9fSk7cmV0dXJuIEMucXVldWVGeCh7fSxLKX07YXJndW1lbnRzLmNhbGxlZS5hbmltPXtpc0FuaW1hdGVkOnRydWUsc3RvcDpmdW5jdGlvbigpe0U9MDtDLnN0b3BGeCgpfX07ZnVuY3Rpb24gSygpe3ZhciBNPUV4dC5pc0JvcmRlckJveD8yOjE7Rj1DLmFuaW0oe3RvcDp7ZnJvbTpKLnksdG86Si55LTIwfSxsZWZ0Ontmcm9tOkoueCx0bzpKLngtMjB9LGJvcmRlcldpZHRoOntmcm9tOjAsdG86MTB9LG9wYWNpdHk6e2Zyb206MSx0bzowfSxoZWlnaHQ6e2Zyb206Si5oZWlnaHQsdG86Si5oZWlnaHQrMjAqTX0sd2lkdGg6e2Zyb206Si53aWR0aCx0bzpKLndpZHRoKzIwKk19fSx7ZHVyYXRpb246SC5kdXJhdGlvbnx8MSxjYWxsYmFjazpmdW5jdGlvbigpe0MucmVtb3ZlKCk7LS1FPjA/SSgpOnAoRykuYWZ0ZXJGeChIKX19KTthcmd1bWVudHMuY2FsbGVlLmFuaW09e2lzQW5pbWF0ZWQ6dHJ1ZSxzdG9wOmZ1bmN0aW9uKCl7Ri5zdG9wKCl9fX1JKCl9KTtyZXR1cm4gRH0scGF1c2U6ZnVuY3Rpb24oRCl7dmFyIEM9dGhpcy5kb20sQjt0aGlzLnF1ZXVlRngoe30sZnVuY3Rpb24oKXtCPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtwKEMpLmFmdGVyRngoe30pfSxEKjEwMDApO2FyZ3VtZW50cy5jYWxsZWUuYW5pbT17aXNBbmltYXRlZDp0cnVlLHN0b3A6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoQik7cChDKS5hZnRlckZ4KHt9KX19fSk7cmV0dXJuIHRoaXN9LGZhZGVJbjpmdW5jdGlvbihEKXtEPXgoRCk7dmFyIEI9dGhpcyxDPUIuZG9tLEU9RC5lbmRPcGFjaXR5fHwxO0IucXVldWVGeChELGZ1bmN0aW9uKCl7cChDKS5zZXRPcGFjaXR5KDApO3AoQykuZml4RGlzcGxheSgpO0Muc3R5bGUudmlzaWJpbGl0eT11O2FyZ3VtZW50cy5jYWxsZWUuYW5pbT1wKEMpLmZ4YW5pbSh7b3BhY2l0eTp7dG86RX19LEQseSwwLjUscixmdW5jdGlvbigpe2lmKEU9PTEpe3AoQykuY2xlYXJPcGFjaXR5KCl9cChDKS5hZnRlckZ4KEQpfSl9KTtyZXR1cm4gQn0sZmFkZU91dDpmdW5jdGlvbihFKXtFPXgoRSk7dmFyIEM9dGhpcyxEPUMuZG9tLEI9RC5zdHlsZSxGPUUuZW5kT3BhY2l0eXx8MDtDLnF1ZXVlRngoRSxmdW5jdGlvbigpe2FyZ3VtZW50cy5jYWxsZWUuYW5pbT1wKEQpLmZ4YW5pbSh7b3BhY2l0eTp7dG86Rn19LEUseSwwLjUscixmdW5jdGlvbigpe2lmKEY9PTApe0V4dC5FbGVtZW50LmRhdGEoRCwidmlzaWJpbGl0eU1vZGUiKT09RXh0LkVsZW1lbnQuRElTUExBWXx8RS51c2VEaXNwbGF5P0IuZGlzcGxheT0ibm9uZSI6Qi52aXNpYmlsaXR5PXc7cChEKS5jbGVhck9wYWNpdHkoKX1wKEQpLmFmdGVyRngoRSl9KX0pO3JldHVybiBDfSxzY2FsZTpmdW5jdGlvbihCLEMsRCl7dGhpcy5zaGlmdChFeHQuYXBwbHkoe30sRCx7d2lkdGg6QixoZWlnaHQ6Q30pKTtyZXR1cm4gdGhpc30sc2hpZnQ6ZnVuY3Rpb24oRCl7RD14KEQpO3ZhciBDPXRoaXMuZG9tLEI9e307dGhpcy5xdWV1ZUZ4KEQsZnVuY3Rpb24oKXtmb3IodmFyIEUgaW4gRCl7aWYoRFtFXSE9QSl7QltFXT17dG86RFtFXX19fUIud2lkdGg/Qi53aWR0aC50bz1wKEMpLmFkanVzdFdpZHRoKEQud2lkdGgpOkI7Qi5oZWlnaHQ/Qi5oZWlnaHQudG89cChDKS5hZGp1c3RXaWR0aChELmhlaWdodCk6QjtpZihCLnh8fEIueXx8Qi54eSl7Qi5wb2ludHM9Qi54eXx8e3RvOltCLng/Qi54LnRvOnAoQykuZ2V0WCgpLEIueT9CLnkudG86cChDKS5nZXRZKCldfX1hcmd1bWVudHMuY2FsbGVlLmFuaW09cChDKS5meGFuaW0oQixELGUsMC4zNSxyLGZ1bmN0aW9uKCl7cChDKS5hZnRlckZ4KEQpfSl9KTtyZXR1cm4gdGhpc30sZ2hvc3Q6ZnVuY3Rpb24oRSxDKXtDPXgoQyk7dmFyIEc9dGhpcyxEPUcuZG9tLEo9RC5zdHlsZSxIPXtvcGFjaXR5Ont0bzowfSxwb2ludHM6e319LEs9SC5wb2ludHMsQixJLEY7RT1FfHwiYiI7Ry5xdWV1ZUZ4KEMsZnVuY3Rpb24oKXtCPXAoRCkuZ2V0RnhSZXN0b3JlKCk7ST1wKEQpLmdldFdpZHRoKCk7Rj1wKEQpLmdldEhlaWdodCgpO2Z1bmN0aW9uIEwoKXtDLnVzZURpc3BsYXk/cChEKS5zZXREaXNwbGF5ZWQodCk6cChEKS5oaWRlKCk7cChEKS5jbGVhck9wYWNpdHkoKTtwKEQpLnNldFBvc2l0aW9uaW5nKEIucG9zKTtKLndpZHRoPUIud2lkdGg7Si5oZWlnaHQ9Qi5oZWlnaHQ7cChEKS5hZnRlckZ4KEMpfUsuYnk9cChEKS5zd2l0Y2hTdGF0ZW1lbnRzKEUudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihOLE0pe3JldHVybltOLE1dfSx7dDpbMCwtRl0sbDpbLUksMF0scjpbSSwwXSxiOlswLEZdLHRsOlstSSwtRl0sYmw6Wy1JLEZdLGJyOltJLEZdLHRyOltJLC1GXX0pO2FyZ3VtZW50cy5jYWxsZWUuYW5pbT1wKEQpLmZ4YW5pbShILEMsZSwwLjUscixMKX0pO3JldHVybiBHfSxzeW5jRng6ZnVuY3Rpb24oKXt2YXIgQj10aGlzO0IuZnhEZWZhdWx0cz1FeHQuYXBwbHkoQi5meERlZmF1bHRzfHx7fSx7YmxvY2s6dCxjb25jdXJyZW50Omssc3RvcEZ4OnR9KTtyZXR1cm4gQn0sc2VxdWVuY2VGeDpmdW5jdGlvbigpe3ZhciBCPXRoaXM7Qi5meERlZmF1bHRzPUV4dC5hcHBseShCLmZ4RGVmYXVsdHN8fHt9LHtibG9jazp0LGNvbmN1cnJlbnQ6dCxzdG9wRng6dH0pO3JldHVybiBCfSxuZXh0Rng6ZnVuY3Rpb24oKXt2YXIgQj1jKHRoaXMuZG9tLmlkKVswXTtpZihCKXtCLmNhbGwodGhpcyl9fSxoYXNBY3RpdmVGeDpmdW5jdGlvbigpe3JldHVybiBjKHRoaXMuZG9tLmlkKVswXX0sc3RvcEZ4OmZ1bmN0aW9uKEIpe3ZhciBDPXRoaXMsRT1DLmRvbS5pZDtpZihDLmhhc0FjdGl2ZUZ4KCkpe3ZhciBEPWMoRSlbMF07aWYoRCYmRC5hbmltKXtpZihELmFuaW0uaXNBbmltYXRlZCl7YihFLFtEXSk7RC5hbmltLnN0b3AoQiE9PXVuZGVmaW5lZD9COmspfWVsc2V7YihFLFtdKX19fXJldHVybiBDfSxiZWZvcmVGeDpmdW5jdGlvbihCKXtpZih0aGlzLmhhc0FjdGl2ZUZ4KCkmJiFCLmNvbmN1cnJlbnQpe2lmKEIuc3RvcEZ4KXt0aGlzLnN0b3BGeCgpO3JldHVybiBrfXJldHVybiB0fXJldHVybiBrfSxoYXNGeEJsb2NrOmZ1bmN0aW9uKCl7dmFyIEI9Yyh0aGlzLmRvbS5pZCk7cmV0dXJuIEImJkJbMF0mJkJbMF0uYmxvY2t9LHF1ZXVlRng6ZnVuY3Rpb24oRSxCKXt2YXIgQz1wKHRoaXMuZG9tKTtpZighQy5oYXNGeEJsb2NrKCkpe0V4dC5hcHBseUlmKEUsQy5meERlZmF1bHRzKTtpZighRS5jb25jdXJyZW50KXt2YXIgRD1DLmJlZm9yZUZ4KEUpO0IuYmxvY2s9RS5ibG9jaztjKEMuZG9tLmlkKS5wdXNoKEIpO2lmKEQpe0MubmV4dEZ4KCl9fWVsc2V7Qi5jYWxsKEMpfX1yZXR1cm4gQ30sZnhXcmFwOmZ1bmN0aW9uKEgsRixEKXt2YXIgRT10aGlzLmRvbSxDLEI7aWYoIUYud3JhcHx8IShDPUV4dC5nZXREb20oRi53cmFwKSkpe2lmKEYuZml4UG9zaXRpb24pe0I9cChFKS5nZXRYWSgpfXZhciBHPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO0cuc3R5bGUudmlzaWJpbGl0eT1EO0M9RS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShHLEUpO3AoQykuc2V0UG9zaXRpb25pbmcoSCk7aWYocChDKS5pc1N0eWxlKG8sInN0YXRpYyIpKXtwKEMpLnBvc2l0aW9uKCJyZWxhdGl2ZSIpfXAoRSkuY2xlYXJQb3NpdGlvbmluZygiYXV0byIpO3AoQykuY2xpcCgpO0MuYXBwZW5kQ2hpbGQoRSk7aWYoQil7cChDKS5zZXRYWShCKX19cmV0dXJuIEN9LGZ4VW53cmFwOmZ1bmN0aW9uKEMsRixFKXt2YXIgRD10aGlzLmRvbTtwKEQpLmNsZWFyUG9zaXRpb25pbmcoKTtwKEQpLnNldFBvc2l0aW9uaW5nKEYpO2lmKCFFLndyYXApe3ZhciBCPXAoQykuZG9tLnBhcmVudE5vZGU7Qi5pbnNlcnRCZWZvcmUoRCxDKTtwKEMpLnJlbW92ZSgpfX0sZ2V0RnhSZXN0b3JlOmZ1bmN0aW9uKCl7dmFyIEI9dGhpcy5kb20uc3R5bGU7cmV0dXJue3Bvczp0aGlzLmdldFBvc2l0aW9uaW5nKCksd2lkdGg6Qi53aWR0aCxoZWlnaHQ6Qi5oZWlnaHR9fSxhZnRlckZ4OmZ1bmN0aW9uKEMpe3ZhciBCPXRoaXMuZG9tLEQ9Qi5pZDtpZihDLmFmdGVyU3R5bGUpe3AoQikuc2V0U3R5bGUoQy5hZnRlclN0eWxlKX1pZihDLmFmdGVyQ2xzKXtwKEIpLmFkZENsYXNzKEMuYWZ0ZXJDbHMpfWlmKEMucmVtb3ZlPT1rKXtwKEIpLnJlbW92ZSgpfWlmKEMuY2FsbGJhY2spe0MuY2FsbGJhY2suY2FsbChDLnNjb3BlLHAoQikpfWlmKCFDLmNvbmN1cnJlbnQpe2MoRCkuc2hpZnQoKTtwKEIpLm5leHRGeCgpfX0sZnhhbmltOmZ1bmN0aW9uKEUsRixDLEcsRCxCKXtDPUN8fCJydW4iO0Y9Rnx8e307dmFyIEg9RXh0LmxpYi5BbmltW0NdKHRoaXMuZG9tLEUsKEYuZHVyYXRpb258fEcpfHwwLjM1LChGLmVhc2luZ3x8RCl8fHIsQix0aGlzKTtGLmFuaW09SDtyZXR1cm4gSH19O0V4dC5GeC5yZXNpemU9RXh0LkZ4LnNjYWxlO0V4dC5FbGVtZW50LmFkZE1ldGhvZHMoRXh0LkZ4KX0pKCk7RXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlPWZ1bmN0aW9uKGIsYSl7dGhpcy5lbGVtZW50cz1bXTt0aGlzLmFkZChiLGEpO3RoaXMuZWw9bmV3IEV4dC5FbGVtZW50LkZseXdlaWdodCgpfTtFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUucHJvdG90eXBlPXtpc0NvbXBvc2l0ZTp0cnVlLGdldEVsZW1lbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbDtiLmRvbT1hO2IuaWQ9YS5pZDtyZXR1cm4gYn0sdHJhbnNmb3JtRWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmdldERvbShhKX0sZ2V0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5sZW5ndGh9LGFkZDpmdW5jdGlvbihkLGIpe3ZhciBlPXRoaXMsZz1lLmVsZW1lbnRzO2lmKCFkKXtyZXR1cm4gdGhpc31pZih0eXBlb2YgZD09InN0cmluZyIpe2Q9RXh0LkVsZW1lbnQuc2VsZWN0b3JGdW5jdGlvbihkLGIpfWVsc2V7aWYoZC5pc0NvbXBvc2l0ZSl7ZD1kLmVsZW1lbnRzfWVsc2V7aWYoIUV4dC5pc0l0ZXJhYmxlKGQpKXtkPVtkXX19fWZvcih2YXIgYz0wLGE9ZC5sZW5ndGg7YzxhOysrYyl7Zy5wdXNoKGUudHJhbnNmb3JtRWxlbWVudChkW2NdKSl9cmV0dXJuIGV9LGludm9rZTpmdW5jdGlvbihnLGIpe3ZhciBoPXRoaXMsZD1oLmVsZW1lbnRzLGE9ZC5sZW5ndGgsaixjO2ZvcihjPTA7YzxhO2MrKyl7aj1kW2NdO2lmKGope0V4dC5FbGVtZW50LnByb3RvdHlwZVtnXS5hcHBseShoLmdldEVsZW1lbnQoaiksYil9fXJldHVybiBofSxpdGVtOmZ1bmN0aW9uKGIpe3ZhciBkPXRoaXMsYz1kLmVsZW1lbnRzW2JdLGE9bnVsbDtpZihjKXthPWQuZ2V0RWxlbWVudChjKX1yZXR1cm4gYX0sYWRkTGlzdGVuZXI6ZnVuY3Rpb24oYixqLGgsZyl7dmFyIGQ9dGhpcy5lbGVtZW50cyxhPWQubGVuZ3RoLGMsaztmb3IoYz0wO2M8YTtjKyspe2s9ZFtjXTtpZihrKXtFeHQuRXZlbnRNYW5hZ2VyLm9uKGssYixqLGh8fGssZyl9fXJldHVybiB0aGlzfSxlYWNoOmZ1bmN0aW9uKGcsZCl7dmFyIGg9dGhpcyxjPWguZWxlbWVudHMsYT1jLmxlbmd0aCxiLGo7Zm9yKGI9MDtiPGE7YisrKXtqPWNbYl07aWYoail7aj10aGlzLmdldEVsZW1lbnQoaik7aWYoZy5jYWxsKGR8fGosaixoLGIpPT09ZmFsc2Upe2JyZWFrfX19cmV0dXJuIGh9LGZpbGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmVsZW1lbnRzPVtdO2IuYWRkKGEpO3JldHVybiBifSxmaWx0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9W10sZD10aGlzLGM9RXh0LmlzRnVuY3Rpb24oYSk/YTpmdW5jdGlvbihlKXtyZXR1cm4gZS5pcyhhKX07ZC5lYWNoKGZ1bmN0aW9uKGgsZSxnKXtpZihjKGgsZykhPT1mYWxzZSl7YltiLmxlbmd0aF09ZC50cmFuc2Zvcm1FbGVtZW50KGgpfX0pO2QuZWxlbWVudHM9YjtyZXR1cm4gZH0saW5kZXhPZjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lbGVtZW50cy5pbmRleE9mKHRoaXMudHJhbnNmb3JtRWxlbWVudChhKSl9LHJlcGxhY2VFbGVtZW50OmZ1bmN0aW9uKGUsYyxhKXt2YXIgYj0haXNOYU4oZSk/ZTp0aGlzLmluZGV4T2YoZSksZztpZihiPi0xKXtjPUV4dC5nZXREb20oYyk7aWYoYSl7Zz10aGlzLmVsZW1lbnRzW2JdO2cucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYyxnKTtFeHQucmVtb3ZlTm9kZShnKX10aGlzLmVsZW1lbnRzLnNwbGljZShiLDEsYyl9cmV0dXJuIHRoaXN9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50cz1bXX19O0V4dC5Db21wb3NpdGVFbGVtZW50TGl0ZS5wcm90b3R5cGUub249RXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlLnByb3RvdHlwZS5hZGRMaXN0ZW5lcjtFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUuaW1wb3J0RWxlbWVudE1ldGhvZHM9ZnVuY3Rpb24oKXt2YXIgYyxiPUV4dC5FbGVtZW50LnByb3RvdHlwZSxhPUV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZS5wcm90b3R5cGU7Zm9yKGMgaW4gYil7aWYodHlwZW9mIGJbY109PSJmdW5jdGlvbiIpeyhmdW5jdGlvbihkKXthW2RdPWFbZF18fGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52b2tlKGQsYXJndW1lbnRzKX19KS5jYWxsKGEsYyl9fX07RXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlLmltcG9ydEVsZW1lbnRNZXRob2RzKCk7aWYoRXh0LkRvbVF1ZXJ5KXtFeHQuRWxlbWVudC5zZWxlY3RvckZ1bmN0aW9uPUV4dC5Eb21RdWVyeS5zZWxlY3R9RXh0LkVsZW1lbnQuc2VsZWN0PWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYodHlwZW9mIGE9PSJzdHJpbmciKXtjPUV4dC5FbGVtZW50LnNlbGVjdG9yRnVuY3Rpb24oYSxiKX1lbHNle2lmKGEubGVuZ3RoIT09dW5kZWZpbmVkKXtjPWF9ZWxzZXt0aHJvdyJJbnZhbGlkIHNlbGVjdG9yIn19cmV0dXJuIG5ldyBFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUoYyl9O0V4dC5zZWxlY3Q9RXh0LkVsZW1lbnQuc2VsZWN0OyhmdW5jdGlvbigpe3ZhciBiPSJiZWZvcmVyZXF1ZXN0IixlPSJyZXF1ZXN0Y29tcGxldGUiLGQ9InJlcXVlc3RleGNlcHRpb24iLGg9dW5kZWZpbmVkLGM9ImxvYWQiLGk9IlBPU1QiLGE9IkdFVCIsZz13aW5kb3c7RXh0LmRhdGEuQ29ubmVjdGlvbj1mdW5jdGlvbihqKXtFeHQuYXBwbHkodGhpcyxqKTt0aGlzLmFkZEV2ZW50cyhiLGUsZCk7RXh0LmRhdGEuQ29ubmVjdGlvbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9O0V4dC5leHRlbmQoRXh0LmRhdGEuQ29ubmVjdGlvbixFeHQudXRpbC5PYnNlcnZhYmxlLHt0aW1lb3V0OjMwMDAwLGF1dG9BYm9ydDpmYWxzZSxkaXNhYmxlQ2FjaGluZzp0cnVlLGRpc2FibGVDYWNoaW5nUGFyYW06Il9kYyIscmVxdWVzdDpmdW5jdGlvbihuKXt2YXIgcz10aGlzO2lmKHMuZmlyZUV2ZW50KGIscyxuKSl7aWYobi5lbCl7aWYoIUV4dC5pc0VtcHR5KG4uaW5kaWNhdG9yVGV4dCkpe3MuaW5kaWNhdG9yVGV4dD0nPGRpdiBjbGFzcz0ibG9hZGluZy1pbmRpY2F0b3IiPicrbi5pbmRpY2F0b3JUZXh0KyI8L2Rpdj4ifWlmKHMuaW5kaWNhdG9yVGV4dCl7RXh0LmdldERvbShuLmVsKS5pbm5lckhUTUw9cy5pbmRpY2F0b3JUZXh0fW4uc3VjY2Vzcz0oRXh0LmlzRnVuY3Rpb24obi5zdWNjZXNzKT9uLnN1Y2Nlc3M6ZnVuY3Rpb24oKXt9KS5jcmVhdGVJbnRlcmNlcHRvcihmdW5jdGlvbihvKXtFeHQuZ2V0RG9tKG4uZWwpLmlubmVySFRNTD1vLnJlc3BvbnNlVGV4dH0pfXZhciBsPW4ucGFyYW1zLGs9bi51cmx8fHMudXJsLGoscT17c3VjY2VzczpzLmhhbmRsZVJlc3BvbnNlLGZhaWx1cmU6cy5oYW5kbGVGYWlsdXJlLHNjb3BlOnMsYXJndW1lbnQ6e29wdGlvbnM6bn0sdGltZW91dDpFeHQubnVtKG4udGltZW91dCxzLnRpbWVvdXQpfSxtLHQ7aWYoRXh0LmlzRnVuY3Rpb24obCkpe2w9bC5jYWxsKG4uc2NvcGV8fGcsbil9bD1FeHQudXJsRW5jb2RlKHMuZXh0cmFQYXJhbXMsRXh0LmlzT2JqZWN0KGwpP0V4dC51cmxFbmNvZGUobCk6bCk7aWYoRXh0LmlzRnVuY3Rpb24oaykpe2s9ay5jYWxsKG4uc2NvcGV8fGcsbil9aWYoKG09RXh0LmdldERvbShuLmZvcm0pKSl7az1rfHxtLmFjdGlvbjtpZihuLmlzVXBsb2FkfHwoL211bHRpcGFydFwvZm9ybS1kYXRhL2kudGVzdChtLmdldEF0dHJpYnV0ZSgiZW5jdHlwZSIpKSkpe3JldHVybiBzLmRvRm9ybVVwbG9hZC5jYWxsKHMsbixsLGspfXQ9RXh0LmxpYi5BamF4LnNlcmlhbGl6ZUZvcm0obSk7bD1sPyhsKyImIit0KTp0fWo9bi5tZXRob2R8fHMubWV0aG9kfHwoKGx8fG4ueG1sRGF0YXx8bi5qc29uRGF0YSk/aTphKTtpZihqPT09YSYmKHMuZGlzYWJsZUNhY2hpbmcmJm4uZGlzYWJsZUNhY2hpbmchPT1mYWxzZSl8fG4uZGlzYWJsZUNhY2hpbmc9PT10cnVlKXt2YXIgcj1uLmRpc2FibGVDYWNoaW5nUGFyYW18fHMuZGlzYWJsZUNhY2hpbmdQYXJhbTtrPUV4dC51cmxBcHBlbmQoayxyKyI9IisobmV3IERhdGUoKS5nZXRUaW1lKCkpKX1uLmhlYWRlcnM9RXh0LmFwcGx5SWYobi5oZWFkZXJzfHx7fSxzLmRlZmF1bHRIZWFkZXJzfHx7fSk7aWYobi5hdXRvQWJvcnQ9PT10cnVlfHxzLmF1dG9BYm9ydCl7cy5hYm9ydCgpfWlmKChqPT1hfHxuLnhtbERhdGF8fG4uanNvbkRhdGEpJiZsKXtrPUV4dC51cmxBcHBlbmQoayxsKTtsPSIifXJldHVybihzLnRyYW5zSWQ9RXh0LmxpYi5BamF4LnJlcXVlc3QoaixrLHEsbCxuKSl9ZWxzZXtyZXR1cm4gbi5jYWxsYmFjaz9uLmNhbGxiYWNrLmFwcGx5KG4uc2NvcGUsW24saCxoXSk6bnVsbH19LGlzTG9hZGluZzpmdW5jdGlvbihqKXtyZXR1cm4gaj9FeHQubGliLkFqYXguaXNDYWxsSW5Qcm9ncmVzcyhqKTohIXRoaXMudHJhbnNJZH0sYWJvcnQ6ZnVuY3Rpb24oail7aWYoanx8dGhpcy5pc0xvYWRpbmcoKSl7RXh0LmxpYi5BamF4LmFib3J0KGp8fHRoaXMudHJhbnNJZCl9fSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihqKXt0aGlzLnRyYW5zSWQ9ZmFsc2U7dmFyIGs9ai5hcmd1bWVudC5vcHRpb25zO2ouYXJndW1lbnQ9az9rLmFyZ3VtZW50Om51bGw7dGhpcy5maXJlRXZlbnQoZSx0aGlzLGosayk7aWYoay5zdWNjZXNzKXtrLnN1Y2Nlc3MuY2FsbChrLnNjb3BlLGosayl9aWYoay5jYWxsYmFjayl7ay5jYWxsYmFjay5jYWxsKGsuc2NvcGUsayx0cnVlLGopfX0saGFuZGxlRmFpbHVyZTpmdW5jdGlvbihqLGwpe3RoaXMudHJhbnNJZD1mYWxzZTt2YXIgaz1qLmFyZ3VtZW50Lm9wdGlvbnM7ai5hcmd1bWVudD1rP2suYXJndW1lbnQ6bnVsbDt0aGlzLmZpcmVFdmVudChkLHRoaXMsaixrLGwpO2lmKGsuZmFpbHVyZSl7ay5mYWlsdXJlLmNhbGwoay5zY29wZSxqLGspfWlmKGsuY2FsbGJhY2spe2suY2FsbGJhY2suY2FsbChrLnNjb3BlLGssZmFsc2Usail9fSxkb0Zvcm1VcGxvYWQ6ZnVuY3Rpb24ocSxqLGspe3ZhciBsPUV4dC5pZCgpLHY9ZG9jdW1lbnQscj12LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpLG09RXh0LmdldERvbShxLmZvcm0pLHU9W10sdCxwPSJtdWx0aXBhcnQvZm9ybS1kYXRhIixuPXt0YXJnZXQ6bS50YXJnZXQsbWV0aG9kOm0ubWV0aG9kLGVuY29kaW5nOm0uZW5jb2RpbmcsZW5jdHlwZTptLmVuY3R5cGUsYWN0aW9uOm0uYWN0aW9ufTtFeHQuZmx5KHIpLnNldCh7aWQ6bCxuYW1lOmwsY2xzOiJ4LWhpZGRlbiIsc3JjOkV4dC5TU0xfU0VDVVJFX1VSTH0pO3YuYm9keS5hcHBlbmRDaGlsZChyKTtpZihFeHQuaXNJRSl7ZG9jdW1lbnQuZnJhbWVzW2xdLm5hbWU9bH1FeHQuZmx5KG0pLnNldCh7dGFyZ2V0OmwsbWV0aG9kOmksZW5jdHlwZTpwLGVuY29kaW5nOnAsYWN0aW9uOmt8fG4uYWN0aW9ufSk7RXh0Lml0ZXJhdGUoRXh0LnVybERlY29kZShqLGZhbHNlKSxmdW5jdGlvbih3LG8pe3Q9di5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO0V4dC5mbHkodCkuc2V0KHt0eXBlOiJoaWRkZW4iLHZhbHVlOm8sbmFtZTp3fSk7bS5hcHBlbmRDaGlsZCh0KTt1LnB1c2godCl9KTtmdW5jdGlvbiBzKCl7dmFyIHg9dGhpcyx3PXtyZXNwb25zZVRleHQ6IiIscmVzcG9uc2VYTUw6bnVsbCxhcmd1bWVudDpxLmFyZ3VtZW50fSxBLHo7dHJ5e0E9ci5jb250ZW50V2luZG93LmRvY3VtZW50fHxyLmNvbnRlbnREb2N1bWVudHx8Zy5mcmFtZXNbbF0uZG9jdW1lbnQ7aWYoQSl7aWYoQS5ib2R5KXtpZigvdGV4dGFyZWEvaS50ZXN0KCh6PUEuYm9keS5maXJzdENoaWxkfHx7fSkudGFnTmFtZSkpe3cucmVzcG9uc2VUZXh0PXoudmFsdWV9ZWxzZXt3LnJlc3BvbnNlVGV4dD1BLmJvZHkuaW5uZXJIVE1MfX13LnJlc3BvbnNlWE1MPUEuWE1MRG9jdW1lbnR8fEF9fWNhdGNoKHkpe31FeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUxpc3RlbmVyKHIsYyxzLHgpO3guZmlyZUV2ZW50KGUseCx3LHEpO2Z1bmN0aW9uIG8oRCxDLEIpe2lmKEV4dC5pc0Z1bmN0aW9uKEQpKXtELmFwcGx5KEMsQil9fW8ocS5zdWNjZXNzLHEuc2NvcGUsW3cscV0pO28ocS5jYWxsYmFjayxxLnNjb3BlLFtxLHRydWUsd10pO2lmKCF4LmRlYnVnVXBsb2Fkcyl7c2V0VGltZW91dChmdW5jdGlvbigpe0V4dC5yZW1vdmVOb2RlKHIpfSwxMDApfX1FeHQuRXZlbnRNYW5hZ2VyLm9uKHIsYyxzLHRoaXMpO20uc3VibWl0KCk7RXh0LmZseShtKS5zZXQobik7RXh0LmVhY2godSxmdW5jdGlvbihvKXtFeHQucmVtb3ZlTm9kZShvKX0pfX0pfSkoKTtFeHQuQWpheD1uZXcgRXh0LmRhdGEuQ29ubmVjdGlvbih7YXV0b0Fib3J0OmZhbHNlLHNlcmlhbGl6ZUZvcm06ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5saWIuQWpheC5zZXJpYWxpemVGb3JtKGEpfX0pO0V4dC51dGlsLkpTT049bmV3IChmdW5jdGlvbigpe3ZhciB1c2VIYXNPd249ISF7fS5oYXNPd25Qcm9wZXJ0eSxpc05hdGl2ZT1mdW5jdGlvbigpe3ZhciB1c2VOYXRpdmU9bnVsbDtyZXR1cm4gZnVuY3Rpb24oKXtpZih1c2VOYXRpdmU9PT1udWxsKXt1c2VOYXRpdmU9RXh0LlVTRV9OQVRJVkVfSlNPTiYmd2luZG93LkpTT04mJkpTT04udG9TdHJpbmcoKT09IltvYmplY3QgSlNPTl0ifXJldHVybiB1c2VOYXRpdmV9fSgpLHBhZD1mdW5jdGlvbihuKXtyZXR1cm4gbjwxMD8iMCIrbjpufSxkb0RlY29kZT1mdW5jdGlvbihqc29uKXtyZXR1cm4ganNvbj9ldmFsKCIoIitqc29uKyIpIik6IiJ9LGRvRW5jb2RlPWZ1bmN0aW9uKG8pe2lmKCFFeHQuaXNEZWZpbmVkKG8pfHxvPT09bnVsbCl7cmV0dXJuIm51bGwifWVsc2V7aWYoRXh0LmlzQXJyYXkobykpe3JldHVybiBlbmNvZGVBcnJheShvKX1lbHNle2lmKEV4dC5pc0RhdGUobykpe3JldHVybiBFeHQudXRpbC5KU09OLmVuY29kZURhdGUobyl9ZWxzZXtpZihFeHQuaXNTdHJpbmcobykpe3JldHVybiBlbmNvZGVTdHJpbmcobyl9ZWxzZXtpZih0eXBlb2Ygbz09Im51bWJlciIpe3JldHVybiBpc0Zpbml0ZShvKT9TdHJpbmcobyk6Im51bGwifWVsc2V7aWYoRXh0LmlzQm9vbGVhbihvKSl7cmV0dXJuIFN0cmluZyhvKX1lbHNle3ZhciBhPVsieyJdLGIsaSx2O2ZvcihpIGluIG8pe2lmKCFvLmdldEVsZW1lbnRzQnlUYWdOYW1lKXtpZighdXNlSGFzT3dufHxvLmhhc093blByb3BlcnR5KGkpKXt2PW9baV07c3dpdGNoKHR5cGVvZiB2KXtjYXNlInVuZGVmaW5lZCI6Y2FzZSJmdW5jdGlvbiI6Y2FzZSJ1bmtub3duIjpicmVhaztkZWZhdWx0OmlmKGIpe2EucHVzaCgiLCIpfWEucHVzaChkb0VuY29kZShpKSwiOiIsdj09PW51bGw/Im51bGwiOmRvRW5jb2RlKHYpKTtiPXRydWV9fX19YS5wdXNoKCJ9Iik7cmV0dXJuIGEuam9pbigiIil9fX19fX19LG09eyJcYiI6IlxcYiIsIlx0IjoiXFx0IiwiXG4iOiJcXG4iLCJcZiI6IlxcZiIsIlxyIjoiXFxyIiwnIic6J1xcIicsIlxcIjoiXFxcXCJ9LGVuY29kZVN0cmluZz1mdW5jdGlvbihzKXtpZigvWyJcXFx4MDAtXHgxZl0vLnRlc3Qocykpe3JldHVybiciJytzLnJlcGxhY2UoLyhbXHgwMC1ceDFmXFwiXSkvZyxmdW5jdGlvbihhLGIpe3ZhciBjPW1bYl07aWYoYyl7cmV0dXJuIGN9Yz1iLmNoYXJDb2RlQXQoKTtyZXR1cm4iXFx1MDAiK01hdGguZmxvb3IoYy8xNikudG9TdHJpbmcoMTYpKyhjJTE2KS50b1N0cmluZygxNil9KSsnIid9cmV0dXJuJyInK3MrJyInfSxlbmNvZGVBcnJheT1mdW5jdGlvbihvKXt2YXIgYT1bIlsiXSxiLGksbD1vLmxlbmd0aCx2O2ZvcihpPTA7aTxsO2krPTEpe3Y9b1tpXTtzd2l0Y2godHlwZW9mIHYpe2Nhc2UidW5kZWZpbmVkIjpjYXNlImZ1bmN0aW9uIjpjYXNlInVua25vd24iOmJyZWFrO2RlZmF1bHQ6aWYoYil7YS5wdXNoKCIsIil9YS5wdXNoKHY9PT1udWxsPyJudWxsIjpFeHQudXRpbC5KU09OLmVuY29kZSh2KSk7Yj10cnVlfX1hLnB1c2goIl0iKTtyZXR1cm4gYS5qb2luKCIiKX07dGhpcy5lbmNvZGVEYXRlPWZ1bmN0aW9uKG8pe3JldHVybiciJytvLmdldEZ1bGxZZWFyKCkrIi0iK3BhZChvLmdldE1vbnRoKCkrMSkrIi0iK3BhZChvLmdldERhdGUoKSkrIlQiK3BhZChvLmdldEhvdXJzKCkpKyI6IitwYWQoby5nZXRNaW51dGVzKCkpKyI6IitwYWQoby5nZXRTZWNvbmRzKCkpKyciJ307dGhpcy5lbmNvZGU9ZnVuY3Rpb24oKXt2YXIgZWM7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKCFlYyl7ZWM9aXNOYXRpdmUoKT9KU09OLnN0cmluZ2lmeTpkb0VuY29kZX1yZXR1cm4gZWMobyl9fSgpO3RoaXMuZGVjb2RlPWZ1bmN0aW9uKCl7dmFyIGRjO3JldHVybiBmdW5jdGlvbihqc29uKXtpZighZGMpe2RjPWlzTmF0aXZlKCk/SlNPTi5wYXJzZTpkb0RlY29kZX1yZXR1cm4gZGMoanNvbil9fSgpfSkoKTtFeHQuZW5jb2RlPUV4dC51dGlsLkpTT04uZW5jb2RlO0V4dC5kZWNvZGU9RXh0LnV0aWwuSlNPTi5kZWNvZGU7RXh0LkV2ZW50TWFuYWdlcj1mdW5jdGlvbigpe3ZhciB6LHAsaj1mYWxzZSxsPUV4dC5pc0dlY2tvfHxFeHQuaXNXZWJLaXR8fEV4dC5pc1NhZmFyaSxvPUV4dC5saWIuRXZlbnQscT1FeHQubGliLkRvbSxjPWRvY3VtZW50LEE9d2luZG93LHI9IkRPTUNvbnRlbnRMb2FkZWQiLHQ9ImNvbXBsZXRlIixnPS9eKD86c2NvcGV8ZGVsYXl8YnVmZmVyfHNpbmdsZXxzdG9wRXZlbnR8cHJldmVudERlZmF1bHR8c3RvcFByb3BhZ2F0aW9ufG5vcm1hbGl6ZWR8YXJnc3xkZWxlZ2F0ZSkkLyx1PVtdO2Z1bmN0aW9uIG4oRSl7dmFyIEg9ZmFsc2UsRD0wLEM9dS5sZW5ndGgsRj1mYWxzZSxHO2lmKEUpe2lmKEUuZ2V0RWxlbWVudEJ5SWR8fEUubmF2aWdhdG9yKXtmb3IoO0Q8QzsrK0Qpe0c9dVtEXTtpZihHLmVsPT09RSl7SD1HLmlkO2JyZWFrfX1pZighSCl7SD1FeHQuaWQoRSk7dS5wdXNoKHtpZDpILGVsOkV9KTtGPXRydWV9fWVsc2V7SD1FeHQuaWQoRSl9aWYoIUV4dC5lbENhY2hlW0hdKXtFeHQuRWxlbWVudC5hZGRUb0NhY2hlKG5ldyBFeHQuRWxlbWVudChFKSxIKTtpZihGKXtFeHQuZWxDYWNoZVtIXS5za2lwR0M9dHJ1ZX19fXJldHVybiBIfWZ1bmN0aW9uIG0oRSxHLEosRixELEwpe0U9RXh0LmdldERvbShFKTt2YXIgQz1uKEUpLEs9RXh0LmVsQ2FjaGVbQ10uZXZlbnRzLEg7SD1vLm9uKEUsRyxEKTtLW0ddPUtbR118fFtdO0tbR10ucHVzaChbSixELEwsSCxGXSk7aWYoRS5hZGRFdmVudExpc3RlbmVyJiZHPT0ibW91c2V3aGVlbCIpe3ZhciBJPVsiRE9NTW91c2VTY3JvbGwiLEQsZmFsc2VdO0UuYWRkRXZlbnRMaXN0ZW5lci5hcHBseShFLEkpO0V4dC5FdmVudE1hbmFnZXIuYWRkTGlzdGVuZXIoQSwidW5sb2FkIixmdW5jdGlvbigpe0UucmVtb3ZlRXZlbnRMaXN0ZW5lci5hcHBseShFLEkpfSl9aWYoRT09YyYmRz09Im1vdXNlZG93biIpe0V4dC5FdmVudE1hbmFnZXIuc3RvcHBlZE1vdXNlRG93bkV2ZW50LmFkZExpc3RlbmVyKEQpfX1mdW5jdGlvbiBkKCl7aWYod2luZG93IT10b3Ape3JldHVybiBmYWxzZX10cnl7Yy5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoImxlZnQiKX1jYXRjaChDKXtyZXR1cm4gZmFsc2V9YigpO3JldHVybiB0cnVlfWZ1bmN0aW9uIEIoQyl7aWYoRXh0LmlzSUUmJmQoKSl7cmV0dXJuIHRydWV9aWYoYy5yZWFkeVN0YXRlPT10KXtiKCk7cmV0dXJuIHRydWV9anx8KHA9c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDIpKTtyZXR1cm4gZmFsc2V9dmFyIGs7ZnVuY3Rpb24gaShDKXtrfHwoaz1FeHQucXVlcnkoInN0eWxlLCBsaW5rW3JlbD1zdHlsZXNoZWV0XSIpKTtpZihrLmxlbmd0aD09Yy5zdHlsZVNoZWV0cy5sZW5ndGgpe2IoKTtyZXR1cm4gdHJ1ZX1qfHwocD1zZXRUaW1lb3V0KGFyZ3VtZW50cy5jYWxsZWUsMikpO3JldHVybiBmYWxzZX1mdW5jdGlvbiB5KEMpe2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihyLGFyZ3VtZW50cy5jYWxsZWUsZmFsc2UpO2koKX1mdW5jdGlvbiBiKEMpe2lmKCFqKXtqPXRydWU7aWYocCl7Y2xlYXJUaW1lb3V0KHApfWlmKGwpe2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihyLGIsZmFsc2UpfWlmKEV4dC5pc0lFJiZCLmJpbmRJRSl7Yy5kZXRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIixCKX1vLnVuKEEsImxvYWQiLGFyZ3VtZW50cy5jYWxsZWUpfWlmKHomJiFFeHQuaXNSZWFkeSl7RXh0LmlzUmVhZHk9dHJ1ZTt6LmZpcmUoKTt6Lmxpc3RlbmVycz1bXX19ZnVuY3Rpb24gYSgpe3p8fCh6PW5ldyBFeHQudXRpbC5FdmVudCgpKTtpZihsKXtjLmFkZEV2ZW50TGlzdGVuZXIocixiLGZhbHNlKX1pZihFeHQuaXNJRSl7aWYoIUIoKSl7Qi5iaW5kSUU9dHJ1ZTtjLmF0dGFjaEV2ZW50KCJvbnJlYWR5c3RhdGVjaGFuZ2UiLEIpfX1lbHNle2lmKEV4dC5pc09wZXJhKXsoYy5yZWFkeVN0YXRlPT10JiZpKCkpfHxjLmFkZEV2ZW50TGlzdGVuZXIocix5LGZhbHNlKX1lbHNle2lmKEV4dC5pc1dlYktpdCl7QigpfX19by5vbihBLCJsb2FkIixiKX1mdW5jdGlvbiB4KEMsRCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIEU9RXh0LnRvQXJyYXkoYXJndW1lbnRzKTtpZihELnRhcmdldD09RXh0LkV2ZW50T2JqZWN0LnNldEV2ZW50KEVbMF0pLnRhcmdldCl7Qy5hcHBseSh0aGlzLEUpfX19ZnVuY3Rpb24gdyhELEUsQyl7cmV0dXJuIGZ1bmN0aW9uKEYpe0MuZGVsYXkoRS5idWZmZXIsRCxudWxsLFtuZXcgRXh0LkV2ZW50T2JqZWN0SW1wbChGKV0pfX1mdW5jdGlvbiBzKEcsRixDLEUsRCl7cmV0dXJuIGZ1bmN0aW9uKEgpe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlTGlzdGVuZXIoRixDLEUsRCk7RyhIKX19ZnVuY3Rpb24gZShELEUsQyl7cmV0dXJuIGZ1bmN0aW9uKEcpe3ZhciBGPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayhEKTtpZighQy50YXNrcyl7Qy50YXNrcz1bXX1DLnRhc2tzLnB1c2goRik7Ri5kZWxheShFLmRlbGF5fHwxMCxELG51bGwsW25ldyBFeHQuRXZlbnRPYmplY3RJbXBsKEcpXSl9fWZ1bmN0aW9uIGgoSCxHLEMsSixLKXt2YXIgRD0oIUN8fHR5cGVvZiBDPT0iYm9vbGVhbiIpP3t9OkMsRT1FeHQuZ2V0RG9tKEgpLEY7Sj1KfHxELmZuO0s9S3x8RC5zY29wZTtpZighRSl7dGhyb3cnRXJyb3IgbGlzdGVuaW5nIGZvciAiJytHKyciLiBFbGVtZW50ICInK0grIlwiIGRvZXNuJ3QgZXhpc3QuIn1mdW5jdGlvbiBJKE0pe2lmKCFFeHQpe3JldHVybn1NPUV4dC5FdmVudE9iamVjdC5zZXRFdmVudChNKTt2YXIgTDtpZihELmRlbGVnYXRlKXtpZighKEw9TS5nZXRUYXJnZXQoRC5kZWxlZ2F0ZSxFKSkpe3JldHVybn19ZWxzZXtMPU0udGFyZ2V0fWlmKEQuc3RvcEV2ZW50KXtNLnN0b3BFdmVudCgpfWlmKEQucHJldmVudERlZmF1bHQpe00ucHJldmVudERlZmF1bHQoKX1pZihELnN0b3BQcm9wYWdhdGlvbil7TS5zdG9wUHJvcGFnYXRpb24oKX1pZihELm5vcm1hbGl6ZWQ9PT1mYWxzZSl7TT1NLmJyb3dzZXJFdmVudH1KLmNhbGwoS3x8RSxNLEwsRCl9aWYoRC50YXJnZXQpe0k9eChJLEQpfWlmKEQuZGVsYXkpe0k9ZShJLEQsSil9aWYoRC5zaW5nbGUpe0k9cyhJLEUsRyxKLEspfWlmKEQuYnVmZmVyKXtGPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayhJKTtJPXcoSSxELEYpfW0oRSxHLEosRixJLEspO3JldHVybiBJfXZhciB2PXthZGRMaXN0ZW5lcjpmdW5jdGlvbihFLEMsRyxGLEQpe2lmKHR5cGVvZiBDPT0ib2JqZWN0Iil7dmFyIEo9QyxILEk7Zm9yKEggaW4gSil7ST1KW0hdO2lmKCFnLnRlc3QoSCkpe2lmKEV4dC5pc0Z1bmN0aW9uKEkpKXtoKEUsSCxKLEksSi5zY29wZSl9ZWxzZXtoKEUsSCxJKX19fX1lbHNle2goRSxDLEQsRyxGKX19LHJlbW92ZUxpc3RlbmVyOmZ1bmN0aW9uKEUsSSxNLE4pe0U9RXh0LmdldERvbShFKTt2YXIgQz1uKEUpLEs9RSYmKEV4dC5lbENhY2hlW0NdLmV2ZW50cylbSV18fFtdLEQsSCxGLEcsSixMO2ZvcihIPTAsSj1LLmxlbmd0aDtIPEo7SCsrKXtpZihFeHQuaXNBcnJheShMPUtbSF0pJiZMWzBdPT1NJiYoIU58fExbMl09PU4pKXtpZihMWzRdKXtMWzRdLmNhbmNlbCgpfUc9TS50YXNrcyYmTS50YXNrcy5sZW5ndGg7aWYoRyl7d2hpbGUoRy0tKXtNLnRhc2tzW0ddLmNhbmNlbCgpfWRlbGV0ZSBNLnRhc2tzfUQ9TFsxXTtvLnVuKEUsSSxvLmV4dEFkYXB0ZXI/TFszXTpEKTtpZihEJiZFLmFkZEV2ZW50TGlzdGVuZXImJkk9PSJtb3VzZXdoZWVsIil7RS5yZW1vdmVFdmVudExpc3RlbmVyKCJET01Nb3VzZVNjcm9sbCIsRCxmYWxzZSl9aWYoRCYmRT09YyYmST09Im1vdXNlZG93biIpe0V4dC5FdmVudE1hbmFnZXIuc3RvcHBlZE1vdXNlRG93bkV2ZW50LnJlbW92ZUxpc3RlbmVyKEQpfUsuc3BsaWNlKEgsMSk7aWYoSy5sZW5ndGg9PT0wKXtkZWxldGUgRXh0LmVsQ2FjaGVbQ10uZXZlbnRzW0ldfWZvcihHIGluIEV4dC5lbENhY2hlW0NdLmV2ZW50cyl7cmV0dXJuIGZhbHNlfUV4dC5lbENhY2hlW0NdLmV2ZW50cz17fTtyZXR1cm4gZmFsc2V9fX0scmVtb3ZlQWxsOmZ1bmN0aW9uKEUpe0U9RXh0LmdldERvbShFKTt2YXIgRD1uKEUpLEo9RXh0LmVsQ2FjaGVbRF18fHt9LE09Si5ldmVudHN8fHt9LEksSCxLLEYsTCxHLEM7Zm9yKEYgaW4gTSl7aWYoTS5oYXNPd25Qcm9wZXJ0eShGKSl7ST1NW0ZdO2ZvcihIPTAsSz1JLmxlbmd0aDtIPEs7SCsrKXtMPUlbSF07aWYoTFs0XSl7TFs0XS5jYW5jZWwoKX1pZihMWzBdLnRhc2tzJiYoRz1MWzBdLnRhc2tzLmxlbmd0aCkpe3doaWxlKEctLSl7TFswXS50YXNrc1tHXS5jYW5jZWwoKX1kZWxldGUgTC50YXNrc31DPUxbMV07by51bihFLEYsby5leHRBZGFwdGVyP0xbM106Qyk7aWYoRS5hZGRFdmVudExpc3RlbmVyJiZDJiZGPT0ibW91c2V3aGVlbCIpe0UucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NTW91c2VTY3JvbGwiLEMsZmFsc2UpfWlmKEMmJkU9PWMmJkY9PSJtb3VzZWRvd24iKXtFeHQuRXZlbnRNYW5hZ2VyLnN0b3BwZWRNb3VzZURvd25FdmVudC5yZW1vdmVMaXN0ZW5lcihDKX19fX1pZihFeHQuZWxDYWNoZVtEXSl7RXh0LmVsQ2FjaGVbRF0uZXZlbnRzPXt9fX0sZ2V0TGlzdGVuZXJzOmZ1bmN0aW9uKEYsQyl7Rj1FeHQuZ2V0RG9tKEYpO3ZhciBIPW4oRiksRD1FeHQuZWxDYWNoZVtIXXx8e30sRz1ELmV2ZW50c3x8e30sRT1bXTtpZihHJiZHW0NdKXtyZXR1cm4gR1tDXX1lbHNle3JldHVybiBudWxsfX0scHVyZ2VFbGVtZW50OmZ1bmN0aW9uKEUsQyxHKXtFPUV4dC5nZXREb20oRSk7dmFyIEQ9bihFKSxKPUV4dC5lbENhY2hlW0RdfHx7fSxLPUouZXZlbnRzfHx7fSxGLEksSDtpZihHKXtpZihLJiZLLmhhc093blByb3BlcnR5KEcpKXtJPUtbR107Zm9yKEY9MCxIPUkubGVuZ3RoO0Y8SDtGKyspe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlTGlzdGVuZXIoRSxHLElbRl1bMF0pfX19ZWxzZXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUFsbChFKX1pZihDJiZFJiZFLmNoaWxkTm9kZXMpe2ZvcihGPTAsSD1FLmNoaWxkTm9kZXMubGVuZ3RoO0Y8SDtGKyspe0V4dC5FdmVudE1hbmFnZXIucHVyZ2VFbGVtZW50KEUuY2hpbGROb2Rlc1tGXSxDLEcpfX19LF91bmxvYWQ6ZnVuY3Rpb24oKXt2YXIgQztmb3IoQyBpbiBFeHQuZWxDYWNoZSl7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVBbGwoQyl9ZGVsZXRlIEV4dC5lbENhY2hlO2RlbGV0ZSBFeHQuRWxlbWVudC5fZmx5d2VpZ2h0czt2YXIgRyxELEYsRT1FeHQubGliLkFqYXg7KHR5cGVvZiBFLmNvbm49PSJvYmplY3QiKT9EPUUuY29ubjpEPXt9O2ZvcihGIGluIEQpe0c9RFtGXTtpZihHKXtFLmFib3J0KHtjb25uOkcsdElkOkZ9KX19fSxvbkRvY3VtZW50UmVhZHk6ZnVuY3Rpb24oRSxELEMpe2lmKEV4dC5pc1JlYWR5KXt6fHwoej1uZXcgRXh0LnV0aWwuRXZlbnQoKSk7ei5hZGRMaXN0ZW5lcihFLEQsQyk7ei5maXJlKCk7ei5saXN0ZW5lcnM9W119ZWxzZXtpZigheil7YSgpfUM9Q3x8e307Qy5kZWxheT1DLmRlbGF5fHwxO3ouYWRkTGlzdGVuZXIoRSxELEMpfX0sZmlyZURvY1JlYWR5OmJ9O3Yub249di5hZGRMaXN0ZW5lcjt2LnVuPXYucmVtb3ZlTGlzdGVuZXI7di5zdG9wcGVkTW91c2VEb3duRXZlbnQ9bmV3IEV4dC51dGlsLkV2ZW50KCk7cmV0dXJuIHZ9KCk7RXh0Lm9uUmVhZHk9RXh0LkV2ZW50TWFuYWdlci5vbkRvY3VtZW50UmVhZHk7KGZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oKXt2YXIgYz1kb2N1bWVudC5ib2R5fHxkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdO2lmKCFjKXtyZXR1cm4gZmFsc2V9dmFyIGI9WyIgIixFeHQuaXNJRT8iZXh0LWllICIrKEV4dC5pc0lFNj8iZXh0LWllNiI6KEV4dC5pc0lFNz8iZXh0LWllNyI6KEV4dC5pc0lFOD8iZXh0LWllOCI6ImV4dC1pZTkiKSkpOkV4dC5pc0dlY2tvPyJleHQtZ2Vja28gIisoRXh0LmlzR2Vja28yPyJleHQtZ2Vja28yIjoiZXh0LWdlY2tvMyIpOkV4dC5pc09wZXJhPyJleHQtb3BlcmEiOkV4dC5pc1dlYktpdD8iZXh0LXdlYmtpdCI6IiJdO2lmKEV4dC5pc1NhZmFyaSl7Yi5wdXNoKCJleHQtc2FmYXJpICIrKEV4dC5pc1NhZmFyaTI/ImV4dC1zYWZhcmkyIjooRXh0LmlzU2FmYXJpMz8iZXh0LXNhZmFyaTMiOiJleHQtc2FmYXJpNCIpKSl9ZWxzZXtpZihFeHQuaXNDaHJvbWUpe2IucHVzaCgiZXh0LWNocm9tZSIpfX1pZihFeHQuaXNNYWMpe2IucHVzaCgiZXh0LW1hYyIpfWlmKEV4dC5pc0xpbnV4KXtiLnB1c2goImV4dC1saW51eCIpfWlmKEV4dC5pc1N0cmljdHx8RXh0LmlzQm9yZGVyQm94KXt2YXIgZD1jLnBhcmVudE5vZGU7aWYoZCl7aWYoIUV4dC5pc1N0cmljdCl7RXh0LmZseShkLCJfaW50ZXJuYWwiKS5hZGRDbGFzcygieC1xdWlya3MiKTtpZihFeHQuaXNJRSYmIUV4dC5pc1N0cmljdCl7RXh0LmlzSUVRdWlya3M9dHJ1ZX19RXh0LmZseShkLCJfaW50ZXJuYWwiKS5hZGRDbGFzcygoKEV4dC5pc1N0cmljdCYmRXh0LmlzSUUpfHwoIUV4dC5lbmFibGVGb3JjZWRCb3hNb2RlbCYmIUV4dC5pc0lFKSk/IiBleHQtc3RyaWN0IjoiIGV4dC1ib3JkZXItYm94Iil9fWlmKEV4dC5lbmFibGVGb3JjZWRCb3hNb2RlbCYmIUV4dC5pc0lFKXtFeHQuaXNGb3JjZWRCb3JkZXJCb3g9dHJ1ZTtiLnB1c2goImV4dC1mb3JjZWQtYm9yZGVyLWJveCIpfUV4dC5mbHkoYywiX2ludGVybmFsIikuYWRkQ2xhc3MoYik7cmV0dXJuIHRydWV9O2lmKCFhKCkpe0V4dC5vblJlYWR5KGEpfX0pKCk7KGZ1bmN0aW9uKCl7dmFyIGI9RXh0LmFwcGx5KEV4dC5zdXBwb3J0cyx7Y29ycmVjdFJpZ2h0TWFyZ2luOnRydWUsY29ycmVjdFRyYW5zcGFyZW50Q29sb3I6dHJ1ZSxjc3NGbG9hdDp0cnVlfSk7dmFyIGE9ZnVuY3Rpb24oKXt2YXIgZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxlPWRvY3VtZW50LGMsZDtnLmlubmVySFRNTD0nPGRpdiBzdHlsZT0iaGVpZ2h0OjMwcHg7d2lkdGg6NTBweDsiPjxkaXYgc3R5bGU9ImhlaWdodDoyMHB4O3dpZHRoOjIwcHg7Ij48L2Rpdj48L2Rpdj48ZGl2IHN0eWxlPSJmbG9hdDpsZWZ0O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Ij4nO2UuYm9keS5hcHBlbmRDaGlsZChnKTtkPWcubGFzdENoaWxkO2lmKChjPWUuZGVmYXVsdFZpZXcpKXtpZihjLmdldENvbXB1dGVkU3R5bGUoZy5maXJzdENoaWxkLmZpcnN0Q2hpbGQsbnVsbCkubWFyZ2luUmlnaHQhPSIwcHgiKXtiLmNvcnJlY3RSaWdodE1hcmdpbj1mYWxzZX1pZihjLmdldENvbXB1dGVkU3R5bGUoZCxudWxsKS5iYWNrZ3JvdW5kQ29sb3IhPSJ0cmFuc3BhcmVudCIpe2IuY29ycmVjdFRyYW5zcGFyZW50Q29sb3I9ZmFsc2V9fWIuY3NzRmxvYXQ9ISFkLnN0eWxlLmNzc0Zsb2F0O2UuYm9keS5yZW1vdmVDaGlsZChnKX07aWYoRXh0LmlzUmVhZHkpe2EoKX1lbHNle0V4dC5vblJlYWR5KGEpfX0pKCk7RXh0LkV2ZW50T2JqZWN0PWZ1bmN0aW9uKCl7dmFyIGI9RXh0LmxpYi5FdmVudCxjPS8oZGJsKT9jbGljay8sYT17MzoxMyw2MzIzNDozNyw2MzIzNTozOSw2MzIzMjozOCw2MzIzMzo0MCw2MzI3NjozMyw2MzI3NzozNCw2MzI3Mjo0Niw2MzI3MzozNiw2MzI3NTozNX0sZD1FeHQuaXNJRT97MTowLDQ6MSwyOjJ9OnswOjAsMToxLDI6Mn07RXh0LkV2ZW50T2JqZWN0SW1wbD1mdW5jdGlvbihnKXtpZihnKXt0aGlzLnNldEV2ZW50KGcuYnJvd3NlckV2ZW50fHxnKX19O0V4dC5FdmVudE9iamVjdEltcGwucHJvdG90eXBlPXtzZXRFdmVudDpmdW5jdGlvbihoKXt2YXIgZz10aGlzO2lmKGg9PWd8fChoJiZoLmJyb3dzZXJFdmVudCkpe3JldHVybiBofWcuYnJvd3NlckV2ZW50PWg7aWYoaCl7Zy5idXR0b249aC5idXR0b24/ZFtoLmJ1dHRvbl06KGgud2hpY2g/aC53aGljaC0xOi0xKTtpZihjLnRlc3QoaC50eXBlKSYmZy5idXR0b249PS0xKXtnLmJ1dHRvbj0wfWcudHlwZT1oLnR5cGU7Zy5zaGlmdEtleT1oLnNoaWZ0S2V5O2cuY3RybEtleT1oLmN0cmxLZXl8fGgubWV0YUtleXx8ZmFsc2U7Zy5hbHRLZXk9aC5hbHRLZXk7Zy5rZXlDb2RlPWgua2V5Q29kZTtnLmNoYXJDb2RlPWguY2hhckNvZGU7Zy50YXJnZXQ9Yi5nZXRUYXJnZXQoaCk7Zy54eT1iLmdldFhZKGgpfWVsc2V7Zy5idXR0b249LTE7Zy5zaGlmdEtleT1mYWxzZTtnLmN0cmxLZXk9ZmFsc2U7Zy5hbHRLZXk9ZmFsc2U7Zy5rZXlDb2RlPTA7Zy5jaGFyQ29kZT0wO2cudGFyZ2V0PW51bGw7Zy54eT1bMCwwXX1yZXR1cm4gZ30sc3RvcEV2ZW50OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihlLmJyb3dzZXJFdmVudCl7aWYoZS5icm93c2VyRXZlbnQudHlwZT09Im1vdXNlZG93biIpe0V4dC5FdmVudE1hbmFnZXIuc3RvcHBlZE1vdXNlRG93bkV2ZW50LmZpcmUoZSl9Yi5zdG9wRXZlbnQoZS5icm93c2VyRXZlbnQpfX0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmJyb3dzZXJFdmVudCl7Yi5wcmV2ZW50RGVmYXVsdCh0aGlzLmJyb3dzZXJFdmVudCl9fSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKGUuYnJvd3NlckV2ZW50KXtpZihlLmJyb3dzZXJFdmVudC50eXBlPT0ibW91c2Vkb3duIil7RXh0LkV2ZW50TWFuYWdlci5zdG9wcGVkTW91c2VEb3duRXZlbnQuZmlyZShlKX1iLnN0b3BQcm9wYWdhdGlvbihlLmJyb3dzZXJFdmVudCl9fSxnZXRDaGFyQ29kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoYXJDb2RlfHx0aGlzLmtleUNvZGV9LGdldEtleTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vcm1hbGl6ZUtleSh0aGlzLmtleUNvZGV8fHRoaXMuY2hhckNvZGUpfSxub3JtYWxpemVLZXk6ZnVuY3Rpb24oZSl7cmV0dXJuIEV4dC5pc1NhZmFyaT8oYVtlXXx8ZSk6ZX0sZ2V0UGFnZVg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54eVswXX0sZ2V0UGFnZVk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54eVsxXX0sZ2V0WFk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54eX0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKGcsaCxlKXtyZXR1cm4gZz9FeHQuZmx5KHRoaXMudGFyZ2V0KS5maW5kUGFyZW50KGcsaCxlKTooZT9FeHQuZ2V0KHRoaXMudGFyZ2V0KTp0aGlzLnRhcmdldCl9LGdldFJlbGF0ZWRUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5icm93c2VyRXZlbnQ/Yi5nZXRSZWxhdGVkVGFyZ2V0KHRoaXMuYnJvd3NlckV2ZW50KTpudWxsfSxnZXRXaGVlbERlbHRhOmZ1bmN0aW9uKCl7dmFyIGc9dGhpcy5icm93c2VyRXZlbnQ7dmFyIGg9MDtpZihnLndoZWVsRGVsdGEpe2g9Zy53aGVlbERlbHRhLzEyMH1lbHNle2lmKGcuZGV0YWlsKXtoPS1nLmRldGFpbC8zfX1yZXR1cm4gaH0sd2l0aGluOmZ1bmN0aW9uKGgsaSxlKXtpZihoKXt2YXIgZz10aGlzW2k/ImdldFJlbGF0ZWRUYXJnZXQiOiJnZXRUYXJnZXQiXSgpO3JldHVybiBnJiYoKGU/KGc9PUV4dC5nZXREb20oaCkpOmZhbHNlKXx8RXh0LmZseShoKS5jb250YWlucyhnKSl9cmV0dXJuIGZhbHNlfX07cmV0dXJuIG5ldyBFeHQuRXZlbnRPYmplY3RJbXBsKCl9KCk7RXh0LkxvYWRlcj1FeHQuYXBwbHkoe30se2xvYWQ6ZnVuY3Rpb24oaixpLGssYyl7dmFyIGs9a3x8dGhpcyxnPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF0sYj1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYT1qLmxlbmd0aCxoPTAsZT10aGlzO3ZhciBsPWZ1bmN0aW9uKG0pe2cuYXBwZW5kQ2hpbGQoZS5idWlsZFNjcmlwdFRhZyhqW21dLGQpKX07dmFyIGQ9ZnVuY3Rpb24oKXtoKys7aWYoYT09aCYmdHlwZW9mIGk9PSJmdW5jdGlvbiIpe2kuY2FsbChrKX1lbHNle2lmKGM9PT10cnVlKXtsKGgpfX19O2lmKGM9PT10cnVlKXtsLmNhbGwodGhpcywwKX1lbHNle0V4dC5lYWNoKGosZnVuY3Rpb24obixtKXtiLmFwcGVuZENoaWxkKHRoaXMuYnVpbGRTY3JpcHRUYWcobixkKSl9LHRoaXMpO2cuYXBwZW5kQ2hpbGQoYil9fSxidWlsZFNjcmlwdFRhZzpmdW5jdGlvbihiLGMpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpO2EudHlwZT0idGV4dC9qYXZhc2NyaXB0IjthLnNyYz1iO2lmKGEucmVhZHlTdGF0ZSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihhLnJlYWR5U3RhdGU9PSJsb2FkZWQifHxhLnJlYWR5U3RhdGU9PSJjb21wbGV0ZSIpe2Eub25yZWFkeXN0YXRlY2hhbmdlPW51bGw7YygpfX19ZWxzZXthLm9ubG9hZD1jfXJldHVybiBhfX0pO0V4dC5ucygiRXh0LmdyaWQiLCJFeHQubGlzdCIsIkV4dC5kZCIsIkV4dC50cmVlIiwiRXh0LmZvcm0iLCJFeHQubWVudSIsIkV4dC5zdGF0ZSIsIkV4dC5sYXlvdXQuYm94T3ZlcmZsb3ciLCJFeHQuYXBwIiwiRXh0LnV4IiwiRXh0LmNoYXJ0IiwiRXh0LmRpcmVjdCIsIkV4dC5zbGlkZXIiKTtFeHQuYXBwbHkoRXh0LGZ1bmN0aW9uKCl7dmFyIGM9RXh0LGE9MCxiPW51bGw7cmV0dXJue2VtcHR5Rm46ZnVuY3Rpb24oKXt9LEJMQU5LX0lNQUdFX1VSTDpFeHQuaXNJRTZ8fEV4dC5pc0lFN3x8RXh0LmlzQWlyPyJodHRwOi8vd3d3LmV4dGpzLmNvbS9zLmdpZiI6ImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUQvQU1EQXdBQUFBQ0g1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlDUkFFQU93PT0iLGV4dGVuZFg6ZnVuY3Rpb24oZCxlKXtyZXR1cm4gRXh0LmV4dGVuZChkLGUoZC5wcm90b3R5cGUpKX0sZ2V0RG9jOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5nZXQoZG9jdW1lbnQpfSxudW06ZnVuY3Rpb24oZSxkKXtlPU51bWJlcihFeHQuaXNFbXB0eShlKXx8RXh0LmlzQXJyYXkoZSl8fHR5cGVvZiBlPT0iYm9vbGVhbiJ8fCh0eXBlb2YgZT09InN0cmluZyImJmUudHJpbSgpLmxlbmd0aD09MCk/TmFOOmUpO3JldHVybiBpc05hTihlKT9kOmV9LHZhbHVlOmZ1bmN0aW9uKGcsZCxlKXtyZXR1cm4gRXh0LmlzRW1wdHkoZyxlKT9kOmd9LGVzY2FwZVJlOmZ1bmN0aW9uKGQpe3JldHVybiBkLnJlcGxhY2UoLyhbLS4qKz9eJHt9KCl8W1xdXC9cXF0pL2csIlxcJDEiKX0sc2VxdWVuY2U6ZnVuY3Rpb24oaCxkLGcsZSl7aFtkXT1oW2RdLmNyZWF0ZVNlcXVlbmNlKGcsZSl9LGFkZEJlaGF2aW9yczpmdW5jdGlvbihpKXtpZighRXh0LmlzUmVhZHkpe0V4dC5vblJlYWR5KGZ1bmN0aW9uKCl7RXh0LmFkZEJlaGF2aW9ycyhpKX0pfWVsc2V7dmFyIGU9e30saCxkLGc7Zm9yKGQgaW4gaSl7aWYoKGg9ZC5zcGxpdCgiQCIpKVsxXSl7Zz1oWzBdO2lmKCFlW2ddKXtlW2ddPUV4dC5zZWxlY3QoZyl9ZVtnXS5vbihoWzFdLGlbZF0pfX1lPW51bGx9fSxnZXRTY3JvbGxCYXJXaWR0aDpmdW5jdGlvbihnKXtpZighRXh0LmlzUmVhZHkpe3JldHVybiAwfWlmKGc9PT10cnVlfHxiPT09bnVsbCl7dmFyIGk9RXh0LmdldEJvZHkoKS5jcmVhdGVDaGlsZCgnPGRpdiBjbGFzcz0ieC1oaWRlLW9mZnNldHMiIHN0eWxlPSJ3aWR0aDoxMDBweDtoZWlnaHQ6NTBweDtvdmVyZmxvdzpoaWRkZW47Ij48ZGl2IHN0eWxlPSJoZWlnaHQ6MjAwcHg7Ij48L2Rpdj48L2Rpdj4nKSxoPWkuY2hpbGQoImRpdiIsdHJ1ZSk7dmFyIGU9aC5vZmZzZXRXaWR0aDtpLnNldFN0eWxlKCJvdmVyZmxvdyIsKEV4dC5pc1dlYktpdHx8RXh0LmlzR2Vja28pPyJhdXRvIjoic2Nyb2xsIik7dmFyIGQ9aC5vZmZzZXRXaWR0aDtpLnJlbW92ZSgpO2I9ZS1kKzJ9cmV0dXJuIGJ9LGNvbWJpbmU6ZnVuY3Rpb24oKXt2YXIgZz1hcmd1bWVudHMsZT1nLmxlbmd0aCxqPVtdO2Zvcih2YXIgaD0wO2g8ZTtoKyspe3ZhciBkPWdbaF07aWYoRXh0LmlzQXJyYXkoZCkpe2o9ai5jb25jYXQoZCl9ZWxzZXtpZihkLmxlbmd0aCE9PXVuZGVmaW5lZCYmIWQuc3Vic3RyKXtqPWouY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGQsMCkpfWVsc2V7ai5wdXNoKGQpfX19cmV0dXJuIGp9LGNvcHlUbzpmdW5jdGlvbihkLGUsZyl7aWYodHlwZW9mIGc9PSJzdHJpbmciKXtnPWcuc3BsaXQoL1ssO1xzXS8pfUV4dC5lYWNoKGcsZnVuY3Rpb24oaCl7aWYoZS5oYXNPd25Qcm9wZXJ0eShoKSl7ZFtoXT1lW2hdfX0sdGhpcyk7cmV0dXJuIGR9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZCl7aWYoZCl7aWYoRXh0LmlzQXJyYXkoZCkpe3RoaXMuZGVzdHJveS5hcHBseSh0aGlzLGQpfWVsc2V7aWYodHlwZW9mIGQuZGVzdHJveT09ImZ1bmN0aW9uIil7ZC5kZXN0cm95KCl9ZWxzZXtpZihkLmRvbSl7ZC5yZW1vdmUoKX19fX19LHRoaXMpfSxkZXN0cm95TWVtYmVyczpmdW5jdGlvbihsLGosZyxoKXtmb3IodmFyIGs9MSxlPWFyZ3VtZW50cyxkPWUubGVuZ3RoO2s8ZDtrKyspe0V4dC5kZXN0cm95KGxbZVtrXV0pO2RlbGV0ZSBsW2Vba11dfX0sY2xlYW46ZnVuY3Rpb24oZCl7dmFyIGU9W107RXh0LmVhY2goZCxmdW5jdGlvbihnKXtpZighIWcpe2UucHVzaChnKX19KTtyZXR1cm4gZX0sdW5pcXVlOmZ1bmN0aW9uKGQpe3ZhciBlPVtdLGc9e307RXh0LmVhY2goZCxmdW5jdGlvbihoKXtpZighZ1toXSl7ZS5wdXNoKGgpfWdbaF09dHJ1ZX0pO3JldHVybiBlfSxmbGF0dGVuOmZ1bmN0aW9uKGQpe3ZhciBnPVtdO2Z1bmN0aW9uIGUoaCl7RXh0LmVhY2goaCxmdW5jdGlvbihpKXtpZihFeHQuaXNBcnJheShpKSl7ZShpKX1lbHNle2cucHVzaChpKX19KTtyZXR1cm4gZ31yZXR1cm4gZShkKX0sbWluOmZ1bmN0aW9uKGQsZSl7dmFyIGc9ZFswXTtlPWV8fGZ1bmN0aW9uKGksaCl7cmV0dXJuIGk8aD8tMToxfTtFeHQuZWFjaChkLGZ1bmN0aW9uKGgpe2c9ZShnLGgpPT0tMT9nOmh9KTtyZXR1cm4gZ30sbWF4OmZ1bmN0aW9uKGQsZSl7dmFyIGc9ZFswXTtlPWV8fGZ1bmN0aW9uKGksaCl7cmV0dXJuIGk+aD8xOi0xfTtFeHQuZWFjaChkLGZ1bmN0aW9uKGgpe2c9ZShnLGgpPT0xP2c6aH0pO3JldHVybiBnfSxtZWFuOmZ1bmN0aW9uKGQpe3JldHVybiBkLmxlbmd0aD4wP0V4dC5zdW0oZCkvZC5sZW5ndGg6dW5kZWZpbmVkfSxzdW06ZnVuY3Rpb24oZCl7dmFyIGU9MDtFeHQuZWFjaChkLGZ1bmN0aW9uKGcpe2UrPWd9KTtyZXR1cm4gZX0scGFydGl0aW9uOmZ1bmN0aW9uKGQsZSl7dmFyIGc9W1tdLFtdXTtFeHQuZWFjaChkLGZ1bmN0aW9uKGosayxoKXtnWyhlJiZlKGosayxoKSl8fCghZSYmaik/MDoxXS5wdXNoKGopfSk7cmV0dXJuIGd9LGludm9rZTpmdW5jdGlvbihkLGUpe3ZhciBoPVtdLGc9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO0V4dC5lYWNoKGQsZnVuY3Rpb24oaixrKXtpZihqJiZ0eXBlb2YgaltlXT09ImZ1bmN0aW9uIil7aC5wdXNoKGpbZV0uYXBwbHkoaixnKSl9ZWxzZXtoLnB1c2godW5kZWZpbmVkKX19KTtyZXR1cm4gaH0scGx1Y2s6ZnVuY3Rpb24oZCxnKXt2YXIgZT1bXTtFeHQuZWFjaChkLGZ1bmN0aW9uKGgpe2UucHVzaChoW2ddKX0pO3JldHVybiBlfSx6aXA6ZnVuY3Rpb24oKXt2YXIgbj1FeHQucGFydGl0aW9uKGFyZ3VtZW50cyxmdW5jdGlvbihpKXtyZXR1cm4gdHlwZW9mIGkhPSJmdW5jdGlvbiJ9KSxrPW5bMF0sbT1uWzFdWzBdLGQ9RXh0Lm1heChFeHQucGx1Y2soaywibGVuZ3RoIikpLGg9W107Zm9yKHZhciBsPTA7bDxkO2wrKyl7aFtsXT1bXTtpZihtKXtoW2xdPW0uYXBwbHkobSxFeHQucGx1Y2soayxsKSl9ZWxzZXtmb3IodmFyIGc9MCxlPWsubGVuZ3RoO2c8ZTtnKyspe2hbbF0ucHVzaChrW2ddW2xdKX19fXJldHVybiBofSxnZXRDbXA6ZnVuY3Rpb24oZCl7cmV0dXJuIEV4dC5Db21wb25lbnRNZ3IuZ2V0KGQpfSx1c2VTaGltczpjLmlzSUU2fHwoYy5pc01hYyYmYy5pc0dlY2tvMiksdHlwZTpmdW5jdGlvbihlKXtpZihlPT09dW5kZWZpbmVkfHxlPT09bnVsbCl7cmV0dXJuIGZhbHNlfWlmKGUuaHRtbEVsZW1lbnQpe3JldHVybiJlbGVtZW50In12YXIgZD10eXBlb2YgZTtpZihkPT0ib2JqZWN0IiYmZS5ub2RlTmFtZSl7c3dpdGNoKGUubm9kZVR5cGUpe2Nhc2UgMTpyZXR1cm4iZWxlbWVudCI7Y2FzZSAzOnJldHVybigvXFMvKS50ZXN0KGUubm9kZVZhbHVlKT8idGV4dG5vZGUiOiJ3aGl0ZXNwYWNlIn19aWYoZD09Im9iamVjdCJ8fGQ9PSJmdW5jdGlvbiIpe3N3aXRjaChlLmNvbnN0cnVjdG9yKXtjYXNlIEFycmF5OnJldHVybiJhcnJheSI7Y2FzZSBSZWdFeHA6cmV0dXJuInJlZ2V4cCI7Y2FzZSBEYXRlOnJldHVybiJkYXRlIn1pZih0eXBlb2YgZS5sZW5ndGg9PSJudW1iZXIiJiZ0eXBlb2YgZS5pdGVtPT0iZnVuY3Rpb24iKXtyZXR1cm4ibm9kZWxpc3QifX1yZXR1cm4gZH0saW50ZXJjZXB0OmZ1bmN0aW9uKGgsZCxnLGUpe2hbZF09aFtkXS5jcmVhdGVJbnRlcmNlcHRvcihnLGUpfSxjYWxsYmFjazpmdW5jdGlvbihkLGgsZyxlKXtpZih0eXBlb2YgZD09ImZ1bmN0aW9uIil7aWYoZSl7ZC5kZWZlcihlLGgsZ3x8W10pfWVsc2V7ZC5hcHBseShoLGd8fFtdKX19fX19KCkpO0V4dC5hcHBseShGdW5jdGlvbi5wcm90b3R5cGUse2NyZWF0ZVNlcXVlbmNlOmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcztyZXR1cm4odHlwZW9mIGIhPSJmdW5jdGlvbiIpP3RoaXM6ZnVuY3Rpb24oKXt2YXIgZD1jLmFwcGx5KHRoaXN8fHdpbmRvdyxhcmd1bWVudHMpO2IuYXBwbHkoYXx8dGhpc3x8d2luZG93LGFyZ3VtZW50cyk7cmV0dXJuIGR9fX0pO0V4dC5hcHBseUlmKFN0cmluZyx7ZXNjYXBlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoLygnfFxcKS9nLCJcXCQxIil9LGxlZnRQYWQ6ZnVuY3Rpb24oZCxiLGMpe3ZhciBhPVN0cmluZyhkKTtpZighYyl7Yz0iICJ9d2hpbGUoYS5sZW5ndGg8Yil7YT1jK2F9cmV0dXJuIGF9fSk7U3RyaW5nLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcz09Yj9hOmJ9O1N0cmluZy5wcm90b3R5cGUudHJpbT1mdW5jdGlvbigpe3ZhciBhPS9eXHMrfFxzKyQvZztyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKGEsIiIpfX0oKTtEYXRlLnByb3RvdHlwZS5nZXRFbGFwc2VkPWZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicygoYXx8bmV3IERhdGUoKSkuZ2V0VGltZSgpLXRoaXMuZ2V0VGltZSgpKX07RXh0LmFwcGx5SWYoTnVtYmVyLnByb3RvdHlwZSx7Y29uc3RyYWluOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHRoaXMsYiksYSl9fSk7RXh0LmxpYi5Eb20uZ2V0UmVnaW9uPWZ1bmN0aW9uKGEpe3JldHVybiBFeHQubGliLlJlZ2lvbi5nZXRSZWdpb24oYSl9O0V4dC5saWIuUmVnaW9uPWZ1bmN0aW9uKGQsZyxhLGMpe3ZhciBlPXRoaXM7ZS50b3A9ZDtlWzFdPWQ7ZS5yaWdodD1nO2UuYm90dG9tPWE7ZS5sZWZ0PWM7ZVswXT1jfTtFeHQubGliLlJlZ2lvbi5wcm90b3R5cGU9e2NvbnRhaW5zOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXM7cmV0dXJuKGIubGVmdD49YS5sZWZ0JiZiLnJpZ2h0PD1hLnJpZ2h0JiZiLnRvcD49YS50b3AmJmIuYm90dG9tPD1hLmJvdHRvbSl9LGdldEFyZWE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybigoYS5ib3R0b20tYS50b3ApKihhLnJpZ2h0LWEubGVmdCkpfSxpbnRlcnNlY3Q6ZnVuY3Rpb24oaCl7dmFyIGc9dGhpcyxkPU1hdGgubWF4KGcudG9wLGgudG9wKSxlPU1hdGgubWluKGcucmlnaHQsaC5yaWdodCksYT1NYXRoLm1pbihnLmJvdHRvbSxoLmJvdHRvbSksYz1NYXRoLm1heChnLmxlZnQsaC5sZWZ0KTtpZihhPj1kJiZlPj1jKXtyZXR1cm4gbmV3IEV4dC5saWIuUmVnaW9uKGQsZSxhLGMpfX0sdW5pb246ZnVuY3Rpb24oaCl7dmFyIGc9dGhpcyxkPU1hdGgubWluKGcudG9wLGgudG9wKSxlPU1hdGgubWF4KGcucmlnaHQsaC5yaWdodCksYT1NYXRoLm1heChnLmJvdHRvbSxoLmJvdHRvbSksYz1NYXRoLm1pbihnLmxlZnQsaC5sZWZ0KTtyZXR1cm4gbmV3IEV4dC5saWIuUmVnaW9uKGQsZSxhLGMpfSxjb25zdHJhaW5UbzpmdW5jdGlvbihiKXt2YXIgYT10aGlzO2EudG9wPWEudG9wLmNvbnN0cmFpbihiLnRvcCxiLmJvdHRvbSk7YS5ib3R0b209YS5ib3R0b20uY29uc3RyYWluKGIudG9wLGIuYm90dG9tKTthLmxlZnQ9YS5sZWZ0LmNvbnN0cmFpbihiLmxlZnQsYi5yaWdodCk7YS5yaWdodD1hLnJpZ2h0LmNvbnN0cmFpbihiLmxlZnQsYi5yaWdodCk7cmV0dXJuIGF9LGFkanVzdDpmdW5jdGlvbihkLGMsYSxnKXt2YXIgZT10aGlzO2UudG9wKz1kO2UubGVmdCs9YztlLnJpZ2h0Kz1nO2UuYm90dG9tKz1hO3JldHVybiBlfX07RXh0LmxpYi5SZWdpb24uZ2V0UmVnaW9uPWZ1bmN0aW9uKGUpe3ZhciBoPUV4dC5saWIuRG9tLmdldFhZKGUpLGQ9aFsxXSxnPWhbMF0rZS5vZmZzZXRXaWR0aCxhPWhbMV0rZS5vZmZzZXRIZWlnaHQsYz1oWzBdO3JldHVybiBuZXcgRXh0LmxpYi5SZWdpb24oZCxnLGEsYyl9O0V4dC5saWIuUG9pbnQ9ZnVuY3Rpb24oYSxjKXtpZihFeHQuaXNBcnJheShhKSl7Yz1hWzFdO2E9YVswXX12YXIgYj10aGlzO2IueD1iLnJpZ2h0PWIubGVmdD1iWzBdPWE7Yi55PWIudG9wPWIuYm90dG9tPWJbMV09Y307RXh0LmxpYi5Qb2ludC5wcm90b3R5cGU9bmV3IEV4dC5saWIuUmVnaW9uKCk7RXh0LmFwcGx5KEV4dC5Eb21IZWxwZXIsZnVuY3Rpb24oKXt2YXIgZSxhPSJhZnRlcmJlZ2luIixoPSJhZnRlcmVuZCIsaT0iYmVmb3JlYmVnaW4iLGQ9ImJlZm9yZWVuZCIsYj0vdGFnfGNoaWxkcmVufGNufGh0bWwkL2k7ZnVuY3Rpb24gZyhtLHAsbixxLGwsail7bT1FeHQuZ2V0RG9tKG0pO3ZhciBrO2lmKGUudXNlRG9tKXtrPWMocCxudWxsKTtpZihqKXttLmFwcGVuZENoaWxkKGspfWVsc2V7KGw9PSJmaXJzdENoaWxkIj9tOm0ucGFyZW50Tm9kZSkuaW5zZXJ0QmVmb3JlKGssbVtsXXx8bSl9fWVsc2V7az1FeHQuRG9tSGVscGVyLmluc2VydEh0bWwocSxtLEV4dC5Eb21IZWxwZXIuY3JlYXRlSHRtbChwKSl9cmV0dXJuIG4/RXh0LmdldChrLHRydWUpOmt9ZnVuY3Rpb24gYyhqLHIpe3ZhciBrLHU9ZG9jdW1lbnQscCxzLG0sdDtpZihFeHQuaXNBcnJheShqKSl7az11LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IodmFyIHE9MCxuPWoubGVuZ3RoO3E8bjtxKyspe2MoaltxXSxrKX19ZWxzZXtpZih0eXBlb2Ygaj09InN0cmluZyIpe2s9dS5jcmVhdGVUZXh0Tm9kZShqKX1lbHNle2s9dS5jcmVhdGVFbGVtZW50KGoudGFnfHwiZGl2Iik7cD0hIWsuc2V0QXR0cmlidXRlO2Zvcih2YXIgcyBpbiBqKXtpZighYi50ZXN0KHMpKXttPWpbc107aWYocz09ImNscyIpe2suY2xhc3NOYW1lPW19ZWxzZXtpZihwKXtrLnNldEF0dHJpYnV0ZShzLG0pfWVsc2V7a1tzXT1tfX19fUV4dC5Eb21IZWxwZXIuYXBwbHlTdHlsZXMoayxqLnN0eWxlKTtpZigodD1qLmNoaWxkcmVufHxqLmNuKSl7Yyh0LGspfWVsc2V7aWYoai5odG1sKXtrLmlubmVySFRNTD1qLmh0bWx9fX19aWYocil7ci5hcHBlbmRDaGlsZChrKX1yZXR1cm4ga31lPXtjcmVhdGVUZW1wbGF0ZTpmdW5jdGlvbihrKXt2YXIgaj1FeHQuRG9tSGVscGVyLmNyZWF0ZUh0bWwoayk7cmV0dXJuIG5ldyBFeHQuVGVtcGxhdGUoail9LHVzZURvbTpmYWxzZSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oaixsLGspe3JldHVybiBnKGosbCxrLGkpfSxpbnNlcnRBZnRlcjpmdW5jdGlvbihqLGwsayl7cmV0dXJuIGcoaixsLGssaCwibmV4dFNpYmxpbmciKX0saW5zZXJ0Rmlyc3Q6ZnVuY3Rpb24oaixsLGspe3JldHVybiBnKGosbCxrLGEsImZpcnN0Q2hpbGQiKX0sYXBwZW5kOmZ1bmN0aW9uKGosbCxrKXtyZXR1cm4gZyhqLGwsayxkLCIiLHRydWUpfSxjcmVhdGVEb206Y307cmV0dXJuIGV9KCkpO0V4dC5hcHBseShFeHQuVGVtcGxhdGUucHJvdG90eXBlLHtkaXNhYmxlRm9ybWF0czpmYWxzZSxyZTovXHsoW1x3XC1dKykoPzpcOihbXHdcLl0qKSg/OlwoKC4qPyk/XCkpPyk/XH0vZyxhcmdzUmU6L15ccypbJyJdKC4qKVsiJ11ccyokLyxjb21waWxlQVJlOi9cXC9nLGNvbXBpbGVCUmU6LyhcclxufFxuKS9nLGNvbXBpbGVDUmU6LycvZyxhcHBseVRlbXBsYXRlOmZ1bmN0aW9uKGIpe3ZhciBnPXRoaXMsYT1nLmRpc2FibGVGb3JtYXRzIT09dHJ1ZSxlPUV4dC51dGlsLkZvcm1hdCxjPWc7aWYoZy5jb21waWxlZCl7cmV0dXJuIGcuY29tcGlsZWQoYil9ZnVuY3Rpb24gZChqLGwscCxrKXtpZihwJiZhKXtpZihwLnN1YnN0cigwLDUpPT0idGhpcy4iKXtyZXR1cm4gYy5jYWxsKHAuc3Vic3RyKDUpLGJbbF0sYil9ZWxzZXtpZihrKXt2YXIgbz1nLmFyZ3NSZTtrPWsuc3BsaXQoIiwiKTtmb3IodmFyIG49MCxoPWsubGVuZ3RoO248aDtuKyspe2tbbl09a1tuXS5yZXBsYWNlKG8sIiQxIil9az1bYltsXV0uY29uY2F0KGspfWVsc2V7az1bYltsXV19cmV0dXJuIGVbcF0uYXBwbHkoZSxrKX19ZWxzZXtyZXR1cm4gYltsXSE9PXVuZGVmaW5lZD9iW2xdOiIifX1yZXR1cm4gZy5odG1sLnJlcGxhY2UoZy5yZSxkKX0sY29tcGlsZTpmdW5jdGlvbigpe3ZhciBtZT10aGlzLGZtPUV4dC51dGlsLkZvcm1hdCx1c2VGPW1lLmRpc2FibGVGb3JtYXRzIT09dHJ1ZSxzZXA9RXh0LmlzR2Vja28/IisiOiIsIixib2R5O2Z1bmN0aW9uIGZuKG0sbmFtZSxmb3JtYXQsYXJncyl7aWYoZm9ybWF0JiZ1c2VGKXthcmdzPWFyZ3M/IiwiK2FyZ3M6IiI7aWYoZm9ybWF0LnN1YnN0cigwLDUpIT0idGhpcy4iKXtmb3JtYXQ9ImZtLiIrZm9ybWF0KyIoIn1lbHNle2Zvcm1hdD0ndGhpcy5jYWxsKCInK2Zvcm1hdC5zdWJzdHIoNSkrJyIsICc7YXJncz0iLCB2YWx1ZXMifX1lbHNle2FyZ3M9IiI7Zm9ybWF0PSIodmFsdWVzWyciK25hbWUrIiddID09IHVuZGVmaW5lZCA/ICcnIDogIn1yZXR1cm4iJyIrc2VwK2Zvcm1hdCsidmFsdWVzWyciK25hbWUrIiddIithcmdzKyIpIitzZXArIicifWlmKEV4dC5pc0dlY2tvKXtib2R5PSJ0aGlzLmNvbXBpbGVkID0gZnVuY3Rpb24odmFsdWVzKXsgcmV0dXJuICciK21lLmh0bWwucmVwbGFjZShtZS5jb21waWxlQVJlLCJcXFxcIikucmVwbGFjZShtZS5jb21waWxlQlJlLCJcXG4iKS5yZXBsYWNlKG1lLmNvbXBpbGVDUmUsIlxcJyIpLnJlcGxhY2UobWUucmUsZm4pKyInO307In1lbHNle2JvZHk9WyJ0aGlzLmNvbXBpbGVkID0gZnVuY3Rpb24odmFsdWVzKXsgcmV0dXJuIFsnIl07Ym9keS5wdXNoKG1lLmh0bWwucmVwbGFjZShtZS5jb21waWxlQVJlLCJcXFxcIikucmVwbGFjZShtZS5jb21waWxlQlJlLCJcXG4iKS5yZXBsYWNlKG1lLmNvbXBpbGVDUmUsIlxcJyIpLnJlcGxhY2UobWUucmUsZm4pKTtib2R5LnB1c2goIiddLmpvaW4oJycpO307Iik7Ym9keT1ib2R5LmpvaW4oIiIpfWV2YWwoYm9keSk7cmV0dXJuIG1lfSxjYWxsOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gdGhpc1tjXShiLGEpfX0pO0V4dC5UZW1wbGF0ZS5wcm90b3R5cGUuYXBwbHk9RXh0LlRlbXBsYXRlLnByb3RvdHlwZS5hcHBseVRlbXBsYXRlO0V4dC51dGlsLkZ1bmN0aW9ucz17Y3JlYXRlSW50ZXJjZXB0b3I6ZnVuY3Rpb24oYyxiLGEpe3ZhciBkPWM7aWYoIUV4dC5pc0Z1bmN0aW9uKGIpKXtyZXR1cm4gY31lbHNle3JldHVybiBmdW5jdGlvbigpe3ZhciBnPXRoaXMsZT1hcmd1bWVudHM7Yi50YXJnZXQ9ZztiLm1ldGhvZD1jO3JldHVybihiLmFwcGx5KGF8fGd8fHdpbmRvdyxlKSE9PWZhbHNlKT9jLmFwcGx5KGd8fHdpbmRvdyxlKTpudWxsfX19LGNyZWF0ZURlbGVnYXRlOmZ1bmN0aW9uKGMsZCxiLGEpe2lmKCFFeHQuaXNGdW5jdGlvbihjKSl7cmV0dXJuIGN9cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGc9Ynx8YXJndW1lbnRzO2lmKGE9PT10cnVlKXtnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtnPWcuY29uY2F0KGIpfWVsc2V7aWYoRXh0LmlzTnVtYmVyKGEpKXtnPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTt2YXIgZT1bYSwwXS5jb25jYXQoYik7QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShnLGUpfX1yZXR1cm4gYy5hcHBseShkfHx3aW5kb3csZyl9fSxkZWZlcjpmdW5jdGlvbihkLGMsZSxiLGEpe2Q9RXh0LnV0aWwuRnVuY3Rpb25zLmNyZWF0ZURlbGVnYXRlKGQsZSxiLGEpO2lmKGM+MCl7cmV0dXJuIHNldFRpbWVvdXQoZCxjKX1kKCk7cmV0dXJuIDB9LGNyZWF0ZVNlcXVlbmNlOmZ1bmN0aW9uKGMsYixhKXtpZighRXh0LmlzRnVuY3Rpb24oYikpe3JldHVybiBjfWVsc2V7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5hcHBseSh0aGlzfHx3aW5kb3csYXJndW1lbnRzKTtiLmFwcGx5KGF8fHRoaXN8fHdpbmRvdyxhcmd1bWVudHMpO3JldHVybiBkfX19fTtFeHQuZGVmZXI9RXh0LnV0aWwuRnVuY3Rpb25zLmRlZmVyO0V4dC5jcmVhdGVJbnRlcmNlcHRvcj1FeHQudXRpbC5GdW5jdGlvbnMuY3JlYXRlSW50ZXJjZXB0b3I7RXh0LmNyZWF0ZVNlcXVlbmNlPUV4dC51dGlsLkZ1bmN0aW9ucy5jcmVhdGVTZXF1ZW5jZTtFeHQuY3JlYXRlRGVsZWdhdGU9RXh0LnV0aWwuRnVuY3Rpb25zLmNyZWF0ZURlbGVnYXRlO0V4dC5hcHBseShFeHQudXRpbC5PYnNlcnZhYmxlLnByb3RvdHlwZSxmdW5jdGlvbigpe2Z1bmN0aW9uIGEoail7dmFyIGk9KHRoaXMubWV0aG9kRXZlbnRzPXRoaXMubWV0aG9kRXZlbnRzfHx7fSlbal0sZCxjLGcsaD10aGlzO2lmKCFpKXt0aGlzLm1ldGhvZEV2ZW50c1tqXT1pPXt9O2kub3JpZ2luYWxGbj10aGlzW2pdO2kubWV0aG9kTmFtZT1qO2kuYmVmb3JlPVtdO2kuYWZ0ZXI9W107dmFyIGI9ZnVuY3Rpb24obCxrLGUpe2lmKChjPWwuYXBwbHkoa3x8aCxlKSkhPT11bmRlZmluZWQpe2lmKHR5cGVvZiBjPT0ib2JqZWN0Iil7aWYoYy5yZXR1cm5WYWx1ZSE9PXVuZGVmaW5lZCl7ZD1jLnJldHVyblZhbHVlfWVsc2V7ZD1jfWc9ISFjLmNhbmNlbH1lbHNle2lmKGM9PT1mYWxzZSl7Zz10cnVlfWVsc2V7ZD1jfX19fTt0aGlzW2pdPWZ1bmN0aW9uKCl7dmFyIGw9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLGs7ZD1jPXVuZGVmaW5lZDtnPWZhbHNlO2Zvcih2YXIgbT0wLGU9aS5iZWZvcmUubGVuZ3RoO208ZTttKyspe2s9aS5iZWZvcmVbbV07YihrLmZuLGsuc2NvcGUsbCk7aWYoZyl7cmV0dXJuIGR9fWlmKChjPWkub3JpZ2luYWxGbi5hcHBseShoLGwpKSE9PXVuZGVmaW5lZCl7ZD1jfWZvcih2YXIgbT0wLGU9aS5hZnRlci5sZW5ndGg7bTxlO20rKyl7az1pLmFmdGVyW21dO2Ioay5mbixrLnNjb3BlLGwpO2lmKGcpe3JldHVybiBkfX1yZXR1cm4gZH19cmV0dXJuIGl9cmV0dXJue2JlZm9yZU1ldGhvZDpmdW5jdGlvbihkLGMsYil7YS5jYWxsKHRoaXMsZCkuYmVmb3JlLnB1c2goe2ZuOmMsc2NvcGU6Yn0pfSxhZnRlck1ldGhvZDpmdW5jdGlvbihkLGMsYil7YS5jYWxsKHRoaXMsZCkuYWZ0ZXIucHVzaCh7Zm46YyxzY29wZTpifSl9LHJlbW92ZU1ldGhvZExpc3RlbmVyOmZ1bmN0aW9uKGosZyxkKXt2YXIgaD10aGlzLmdldE1ldGhvZEV2ZW50KGopO2Zvcih2YXIgYz0wLGI9aC5iZWZvcmUubGVuZ3RoO2M8YjtjKyspe2lmKGguYmVmb3JlW2NdLmZuPT1nJiZoLmJlZm9yZVtjXS5zY29wZT09ZCl7aC5iZWZvcmUuc3BsaWNlKGMsMSk7cmV0dXJufX1mb3IodmFyIGM9MCxiPWguYWZ0ZXIubGVuZ3RoO2M8YjtjKyspe2lmKGguYWZ0ZXJbY10uZm49PWcmJmguYWZ0ZXJbY10uc2NvcGU9PWQpe2guYWZ0ZXIuc3BsaWNlKGMsMSk7cmV0dXJufX19LHJlbGF5RXZlbnRzOmZ1bmN0aW9uKGosZSl7dmFyIGg9dGhpcztmdW5jdGlvbiBnKGkpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBoLmZpcmVFdmVudC5hcHBseShoLFtpXS5jb25jYXQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApKSl9fWZvcih2YXIgZD0wLGI9ZS5sZW5ndGg7ZDxiO2QrKyl7dmFyIGM9ZVtkXTtoLmV2ZW50c1tjXT1oLmV2ZW50c1tjXXx8dHJ1ZTtqLm9uKGMsZyhjKSxoKX19LGVuYWJsZUJ1YmJsZTpmdW5jdGlvbihlKXt2YXIgZz10aGlzO2lmKCFFeHQuaXNFbXB0eShlKSl7ZT1FeHQuaXNBcnJheShlKT9lOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKTtmb3IodmFyIGQ9MCxiPWUubGVuZ3RoO2Q8YjtkKyspe3ZhciBjPWVbZF07Yz1jLnRvTG93ZXJDYXNlKCk7dmFyIGg9Zy5ldmVudHNbY118fHRydWU7aWYodHlwZW9mIGg9PSJib29sZWFuIil7aD1uZXcgRXh0LnV0aWwuRXZlbnQoZyxjKTtnLmV2ZW50c1tjXT1ofWguYnViYmxlPXRydWV9fX19fSgpKTtFeHQudXRpbC5PYnNlcnZhYmxlLmNhcHR1cmU9ZnVuY3Rpb24oYyxiLGEpe2MuZmlyZUV2ZW50PWMuZmlyZUV2ZW50LmNyZWF0ZUludGVyY2VwdG9yKGIsYSl9O0V4dC51dGlsLk9ic2VydmFibGUub2JzZXJ2ZUNsYXNzPWZ1bmN0aW9uKGIsYSl7aWYoYil7aWYoIWIuZmlyZUV2ZW50KXtFeHQuYXBwbHkoYixuZXcgRXh0LnV0aWwuT2JzZXJ2YWJsZSgpKTtFeHQudXRpbC5PYnNlcnZhYmxlLmNhcHR1cmUoYi5wcm90b3R5cGUsYi5maXJlRXZlbnQsYil9aWYodHlwZW9mIGE9PSJvYmplY3QiKXtiLm9uKGEpfXJldHVybiBifX07RXh0LmFwcGx5KEV4dC5FdmVudE1hbmFnZXIsZnVuY3Rpb24oKXt2YXIgZCxrLGcsYixhPUV4dC5saWIuRG9tLGo9L14oPzpzY29wZXxkZWxheXxidWZmZXJ8c2luZ2xlfHN0b3BFdmVudHxwcmV2ZW50RGVmYXVsdHxzdG9wUHJvcGFnYXRpb258bm9ybWFsaXplZHxhcmdzfGRlbGVnYXRlKSQvLGM9RXh0LkV2ZW50TWFuYWdlci5fdW5sb2FkLGk9MCxoPTAsZT1FeHQuaXNXZWJLaXQ/RXh0Lm51bShuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BcHBsZVdlYktpdFwvKFxkKykvKVsxXSk+PTUyNTohKChFeHQuaXNHZWNrbyYmIUV4dC5pc1dpbmRvd3MpfHxFeHQuaXNPcGVyYSk7cmV0dXJue191bmxvYWQ6ZnVuY3Rpb24oKXtFeHQuRXZlbnRNYW5hZ2VyLnVuKHdpbmRvdywicmVzaXplIix0aGlzLmZpcmVXaW5kb3dSZXNpemUsdGhpcyk7Yy5jYWxsKEV4dC5FdmVudE1hbmFnZXIpfSxkb1Jlc2l6ZUV2ZW50OmZ1bmN0aW9uKCl7dmFyIG09YS5nZXRWaWV3SGVpZ2h0KCksbD1hLmdldFZpZXdXaWR0aCgpO2lmKGghPW18fGkhPWwpe2QuZmlyZShpPWwsaD1tKX19LG9uV2luZG93UmVzaXplOmZ1bmN0aW9uKG4sbSxsKXtpZighZCl7ZD1uZXcgRXh0LnV0aWwuRXZlbnQoKTtrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayh0aGlzLmRvUmVzaXplRXZlbnQpO0V4dC5FdmVudE1hbmFnZXIub24od2luZG93LCJyZXNpemUiLHRoaXMuZmlyZVdpbmRvd1Jlc2l6ZSx0aGlzKX1kLmFkZExpc3RlbmVyKG4sbSxsKX0sZmlyZVdpbmRvd1Jlc2l6ZTpmdW5jdGlvbigpe2lmKGQpe2suZGVsYXkoMTAwKX19LG9uVGV4dFJlc2l6ZTpmdW5jdGlvbihvLG4sbCl7aWYoIWcpe2c9bmV3IEV4dC51dGlsLkV2ZW50KCk7dmFyIG09bmV3IEV4dC5FbGVtZW50KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTttLmRvbS5jbGFzc05hbWU9IngtdGV4dC1yZXNpemUiO20uZG9tLmlubmVySFRNTD0iWCI7bS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtiPW0uZG9tLm9mZnNldEhlaWdodDtzZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKG0uZG9tLm9mZnNldEhlaWdodCE9Yil7Zy5maXJlKGIsYj1tLmRvbS5vZmZzZXRIZWlnaHQpfX0sdGhpcy50ZXh0UmVzaXplSW50ZXJ2YWwpfWcuYWRkTGlzdGVuZXIobyxuLGwpfSxyZW1vdmVSZXNpemVMaXN0ZW5lcjpmdW5jdGlvbihtLGwpe2lmKGQpe2QucmVtb3ZlTGlzdGVuZXIobSxsKX19LGZpcmVSZXNpemU6ZnVuY3Rpb24oKXtpZihkKXtkLmZpcmUoYS5nZXRWaWV3V2lkdGgoKSxhLmdldFZpZXdIZWlnaHQoKSl9fSx0ZXh0UmVzaXplSW50ZXJ2YWw6NTAsaWVEZWZlclNyYzpmYWxzZSxnZXRLZXlFdmVudDpmdW5jdGlvbigpe3JldHVybiBlPyJrZXlkb3duIjoia2V5cHJlc3MifSx1c2VLZXlkb3duOmV9fSgpKTtFeHQuRXZlbnRNYW5hZ2VyLm9uPUV4dC5FdmVudE1hbmFnZXIuYWRkTGlzdGVuZXI7RXh0LmFwcGx5KEV4dC5FdmVudE9iamVjdEltcGwucHJvdG90eXBlLHtCQUNLU1BBQ0U6OCxUQUI6OSxOVU1fQ0VOVEVSOjEyLEVOVEVSOjEzLFJFVFVSTjoxMyxTSElGVDoxNixDVFJMOjE3LENPTlRST0w6MTcsQUxUOjE4LFBBVVNFOjE5LENBUFNfTE9DSzoyMCxFU0M6MjcsU1BBQ0U6MzIsUEFHRV9VUDozMyxQQUdFVVA6MzMsUEFHRV9ET1dOOjM0LFBBR0VET1dOOjM0LEVORDozNSxIT01FOjM2LExFRlQ6MzcsVVA6MzgsUklHSFQ6MzksRE9XTjo0MCxQUklOVF9TQ1JFRU46NDQsSU5TRVJUOjQ1LERFTEVURTo0NixaRVJPOjQ4LE9ORTo0OSxUV086NTAsVEhSRUU6NTEsRk9VUjo1MixGSVZFOjUzLFNJWDo1NCxTRVZFTjo1NSxFSUdIVDo1NixOSU5FOjU3LEE6NjUsQjo2NixDOjY3LEQ6NjgsRTo2OSxGOjcwLEc6NzEsSDo3MixJOjczLEo6NzQsSzo3NSxMOjc2LE06NzcsTjo3OCxPOjc5LFA6ODAsUTo4MSxSOjgyLFM6ODMsVDo4NCxVOjg1LFY6ODYsVzo4NyxYOjg4LFk6ODksWjo5MCxDT05URVhUX01FTlU6OTMsTlVNX1pFUk86OTYsTlVNX09ORTo5NyxOVU1fVFdPOjk4LE5VTV9USFJFRTo5OSxOVU1fRk9VUjoxMDAsTlVNX0ZJVkU6MTAxLE5VTV9TSVg6MTAyLE5VTV9TRVZFTjoxMDMsTlVNX0VJR0hUOjEwNCxOVU1fTklORToxMDUsTlVNX01VTFRJUExZOjEwNixOVU1fUExVUzoxMDcsTlVNX01JTlVTOjEwOSxOVU1fUEVSSU9EOjExMCxOVU1fRElWSVNJT046MTExLEYxOjExMixGMjoxMTMsRjM6MTE0LEY0OjExNSxGNToxMTYsRjY6MTE3LEY3OjExOCxGODoxMTksRjk6MTIwLEYxMDoxMjEsRjExOjEyMixGMTI6MTIzLGlzTmF2S2V5UHJlc3M6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLGE9dGhpcy5ub3JtYWxpemVLZXkoYi5rZXlDb2RlKTtyZXR1cm4oYT49MzMmJmE8PTQwKXx8YT09Yi5SRVRVUk58fGE9PWIuVEFCfHxhPT1iLkVTQ30saXNTcGVjaWFsS2V5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ub3JtYWxpemVLZXkodGhpcy5rZXlDb2RlKTtyZXR1cm4odGhpcy50eXBlPT0ia2V5cHJlc3MiJiZ0aGlzLmN0cmxLZXkpfHx0aGlzLmlzTmF2S2V5UHJlc3MoKXx8KGE9PXRoaXMuQkFDS1NQQUNFKXx8KGE+PTE2JiZhPD0yMCl8fChhPj00NCYmYTw9NDYpfSxnZXRQb2ludDpmdW5jdGlvbigpe3JldHVybiBuZXcgRXh0LmxpYi5Qb2ludCh0aGlzLnh5WzBdLHRoaXMueHlbMV0pfSxoYXNNb2RpZmllcjpmdW5jdGlvbigpe3JldHVybigodGhpcy5jdHJsS2V5fHx0aGlzLmFsdEtleSl8fHRoaXMuc2hpZnRLZXkpfX0pO0V4dC5FbGVtZW50LmFkZE1ldGhvZHMoe3N3YWxsb3dFdmVudDpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXM7ZnVuY3Rpb24gYyhnKXtnLnN0b3BQcm9wYWdhdGlvbigpO2lmKGIpe2cucHJldmVudERlZmF1bHQoKX19aWYoRXh0LmlzQXJyYXkoYSkpe0V4dC5lYWNoKGEsZnVuY3Rpb24oZyl7ZC5vbihnLGMpfSk7cmV0dXJuIGR9ZC5vbihhLGMpO3JldHVybiBkfSxyZWxheUV2ZW50OmZ1bmN0aW9uKGEsYil7dGhpcy5vbihhLGZ1bmN0aW9uKGMpe2IuZmlyZUV2ZW50KGEsYyl9KX0sY2xlYW46ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcyxlPWQuZG9tLGc9ZS5maXJzdENoaWxkLGM9LTE7aWYoRXh0LkVsZW1lbnQuZGF0YShlLCJpc0NsZWFuZWQiKSYmYiE9PXRydWUpe3JldHVybiBkfXdoaWxlKGcpe3ZhciBhPWcubmV4dFNpYmxpbmc7aWYoZy5ub2RlVHlwZT09MyYmISgvXFMvLnRlc3QoZy5ub2RlVmFsdWUpKSl7ZS5yZW1vdmVDaGlsZChnKX1lbHNle2cubm9kZUluZGV4PSsrY31nPWF9RXh0LkVsZW1lbnQuZGF0YShlLCJpc0NsZWFuZWQiLHRydWUpO3JldHVybiBkfSxsb2FkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRVcGRhdGVyKCk7YS51cGRhdGUuYXBwbHkoYSxhcmd1bWVudHMpO3JldHVybiB0aGlzfSxnZXRVcGRhdGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXBkYXRlTWFuYWdlcnx8KHRoaXMudXBkYXRlTWFuYWdlcj1uZXcgRXh0LlVwZGF0ZXIodGhpcykpfSx1cGRhdGU6ZnVuY3Rpb24oaHRtbCxsb2FkU2NyaXB0cyxjYWxsYmFjayl7aWYoIXRoaXMuZG9tKXtyZXR1cm4gdGhpc31odG1sPWh0bWx8fCIiO2lmKGxvYWRTY3JpcHRzIT09dHJ1ZSl7dGhpcy5kb20uaW5uZXJIVE1MPWh0bWw7aWYodHlwZW9mIGNhbGxiYWNrPT0iZnVuY3Rpb24iKXtjYWxsYmFjaygpfXJldHVybiB0aGlzfXZhciBpZD1FeHQuaWQoKSxkb209dGhpcy5kb207aHRtbCs9JzxzcGFuIGlkPSInK2lkKyciPjwvc3Bhbj4nO0V4dC5saWIuRXZlbnQub25BdmFpbGFibGUoaWQsZnVuY3Rpb24oKXt2YXIgRE9DPWRvY3VtZW50LGhkPURPQy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLHJlPS8oPzo8c2NyaXB0KFtePl0qKT8+KSgoXG58XHJ8LikqPykoPzo8XC9zY3JpcHQ+KS9pZyxzcmNSZT0vXHNzcmM9KFtcJ1wiXSkoLio/KVwxL2ksdHlwZVJlPS9cc3R5cGU9KFtcJ1wiXSkoLio/KVwxL2ksbWF0Y2gsYXR0cnMsc3JjTWF0Y2gsdHlwZU1hdGNoLGVsLHM7d2hpbGUoKG1hdGNoPXJlLmV4ZWMoaHRtbCkpKXthdHRycz1tYXRjaFsxXTtzcmNNYXRjaD1hdHRycz9hdHRycy5tYXRjaChzcmNSZSk6ZmFsc2U7aWYoc3JjTWF0Y2gmJnNyY01hdGNoWzJdKXtzPURPQy5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtzLnNyYz1zcmNNYXRjaFsyXTt0eXBlTWF0Y2g9YXR0cnMubWF0Y2godHlwZVJlKTtpZih0eXBlTWF0Y2gmJnR5cGVNYXRjaFsyXSl7cy50eXBlPXR5cGVNYXRjaFsyXX1oZC5hcHBlbmRDaGlsZChzKX1lbHNle2lmKG1hdGNoWzJdJiZtYXRjaFsyXS5sZW5ndGg+MCl7aWYod2luZG93LmV4ZWNTY3JpcHQpe3dpbmRvdy5leGVjU2NyaXB0KG1hdGNoWzJdKX1lbHNle3dpbmRvdy5ldmFsKG1hdGNoWzJdKX19fX1lbD1ET0MuZ2V0RWxlbWVudEJ5SWQoaWQpO2lmKGVsKXtFeHQucmVtb3ZlTm9kZShlbCl9aWYodHlwZW9mIGNhbGxiYWNrPT0iZnVuY3Rpb24iKXtjYWxsYmFjaygpfX0pO2RvbS5pbm5lckhUTUw9aHRtbC5yZXBsYWNlKC8oPzo8c2NyaXB0Lio/PikoKFxufFxyfC4pKj8pKD86PFwvc2NyaXB0PikvaWcsIiIpO3JldHVybiB0aGlzfSxyZW1vdmVBbGxMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUFuY2hvcigpO0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlQWxsKHRoaXMuZG9tKTtyZXR1cm4gdGhpc30sY3JlYXRlUHJveHk6ZnVuY3Rpb24oYSxlLGQpe2E9KHR5cGVvZiBhPT0ib2JqZWN0Iik/YTp7dGFnOiJkaXYiLGNsczphfTt2YXIgYz10aGlzLGI9ZT9FeHQuRG9tSGVscGVyLmFwcGVuZChlLGEsdHJ1ZSk6RXh0LkRvbUhlbHBlci5pbnNlcnRCZWZvcmUoYy5kb20sYSx0cnVlKTtpZihkJiZjLnNldEJveCYmYy5nZXRCb3gpe2Iuc2V0Qm94KGMuZ2V0Qm94KCkpfXJldHVybiBifX0pO0V4dC5FbGVtZW50LnByb3RvdHlwZS5nZXRVcGRhdGVNYW5hZ2VyPUV4dC5FbGVtZW50LnByb3RvdHlwZS5nZXRVcGRhdGVyO0V4dC5FbGVtZW50LmFkZE1ldGhvZHMoe2dldEFuY2hvclhZOmZ1bmN0aW9uKGUsbCxxKXtlPShlfHwidGwiKS50b0xvd2VyQ2FzZSgpO3E9cXx8e307dmFyIGs9dGhpcyxiPWsuZG9tPT1kb2N1bWVudC5ib2R5fHxrLmRvbT09ZG9jdW1lbnQsbj1xLndpZHRofHxiP0V4dC5saWIuRG9tLmdldFZpZXdXaWR0aCgpOmsuZ2V0V2lkdGgoKSxpPXEuaGVpZ2h0fHxiP0V4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQoKTprLmdldEhlaWdodCgpLHAsYT1NYXRoLnJvdW5kLGM9ay5nZXRYWSgpLG09ay5nZXRTY3JvbGwoKSxqPWI/bS5sZWZ0OiFsP2NbMF06MCxnPWI/bS50b3A6IWw/Y1sxXTowLGQ9e2M6W2EobiowLjUpLGEoaSowLjUpXSx0OlthKG4qMC41KSwwXSxsOlswLGEoaSowLjUpXSxyOltuLGEoaSowLjUpXSxiOlthKG4qMC41KSxpXSx0bDpbMCwwXSxibDpbMCxpXSxicjpbbixpXSx0cjpbbiwwXX07cD1kW2VdO3JldHVybltwWzBdK2oscFsxXStnXX0sYW5jaG9yVG86ZnVuY3Rpb24oYixoLGMsYSxrLGwpe3ZhciBpPXRoaXMsZT1pLmRvbSxqPSFFeHQuaXNFbXB0eShrKSxkPWZ1bmN0aW9uKCl7RXh0LmZseShlKS5hbGlnblRvKGIsaCxjLGEpO0V4dC5jYWxsYmFjayhsLEV4dC5mbHkoZSkpfSxnPXRoaXMuZ2V0QW5jaG9yKCk7dGhpcy5yZW1vdmVBbmNob3IoKTtFeHQuYXBwbHkoZyx7Zm46ZCxzY3JvbGw6an0pO0V4dC5FdmVudE1hbmFnZXIub25XaW5kb3dSZXNpemUoZCxudWxsKTtpZihqKXtFeHQuRXZlbnRNYW5hZ2VyLm9uKHdpbmRvdywic2Nyb2xsIixkLG51bGwse2J1ZmZlcjohaXNOYU4oayk/azo1MH0pfWQuY2FsbChpKTtyZXR1cm4gaX0scmVtb3ZlQW5jaG9yOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcyxhPXRoaXMuZ2V0QW5jaG9yKCk7aWYoYSYmYS5mbil7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVSZXNpemVMaXN0ZW5lcihhLmZuKTtpZihhLnNjcm9sbCl7RXh0LkV2ZW50TWFuYWdlci51bih3aW5kb3csInNjcm9sbCIsYS5mbil9ZGVsZXRlIGEuZm59cmV0dXJuIGJ9LGdldEFuY2hvcjpmdW5jdGlvbigpe3ZhciBiPUV4dC5FbGVtZW50LmRhdGEsYz10aGlzLmRvbTtpZighYyl7cmV0dXJufXZhciBhPWIoYywiX2FuY2hvciIpO2lmKCFhKXthPWIoYywiX2FuY2hvciIse30pfXJldHVybiBhfSxnZXRBbGlnblRvWFk6ZnVuY3Rpb24oZyxBLEIpe2c9RXh0LmdldChnKTtpZighZ3x8IWcuZG9tKXt0aHJvdyJFbGVtZW50LmFsaWduVG9YWSB3aXRoIGFuIGVsZW1lbnQgdGhhdCBkb2Vzbid0IGV4aXN0In1CPUJ8fFswLDBdO0E9KCFBfHxBPT0iPyI/InRsLWJsPyI6KCEoLy0vKS50ZXN0KEEpJiZBIT09IiI/InRsLSIrQTpBfHwidGwtYmwiKSkudG9Mb3dlckNhc2UoKTt2YXIgSz10aGlzLEg9Sy5kb20sTSxMLG4sbCxzLEYsdix0PUV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCgpLTEwLEc9RXh0LmxpYi5Eb20uZ2V0Vmlld0hlaWdodCgpLTEwLGIsaSxqLGssdSx6LE49ZG9jdW1lbnQsSj1OLmRvY3VtZW50RWxlbWVudCxxPU4uYm9keSxFPShKLnNjcm9sbExlZnR8fHEuc2Nyb2xsTGVmdHx8MCkrNSxEPShKLnNjcm9sbFRvcHx8cS5zY3JvbGxUb3B8fDApKzUsST1mYWxzZSxlPSIiLGE9IiIsQz1BLm1hdGNoKC9eKFthLXpdKyktKFthLXpdKykoXD8pPyQvKTtpZighQyl7dGhyb3ciRWxlbWVudC5hbGlnblRvIHdpdGggYW4gaW52YWxpZCBhbGlnbm1lbnQgIitBfWU9Q1sxXTthPUNbMl07ST0hIUNbM107TT1LLmdldEFuY2hvclhZKGUsdHJ1ZSk7TD1nLmdldEFuY2hvclhZKGEsZmFsc2UpO249TFswXS1NWzBdK0JbMF07bD1MWzFdLU1bMV0rQlsxXTtpZihJKXtzPUsuZ2V0V2lkdGgoKTtGPUsuZ2V0SGVpZ2h0KCk7dj1nLmdldFJlZ2lvbigpO2I9ZS5jaGFyQXQoMCk7aT1lLmNoYXJBdChlLmxlbmd0aC0xKTtqPWEuY2hhckF0KDApO2s9YS5jaGFyQXQoYS5sZW5ndGgtMSk7dT0oKGI9PSJ0IiYmaj09ImIiKXx8KGI9PSJiIiYmaj09InQiKSk7ej0oKGk9PSJyIiYmaz09ImwiKXx8KGk9PSJsIiYmaz09InIiKSk7aWYobitzPnQrRSl7bj16P3YubGVmdC1zOnQrRS1zfWlmKG48RSl7bj16P3YucmlnaHQ6RX1pZihsK0Y+RytEKXtsPXU/di50b3AtRjpHK0QtRn1pZihsPEQpe2w9dT92LmJvdHRvbTpEfX1yZXR1cm5bbixsXX0sYWxpZ25UbzpmdW5jdGlvbihjLGEsZSxiKXt2YXIgZD10aGlzO3JldHVybiBkLnNldFhZKGQuZ2V0QWxpZ25Ub1hZKGMsYSxlKSxkLnByZWFuaW0mJiEhYj9kLnByZWFuaW0oYXJndW1lbnRzLDMpOmZhbHNlKX0sYWRqdXN0Rm9yQ29uc3RyYWludHM6ZnVuY3Rpb24oYyxhLGIpe3JldHVybiB0aGlzLmdldENvbnN0cmFpblRvWFkoYXx8ZG9jdW1lbnQsZmFsc2UsYixjKXx8Y30sZ2V0Q29uc3RyYWluVG9YWTpmdW5jdGlvbihiLGEsYyxlKXt2YXIgZD17dG9wOjAsbGVmdDowLGJvdHRvbTowLHJpZ2h0OjB9O3JldHVybiBmdW5jdGlvbihpLEEsbCxuKXtpPUV4dC5nZXQoaSk7bD1sP0V4dC5hcHBseUlmKGwsZCk6ZDt2YXIgeixELHY9MCx1PTA7aWYoaS5kb209PWRvY3VtZW50LmJvZHl8fGkuZG9tPT1kb2N1bWVudCl7ej1FeHQubGliLkRvbS5nZXRWaWV3V2lkdGgoKTtEPUV4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQoKX1lbHNle3o9aS5kb20uY2xpZW50V2lkdGg7RD1pLmRvbS5jbGllbnRIZWlnaHQ7aWYoIUEpe3ZhciB0PWkuZ2V0WFkoKTt2PXRbMF07dT10WzFdfX12YXIgcj1pLmdldFNjcm9sbCgpO3YrPWwubGVmdCtyLmxlZnQ7dSs9bC50b3Arci50b3A7ei09bC5yaWdodDtELT1sLmJvdHRvbTt2YXIgQj12K3osZz11K0Qsaj1ufHwoIUE/dGhpcy5nZXRYWSgpOlt0aGlzLmdldExlZnQodHJ1ZSksdGhpcy5nZXRUb3AodHJ1ZSldKSxwPWpbMF0sbz1qWzFdLGs9dGhpcy5nZXRDb25zdHJhaW5PZmZzZXQoKSxxPXRoaXMuZG9tLm9mZnNldFdpZHRoK2ssQz10aGlzLmRvbS5vZmZzZXRIZWlnaHQrazt2YXIgbT1mYWxzZTtpZigocCtxKT5CKXtwPUItcTttPXRydWV9aWYoKG8rQyk+Zyl7bz1nLUM7bT10cnVlfWlmKHA8dil7cD12O209dHJ1ZX1pZihvPHUpe289dTttPXRydWV9cmV0dXJuIG0/W3Asb106ZmFsc2V9fSgpLGdldENvbnN0cmFpbk9mZnNldDpmdW5jdGlvbigpe3JldHVybiAwfSxnZXRDZW50ZXJYWTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEFsaWduVG9YWShkb2N1bWVudCwiYy1jIil9LGNlbnRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hbGlnblRvKGF8fGRvY3VtZW50LCJjLWMiKX19KTtFeHQuRWxlbWVudC5hZGRNZXRob2RzKHtzZWxlY3Q6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gRXh0LkVsZW1lbnQuc2VsZWN0KGEsYix0aGlzLmRvbSl9fSk7RXh0LmFwcGx5KEV4dC5FbGVtZW50LnByb3RvdHlwZSxmdW5jdGlvbigpe3ZhciBjPUV4dC5nZXREb20sYT1FeHQuZ2V0LGI9RXh0LkRvbUhlbHBlcjtyZXR1cm57aW5zZXJ0U2libGluZzpmdW5jdGlvbihpLGcsaCl7dmFyIGo9dGhpcyxlLGQ9KGd8fCJiZWZvcmUiKS50b0xvd2VyQ2FzZSgpPT0iYWZ0ZXIiLGs7aWYoRXh0LmlzQXJyYXkoaSkpe2s9ajtFeHQuZWFjaChpLGZ1bmN0aW9uKGwpe2U9RXh0LmZseShrLCJfaW50ZXJuYWwiKS5pbnNlcnRTaWJsaW5nKGwsZyxoKTtpZihkKXtrPWV9fSk7cmV0dXJuIGV9aT1pfHx7fTtpZihpLm5vZGVUeXBlfHxpLmRvbSl7ZT1qLmRvbS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjKGkpLGQ/ai5kb20ubmV4dFNpYmxpbmc6ai5kb20pO2lmKCFoKXtlPWEoZSl9fWVsc2V7aWYoZCYmIWouZG9tLm5leHRTaWJsaW5nKXtlPWIuYXBwZW5kKGouZG9tLnBhcmVudE5vZGUsaSwhaCl9ZWxzZXtlPWJbZD8iaW5zZXJ0QWZ0ZXIiOiJpbnNlcnRCZWZvcmUiXShqLmRvbSxpLCFoKX19cmV0dXJuIGV9fX0oKSk7RXh0LkVsZW1lbnQuYm94TWFya3VwPSc8ZGl2IGNsYXNzPSJ7MH0tdGwiPjxkaXYgY2xhc3M9InswfS10ciI+PGRpdiBjbGFzcz0iezB9LXRjIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ7MH0tbWwiPjxkaXYgY2xhc3M9InswfS1tciI+PGRpdiBjbGFzcz0iezB9LW1jIj48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ7MH0tYmwiPjxkaXYgY2xhc3M9InswfS1iciI+PGRpdiBjbGFzcz0iezB9LWJjIj48L2Rpdj48L2Rpdj48L2Rpdj4nO0V4dC5FbGVtZW50LmFkZE1ldGhvZHMoZnVuY3Rpb24oKXt2YXIgYT0iX2ludGVybmFsIixiPS8oXGQrXC4/XGQrKXB4LztyZXR1cm57YXBwbHlTdHlsZXM6ZnVuY3Rpb24oYyl7RXh0LkRvbUhlbHBlci5hcHBseVN0eWxlcyh0aGlzLmRvbSxjKTtyZXR1cm4gdGhpc30sZ2V0U3R5bGVzOmZ1bmN0aW9uKCl7dmFyIGM9e307RXh0LmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGQpe2NbZF09dGhpcy5nZXRTdHlsZShkKX0sdGhpcyk7cmV0dXJuIGN9LHNldE92ZXJmbG93OmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuZG9tO2lmKGM9PSJhdXRvIiYmRXh0LmlzTWFjJiZFeHQuaXNHZWNrbzIpe2Quc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiI7KGZ1bmN0aW9uKCl7ZC5zdHlsZS5vdmVyZmxvdz0iYXV0byJ9KS5kZWZlcigxKX1lbHNle2Quc3R5bGUub3ZlcmZsb3c9Y319LGJveFdyYXA6ZnVuY3Rpb24oYyl7Yz1jfHwieC1ib3giO3ZhciBkPUV4dC5nZXQodGhpcy5pbnNlcnRIdG1sKCJiZWZvcmVCZWdpbiIsIjxkaXYgY2xhc3M9JyIrYysiJz4iK1N0cmluZy5mb3JtYXQoRXh0LkVsZW1lbnQuYm94TWFya3VwLGMpKyI8L2Rpdj4iKSk7RXh0LkRvbVF1ZXJ5LnNlbGVjdE5vZGUoIi4iK2MrIi1tYyIsZC5kb20pLmFwcGVuZENoaWxkKHRoaXMuZG9tKTtyZXR1cm4gZH0sc2V0U2l6ZTpmdW5jdGlvbihlLGMsZCl7dmFyIGc9dGhpcztpZih0eXBlb2YgZT09Im9iamVjdCIpe2M9ZS5oZWlnaHQ7ZT1lLndpZHRofWU9Zy5hZGp1c3RXaWR0aChlKTtjPWcuYWRqdXN0SGVpZ2h0KGMpO2lmKCFkfHwhZy5hbmltKXtnLmRvbS5zdHlsZS53aWR0aD1nLmFkZFVuaXRzKGUpO2cuZG9tLnN0eWxlLmhlaWdodD1nLmFkZFVuaXRzKGMpfWVsc2V7Zy5hbmltKHt3aWR0aDp7dG86ZX0saGVpZ2h0Ont0bzpjfX0sZy5wcmVhbmltKGFyZ3VtZW50cywyKSl9cmV0dXJuIGd9LGdldENvbXB1dGVkSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxjPU1hdGgubWF4KGQuZG9tLm9mZnNldEhlaWdodCxkLmRvbS5jbGllbnRIZWlnaHQpO2lmKCFjKXtjPXBhcnNlRmxvYXQoZC5nZXRTdHlsZSgiaGVpZ2h0IikpfHwwO2lmKCFkLmlzQm9yZGVyQm94KCkpe2MrPWQuZ2V0RnJhbWVXaWR0aCgidGIiKX19cmV0dXJuIGN9LGdldENvbXB1dGVkV2lkdGg6ZnVuY3Rpb24oKXt2YXIgYz1NYXRoLm1heCh0aGlzLmRvbS5vZmZzZXRXaWR0aCx0aGlzLmRvbS5jbGllbnRXaWR0aCk7aWYoIWMpe2M9cGFyc2VGbG9hdCh0aGlzLmdldFN0eWxlKCJ3aWR0aCIpKXx8MDtpZighdGhpcy5pc0JvcmRlckJveCgpKXtjKz10aGlzLmdldEZyYW1lV2lkdGgoImxyIil9fXJldHVybiBjfSxnZXRGcmFtZVdpZHRoOmZ1bmN0aW9uKGQsYyl7cmV0dXJuIGMmJnRoaXMuaXNCb3JkZXJCb3goKT8wOih0aGlzLmdldFBhZGRpbmcoZCkrdGhpcy5nZXRCb3JkZXJXaWR0aChkKSl9LGFkZENsYXNzT25PdmVyOmZ1bmN0aW9uKGMpe3RoaXMuaG92ZXIoZnVuY3Rpb24oKXtFeHQuZmx5KHRoaXMsYSkuYWRkQ2xhc3MoYyl9LGZ1bmN0aW9uKCl7RXh0LmZseSh0aGlzLGEpLnJlbW92ZUNsYXNzKGMpfSk7cmV0dXJuIHRoaXN9LGFkZENsYXNzT25Gb2N1czpmdW5jdGlvbihjKXt0aGlzLm9uKCJmb2N1cyIsZnVuY3Rpb24oKXtFeHQuZmx5KHRoaXMsYSkuYWRkQ2xhc3MoYyl9LHRoaXMuZG9tKTt0aGlzLm9uKCJibHVyIixmdW5jdGlvbigpe0V4dC5mbHkodGhpcyxhKS5yZW1vdmVDbGFzcyhjKX0sdGhpcy5kb20pO3JldHVybiB0aGlzfSxhZGRDbGFzc09uQ2xpY2s6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5kb207dGhpcy5vbigibW91c2Vkb3duIixmdW5jdGlvbigpe0V4dC5mbHkoZCxhKS5hZGRDbGFzcyhjKTt2YXIgZz1FeHQuZ2V0RG9jKCksZT1mdW5jdGlvbigpe0V4dC5mbHkoZCxhKS5yZW1vdmVDbGFzcyhjKTtnLnJlbW92ZUxpc3RlbmVyKCJtb3VzZXVwIixlKX07Zy5vbigibW91c2V1cCIsZSl9KTtyZXR1cm4gdGhpc30sZ2V0Vmlld1NpemU6ZnVuY3Rpb24oKXt2YXIgZz1kb2N1bWVudCxoPXRoaXMuZG9tLGM9KGg9PWd8fGg9PWcuYm9keSk7aWYoYyl7dmFyIGU9RXh0LmxpYi5Eb207cmV0dXJue3dpZHRoOmUuZ2V0Vmlld1dpZHRoKCksaGVpZ2h0OmUuZ2V0Vmlld0hlaWdodCgpfX1lbHNle3JldHVybnt3aWR0aDpoLmNsaWVudFdpZHRoLGhlaWdodDpoLmNsaWVudEhlaWdodH19fSxnZXRTdHlsZVNpemU6ZnVuY3Rpb24oKXt2YXIgaj10aGlzLGMsaSxsPWRvY3VtZW50LG09dGhpcy5kb20sZT0obT09bHx8bT09bC5ib2R5KSxnPW0uc3R5bGU7aWYoZSl7dmFyIGs9RXh0LmxpYi5Eb207cmV0dXJue3dpZHRoOmsuZ2V0Vmlld1dpZHRoKCksaGVpZ2h0OmsuZ2V0Vmlld0hlaWdodCgpfX1pZihnLndpZHRoJiZnLndpZHRoIT0iYXV0byIpe2M9cGFyc2VGbG9hdChnLndpZHRoKTtpZihqLmlzQm9yZGVyQm94KCkpe2MtPWouZ2V0RnJhbWVXaWR0aCgibHIiKX19aWYoZy5oZWlnaHQmJmcuaGVpZ2h0IT0iYXV0byIpe2k9cGFyc2VGbG9hdChnLmhlaWdodCk7aWYoai5pc0JvcmRlckJveCgpKXtpLT1qLmdldEZyYW1lV2lkdGgoInRiIil9fXJldHVybnt3aWR0aDpjfHxqLmdldFdpZHRoKHRydWUpLGhlaWdodDppfHxqLmdldEhlaWdodCh0cnVlKX19LGdldFNpemU6ZnVuY3Rpb24oYyl7cmV0dXJue3dpZHRoOnRoaXMuZ2V0V2lkdGgoYyksaGVpZ2h0OnRoaXMuZ2V0SGVpZ2h0KGMpfX0scmVwYWludDpmdW5jdGlvbigpe3ZhciBjPXRoaXMuZG9tO3RoaXMuYWRkQ2xhc3MoIngtcmVwYWludCIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtFeHQuZmx5KGMpLnJlbW92ZUNsYXNzKCJ4LXJlcGFpbnQiKX0sMSk7cmV0dXJuIHRoaXN9LHVuc2VsZWN0YWJsZTpmdW5jdGlvbigpe3RoaXMuZG9tLnVuc2VsZWN0YWJsZT0ib24iO3JldHVybiB0aGlzLnN3YWxsb3dFdmVudCgic2VsZWN0c3RhcnQiLHRydWUpLmFwcGx5U3R5bGVzKCItbW96LXVzZXItc2VsZWN0Om5vbmU7LWtodG1sLXVzZXItc2VsZWN0Om5vbmU7IikuYWRkQ2xhc3MoIngtdW5zZWxlY3RhYmxlIil9LGdldE1hcmdpbnM6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcyxjLGc9e3Q6InRvcCIsbDoibGVmdCIscjoicmlnaHQiLGI6ImJvdHRvbSJ9LGg9e307aWYoIWQpe2ZvcihjIGluIGUubWFyZ2lucyl7aFtnW2NdXT1wYXJzZUZsb2F0KGUuZ2V0U3R5bGUoZS5tYXJnaW5zW2NdKSl8fDB9cmV0dXJuIGh9ZWxzZXtyZXR1cm4gZS5hZGRTdHlsZXMuY2FsbChlLGQsZS5tYXJnaW5zKX19fX0oKSk7RXh0LkVsZW1lbnQuYWRkTWV0aG9kcyh7c2V0Qm94OmZ1bmN0aW9uKGUsZyxiKXt2YXIgZD10aGlzLGE9ZS53aWR0aCxjPWUuaGVpZ2h0O2lmKChnJiYhZC5hdXRvQm94QWRqdXN0KSYmIWQuaXNCb3JkZXJCb3goKSl7YS09KGQuZ2V0Qm9yZGVyV2lkdGgoImxyIikrZC5nZXRQYWRkaW5nKCJsciIpKTtjLT0oZC5nZXRCb3JkZXJXaWR0aCgidGIiKStkLmdldFBhZGRpbmcoInRiIikpfWQuc2V0Qm91bmRzKGUueCxlLnksYSxjLGQuYW5pbVRlc3QuY2FsbChkLGFyZ3VtZW50cyxiLDIpKTtyZXR1cm4gZH0sZ2V0Qm94OmZ1bmN0aW9uKGoscCl7dmFyIG09dGhpcyx2LGUsbyxkPW0uZ2V0Qm9yZGVyV2lkdGgscT1tLmdldFBhZGRpbmcsZyxhLHUsbjtpZighcCl7dj1tLmdldFhZKCl9ZWxzZXtlPXBhcnNlSW50KG0uZ2V0U3R5bGUoImxlZnQiKSwxMCl8fDA7bz1wYXJzZUludChtLmdldFN0eWxlKCJ0b3AiKSwxMCl8fDA7dj1bZSxvXX12YXIgYz1tLmRvbSxzPWMub2Zmc2V0V2lkdGgsaT1jLm9mZnNldEhlaWdodCxrO2lmKCFqKXtrPXt4OnZbMF0seTp2WzFdLDA6dlswXSwxOnZbMV0sd2lkdGg6cyxoZWlnaHQ6aX19ZWxzZXtnPWQuY2FsbChtLCJsIikrcS5jYWxsKG0sImwiKTthPWQuY2FsbChtLCJyIikrcS5jYWxsKG0sInIiKTt1PWQuY2FsbChtLCJ0IikrcS5jYWxsKG0sInQiKTtuPWQuY2FsbChtLCJiIikrcS5jYWxsKG0sImIiKTtrPXt4OnZbMF0rZyx5OnZbMV0rdSwwOnZbMF0rZywxOnZbMV0rdSx3aWR0aDpzLShnK2EpLGhlaWdodDppLSh1K24pfX1rLnJpZ2h0PWsueCtrLndpZHRoO2suYm90dG9tPWsueStrLmhlaWdodDtyZXR1cm4ga30sbW92ZTpmdW5jdGlvbihqLGIsYyl7dmFyIGc9dGhpcyxtPWcuZ2V0WFkoKSxrPW1bMF0saT1tWzFdLGQ9W2stYixpXSxsPVtrK2IsaV0saD1bayxpLWJdLGE9W2ssaStiXSxlPXtsOmQsbGVmdDpkLHI6bCxyaWdodDpsLHQ6aCx0b3A6aCx1cDpoLGI6YSxib3R0b206YSxkb3duOmF9O2o9ai50b0xvd2VyQ2FzZSgpO2cubW92ZVRvKGVbal1bMF0sZVtqXVsxXSxnLmFuaW1UZXN0LmNhbGwoZyxhcmd1bWVudHMsYywyKSl9LHNldExlZnRUb3A6ZnVuY3Rpb24oZCxjKXt2YXIgYj10aGlzLGE9Yi5kb20uc3R5bGU7YS5sZWZ0PWIuYWRkVW5pdHMoZCk7YS50b3A9Yi5hZGRVbml0cyhjKTtyZXR1cm4gYn0sZ2V0UmVnaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5saWIuRG9tLmdldFJlZ2lvbih0aGlzLmRvbSl9LHNldEJvdW5kczpmdW5jdGlvbihiLGcsZCxhLGMpe3ZhciBlPXRoaXM7aWYoIWN8fCFlLmFuaW0pe2Uuc2V0U2l6ZShkLGEpO2Uuc2V0TG9jYXRpb24oYixnKX1lbHNle2UuYW5pbSh7cG9pbnRzOnt0bzpbYixnXX0sd2lkdGg6e3RvOmUuYWRqdXN0V2lkdGgoZCl9LGhlaWdodDp7dG86ZS5hZGp1c3RIZWlnaHQoYSl9fSxlLnByZWFuaW0oYXJndW1lbnRzLDQpLCJtb3Rpb24iKX1yZXR1cm4gZX0sc2V0UmVnaW9uOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIHRoaXMuc2V0Qm91bmRzKGIubGVmdCxiLnRvcCxiLnJpZ2h0LWIubGVmdCxiLmJvdHRvbS1iLnRvcCx0aGlzLmFuaW1UZXN0LmNhbGwodGhpcyxhcmd1bWVudHMsYSwxKSl9fSk7RXh0LkVsZW1lbnQuYWRkTWV0aG9kcyh7c2Nyb2xsVG86ZnVuY3Rpb24oYixkLGEpe3ZhciBlPS90b3AvaS50ZXN0KGIpLGM9dGhpcyxnPWMuZG9tLGg7aWYoIWF8fCFjLmFuaW0pe2g9InNjcm9sbCIrKGU/IlRvcCI6IkxlZnQiKTtnW2hdPWR9ZWxzZXtoPSJzY3JvbGwiKyhlPyJMZWZ0IjoiVG9wIik7Yy5hbmltKHtzY3JvbGw6e3RvOmU/W2dbaF0sZF06W2QsZ1toXV19fSxjLnByZWFuaW0oYXJndW1lbnRzLDIpLCJzY3JvbGwiKX1yZXR1cm4gY30sc2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oZSxpKXt2YXIgcD1FeHQuZ2V0RG9tKGUpfHxFeHQuZ2V0Qm9keSgpLmRvbSxoPXRoaXMuZG9tLGc9dGhpcy5nZXRPZmZzZXRzVG8ocCksaz1nWzBdK3Auc2Nyb2xsTGVmdCx1PWdbMV0rcC5zY3JvbGxUb3AscT11K2gub2Zmc2V0SGVpZ2h0LGQ9aytoLm9mZnNldFdpZHRoLGE9cC5jbGllbnRIZWlnaHQsbT1wYXJzZUludChwLnNjcm9sbFRvcCwxMCkscz1wYXJzZUludChwLnNjcm9sbExlZnQsMTApLGo9bSthLG49cytwLmNsaWVudFdpZHRoO2lmKGgub2Zmc2V0SGVpZ2h0PmF8fHU8bSl7cC5zY3JvbGxUb3A9dX1lbHNle2lmKHE+ail7cC5zY3JvbGxUb3A9cS1hfX1wLnNjcm9sbFRvcD1wLnNjcm9sbFRvcDtpZihpIT09ZmFsc2Upe2lmKGgub2Zmc2V0V2lkdGg+cC5jbGllbnRXaWR0aHx8azxzKXtwLnNjcm9sbExlZnQ9a31lbHNle2lmKGQ+bil7cC5zY3JvbGxMZWZ0PWQtcC5jbGllbnRXaWR0aH19cC5zY3JvbGxMZWZ0PXAuc2Nyb2xsTGVmdH1yZXR1cm4gdGhpc30sc2Nyb2xsQ2hpbGRJbnRvVmlldzpmdW5jdGlvbihiLGEpe0V4dC5mbHkoYiwiX3Njcm9sbENoaWxkSW50b1ZpZXciKS5zY3JvbGxJbnRvVmlldyh0aGlzLGEpfSxzY3JvbGw6ZnVuY3Rpb24obSxiLGQpe2lmKCF0aGlzLmlzU2Nyb2xsYWJsZSgpKXtyZXR1cm4gZmFsc2V9dmFyIGU9dGhpcy5kb20sZz1lLnNjcm9sbExlZnQscD1lLnNjcm9sbFRvcCxuPWUuc2Nyb2xsV2lkdGgsaz1lLnNjcm9sbEhlaWdodCxpPWUuY2xpZW50V2lkdGgsYT1lLmNsaWVudEhlaWdodCxjPWZhbHNlLG8saj17bDpNYXRoLm1pbihnK2Isbi1pKSxyOm89TWF0aC5tYXgoZy1iLDApLHQ6TWF0aC5tYXgocC1iLDApLGI6TWF0aC5taW4ocCtiLGstYSl9O2ouZD1qLmI7ai51PWoudDttPW0uc3Vic3RyKDAsMSk7aWYoKG89alttXSk+LTEpe2M9dHJ1ZTt0aGlzLnNjcm9sbFRvKG09PSJsInx8bT09InIiPyJsZWZ0IjoidG9wIixvLHRoaXMucHJlYW5pbShhcmd1bWVudHMsMikpfXJldHVybiBjfX0pO0V4dC5FbGVtZW50LmFkZE1ldGhvZHMoZnVuY3Rpb24oKXt2YXIgZD0idmlzaWJpbGl0eSIsYj0iZGlzcGxheSIsYT0iaGlkZGVuIixoPSJub25lIixjPSJ4LW1hc2tlZCIsZz0ieC1tYXNrZWQtcmVsYXRpdmUiLGU9RXh0LkVsZW1lbnQuZGF0YTtyZXR1cm57aXNWaXNpYmxlOmZ1bmN0aW9uKGkpe3ZhciBqPSF0aGlzLmlzU3R5bGUoZCxhKSYmIXRoaXMuaXNTdHlsZShiLGgpLGs9dGhpcy5kb20ucGFyZW50Tm9kZTtpZihpIT09dHJ1ZXx8IWope3JldHVybiBqfXdoaWxlKGsmJiEoL15ib2R5L2kudGVzdChrLnRhZ05hbWUpKSl7aWYoIUV4dC5mbHkoaywiX2lzVmlzaWJsZSIpLmlzVmlzaWJsZSgpKXtyZXR1cm4gZmFsc2V9az1rLnBhcmVudE5vZGV9cmV0dXJuIHRydWV9LGlzRGlzcGxheWVkOmZ1bmN0aW9uKCl7cmV0dXJuICF0aGlzLmlzU3R5bGUoYixoKX0sZW5hYmxlRGlzcGxheU1vZGU6ZnVuY3Rpb24oaSl7dGhpcy5zZXRWaXNpYmlsaXR5TW9kZShFeHQuRWxlbWVudC5ESVNQTEFZKTtpZighRXh0LmlzRW1wdHkoaSkpe2UodGhpcy5kb20sIm9yaWdpbmFsRGlzcGxheSIsaSl9cmV0dXJuIHRoaXN9LG1hc2s6ZnVuY3Rpb24oaixuKXt2YXIgcD10aGlzLGw9cC5kb20sbz1FeHQuRG9tSGVscGVyLG09ImV4dC1lbC1tYXNrLW1zZyIsaSxxO2lmKCEvXmJvZHkvaS50ZXN0KGwudGFnTmFtZSkmJnAuZ2V0U3R5bGUoInBvc2l0aW9uIik9PSJzdGF0aWMiKXtwLmFkZENsYXNzKGcpfWlmKGk9ZShsLCJtYXNrTXNnIikpe2kucmVtb3ZlKCl9aWYoaT1lKGwsIm1hc2siKSl7aS5yZW1vdmUoKX1xPW8uYXBwZW5kKGwse2NsczoiZXh0LWVsLW1hc2sifSx0cnVlKTtlKGwsIm1hc2siLHEpO3AuYWRkQ2xhc3MoYyk7cS5zZXREaXNwbGF5ZWQodHJ1ZSk7aWYodHlwZW9mIGo9PSJzdHJpbmciKXt2YXIgaz1vLmFwcGVuZChsLHtjbHM6bSxjbjp7dGFnOiJkaXYifX0sdHJ1ZSk7ZShsLCJtYXNrTXNnIixrKTtrLmRvbS5jbGFzc05hbWU9bj9tKyIgIituOm07ay5kb20uZmlyc3RDaGlsZC5pbm5lckhUTUw9ajtrLnNldERpc3BsYXllZCh0cnVlKTtrLmNlbnRlcihwKX1pZihFeHQuaXNJRSYmIShFeHQuaXNJRTcmJkV4dC5pc1N0cmljdCkmJnAuZ2V0U3R5bGUoImhlaWdodCIpPT0iYXV0byIpe3Euc2V0U2l6ZSh1bmRlZmluZWQscC5nZXRIZWlnaHQoKSl9cmV0dXJuIHF9LHVubWFzazpmdW5jdGlvbigpe3ZhciBrPXRoaXMsbD1rLmRvbSxpPWUobCwibWFzayIpLGo9ZShsLCJtYXNrTXNnIik7aWYoaSl7aWYoail7ai5yZW1vdmUoKTtlKGwsIm1hc2tNc2ciLHVuZGVmaW5lZCl9aS5yZW1vdmUoKTtlKGwsIm1hc2siLHVuZGVmaW5lZCk7ay5yZW1vdmVDbGFzcyhbYyxnXSl9fSxpc01hc2tlZDpmdW5jdGlvbigpe3ZhciBpPWUodGhpcy5kb20sIm1hc2siKTtyZXR1cm4gaSYmaS5pc1Zpc2libGUoKX0sY3JlYXRlU2hpbTpmdW5jdGlvbigpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpLGo7aS5mcmFtZUJvcmRlcj0iMCI7aS5jbGFzc05hbWU9ImV4dC1zaGltIjtpLnNyYz1FeHQuU1NMX1NFQ1VSRV9VUkw7aj1FeHQuZ2V0KHRoaXMuZG9tLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGksdGhpcy5kb20pKTtqLmF1dG9Cb3hBZGp1c3Q9ZmFsc2U7cmV0dXJuIGp9fX0oKSk7RXh0LkVsZW1lbnQuYWRkTWV0aG9kcyh7YWRkS2V5TGlzdGVuZXI6ZnVuY3Rpb24oYixkLGMpe3ZhciBhO2lmKHR5cGVvZiBiIT0ib2JqZWN0Inx8RXh0LmlzQXJyYXkoYikpe2E9e2tleTpiLGZuOmQsc2NvcGU6Y319ZWxzZXthPXtrZXk6Yi5rZXksc2hpZnQ6Yi5zaGlmdCxjdHJsOmIuY3RybCxhbHQ6Yi5hbHQsZm46ZCxzY29wZTpjfX1yZXR1cm4gbmV3IEV4dC5LZXlNYXAodGhpcyxhKX0sYWRkS2V5TWFwOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgRXh0LktleU1hcCh0aGlzLGEpfX0pO0V4dC5Db21wb3NpdGVFbGVtZW50TGl0ZS5pbXBvcnRFbGVtZW50TWV0aG9kcygpO0V4dC5hcHBseShFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUucHJvdG90eXBlLHthZGRFbGVtZW50czpmdW5jdGlvbihjLGEpe2lmKCFjKXtyZXR1cm4gdGhpc31pZih0eXBlb2YgYz09InN0cmluZyIpe2M9RXh0LkVsZW1lbnQuc2VsZWN0b3JGdW5jdGlvbihjLGEpfXZhciBiPXRoaXMuZWxlbWVudHM7RXh0LmVhY2goYyxmdW5jdGlvbihkKXtiLnB1c2goRXh0LmdldChkKSl9KTtyZXR1cm4gdGhpc30sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtKDApfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbSh0aGlzLmdldENvdW50KCktMSl9LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluZGV4T2YoYSkhPS0xfSxyZW1vdmVFbGVtZW50OmZ1bmN0aW9uKGQsZSl7dmFyIGM9dGhpcyxhPXRoaXMuZWxlbWVudHMsYjtFeHQuZWFjaChkLGZ1bmN0aW9uKGcpe2lmKChiPShhW2ddfHxhW2c9Yy5pbmRleE9mKGcpXSkpKXtpZihlKXtpZihiLmRvbSl7Yi5yZW1vdmUoKX1lbHNle0V4dC5yZW1vdmVOb2RlKGIpfX1hLnNwbGljZShnLDEpfX0pO3JldHVybiB0aGlzfX0pO0V4dC5Db21wb3NpdGVFbGVtZW50PUV4dC5leHRlbmQoRXh0LkNvbXBvc2l0ZUVsZW1lbnRMaXRlLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGEpe3RoaXMuZWxlbWVudHM9W107dGhpcy5hZGQoYixhKX0sZ2V0RWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gYX0sdHJhbnNmb3JtRWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmdldChhKX19KTtFeHQuRWxlbWVudC5zZWxlY3Q9ZnVuY3Rpb24oYSxkLGIpe3ZhciBjO2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7Yz1FeHQuRWxlbWVudC5zZWxlY3RvckZ1bmN0aW9uKGEsYil9ZWxzZXtpZihhLmxlbmd0aCE9PXVuZGVmaW5lZCl7Yz1hfWVsc2V7dGhyb3ciSW52YWxpZCBzZWxlY3RvciJ9fXJldHVybihkPT09dHJ1ZSk/bmV3IEV4dC5Db21wb3NpdGVFbGVtZW50KGMpOm5ldyBFeHQuQ29tcG9zaXRlRWxlbWVudExpdGUoYyl9O0V4dC5zZWxlY3Q9RXh0LkVsZW1lbnQuc2VsZWN0O0V4dC5VcGRhdGVNYW5hZ2VyPUV4dC5VcGRhdGVyPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSxmdW5jdGlvbigpe3ZhciBiPSJiZWZvcmV1cGRhdGUiLGQ9InVwZGF0ZSIsYz0iZmFpbHVyZSI7ZnVuY3Rpb24gYShoKXt2YXIgaT10aGlzO2kudHJhbnNhY3Rpb249bnVsbDtpZihoLmFyZ3VtZW50LmZvcm0mJmguYXJndW1lbnQucmVzZXQpe3RyeXtoLmFyZ3VtZW50LmZvcm0ucmVzZXQoKX1jYXRjaChqKXt9fWlmKGkubG9hZFNjcmlwdHMpe2kucmVuZGVyZXIucmVuZGVyKGkuZWwsaCxpLGcuY3JlYXRlRGVsZWdhdGUoaSxbaF0pKX1lbHNle2kucmVuZGVyZXIucmVuZGVyKGkuZWwsaCxpKTtnLmNhbGwoaSxoKX19ZnVuY3Rpb24gZyhoLGksail7dGhpcy5maXJlRXZlbnQoaXx8ZCx0aGlzLmVsLGgpO2lmKEV4dC5pc0Z1bmN0aW9uKGguYXJndW1lbnQuY2FsbGJhY2spKXtoLmFyZ3VtZW50LmNhbGxiYWNrLmNhbGwoaC5hcmd1bWVudC5zY29wZSx0aGlzLmVsLEV4dC5pc0VtcHR5KGopP3RydWU6ZmFsc2UsaCxoLmFyZ3VtZW50Lm9wdGlvbnMpfX1mdW5jdGlvbiBlKGgpe2cuY2FsbCh0aGlzLGgsYywhISh0aGlzLnRyYW5zYWN0aW9uPW51bGwpKX1yZXR1cm57Y29uc3RydWN0b3I6ZnVuY3Rpb24oaSxoKXt2YXIgaj10aGlzO2k9RXh0LmdldChpKTtpZighaCYmaS51cGRhdGVNYW5hZ2VyKXtyZXR1cm4gaS51cGRhdGVNYW5hZ2VyfWouZWw9aTtqLmRlZmF1bHRVcmw9bnVsbDtqLmFkZEV2ZW50cyhiLGQsYyk7RXh0LmFwcGx5KGosRXh0LlVwZGF0ZXIuZGVmYXVsdHMpO2oudHJhbnNhY3Rpb249bnVsbDtqLnJlZnJlc2hEZWxlZ2F0ZT1qLnJlZnJlc2guY3JlYXRlRGVsZWdhdGUoaik7ai51cGRhdGVEZWxlZ2F0ZT1qLnVwZGF0ZS5jcmVhdGVEZWxlZ2F0ZShqKTtqLmZvcm1VcGRhdGVEZWxlZ2F0ZT0oai5mb3JtVXBkYXRlfHxmdW5jdGlvbigpe30pLmNyZWF0ZURlbGVnYXRlKGopO2oucmVuZGVyZXI9ai5yZW5kZXJlcnx8ai5nZXREZWZhdWx0UmVuZGVyZXIoKTtFeHQuVXBkYXRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwoail9LHNldFJlbmRlcmVyOmZ1bmN0aW9uKGgpe3RoaXMucmVuZGVyZXI9aH0sZ2V0UmVuZGVyZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW5kZXJlcn0sZ2V0RGVmYXVsdFJlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBFeHQuVXBkYXRlci5CYXNpY1JlbmRlcmVyKCl9LHNldERlZmF1bHRVcmw6ZnVuY3Rpb24oaCl7dGhpcy5kZWZhdWx0VXJsPWh9LGdldEVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWx9LHVwZGF0ZTpmdW5jdGlvbihpLG4scCxsKXt2YXIgaz10aGlzLGgsajtpZihrLmZpcmVFdmVudChiLGsuZWwsaSxuKSE9PWZhbHNlKXtpZihFeHQuaXNPYmplY3QoaSkpe2g9aTtpPWgudXJsO249bnx8aC5wYXJhbXM7cD1wfHxoLmNhbGxiYWNrO2w9bHx8aC5kaXNjYXJkVXJsO2o9aC5zY29wZTtpZighRXh0LmlzRW1wdHkoaC5ub2NhY2hlKSl7ay5kaXNhYmxlQ2FjaGluZz1oLm5vY2FjaGV9aWYoIUV4dC5pc0VtcHR5KGgudGV4dCkpe2suaW5kaWNhdG9yVGV4dD0nPGRpdiBjbGFzcz0ibG9hZGluZy1pbmRpY2F0b3IiPicraC50ZXh0KyI8L2Rpdj4ifWlmKCFFeHQuaXNFbXB0eShoLnNjcmlwdHMpKXtrLmxvYWRTY3JpcHRzPWguc2NyaXB0c31pZighRXh0LmlzRW1wdHkoaC50aW1lb3V0KSl7ay50aW1lb3V0PWgudGltZW91dH19ay5zaG93TG9hZGluZygpO2lmKCFsKXtrLmRlZmF1bHRVcmw9aX1pZihFeHQuaXNGdW5jdGlvbihpKSl7aT1pLmNhbGwoayl9dmFyIG09RXh0LmFwcGx5KHt9LHt1cmw6aSxwYXJhbXM6KEV4dC5pc0Z1bmN0aW9uKG4pJiZqKT9uLmNyZWF0ZURlbGVnYXRlKGopOm4sc3VjY2VzczphLGZhaWx1cmU6ZSxzY29wZTprLGNhbGxiYWNrOnVuZGVmaW5lZCx0aW1lb3V0OihrLnRpbWVvdXQqMTAwMCksZGlzYWJsZUNhY2hpbmc6ay5kaXNhYmxlQ2FjaGluZyxhcmd1bWVudDp7b3B0aW9uczpoLHVybDppLGZvcm06bnVsbCxjYWxsYmFjazpwLHNjb3BlOmp8fHdpbmRvdyxwYXJhbXM6bn19LGgpO2sudHJhbnNhY3Rpb249RXh0LkFqYXgucmVxdWVzdChtKX19LGZvcm1VcGRhdGU6ZnVuY3Rpb24oayxoLGosbCl7dmFyIGk9dGhpcztpZihpLmZpcmVFdmVudChiLGkuZWwsayxoKSE9PWZhbHNlKXtpZihFeHQuaXNGdW5jdGlvbihoKSl7aD1oLmNhbGwoaSl9az1FeHQuZ2V0RG9tKGspO2kudHJhbnNhY3Rpb249RXh0LkFqYXgucmVxdWVzdCh7Zm9ybTprLHVybDpoLHN1Y2Nlc3M6YSxmYWlsdXJlOmUsc2NvcGU6aSx0aW1lb3V0OihpLnRpbWVvdXQqMTAwMCksYXJndW1lbnQ6e3VybDpoLGZvcm06ayxjYWxsYmFjazpsLHJlc2V0Omp9fSk7aS5zaG93TG9hZGluZy5kZWZlcigxLGkpfX0sc3RhcnRBdXRvUmVmcmVzaDpmdW5jdGlvbihpLGosbCxtLGgpe3ZhciBrPXRoaXM7aWYoaCl7ay51cGRhdGUoanx8ay5kZWZhdWx0VXJsLGwsbSx0cnVlKX1pZihrLmF1dG9SZWZyZXNoUHJvY0lkKXtjbGVhckludGVydmFsKGsuYXV0b1JlZnJlc2hQcm9jSWQpfWsuYXV0b1JlZnJlc2hQcm9jSWQ9c2V0SW50ZXJ2YWwoay51cGRhdGUuY3JlYXRlRGVsZWdhdGUoayxbanx8ay5kZWZhdWx0VXJsLGwsbSx0cnVlXSksaSoxMDAwKX0sc3RvcEF1dG9SZWZyZXNoOmZ1bmN0aW9uKCl7aWYodGhpcy5hdXRvUmVmcmVzaFByb2NJZCl7Y2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9SZWZyZXNoUHJvY0lkKTtkZWxldGUgdGhpcy5hdXRvUmVmcmVzaFByb2NJZH19LGlzQXV0b1JlZnJlc2hpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmF1dG9SZWZyZXNoUHJvY0lkfSxzaG93TG9hZGluZzpmdW5jdGlvbigpe2lmKHRoaXMuc2hvd0xvYWRJbmRpY2F0b3Ipe3RoaXMuZWwuZG9tLmlubmVySFRNTD10aGlzLmluZGljYXRvclRleHR9fSxhYm9ydDpmdW5jdGlvbigpe2lmKHRoaXMudHJhbnNhY3Rpb24pe0V4dC5BamF4LmFib3J0KHRoaXMudHJhbnNhY3Rpb24pfX0saXNVcGRhdGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zYWN0aW9uP0V4dC5BamF4LmlzTG9hZGluZyh0aGlzLnRyYW5zYWN0aW9uKTpmYWxzZX0scmVmcmVzaDpmdW5jdGlvbihoKXtpZih0aGlzLmRlZmF1bHRVcmwpe3RoaXMudXBkYXRlKHRoaXMuZGVmYXVsdFVybCxudWxsLGgsdHJ1ZSl9fX19KCkpO0V4dC5VcGRhdGVyLmRlZmF1bHRzPXt0aW1lb3V0OjMwLGRpc2FibGVDYWNoaW5nOmZhbHNlLHNob3dMb2FkSW5kaWNhdG9yOnRydWUsaW5kaWNhdG9yVGV4dDonPGRpdiBjbGFzcz0ibG9hZGluZy1pbmRpY2F0b3IiPkxvYWRpbmcuLi48L2Rpdj4nLGxvYWRTY3JpcHRzOmZhbHNlLHNzbEJsYW5rVXJsOkV4dC5TU0xfU0VDVVJFX1VSTH07RXh0LlVwZGF0ZXIudXBkYXRlRWxlbWVudD1mdW5jdGlvbihkLGMsZSxiKXt2YXIgYT1FeHQuZ2V0KGQpLmdldFVwZGF0ZXIoKTtFeHQuYXBwbHkoYSxiKTthLnVwZGF0ZShjLGUsYj9iLmNhbGxiYWNrOm51bGwpfTtFeHQuVXBkYXRlci5CYXNpY1JlbmRlcmVyPWZ1bmN0aW9uKCl7fTtFeHQuVXBkYXRlci5CYXNpY1JlbmRlcmVyLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGMsYSxiLGQpe2MudXBkYXRlKGEucmVzcG9uc2VUZXh0LGIubG9hZFNjcmlwdHMsZCl9fTsoZnVuY3Rpb24oKXtEYXRlLnVzZVN0cmljdD1mYWxzZTtmdW5jdGlvbiBiKGQpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZC5yZXBsYWNlKC9ceyhcZCspXH0vZyxmdW5jdGlvbihlLGcpe3JldHVybiBjW2ddfSl9RGF0ZS5mb3JtYXRDb2RlVG9SZWdleD1mdW5jdGlvbihkLGMpe3ZhciBlPURhdGUucGFyc2VDb2Rlc1tkXTtpZihlKXtlPXR5cGVvZiBlPT0iZnVuY3Rpb24iP2UoKTplO0RhdGUucGFyc2VDb2Rlc1tkXT1lfXJldHVybiBlP0V4dC5hcHBseUlmKHtjOmUuYz9iKGUuYyxjfHwiezB9Iik6ZS5jfSxlKTp7ZzowLGM6bnVsbCxzOkV4dC5lc2NhcGVSZShkKX19O3ZhciBhPURhdGUuZm9ybWF0Q29kZVRvUmVnZXg7RXh0LmFwcGx5KERhdGUse3BhcnNlRnVuY3Rpb25zOnsiTSQiOmZ1bmN0aW9uKGQsYyl7dmFyIGU9bmV3IFJlZ0V4cCgiXFwvRGF0ZVxcKChbLStdKT8oXFxkKykoPzpbKy1dXFxkezR9KT9cXClcXC8iKTt2YXIgZz0oZHx8IiIpLm1hdGNoKGUpO3JldHVybiBnP25ldyBEYXRlKCgoZ1sxXXx8IiIpK2dbMl0pKjEpOm51bGx9fSxwYXJzZVJlZ2V4ZXM6W10sZm9ybWF0RnVuY3Rpb25zOnsiTSQiOmZ1bmN0aW9uKCl7cmV0dXJuIlxcL0RhdGUoIit0aGlzLmdldFRpbWUoKSsiKVxcLyJ9fSx5MmtZZWFyOjUwLE1JTExJOiJtcyIsU0VDT05EOiJzIixNSU5VVEU6Im1pIixIT1VSOiJoIixEQVk6ImQiLE1PTlRIOiJtbyIsWUVBUjoieSIsZGVmYXVsdHM6e30sZGF5TmFtZXM6WyJTdW5kYXkiLCJNb25kYXkiLCJUdWVzZGF5IiwiV2VkbmVzZGF5IiwiVGh1cnNkYXkiLCJGcmlkYXkiLCJTYXR1cmRheSJdLG1vbnRoTmFtZXM6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLG1vbnRoTnVtYmVyczp7SmFuOjAsRmViOjEsTWFyOjIsQXByOjMsTWF5OjQsSnVuOjUsSnVsOjYsQXVnOjcsU2VwOjgsT2N0OjksTm92OjEwLERlYzoxMX0sZ2V0U2hvcnRNb250aE5hbWU6ZnVuY3Rpb24oYyl7cmV0dXJuIERhdGUubW9udGhOYW1lc1tjXS5zdWJzdHJpbmcoMCwzKX0sZ2V0U2hvcnREYXlOYW1lOmZ1bmN0aW9uKGMpe3JldHVybiBEYXRlLmRheU5hbWVzW2NdLnN1YnN0cmluZygwLDMpfSxnZXRNb250aE51bWJlcjpmdW5jdGlvbihjKXtyZXR1cm4gRGF0ZS5tb250aE51bWJlcnNbYy5zdWJzdHJpbmcoMCwxKS50b1VwcGVyQ2FzZSgpK2Muc3Vic3RyaW5nKDEsMykudG9Mb3dlckNhc2UoKV19LGZvcm1hdENvbnRhaW5zSG91ckluZm86KGZ1bmN0aW9uKCl7dmFyIGQ9LyhcXC4pL2csYz0vKFtnR2hIaXN1Y1VPUFpdfE1cJCkvO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gYy50ZXN0KGUucmVwbGFjZShkLCIiKSl9fSkoKSxmb3JtYXRDb2Rlczp7ZDoiU3RyaW5nLmxlZnRQYWQodGhpcy5nZXREYXRlKCksIDIsICcwJykiLEQ6IkRhdGUuZ2V0U2hvcnREYXlOYW1lKHRoaXMuZ2V0RGF5KCkpIixqOiJ0aGlzLmdldERhdGUoKSIsbDoiRGF0ZS5kYXlOYW1lc1t0aGlzLmdldERheSgpXSIsTjoiKHRoaXMuZ2V0RGF5KCkgPyB0aGlzLmdldERheSgpIDogNykiLFM6InRoaXMuZ2V0U3VmZml4KCkiLHc6InRoaXMuZ2V0RGF5KCkiLHo6InRoaXMuZ2V0RGF5T2ZZZWFyKCkiLFc6IlN0cmluZy5sZWZ0UGFkKHRoaXMuZ2V0V2Vla09mWWVhcigpLCAyLCAnMCcpIixGOiJEYXRlLm1vbnRoTmFtZXNbdGhpcy5nZXRNb250aCgpXSIsbToiU3RyaW5nLmxlZnRQYWQodGhpcy5nZXRNb250aCgpICsgMSwgMiwgJzAnKSIsTToiRGF0ZS5nZXRTaG9ydE1vbnRoTmFtZSh0aGlzLmdldE1vbnRoKCkpIixuOiIodGhpcy5nZXRNb250aCgpICsgMSkiLHQ6InRoaXMuZ2V0RGF5c0luTW9udGgoKSIsTDoiKHRoaXMuaXNMZWFwWWVhcigpID8gMSA6IDApIixvOiIodGhpcy5nZXRGdWxsWWVhcigpICsgKHRoaXMuZ2V0V2Vla09mWWVhcigpID09IDEgJiYgdGhpcy5nZXRNb250aCgpID4gMCA/ICsxIDogKHRoaXMuZ2V0V2Vla09mWWVhcigpID49IDUyICYmIHRoaXMuZ2V0TW9udGgoKSA8IDExID8gLTEgOiAwKSkpIixZOiJTdHJpbmcubGVmdFBhZCh0aGlzLmdldEZ1bGxZZWFyKCksIDQsICcwJykiLHk6IignJyArIHRoaXMuZ2V0RnVsbFllYXIoKSkuc3Vic3RyaW5nKDIsIDQpIixhOiIodGhpcy5nZXRIb3VycygpIDwgMTIgPyAnYW0nIDogJ3BtJykiLEE6Iih0aGlzLmdldEhvdXJzKCkgPCAxMiA/ICdBTScgOiAnUE0nKSIsZzoiKCh0aGlzLmdldEhvdXJzKCkgJSAxMikgPyB0aGlzLmdldEhvdXJzKCkgJSAxMiA6IDEyKSIsRzoidGhpcy5nZXRIb3VycygpIixoOiJTdHJpbmcubGVmdFBhZCgodGhpcy5nZXRIb3VycygpICUgMTIpID8gdGhpcy5nZXRIb3VycygpICUgMTIgOiAxMiwgMiwgJzAnKSIsSDoiU3RyaW5nLmxlZnRQYWQodGhpcy5nZXRIb3VycygpLCAyLCAnMCcpIixpOiJTdHJpbmcubGVmdFBhZCh0aGlzLmdldE1pbnV0ZXMoKSwgMiwgJzAnKSIsczoiU3RyaW5nLmxlZnRQYWQodGhpcy5nZXRTZWNvbmRzKCksIDIsICcwJykiLHU6IlN0cmluZy5sZWZ0UGFkKHRoaXMuZ2V0TWlsbGlzZWNvbmRzKCksIDMsICcwJykiLE86InRoaXMuZ2V0R01UT2Zmc2V0KCkiLFA6InRoaXMuZ2V0R01UT2Zmc2V0KHRydWUpIixUOiJ0aGlzLmdldFRpbWV6b25lKCkiLFo6Iih0aGlzLmdldFRpbWV6b25lT2Zmc2V0KCkgKiAtNjApIixjOmZ1bmN0aW9uKCl7Zm9yKHZhciBrPSJZLW0tZFRIOmk6c1AiLGg9W10sZz0wLGQ9ay5sZW5ndGg7ZzxkOysrZyl7dmFyIGo9ay5jaGFyQXQoZyk7aC5wdXNoKGo9PSJUIj8iJ1QnIjpEYXRlLmdldEZvcm1hdENvZGUoaikpfXJldHVybiBoLmpvaW4oIiArICIpfSxVOiJNYXRoLnJvdW5kKHRoaXMuZ2V0VGltZSgpIC8gMTAwMCkifSxpc1ZhbGlkOmZ1bmN0aW9uKG8sYyxuLGssZyxqLGUpe2s9a3x8MDtnPWd8fDA7aj1qfHwwO2U9ZXx8MDt2YXIgbD1uZXcgRGF0ZShvPDEwMD8xMDA6byxjLTEsbixrLGcsaixlKS5hZGQoRGF0ZS5ZRUFSLG88MTAwP28tMTAwOjApO3JldHVybiBvPT1sLmdldEZ1bGxZZWFyKCkmJmM9PWwuZ2V0TW9udGgoKSsxJiZuPT1sLmdldERhdGUoKSYmaz09bC5nZXRIb3VycygpJiZnPT1sLmdldE1pbnV0ZXMoKSYmaj09bC5nZXRTZWNvbmRzKCkmJmU9PWwuZ2V0TWlsbGlzZWNvbmRzKCl9LHBhcnNlRGF0ZTpmdW5jdGlvbihkLGcsYyl7dmFyIGU9RGF0ZS5wYXJzZUZ1bmN0aW9ucztpZihlW2ddPT1udWxsKXtEYXRlLmNyZWF0ZVBhcnNlcihnKX1yZXR1cm4gZVtnXShkLEV4dC5pc0RlZmluZWQoYyk/YzpEYXRlLnVzZVN0cmljdCl9LGdldEZvcm1hdENvZGU6ZnVuY3Rpb24oZCl7dmFyIGM9RGF0ZS5mb3JtYXRDb2Rlc1tkXTtpZihjKXtjPXR5cGVvZiBjPT0iZnVuY3Rpb24iP2MoKTpjO0RhdGUuZm9ybWF0Q29kZXNbZF09Y31yZXR1cm4gY3x8KCInIitTdHJpbmcuZXNjYXBlKGQpKyInIil9LGNyZWF0ZUZvcm1hdDpmdW5jdGlvbihoKXt2YXIgZz1bXSxjPWZhbHNlLGU9IiI7Zm9yKHZhciBkPTA7ZDxoLmxlbmd0aDsrK2Qpe2U9aC5jaGFyQXQoZCk7aWYoIWMmJmU9PSJcXCIpe2M9dHJ1ZX1lbHNle2lmKGMpe2M9ZmFsc2U7Zy5wdXNoKCInIitTdHJpbmcuZXNjYXBlKGUpKyInIil9ZWxzZXtnLnB1c2goRGF0ZS5nZXRGb3JtYXRDb2RlKGUpKX19fURhdGUuZm9ybWF0RnVuY3Rpb25zW2hdPW5ldyBGdW5jdGlvbigicmV0dXJuICIrZy5qb2luKCIrIikpfSxjcmVhdGVQYXJzZXI6ZnVuY3Rpb24oKXt2YXIgYz1bInZhciBkdCwgeSwgbSwgZCwgaCwgaSwgcywgbXMsIG8sIHosIHp6LCB1LCB2LCIsImRlZiA9IERhdGUuZGVmYXVsdHMsIiwicmVzdWx0cyA9IFN0cmluZyhpbnB1dCkubWF0Y2goRGF0ZS5wYXJzZVJlZ2V4ZXNbezB9XSk7IiwiaWYocmVzdWx0cyl7IiwiezF9IiwiaWYodSAhPSBudWxsKXsiLCJ2ID0gbmV3IERhdGUodSAqIDEwMDApOyIsIn1lbHNleyIsImR0ID0gKG5ldyBEYXRlKCkpLmNsZWFyVGltZSgpOyIsInkgPSBFeHQubnVtKHksIEV4dC5udW0oZGVmLnksIGR0LmdldEZ1bGxZZWFyKCkpKTsiLCJtID0gRXh0Lm51bShtLCBFeHQubnVtKGRlZi5tIC0gMSwgZHQuZ2V0TW9udGgoKSkpOyIsImQgPSBFeHQubnVtKGQsIEV4dC5udW0oZGVmLmQsIGR0LmdldERhdGUoKSkpOyIsImggID0gRXh0Lm51bShoLCBFeHQubnVtKGRlZi5oLCBkdC5nZXRIb3VycygpKSk7IiwiaSAgPSBFeHQubnVtKGksIEV4dC5udW0oZGVmLmksIGR0LmdldE1pbnV0ZXMoKSkpOyIsInMgID0gRXh0Lm51bShzLCBFeHQubnVtKGRlZi5zLCBkdC5nZXRTZWNvbmRzKCkpKTsiLCJtcyA9IEV4dC5udW0obXMsIEV4dC5udW0oZGVmLm1zLCBkdC5nZXRNaWxsaXNlY29uZHMoKSkpOyIsImlmKHogPj0gMCAmJiB5ID49IDApeyIsInYgPSBuZXcgRGF0ZSh5IDwgMTAwID8gMTAwIDogeSwgMCwgMSwgaCwgaSwgcywgbXMpLmFkZChEYXRlLllFQVIsIHkgPCAxMDAgPyB5IC0gMTAwIDogMCk7IiwidiA9ICFzdHJpY3Q/IHYgOiAoc3RyaWN0ID09PSB0cnVlICYmICh6IDw9IDM2NCB8fCAodi5pc0xlYXBZZWFyKCkgJiYgeiA8PSAzNjUpKT8gdi5hZGQoRGF0ZS5EQVksIHopIDogbnVsbCk7IiwifWVsc2UgaWYoc3RyaWN0ID09PSB0cnVlICYmICFEYXRlLmlzVmFsaWQoeSwgbSArIDEsIGQsIGgsIGksIHMsIG1zKSl7IiwidiA9IG51bGw7IiwifWVsc2V7IiwidiA9IG5ldyBEYXRlKHkgPCAxMDAgPyAxMDAgOiB5LCBtLCBkLCBoLCBpLCBzLCBtcykuYWRkKERhdGUuWUVBUiwgeSA8IDEwMCA/IHkgLSAxMDAgOiAwKTsiLCJ9IiwifSIsIn0iLCJpZih2KXsiLCJpZih6eiAhPSBudWxsKXsiLCJ2ID0gdi5hZGQoRGF0ZS5TRUNPTkQsIC12LmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MCAtIHp6KTsiLCJ9ZWxzZSBpZihvKXsiLCJ2ID0gdi5hZGQoRGF0ZS5NSU5VVEUsIC12LmdldFRpbWV6b25lT2Zmc2V0KCkgKyAoc24gPT0gJysnPyAtMSA6IDEpICogKGhyICogNjAgKyBtbikpOyIsIn0iLCJ9IiwicmV0dXJuIHY7Il0uam9pbigiXG4iKTtyZXR1cm4gZnVuY3Rpb24obSl7dmFyIGU9RGF0ZS5wYXJzZVJlZ2V4ZXMubGVuZ3RoLG89MSxnPVtdLGw9W10saz1mYWxzZSxkPSIiLGo9MCxoLG47Zm9yKDtqPG0ubGVuZ3RoOysrail7ZD1tLmNoYXJBdChqKTtpZighayYmZD09IlxcIil7az10cnVlfWVsc2V7aWYoayl7az1mYWxzZTtsLnB1c2goU3RyaW5nLmVzY2FwZShkKSl9ZWxzZXtoPWEoZCxvKTtvKz1oLmc7bC5wdXNoKGgucyk7aWYoaC5nJiZoLmMpe2lmKGguY2FsY0xhc3Qpe249aC5jfWVsc2V7Zy5wdXNoKGguYyl9fX19fWlmKG4pe2cucHVzaChuKX1EYXRlLnBhcnNlUmVnZXhlc1tlXT1uZXcgUmVnRXhwKCJeIitsLmpvaW4oIiIpKyIkIiwiaSIpO0RhdGUucGFyc2VGdW5jdGlvbnNbbV09bmV3IEZ1bmN0aW9uKCJpbnB1dCIsInN0cmljdCIsYihjLGUsZy5qb2luKCIiKSkpfX0oKSxwYXJzZUNvZGVzOntkOntnOjEsYzoiZCA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoXFxkezJ9KSJ9LGo6e2c6MSxjOiJkID0gcGFyc2VJbnQocmVzdWx0c1t7MH1dLCAxMCk7XG4iLHM6IihcXGR7MSwyfSkifSxEOmZ1bmN0aW9uKCl7Zm9yKHZhciBjPVtdLGQ9MDtkPDc7Yy5wdXNoKERhdGUuZ2V0U2hvcnREYXlOYW1lKGQpKSwrK2Qpe31yZXR1cm57ZzowLGM6bnVsbCxzOiIoPzoiK2Muam9pbigifCIpKyIpIn19LGw6ZnVuY3Rpb24oKXtyZXR1cm57ZzowLGM6bnVsbCxzOiIoPzoiK0RhdGUuZGF5TmFtZXMuam9pbigifCIpKyIpIn19LE46e2c6MCxjOm51bGwsczoiWzEtN10ifSxTOntnOjAsYzpudWxsLHM6Iig/OnN0fG5kfHJkfHRoKSJ9LHc6e2c6MCxjOm51bGwsczoiWzAtNl0ifSx6OntnOjEsYzoieiA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoXFxkezEsM30pIn0sVzp7ZzowLGM6bnVsbCxzOiIoPzpcXGR7Mn0pIn0sRjpmdW5jdGlvbigpe3JldHVybntnOjEsYzoibSA9IHBhcnNlSW50KERhdGUuZ2V0TW9udGhOdW1iZXIocmVzdWx0c1t7MH1dKSwgMTApO1xuIixzOiIoIitEYXRlLm1vbnRoTmFtZXMuam9pbigifCIpKyIpIn19LE06ZnVuY3Rpb24oKXtmb3IodmFyIGM9W10sZD0wO2Q8MTI7Yy5wdXNoKERhdGUuZ2V0U2hvcnRNb250aE5hbWUoZCkpLCsrZCl7fXJldHVybiBFeHQuYXBwbHlJZih7czoiKCIrYy5qb2luKCJ8IikrIikifSxhKCJGIikpfSxtOntnOjEsYzoibSA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApIC0gMTtcbiIsczoiKFxcZHsyfSkifSxuOntnOjEsYzoibSA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApIC0gMTtcbiIsczoiKFxcZHsxLDJ9KSJ9LHQ6e2c6MCxjOm51bGwsczoiKD86XFxkezJ9KSJ9LEw6e2c6MCxjOm51bGwsczoiKD86MXwwKSJ9LG86ZnVuY3Rpb24oKXtyZXR1cm4gYSgiWSIpfSxZOntnOjEsYzoieSA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoXFxkezR9KSJ9LHk6e2c6MSxjOiJ2YXIgdHkgPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbnkgPSB0eSA+IERhdGUueTJrWWVhciA/IDE5MDAgKyB0eSA6IDIwMDAgKyB0eTtcbiIsczoiKFxcZHsxLDJ9KSJ9LGE6ZnVuY3Rpb24oKXtyZXR1cm4gYSgiQSIpfSxBOntjYWxjTGFzdDp0cnVlLGc6MSxjOiJpZiAoLyhhbSkvaS50ZXN0KHJlc3VsdHNbezB9XSkpIHtcbmlmICghaCB8fCBoID09IDEyKSB7IGggPSAwOyB9XG59IGVsc2UgeyBpZiAoIWggfHwgaCA8IDEyKSB7IGggPSAoaCB8fCAwKSArIDEyOyB9fSIsczoiKEFNfFBNfGFtfHBtKSJ9LGc6ZnVuY3Rpb24oKXtyZXR1cm4gYSgiRyIpfSxHOntnOjEsYzoiaCA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoXFxkezEsMn0pIn0saDpmdW5jdGlvbigpe3JldHVybiBhKCJIIil9LEg6e2c6MSxjOiJoID0gcGFyc2VJbnQocmVzdWx0c1t7MH1dLCAxMCk7XG4iLHM6IihcXGR7Mn0pIn0saTp7ZzoxLGM6ImkgPSBwYXJzZUludChyZXN1bHRzW3swfV0sIDEwKTtcbiIsczoiKFxcZHsyfSkifSxzOntnOjEsYzoicyA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoXFxkezJ9KSJ9LHU6e2c6MSxjOiJtcyA9IHJlc3VsdHNbezB9XTsgbXMgPSBwYXJzZUludChtcywgMTApL01hdGgucG93KDEwLCBtcy5sZW5ndGggLSAzKTtcbiIsczoiKFxcZCspIn0sTzp7ZzoxLGM6WyJvID0gcmVzdWx0c1t7MH1dOyIsInZhciBzbiA9IG8uc3Vic3RyaW5nKDAsMSksIiwiaHIgPSBvLnN1YnN0cmluZygxLDMpKjEgKyBNYXRoLmZsb29yKG8uc3Vic3RyaW5nKDMsNSkgLyA2MCksIiwibW4gPSBvLnN1YnN0cmluZygzLDUpICUgNjA7IiwibyA9ICgoLTEyIDw9IChocio2MCArIG1uKS82MCkgJiYgKChocio2MCArIG1uKS82MCA8PSAxNCkpPyAoc24gKyBTdHJpbmcubGVmdFBhZChociwgMiwgJzAnKSArIFN0cmluZy5sZWZ0UGFkKG1uLCAyLCAnMCcpKSA6IG51bGw7XG4iXS5qb2luKCJcbiIpLHM6IihbKy1dXFxkezR9KSJ9LFA6e2c6MSxjOlsibyA9IHJlc3VsdHNbezB9XTsiLCJ2YXIgc24gPSBvLnN1YnN0cmluZygwLDEpLCIsImhyID0gby5zdWJzdHJpbmcoMSwzKSoxICsgTWF0aC5mbG9vcihvLnN1YnN0cmluZyg0LDYpIC8gNjApLCIsIm1uID0gby5zdWJzdHJpbmcoNCw2KSAlIDYwOyIsIm8gPSAoKC0xMiA8PSAoaHIqNjAgKyBtbikvNjApICYmICgoaHIqNjAgKyBtbikvNjAgPD0gMTQpKT8gKHNuICsgU3RyaW5nLmxlZnRQYWQoaHIsIDIsICcwJykgKyBTdHJpbmcubGVmdFBhZChtbiwgMiwgJzAnKSkgOiBudWxsO1xuIl0uam9pbigiXG4iKSxzOiIoWystXVxcZHsyfTpcXGR7Mn0pIn0sVDp7ZzowLGM6bnVsbCxzOiJbQS1aXXsxLDR9In0sWjp7ZzoxLGM6Inp6ID0gcmVzdWx0c1t7MH1dICogMTtcbnp6ID0gKC00MzIwMCA8PSB6eiAmJiB6eiA8PSA1MDQwMCk/IHp6IDogbnVsbDtcbiIsczoiKFsrLV0/XFxkezEsNX0pIn0sYzpmdW5jdGlvbigpe3ZhciBlPVtdLGM9W2EoIlkiLDEpLGEoIm0iLDIpLGEoImQiLDMpLGEoImgiLDQpLGEoImkiLDUpLGEoInMiLDYpLHtjOiJtcyA9IHJlc3VsdHNbN10gfHwgJzAnOyBtcyA9IHBhcnNlSW50KG1zLCAxMCkvTWF0aC5wb3coMTAsIG1zLmxlbmd0aCAtIDMpO1xuIn0se2M6WyJpZihyZXN1bHRzWzhdKSB7IiwiaWYocmVzdWx0c1s4XSA9PSAnWicpeyIsInp6ID0gMDsiLCJ9ZWxzZSBpZiAocmVzdWx0c1s4XS5pbmRleE9mKCc6JykgPiAtMSl7IixhKCJQIiw4KS5jLCJ9ZWxzZXsiLGEoIk8iLDgpLmMsIn0iLCJ9Il0uam9pbigiXG4iKX1dO2Zvcih2YXIgZz0wLGQ9Yy5sZW5ndGg7ZzxkOysrZyl7ZS5wdXNoKGNbZ10uYyl9cmV0dXJue2c6MSxjOmUuam9pbigiIiksczpbY1swXS5zLCIoPzoiLCItIixjWzFdLnMsIig/OiIsIi0iLGNbMl0ucywiKD86IiwiKD86VHwgKT8iLGNbM10ucywiOiIsY1s0XS5zLCIoPzo6IixjWzVdLnMsIik/IiwiKD86KD86XFwufCwpKFxcZCspKT8iLCIoWnwoPzpbLStdXFxkezJ9KD86Oik/XFxkezJ9KSk/IiwiKT8iLCIpPyIsIik/Il0uam9pbigiIil9fSxVOntnOjEsYzoidSA9IHBhcnNlSW50KHJlc3VsdHNbezB9XSwgMTApO1xuIixzOiIoLT9cXGQrKSJ9fX0pfSgpKTtFeHQuYXBwbHkoRGF0ZS5wcm90b3R5cGUse2RhdGVGb3JtYXQ6ZnVuY3Rpb24oYSl7aWYoRGF0ZS5mb3JtYXRGdW5jdGlvbnNbYV09PW51bGwpe0RhdGUuY3JlYXRlRm9ybWF0KGEpfXJldHVybiBEYXRlLmZvcm1hdEZ1bmN0aW9uc1thXS5jYWxsKHRoaXMpfSxnZXRUaW1lem9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvU3RyaW5nKCkucmVwbGFjZSgvXi4qICg/OlwoKC4qKVwpfChbQS1aXXsxLDR9KSg/OltcLStdWzAtOV17NH0pPyg/OiAtP1xkKyk/KSQvLCIkMSQyIikucmVwbGFjZSgvW15BLVpdL2csIiIpfSxnZXRHTVRPZmZzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMuZ2V0VGltZXpvbmVPZmZzZXQoKT4wPyItIjoiKyIpK1N0cmluZy5sZWZ0UGFkKE1hdGguZmxvb3IoTWF0aC5hYnModGhpcy5nZXRUaW1lem9uZU9mZnNldCgpKS82MCksMiwiMCIpKyhhPyI6IjoiIikrU3RyaW5nLmxlZnRQYWQoTWF0aC5hYnModGhpcy5nZXRUaW1lem9uZU9mZnNldCgpJTYwKSwyLCIwIil9LGdldERheU9mWWVhcjpmdW5jdGlvbigpe3ZhciBiPTAsZT10aGlzLmNsb25lKCksYT10aGlzLmdldE1vbnRoKCksYztmb3IoYz0wLGUuc2V0RGF0ZSgxKSxlLnNldE1vbnRoKDApO2M8YTtlLnNldE1vbnRoKCsrYykpe2IrPWUuZ2V0RGF5c0luTW9udGgoKX1yZXR1cm4gYit0aGlzLmdldERhdGUoKS0xfSxnZXRXZWVrT2ZZZWFyOmZ1bmN0aW9uKCl7dmFyIGE9ODY0MDAwMDAsYj03KmE7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9RGF0ZS5VVEModGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSx0aGlzLmdldERhdGUoKSszKS9hLGM9TWF0aC5mbG9vcihkLzcpLGU9bmV3IERhdGUoYypiKS5nZXRVVENGdWxsWWVhcigpO3JldHVybiBjLU1hdGguZmxvb3IoRGF0ZS5VVEMoZSwwLDcpL2IpKzF9fSgpLGlzTGVhcFllYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldEZ1bGxZZWFyKCk7cmV0dXJuICEhKChhJjMpPT0wJiYoYSUxMDB8fChhJTQwMD09MCYmYSkpKX0sZ2V0Rmlyc3REYXlPZk1vbnRoOmZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMuZ2V0RGF5KCktKHRoaXMuZ2V0RGF0ZSgpLTEpKSU3O3JldHVybihhPDApPyhhKzcpOmF9LGdldExhc3REYXlPZk1vbnRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGFzdERhdGVPZk1vbnRoKCkuZ2V0RGF5KCl9LGdldEZpcnN0RGF0ZU9mTW9udGg6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwxKX0sZ2V0TGFzdERhdGVPZk1vbnRoOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSx0aGlzLmdldE1vbnRoKCksdGhpcy5nZXREYXlzSW5Nb250aCgpKX0sZ2V0RGF5c0luTW9udGg6ZnVuY3Rpb24oKXt2YXIgYT1bMzEsMjgsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdO3JldHVybiBmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0TW9udGgoKTtyZXR1cm4gYj09MSYmdGhpcy5pc0xlYXBZZWFyKCk/Mjk6YVtiXX19KCksZ2V0U3VmZml4OmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuZ2V0RGF0ZSgpKXtjYXNlIDE6Y2FzZSAyMTpjYXNlIDMxOnJldHVybiJzdCI7Y2FzZSAyOmNhc2UgMjI6cmV0dXJuIm5kIjtjYXNlIDM6Y2FzZSAyMzpyZXR1cm4icmQiO2RlZmF1bHQ6cmV0dXJuInRoIn19LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0VGltZSgpKX0saXNEU1Q6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLDAsMSkuZ2V0VGltZXpvbmVPZmZzZXQoKSE9dGhpcy5nZXRUaW1lem9uZU9mZnNldCgpfSxjbGVhclRpbWU6ZnVuY3Rpb24oZyl7aWYoZyl7cmV0dXJuIHRoaXMuY2xvbmUoKS5jbGVhclRpbWUoKX12YXIgYj10aGlzLmdldERhdGUoKTt0aGlzLnNldEhvdXJzKDApO3RoaXMuc2V0TWludXRlcygwKTt0aGlzLnNldFNlY29uZHMoMCk7dGhpcy5zZXRNaWxsaXNlY29uZHMoMCk7aWYodGhpcy5nZXREYXRlKCkhPWIpe2Zvcih2YXIgYT0xLGU9dGhpcy5hZGQoRGF0ZS5IT1VSLGEpO2UuZ2V0RGF0ZSgpIT1iO2ErKyxlPXRoaXMuYWRkKERhdGUuSE9VUixhKSl7fXRoaXMuc2V0RGF0ZShiKTt0aGlzLnNldEhvdXJzKGUuZ2V0SG91cnMoKSl9cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbihiLGMpe3ZhciBlPXRoaXMuY2xvbmUoKTtpZighYnx8Yz09PTApe3JldHVybiBlfXN3aXRjaChiLnRvTG93ZXJDYXNlKCkpe2Nhc2UgRGF0ZS5NSUxMSTplLnNldE1pbGxpc2Vjb25kcyh0aGlzLmdldE1pbGxpc2Vjb25kcygpK2MpO2JyZWFrO2Nhc2UgRGF0ZS5TRUNPTkQ6ZS5zZXRTZWNvbmRzKHRoaXMuZ2V0U2Vjb25kcygpK2MpO2JyZWFrO2Nhc2UgRGF0ZS5NSU5VVEU6ZS5zZXRNaW51dGVzKHRoaXMuZ2V0TWludXRlcygpK2MpO2JyZWFrO2Nhc2UgRGF0ZS5IT1VSOmUuc2V0SG91cnModGhpcy5nZXRIb3VycygpK2MpO2JyZWFrO2Nhc2UgRGF0ZS5EQVk6ZS5zZXREYXRlKHRoaXMuZ2V0RGF0ZSgpK2MpO2JyZWFrO2Nhc2UgRGF0ZS5NT05USDp2YXIgYT10aGlzLmdldERhdGUoKTtpZihhPjI4KXthPU1hdGgubWluKGEsdGhpcy5nZXRGaXJzdERhdGVPZk1vbnRoKCkuYWRkKCJtbyIsYykuZ2V0TGFzdERhdGVPZk1vbnRoKCkuZ2V0RGF0ZSgpKX1lLnNldERhdGUoYSk7ZS5zZXRNb250aCh0aGlzLmdldE1vbnRoKCkrYyk7YnJlYWs7Y2FzZSBEYXRlLllFQVI6ZS5zZXRGdWxsWWVhcih0aGlzLmdldEZ1bGxZZWFyKCkrYyk7YnJlYWt9cmV0dXJuIGV9LGJldHdlZW46ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzLmdldFRpbWUoKTtyZXR1cm4gYy5nZXRUaW1lKCk8PWImJmI8PWEuZ2V0VGltZSgpfX0pO0RhdGUucHJvdG90eXBlLmZvcm1hdD1EYXRlLnByb3RvdHlwZS5kYXRlRm9ybWF0O2lmKEV4dC5pc1NhZmFyaSYmKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1dlYktpdFwvKFxkKykvKVsxXXx8TmFOKTw0MjApe0V4dC5hcHBseShEYXRlLnByb3RvdHlwZSx7X3hNb250aDpEYXRlLnByb3RvdHlwZS5zZXRNb250aCxfeERhdGU6RGF0ZS5wcm90b3R5cGUuc2V0RGF0ZSxzZXRNb250aDpmdW5jdGlvbihhKXtpZihhPD0tMSl7dmFyIGQ9TWF0aC5jZWlsKC1hKSxjPU1hdGguY2VpbChkLzEyKSxiPShkJTEyKT8xMi1kJTEyOjA7dGhpcy5zZXRGdWxsWWVhcih0aGlzLmdldEZ1bGxZZWFyKCktYyk7cmV0dXJuIHRoaXMuX3hNb250aChiKX1lbHNle3JldHVybiB0aGlzLl94TW9udGgoYSl9fSxzZXREYXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldFRpbWUodGhpcy5nZXRUaW1lKCktKHRoaXMuZ2V0RGF0ZSgpLWEpKjg2NDAwMDAwKX19KX1FeHQudXRpbC5NaXhlZENvbGxlY3Rpb249ZnVuY3Rpb24oYixhKXt0aGlzLml0ZW1zPVtdO3RoaXMubWFwPXt9O3RoaXMua2V5cz1bXTt0aGlzLmxlbmd0aD0wO3RoaXMuYWRkRXZlbnRzKCJjbGVhciIsImFkZCIsInJlcGxhY2UiLCJyZW1vdmUiLCJzb3J0Iik7dGhpcy5hbGxvd0Z1bmN0aW9ucz1iPT09dHJ1ZTtpZihhKXt0aGlzLmdldEtleT1hfUV4dC51dGlsLk1peGVkQ29sbGVjdGlvbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9O0V4dC5leHRlbmQoRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uLEV4dC51dGlsLk9ic2VydmFibGUse2FsbG93RnVuY3Rpb25zOmZhbHNlLGFkZDpmdW5jdGlvbihiLGMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2M9YXJndW1lbnRzWzBdO2I9dGhpcy5nZXRLZXkoYyl9aWYodHlwZW9mIGIhPSJ1bmRlZmluZWQiJiZiIT09bnVsbCl7dmFyIGE9dGhpcy5tYXBbYl07aWYodHlwZW9mIGEhPSJ1bmRlZmluZWQiKXtyZXR1cm4gdGhpcy5yZXBsYWNlKGIsYyl9dGhpcy5tYXBbYl09Y310aGlzLmxlbmd0aCsrO3RoaXMuaXRlbXMucHVzaChjKTt0aGlzLmtleXMucHVzaChiKTt0aGlzLmZpcmVFdmVudCgiYWRkIix0aGlzLmxlbmd0aC0xLGMsYik7cmV0dXJuIGN9LGdldEtleTpmdW5jdGlvbihhKXtyZXR1cm4gYS5pZH0scmVwbGFjZTpmdW5jdGlvbihjLGQpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2Q9YXJndW1lbnRzWzBdO2M9dGhpcy5nZXRLZXkoZCl9dmFyIGE9dGhpcy5tYXBbY107aWYodHlwZW9mIGM9PSJ1bmRlZmluZWQifHxjPT09bnVsbHx8dHlwZW9mIGE9PSJ1bmRlZmluZWQiKXtyZXR1cm4gdGhpcy5hZGQoYyxkKX12YXIgYj10aGlzLmluZGV4T2ZLZXkoYyk7dGhpcy5pdGVtc1tiXT1kO3RoaXMubWFwW2NdPWQ7dGhpcy5maXJlRXZlbnQoInJlcGxhY2UiLGMsYSxkKTtyZXR1cm4gZH0sYWRkQWxsOmZ1bmN0aW9uKGUpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MXx8RXh0LmlzQXJyYXkoZSkpe3ZhciBiPWFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHM6ZTtmb3IodmFyIGQ9MCxhPWIubGVuZ3RoO2Q8YTtkKyspe3RoaXMuYWRkKGJbZF0pfX1lbHNle2Zvcih2YXIgYyBpbiBlKXtpZih0aGlzLmFsbG93RnVuY3Rpb25zfHx0eXBlb2YgZVtjXSE9ImZ1bmN0aW9uIil7dGhpcy5hZGQoYyxlW2NdKX19fX0sZWFjaDpmdW5jdGlvbihlLGQpe3ZhciBiPVtdLmNvbmNhdCh0aGlzLml0ZW1zKTtmb3IodmFyIGM9MCxhPWIubGVuZ3RoO2M8YTtjKyspe2lmKGUuY2FsbChkfHxiW2NdLGJbY10sYyxhKT09PWZhbHNlKXticmVha319fSxlYWNoS2V5OmZ1bmN0aW9uKGQsYyl7Zm9yKHZhciBiPTAsYT10aGlzLmtleXMubGVuZ3RoO2I8YTtiKyspe2QuY2FsbChjfHx3aW5kb3csdGhpcy5rZXlzW2JdLHRoaXMuaXRlbXNbYl0sYixhKX19LGZpbmQ6ZnVuY3Rpb24oZCxjKXtmb3IodmFyIGI9MCxhPXRoaXMuaXRlbXMubGVuZ3RoO2I8YTtiKyspe2lmKGQuY2FsbChjfHx3aW5kb3csdGhpcy5pdGVtc1tiXSx0aGlzLmtleXNbYl0pKXtyZXR1cm4gdGhpcy5pdGVtc1tiXX19cmV0dXJuIG51bGx9LGluc2VydDpmdW5jdGlvbihhLGIsYyl7aWYoYXJndW1lbnRzLmxlbmd0aD09Mil7Yz1hcmd1bWVudHNbMV07Yj10aGlzLmdldEtleShjKX1pZih0aGlzLmNvbnRhaW5zS2V5KGIpKXt0aGlzLnN1c3BlbmRFdmVudHMoKTt0aGlzLnJlbW92ZUtleShiKTt0aGlzLnJlc3VtZUV2ZW50cygpfWlmKGE+PXRoaXMubGVuZ3RoKXtyZXR1cm4gdGhpcy5hZGQoYixjKX10aGlzLmxlbmd0aCsrO3RoaXMuaXRlbXMuc3BsaWNlKGEsMCxjKTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCImJmIhPT1udWxsKXt0aGlzLm1hcFtiXT1jfXRoaXMua2V5cy5zcGxpY2UoYSwwLGIpO3RoaXMuZmlyZUV2ZW50KCJhZGQiLGEsYyxiKTtyZXR1cm4gY30scmVtb3ZlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZUF0KHRoaXMuaW5kZXhPZihhKSl9LHJlbW92ZUF0OmZ1bmN0aW9uKGEpe2lmKGE8dGhpcy5sZW5ndGgmJmE+PTApe3RoaXMubGVuZ3RoLS07dmFyIGM9dGhpcy5pdGVtc1thXTt0aGlzLml0ZW1zLnNwbGljZShhLDEpO3ZhciBiPXRoaXMua2V5c1thXTtpZih0eXBlb2YgYiE9InVuZGVmaW5lZCIpe2RlbGV0ZSB0aGlzLm1hcFtiXX10aGlzLmtleXMuc3BsaWNlKGEsMSk7dGhpcy5maXJlRXZlbnQoInJlbW92ZSIsYyxiKTtyZXR1cm4gY31yZXR1cm4gZmFsc2V9LHJlbW92ZUtleTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5yZW1vdmVBdCh0aGlzLmluZGV4T2ZLZXkoYSkpfSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0saW5kZXhPZjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pdGVtcy5pbmRleE9mKGEpfSxpbmRleE9mS2V5OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmtleXMuaW5kZXhPZihhKX0saXRlbTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLm1hcFtiXSxjPWEhPT11bmRlZmluZWQ/YToodHlwZW9mIGI9PSJudW1iZXIiKT90aGlzLml0ZW1zW2JdOnVuZGVmaW5lZDtyZXR1cm4gdHlwZW9mIGMhPSJmdW5jdGlvbiJ8fHRoaXMuYWxsb3dGdW5jdGlvbnM/YzpudWxsfSxpdGVtQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaXRlbXNbYV19LGtleTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tYXBbYV19LGNvbnRhaW5zOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmluZGV4T2YoYSkhPS0xfSxjb250YWluc0tleTpmdW5jdGlvbihhKXtyZXR1cm4gdHlwZW9mIHRoaXMubWFwW2FdIT0idW5kZWZpbmVkIn0sY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wO3RoaXMuaXRlbXM9W107dGhpcy5rZXlzPVtdO3RoaXMubWFwPXt9O3RoaXMuZmlyZUV2ZW50KCJjbGVhciIpfSxmaXJzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLml0ZW1zWzBdfSxsYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbXNbdGhpcy5sZW5ndGgtMV19LF9zb3J0OmZ1bmN0aW9uKGssYSxqKXt2YXIgZCxlLGI9U3RyaW5nKGEpLnRvVXBwZXJDYXNlKCk9PSJERVNDIj8tMToxLGg9W10sbD10aGlzLmtleXMsZz10aGlzLml0ZW1zO2o9anx8ZnVuY3Rpb24oaSxjKXtyZXR1cm4gaS1jfTtmb3IoZD0wLGU9Zy5sZW5ndGg7ZDxlO2QrKyl7aFtoLmxlbmd0aF09e2tleTpsW2RdLHZhbHVlOmdbZF0saW5kZXg6ZH19aC5zb3J0KGZ1bmN0aW9uKGksYyl7dmFyIG09aihpW2tdLGNba10pKmI7aWYobT09PTApe209KGkuaW5kZXg8Yy5pbmRleD8tMToxKX1yZXR1cm4gbX0pO2ZvcihkPTAsZT1oLmxlbmd0aDtkPGU7ZCsrKXtnW2RdPWhbZF0udmFsdWU7bFtkXT1oW2RdLmtleX10aGlzLmZpcmVFdmVudCgic29ydCIsdGhpcyl9LHNvcnQ6ZnVuY3Rpb24oYSxiKXt0aGlzLl9zb3J0KCJ2YWx1ZSIsYSxiKX0scmVvcmRlcjpmdW5jdGlvbihkKXt0aGlzLnN1c3BlbmRFdmVudHMoKTt2YXIgYj10aGlzLml0ZW1zLGM9MCxnPWIubGVuZ3RoLGE9W10sZT1bXSxoO2ZvcihoIGluIGQpe2FbZFtoXV09YltoXX1mb3IoYz0wO2M8ZztjKyspe2lmKGRbY109PXVuZGVmaW5lZCl7ZS5wdXNoKGJbY10pfX1mb3IoYz0wO2M8ZztjKyspe2lmKGFbY109PXVuZGVmaW5lZCl7YVtjXT1lLnNoaWZ0KCl9fXRoaXMuY2xlYXIoKTt0aGlzLmFkZEFsbChhKTt0aGlzLnJlc3VtZUV2ZW50cygpO3RoaXMuZmlyZUV2ZW50KCJzb3J0Iix0aGlzKX0sa2V5U29ydDpmdW5jdGlvbihhLGIpe3RoaXMuX3NvcnQoImtleSIsYSxifHxmdW5jdGlvbihkLGMpe3ZhciBnPVN0cmluZyhkKS50b1VwcGVyQ2FzZSgpLGU9U3RyaW5nKGMpLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGc+ZT8xOihnPGU/LTE6MCl9KX0sZ2V0UmFuZ2U6ZnVuY3Rpb24oZSxhKXt2YXIgYj10aGlzLml0ZW1zO2lmKGIubGVuZ3RoPDEpe3JldHVybltdfWU9ZXx8MDthPU1hdGgubWluKHR5cGVvZiBhPT0idW5kZWZpbmVkIj90aGlzLmxlbmd0aC0xOmEsdGhpcy5sZW5ndGgtMSk7dmFyIGMsZD1bXTtpZihlPD1hKXtmb3IoYz1lO2M8PWE7YysrKXtkW2QubGVuZ3RoXT1iW2NdfX1lbHNle2ZvcihjPWU7Yz49YTtjLS0pe2RbZC5sZW5ndGhdPWJbY119fXJldHVybiBkfSxmaWx0ZXI6ZnVuY3Rpb24oYyxiLGQsYSl7aWYoRXh0LmlzRW1wdHkoYixmYWxzZSkpe3JldHVybiB0aGlzLmNsb25lKCl9Yj10aGlzLmNyZWF0ZVZhbHVlTWF0Y2hlcihiLGQsYSk7cmV0dXJuIHRoaXMuZmlsdGVyQnkoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmIudGVzdChlW2NdKX0pfSxmaWx0ZXJCeTpmdW5jdGlvbihnLGUpe3ZhciBoPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTtoLmdldEtleT10aGlzLmdldEtleTt2YXIgYj10aGlzLmtleXMsZD10aGlzLml0ZW1zO2Zvcih2YXIgYz0wLGE9ZC5sZW5ndGg7YzxhO2MrKyl7aWYoZy5jYWxsKGV8fHRoaXMsZFtjXSxiW2NdKSl7aC5hZGQoYltjXSxkW2NdKX19cmV0dXJuIGh9LGZpbmRJbmRleDpmdW5jdGlvbihjLGIsZSxkLGEpe2lmKEV4dC5pc0VtcHR5KGIsZmFsc2UpKXtyZXR1cm4gLTF9Yj10aGlzLmNyZWF0ZVZhbHVlTWF0Y2hlcihiLGQsYSk7cmV0dXJuIHRoaXMuZmluZEluZGV4QnkoZnVuY3Rpb24oZyl7cmV0dXJuIGcmJmIudGVzdChnW2NdKX0sbnVsbCxlKX0sZmluZEluZGV4Qnk6ZnVuY3Rpb24oZyxlLGgpe3ZhciBiPXRoaXMua2V5cyxkPXRoaXMuaXRlbXM7Zm9yKHZhciBjPShofHwwKSxhPWQubGVuZ3RoO2M8YTtjKyspe2lmKGcuY2FsbChlfHx0aGlzLGRbY10sYltjXSkpe3JldHVybiBjfX1yZXR1cm4gLTF9LGNyZWF0ZVZhbHVlTWF0Y2hlcjpmdW5jdGlvbihjLGUsYSxiKXtpZighYy5leGVjKXt2YXIgZD1FeHQuZXNjYXBlUmU7Yz1TdHJpbmcoYyk7aWYoZT09PXRydWUpe2M9ZChjKX1lbHNle2M9Il4iK2QoYyk7aWYoYj09PXRydWUpe2MrPSIkIn19Yz1uZXcgUmVnRXhwKGMsYT8iIjoiaSIpfXJldHVybiBjfSxjbG9uZTpmdW5jdGlvbigpe3ZhciBlPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTt2YXIgYj10aGlzLmtleXMsZD10aGlzLml0ZW1zO2Zvcih2YXIgYz0wLGE9ZC5sZW5ndGg7YzxhO2MrKyl7ZS5hZGQoYltjXSxkW2NdKX1lLmdldEtleT10aGlzLmdldEtleTtyZXR1cm4gZX19KTtFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24ucHJvdG90eXBlLmdldD1FeHQudXRpbC5NaXhlZENvbGxlY3Rpb24ucHJvdG90eXBlLml0ZW07RXh0LkFic3RyYWN0TWFuYWdlcj1FeHQuZXh0ZW5kKE9iamVjdCx7dHlwZU5hbWU6InR5cGUiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGF8fHt9KTt0aGlzLmFsbD1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7dGhpcy50eXBlcz17fX0sZ2V0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFsbC5nZXQoYSl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGEpe3RoaXMuYWxsLmFkZChhKX0sdW5yZWdpc3RlcjpmdW5jdGlvbihhKXt0aGlzLmFsbC5yZW1vdmUoYSl9LHJlZ2lzdGVyVHlwZTpmdW5jdGlvbihiLGEpe3RoaXMudHlwZXNbYl09YTthW3RoaXMudHlwZU5hbWVdPWJ9LGlzUmVnaXN0ZXJlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50eXBlc1thXSE9PXVuZGVmaW5lZH0sY3JlYXRlOmZ1bmN0aW9uKGEsZCl7dmFyIGI9YVt0aGlzLnR5cGVOYW1lXXx8YS50eXBlfHxkLGM9dGhpcy50eXBlc1tiXTtpZihjPT11bmRlZmluZWQpe3Rocm93IG5ldyBFcnJvcihTdHJpbmcuZm9ybWF0KCJUaGUgJ3swfScgdHlwZSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB3aXRoIHRoaXMgbWFuYWdlciIsYikpfXJldHVybiBuZXcgYyhhKX0sb25BdmFpbGFibGU6ZnVuY3Rpb24oZCxjLGIpe3ZhciBhPXRoaXMuYWxsO2Eub24oImFkZCIsZnVuY3Rpb24oZSxnKXtpZihnLmlkPT1kKXtjLmNhbGwoYnx8ZyxnKTthLnVuKCJhZGQiLGMsYil9fSl9fSk7RXh0LnV0aWwuRm9ybWF0PWZ1bmN0aW9uKCl7dmFyIHRyaW1SZT0vXlxzK3xccyskL2csc3RyaXBUYWdzUkU9LzxcLz9bXj5dKz4vZ2ksc3RyaXBTY3JpcHRzUmU9Lyg/OjxzY3JpcHQuKj8+KSgoXG58XHJ8LikqPykoPzo8XC9zY3JpcHQ+KS9pZyxubDJiclJlPS9ccj9cbi9nO3JldHVybntlbGxpcHNpczpmdW5jdGlvbih2YWx1ZSxsZW4sd29yZCl7aWYodmFsdWUmJnZhbHVlLmxlbmd0aD5sZW4pe2lmKHdvcmQpe3ZhciB2cz12YWx1ZS5zdWJzdHIoMCxsZW4tMiksaW5kZXg9TWF0aC5tYXgodnMubGFzdEluZGV4T2YoIiAiKSx2cy5sYXN0SW5kZXhPZigiLiIpLHZzLmxhc3RJbmRleE9mKCIhIiksdnMubGFzdEluZGV4T2YoIj8iKSk7aWYoaW5kZXg9PS0xfHxpbmRleDwobGVuLTE1KSl7cmV0dXJuIHZhbHVlLnN1YnN0cigwLGxlbi0zKSsiLi4uIn1lbHNle3JldHVybiB2cy5zdWJzdHIoMCxpbmRleCkrIi4uLiJ9fWVsc2V7cmV0dXJuIHZhbHVlLnN1YnN0cigwLGxlbi0zKSsiLi4uIn19cmV0dXJuIHZhbHVlfSx1bmRlZjpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlIT09dW5kZWZpbmVkP3ZhbHVlOiIifSxkZWZhdWx0VmFsdWU6ZnVuY3Rpb24odmFsdWUsZGVmYXVsdFZhbHVlKXtyZXR1cm4gdmFsdWUhPT11bmRlZmluZWQmJnZhbHVlIT09IiI/dmFsdWU6ZGVmYXVsdFZhbHVlfSxodG1sRW5jb2RlOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gIXZhbHVlP3ZhbHVlOlN0cmluZyh2YWx1ZSkucmVwbGFjZSgvJi9nLCImYW1wOyIpLnJlcGxhY2UoLz4vZywiJmd0OyIpLnJlcGxhY2UoLzwvZywiJmx0OyIpLnJlcGxhY2UoLyIvZywiJnF1b3Q7Iil9LGh0bWxEZWNvZGU6ZnVuY3Rpb24odmFsdWUpe3JldHVybiAhdmFsdWU/dmFsdWU6U3RyaW5nKHZhbHVlKS5yZXBsYWNlKC8mZ3Q7L2csIj4iKS5yZXBsYWNlKC8mbHQ7L2csIjwiKS5yZXBsYWNlKC8mcXVvdDsvZywnIicpLnJlcGxhY2UoLyZhbXA7L2csIiYiKX0sdHJpbTpmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIFN0cmluZyh2YWx1ZSkucmVwbGFjZSh0cmltUmUsIiIpfSxzdWJzdHI6ZnVuY3Rpb24odmFsdWUsc3RhcnQsbGVuZ3RoKXtyZXR1cm4gU3RyaW5nKHZhbHVlKS5zdWJzdHIoc3RhcnQsbGVuZ3RoKX0sbG93ZXJjYXNlOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gU3RyaW5nKHZhbHVlKS50b0xvd2VyQ2FzZSgpfSx1cHBlcmNhc2U6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBTdHJpbmcodmFsdWUpLnRvVXBwZXJDYXNlKCl9LGNhcGl0YWxpemU6ZnVuY3Rpb24odmFsdWUpe3JldHVybiAhdmFsdWU/dmFsdWU6dmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdmFsdWUuc3Vic3RyKDEpLnRvTG93ZXJDYXNlKCl9LGNhbGw6ZnVuY3Rpb24odmFsdWUsZm4pe2lmKGFyZ3VtZW50cy5sZW5ndGg+Mil7dmFyIGFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO2FyZ3MudW5zaGlmdCh2YWx1ZSk7cmV0dXJuIGV2YWwoZm4pLmFwcGx5KHdpbmRvdyxhcmdzKX1lbHNle3JldHVybiBldmFsKGZuKS5jYWxsKHdpbmRvdyx2YWx1ZSl9fSx1c01vbmV5OmZ1bmN0aW9uKHYpe3Y9KE1hdGgucm91bmQoKHYtMCkqMTAwKSkvMTAwO3Y9KHY9PU1hdGguZmxvb3IodikpP3YrIi4wMCI6KCh2KjEwPT1NYXRoLmZsb29yKHYqMTApKT92KyIwIjp2KTt2PVN0cmluZyh2KTt2YXIgcHM9di5zcGxpdCgiLiIpLHdob2xlPXBzWzBdLHN1Yj1wc1sxXT8iLiIrcHNbMV06Ii4wMCIscj0vKFxkKykoXGR7M30pLzt3aGlsZShyLnRlc3Qod2hvbGUpKXt3aG9sZT13aG9sZS5yZXBsYWNlKHIsIiQxLCQyIil9dj13aG9sZStzdWI7aWYodi5jaGFyQXQoMCk9PSItIil7cmV0dXJuIi0kIit2LnN1YnN0cigxKX1yZXR1cm4iJCIrdn0sZGF0ZTpmdW5jdGlvbih2LGZvcm1hdCl7aWYoIXYpe3JldHVybiIifWlmKCFFeHQuaXNEYXRlKHYpKXt2PW5ldyBEYXRlKERhdGUucGFyc2UodikpfXJldHVybiB2LmRhdGVGb3JtYXQoZm9ybWF0fHwibS9kL1kiKX0sZGF0ZVJlbmRlcmVyOmZ1bmN0aW9uKGZvcm1hdCl7cmV0dXJuIGZ1bmN0aW9uKHYpe3JldHVybiBFeHQudXRpbC5Gb3JtYXQuZGF0ZSh2LGZvcm1hdCl9fSxzdHJpcFRhZ3M6ZnVuY3Rpb24odil7cmV0dXJuICF2P3Y6U3RyaW5nKHYpLnJlcGxhY2Uoc3RyaXBUYWdzUkUsIiIpfSxzdHJpcFNjcmlwdHM6ZnVuY3Rpb24odil7cmV0dXJuICF2P3Y6U3RyaW5nKHYpLnJlcGxhY2Uoc3RyaXBTY3JpcHRzUmUsIiIpfSxmaWxlU2l6ZTpmdW5jdGlvbihzaXplKXtpZihzaXplPDEwMjQpe3JldHVybiBzaXplKyIgYnl0ZXMifWVsc2V7aWYoc2l6ZTwxMDQ4NTc2KXtyZXR1cm4oTWF0aC5yb3VuZCgoKHNpemUqMTApLzEwMjQpKS8xMCkrIiBLQiJ9ZWxzZXtyZXR1cm4oTWF0aC5yb3VuZCgoKHNpemUqMTApLzEwNDg1NzYpKS8xMCkrIiBNQiJ9fX0sbWF0aDpmdW5jdGlvbigpe3ZhciBmbnM9e307cmV0dXJuIGZ1bmN0aW9uKHYsYSl7aWYoIWZuc1thXSl7Zm5zW2FdPW5ldyBGdW5jdGlvbigidiIsInJldHVybiB2ICIrYSsiOyIpfXJldHVybiBmbnNbYV0odil9fSgpLHJvdW5kOmZ1bmN0aW9uKHZhbHVlLHByZWNpc2lvbil7dmFyIHJlc3VsdD1OdW1iZXIodmFsdWUpO2lmKHR5cGVvZiBwcmVjaXNpb249PSJudW1iZXIiKXtwcmVjaXNpb249TWF0aC5wb3coMTAscHJlY2lzaW9uKTtyZXN1bHQ9TWF0aC5yb3VuZCh2YWx1ZSpwcmVjaXNpb24pL3ByZWNpc2lvbn1yZXR1cm4gcmVzdWx0fSxudW1iZXI6ZnVuY3Rpb24odixmb3JtYXQpe2lmKCFmb3JtYXQpe3JldHVybiB2fXY9RXh0Lm51bSh2LE5hTik7aWYoaXNOYU4odikpe3JldHVybiIifXZhciBjb21tYT0iLCIsZGVjPSIuIixpMThuPWZhbHNlLG5lZz12PDA7dj1NYXRoLmFicyh2KTtpZihmb3JtYXQuc3Vic3RyKGZvcm1hdC5sZW5ndGgtMik9PSIvaSIpe2Zvcm1hdD1mb3JtYXQuc3Vic3RyKDAsZm9ybWF0Lmxlbmd0aC0yKTtpMThuPXRydWU7Y29tbWE9Ii4iO2RlYz0iLCJ9dmFyIGhhc0NvbW1hPWZvcm1hdC5pbmRleE9mKGNvbW1hKSE9LTEscHNwbGl0PShpMThuP2Zvcm1hdC5yZXBsYWNlKC9bXlxkXCxdL2csIiIpOmZvcm1hdC5yZXBsYWNlKC9bXlxkXC5dL2csIiIpKS5zcGxpdChkZWMpO2lmKDE8cHNwbGl0Lmxlbmd0aCl7dj12LnRvRml4ZWQocHNwbGl0WzFdLmxlbmd0aCl9ZWxzZXtpZigyPHBzcGxpdC5sZW5ndGgpe3Rocm93ICgiTnVtYmVyRm9ybWF0RXhjZXB0aW9uOiBpbnZhbGlkIGZvcm1hdCwgZm9ybWF0cyBzaG91bGQgaGF2ZSBubyBtb3JlIHRoYW4gMSBwZXJpb2Q6ICIrZm9ybWF0KX1lbHNle3Y9di50b0ZpeGVkKDApfX12YXIgZm51bT12LnRvU3RyaW5nKCk7cHNwbGl0PWZudW0uc3BsaXQoIi4iKTtpZihoYXNDb21tYSl7dmFyIGNudW09cHNwbGl0WzBdLHBhcnI9W10saj1jbnVtLmxlbmd0aCxtPU1hdGguZmxvb3Ioai8zKSxuPWNudW0ubGVuZ3RoJTN8fDMsaTtmb3IoaT0wO2k8ajtpKz1uKXtpZihpIT0wKXtuPTN9cGFycltwYXJyLmxlbmd0aF09Y251bS5zdWJzdHIoaSxuKTttLT0xfWZudW09cGFyci5qb2luKGNvbW1hKTtpZihwc3BsaXRbMV0pe2ZudW0rPWRlYytwc3BsaXRbMV19fWVsc2V7aWYocHNwbGl0WzFdKXtmbnVtPXBzcGxpdFswXStkZWMrcHNwbGl0WzFdfX1yZXR1cm4obmVnPyItIjoiIikrZm9ybWF0LnJlcGxhY2UoL1tcZCw/XC4/XSsvLGZudW0pfSxudW1iZXJSZW5kZXJlcjpmdW5jdGlvbihmb3JtYXQpe3JldHVybiBmdW5jdGlvbih2KXtyZXR1cm4gRXh0LnV0aWwuRm9ybWF0Lm51bWJlcih2LGZvcm1hdCl9fSxwbHVyYWw6ZnVuY3Rpb24odixzLHApe3JldHVybiB2KyIgIisodj09MT9zOihwP3A6cysicyIpKX0sbmwyYnI6ZnVuY3Rpb24odil7cmV0dXJuIEV4dC5pc0VtcHR5KHYpPyIiOnYucmVwbGFjZShubDJiclJlLCI8YnIvPiIpfX19KCk7RXh0LlhUZW1wbGF0ZT1mdW5jdGlvbigpe0V4dC5YVGVtcGxhdGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIHk9dGhpcyxqPXkuaHRtbCxxPS88dHBsXGJbXj5dKj4oKD86KD89KFtePF0rKSlcMnw8KD8hdHBsXGJbXj5dKj4pKSo/KTxcL3RwbD4vLGQ9L148dHBsXGJbXj5dKj9mb3I9IiguKj8pIi8sdj0vXjx0cGxcYltePl0qP2lmPSIoLio/KSIvLHg9L148dHBsXGJbXj5dKj9leGVjPSIoLio/KSIvLHIscD0wLGs9W10sbz0idmFsdWVzIix3PSJwYXJlbnQiLGw9InhpbmRleCIsbj0ieGNvdW50IixlPSJyZXR1cm4gIixjPSJ3aXRoKHZhbHVlcyl7ICI7aj1bIjx0cGw+IixqLCI8L3RwbD4iXS5qb2luKCIiKTt3aGlsZSgocj1qLm1hdGNoKHEpKSl7dmFyIGI9clswXS5tYXRjaChkKSxhPXJbMF0ubWF0Y2godiksQT1yWzBdLm1hdGNoKHgpLGc9bnVsbCxoPW51bGwsdD1udWxsLHo9YiYmYlsxXT9iWzFdOiIiO2lmKGEpe2c9YSYmYVsxXT9hWzFdOm51bGw7aWYoZyl7aD1uZXcgRnVuY3Rpb24obyx3LGwsbixjK2UrKEV4dC51dGlsLkZvcm1hdC5odG1sRGVjb2RlKGcpKSsiOyB9Iil9fWlmKEEpe2c9QSYmQVsxXT9BWzFdOm51bGw7aWYoZyl7dD1uZXcgRnVuY3Rpb24obyx3LGwsbixjKyhFeHQudXRpbC5Gb3JtYXQuaHRtbERlY29kZShnKSkrIjsgfSIpfX1pZih6KXtzd2l0Y2goeil7Y2FzZSIuIjp6PW5ldyBGdW5jdGlvbihvLHcsYytlK28rIjsgfSIpO2JyZWFrO2Nhc2UiLi4iOno9bmV3IEZ1bmN0aW9uKG8sdyxjK2UrdysiOyB9Iik7YnJlYWs7ZGVmYXVsdDp6PW5ldyBGdW5jdGlvbihvLHcsYytlK3orIjsgfSIpfX1rLnB1c2goe2lkOnAsdGFyZ2V0OnosZXhlYzp0LHRlc3Q6aCxib2R5OnJbMV18fCIifSk7aj1qLnJlcGxhY2UoclswXSwie3h0cGwiK3ArIn0iKTsrK3B9Zm9yKHZhciB1PWsubGVuZ3RoLTE7dT49MDstLXUpe3kuY29tcGlsZVRwbChrW3VdKX15Lm1hc3Rlcj1rW2subGVuZ3RoLTFdO3kudHBscz1rfTtFeHQuZXh0ZW5kKEV4dC5YVGVtcGxhdGUsRXh0LlRlbXBsYXRlLHtyZTovXHsoW1x3XC1cLlwjXSspKD86XDooW1x3XC5dKikoPzpcKCguKj8pP1wpKT8pPyhccz9bXCtcLVwqXFxdXHM/W1xkXC5cK1wtXCpcXFwoXCldKyk/XH0vZyxjb2RlUmU6L1x7XFsoKD86XFxcXXwufFxuKSo/KVxdXH0vZyxhcHBseVN1YlRlbXBsYXRlOmZ1bmN0aW9uKGEsayxqLGQsYyl7dmFyIGg9dGhpcyxnLG09aC50cGxzW2FdLGwsYj1bXTtpZigobS50ZXN0JiYhbS50ZXN0LmNhbGwoaCxrLGosZCxjKSl8fChtLmV4ZWMmJm0uZXhlYy5jYWxsKGgsayxqLGQsYykpKXtyZXR1cm4iIn1sPW0udGFyZ2V0P20udGFyZ2V0LmNhbGwoaCxrLGopOms7Zz1sLmxlbmd0aDtqPW0udGFyZ2V0P2s6ajtpZihtLnRhcmdldCYmRXh0LmlzQXJyYXkobCkpe2Zvcih2YXIgZT0wLGc9bC5sZW5ndGg7ZTxnO2UrKyl7YltiLmxlbmd0aF09bS5jb21waWxlZC5jYWxsKGgsbFtlXSxqLGUrMSxnKX1yZXR1cm4gYi5qb2luKCIiKX1yZXR1cm4gbS5jb21waWxlZC5jYWxsKGgsbCxqLGQsYyl9LGNvbXBpbGVUcGw6ZnVuY3Rpb24odHBsKXt2YXIgZm09RXh0LnV0aWwuRm9ybWF0LHVzZUY9dGhpcy5kaXNhYmxlRm9ybWF0cyE9PXRydWUsc2VwPUV4dC5pc0dlY2tvPyIrIjoiLCIsYm9keTtmdW5jdGlvbiBmbihtLG5hbWUsZm9ybWF0LGFyZ3MsbWF0aCl7aWYobmFtZS5zdWJzdHIoMCw0KT09Inh0cGwiKXtyZXR1cm4iJyIrc2VwKyJ0aGlzLmFwcGx5U3ViVGVtcGxhdGUoIituYW1lLnN1YnN0cig0KSsiLCB2YWx1ZXMsIHBhcmVudCwgeGluZGV4LCB4Y291bnQpIitzZXArIicifXZhciB2O2lmKG5hbWU9PT0iLiIpe3Y9InZhbHVlcyJ9ZWxzZXtpZihuYW1lPT09IiMiKXt2PSJ4aW5kZXgifWVsc2V7aWYobmFtZS5pbmRleE9mKCIuIikhPS0xKXt2PW5hbWV9ZWxzZXt2PSJ2YWx1ZXNbJyIrbmFtZSsiJ10ifX19aWYobWF0aCl7dj0iKCIrdittYXRoKyIpIn1pZihmb3JtYXQmJnVzZUYpe2FyZ3M9YXJncz8iLCIrYXJnczoiIjtpZihmb3JtYXQuc3Vic3RyKDAsNSkhPSJ0aGlzLiIpe2Zvcm1hdD0iZm0uIitmb3JtYXQrIigifWVsc2V7Zm9ybWF0PSd0aGlzLmNhbGwoIicrZm9ybWF0LnN1YnN0cig1KSsnIiwgJzthcmdzPSIsIHZhbHVlcyJ9fWVsc2V7YXJncz0iIjtmb3JtYXQ9IigiK3YrIiA9PT0gdW5kZWZpbmVkID8gJycgOiAifXJldHVybiInIitzZXArZm9ybWF0K3YrYXJncysiKSIrc2VwKyInIn1mdW5jdGlvbiBjb2RlRm4obSxjb2RlKXtyZXR1cm4iJyIrc2VwKyIoIitjb2RlLnJlcGxhY2UoL1xcJy9nLCInIikrIikiK3NlcCsiJyJ9aWYoRXh0LmlzR2Vja28pe2JvZHk9InRwbC5jb21waWxlZCA9IGZ1bmN0aW9uKHZhbHVlcywgcGFyZW50LCB4aW5kZXgsIHhjb3VudCl7IHJldHVybiAnIit0cGwuYm9keS5yZXBsYWNlKC8oXHJcbnxcbikvZywiXFxuIikucmVwbGFjZSgvJy9nLCJcXCciKS5yZXBsYWNlKHRoaXMucmUsZm4pLnJlcGxhY2UodGhpcy5jb2RlUmUsY29kZUZuKSsiJzt9OyJ9ZWxzZXtib2R5PVsidHBsLmNvbXBpbGVkID0gZnVuY3Rpb24odmFsdWVzLCBwYXJlbnQsIHhpbmRleCwgeGNvdW50KXsgcmV0dXJuIFsnIl07Ym9keS5wdXNoKHRwbC5ib2R5LnJlcGxhY2UoLyhcclxufFxuKS9nLCJcXG4iKS5yZXBsYWNlKC8nL2csIlxcJyIpLnJlcGxhY2UodGhpcy5yZSxmbikucmVwbGFjZSh0aGlzLmNvZGVSZSxjb2RlRm4pKTtib2R5LnB1c2goIiddLmpvaW4oJycpO307Iik7Ym9keT1ib2R5LmpvaW4oIiIpfWV2YWwoYm9keSk7cmV0dXJuIHRoaXN9LGFwcGx5VGVtcGxhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFzdGVyLmNvbXBpbGVkLmNhbGwodGhpcyxhLHt9LDEsMSl9LGNvbXBpbGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc319KTtFeHQuWFRlbXBsYXRlLnByb3RvdHlwZS5hcHBseT1FeHQuWFRlbXBsYXRlLnByb3RvdHlwZS5hcHBseVRlbXBsYXRlO0V4dC5YVGVtcGxhdGUuZnJvbT1mdW5jdGlvbihhKXthPUV4dC5nZXREb20oYSk7cmV0dXJuIG5ldyBFeHQuWFRlbXBsYXRlKGEudmFsdWV8fGEuaW5uZXJIVE1MKX07RXh0LnV0aWwuQ1NTPWZ1bmN0aW9uKCl7dmFyIGQ9bnVsbDt2YXIgYz1kb2N1bWVudDt2YXIgYj0vKC1bYS16XSkvZ2k7dmFyIGE9ZnVuY3Rpb24oZSxnKXtyZXR1cm4gZy5jaGFyQXQoMSkudG9VcHBlckNhc2UoKX07cmV0dXJue2NyZWF0ZVN0eWxlU2hlZXQ6ZnVuY3Rpb24oaSxsKXt2YXIgaDt2YXIgZz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIilbMF07dmFyIGs9Yy5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2suc2V0QXR0cmlidXRlKCJ0eXBlIiwidGV4dC9jc3MiKTtpZihsKXtrLnNldEF0dHJpYnV0ZSgiaWQiLGwpfWlmKEV4dC5pc0lFKXtnLmFwcGVuZENoaWxkKGspO2g9ay5zdHlsZVNoZWV0O2guY3NzVGV4dD1pfWVsc2V7dHJ5e2suYXBwZW5kQ2hpbGQoYy5jcmVhdGVUZXh0Tm9kZShpKSl9Y2F0Y2goail7ay5jc3NUZXh0PWl9Zy5hcHBlbmRDaGlsZChrKTtoPWsuc3R5bGVTaGVldD9rLnN0eWxlU2hlZXQ6KGsuc2hlZXR8fGMuc3R5bGVTaGVldHNbYy5zdHlsZVNoZWV0cy5sZW5ndGgtMV0pfXRoaXMuY2FjaGVTdHlsZVNoZWV0KGgpO3JldHVybiBofSxyZW1vdmVTdHlsZVNoZWV0OmZ1bmN0aW9uKGcpe3ZhciBlPWMuZ2V0RWxlbWVudEJ5SWQoZyk7aWYoZSl7ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfX0sc3dhcFN0eWxlU2hlZXQ6ZnVuY3Rpb24oaCxlKXt0aGlzLnJlbW92ZVN0eWxlU2hlZXQoaCk7dmFyIGc9Yy5jcmVhdGVFbGVtZW50KCJsaW5rIik7Zy5zZXRBdHRyaWJ1dGUoInJlbCIsInN0eWxlc2hlZXQiKTtnLnNldEF0dHJpYnV0ZSgidHlwZSIsInRleHQvY3NzIik7Zy5zZXRBdHRyaWJ1dGUoImlkIixoKTtnLnNldEF0dHJpYnV0ZSgiaHJlZiIsZSk7Yy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdLmFwcGVuZENoaWxkKGcpfSxyZWZyZXNoQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSdWxlcyh0cnVlKX0sY2FjaGVTdHlsZVNoZWV0OmZ1bmN0aW9uKGgpe2lmKCFkKXtkPXt9fXRyeXt2YXIgaz1oLmNzc1J1bGVzfHxoLnJ1bGVzO2Zvcih2YXIgZz1rLmxlbmd0aC0xO2c+PTA7LS1nKXtkW2tbZ10uc2VsZWN0b3JUZXh0LnRvTG93ZXJDYXNlKCldPWtbZ119fWNhdGNoKGkpe319LGdldFJ1bGVzOmZ1bmN0aW9uKGgpe2lmKGQ9PT1udWxsfHxoKXtkPXt9O3ZhciBrPWMuc3R5bGVTaGVldHM7Zm9yKHZhciBqPTAsZz1rLmxlbmd0aDtqPGc7aisrKXt0cnl7dGhpcy5jYWNoZVN0eWxlU2hlZXQoa1tqXSl9Y2F0Y2gobCl7fX19cmV0dXJuIGR9LGdldFJ1bGU6ZnVuY3Rpb24oZSxoKXt2YXIgZz10aGlzLmdldFJ1bGVzKGgpO2lmKCFFeHQuaXNBcnJheShlKSl7cmV0dXJuIGdbZS50b0xvd2VyQ2FzZSgpXX1mb3IodmFyIGo9MDtqPGUubGVuZ3RoO2orKyl7aWYoZ1tlW2pdXSl7cmV0dXJuIGdbZVtqXS50b0xvd2VyQ2FzZSgpXX19cmV0dXJuIG51bGx9LHVwZGF0ZVJ1bGU6ZnVuY3Rpb24oZSxqLGgpe2lmKCFFeHQuaXNBcnJheShlKSl7dmFyIGs9dGhpcy5nZXRSdWxlKGUpO2lmKGspe2suc3R5bGVbai5yZXBsYWNlKGIsYSldPWg7cmV0dXJuIHRydWV9fWVsc2V7Zm9yKHZhciBnPTA7ZzxlLmxlbmd0aDtnKyspe2lmKHRoaXMudXBkYXRlUnVsZShlW2ddLGosaCkpe3JldHVybiB0cnVlfX19cmV0dXJuIGZhbHNlfX19KCk7RXh0LnV0aWwuQ2xpY2tSZXBlYXRlcj1FeHQuZXh0ZW5kKEV4dC51dGlsLk9ic2VydmFibGUse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dGhpcy5lbD1FeHQuZ2V0KGIpO3RoaXMuZWwudW5zZWxlY3RhYmxlKCk7RXh0LmFwcGx5KHRoaXMsYSk7dGhpcy5hZGRFdmVudHMoIm1vdXNlZG93biIsImNsaWNrIiwibW91c2V1cCIpO2lmKCF0aGlzLmRpc2FibGVkKXt0aGlzLmRpc2FibGVkPXRydWU7dGhpcy5lbmFibGUoKX1pZih0aGlzLmhhbmRsZXIpe3RoaXMub24oImNsaWNrIix0aGlzLmhhbmRsZXIsdGhpcy5zY29wZXx8dGhpcyl9RXh0LnV0aWwuQ2xpY2tSZXBlYXRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9LGludGVydmFsOjIwLGRlbGF5OjI1MCxwcmV2ZW50RGVmYXVsdDp0cnVlLHN0b3BEZWZhdWx0OmZhbHNlLHRpbWVyOjAsZW5hYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZCl7dGhpcy5lbC5vbigibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKTtpZihFeHQuaXNJRSl7dGhpcy5lbC5vbigiZGJsY2xpY2siLHRoaXMuaGFuZGxlRGJsQ2xpY2ssdGhpcyl9aWYodGhpcy5wcmV2ZW50RGVmYXVsdHx8dGhpcy5zdG9wRGVmYXVsdCl7dGhpcy5lbC5vbigiY2xpY2siLHRoaXMuZXZlbnRPcHRpb25zLHRoaXMpfX10aGlzLmRpc2FibGVkPWZhbHNlfSxkaXNhYmxlOmZ1bmN0aW9uKGEpe2lmKGF8fCF0aGlzLmRpc2FibGVkKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7aWYodGhpcy5wcmVzc0NsYXNzKXt0aGlzLmVsLnJlbW92ZUNsYXNzKHRoaXMucHJlc3NDbGFzcyl9RXh0LmdldERvYygpLnVuKCJtb3VzZXVwIix0aGlzLmhhbmRsZU1vdXNlVXAsdGhpcyk7dGhpcy5lbC5yZW1vdmVBbGxMaXN0ZW5lcnMoKX10aGlzLmRpc2FibGVkPXRydWV9LHNldERpc2FibGVkOmZ1bmN0aW9uKGEpe3RoaXNbYT8iZGlzYWJsZSI6ImVuYWJsZSJdKCl9LGV2ZW50T3B0aW9uczpmdW5jdGlvbihhKXtpZih0aGlzLnByZXZlbnREZWZhdWx0KXthLnByZXZlbnREZWZhdWx0KCl9aWYodGhpcy5zdG9wRGVmYXVsdCl7YS5zdG9wRXZlbnQoKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGUodHJ1ZSk7RXh0LmRlc3Ryb3kodGhpcy5lbCk7dGhpcy5wdXJnZUxpc3RlbmVycygpfSxoYW5kbGVEYmxDbGljazpmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5lbC5ibHVyKCk7dGhpcy5maXJlRXZlbnQoIm1vdXNlZG93biIsdGhpcyxhKTt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsYSl9LGhhbmRsZU1vdXNlRG93bjpmdW5jdGlvbihhKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7dGhpcy5lbC5ibHVyKCk7aWYodGhpcy5wcmVzc0NsYXNzKXt0aGlzLmVsLmFkZENsYXNzKHRoaXMucHJlc3NDbGFzcyl9dGhpcy5tb3VzZWRvd25UaW1lPW5ldyBEYXRlKCk7RXh0LmdldERvYygpLm9uKCJtb3VzZXVwIix0aGlzLmhhbmRsZU1vdXNlVXAsdGhpcyk7dGhpcy5lbC5vbigibW91c2VvdXQiLHRoaXMuaGFuZGxlTW91c2VPdXQsdGhpcyk7dGhpcy5maXJlRXZlbnQoIm1vdXNlZG93biIsdGhpcyxhKTt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsYSk7aWYodGhpcy5hY2NlbGVyYXRlKXt0aGlzLmRlbGF5PTQwMH10aGlzLnRpbWVyPXRoaXMuY2xpY2suZGVmZXIodGhpcy5kZWxheXx8dGhpcy5pbnRlcnZhbCx0aGlzLFthXSl9LGNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJjbGljayIsdGhpcyxhKTt0aGlzLnRpbWVyPXRoaXMuY2xpY2suZGVmZXIodGhpcy5hY2NlbGVyYXRlP3RoaXMuZWFzZU91dEV4cG8odGhpcy5tb3VzZWRvd25UaW1lLmdldEVsYXBzZWQoKSw0MDAsLTM5MCwxMjAwMCk6dGhpcy5pbnRlcnZhbCx0aGlzLFthXSl9LGVhc2VPdXRFeHBvOmZ1bmN0aW9uKGUsYSxoLGcpe3JldHVybihlPT1nKT9hK2g6aCooLU1hdGgucG93KDIsLTEwKmUvZykrMSkrYX0saGFuZGxlTW91c2VPdXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lcik7aWYodGhpcy5wcmVzc0NsYXNzKXt0aGlzLmVsLnJlbW92ZUNsYXNzKHRoaXMucHJlc3NDbGFzcyl9dGhpcy5lbC5vbigibW91c2VvdmVyIix0aGlzLmhhbmRsZU1vdXNlUmV0dXJuLHRoaXMpfSxoYW5kbGVNb3VzZVJldHVybjpmdW5jdGlvbigpe3RoaXMuZWwudW4oIm1vdXNlb3ZlciIsdGhpcy5oYW5kbGVNb3VzZVJldHVybix0aGlzKTtpZih0aGlzLnByZXNzQ2xhc3Mpe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5wcmVzc0NsYXNzKX10aGlzLmNsaWNrKCl9LGhhbmRsZU1vdXNlVXA6ZnVuY3Rpb24oYSl7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO3RoaXMuZWwudW4oIm1vdXNlb3ZlciIsdGhpcy5oYW5kbGVNb3VzZVJldHVybix0aGlzKTt0aGlzLmVsLnVuKCJtb3VzZW91dCIsdGhpcy5oYW5kbGVNb3VzZU91dCx0aGlzKTtFeHQuZ2V0RG9jKCkudW4oIm1vdXNldXAiLHRoaXMuaGFuZGxlTW91c2VVcCx0aGlzKTt0aGlzLmVsLnJlbW92ZUNsYXNzKHRoaXMucHJlc3NDbGFzcyk7dGhpcy5maXJlRXZlbnQoIm1vdXNldXAiLHRoaXMsYSl9fSk7RXh0LktleU5hdj1mdW5jdGlvbihiLGEpe3RoaXMuZWw9RXh0LmdldChiKTtFeHQuYXBwbHkodGhpcyxhKTtpZighdGhpcy5kaXNhYmxlZCl7dGhpcy5kaXNhYmxlZD10cnVlO3RoaXMuZW5hYmxlKCl9fTtFeHQuS2V5TmF2LnByb3RvdHlwZT17ZGlzYWJsZWQ6ZmFsc2UsZGVmYXVsdEV2ZW50QWN0aW9uOiJzdG9wRXZlbnQiLGZvcmNlS2V5RG93bjpmYWxzZSxyZWxheTpmdW5jdGlvbihjKXt2YXIgYT1jLmdldEtleSgpLGI9dGhpcy5rZXlUb0hhbmRsZXJbYV07aWYoYiYmdGhpc1tiXSl7aWYodGhpcy5kb1JlbGF5KGMsdGhpc1tiXSxiKSE9PXRydWUpe2NbdGhpcy5kZWZhdWx0RXZlbnRBY3Rpb25dKCl9fX0sZG9SZWxheTpmdW5jdGlvbihjLGIsYSl7cmV0dXJuIGIuY2FsbCh0aGlzLnNjb3BlfHx0aGlzLGMsYSl9LGVudGVyOmZhbHNlLGxlZnQ6ZmFsc2UscmlnaHQ6ZmFsc2UsdXA6ZmFsc2UsZG93bjpmYWxzZSx0YWI6ZmFsc2UsZXNjOmZhbHNlLHBhZ2VVcDpmYWxzZSxwYWdlRG93bjpmYWxzZSxkZWw6ZmFsc2UsaG9tZTpmYWxzZSxlbmQ6ZmFsc2Usc3BhY2U6ZmFsc2Usa2V5VG9IYW5kbGVyOnszNzoibGVmdCIsMzk6InJpZ2h0IiwzODoidXAiLDQwOiJkb3duIiwzMzoicGFnZVVwIiwzNDoicGFnZURvd24iLDQ2OiJkZWwiLDM2OiJob21lIiwzNToiZW5kIiwxMzoiZW50ZXIiLDI3OiJlc2MiLDk6InRhYiIsMzI6InNwYWNlIn0sc3RvcEtleVVwOmZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0S2V5KCk7aWYoYT49MzcmJmE8PTQwKXtiLnN0b3BFdmVudCgpfX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZSgpfSxlbmFibGU6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2FibGVkKXtpZihFeHQuaXNTYWZhcmkyKXt0aGlzLmVsLm9uKCJrZXl1cCIsdGhpcy5zdG9wS2V5VXAsdGhpcyl9dGhpcy5lbC5vbih0aGlzLmlzS2V5ZG93bigpPyJrZXlkb3duIjoia2V5cHJlc3MiLHRoaXMucmVsYXksdGhpcyk7dGhpcy5kaXNhYmxlZD1mYWxzZX19LGRpc2FibGU6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXNhYmxlZCl7aWYoRXh0LmlzU2FmYXJpMil7dGhpcy5lbC51bigia2V5dXAiLHRoaXMuc3RvcEtleVVwLHRoaXMpfXRoaXMuZWwudW4odGhpcy5pc0tleWRvd24oKT8ia2V5ZG93biI6ImtleXByZXNzIix0aGlzLnJlbGF5LHRoaXMpO3RoaXMuZGlzYWJsZWQ9dHJ1ZX19LHNldERpc2FibGVkOmZ1bmN0aW9uKGEpe3RoaXNbYT8iZGlzYWJsZSI6ImVuYWJsZSJdKCl9LGlzS2V5ZG93bjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcmNlS2V5RG93bnx8RXh0LkV2ZW50TWFuYWdlci51c2VLZXlkb3dufX07RXh0LktleU1hcD1mdW5jdGlvbihjLGIsYSl7dGhpcy5lbD1FeHQuZ2V0KGMpO3RoaXMuZXZlbnROYW1lPWF8fCJrZXlkb3duIjt0aGlzLmJpbmRpbmdzPVtdO2lmKGIpe3RoaXMuYWRkQmluZGluZyhiKX10aGlzLmVuYWJsZSgpfTtFeHQuS2V5TWFwLnByb3RvdHlwZT17c3RvcEV2ZW50OmZhbHNlLGFkZEJpbmRpbmc6ZnVuY3Rpb24oYil7aWYoRXh0LmlzQXJyYXkoYikpe0V4dC5lYWNoKGIsZnVuY3Rpb24oail7dGhpcy5hZGRCaW5kaW5nKGopfSx0aGlzKTtyZXR1cm59dmFyIGs9Yi5rZXksZz1iLmZufHxiLmhhbmRsZXIsbD1iLnNjb3BlO2lmKGIuc3RvcEV2ZW50KXt0aGlzLnN0b3BFdmVudD1iLnN0b3BFdmVudH1pZih0eXBlb2Ygaz09InN0cmluZyIpe3ZhciBoPVtdO3ZhciBlPWsudG9VcHBlckNhc2UoKTtmb3IodmFyIGM9MCxkPWUubGVuZ3RoO2M8ZDtjKyspe2gucHVzaChlLmNoYXJDb2RlQXQoYykpfWs9aH12YXIgYT1FeHQuaXNBcnJheShrKTt2YXIgaT1mdW5jdGlvbihvKXtpZih0aGlzLmNoZWNrTW9kaWZpZXJzKGIsbykpe3ZhciBtPW8uZ2V0S2V5KCk7aWYoYSl7Zm9yKHZhciBuPTAsaj1rLmxlbmd0aDtuPGo7bisrKXtpZihrW25dPT1tKXtpZih0aGlzLnN0b3BFdmVudCl7by5zdG9wRXZlbnQoKX1nLmNhbGwobHx8d2luZG93LG0sbyk7cmV0dXJufX19ZWxzZXtpZihtPT1rKXtpZih0aGlzLnN0b3BFdmVudCl7by5zdG9wRXZlbnQoKX1nLmNhbGwobHx8d2luZG93LG0sbyl9fX19O3RoaXMuYmluZGluZ3MucHVzaChpKX0sY2hlY2tNb2RpZmllcnM6ZnVuY3Rpb24oYixoKXt2YXIgaixkLGc9WyJzaGlmdCIsImN0cmwiLCJhbHQiXTtmb3IodmFyIGM9MCxhPWcubGVuZ3RoO2M8YTsrK2Mpe2Q9Z1tjXTtqPWJbZF07aWYoIShqPT09dW5kZWZpbmVkfHwoaj09PWhbZCsiS2V5Il0pKSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0sb246ZnVuY3Rpb24oYixkLGMpe3ZhciBoLGEsZSxnO2lmKHR5cGVvZiBiPT0ib2JqZWN0IiYmIUV4dC5pc0FycmF5KGIpKXtoPWIua2V5O2E9Yi5zaGlmdDtlPWIuY3RybDtnPWIuYWx0fWVsc2V7aD1ifXRoaXMuYWRkQmluZGluZyh7a2V5Omgsc2hpZnQ6YSxjdHJsOmUsYWx0OmcsZm46ZCxzY29wZTpjfSl9LGhhbmRsZUtleURvd246ZnVuY3Rpb24oZyl7aWYodGhpcy5lbmFibGVkKXt2YXIgYz10aGlzLmJpbmRpbmdzO2Zvcih2YXIgZD0wLGE9Yy5sZW5ndGg7ZDxhO2QrKyl7Y1tkXS5jYWxsKHRoaXMsZyl9fX0saXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5hYmxlZH0sZW5hYmxlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZW5hYmxlZCl7dGhpcy5lbC5vbih0aGlzLmV2ZW50TmFtZSx0aGlzLmhhbmRsZUtleURvd24sdGhpcyk7dGhpcy5lbmFibGVkPXRydWV9fSxkaXNhYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVkKXt0aGlzLmVsLnJlbW92ZUxpc3RlbmVyKHRoaXMuZXZlbnROYW1lLHRoaXMuaGFuZGxlS2V5RG93bix0aGlzKTt0aGlzLmVuYWJsZWQ9ZmFsc2V9fSxzZXREaXNhYmxlZDpmdW5jdGlvbihhKXt0aGlzW2E/ImRpc2FibGUiOiJlbmFibGUiXSgpfX07RXh0LnV0aWwuVGV4dE1ldHJpY3M9ZnVuY3Rpb24oKXt2YXIgYTtyZXR1cm57bWVhc3VyZTpmdW5jdGlvbihiLGMsZCl7aWYoIWEpe2E9RXh0LnV0aWwuVGV4dE1ldHJpY3MuSW5zdGFuY2UoYixkKX1hLmJpbmQoYik7YS5zZXRGaXhlZFdpZHRoKGR8fCJhdXRvIik7cmV0dXJuIGEuZ2V0U2l6ZShjKX0sY3JlYXRlSW5zdGFuY2U6ZnVuY3Rpb24oYixjKXtyZXR1cm4gRXh0LnV0aWwuVGV4dE1ldHJpY3MuSW5zdGFuY2UoYixjKX19fSgpO0V4dC51dGlsLlRleHRNZXRyaWNzLkluc3RhbmNlPWZ1bmN0aW9uKGIsZCl7dmFyIGM9bmV3IEV4dC5FbGVtZW50KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGMuZG9tKTtjLnBvc2l0aW9uKCJhYnNvbHV0ZSIpO2Muc2V0TGVmdFRvcCgtMTAwMCwtMTAwMCk7Yy5oaWRlKCk7aWYoZCl7Yy5zZXRXaWR0aChkKX12YXIgYT17Z2V0U2l6ZTpmdW5jdGlvbihnKXtjLnVwZGF0ZShnKTt2YXIgZT1jLmdldFNpemUoKTtjLnVwZGF0ZSgiIik7cmV0dXJuIGV9LGJpbmQ6ZnVuY3Rpb24oZSl7Yy5zZXRTdHlsZShFeHQuZmx5KGUpLmdldFN0eWxlcygiZm9udC1zaXplIiwiZm9udC1zdHlsZSIsImZvbnQtd2VpZ2h0IiwiZm9udC1mYW1pbHkiLCJsaW5lLWhlaWdodCIsInRleHQtdHJhbnNmb3JtIiwibGV0dGVyLXNwYWNpbmciKSl9LHNldEZpeGVkV2lkdGg6ZnVuY3Rpb24oZSl7Yy5zZXRXaWR0aChlKX0sZ2V0V2lkdGg6ZnVuY3Rpb24oZSl7Yy5kb20uc3R5bGUud2lkdGg9ImF1dG8iO3JldHVybiB0aGlzLmdldFNpemUoZSkud2lkdGh9LGdldEhlaWdodDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5nZXRTaXplKGUpLmhlaWdodH19O2EuYmluZChiKTtyZXR1cm4gYX07RXh0LkVsZW1lbnQuYWRkTWV0aG9kcyh7Z2V0VGV4dFdpZHRoOmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4oRXh0LnV0aWwuVGV4dE1ldHJpY3MubWVhc3VyZSh0aGlzLmRvbSxFeHQudmFsdWUoYyx0aGlzLmRvbS5pbm5lckhUTUwsdHJ1ZSkpLndpZHRoKS5jb25zdHJhaW4oYnx8MCxhfHwxMDAwMDAwKX19KTtFeHQudXRpbC5Db29raWVzPXtzZXQ6ZnVuY3Rpb24oYyxlKXt2YXIgYT1hcmd1bWVudHM7dmFyIGk9YXJndW1lbnRzLmxlbmd0aDt2YXIgYj0oaT4yKT9hWzJdOm51bGw7dmFyIGg9KGk+Myk/YVszXToiLyI7dmFyIGQ9KGk+NCk/YVs0XTpudWxsO3ZhciBnPShpPjUpP2FbNV06ZmFsc2U7ZG9jdW1lbnQuY29va2llPWMrIj0iK2VzY2FwZShlKSsoKGI9PT1udWxsKT8iIjooIjsgZXhwaXJlcz0iK2IudG9HTVRTdHJpbmcoKSkpKygoaD09PW51bGwpPyIiOigiOyBwYXRoPSIraCkpKygoZD09PW51bGwpPyIiOigiOyBkb21haW49IitkKSkrKChnPT09dHJ1ZSk/Ijsgc2VjdXJlIjoiIil9LGdldDpmdW5jdGlvbihkKXt2YXIgYj1kKyI9Ijt2YXIgZz1iLmxlbmd0aDt2YXIgYT1kb2N1bWVudC5jb29raWUubGVuZ3RoO3ZhciBlPTA7dmFyIGM9MDt3aGlsZShlPGEpe2M9ZStnO2lmKGRvY3VtZW50LmNvb2tpZS5zdWJzdHJpbmcoZSxjKT09Yil7cmV0dXJuIEV4dC51dGlsLkNvb2tpZXMuZ2V0Q29va2llVmFsKGMpfWU9ZG9jdW1lbnQuY29va2llLmluZGV4T2YoIiAiLGUpKzE7aWYoZT09PTApe2JyZWFrfX1yZXR1cm4gbnVsbH0sY2xlYXI6ZnVuY3Rpb24oYSl7aWYoRXh0LnV0aWwuQ29va2llcy5nZXQoYSkpe2RvY3VtZW50LmNvb2tpZT1hKyI9OyBleHBpcmVzPVRodSwgMDEtSmFuLTcwIDAwOjAwOjAxIEdNVCJ9fSxnZXRDb29raWVWYWw6ZnVuY3Rpb24oYil7dmFyIGE9ZG9jdW1lbnQuY29va2llLmluZGV4T2YoIjsiLGIpO2lmKGE9PS0xKXthPWRvY3VtZW50LmNvb2tpZS5sZW5ndGh9cmV0dXJuIHVuZXNjYXBlKGRvY3VtZW50LmNvb2tpZS5zdWJzdHJpbmcoYixhKSl9fTtFeHQuaGFuZGxlRXJyb3I9ZnVuY3Rpb24oYSl7dGhyb3cgYX07RXh0LkVycm9yPWZ1bmN0aW9uKGEpe3RoaXMubWVzc2FnZT0odGhpcy5sYW5nW2FdKT90aGlzLmxhbmdbYV06YX07RXh0LkVycm9yLnByb3RvdHlwZT1uZXcgRXJyb3IoKTtFeHQuYXBwbHkoRXh0LkVycm9yLnByb3RvdHlwZSx7bGFuZzp7fSxuYW1lOiJFeHQuRXJyb3IiLGdldE5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfSxnZXRNZXNzYWdlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWVzc2FnZX0sdG9Kc29uOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5lbmNvZGUodGhpcyl9fSk7RXh0LkNvbXBvbmVudE1ncj1mdW5jdGlvbigpe3ZhciBjPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTt2YXIgYj17fTt2YXIgYT17fTtyZXR1cm57cmVnaXN0ZXI6ZnVuY3Rpb24oZCl7Yy5hZGQoZCl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oZCl7Yy5yZW1vdmUoZCl9LGdldDpmdW5jdGlvbihkKXtyZXR1cm4gYy5nZXQoZCl9LG9uQXZhaWxhYmxlOmZ1bmN0aW9uKGcsZSxkKXtjLm9uKCJhZGQiLGZ1bmN0aW9uKGgsaSl7aWYoaS5pZD09Zyl7ZS5jYWxsKGR8fGksaSk7Yy51bigiYWRkIixlLGQpfX0pfSxhbGw6Yyx0eXBlczpiLHB0eXBlczphLGlzUmVnaXN0ZXJlZDpmdW5jdGlvbihkKXtyZXR1cm4gYltkXSE9PXVuZGVmaW5lZH0saXNQbHVnaW5SZWdpc3RlcmVkOmZ1bmN0aW9uKGQpe3JldHVybiBhW2RdIT09dW5kZWZpbmVkfSxyZWdpc3RlclR5cGU6ZnVuY3Rpb24oZSxkKXtiW2VdPWQ7ZC54dHlwZT1lfSxjcmVhdGU6ZnVuY3Rpb24oZCxlKXtyZXR1cm4gZC5yZW5kZXI/ZDpuZXcgYltkLnh0eXBlfHxlXShkKX0scmVnaXN0ZXJQbHVnaW46ZnVuY3Rpb24oZSxkKXthW2VdPWQ7ZC5wdHlwZT1lfSxjcmVhdGVQbHVnaW46ZnVuY3Rpb24oZSxnKXt2YXIgZD1hW2UucHR5cGV8fGddO2lmKGQuaW5pdCl7cmV0dXJuIGR9ZWxzZXtyZXR1cm4gbmV3IGQoZSl9fX19KCk7RXh0LnJlZz1FeHQuQ29tcG9uZW50TWdyLnJlZ2lzdGVyVHlwZTtFeHQucHJlZz1FeHQuQ29tcG9uZW50TWdyLnJlZ2lzdGVyUGx1Z2luO0V4dC5jcmVhdGU9RXh0LkNvbXBvbmVudE1nci5jcmVhdGU7RXh0LkNvbXBvbmVudD1mdW5jdGlvbihiKXtiPWJ8fHt9O2lmKGIuaW5pdGlhbENvbmZpZyl7aWYoYi5pc0FjdGlvbil7dGhpcy5iYXNlQWN0aW9uPWJ9Yj1iLmluaXRpYWxDb25maWd9ZWxzZXtpZihiLnRhZ05hbWV8fGIuZG9tfHxFeHQuaXNTdHJpbmcoYikpe2I9e2FwcGx5VG86YixpZDpiLmlkfHxifX19dGhpcy5pbml0aWFsQ29uZmlnPWI7RXh0LmFwcGx5KHRoaXMsYik7dGhpcy5hZGRFdmVudHMoImFkZGVkIiwiZGlzYWJsZSIsImVuYWJsZSIsImJlZm9yZXNob3ciLCJzaG93IiwiYmVmb3JlaGlkZSIsImhpZGUiLCJyZW1vdmVkIiwiYmVmb3JlcmVuZGVyIiwicmVuZGVyIiwiYWZ0ZXJyZW5kZXIiLCJiZWZvcmVkZXN0cm95IiwiZGVzdHJveSIsImJlZm9yZXN0YXRlcmVzdG9yZSIsInN0YXRlcmVzdG9yZSIsImJlZm9yZXN0YXRlc2F2ZSIsInN0YXRlc2F2ZSIpO3RoaXMuZ2V0SWQoKTtFeHQuQ29tcG9uZW50TWdyLnJlZ2lzdGVyKHRoaXMpO0V4dC5Db21wb25lbnQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO2lmKHRoaXMuYmFzZUFjdGlvbil7dGhpcy5iYXNlQWN0aW9uLmFkZENvbXBvbmVudCh0aGlzKX10aGlzLmluaXRDb21wb25lbnQoKTtpZih0aGlzLnBsdWdpbnMpe2lmKEV4dC5pc0FycmF5KHRoaXMucGx1Z2lucykpe2Zvcih2YXIgYz0wLGE9dGhpcy5wbHVnaW5zLmxlbmd0aDtjPGE7YysrKXt0aGlzLnBsdWdpbnNbY109dGhpcy5pbml0UGx1Z2luKHRoaXMucGx1Z2luc1tjXSl9fWVsc2V7dGhpcy5wbHVnaW5zPXRoaXMuaW5pdFBsdWdpbih0aGlzLnBsdWdpbnMpfX1pZih0aGlzLnN0YXRlZnVsIT09ZmFsc2Upe3RoaXMuaW5pdFN0YXRlKCl9aWYodGhpcy5hcHBseVRvKXt0aGlzLmFwcGx5VG9NYXJrdXAodGhpcy5hcHBseVRvKTtkZWxldGUgdGhpcy5hcHBseVRvfWVsc2V7aWYodGhpcy5yZW5kZXJUbyl7dGhpcy5yZW5kZXIodGhpcy5yZW5kZXJUbyk7ZGVsZXRlIHRoaXMucmVuZGVyVG99fX07RXh0LkNvbXBvbmVudC5BVVRPX0lEPTEwMDA7RXh0LmV4dGVuZChFeHQuQ29tcG9uZW50LEV4dC51dGlsLk9ic2VydmFibGUse2Rpc2FibGVkOmZhbHNlLGhpZGRlbjpmYWxzZSxhdXRvRWw6ImRpdiIsZGlzYWJsZWRDbGFzczoieC1pdGVtLWRpc2FibGVkIixhbGxvd0RvbU1vdmU6dHJ1ZSxhdXRvU2hvdzpmYWxzZSxoaWRlTW9kZToiZGlzcGxheSIsaGlkZVBhcmVudDpmYWxzZSxyZW5kZXJlZDpmYWxzZSx0cGxXcml0ZU1vZGU6Im92ZXJ3cml0ZSIsYnViYmxlRXZlbnRzOltdLGN0eXBlOiJFeHQuQ29tcG9uZW50IixhY3Rpb25Nb2RlOiJlbCIsZ2V0QWN0aW9uRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0aGlzLmFjdGlvbk1vZGVdfSxpbml0UGx1Z2luOmZ1bmN0aW9uKGEpe2lmKGEucHR5cGUmJiFFeHQuaXNGdW5jdGlvbihhLmluaXQpKXthPUV4dC5Db21wb25lbnRNZ3IuY3JlYXRlUGx1Z2luKGEpfWVsc2V7aWYoRXh0LmlzU3RyaW5nKGEpKXthPUV4dC5Db21wb25lbnRNZ3IuY3JlYXRlUGx1Z2luKHtwdHlwZTphfSl9fWEuaW5pdCh0aGlzKTtyZXR1cm4gYX0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe2lmKHRoaXMubGlzdGVuZXJzKXt0aGlzLm9uKHRoaXMubGlzdGVuZXJzKTtkZWxldGUgdGhpcy5saXN0ZW5lcnN9dGhpcy5lbmFibGVCdWJibGUodGhpcy5idWJibGVFdmVudHMpfSxyZW5kZXI6ZnVuY3Rpb24oYixhKXtpZighdGhpcy5yZW5kZXJlZCYmdGhpcy5maXJlRXZlbnQoImJlZm9yZXJlbmRlciIsdGhpcykhPT1mYWxzZSl7aWYoIWImJnRoaXMuZWwpe3RoaXMuZWw9RXh0LmdldCh0aGlzLmVsKTtiPXRoaXMuZWwuZG9tLnBhcmVudE5vZGU7dGhpcy5hbGxvd0RvbU1vdmU9ZmFsc2V9dGhpcy5jb250YWluZXI9RXh0LmdldChiKTtpZih0aGlzLmN0Q2xzKXt0aGlzLmNvbnRhaW5lci5hZGRDbGFzcyh0aGlzLmN0Q2xzKX10aGlzLnJlbmRlcmVkPXRydWU7aWYoYSE9PXVuZGVmaW5lZCl7aWYoRXh0LmlzTnVtYmVyKGEpKXthPXRoaXMuY29udGFpbmVyLmRvbS5jaGlsZE5vZGVzW2FdfWVsc2V7YT1FeHQuZ2V0RG9tKGEpfX10aGlzLm9uUmVuZGVyKHRoaXMuY29udGFpbmVyLGF8fG51bGwpO2lmKHRoaXMuYXV0b1Nob3cpe3RoaXMuZWwucmVtb3ZlQ2xhc3MoWyJ4LWhpZGRlbiIsIngtaGlkZS0iK3RoaXMuaGlkZU1vZGVdKX1pZih0aGlzLmNscyl7dGhpcy5lbC5hZGRDbGFzcyh0aGlzLmNscyk7ZGVsZXRlIHRoaXMuY2xzfWlmKHRoaXMuc3R5bGUpe3RoaXMuZWwuYXBwbHlTdHlsZXModGhpcy5zdHlsZSk7ZGVsZXRlIHRoaXMuc3R5bGV9aWYodGhpcy5vdmVyQ2xzKXt0aGlzLmVsLmFkZENsYXNzT25PdmVyKHRoaXMub3ZlckNscyl9dGhpcy5maXJlRXZlbnQoInJlbmRlciIsdGhpcyk7dmFyIGM9dGhpcy5nZXRDb250ZW50VGFyZ2V0KCk7aWYodGhpcy5odG1sKXtjLnVwZGF0ZShFeHQuRG9tSGVscGVyLm1hcmt1cCh0aGlzLmh0bWwpKTtkZWxldGUgdGhpcy5odG1sfWlmKHRoaXMuY29udGVudEVsKXt2YXIgZD1FeHQuZ2V0RG9tKHRoaXMuY29udGVudEVsKTtFeHQuZmx5KGQpLnJlbW92ZUNsYXNzKFsieC1oaWRkZW4iLCJ4LWhpZGUtZGlzcGxheSJdKTtjLmFwcGVuZENoaWxkKGQpfWlmKHRoaXMudHBsKXtpZighdGhpcy50cGwuY29tcGlsZSl7dGhpcy50cGw9bmV3IEV4dC5YVGVtcGxhdGUodGhpcy50cGwpfWlmKHRoaXMuZGF0YSl7dGhpcy50cGxbdGhpcy50cGxXcml0ZU1vZGVdKGMsdGhpcy5kYXRhKTtkZWxldGUgdGhpcy5kYXRhfX10aGlzLmFmdGVyUmVuZGVyKHRoaXMuY29udGFpbmVyKTtpZih0aGlzLmhpZGRlbil7dGhpcy5kb0hpZGUoKX1pZih0aGlzLmRpc2FibGVkKXt0aGlzLmRpc2FibGUodHJ1ZSl9aWYodGhpcy5zdGF0ZWZ1bCE9PWZhbHNlKXt0aGlzLmluaXRTdGF0ZUV2ZW50cygpfXRoaXMuZmlyZUV2ZW50KCJhZnRlcnJlbmRlciIsdGhpcyl9cmV0dXJuIHRoaXN9LHVwZGF0ZTpmdW5jdGlvbihiLGQsYSl7dmFyIGM9dGhpcy5nZXRDb250ZW50VGFyZ2V0KCk7aWYodGhpcy50cGwmJnR5cGVvZiBiIT09InN0cmluZyIpe3RoaXMudHBsW3RoaXMudHBsV3JpdGVNb2RlXShjLGJ8fHt9KX1lbHNle3ZhciBlPUV4dC5pc09iamVjdChiKT9FeHQuRG9tSGVscGVyLm1hcmt1cChiKTpiO2MudXBkYXRlKGUsZCxhKX19LG9uQWRkZWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLm93bmVyQ3Q9YTt0aGlzLmluaXRSZWYoKTt0aGlzLmZpcmVFdmVudCgiYWRkZWQiLHRoaXMsYSxiKX0sb25SZW1vdmVkOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVSZWYoKTt0aGlzLmZpcmVFdmVudCgicmVtb3ZlZCIsdGhpcyx0aGlzLm93bmVyQ3QpO2RlbGV0ZSB0aGlzLm93bmVyQ3R9LGluaXRSZWY6ZnVuY3Rpb24oKXtpZih0aGlzLnJlZiYmIXRoaXMucmVmT3duZXIpe3ZhciBkPXRoaXMucmVmLnNwbGl0KCIvIiksYz1kLmxlbmd0aCxiPTAsYT10aGlzO3doaWxlKGEmJmI8Yyl7YT1hLm93bmVyQ3Q7KytifWlmKGEpe2FbdGhpcy5yZWZOYW1lPWRbLS1iXV09dGhpczt0aGlzLnJlZk93bmVyPWF9fX0scmVtb3ZlUmVmOmZ1bmN0aW9uKCl7aWYodGhpcy5yZWZPd25lciYmdGhpcy5yZWZOYW1lKXtkZWxldGUgdGhpcy5yZWZPd25lclt0aGlzLnJlZk5hbWVdO2RlbGV0ZSB0aGlzLnJlZk93bmVyfX0saW5pdFN0YXRlOmZ1bmN0aW9uKCl7aWYoRXh0LnN0YXRlLk1hbmFnZXIpe3ZhciBiPXRoaXMuZ2V0U3RhdGVJZCgpO2lmKGIpe3ZhciBhPUV4dC5zdGF0ZS5NYW5hZ2VyLmdldChiKTtpZihhKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc3RhdGVyZXN0b3JlIix0aGlzLGEpIT09ZmFsc2Upe3RoaXMuYXBwbHlTdGF0ZShFeHQuYXBwbHkoe30sYSkpO3RoaXMuZmlyZUV2ZW50KCJzdGF0ZXJlc3RvcmUiLHRoaXMsYSl9fX19fSxnZXRTdGF0ZUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdGVJZHx8KCgvXihleHQtY29tcC18ZXh0LWdlbikvKS50ZXN0KFN0cmluZyh0aGlzLmlkKSk/bnVsbDp0aGlzLmlkKX0saW5pdFN0YXRlRXZlbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5zdGF0ZUV2ZW50cyl7Zm9yKHZhciBhPTAsYjtiPXRoaXMuc3RhdGVFdmVudHNbYV07YSsrKXt0aGlzLm9uKGIsdGhpcy5zYXZlU3RhdGUsdGhpcyx7ZGVsYXk6MTAwfSl9fX0sYXBwbHlTdGF0ZTpmdW5jdGlvbihhKXtpZihhKXtFeHQuYXBwbHkodGhpcyxhKX19LGdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHNhdmVTdGF0ZTpmdW5jdGlvbigpe2lmKEV4dC5zdGF0ZS5NYW5hZ2VyJiZ0aGlzLnN0YXRlZnVsIT09ZmFsc2Upe3ZhciBiPXRoaXMuZ2V0U3RhdGVJZCgpO2lmKGIpe3ZhciBhPXRoaXMuZ2V0U3RhdGUoKTtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc3RhdGVzYXZlIix0aGlzLGEpIT09ZmFsc2Upe0V4dC5zdGF0ZS5NYW5hZ2VyLnNldChiLGEpO3RoaXMuZmlyZUV2ZW50KCJzdGF0ZXNhdmUiLHRoaXMsYSl9fX19LGFwcGx5VG9NYXJrdXA6ZnVuY3Rpb24oYSl7dGhpcy5hbGxvd0RvbU1vdmU9ZmFsc2U7dGhpcy5lbD1FeHQuZ2V0KGEpO3RoaXMucmVuZGVyKHRoaXMuZWwuZG9tLnBhcmVudE5vZGUpfSxhZGRDbGFzczpmdW5jdGlvbihhKXtpZih0aGlzLmVsKXt0aGlzLmVsLmFkZENsYXNzKGEpfWVsc2V7dGhpcy5jbHM9dGhpcy5jbHM/dGhpcy5jbHMrIiAiK2E6YX1yZXR1cm4gdGhpc30scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7aWYodGhpcy5lbCl7dGhpcy5lbC5yZW1vdmVDbGFzcyhhKX1lbHNle2lmKHRoaXMuY2xzKXt0aGlzLmNscz10aGlzLmNscy5zcGxpdCgiICIpLnJlbW92ZShhKS5qb2luKCIgIil9fXJldHVybiB0aGlzfSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe2lmKCF0aGlzLmVsJiZ0aGlzLmF1dG9FbCl7aWYoRXh0LmlzU3RyaW5nKHRoaXMuYXV0b0VsKSl7dGhpcy5lbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuYXV0b0VsKX1lbHNle3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO0V4dC5Eb21IZWxwZXIub3ZlcndyaXRlKGMsdGhpcy5hdXRvRWwpO3RoaXMuZWw9Yy5maXJzdENoaWxkfWlmKCF0aGlzLmVsLmlkKXt0aGlzLmVsLmlkPXRoaXMuZ2V0SWQoKX19aWYodGhpcy5lbCl7dGhpcy5lbD1FeHQuZ2V0KHRoaXMuZWwpO2lmKHRoaXMuYWxsb3dEb21Nb3ZlIT09ZmFsc2Upe2IuZG9tLmluc2VydEJlZm9yZSh0aGlzLmVsLmRvbSxhKTtpZihjKXtFeHQucmVtb3ZlTm9kZShjKTtjPW51bGx9fX19LGdldEF1dG9DcmVhdGU6ZnVuY3Rpb24oKXt2YXIgYT1FeHQuaXNPYmplY3QodGhpcy5hdXRvQ3JlYXRlKT90aGlzLmF1dG9DcmVhdGU6RXh0LmFwcGx5KHt9LHRoaXMuZGVmYXVsdEF1dG9DcmVhdGUpO2lmKHRoaXMuaWQmJiFhLmlkKXthLmlkPXRoaXMuaWR9cmV0dXJuIGF9LGFmdGVyUmVuZGVyOkV4dC5lbXB0eUZuLGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rlc3Ryb3llZCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWRlc3Ryb3kiLHRoaXMpIT09ZmFsc2Upe3RoaXMuZGVzdHJveWluZz10cnVlO3RoaXMuYmVmb3JlRGVzdHJveSgpO2lmKHRoaXMub3duZXJDdCYmdGhpcy5vd25lckN0LnJlbW92ZSl7dGhpcy5vd25lckN0LnJlbW92ZSh0aGlzLGZhbHNlKX1pZih0aGlzLnJlbmRlcmVkKXt0aGlzLmVsLnJlbW92ZSgpO2lmKHRoaXMuYWN0aW9uTW9kZT09ImNvbnRhaW5lciJ8fHRoaXMucmVtb3ZlTW9kZT09ImNvbnRhaW5lciIpe3RoaXMuY29udGFpbmVyLnJlbW92ZSgpfX1pZih0aGlzLmZvY3VzVGFzayYmdGhpcy5mb2N1c1Rhc2suY2FuY2VsKXt0aGlzLmZvY3VzVGFzay5jYW5jZWwoKX10aGlzLm9uRGVzdHJveSgpO0V4dC5Db21wb25lbnRNZ3IudW5yZWdpc3Rlcih0aGlzKTt0aGlzLmZpcmVFdmVudCgiZGVzdHJveSIsdGhpcyk7dGhpcy5wdXJnZUxpc3RlbmVycygpO3RoaXMuZGVzdHJveWluZz1mYWxzZTt0aGlzLmlzRGVzdHJveWVkPXRydWV9fX0sZGVsZXRlTWVtYmVyczpmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cztmb3IodmFyIGM9MCxhPWIubGVuZ3RoO2M8YTsrK2Mpe2RlbGV0ZSB0aGlzW2JbY11dfX0sYmVmb3JlRGVzdHJveTpFeHQuZW1wdHlGbixvbkRlc3Ryb3k6RXh0LmVtcHR5Rm4sZ2V0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0Q29udGVudFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfHwodGhpcy5pZD0iZXh0LWNvbXAtIisoKytFeHQuQ29tcG9uZW50LkFVVE9fSUQpKX0sZ2V0SXRlbUlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXRlbUlkfHx0aGlzLmdldElkKCl9LGZvY3VzOmZ1bmN0aW9uKGIsYSl7aWYoYSl7dGhpcy5mb2N1c1Rhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKHRoaXMuZm9jdXMsdGhpcyxbYixmYWxzZV0pO3RoaXMuZm9jdXNUYXNrLmRlbGF5KEV4dC5pc051bWJlcihhKT9hOjEwKTtyZXR1cm4gdGhpc31pZih0aGlzLnJlbmRlcmVkJiYhdGhpcy5pc0Rlc3Ryb3llZCl7dGhpcy5lbC5mb2N1cygpO2lmKGI9PT10cnVlKXt0aGlzLmVsLmRvbS5zZWxlY3QoKX19cmV0dXJuIHRoaXN9LGJsdXI6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmVsLmJsdXIoKX1yZXR1cm4gdGhpc30sZGlzYWJsZTpmdW5jdGlvbihhKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLm9uRGlzYWJsZSgpfXRoaXMuZGlzYWJsZWQ9dHJ1ZTtpZihhIT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoImRpc2FibGUiLHRoaXMpfXJldHVybiB0aGlzfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmdldEFjdGlvbkVsKCkuYWRkQ2xhc3ModGhpcy5kaXNhYmxlZENsYXNzKTt0aGlzLmVsLmRvbS5kaXNhYmxlZD10cnVlfSxlbmFibGU6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLm9uRW5hYmxlKCl9dGhpcy5kaXNhYmxlZD1mYWxzZTt0aGlzLmZpcmVFdmVudCgiZW5hYmxlIix0aGlzKTtyZXR1cm4gdGhpc30sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmdldEFjdGlvbkVsKCkucmVtb3ZlQ2xhc3ModGhpcy5kaXNhYmxlZENsYXNzKTt0aGlzLmVsLmRvbS5kaXNhYmxlZD1mYWxzZX0sc2V0RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYT8iZGlzYWJsZSI6ImVuYWJsZSJdKCl9LHNob3c6ZnVuY3Rpb24oKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc2hvdyIsdGhpcykhPT1mYWxzZSl7dGhpcy5oaWRkZW49ZmFsc2U7aWYodGhpcy5hdXRvUmVuZGVyKXt0aGlzLnJlbmRlcihFeHQuaXNCb29sZWFuKHRoaXMuYXV0b1JlbmRlcik/RXh0LmdldEJvZHkoKTp0aGlzLmF1dG9SZW5kZXIpfWlmKHRoaXMucmVuZGVyZWQpe3RoaXMub25TaG93KCl9dGhpcy5maXJlRXZlbnQoInNob3ciLHRoaXMpfXJldHVybiB0aGlzfSxvblNob3c6ZnVuY3Rpb24oKXt0aGlzLmdldFZpc2liaWxpdHlFbCgpLnJlbW92ZUNsYXNzKCJ4LWhpZGUtIit0aGlzLmhpZGVNb2RlKX0saGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVoaWRlIix0aGlzKSE9PWZhbHNlKXt0aGlzLmRvSGlkZSgpO3RoaXMuZmlyZUV2ZW50KCJoaWRlIix0aGlzKX1yZXR1cm4gdGhpc30sZG9IaWRlOmZ1bmN0aW9uKCl7dGhpcy5oaWRkZW49dHJ1ZTtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLm9uSGlkZSgpfX0sb25IaWRlOmZ1bmN0aW9uKCl7dGhpcy5nZXRWaXNpYmlsaXR5RWwoKS5hZGRDbGFzcygieC1oaWRlLSIrdGhpcy5oaWRlTW9kZSl9LGdldFZpc2liaWxpdHlFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhpZGVQYXJlbnQ/dGhpcy5jb250YWluZXI6dGhpcy5nZXRBY3Rpb25FbCgpfSxzZXRWaXNpYmxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2E/InNob3ciOiJoaWRlIl0oKX0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZWQmJnRoaXMuZ2V0VmlzaWJpbGl0eUVsKCkuaXNWaXNpYmxlKCl9LGNsb25lQ29uZmlnOmZ1bmN0aW9uKGIpe2I9Ynx8e307dmFyIGM9Yi5pZHx8RXh0LmlkKCk7dmFyIGE9RXh0LmFwcGx5SWYoYix0aGlzLmluaXRpYWxDb25maWcpO2EuaWQ9YztyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IoYSl9LGdldFhUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29uc3RydWN0b3IueHR5cGV9LGlzWFR5cGU6ZnVuY3Rpb24oYixhKXtpZihFeHQuaXNGdW5jdGlvbihiKSl7Yj1iLnh0eXBlfWVsc2V7aWYoRXh0LmlzT2JqZWN0KGIpKXtiPWIuY29uc3RydWN0b3IueHR5cGV9fXJldHVybiAhYT8oIi8iK3RoaXMuZ2V0WFR5cGVzKCkrIi8iKS5pbmRleE9mKCIvIitiKyIvIikhPS0xOnRoaXMuY29uc3RydWN0b3IueHR5cGU9PWJ9LGdldFhUeXBlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29uc3RydWN0b3I7aWYoIWEueHR5cGVzKXt2YXIgZD1bXSxiPXRoaXM7d2hpbGUoYiYmYi5jb25zdHJ1Y3Rvci54dHlwZSl7ZC51bnNoaWZ0KGIuY29uc3RydWN0b3IueHR5cGUpO2I9Yi5jb25zdHJ1Y3Rvci5zdXBlcmNsYXNzfWEueHR5cGVDaGFpbj1kO2EueHR5cGVzPWQuam9pbigiLyIpfXJldHVybiBhLnh0eXBlc30sZmluZFBhcmVudEJ5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLm93bmVyQ3Q7KGIhPW51bGwpJiYhYShiLHRoaXMpO2I9Yi5vd25lckN0KXt9cmV0dXJuIGJ8fG51bGx9LGZpbmRQYXJlbnRCeVR5cGU6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5maW5kUGFyZW50QnkoZnVuY3Rpb24oZCl7cmV0dXJuIGQuaXNYVHlwZShiLGEpfSl9LGJ1YmJsZTpmdW5jdGlvbihjLGIsYSl7dmFyIGQ9dGhpczt3aGlsZShkKXtpZihjLmFwcGx5KGJ8fGQsYXx8W2RdKT09PWZhbHNlKXticmVha31kPWQub3duZXJDdH1yZXR1cm4gdGhpc30sZ2V0UG9zaXRpb25FbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uRWx8fHRoaXMuZWx9LHB1cmdlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7RXh0LkNvbXBvbmVudC5zdXBlcmNsYXNzLnB1cmdlTGlzdGVuZXJzLmNhbGwodGhpcyk7aWYodGhpcy5tb25zKXt0aGlzLm9uKCJiZWZvcmVkZXN0cm95Iix0aGlzLmNsZWFyTW9ucyx0aGlzLHtzaW5nbGU6dHJ1ZX0pfX0sY2xlYXJNb25zOmZ1bmN0aW9uKCl7RXh0LmVhY2godGhpcy5tb25zLGZ1bmN0aW9uKGEpe2EuaXRlbS51bihhLmVuYW1lLGEuZm4sYS5zY29wZSl9LHRoaXMpO3RoaXMubW9ucz1bXX0sY3JlYXRlTW9uczpmdW5jdGlvbigpe2lmKCF0aGlzLm1vbnMpe3RoaXMubW9ucz1bXTt0aGlzLm9uKCJiZWZvcmVkZXN0cm95Iix0aGlzLmNsZWFyTW9ucyx0aGlzLHtzaW5nbGU6dHJ1ZX0pfX0sbW9uOmZ1bmN0aW9uKGcsYixkLGMsYSl7dGhpcy5jcmVhdGVNb25zKCk7aWYoRXh0LmlzT2JqZWN0KGIpKXt2YXIgaj0vXig/OnNjb3BlfGRlbGF5fGJ1ZmZlcnxzaW5nbGV8c3RvcEV2ZW50fHByZXZlbnREZWZhdWx0fHN0b3BQcm9wYWdhdGlvbnxub3JtYWxpemVkfGFyZ3N8ZGVsZWdhdGUpJC87dmFyIGk9Yjtmb3IodmFyIGggaW4gaSl7aWYoai50ZXN0KGgpKXtjb250aW51ZX1pZihFeHQuaXNGdW5jdGlvbihpW2hdKSl7dGhpcy5tb25zLnB1c2goe2l0ZW06ZyxlbmFtZTpoLGZuOmlbaF0sc2NvcGU6aS5zY29wZX0pO2cub24oaCxpW2hdLGkuc2NvcGUsaSl9ZWxzZXt0aGlzLm1vbnMucHVzaCh7aXRlbTpnLGVuYW1lOmgsZm46aVtoXSxzY29wZTppLnNjb3BlfSk7Zy5vbihoLGlbaF0pfX1yZXR1cm59dGhpcy5tb25zLnB1c2goe2l0ZW06ZyxlbmFtZTpiLGZuOmQsc2NvcGU6Y30pO2cub24oYixkLGMsYSl9LG11bjpmdW5jdGlvbihoLGMsZyxlKXt2YXIgaixkO3RoaXMuY3JlYXRlTW9ucygpO2Zvcih2YXIgYj0wLGE9dGhpcy5tb25zLmxlbmd0aDtiPGE7KytiKXtkPXRoaXMubW9uc1tiXTtpZihoPT09ZC5pdGVtJiZjPT1kLmVuYW1lJiZnPT09ZC5mbiYmZT09PWQuc2NvcGUpe3RoaXMubW9ucy5zcGxpY2UoYiwxKTtoLnVuKGMsZyxlKTtqPXRydWU7YnJlYWt9fXJldHVybiBqfSxuZXh0U2libGluZzpmdW5jdGlvbigpe2lmKHRoaXMub3duZXJDdCl7dmFyIGE9dGhpcy5vd25lckN0Lml0ZW1zLmluZGV4T2YodGhpcyk7aWYoYSE9LTEmJmErMTx0aGlzLm93bmVyQ3QuaXRlbXMuZ2V0Q291bnQoKSl7cmV0dXJuIHRoaXMub3duZXJDdC5pdGVtcy5pdGVtQXQoYSsxKX19cmV0dXJuIG51bGx9LHByZXZpb3VzU2libGluZzpmdW5jdGlvbigpe2lmKHRoaXMub3duZXJDdCl7dmFyIGE9dGhpcy5vd25lckN0Lml0ZW1zLmluZGV4T2YodGhpcyk7aWYoYT4wKXtyZXR1cm4gdGhpcy5vd25lckN0Lml0ZW1zLml0ZW1BdChhLTEpfX1yZXR1cm4gbnVsbH0sZ2V0QnViYmxlVGFyZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJDdH19KTtFeHQucmVnKCJjb21wb25lbnQiLEV4dC5Db21wb25lbnQpO0V4dC5BY3Rpb249RXh0LmV4dGVuZChPYmplY3Qse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMuaW5pdGlhbENvbmZpZz1hO3RoaXMuaXRlbUlkPWEuaXRlbUlkPShhLml0ZW1JZHx8YS5pZHx8RXh0LmlkKCkpO3RoaXMuaXRlbXM9W119LGlzQWN0aW9uOnRydWUsc2V0VGV4dDpmdW5jdGlvbihhKXt0aGlzLmluaXRpYWxDb25maWcudGV4dD1hO3RoaXMuY2FsbEVhY2goInNldFRleHQiLFthXSl9LGdldFRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbml0aWFsQ29uZmlnLnRleHR9LHNldEljb25DbGFzczpmdW5jdGlvbihhKXt0aGlzLmluaXRpYWxDb25maWcuaWNvbkNscz1hO3RoaXMuY2FsbEVhY2goInNldEljb25DbGFzcyIsW2FdKX0sZ2V0SWNvbkNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdGlhbENvbmZpZy5pY29uQ2xzfSxzZXREaXNhYmxlZDpmdW5jdGlvbihhKXt0aGlzLmluaXRpYWxDb25maWcuZGlzYWJsZWQ9YTt0aGlzLmNhbGxFYWNoKCJzZXREaXNhYmxlZCIsW2FdKX0sZW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5zZXREaXNhYmxlZChmYWxzZSl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLnNldERpc2FibGVkKHRydWUpfSxpc0Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5pdGlhbENvbmZpZy5kaXNhYmxlZH0sc2V0SGlkZGVuOmZ1bmN0aW9uKGEpe3RoaXMuaW5pdGlhbENvbmZpZy5oaWRkZW49YTt0aGlzLmNhbGxFYWNoKCJzZXRWaXNpYmxlIixbIWFdKX0sc2hvdzpmdW5jdGlvbigpe3RoaXMuc2V0SGlkZGVuKGZhbHNlKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuc2V0SGlkZGVuKHRydWUpfSxpc0hpZGRlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmluaXRpYWxDb25maWcuaGlkZGVufSxzZXRIYW5kbGVyOmZ1bmN0aW9uKGIsYSl7dGhpcy5pbml0aWFsQ29uZmlnLmhhbmRsZXI9Yjt0aGlzLmluaXRpYWxDb25maWcuc2NvcGU9YTt0aGlzLmNhbGxFYWNoKCJzZXRIYW5kbGVyIixbYixhXSl9LGVhY2g6ZnVuY3Rpb24oYixhKXtFeHQuZWFjaCh0aGlzLml0ZW1zLGIsYSl9LGNhbGxFYWNoOmZ1bmN0aW9uKGUsYil7dmFyIGQ9dGhpcy5pdGVtcztmb3IodmFyIGM9MCxhPWQubGVuZ3RoO2M8YTtjKyspe2RbY11bZV0uYXBwbHkoZFtjXSxiKX19LGFkZENvbXBvbmVudDpmdW5jdGlvbihhKXt0aGlzLml0ZW1zLnB1c2goYSk7YS5vbigiZGVzdHJveSIsdGhpcy5yZW1vdmVDb21wb25lbnQsdGhpcyl9LHJlbW92ZUNvbXBvbmVudDpmdW5jdGlvbihhKXt0aGlzLml0ZW1zLnJlbW92ZShhKX0sZXhlY3V0ZTpmdW5jdGlvbigpe3RoaXMuaW5pdGlhbENvbmZpZy5oYW5kbGVyLmFwcGx5KHRoaXMuaW5pdGlhbENvbmZpZy5zY29wZXx8d2luZG93LGFyZ3VtZW50cyl9fSk7KGZ1bmN0aW9uKCl7RXh0LkxheWVyPWZ1bmN0aW9uKGQsYyl7ZD1kfHx7fTt2YXIgZT1FeHQuRG9tSGVscGVyLGg9ZC5wYXJlbnRFbCxnPWg/RXh0LmdldERvbShoKTpkb2N1bWVudC5ib2R5O2lmKGMpe3RoaXMuZG9tPUV4dC5nZXREb20oYyl9aWYoIXRoaXMuZG9tKXt2YXIgaT1kLmRofHx7dGFnOiJkaXYiLGNsczoieC1sYXllciJ9O3RoaXMuZG9tPWUuYXBwZW5kKGcsaSl9aWYoZC5jbHMpe3RoaXMuYWRkQ2xhc3MoZC5jbHMpfXRoaXMuY29uc3RyYWluPWQuY29uc3RyYWluIT09ZmFsc2U7dGhpcy5zZXRWaXNpYmlsaXR5TW9kZShFeHQuRWxlbWVudC5WSVNJQklMSVRZKTtpZihkLmlkKXt0aGlzLmlkPXRoaXMuZG9tLmlkPWQuaWR9ZWxzZXt0aGlzLmlkPUV4dC5pZCh0aGlzLmRvbSl9dGhpcy56aW5kZXg9ZC56aW5kZXh8fHRoaXMuZ2V0WkluZGV4KCk7dGhpcy5wb3NpdGlvbigiYWJzb2x1dGUiLHRoaXMuemluZGV4KTtpZihkLnNoYWRvdyl7dGhpcy5zaGFkb3dPZmZzZXQ9ZC5zaGFkb3dPZmZzZXR8fDQ7dGhpcy5zaGFkb3c9bmV3IEV4dC5TaGFkb3coe29mZnNldDp0aGlzLnNoYWRvd09mZnNldCxtb2RlOmQuc2hhZG93fSl9ZWxzZXt0aGlzLnNoYWRvd09mZnNldD0wfXRoaXMudXNlU2hpbT1kLnNoaW0hPT1mYWxzZSYmRXh0LnVzZVNoaW1zO3RoaXMudXNlRGlzcGxheT1kLnVzZURpc3BsYXk7dGhpcy5oaWRlKCl9O3ZhciBhPUV4dC5FbGVtZW50LnByb3RvdHlwZTt2YXIgYj1bXTtFeHQuZXh0ZW5kKEV4dC5MYXllcixFeHQuRWxlbWVudCx7Z2V0WkluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuemluZGV4fHxwYXJzZUludCgodGhpcy5nZXRTaGltKCl8fHRoaXMpLmdldFN0eWxlKCJ6LWluZGV4IiksMTApfHwxMTAwMH0sZ2V0U2hpbTpmdW5jdGlvbigpe2lmKCF0aGlzLnVzZVNoaW0pe3JldHVybiBudWxsfWlmKHRoaXMuc2hpbSl7cmV0dXJuIHRoaXMuc2hpbX12YXIgZD1iLnNoaWZ0KCk7aWYoIWQpe2Q9dGhpcy5jcmVhdGVTaGltKCk7ZC5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTtkLmRvbS5zdHlsZS5kaXNwbGF5PSJub25lIjtkLmRvbS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIn12YXIgYz10aGlzLmRvbS5wYXJlbnROb2RlO2lmKGQuZG9tLnBhcmVudE5vZGUhPWMpe2MuaW5zZXJ0QmVmb3JlKGQuZG9tLHRoaXMuZG9tKX1kLnNldFN0eWxlKCJ6LWluZGV4Iix0aGlzLmdldFpJbmRleCgpLTIpO3RoaXMuc2hpbT1kO3JldHVybiBkfSxoaWRlU2hpbTpmdW5jdGlvbigpe2lmKHRoaXMuc2hpbSl7dGhpcy5zaGltLnNldERpc3BsYXllZChmYWxzZSk7Yi5wdXNoKHRoaXMuc2hpbSk7ZGVsZXRlIHRoaXMuc2hpbX19LGRpc2FibGVTaGFkb3c6ZnVuY3Rpb24oKXtpZih0aGlzLnNoYWRvdyl7dGhpcy5zaGFkb3dEaXNhYmxlZD10cnVlO3RoaXMuc2hhZG93LmhpZGUoKTt0aGlzLmxhc3RTaGFkb3dPZmZzZXQ9dGhpcy5zaGFkb3dPZmZzZXQ7dGhpcy5zaGFkb3dPZmZzZXQ9MH19LGVuYWJsZVNoYWRvdzpmdW5jdGlvbihjKXtpZih0aGlzLnNoYWRvdyl7dGhpcy5zaGFkb3dEaXNhYmxlZD1mYWxzZTtpZihFeHQuaXNEZWZpbmVkKHRoaXMubGFzdFNoYWRvd09mZnNldCkpe3RoaXMuc2hhZG93T2Zmc2V0PXRoaXMubGFzdFNoYWRvd09mZnNldDtkZWxldGUgdGhpcy5sYXN0U2hhZG93T2Zmc2V0fWlmKGMpe3RoaXMuc3luYyh0cnVlKX19fSxzeW5jOmZ1bmN0aW9uKGQpe3ZhciBuPXRoaXMuc2hhZG93O2lmKCF0aGlzLnVwZGF0aW5nJiZ0aGlzLmlzVmlzaWJsZSgpJiYobnx8dGhpcy51c2VTaGltKSl7dmFyIGk9dGhpcy5nZXRTaGltKCksbT10aGlzLmdldFdpZHRoKCksaj10aGlzLmdldEhlaWdodCgpLGU9dGhpcy5nZXRMZWZ0KHRydWUpLG89dGhpcy5nZXRUb3AodHJ1ZSk7aWYobiYmIXRoaXMuc2hhZG93RGlzYWJsZWQpe2lmKGQmJiFuLmlzVmlzaWJsZSgpKXtuLnNob3codGhpcyl9ZWxzZXtuLnJlYWxpZ24oZSxvLG0sail9aWYoaSl7aWYoZCl7aS5zaG93KCl9dmFyIGs9bi5lbC5nZXRYWSgpLGc9aS5kb20uc3R5bGUsYz1uLmVsLmdldFNpemUoKTtnLmxlZnQ9KGtbMF0pKyJweCI7Zy50b3A9KGtbMV0pKyJweCI7Zy53aWR0aD0oYy53aWR0aCkrInB4IjtnLmhlaWdodD0oYy5oZWlnaHQpKyJweCJ9fWVsc2V7aWYoaSl7aWYoZCl7aS5zaG93KCl9aS5zZXRTaXplKG0saik7aS5zZXRMZWZ0VG9wKGUsbyl9fX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmhpZGVTaGltKCk7aWYodGhpcy5zaGFkb3cpe3RoaXMuc2hhZG93LmhpZGUoKX10aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO0V4dC5yZW1vdmVOb2RlKHRoaXMuZG9tKTtkZWxldGUgdGhpcy5kb219LHJlbW92ZTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveSgpfSxiZWdpblVwZGF0ZTpmdW5jdGlvbigpe3RoaXMudXBkYXRpbmc9dHJ1ZX0sZW5kVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGluZz1mYWxzZTt0aGlzLnN5bmModHJ1ZSl9LGhpZGVVbmRlcnM6ZnVuY3Rpb24oYyl7aWYodGhpcy5zaGFkb3cpe3RoaXMuc2hhZG93LmhpZGUoKX10aGlzLmhpZGVTaGltKCl9LGNvbnN0cmFpblhZOmZ1bmN0aW9uKCl7aWYodGhpcy5jb25zdHJhaW4pe3ZhciBqPUV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCgpLGQ9RXh0LmxpYi5Eb20uZ2V0Vmlld0hlaWdodCgpO3ZhciBvPUV4dC5nZXREb2MoKS5nZXRTY3JvbGwoKTt2YXIgbj10aGlzLmdldFhZKCk7dmFyIGs9blswXSxpPW5bMV07dmFyIGM9dGhpcy5zaGFkb3dPZmZzZXQ7dmFyIGw9dGhpcy5kb20ub2Zmc2V0V2lkdGgrYyxlPXRoaXMuZG9tLm9mZnNldEhlaWdodCtjO3ZhciBnPWZhbHNlO2lmKChrK2wpPmorby5sZWZ0KXtrPWotbC1jO2c9dHJ1ZX1pZigoaStlKT5kK28udG9wKXtpPWQtZS1jO2c9dHJ1ZX1pZihrPG8ubGVmdCl7az1vLmxlZnQ7Zz10cnVlfWlmKGk8by50b3Ape2k9by50b3A7Zz10cnVlfWlmKGcpe2lmKHRoaXMuYXZvaWRZKXt2YXIgbT10aGlzLmF2b2lkWTtpZihpPD1tJiYoaStlKT49bSl7aT1tLWUtNX19bj1bayxpXTt0aGlzLnN0b3JlWFkobik7YS5zZXRYWS5jYWxsKHRoaXMsbik7dGhpcy5zeW5jKCl9fXJldHVybiB0aGlzfSxnZXRDb25zdHJhaW5PZmZzZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3dPZmZzZXR9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGV9LHNob3dBY3Rpb246ZnVuY3Rpb24oKXt0aGlzLnZpc2libGU9dHJ1ZTtpZih0aGlzLnVzZURpc3BsYXk9PT10cnVlKXt0aGlzLnNldERpc3BsYXllZCgiIil9ZWxzZXtpZih0aGlzLmxhc3RYWSl7YS5zZXRYWS5jYWxsKHRoaXMsdGhpcy5sYXN0WFkpfWVsc2V7aWYodGhpcy5sYXN0TFQpe2Euc2V0TGVmdFRvcC5jYWxsKHRoaXMsdGhpcy5sYXN0TFRbMF0sdGhpcy5sYXN0TFRbMV0pfX19fSxoaWRlQWN0aW9uOmZ1bmN0aW9uKCl7dGhpcy52aXNpYmxlPWZhbHNlO2lmKHRoaXMudXNlRGlzcGxheT09PXRydWUpe3RoaXMuc2V0RGlzcGxheWVkKGZhbHNlKX1lbHNle3RoaXMuc2V0TGVmdFRvcCgtMTAwMDAsLTEwMDAwKX19LHNldFZpc2libGU6ZnVuY3Rpb24oaSxoLGssbCxqKXtpZihpKXt0aGlzLnNob3dBY3Rpb24oKX1pZihoJiZpKXt2YXIgZz1mdW5jdGlvbigpe3RoaXMuc3luYyh0cnVlKTtpZihsKXtsKCl9fS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTthLnNldFZpc2libGUuY2FsbCh0aGlzLHRydWUsdHJ1ZSxrLGcsail9ZWxzZXtpZighaSl7dGhpcy5oaWRlVW5kZXJzKHRydWUpfXZhciBnPWw7aWYoaCl7Zz1mdW5jdGlvbigpe3RoaXMuaGlkZUFjdGlvbigpO2lmKGwpe2woKX19LmNyZWF0ZURlbGVnYXRlKHRoaXMpfWEuc2V0VmlzaWJsZS5jYWxsKHRoaXMsaSxoLGssZyxqKTtpZihpKXt0aGlzLnN5bmModHJ1ZSl9ZWxzZXtpZighaCl7dGhpcy5oaWRlQWN0aW9uKCl9fX1yZXR1cm4gdGhpc30sc3RvcmVYWTpmdW5jdGlvbihjKXtkZWxldGUgdGhpcy5sYXN0TFQ7dGhpcy5sYXN0WFk9Y30sc3RvcmVMZWZ0VG9wOmZ1bmN0aW9uKGQsYyl7ZGVsZXRlIHRoaXMubGFzdFhZO3RoaXMubGFzdExUPVtkLGNdfSxiZWZvcmVGeDpmdW5jdGlvbigpe3RoaXMuYmVmb3JlQWN0aW9uKCk7cmV0dXJuIEV4dC5MYXllci5zdXBlcmNsYXNzLmJlZm9yZUZ4LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWZ0ZXJGeDpmdW5jdGlvbigpe0V4dC5MYXllci5zdXBlcmNsYXNzLmFmdGVyRnguYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc3luYyh0aGlzLmlzVmlzaWJsZSgpKX0sYmVmb3JlQWN0aW9uOmZ1bmN0aW9uKCl7aWYoIXRoaXMudXBkYXRpbmcmJnRoaXMuc2hhZG93KXt0aGlzLnNoYWRvdy5oaWRlKCl9fSxzZXRMZWZ0OmZ1bmN0aW9uKGMpe3RoaXMuc3RvcmVMZWZ0VG9wKGMsdGhpcy5nZXRUb3AodHJ1ZSkpO2Euc2V0TGVmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5zeW5jKCk7cmV0dXJuIHRoaXN9LHNldFRvcDpmdW5jdGlvbihjKXt0aGlzLnN0b3JlTGVmdFRvcCh0aGlzLmdldExlZnQodHJ1ZSksYyk7YS5zZXRUb3AuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc3luYygpO3JldHVybiB0aGlzfSxzZXRMZWZ0VG9wOmZ1bmN0aW9uKGQsYyl7dGhpcy5zdG9yZUxlZnRUb3AoZCxjKTthLnNldExlZnRUb3AuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuc3luYygpO3JldHVybiB0aGlzfSxzZXRYWTpmdW5jdGlvbihqLGgsayxsLGkpe3RoaXMuZml4RGlzcGxheSgpO3RoaXMuYmVmb3JlQWN0aW9uKCk7dGhpcy5zdG9yZVhZKGopO3ZhciBnPXRoaXMuY3JlYXRlQ0IobCk7YS5zZXRYWS5jYWxsKHRoaXMsaixoLGssZyxpKTtpZighaCl7ZygpfXJldHVybiB0aGlzfSxjcmVhdGVDQjpmdW5jdGlvbihlKXt2YXIgZD10aGlzO3JldHVybiBmdW5jdGlvbigpe2QuY29uc3RyYWluWFkoKTtkLnN5bmModHJ1ZSk7aWYoZSl7ZSgpfX19LHNldFg6ZnVuY3Rpb24oZyxoLGosayxpKXt0aGlzLnNldFhZKFtnLHRoaXMuZ2V0WSgpXSxoLGosayxpKTtyZXR1cm4gdGhpc30sc2V0WTpmdW5jdGlvbihrLGcsaSxqLGgpe3RoaXMuc2V0WFkoW3RoaXMuZ2V0WCgpLGtdLGcsaSxqLGgpO3JldHVybiB0aGlzfSxzZXRTaXplOmZ1bmN0aW9uKGosayxpLG0sbixsKXt0aGlzLmJlZm9yZUFjdGlvbigpO3ZhciBnPXRoaXMuY3JlYXRlQ0Iobik7YS5zZXRTaXplLmNhbGwodGhpcyxqLGssaSxtLGcsbCk7aWYoIWkpe2coKX1yZXR1cm4gdGhpc30sc2V0V2lkdGg6ZnVuY3Rpb24oaSxoLGssbCxqKXt0aGlzLmJlZm9yZUFjdGlvbigpO3ZhciBnPXRoaXMuY3JlYXRlQ0IobCk7YS5zZXRXaWR0aC5jYWxsKHRoaXMsaSxoLGssZyxqKTtpZighaCl7ZygpfXJldHVybiB0aGlzfSxzZXRIZWlnaHQ6ZnVuY3Rpb24oaixpLGwsbSxrKXt0aGlzLmJlZm9yZUFjdGlvbigpO3ZhciBnPXRoaXMuY3JlYXRlQ0IobSk7YS5zZXRIZWlnaHQuY2FsbCh0aGlzLGosaSxsLGcsayk7aWYoIWkpe2coKX1yZXR1cm4gdGhpc30sc2V0Qm91bmRzOmZ1bmN0aW9uKG8sbSxwLGksbixrLGwsail7dGhpcy5iZWZvcmVBY3Rpb24oKTt2YXIgZz10aGlzLmNyZWF0ZUNCKGwpO2lmKCFuKXt0aGlzLnN0b3JlWFkoW28sbV0pO2Euc2V0WFkuY2FsbCh0aGlzLFtvLG1dKTthLnNldFNpemUuY2FsbCh0aGlzLHAsaSxuLGssZyxqKTtnKCl9ZWxzZXthLnNldEJvdW5kcy5jYWxsKHRoaXMsbyxtLHAsaSxuLGssZyxqKX1yZXR1cm4gdGhpc30sc2V0WkluZGV4OmZ1bmN0aW9uKGMpe3RoaXMuemluZGV4PWM7dGhpcy5zZXRTdHlsZSgiei1pbmRleCIsYysyKTtpZih0aGlzLnNoYWRvdyl7dGhpcy5zaGFkb3cuc2V0WkluZGV4KGMrMSl9aWYodGhpcy5zaGltKXt0aGlzLnNoaW0uc2V0U3R5bGUoInotaW5kZXgiLGMpfXJldHVybiB0aGlzfX0pfSkoKTtFeHQuU2hhZG93PWZ1bmN0aW9uKGQpe0V4dC5hcHBseSh0aGlzLGQpO2lmKHR5cGVvZiB0aGlzLm1vZGUhPSJzdHJpbmciKXt0aGlzLm1vZGU9dGhpcy5kZWZhdWx0TW9kZX12YXIgZT10aGlzLm9mZnNldCxjPXtoOjB9LGI9TWF0aC5mbG9vcih0aGlzLm9mZnNldC8yKTtzd2l0Y2godGhpcy5tb2RlLnRvTG93ZXJDYXNlKCkpe2Nhc2UiZHJvcCI6Yy53PTA7Yy5sPWMudD1lO2MudC09MTtpZihFeHQuaXNJRSl7Yy5sLT10aGlzLm9mZnNldCtiO2MudC09dGhpcy5vZmZzZXQrYjtjLnctPWI7Yy5oLT1iO2MudCs9MX1icmVhaztjYXNlInNpZGVzIjpjLnc9KGUqMik7Yy5sPS1lO2MudD1lLTE7aWYoRXh0LmlzSUUpe2MubC09KHRoaXMub2Zmc2V0LWIpO2MudC09dGhpcy5vZmZzZXQrYjtjLmwrPTE7Yy53LT0odGhpcy5vZmZzZXQtYikqMjtjLnctPWIrMTtjLmgtPTF9YnJlYWs7Y2FzZSJmcmFtZSI6Yy53PWMuaD0oZSoyKTtjLmw9Yy50PS1lO2MudCs9MTtjLmgtPTI7aWYoRXh0LmlzSUUpe2MubC09KHRoaXMub2Zmc2V0LWIpO2MudC09KHRoaXMub2Zmc2V0LWIpO2MubCs9MTtjLnctPSh0aGlzLm9mZnNldCtiKzEpO2MuaC09KHRoaXMub2Zmc2V0K2IpO2MuaCs9MX1icmVha310aGlzLmFkanVzdHM9Y307RXh0LlNoYWRvdy5wcm90b3R5cGU9e29mZnNldDo0LGRlZmF1bHRNb2RlOiJkcm9wIixzaG93OmZ1bmN0aW9uKGEpe2E9RXh0LmdldChhKTtpZighdGhpcy5lbCl7dGhpcy5lbD1FeHQuU2hhZG93LlBvb2wucHVsbCgpO2lmKHRoaXMuZWwuZG9tLm5leHRTaWJsaW5nIT1hLmRvbSl7dGhpcy5lbC5pbnNlcnRCZWZvcmUoYSl9fXRoaXMuZWwuc2V0U3R5bGUoInotaW5kZXgiLHRoaXMuekluZGV4fHxwYXJzZUludChhLmdldFN0eWxlKCJ6LWluZGV4IiksMTApLTEpO2lmKEV4dC5pc0lFKXt0aGlzLmVsLmRvbS5zdHlsZS5maWx0ZXI9InByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5hbHBoYShvcGFjaXR5PTUwKSBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQmx1cihwaXhlbHJhZGl1cz0iKyh0aGlzLm9mZnNldCkrIikifXRoaXMucmVhbGlnbihhLmdldExlZnQodHJ1ZSksYS5nZXRUb3AodHJ1ZSksYS5nZXRXaWR0aCgpLGEuZ2V0SGVpZ2h0KCkpO3RoaXMuZWwuZG9tLnN0eWxlLmRpc3BsYXk9ImJsb2NrIn0saXNWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZWw/dHJ1ZTpmYWxzZX0scmVhbGlnbjpmdW5jdGlvbihiLHIscSxnKXtpZighdGhpcy5lbCl7cmV0dXJufXZhciBuPXRoaXMuYWRqdXN0cyxrPXRoaXMuZWwuZG9tLHU9ay5zdHlsZSxpPTAscD0ocStuLncpLGU9KGcrbi5oKSxqPXArInB4IixvPWUrInB4IixtLGM7dS5sZWZ0PShiK24ubCkrInB4Ijt1LnRvcD0ocituLnQpKyJweCI7aWYodS53aWR0aCE9anx8dS5oZWlnaHQhPW8pe3Uud2lkdGg9ajt1LmhlaWdodD1vO2lmKCFFeHQuaXNJRSl7bT1rLmNoaWxkTm9kZXM7Yz1NYXRoLm1heCgwLChwLTEyKSkrInB4IjttWzBdLmNoaWxkTm9kZXNbMV0uc3R5bGUud2lkdGg9YzttWzFdLmNoaWxkTm9kZXNbMV0uc3R5bGUud2lkdGg9YzttWzJdLmNoaWxkTm9kZXNbMV0uc3R5bGUud2lkdGg9YzttWzFdLnN0eWxlLmhlaWdodD1NYXRoLm1heCgwLChlLTEyKSkrInB4In19fSxoaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5lbCl7dGhpcy5lbC5kb20uc3R5bGUuZGlzcGxheT0ibm9uZSI7RXh0LlNoYWRvdy5Qb29sLnB1c2godGhpcy5lbCk7ZGVsZXRlIHRoaXMuZWx9fSxzZXRaSW5kZXg6ZnVuY3Rpb24oYSl7dGhpcy56SW5kZXg9YTtpZih0aGlzLmVsKXt0aGlzLmVsLnNldFN0eWxlKCJ6LWluZGV4IixhKX19fTtFeHQuU2hhZG93LlBvb2w9ZnVuY3Rpb24oKXt2YXIgYj1bXSxhPUV4dC5pc0lFPyc8ZGl2IGNsYXNzPSJ4LWllLXNoYWRvdyI+PC9kaXY+JzonPGRpdiBjbGFzcz0ieC1zaGFkb3ciPjxkaXYgY2xhc3M9InhzdCI+PGRpdiBjbGFzcz0ieHN0bCI+PC9kaXY+PGRpdiBjbGFzcz0ieHN0YyI+PC9kaXY+PGRpdiBjbGFzcz0ieHN0ciI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz0ieHNjIj48ZGl2IGNsYXNzPSJ4c21sIj48L2Rpdj48ZGl2IGNsYXNzPSJ4c21jIj48L2Rpdj48ZGl2IGNsYXNzPSJ4c21yIj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPSJ4c2IiPjxkaXYgY2xhc3M9InhzYmwiPjwvZGl2PjxkaXYgY2xhc3M9InhzYmMiPjwvZGl2PjxkaXYgY2xhc3M9InhzYnIiPjwvZGl2PjwvZGl2PjwvZGl2Pic7cmV0dXJue3B1bGw6ZnVuY3Rpb24oKXt2YXIgYz1iLnNoaWZ0KCk7aWYoIWMpe2M9RXh0LmdldChFeHQuRG9tSGVscGVyLmluc2VydEh0bWwoImJlZm9yZUJlZ2luIixkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQsYSkpO2MuYXV0b0JveEFkanVzdD1mYWxzZX1yZXR1cm4gY30scHVzaDpmdW5jdGlvbihjKXtiLnB1c2goYyl9fX0oKTtFeHQuQm94Q29tcG9uZW50PUV4dC5leHRlbmQoRXh0LkNvbXBvbmVudCx7aW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5Cb3hDb21wb25lbnQuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoInJlc2l6ZSIsIm1vdmUiKX0sYm94UmVhZHk6ZmFsc2UsZGVmZXJIZWlnaHQ6ZmFsc2Usc2V0U2l6ZTpmdW5jdGlvbihiLGQpe2lmKHR5cGVvZiBiPT0ib2JqZWN0Iil7ZD1iLmhlaWdodDtiPWIud2lkdGh9aWYoRXh0LmlzRGVmaW5lZChiKSYmRXh0LmlzRGVmaW5lZCh0aGlzLmJveE1pbldpZHRoKSYmKGI8dGhpcy5ib3hNaW5XaWR0aCkpe2I9dGhpcy5ib3hNaW5XaWR0aH1pZihFeHQuaXNEZWZpbmVkKGQpJiZFeHQuaXNEZWZpbmVkKHRoaXMuYm94TWluSGVpZ2h0KSYmKGQ8dGhpcy5ib3hNaW5IZWlnaHQpKXtkPXRoaXMuYm94TWluSGVpZ2h0fWlmKEV4dC5pc0RlZmluZWQoYikmJkV4dC5pc0RlZmluZWQodGhpcy5ib3hNYXhXaWR0aCkmJihiPnRoaXMuYm94TWF4V2lkdGgpKXtiPXRoaXMuYm94TWF4V2lkdGh9aWYoRXh0LmlzRGVmaW5lZChkKSYmRXh0LmlzRGVmaW5lZCh0aGlzLmJveE1heEhlaWdodCkmJihkPnRoaXMuYm94TWF4SGVpZ2h0KSl7ZD10aGlzLmJveE1heEhlaWdodH1pZighdGhpcy5ib3hSZWFkeSl7dGhpcy53aWR0aD1iO3RoaXMuaGVpZ2h0PWQ7cmV0dXJuIHRoaXN9aWYodGhpcy5jYWNoZVNpemVzIT09ZmFsc2UmJnRoaXMubGFzdFNpemUmJnRoaXMubGFzdFNpemUud2lkdGg9PWImJnRoaXMubGFzdFNpemUuaGVpZ2h0PT1kKXtyZXR1cm4gdGhpc310aGlzLmxhc3RTaXplPXt3aWR0aDpiLGhlaWdodDpkfTt2YXIgYz10aGlzLmFkanVzdFNpemUoYixkKSxnPWMud2lkdGgsYT1jLmhlaWdodCxlO2lmKGchPT11bmRlZmluZWR8fGEhPT11bmRlZmluZWQpe2U9dGhpcy5nZXRSZXNpemVFbCgpO2lmKCF0aGlzLmRlZmVySGVpZ2h0JiZnIT09dW5kZWZpbmVkJiZhIT09dW5kZWZpbmVkKXtlLnNldFNpemUoZyxhKX1lbHNle2lmKCF0aGlzLmRlZmVySGVpZ2h0JiZhIT09dW5kZWZpbmVkKXtlLnNldEhlaWdodChhKX1lbHNle2lmKGchPT11bmRlZmluZWQpe2Uuc2V0V2lkdGgoZyl9fX10aGlzLm9uUmVzaXplKGcsYSxiLGQpO3RoaXMuZmlyZUV2ZW50KCJyZXNpemUiLHRoaXMsZyxhLGIsZCl9cmV0dXJuIHRoaXN9LHNldFdpZHRoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNldFNpemUoYSl9LHNldEhlaWdodDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZXRTaXplKHVuZGVmaW5lZCxhKX0sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFJlc2l6ZUVsKCkuZ2V0U2l6ZSgpfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFJlc2l6ZUVsKCkuZ2V0V2lkdGgoKX0sZ2V0SGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UmVzaXplRWwoKS5nZXRIZWlnaHQoKX0sZ2V0T3V0ZXJTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRSZXNpemVFbCgpO3JldHVybnt3aWR0aDphLmdldFdpZHRoKCkrYS5nZXRNYXJnaW5zKCJsciIpLGhlaWdodDphLmdldEhlaWdodCgpK2EuZ2V0TWFyZ2lucygidGIiKX19LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0UG9zaXRpb25FbCgpO2lmKGE9PT10cnVlKXtyZXR1cm5bYi5nZXRMZWZ0KHRydWUpLGIuZ2V0VG9wKHRydWUpXX1yZXR1cm4gdGhpcy54eXx8Yi5nZXRYWSgpfSxnZXRCb3g6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5nZXRQb3NpdGlvbihhKTt2YXIgYj10aGlzLmdldFNpemUoKTtiLng9Y1swXTtiLnk9Y1sxXTtyZXR1cm4gYn0sdXBkYXRlQm94OmZ1bmN0aW9uKGEpe3RoaXMuc2V0U2l6ZShhLndpZHRoLGEuaGVpZ2h0KTt0aGlzLnNldFBhZ2VQb3NpdGlvbihhLngsYS55KTtyZXR1cm4gdGhpc30sZ2V0UmVzaXplRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXNpemVFbHx8dGhpcy5lbH0sc2V0QXV0b1Njcm9sbDpmdW5jdGlvbihhKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmdldENvbnRlbnRUYXJnZXQoKS5zZXRPdmVyZmxvdyhhPyJhdXRvIjoiIil9dGhpcy5hdXRvU2Nyb2xsPWE7cmV0dXJuIHRoaXN9LHNldFBvc2l0aW9uOmZ1bmN0aW9uKGEsZyl7aWYoYSYmdHlwZW9mIGFbMV09PSJudW1iZXIiKXtnPWFbMV07YT1hWzBdfXRoaXMueD1hO3RoaXMueT1nO2lmKCF0aGlzLmJveFJlYWR5KXtyZXR1cm4gdGhpc312YXIgYj10aGlzLmFkanVzdFBvc2l0aW9uKGEsZyk7dmFyIGU9Yi54LGQ9Yi55O3ZhciBjPXRoaXMuZ2V0UG9zaXRpb25FbCgpO2lmKGUhPT11bmRlZmluZWR8fGQhPT11bmRlZmluZWQpe2lmKGUhPT11bmRlZmluZWQmJmQhPT11bmRlZmluZWQpe2Muc2V0TGVmdFRvcChlLGQpfWVsc2V7aWYoZSE9PXVuZGVmaW5lZCl7Yy5zZXRMZWZ0KGUpfWVsc2V7aWYoZCE9PXVuZGVmaW5lZCl7Yy5zZXRUb3AoZCl9fX10aGlzLm9uUG9zaXRpb24oZSxkKTt0aGlzLmZpcmVFdmVudCgibW92ZSIsdGhpcyxlLGQpfXJldHVybiB0aGlzfSxzZXRQYWdlUG9zaXRpb246ZnVuY3Rpb24oYSxjKXtpZihhJiZ0eXBlb2YgYVsxXT09Im51bWJlciIpe2M9YVsxXTthPWFbMF19dGhpcy5wYWdlWD1hO3RoaXMucGFnZVk9YztpZighdGhpcy5ib3hSZWFkeSl7cmV0dXJufWlmKGE9PT11bmRlZmluZWR8fGM9PT11bmRlZmluZWQpe3JldHVybn12YXIgYj10aGlzLmdldFBvc2l0aW9uRWwoKS50cmFuc2xhdGVQb2ludHMoYSxjKTt0aGlzLnNldFBvc2l0aW9uKGIubGVmdCxiLnRvcCk7cmV0dXJuIHRoaXN9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LkJveENvbXBvbmVudC5zdXBlcmNsYXNzLmFmdGVyUmVuZGVyLmNhbGwodGhpcyk7aWYodGhpcy5yZXNpemVFbCl7dGhpcy5yZXNpemVFbD1FeHQuZ2V0KHRoaXMucmVzaXplRWwpfWlmKHRoaXMucG9zaXRpb25FbCl7dGhpcy5wb3NpdGlvbkVsPUV4dC5nZXQodGhpcy5wb3NpdGlvbkVsKX10aGlzLmJveFJlYWR5PXRydWU7RXh0LmlzRGVmaW5lZCh0aGlzLmF1dG9TY3JvbGwpJiZ0aGlzLnNldEF1dG9TY3JvbGwodGhpcy5hdXRvU2Nyb2xsKTt0aGlzLnNldFNpemUodGhpcy53aWR0aCx0aGlzLmhlaWdodCk7aWYodGhpcy54fHx0aGlzLnkpe3RoaXMuc2V0UG9zaXRpb24odGhpcy54LHRoaXMueSl9ZWxzZXtpZih0aGlzLnBhZ2VYfHx0aGlzLnBhZ2VZKXt0aGlzLnNldFBhZ2VQb3NpdGlvbih0aGlzLnBhZ2VYLHRoaXMucGFnZVkpfX19LHN5bmNTaXplOmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMubGFzdFNpemU7dGhpcy5zZXRTaXplKHRoaXMuYXV0b1dpZHRoP3VuZGVmaW5lZDp0aGlzLmdldFJlc2l6ZUVsKCkuZ2V0V2lkdGgoKSx0aGlzLmF1dG9IZWlnaHQ/dW5kZWZpbmVkOnRoaXMuZ2V0UmVzaXplRWwoKS5nZXRIZWlnaHQoKSk7cmV0dXJuIHRoaXN9LG9uUmVzaXplOmZ1bmN0aW9uKGQsYixhLGMpe30sb25Qb3NpdGlvbjpmdW5jdGlvbihhLGIpe30sYWRqdXN0U2l6ZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuYXV0b1dpZHRoKXthPSJhdXRvIn1pZih0aGlzLmF1dG9IZWlnaHQpe2I9ImF1dG8ifXJldHVybnt3aWR0aDphLGhlaWdodDpifX0sYWRqdXN0UG9zaXRpb246ZnVuY3Rpb24oYSxiKXtyZXR1cm57eDphLHk6Yn19fSk7RXh0LnJlZygiYm94IixFeHQuQm94Q29tcG9uZW50KTtFeHQuU3BhY2VyPUV4dC5leHRlbmQoRXh0LkJveENvbXBvbmVudCx7YXV0b0VsOiJkaXYifSk7RXh0LnJlZygic3BhY2VyIixFeHQuU3BhY2VyKTtFeHQuU3BsaXRCYXI9ZnVuY3Rpb24oYyxlLGIsZCxhKXt0aGlzLmVsPUV4dC5nZXQoYyx0cnVlKTt0aGlzLmVsLmRvbS51bnNlbGVjdGFibGU9Im9uIjt0aGlzLnJlc2l6aW5nRWw9RXh0LmdldChlLHRydWUpO3RoaXMub3JpZW50YXRpb249Ynx8RXh0LlNwbGl0QmFyLkhPUklaT05UQUw7dGhpcy5taW5TaXplPTA7dGhpcy5tYXhTaXplPTIwMDA7dGhpcy5hbmltYXRlPWZhbHNlO3RoaXMudXNlU2hpbT1mYWxzZTt0aGlzLnNoaW09bnVsbDtpZighYSl7dGhpcy5wcm94eT1FeHQuU3BsaXRCYXIuY3JlYXRlUHJveHkodGhpcy5vcmllbnRhdGlvbil9ZWxzZXt0aGlzLnByb3h5PUV4dC5nZXQoYSkuZG9tfXRoaXMuZGQ9bmV3IEV4dC5kZC5ERFByb3h5KHRoaXMuZWwuZG9tLmlkLCJYU3BsaXRCYXJzIix7ZHJhZ0VsSWQ6dGhpcy5wcm94eS5pZH0pO3RoaXMuZGQuYjRTdGFydERyYWc9dGhpcy5vblN0YXJ0UHJveHlEcmFnLmNyZWF0ZURlbGVnYXRlKHRoaXMpO3RoaXMuZGQuZW5kRHJhZz10aGlzLm9uRW5kUHJveHlEcmFnLmNyZWF0ZURlbGVnYXRlKHRoaXMpO3RoaXMuZHJhZ1NwZWNzPXt9O3RoaXMuYWRhcHRlcj1uZXcgRXh0LlNwbGl0QmFyLkJhc2ljTGF5b3V0QWRhcHRlcigpO3RoaXMuYWRhcHRlci5pbml0KHRoaXMpO2lmKHRoaXMub3JpZW50YXRpb249PUV4dC5TcGxpdEJhci5IT1JJWk9OVEFMKXt0aGlzLnBsYWNlbWVudD1kfHwodGhpcy5lbC5nZXRYKCk+dGhpcy5yZXNpemluZ0VsLmdldFgoKT9FeHQuU3BsaXRCYXIuTEVGVDpFeHQuU3BsaXRCYXIuUklHSFQpO3RoaXMuZWwuYWRkQ2xhc3MoIngtc3BsaXRiYXItaCIpfWVsc2V7dGhpcy5wbGFjZW1lbnQ9ZHx8KHRoaXMuZWwuZ2V0WSgpPnRoaXMucmVzaXppbmdFbC5nZXRZKCk/RXh0LlNwbGl0QmFyLlRPUDpFeHQuU3BsaXRCYXIuQk9UVE9NKTt0aGlzLmVsLmFkZENsYXNzKCJ4LXNwbGl0YmFyLXYiKX10aGlzLmFkZEV2ZW50cygicmVzaXplIiwibW92ZWQiLCJiZWZvcmVyZXNpemUiLCJiZWZvcmVhcHBseSIpO0V4dC5TcGxpdEJhci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9O0V4dC5leHRlbmQoRXh0LlNwbGl0QmFyLEV4dC51dGlsLk9ic2VydmFibGUse29uU3RhcnRQcm94eURyYWc6ZnVuY3Rpb24oYSxlKXt0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVzaXplIix0aGlzKTt0aGlzLm92ZXJsYXk9RXh0LkRvbUhlbHBlci5hcHBlbmQoZG9jdW1lbnQuYm9keSx7Y2xzOiJ4LWRyYWctb3ZlcmxheSIsaHRtbDoiJiMxNjA7In0sdHJ1ZSk7dGhpcy5vdmVybGF5LnVuc2VsZWN0YWJsZSgpO3RoaXMub3ZlcmxheS5zZXRTaXplKEV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCh0cnVlKSxFeHQubGliLkRvbS5nZXRWaWV3SGVpZ2h0KHRydWUpKTt0aGlzLm92ZXJsYXkuc2hvdygpO0V4dC5nZXQodGhpcy5wcm94eSkuc2V0RGlzcGxheWVkKCJibG9jayIpO3ZhciBjPXRoaXMuYWRhcHRlci5nZXRFbGVtZW50U2l6ZSh0aGlzKTt0aGlzLmFjdGl2ZU1pblNpemU9dGhpcy5nZXRNaW5pbXVtU2l6ZSgpO3RoaXMuYWN0aXZlTWF4U2l6ZT10aGlzLmdldE1heGltdW1TaXplKCk7dmFyIGQ9Yy10aGlzLmFjdGl2ZU1pblNpemU7dmFyIGI9TWF0aC5tYXgodGhpcy5hY3RpdmVNYXhTaXplLWMsMCk7aWYodGhpcy5vcmllbnRhdGlvbj09RXh0LlNwbGl0QmFyLkhPUklaT05UQUwpe3RoaXMuZGQucmVzZXRDb25zdHJhaW50cygpO3RoaXMuZGQuc2V0WENvbnN0cmFpbnQodGhpcy5wbGFjZW1lbnQ9PUV4dC5TcGxpdEJhci5MRUZUP2Q6Yix0aGlzLnBsYWNlbWVudD09RXh0LlNwbGl0QmFyLkxFRlQ/YjpkLHRoaXMudGlja1NpemUpO3RoaXMuZGQuc2V0WUNvbnN0cmFpbnQoMCwwKX1lbHNle3RoaXMuZGQucmVzZXRDb25zdHJhaW50cygpO3RoaXMuZGQuc2V0WENvbnN0cmFpbnQoMCwwKTt0aGlzLmRkLnNldFlDb25zdHJhaW50KHRoaXMucGxhY2VtZW50PT1FeHQuU3BsaXRCYXIuVE9QP2Q6Yix0aGlzLnBsYWNlbWVudD09RXh0LlNwbGl0QmFyLlRPUD9iOmQsdGhpcy50aWNrU2l6ZSl9dGhpcy5kcmFnU3BlY3Muc3RhcnRTaXplPWM7dGhpcy5kcmFnU3BlY3Muc3RhcnRQb2ludD1bYSxlXTtFeHQuZGQuRERQcm94eS5wcm90b3R5cGUuYjRTdGFydERyYWcuY2FsbCh0aGlzLmRkLGEsZSl9LG9uRW5kUHJveHlEcmFnOmZ1bmN0aW9uKGMpe0V4dC5nZXQodGhpcy5wcm94eSkuc2V0RGlzcGxheWVkKGZhbHNlKTt2YXIgYj1FeHQubGliLkV2ZW50LmdldFhZKGMpO2lmKHRoaXMub3ZlcmxheSl7RXh0LmRlc3Ryb3kodGhpcy5vdmVybGF5KTtkZWxldGUgdGhpcy5vdmVybGF5fXZhciBhO2lmKHRoaXMub3JpZW50YXRpb249PUV4dC5TcGxpdEJhci5IT1JJWk9OVEFMKXthPXRoaXMuZHJhZ1NwZWNzLnN0YXJ0U2l6ZSsodGhpcy5wbGFjZW1lbnQ9PUV4dC5TcGxpdEJhci5MRUZUP2JbMF0tdGhpcy5kcmFnU3BlY3Muc3RhcnRQb2ludFswXTp0aGlzLmRyYWdTcGVjcy5zdGFydFBvaW50WzBdLWJbMF0pfWVsc2V7YT10aGlzLmRyYWdTcGVjcy5zdGFydFNpemUrKHRoaXMucGxhY2VtZW50PT1FeHQuU3BsaXRCYXIuVE9QP2JbMV0tdGhpcy5kcmFnU3BlY3Muc3RhcnRQb2ludFsxXTp0aGlzLmRyYWdTcGVjcy5zdGFydFBvaW50WzFdLWJbMV0pfWE9TWF0aC5taW4oTWF0aC5tYXgoYSx0aGlzLmFjdGl2ZU1pblNpemUpLHRoaXMuYWN0aXZlTWF4U2l6ZSk7aWYoYSE9dGhpcy5kcmFnU3BlY3Muc3RhcnRTaXplKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlYXBwbHkiLHRoaXMsYSkhPT1mYWxzZSl7dGhpcy5hZGFwdGVyLnNldEVsZW1lbnRTaXplKHRoaXMsYSk7dGhpcy5maXJlRXZlbnQoIm1vdmVkIix0aGlzLGEpO3RoaXMuZmlyZUV2ZW50KCJyZXNpemUiLHRoaXMsYSl9fX0sZ2V0QWRhcHRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFkYXB0ZXJ9LHNldEFkYXB0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5hZGFwdGVyPWE7dGhpcy5hZGFwdGVyLmluaXQodGhpcyl9LGdldE1pbmltdW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluU2l6ZX0sc2V0TWluaW11bVNpemU6ZnVuY3Rpb24oYSl7dGhpcy5taW5TaXplPWF9LGdldE1heGltdW1TaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF4U2l6ZX0sc2V0TWF4aW11bVNpemU6ZnVuY3Rpb24oYSl7dGhpcy5tYXhTaXplPWF9LHNldEN1cnJlbnRTaXplOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuYW5pbWF0ZTt0aGlzLmFuaW1hdGU9ZmFsc2U7dGhpcy5hZGFwdGVyLnNldEVsZW1lbnRTaXplKHRoaXMsYik7dGhpcy5hbmltYXRlPWF9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7RXh0LmRlc3Ryb3kodGhpcy5zaGltLEV4dC5nZXQodGhpcy5wcm94eSkpO3RoaXMuZGQudW5yZWcoKTtpZihhKXt0aGlzLmVsLnJlbW92ZSgpfXRoaXMucHVyZ2VMaXN0ZW5lcnMoKX19KTtFeHQuU3BsaXRCYXIuY3JlYXRlUHJveHk9ZnVuY3Rpb24oYil7dmFyIGM9bmV3IEV4dC5FbGVtZW50KGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGMuZG9tKTtjLnVuc2VsZWN0YWJsZSgpO3ZhciBhPSJ4LXNwbGl0YmFyLXByb3h5IjtjLmFkZENsYXNzKGErIiAiKyhiPT1FeHQuU3BsaXRCYXIuSE9SSVpPTlRBTD9hKyItaCI6YSsiLXYiKSk7cmV0dXJuIGMuZG9tfTtFeHQuU3BsaXRCYXIuQmFzaWNMYXlvdXRBZGFwdGVyPWZ1bmN0aW9uKCl7fTtFeHQuU3BsaXRCYXIuQmFzaWNMYXlvdXRBZGFwdGVyLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihhKXt9LGdldEVsZW1lbnRTaXplOmZ1bmN0aW9uKGEpe2lmKGEub3JpZW50YXRpb249PUV4dC5TcGxpdEJhci5IT1JJWk9OVEFMKXtyZXR1cm4gYS5yZXNpemluZ0VsLmdldFdpZHRoKCl9ZWxzZXtyZXR1cm4gYS5yZXNpemluZ0VsLmdldEhlaWdodCgpfX0sc2V0RWxlbWVudFNpemU6ZnVuY3Rpb24oYixhLGMpe2lmKGIub3JpZW50YXRpb249PUV4dC5TcGxpdEJhci5IT1JJWk9OVEFMKXtpZighYi5hbmltYXRlKXtiLnJlc2l6aW5nRWwuc2V0V2lkdGgoYSk7aWYoYyl7YyhiLGEpfX1lbHNle2IucmVzaXppbmdFbC5zZXRXaWR0aChhLHRydWUsMC4xLGMsImVhc2VPdXQiKX19ZWxzZXtpZighYi5hbmltYXRlKXtiLnJlc2l6aW5nRWwuc2V0SGVpZ2h0KGEpO2lmKGMpe2MoYixhKX19ZWxzZXtiLnJlc2l6aW5nRWwuc2V0SGVpZ2h0KGEsdHJ1ZSwwLjEsYywiZWFzZU91dCIpfX19fTtFeHQuU3BsaXRCYXIuQWJzb2x1dGVMYXlvdXRBZGFwdGVyPWZ1bmN0aW9uKGEpe3RoaXMuYmFzaWM9bmV3IEV4dC5TcGxpdEJhci5CYXNpY0xheW91dEFkYXB0ZXIoKTt0aGlzLmNvbnRhaW5lcj1FeHQuZ2V0KGEpfTtFeHQuU3BsaXRCYXIuQWJzb2x1dGVMYXlvdXRBZGFwdGVyLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihhKXt0aGlzLmJhc2ljLmluaXQoYSl9LGdldEVsZW1lbnRTaXplOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJhc2ljLmdldEVsZW1lbnRTaXplKGEpfSxzZXRFbGVtZW50U2l6ZTpmdW5jdGlvbihiLGEsYyl7dGhpcy5iYXNpYy5zZXRFbGVtZW50U2l6ZShiLGEsdGhpcy5tb3ZlU3BsaXR0ZXIuY3JlYXRlRGVsZWdhdGUodGhpcyxbYl0pKX0sbW92ZVNwbGl0dGVyOmZ1bmN0aW9uKGEpe3ZhciBiPUV4dC5TcGxpdEJhcjtzd2l0Y2goYS5wbGFjZW1lbnQpe2Nhc2UgYi5MRUZUOmEuZWwuc2V0WChhLnJlc2l6aW5nRWwuZ2V0UmlnaHQoKSk7YnJlYWs7Y2FzZSBiLlJJR0hUOmEuZWwuc2V0U3R5bGUoInJpZ2h0IiwodGhpcy5jb250YWluZXIuZ2V0V2lkdGgoKS1hLnJlc2l6aW5nRWwuZ2V0TGVmdCgpKSsicHgiKTticmVhaztjYXNlIGIuVE9QOmEuZWwuc2V0WShhLnJlc2l6aW5nRWwuZ2V0Qm90dG9tKCkpO2JyZWFrO2Nhc2UgYi5CT1RUT006YS5lbC5zZXRZKGEucmVzaXppbmdFbC5nZXRUb3AoKS1hLmVsLmdldEhlaWdodCgpKTticmVha319fTtFeHQuU3BsaXRCYXIuVkVSVElDQUw9MTtFeHQuU3BsaXRCYXIuSE9SSVpPTlRBTD0yO0V4dC5TcGxpdEJhci5MRUZUPTE7RXh0LlNwbGl0QmFyLlJJR0hUPTI7RXh0LlNwbGl0QmFyLlRPUD0zO0V4dC5TcGxpdEJhci5CT1RUT009NDtFeHQuQ29udGFpbmVyPUV4dC5leHRlbmQoRXh0LkJveENvbXBvbmVudCx7YnVmZmVyUmVzaXplOjUwLGF1dG9EZXN0cm95OnRydWUsZm9yY2VMYXlvdXQ6ZmFsc2UsZGVmYXVsdFR5cGU6InBhbmVsIixyZXNpemVFdmVudDoicmVzaXplIixidWJibGVFdmVudHM6WyJhZGQiLCJyZW1vdmUiXSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LkNvbnRhaW5lci5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiYWZ0ZXJsYXlvdXQiLCJiZWZvcmVhZGQiLCJiZWZvcmVyZW1vdmUiLCJhZGQiLCJyZW1vdmUiKTt2YXIgYT10aGlzLml0ZW1zO2lmKGEpe2RlbGV0ZSB0aGlzLml0ZW1zO3RoaXMuYWRkKGEpfX0saW5pdEl0ZW1zOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXRlbXMpe3RoaXMuaXRlbXM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSx0aGlzLmdldENvbXBvbmVudElkKTt0aGlzLmdldExheW91dCgpfX0sc2V0TGF5b3V0OmZ1bmN0aW9uKGEpe2lmKHRoaXMubGF5b3V0JiZ0aGlzLmxheW91dCE9YSl7dGhpcy5sYXlvdXQuc2V0Q29udGFpbmVyKG51bGwpfXRoaXMubGF5b3V0PWE7dGhpcy5pbml0SXRlbXMoKTthLnNldENvbnRhaW5lcih0aGlzKX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQuQ29udGFpbmVyLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTtpZighdGhpcy5sYXlvdXQpe3RoaXMubGF5b3V0PSJhdXRvIn1pZihFeHQuaXNPYmplY3QodGhpcy5sYXlvdXQpJiYhdGhpcy5sYXlvdXQubGF5b3V0KXt0aGlzLmxheW91dENvbmZpZz10aGlzLmxheW91dDt0aGlzLmxheW91dD10aGlzLmxheW91dENvbmZpZy50eXBlfWlmKEV4dC5pc1N0cmluZyh0aGlzLmxheW91dCkpe3RoaXMubGF5b3V0PW5ldyBFeHQuQ29udGFpbmVyLkxBWU9VVFNbdGhpcy5sYXlvdXQudG9Mb3dlckNhc2UoKV0odGhpcy5sYXlvdXRDb25maWcpfXRoaXMuc2V0TGF5b3V0KHRoaXMubGF5b3V0KTtpZih0aGlzLmFjdGl2ZUl0ZW0hPT11bmRlZmluZWQmJnRoaXMubGF5b3V0LnNldEFjdGl2ZUl0ZW0pe3ZhciBhPXRoaXMuYWN0aXZlSXRlbTtkZWxldGUgdGhpcy5hY3RpdmVJdGVtO3RoaXMubGF5b3V0LnNldEFjdGl2ZUl0ZW0oYSl9aWYoIXRoaXMub3duZXJDdCl7dGhpcy5kb0xheW91dChmYWxzZSx0cnVlKX1pZih0aGlzLm1vbml0b3JSZXNpemU9PT10cnVlKXtFeHQuRXZlbnRNYW5hZ2VyLm9uV2luZG93UmVzaXplKHRoaXMuZG9MYXlvdXQsdGhpcyxbZmFsc2VdKX19LGdldExheW91dFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsfSxnZXRDb21wb25lbnRJZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRJdGVtSWQoKX0sYWRkOmZ1bmN0aW9uKGIpe3RoaXMuaW5pdEl0ZW1zKCk7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xO2lmKGV8fEV4dC5pc0FycmF5KGIpKXt2YXIgYT1bXTtFeHQuZWFjaChlP2FyZ3VtZW50czpiLGZ1bmN0aW9uKGgpe2EucHVzaCh0aGlzLmFkZChoKSl9LHRoaXMpO3JldHVybiBhfXZhciBnPXRoaXMubG9va3VwQ29tcG9uZW50KHRoaXMuYXBwbHlEZWZhdWx0cyhiKSk7dmFyIGQ9dGhpcy5pdGVtcy5sZW5ndGg7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWFkZCIsdGhpcyxnLGQpIT09ZmFsc2UmJnRoaXMub25CZWZvcmVBZGQoZykhPT1mYWxzZSl7dGhpcy5pdGVtcy5hZGQoZyk7Zy5vbkFkZGVkKHRoaXMsZCk7dGhpcy5vbkFkZChnKTt0aGlzLmZpcmVFdmVudCgiYWRkIix0aGlzLGcsZCl9cmV0dXJuIGd9LG9uQWRkOmZ1bmN0aW9uKGEpe30sb25BZGRlZDpmdW5jdGlvbihhLGIpe3RoaXMub3duZXJDdD1hO3RoaXMuaW5pdFJlZigpO3RoaXMuY2FzY2FkZShmdW5jdGlvbihkKXtkLmluaXRSZWYoKX0pO3RoaXMuZmlyZUV2ZW50KCJhZGRlZCIsdGhpcyxhLGIpfSxpbnNlcnQ6ZnVuY3Rpb24oZSxiKXt2YXIgZD1hcmd1bWVudHMsaD1kLmxlbmd0aCxhPVtdLGcsajt0aGlzLmluaXRJdGVtcygpO2lmKGg+Mil7Zm9yKGc9aC0xO2c+PTE7LS1nKXthLnB1c2godGhpcy5pbnNlcnQoZSxkW2ddKSl9cmV0dXJuIGF9aj10aGlzLmxvb2t1cENvbXBvbmVudCh0aGlzLmFwcGx5RGVmYXVsdHMoYikpO2U9TWF0aC5taW4oZSx0aGlzLml0ZW1zLmxlbmd0aCk7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWFkZCIsdGhpcyxqLGUpIT09ZmFsc2UmJnRoaXMub25CZWZvcmVBZGQoaikhPT1mYWxzZSl7aWYoai5vd25lckN0PT10aGlzKXt0aGlzLml0ZW1zLnJlbW92ZShqKX10aGlzLml0ZW1zLmluc2VydChlLGopO2oub25BZGRlZCh0aGlzLGUpO3RoaXMub25BZGQoaik7dGhpcy5maXJlRXZlbnQoImFkZCIsdGhpcyxqLGUpfXJldHVybiBqfSxhcHBseURlZmF1bHRzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZGVmYXVsdHM7aWYoYSl7aWYoRXh0LmlzRnVuY3Rpb24oYSkpe2E9YS5jYWxsKHRoaXMsYil9aWYoRXh0LmlzU3RyaW5nKGIpKXtiPUV4dC5Db21wb25lbnRNZ3IuZ2V0KGIpO0V4dC5hcHBseShiLGEpfWVsc2V7aWYoIWIuZXZlbnRzKXtFeHQuYXBwbHlJZihiLmlzQWN0aW9uP2IuaW5pdGlhbENvbmZpZzpiLGEpfWVsc2V7RXh0LmFwcGx5KGIsYSl9fX1yZXR1cm4gYn0sb25CZWZvcmVBZGQ6ZnVuY3Rpb24oYSl7aWYoYS5vd25lckN0KXthLm93bmVyQ3QucmVtb3ZlKGEsZmFsc2UpfWlmKHRoaXMuaGlkZUJvcmRlcnM9PT10cnVlKXthLmJvcmRlcj0oYS5ib3JkZXI9PT10cnVlKX19LHJlbW92ZTpmdW5jdGlvbihhLGIpe3RoaXMuaW5pdEl0ZW1zKCk7dmFyIGQ9dGhpcy5nZXRDb21wb25lbnQoYSk7aWYoZCYmdGhpcy5maXJlRXZlbnQoImJlZm9yZXJlbW92ZSIsdGhpcyxkKSE9PWZhbHNlKXt0aGlzLmRvUmVtb3ZlKGQsYik7dGhpcy5maXJlRXZlbnQoInJlbW92ZSIsdGhpcyxkKX1yZXR1cm4gZH0sb25SZW1vdmU6ZnVuY3Rpb24oYSl7fSxkb1JlbW92ZTpmdW5jdGlvbihlLGQpe3ZhciBiPXRoaXMubGF5b3V0LGE9YiYmdGhpcy5yZW5kZXJlZDtpZihhKXtiLm9uUmVtb3ZlKGUpfXRoaXMuaXRlbXMucmVtb3ZlKGUpO2Uub25SZW1vdmVkKCk7dGhpcy5vblJlbW92ZShlKTtpZihkPT09dHJ1ZXx8KGQhPT1mYWxzZSYmdGhpcy5hdXRvRGVzdHJveSkpe2UuZGVzdHJveSgpfWlmKGEpe2IuYWZ0ZXJSZW1vdmUoZSl9fSxyZW1vdmVBbGw6ZnVuY3Rpb24oYyl7dGhpcy5pbml0SXRlbXMoKTt2YXIgZSxnPVtdLGI9W107dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKGgpe2cucHVzaChoKX0pO2Zvcih2YXIgZD0wLGE9Zy5sZW5ndGg7ZDxhOysrZCl7ZT1nW2RdO3RoaXMucmVtb3ZlKGUsYyk7aWYoZS5vd25lckN0IT09dGhpcyl7Yi5wdXNoKGUpfX1yZXR1cm4gYn0sZ2V0Q29tcG9uZW50OmZ1bmN0aW9uKGEpe2lmKEV4dC5pc09iamVjdChhKSl7YT1hLmdldEl0ZW1JZCgpfXJldHVybiB0aGlzLml0ZW1zLmdldChhKX0sbG9va3VwQ29tcG9uZW50OmZ1bmN0aW9uKGEpe2lmKEV4dC5pc1N0cmluZyhhKSl7cmV0dXJuIEV4dC5Db21wb25lbnRNZ3IuZ2V0KGEpfWVsc2V7aWYoIWEuZXZlbnRzKXtyZXR1cm4gdGhpcy5jcmVhdGVDb21wb25lbnQoYSl9fXJldHVybiBhfSxjcmVhdGVDb21wb25lbnQ6ZnVuY3Rpb24oYSxkKXtpZihhLnJlbmRlcil7cmV0dXJuIGF9dmFyIGI9RXh0LmNyZWF0ZShFeHQuYXBwbHkoe293bmVyQ3Q6dGhpc30sYSksZHx8dGhpcy5kZWZhdWx0VHlwZSk7ZGVsZXRlIGIuaW5pdGlhbENvbmZpZy5vd25lckN0O2RlbGV0ZSBiLm93bmVyQ3Q7cmV0dXJuIGJ9LGNhbkxheW91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0VmlzaWJpbGl0eUVsKCk7cmV0dXJuIGEmJmEuZG9tJiYhYS5pc1N0eWxlKCJkaXNwbGF5Iiwibm9uZSIpfSxkb0xheW91dDpmdW5jdGlvbihnLGUpe3ZhciBrPXRoaXMucmVuZGVyZWQsaj1lfHx0aGlzLmZvcmNlTGF5b3V0O2lmKHRoaXMuY29sbGFwc2VkfHwhdGhpcy5jYW5MYXlvdXQoKSl7dGhpcy5kZWZlckxheW91dD10aGlzLmRlZmVyTGF5b3V0fHwhZztpZighail7cmV0dXJufWc9ZyYmIXRoaXMuZGVmZXJMYXlvdXR9ZWxzZXtkZWxldGUgdGhpcy5kZWZlckxheW91dH1pZihrJiZ0aGlzLmxheW91dCl7dGhpcy5sYXlvdXQubGF5b3V0KCl9aWYoZyE9PXRydWUmJnRoaXMuaXRlbXMpe3ZhciBkPXRoaXMuaXRlbXMuaXRlbXM7Zm9yKHZhciBiPTAsYT1kLmxlbmd0aDtiPGE7YisrKXt2YXIgaD1kW2JdO2lmKGguZG9MYXlvdXQpe2guZG9MYXlvdXQoZmFsc2Usail9fX1pZihrKXt0aGlzLm9uTGF5b3V0KGcsail9dGhpcy5oYXNMYXlvdXQ9dHJ1ZTtkZWxldGUgdGhpcy5mb3JjZUxheW91dH0sb25MYXlvdXQ6RXh0LmVtcHR5Rm4sc2hvdWxkQnVmZmVyTGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5oYXNMYXlvdXQ7aWYodGhpcy5vd25lckN0KXtyZXR1cm4gYT8hdGhpcy5oYXNMYXlvdXRQZW5kaW5nKCk6ZmFsc2V9cmV0dXJuIGF9LGhhc0xheW91dFBlbmRpbmc6ZnVuY3Rpb24oKXt2YXIgYT1mYWxzZTt0aGlzLm93bmVyQ3QuYnViYmxlKGZ1bmN0aW9uKGIpe2lmKGIubGF5b3V0UGVuZGluZyl7YT10cnVlO3JldHVybiBmYWxzZX19KTtyZXR1cm4gYX0sb25TaG93OmZ1bmN0aW9uKCl7RXh0LkNvbnRhaW5lci5zdXBlcmNsYXNzLm9uU2hvdy5jYWxsKHRoaXMpO2lmKEV4dC5pc0RlZmluZWQodGhpcy5kZWZlckxheW91dCkpe2RlbGV0ZSB0aGlzLmRlZmVyTGF5b3V0O3RoaXMuZG9MYXlvdXQodHJ1ZSl9fSxnZXRMYXlvdXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5sYXlvdXQpe3ZhciBhPW5ldyBFeHQubGF5b3V0LkF1dG9MYXlvdXQodGhpcy5sYXlvdXRDb25maWcpO3RoaXMuc2V0TGF5b3V0KGEpfXJldHVybiB0aGlzLmxheW91dH0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3ZhciBhO2lmKHRoaXMuaXRlbXMpe3doaWxlKGE9dGhpcy5pdGVtcy5maXJzdCgpKXt0aGlzLmRvUmVtb3ZlKGEsdHJ1ZSl9fWlmKHRoaXMubW9uaXRvclJlc2l6ZSl7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVSZXNpemVMaXN0ZW5lcih0aGlzLmRvTGF5b3V0LHRoaXMpfUV4dC5kZXN0cm95KHRoaXMubGF5b3V0KTtFeHQuQ29udGFpbmVyLnN1cGVyY2xhc3MuYmVmb3JlRGVzdHJveS5jYWxsKHRoaXMpfSxjYXNjYWRlOmZ1bmN0aW9uKGcsZSxiKXtpZihnLmFwcGx5KGV8fHRoaXMsYnx8W3RoaXNdKSE9PWZhbHNlKXtpZih0aGlzLml0ZW1zKXt2YXIgZD10aGlzLml0ZW1zLml0ZW1zO2Zvcih2YXIgYz0wLGE9ZC5sZW5ndGg7YzxhO2MrKyl7aWYoZFtjXS5jYXNjYWRlKXtkW2NdLmNhc2NhZGUoZyxlLGIpfWVsc2V7Zy5hcHBseShlfHxkW2NdLGJ8fFtkW2NdXSl9fX19cmV0dXJuIHRoaXN9LGZpbmRCeUlkOmZ1bmN0aW9uKGMpe3ZhciBhPW51bGwsYj10aGlzO3RoaXMuY2FzY2FkZShmdW5jdGlvbihkKXtpZihiIT1kJiZkLmlkPT09Yyl7YT1kO3JldHVybiBmYWxzZX19KTtyZXR1cm4gYX0sZmluZEJ5VHlwZTpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLmZpbmRCeShmdW5jdGlvbihkKXtyZXR1cm4gZC5pc1hUeXBlKGIsYSl9KX0sZmluZDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLmZpbmRCeShmdW5jdGlvbihkKXtyZXR1cm4gZFtiXT09PWF9KX0sZmluZEJ5OmZ1bmN0aW9uKGQsYyl7dmFyIGE9W10sYj10aGlzO3RoaXMuY2FzY2FkZShmdW5jdGlvbihlKXtpZihiIT1lJiZkLmNhbGwoY3x8ZSxlLGIpPT09dHJ1ZSl7YS5wdXNoKGUpfX0pO3JldHVybiBhfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29tcG9uZW50KGEpfX0pO0V4dC5Db250YWluZXIuTEFZT1VUUz17fTtFeHQucmVnKCJjb250YWluZXIiLEV4dC5Db250YWluZXIpO0V4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0PUV4dC5leHRlbmQoT2JqZWN0LHttb25pdG9yUmVzaXplOmZhbHNlLGFjdGl2ZUl0ZW06bnVsbCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmlkPUV4dC5pZChudWxsLCJleHQtbGF5b3V0LSIpO0V4dC5hcHBseSh0aGlzLGEpfSx0eXBlOiJjb250YWluZXIiLElFTWVhc3VyZUhhY2s6ZnVuY3Rpb24oayxnKXt2YXIgYT1rLmRvbS5jaGlsZE5vZGVzLGI9YS5sZW5ndGgsbixtPVtdLGwsaCxqO2ZvcihoPTA7aDxiO2grKyl7bj1hW2hdO2w9RXh0LmdldChuKTtpZihsKXttW2hdPWwuZ2V0U3R5bGUoImRpc3BsYXkiKTtsLnNldFN0eWxlKHtkaXNwbGF5OiJub25lIn0pfX1qPWs/ay5nZXRWaWV3U2l6ZShnKTp7fTtmb3IoaD0wO2g8YjtoKyspe249YVtoXTtsPUV4dC5nZXQobik7aWYobCl7bC5zZXRTdHlsZSh7ZGlzcGxheTptW2hdfSl9fXJldHVybiBqfSxnZXRMYXlvdXRUYXJnZXRTaXplOkV4dC5FbXB0eUZuLGxheW91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGFpbmVyLGI9YS5nZXRMYXlvdXRUYXJnZXQoKTtpZighKHRoaXMuaGFzTGF5b3V0fHxFeHQuaXNFbXB0eSh0aGlzLnRhcmdldENscykpKXtiLmFkZENsYXNzKHRoaXMudGFyZ2V0Q2xzKX10aGlzLm9uTGF5b3V0KGEsYik7YS5maXJlRXZlbnQoImFmdGVybGF5b3V0IixhLHRoaXMpfSxvbkxheW91dDpmdW5jdGlvbihhLGIpe3RoaXMucmVuZGVyQWxsKGEsYil9LGlzVmFsaWRQYXJlbnQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYSYmYi5nZXRQb3NpdGlvbkVsKCkuZG9tLnBhcmVudE5vZGU9PShhLmRvbXx8YSl9LHJlbmRlckFsbDpmdW5jdGlvbihlLGcpe3ZhciBiPWUuaXRlbXMuaXRlbXMsZCxoLGE9Yi5sZW5ndGg7Zm9yKGQ9MDtkPGE7ZCsrKXtoPWJbZF07aWYoaCYmKCFoLnJlbmRlcmVkfHwhdGhpcy5pc1ZhbGlkUGFyZW50KGgsZykpKXt0aGlzLnJlbmRlckl0ZW0oaCxkLGcpfX19LHJlbmRlckl0ZW06ZnVuY3Rpb24oZCxhLGIpe2lmKGQpe2lmKCFkLnJlbmRlcmVkKXtkLnJlbmRlcihiLGEpO3RoaXMuY29uZmlndXJlSXRlbShkKX1lbHNle2lmKCF0aGlzLmlzVmFsaWRQYXJlbnQoZCxiKSl7aWYoRXh0LmlzTnVtYmVyKGEpKXthPWIuZG9tLmNoaWxkTm9kZXNbYV19Yi5kb20uaW5zZXJ0QmVmb3JlKGQuZ2V0UG9zaXRpb25FbCgpLmRvbSxhfHxudWxsKTtkLmNvbnRhaW5lcj1iO3RoaXMuY29uZmlndXJlSXRlbShkKX19fX0sZ2V0UmVuZGVyZWRJdGVtczpmdW5jdGlvbihnKXt2YXIgZT1nLmdldExheW91dFRhcmdldCgpLGg9Zy5pdGVtcy5pdGVtcyxhPWgubGVuZ3RoLGQsaixiPVtdO2ZvcihkPTA7ZDxhO2QrKyl7aWYoKGo9aFtkXSkucmVuZGVyZWQmJnRoaXMuaXNWYWxpZFBhcmVudChqLGUpJiZqLnNob3VsZExheW91dCE9PWZhbHNlKXtiLnB1c2goail9fXJldHVybiBifSxjb25maWd1cmVJdGVtOmZ1bmN0aW9uKGIpe2lmKHRoaXMuZXh0cmFDbHMpe3ZhciBhPWIuZ2V0UG9zaXRpb25FbD9iLmdldFBvc2l0aW9uRWwoKTpiO2EuYWRkQ2xhc3ModGhpcy5leHRyYUNscyl9aWYoYi5kb0xheW91dCYmdGhpcy5mb3JjZUxheW91dCl7Yi5kb0xheW91dCgpfWlmKHRoaXMucmVuZGVySGlkZGVuJiZiIT10aGlzLmFjdGl2ZUl0ZW0pe2IuaGlkZSgpfX0sb25SZW1vdmU6ZnVuY3Rpb24oYil7aWYodGhpcy5hY3RpdmVJdGVtPT1iKXtkZWxldGUgdGhpcy5hY3RpdmVJdGVtfWlmKGIucmVuZGVyZWQmJnRoaXMuZXh0cmFDbHMpe3ZhciBhPWIuZ2V0UG9zaXRpb25FbD9iLmdldFBvc2l0aW9uRWwoKTpiO2EucmVtb3ZlQ2xhc3ModGhpcy5leHRyYUNscyl9fSxhZnRlclJlbW92ZTpmdW5jdGlvbihhKXtpZihhLnJlbW92ZVJlc3RvcmUpe2EucmVtb3ZlTW9kZT0iY29udGFpbmVyIjtkZWxldGUgYS5yZW1vdmVSZXN0b3JlfX0sb25SZXNpemU6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLmNvbnRhaW5lcixhO2lmKGMuY29sbGFwc2VkKXtyZXR1cm59aWYoYT1jLmJ1ZmZlclJlc2l6ZSYmYy5zaG91bGRCdWZmZXJMYXlvdXQoKSl7aWYoIXRoaXMucmVzaXplVGFzayl7dGhpcy5yZXNpemVUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayh0aGlzLnJ1bkxheW91dCx0aGlzKTt0aGlzLnJlc2l6ZUJ1ZmZlcj1FeHQuaXNOdW1iZXIoYSk/YTo1MH1jLmxheW91dFBlbmRpbmc9dHJ1ZTt0aGlzLnJlc2l6ZVRhc2suZGVsYXkodGhpcy5yZXNpemVCdWZmZXIpfWVsc2V7dGhpcy5ydW5MYXlvdXQoKX19LHJ1bkxheW91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY29udGFpbmVyO3RoaXMubGF5b3V0KCk7YS5vbkxheW91dCgpO2RlbGV0ZSBhLmxheW91dFBlbmRpbmd9LHNldENvbnRhaW5lcjpmdW5jdGlvbihiKXtpZih0aGlzLm1vbml0b3JSZXNpemUmJmIhPXRoaXMuY29udGFpbmVyKXt2YXIgYT10aGlzLmNvbnRhaW5lcjtpZihhKXthLnVuKGEucmVzaXplRXZlbnQsdGhpcy5vblJlc2l6ZSx0aGlzKX1pZihiKXtiLm9uKGIucmVzaXplRXZlbnQsdGhpcy5vblJlc2l6ZSx0aGlzKX19dGhpcy5jb250YWluZXI9Yn0scGFyc2VNYXJnaW5zOmZ1bmN0aW9uKGIpe2lmKEV4dC5pc051bWJlcihiKSl7Yj1iLnRvU3RyaW5nKCl9dmFyIGM9Yi5zcGxpdCgiICIpLGE9Yy5sZW5ndGg7aWYoYT09MSl7Y1sxXT1jWzJdPWNbM109Y1swXX1lbHNle2lmKGE9PTIpe2NbMl09Y1swXTtjWzNdPWNbMV19ZWxzZXtpZihhPT0zKXtjWzNdPWNbMV19fX1yZXR1cm57dG9wOnBhcnNlSW50KGNbMF0sMTApfHwwLHJpZ2h0OnBhcnNlSW50KGNbMV0sMTApfHwwLGJvdHRvbTpwYXJzZUludChjWzJdLDEwKXx8MCxsZWZ0OnBhcnNlSW50KGNbM10sMTApfHwwfX0sZmllbGRUcGw6KGZ1bmN0aW9uKCl7dmFyIGE9bmV3IEV4dC5UZW1wbGF0ZSgnPGRpdiBjbGFzcz0ieC1mb3JtLWl0ZW0ge2l0ZW1DbHN9IiB0YWJJbmRleD0iLTEiPicsJzxsYWJlbCBmb3I9IntpZH0iIHN0eWxlPSJ7bGFiZWxTdHlsZX0iIGNsYXNzPSJ4LWZvcm0taXRlbS1sYWJlbCI+e2xhYmVsfXtsYWJlbFNlcGFyYXRvcn08L2xhYmVsPicsJzxkaXYgY2xhc3M9IngtZm9ybS1lbGVtZW50IiBpZD0ieC1mb3JtLWVsLXtpZH0iIHN0eWxlPSJ7ZWxlbWVudFN0eWxlfSI+JywnPC9kaXY+PGRpdiBjbGFzcz0ie2NsZWFyQ2xzfSI+PC9kaXY+JywiPC9kaXY+Iik7YS5kaXNhYmxlRm9ybWF0cz10cnVlO3JldHVybiBhLmNvbXBpbGUoKX0pKCksZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMucmVzaXplVGFzayYmdGhpcy5yZXNpemVUYXNrLmNhbmNlbCl7dGhpcy5yZXNpemVUYXNrLmNhbmNlbCgpfWlmKHRoaXMuY29udGFpbmVyKXt0aGlzLmNvbnRhaW5lci51bih0aGlzLmNvbnRhaW5lci5yZXNpemVFdmVudCx0aGlzLm9uUmVzaXplLHRoaXMpfWlmKCFFeHQuaXNFbXB0eSh0aGlzLnRhcmdldENscykpe3ZhciBhPXRoaXMuY29udGFpbmVyLmdldExheW91dFRhcmdldCgpO2lmKGEpe2EucmVtb3ZlQ2xhc3ModGhpcy50YXJnZXRDbHMpfX19fSk7RXh0LmxheW91dC5BdXRvTGF5b3V0PUV4dC5leHRlbmQoRXh0LmxheW91dC5Db250YWluZXJMYXlvdXQse3R5cGU6ImF1dG8iLG1vbml0b3JSZXNpemU6dHJ1ZSxvbkxheW91dDpmdW5jdGlvbihkLGcpe0V4dC5sYXlvdXQuQXV0b0xheW91dC5zdXBlcmNsYXNzLm9uTGF5b3V0LmNhbGwodGhpcyxkLGcpO3ZhciBlPXRoaXMuZ2V0UmVuZGVyZWRJdGVtcyhkKSxhPWUubGVuZ3RoLGIsaDtmb3IoYj0wO2I8YTtiKyspe2g9ZVtiXTtpZihoLmRvTGF5b3V0KXtoLmRvTGF5b3V0KHRydWUpfX19fSk7RXh0LkNvbnRhaW5lci5MQVlPVVRTLmF1dG89RXh0LmxheW91dC5BdXRvTGF5b3V0O0V4dC5sYXlvdXQuRml0TGF5b3V0PUV4dC5leHRlbmQoRXh0LmxheW91dC5Db250YWluZXJMYXlvdXQse21vbml0b3JSZXNpemU6dHJ1ZSx0eXBlOiJmaXQiLGdldExheW91dFRhcmdldFNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRhaW5lci5nZXRMYXlvdXRUYXJnZXQoKTtpZighYSl7cmV0dXJue319cmV0dXJuIGEuZ2V0U3R5bGVTaXplKCl9LG9uTGF5b3V0OmZ1bmN0aW9uKGEsYil7RXh0LmxheW91dC5GaXRMYXlvdXQuc3VwZXJjbGFzcy5vbkxheW91dC5jYWxsKHRoaXMsYSxiKTtpZighYS5jb2xsYXBzZWQpe3RoaXMuc2V0SXRlbVNpemUodGhpcy5hY3RpdmVJdGVtfHxhLml0ZW1zLml0ZW1BdCgwKSx0aGlzLmdldExheW91dFRhcmdldFNpemUoKSl9fSxzZXRJdGVtU2l6ZTpmdW5jdGlvbihiLGEpe2lmKGImJmEuaGVpZ2h0PjApe2Iuc2V0U2l6ZShhKX19fSk7RXh0LkNvbnRhaW5lci5MQVlPVVRTLmZpdD1FeHQubGF5b3V0LkZpdExheW91dDtFeHQubGF5b3V0LkNhcmRMYXlvdXQ9RXh0LmV4dGVuZChFeHQubGF5b3V0LkZpdExheW91dCx7ZGVmZXJyZWRSZW5kZXI6ZmFsc2UsbGF5b3V0T25DYXJkQ2hhbmdlOmZhbHNlLHJlbmRlckhpZGRlbjp0cnVlLHR5cGU6ImNhcmQiLHNldEFjdGl2ZUl0ZW06ZnVuY3Rpb24oZCl7dmFyIGE9dGhpcy5hY3RpdmVJdGVtLGI9dGhpcy5jb250YWluZXI7ZD1iLmdldENvbXBvbmVudChkKTtpZihkJiZhIT1kKXtpZihhKXthLmhpZGUoKTtpZihhLmhpZGRlbiE9PXRydWUpe3JldHVybiBmYWxzZX1hLmZpcmVFdmVudCgiZGVhY3RpdmF0ZSIsYSl9dmFyIGM9ZC5kb0xheW91dCYmKHRoaXMubGF5b3V0T25DYXJkQ2hhbmdlfHwhZC5yZW5kZXJlZCk7dGhpcy5hY3RpdmVJdGVtPWQ7ZGVsZXRlIGQuZGVmZXJMYXlvdXQ7ZC5zaG93KCk7dGhpcy5sYXlvdXQoKTtpZihjKXtkLmRvTGF5b3V0KCl9ZC5maXJlRXZlbnQoImFjdGl2YXRlIixkKX19LHJlbmRlckFsbDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuZGVmZXJyZWRSZW5kZXIpe3RoaXMucmVuZGVySXRlbSh0aGlzLmFjdGl2ZUl0ZW0sdW5kZWZpbmVkLGIpfWVsc2V7RXh0LmxheW91dC5DYXJkTGF5b3V0LnN1cGVyY2xhc3MucmVuZGVyQWxsLmNhbGwodGhpcyxhLGIpfX19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFMuY2FyZD1FeHQubGF5b3V0LkNhcmRMYXlvdXQ7RXh0LmxheW91dC5BbmNob3JMYXlvdXQ9RXh0LmV4dGVuZChFeHQubGF5b3V0LkNvbnRhaW5lckxheW91dCx7bW9uaXRvclJlc2l6ZTp0cnVlLHR5cGU6ImFuY2hvciIsZGVmYXVsdEFuY2hvcjoiMTAwJSIscGFyc2VBbmNob3JSRTovXihyfHJpZ2h0fGJ8Ym90dG9tKSQvaSxnZXRMYXlvdXRUYXJnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5jb250YWluZXIuZ2V0TGF5b3V0VGFyZ2V0KCksYT17fTtpZihiKXthPWIuZ2V0Vmlld1NpemUoKTtpZihFeHQuaXNJRSYmRXh0LmlzU3RyaWN0JiZhLndpZHRoPT0wKXthPWIuZ2V0U3R5bGVTaXplKCl9YS53aWR0aC09Yi5nZXRQYWRkaW5nKCJsciIpO2EuaGVpZ2h0LT1iLmdldFBhZGRpbmcoInRiIil9cmV0dXJuIGF9LG9uTGF5b3V0OmZ1bmN0aW9uKG0sdyl7RXh0LmxheW91dC5BbmNob3JMYXlvdXQuc3VwZXJjbGFzcy5vbkxheW91dC5jYWxsKHRoaXMsbSx3KTt2YXIgcD10aGlzLmdldExheW91dFRhcmdldFNpemUoKSxrPXAud2lkdGgsbz1wLmhlaWdodCxxPXcuZ2V0U3R5bGUoIm92ZXJmbG93Iiksbj10aGlzLmdldFJlbmRlcmVkSXRlbXMobSksdD1uLmxlbmd0aCxnPVtdLGosYSx2LGwsaCxjLGUsZCx1PTAscyxiO2lmKGs8MjAmJm88MjApe3JldHVybn1pZihtLmFuY2hvclNpemUpe2lmKHR5cGVvZiBtLmFuY2hvclNpemU9PSJudW1iZXIiKXthPW0uYW5jaG9yU2l6ZX1lbHNle2E9bS5hbmNob3JTaXplLndpZHRoO3Y9bS5hbmNob3JTaXplLmhlaWdodH19ZWxzZXthPW0uaW5pdGlhbENvbmZpZy53aWR0aDt2PW0uaW5pdGlhbENvbmZpZy5oZWlnaHR9Zm9yKHM9MDtzPHQ7cysrKXtsPW5bc107Yj1sLmdldFBvc2l0aW9uRWwoKTtpZighbC5hbmNob3ImJmwuaXRlbXMmJiFFeHQuaXNOdW1iZXIobC53aWR0aCkmJiEoRXh0LmlzSUU2JiZFeHQuaXNTdHJpY3QpKXtsLmFuY2hvcj10aGlzLmRlZmF1bHRBbmNob3J9aWYobC5hbmNob3Ipe2g9bC5hbmNob3JTcGVjO2lmKCFoKXtkPWwuYW5jaG9yLnNwbGl0KCIgIik7bC5hbmNob3JTcGVjPWg9e3JpZ2h0OnRoaXMucGFyc2VBbmNob3IoZFswXSxsLmluaXRpYWxDb25maWcud2lkdGgsYSksYm90dG9tOnRoaXMucGFyc2VBbmNob3IoZFsxXSxsLmluaXRpYWxDb25maWcuaGVpZ2h0LHYpfX1jPWgucmlnaHQ/dGhpcy5hZGp1c3RXaWR0aEFuY2hvcihoLnJpZ2h0KGspLWIuZ2V0TWFyZ2lucygibHIiKSxsKTp1bmRlZmluZWQ7ZT1oLmJvdHRvbT90aGlzLmFkanVzdEhlaWdodEFuY2hvcihoLmJvdHRvbShvKS1iLmdldE1hcmdpbnMoInRiIiksbCk6dW5kZWZpbmVkO2lmKGN8fGUpe2cucHVzaCh7Y29tcG9uZW50Omwsd2lkdGg6Y3x8dW5kZWZpbmVkLGhlaWdodDplfHx1bmRlZmluZWR9KX19fWZvcihzPTAsdD1nLmxlbmd0aDtzPHQ7cysrKXtqPWdbc107ai5jb21wb25lbnQuc2V0U2l6ZShqLndpZHRoLGouaGVpZ2h0KX1pZihxJiZxIT0iaGlkZGVuIiYmIXRoaXMuYWRqdXN0bWVudFBhc3Mpe3ZhciByPXRoaXMuZ2V0TGF5b3V0VGFyZ2V0U2l6ZSgpO2lmKHIud2lkdGghPXAud2lkdGh8fHIuaGVpZ2h0IT1wLmhlaWdodCl7dGhpcy5hZGp1c3RtZW50UGFzcz10cnVlO3RoaXMub25MYXlvdXQobSx3KX19ZGVsZXRlIHRoaXMuYWRqdXN0bWVudFBhc3N9LHBhcnNlQW5jaG9yOmZ1bmN0aW9uKGMsaCxiKXtpZihjJiZjIT0ibm9uZSIpe3ZhciBlO2lmKHRoaXMucGFyc2VBbmNob3JSRS50ZXN0KGMpKXt2YXIgZz1iLWg7cmV0dXJuIGZ1bmN0aW9uKGEpe2lmKGEhPT1lKXtlPWE7cmV0dXJuIGEtZ319fWVsc2V7aWYoYy5pbmRleE9mKCIlIikhPS0xKXt2YXIgZD1wYXJzZUZsb2F0KGMucmVwbGFjZSgiJSIsIiIpKSowLjAxO3JldHVybiBmdW5jdGlvbihhKXtpZihhIT09ZSl7ZT1hO3JldHVybiBNYXRoLmZsb29yKGEqZCl9fX1lbHNle2M9cGFyc2VJbnQoYywxMCk7aWYoIWlzTmFOKGMpKXtyZXR1cm4gZnVuY3Rpb24oYSl7aWYoYSE9PWUpe2U9YTtyZXR1cm4gYStjfX19fX19cmV0dXJuIGZhbHNlfSxhZGp1c3RXaWR0aEFuY2hvcjpmdW5jdGlvbihiLGEpe3JldHVybiBifSxhZGp1c3RIZWlnaHRBbmNob3I6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYn19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFMuYW5jaG9yPUV4dC5sYXlvdXQuQW5jaG9yTGF5b3V0O0V4dC5sYXlvdXQuQ29sdW1uTGF5b3V0PUV4dC5leHRlbmQoRXh0LmxheW91dC5Db250YWluZXJMYXlvdXQse21vbml0b3JSZXNpemU6dHJ1ZSx0eXBlOiJjb2x1bW4iLGV4dHJhQ2xzOiJ4LWNvbHVtbiIsc2Nyb2xsT2Zmc2V0OjAsdGFyZ2V0Q2xzOiJ4LWNvbHVtbi1sYXlvdXQtY3QiLGlzVmFsaWRQYXJlbnQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5pbm5lckN0JiZiLmdldFBvc2l0aW9uRWwoKS5kb20ucGFyZW50Tm9kZT09dGhpcy5pbm5lckN0LmRvbX0sZ2V0TGF5b3V0VGFyZ2V0U2l6ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuY29udGFpbmVyLmdldExheW91dFRhcmdldCgpLGE7aWYoYil7YT1iLmdldFZpZXdTaXplKCk7aWYoRXh0LmlzSUUmJkV4dC5pc1N0cmljdCYmYS53aWR0aD09MCl7YT1iLmdldFN0eWxlU2l6ZSgpfWEud2lkdGgtPWIuZ2V0UGFkZGluZygibHIiKTthLmhlaWdodC09Yi5nZXRQYWRkaW5nKCJ0YiIpfXJldHVybiBhfSxyZW5kZXJBbGw6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5pbm5lckN0KXt0aGlzLmlubmVyQ3Q9Yi5jcmVhdGVDaGlsZCh7Y2xzOiJ4LWNvbHVtbi1pbm5lciJ9KTt0aGlzLmlubmVyQ3QuY3JlYXRlQ2hpbGQoe2NsczoieC1jbGVhciJ9KX1FeHQubGF5b3V0LkNvbHVtbkxheW91dC5zdXBlcmNsYXNzLnJlbmRlckFsbC5jYWxsKHRoaXMsYSx0aGlzLmlubmVyQ3QpfSxvbkxheW91dDpmdW5jdGlvbihlLGspe3ZhciBnPWUuaXRlbXMuaXRlbXMsaj1nLmxlbmd0aCxuLGIsYSxvPVtdO3RoaXMucmVuZGVyQWxsKGUsayk7dmFyIHI9dGhpcy5nZXRMYXlvdXRUYXJnZXRTaXplKCk7aWYoci53aWR0aDwxJiZyLmhlaWdodDwxKXtyZXR1cm59dmFyIHA9ci53aWR0aC10aGlzLnNjcm9sbE9mZnNldCxkPXIuaGVpZ2h0LHE9cDt0aGlzLmlubmVyQ3Quc2V0V2lkdGgocCk7Zm9yKGI9MDtiPGo7YisrKXtuPWdbYl07YT1uLmdldFBvc2l0aW9uRWwoKS5nZXRNYXJnaW5zKCJsciIpO29bYl09YTtpZighbi5jb2x1bW5XaWR0aCl7cS09KG4uZ2V0V2lkdGgoKSthKX19cT1xPDA/MDpxO2ZvcihiPTA7YjxqO2IrKyl7bj1nW2JdO2E9b1tiXTtpZihuLmNvbHVtbldpZHRoKXtuLnNldFNpemUoTWF0aC5mbG9vcihuLmNvbHVtbldpZHRoKnEpLWEpfX1pZihFeHQuaXNJRSl7aWYoYj1rLmdldFN0eWxlKCJvdmVyZmxvdyIpJiZiIT0iaGlkZGVuIiYmIXRoaXMuYWRqdXN0bWVudFBhc3Mpe3ZhciBsPXRoaXMuZ2V0TGF5b3V0VGFyZ2V0U2l6ZSgpO2lmKGwud2lkdGghPXIud2lkdGgpe3RoaXMuYWRqdXN0bWVudFBhc3M9dHJ1ZTt0aGlzLm9uTGF5b3V0KGUsayl9fX1kZWxldGUgdGhpcy5hZGp1c3RtZW50UGFzc319KTtFeHQuQ29udGFpbmVyLkxBWU9VVFMuY29sdW1uPUV4dC5sYXlvdXQuQ29sdW1uTGF5b3V0O0V4dC5sYXlvdXQuQm9yZGVyTGF5b3V0PUV4dC5leHRlbmQoRXh0LmxheW91dC5Db250YWluZXJMYXlvdXQse21vbml0b3JSZXNpemU6dHJ1ZSxyZW5kZXJlZDpmYWxzZSx0eXBlOiJib3JkZXIiLHRhcmdldENsczoieC1ib3JkZXItbGF5b3V0LWN0IixnZXRMYXlvdXRUYXJnZXRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jb250YWluZXIuZ2V0TGF5b3V0VGFyZ2V0KCk7cmV0dXJuIGE/YS5nZXRWaWV3U2l6ZSgpOnt9fSxvbkxheW91dDpmdW5jdGlvbihnLEkpe3ZhciBqLEIsRixvLHg9Zy5pdGVtcy5pdGVtcyxDPXgubGVuZ3RoO2lmKCF0aGlzLnJlbmRlcmVkKXtqPVtdO2ZvcihCPTA7QjxDO0IrKyl7Rj14W0JdO289Ri5yZWdpb247aWYoRi5jb2xsYXBzZWQpe2oucHVzaChGKX1GLmNvbGxhcHNlZD1mYWxzZTtpZighRi5yZW5kZXJlZCl7Ri5yZW5kZXIoSSxCKTtGLmdldFBvc2l0aW9uRWwoKS5hZGRDbGFzcygieC1ib3JkZXItcGFuZWwiKX10aGlzW29dPW8hPSJjZW50ZXIiJiZGLnNwbGl0P25ldyBFeHQubGF5b3V0LkJvcmRlckxheW91dC5TcGxpdFJlZ2lvbih0aGlzLEYuaW5pdGlhbENvbmZpZyxvKTpuZXcgRXh0LmxheW91dC5Cb3JkZXJMYXlvdXQuUmVnaW9uKHRoaXMsRi5pbml0aWFsQ29uZmlnLG8pO3RoaXNbb10ucmVuZGVyKEksRil9dGhpcy5yZW5kZXJlZD10cnVlfXZhciB2PXRoaXMuZ2V0TGF5b3V0VGFyZ2V0U2l6ZSgpO2lmKHYud2lkdGg8MjB8fHYuaGVpZ2h0PDIwKXtpZihqKXt0aGlzLnJlc3RvcmVDb2xsYXBzZWQ9an1yZXR1cm59ZWxzZXtpZih0aGlzLnJlc3RvcmVDb2xsYXBzZWQpe2o9dGhpcy5yZXN0b3JlQ29sbGFwc2VkO2RlbGV0ZSB0aGlzLnJlc3RvcmVDb2xsYXBzZWR9fXZhciB0PXYud2lkdGgsRD12LmhlaWdodCxyPXQsQT1ELHA9MCxxPTAseT10aGlzLm5vcnRoLHU9dGhpcy5zb3V0aCxsPXRoaXMud2VzdCxFPXRoaXMuZWFzdCxGPXRoaXMuY2VudGVyLEgseixkLEc7aWYoIUYmJkV4dC5sYXlvdXQuQm9yZGVyTGF5b3V0LldBUk4hPT1mYWxzZSl7dGhyb3ciTm8gY2VudGVyIHJlZ2lvbiBkZWZpbmVkIGluIEJvcmRlckxheW91dCAiK2cuaWR9aWYoeSYmeS5pc1Zpc2libGUoKSl7SD15LmdldFNpemUoKTt6PXkuZ2V0TWFyZ2lucygpO0gud2lkdGg9dC0oei5sZWZ0K3oucmlnaHQpO0gueD16LmxlZnQ7SC55PXoudG9wO3A9SC5oZWlnaHQrSC55K3ouYm90dG9tO0EtPXA7eS5hcHBseUxheW91dChIKX1pZih1JiZ1LmlzVmlzaWJsZSgpKXtIPXUuZ2V0U2l6ZSgpO3o9dS5nZXRNYXJnaW5zKCk7SC53aWR0aD10LSh6LmxlZnQrei5yaWdodCk7SC54PXoubGVmdDtHPShILmhlaWdodCt6LnRvcCt6LmJvdHRvbSk7SC55PUQtRyt6LnRvcDtBLT1HO3UuYXBwbHlMYXlvdXQoSCl9aWYobCYmbC5pc1Zpc2libGUoKSl7SD1sLmdldFNpemUoKTt6PWwuZ2V0TWFyZ2lucygpO0guaGVpZ2h0PUEtKHoudG9wK3ouYm90dG9tKTtILng9ei5sZWZ0O0gueT1wK3oudG9wO2Q9KEgud2lkdGgrei5sZWZ0K3oucmlnaHQpO3ErPWQ7ci09ZDtsLmFwcGx5TGF5b3V0KEgpfWlmKEUmJkUuaXNWaXNpYmxlKCkpe0g9RS5nZXRTaXplKCk7ej1FLmdldE1hcmdpbnMoKTtILmhlaWdodD1BLSh6LnRvcCt6LmJvdHRvbSk7ZD0oSC53aWR0aCt6LmxlZnQrei5yaWdodCk7SC54PXQtZCt6LmxlZnQ7SC55PXArei50b3A7ci09ZDtFLmFwcGx5TGF5b3V0KEgpfWlmKEYpe3o9Ri5nZXRNYXJnaW5zKCk7dmFyIGs9e3g6cSt6LmxlZnQseTpwK3oudG9wLHdpZHRoOnItKHoubGVmdCt6LnJpZ2h0KSxoZWlnaHQ6QS0oei50b3Arei5ib3R0b20pfTtGLmFwcGx5TGF5b3V0KGspfWlmKGope2ZvcihCPTAsQz1qLmxlbmd0aDtCPEM7QisrKXtqW0JdLmNvbGxhcHNlKGZhbHNlKX19aWYoRXh0LmlzSUUmJkV4dC5pc1N0cmljdCl7SS5yZXBhaW50KCl9aWYoQj1JLmdldFN0eWxlKCJvdmVyZmxvdyIpJiZCIT0iaGlkZGVuIiYmIXRoaXMuYWRqdXN0bWVudFBhc3Mpe3ZhciBhPXRoaXMuZ2V0TGF5b3V0VGFyZ2V0U2l6ZSgpO2lmKGEud2lkdGghPXYud2lkdGh8fGEuaGVpZ2h0IT12LmhlaWdodCl7dGhpcy5hZGp1c3RtZW50UGFzcz10cnVlO3RoaXMub25MYXlvdXQoZyxJKX19ZGVsZXRlIHRoaXMuYWRqdXN0bWVudFBhc3N9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYj1bIm5vcnRoIiwic291dGgiLCJlYXN0Iiwid2VzdCJdLGEsYztmb3IoYT0wO2E8Yi5sZW5ndGg7YSsrKXtjPXRoaXNbYlthXV07aWYoYyl7aWYoYy5kZXN0cm95KXtjLmRlc3Ryb3koKX1lbHNle2lmKGMuc3BsaXQpe2Muc3BsaXQuZGVzdHJveSh0cnVlKX19fX1FeHQubGF5b3V0LkJvcmRlckxheW91dC5zdXBlcmNsYXNzLmRlc3Ryb3kuY2FsbCh0aGlzKX19KTtFeHQubGF5b3V0LkJvcmRlckxheW91dC5SZWdpb249ZnVuY3Rpb24oYixhLGMpe0V4dC5hcHBseSh0aGlzLGEpO3RoaXMubGF5b3V0PWI7dGhpcy5wb3NpdGlvbj1jO3RoaXMuc3RhdGU9e307aWYodHlwZW9mIHRoaXMubWFyZ2lucz09InN0cmluZyIpe3RoaXMubWFyZ2lucz10aGlzLmxheW91dC5wYXJzZU1hcmdpbnModGhpcy5tYXJnaW5zKX10aGlzLm1hcmdpbnM9RXh0LmFwcGx5SWYodGhpcy5tYXJnaW5zfHx7fSx0aGlzLmRlZmF1bHRNYXJnaW5zKTtpZih0aGlzLmNvbGxhcHNpYmxlKXtpZih0eXBlb2YgdGhpcy5jbWFyZ2lucz09InN0cmluZyIpe3RoaXMuY21hcmdpbnM9dGhpcy5sYXlvdXQucGFyc2VNYXJnaW5zKHRoaXMuY21hcmdpbnMpfWlmKHRoaXMuY29sbGFwc2VNb2RlPT0ibWluaSImJiF0aGlzLmNtYXJnaW5zKXt0aGlzLmNtYXJnaW5zPXtsZWZ0OjAsdG9wOjAscmlnaHQ6MCxib3R0b206MH19ZWxzZXt0aGlzLmNtYXJnaW5zPUV4dC5hcHBseUlmKHRoaXMuY21hcmdpbnN8fHt9LGM9PSJub3J0aCJ8fGM9PSJzb3V0aCI/dGhpcy5kZWZhdWx0TlNDTWFyZ2luczp0aGlzLmRlZmF1bHRFV0NNYXJnaW5zKX19fTtFeHQubGF5b3V0LkJvcmRlckxheW91dC5SZWdpb24ucHJvdG90eXBlPXtjb2xsYXBzaWJsZTpmYWxzZSxzcGxpdDpmYWxzZSxmbG9hdGFibGU6dHJ1ZSxtaW5XaWR0aDo1MCxtaW5IZWlnaHQ6NTAsZGVmYXVsdE1hcmdpbnM6e2xlZnQ6MCx0b3A6MCxyaWdodDowLGJvdHRvbTowfSxkZWZhdWx0TlNDTWFyZ2luczp7bGVmdDo1LHRvcDo1LHJpZ2h0OjUsYm90dG9tOjV9LGRlZmF1bHRFV0NNYXJnaW5zOntsZWZ0OjUsdG9wOjAscmlnaHQ6NSxib3R0b206MH0sZmxvYXRpbmdaSW5kZXg6MTAwLGlzQ29sbGFwc2VkOmZhbHNlLHJlbmRlcjpmdW5jdGlvbihiLGMpe3RoaXMucGFuZWw9YztjLmVsLmVuYWJsZURpc3BsYXlNb2RlKCk7dGhpcy50YXJnZXRFbD1iO3RoaXMuZWw9Yy5lbDt2YXIgYT1jLmdldFN0YXRlLGQ9dGhpcy5wb3NpdGlvbjtjLmdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5hcHBseShhLmNhbGwoYyl8fHt9LHRoaXMuc3RhdGUpfS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTtpZihkIT0iY2VudGVyIil7Yy5hbGxvd1F1ZXVlZEV4cGFuZD1mYWxzZTtjLm9uKHtiZWZvcmVjb2xsYXBzZTp0aGlzLmJlZm9yZUNvbGxhcHNlLGNvbGxhcHNlOnRoaXMub25Db2xsYXBzZSxiZWZvcmVleHBhbmQ6dGhpcy5iZWZvcmVFeHBhbmQsZXhwYW5kOnRoaXMub25FeHBhbmQsaGlkZTp0aGlzLm9uSGlkZSxzaG93OnRoaXMub25TaG93LHNjb3BlOnRoaXN9KTtpZih0aGlzLmNvbGxhcHNpYmxlfHx0aGlzLmZsb2F0YWJsZSl7Yy5jb2xsYXBzZUVsPSJlbCI7Yy5zbGlkZUFuY2hvcj10aGlzLmdldFNsaWRlQW5jaG9yKCl9aWYoYy50b29scyYmYy50b29scy50b2dnbGUpe2MudG9vbHMudG9nZ2xlLmFkZENsYXNzKCJ4LXRvb2wtY29sbGFwc2UtIitkKTtjLnRvb2xzLnRvZ2dsZS5hZGRDbGFzc09uT3ZlcigieC10b29sLWNvbGxhcHNlLSIrZCsiLW92ZXIiKX19fSxnZXRDb2xsYXBzZWRFbDpmdW5jdGlvbigpe2lmKCF0aGlzLmNvbGxhcHNlZEVsKXtpZighdGhpcy50b29sVGVtcGxhdGUpe3ZhciBiPW5ldyBFeHQuVGVtcGxhdGUoJzxkaXYgY2xhc3M9IngtdG9vbCB4LXRvb2wte2lkfSI+JiMxNjA7PC9kaXY+Jyk7Yi5kaXNhYmxlRm9ybWF0cz10cnVlO2IuY29tcGlsZSgpO0V4dC5sYXlvdXQuQm9yZGVyTGF5b3V0LlJlZ2lvbi5wcm90b3R5cGUudG9vbFRlbXBsYXRlPWJ9dGhpcy5jb2xsYXBzZWRFbD10aGlzLnRhcmdldEVsLmNyZWF0ZUNoaWxkKHtjbHM6IngtbGF5b3V0LWNvbGxhcHNlZCB4LWxheW91dC1jb2xsYXBzZWQtIit0aGlzLnBvc2l0aW9uLGlkOnRoaXMucGFuZWwuaWQrIi14Y29sbGFwc2VkIn0pO3RoaXMuY29sbGFwc2VkRWwuZW5hYmxlRGlzcGxheU1vZGUoImJsb2NrIik7aWYodGhpcy5jb2xsYXBzZU1vZGU9PSJtaW5pIil7dGhpcy5jb2xsYXBzZWRFbC5hZGRDbGFzcygieC1sYXlvdXQtY21pbmktIit0aGlzLnBvc2l0aW9uKTt0aGlzLm1pbmlDb2xsYXBzZWRFbD10aGlzLmNvbGxhcHNlZEVsLmNyZWF0ZUNoaWxkKHtjbHM6IngtbGF5b3V0LW1pbmkgeC1sYXlvdXQtbWluaS0iK3RoaXMucG9zaXRpb24saHRtbDoiJiMxNjA7In0pO3RoaXMubWluaUNvbGxhcHNlZEVsLmFkZENsYXNzT25PdmVyKCJ4LWxheW91dC1taW5pLW92ZXIiKTt0aGlzLmNvbGxhcHNlZEVsLmFkZENsYXNzT25PdmVyKCJ4LWxheW91dC1jb2xsYXBzZWQtb3ZlciIpO3RoaXMuY29sbGFwc2VkRWwub24oImNsaWNrIix0aGlzLm9uRXhwYW5kQ2xpY2ssdGhpcyx7c3RvcEV2ZW50OnRydWV9KX1lbHNle2lmKHRoaXMuY29sbGFwc2libGUhPT1mYWxzZSYmIXRoaXMuaGlkZUNvbGxhcHNlVG9vbCl7dmFyIGE9dGhpcy5leHBhbmRUb29sRWw9dGhpcy50b29sVGVtcGxhdGUuYXBwZW5kKHRoaXMuY29sbGFwc2VkRWwuZG9tLHtpZDoiZXhwYW5kLSIrdGhpcy5wb3NpdGlvbn0sdHJ1ZSk7YS5hZGRDbGFzc09uT3ZlcigieC10b29sLWV4cGFuZC0iK3RoaXMucG9zaXRpb24rIi1vdmVyIik7YS5vbigiY2xpY2siLHRoaXMub25FeHBhbmRDbGljayx0aGlzLHtzdG9wRXZlbnQ6dHJ1ZX0pfWlmKHRoaXMuZmxvYXRhYmxlIT09ZmFsc2V8fHRoaXMudGl0bGVDb2xsYXBzZSl7dGhpcy5jb2xsYXBzZWRFbC5hZGRDbGFzc09uT3ZlcigieC1sYXlvdXQtY29sbGFwc2VkLW92ZXIiKTt0aGlzLmNvbGxhcHNlZEVsLm9uKCJjbGljayIsdGhpc1t0aGlzLmZsb2F0YWJsZT8iY29sbGFwc2VDbGljayI6Im9uRXhwYW5kQ2xpY2siXSx0aGlzKX19fXJldHVybiB0aGlzLmNvbGxhcHNlZEVsfSxvbkV4cGFuZENsaWNrOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNTbGlkKXt0aGlzLnBhbmVsLmV4cGFuZChmYWxzZSl9ZWxzZXt0aGlzLnBhbmVsLmV4cGFuZCgpfX0sb25Db2xsYXBzZUNsaWNrOmZ1bmN0aW9uKGEpe3RoaXMucGFuZWwuY29sbGFwc2UoKX0sYmVmb3JlQ29sbGFwc2U6ZnVuY3Rpb24oYyxhKXt0aGlzLmxhc3RBbmltPWE7aWYodGhpcy5zcGxpdEVsKXt0aGlzLnNwbGl0RWwuaGlkZSgpfXRoaXMuZ2V0Q29sbGFwc2VkRWwoKS5zaG93KCk7dmFyIGI9dGhpcy5wYW5lbC5nZXRFbCgpO3RoaXMub3JpZ2luYWxaSW5kZXg9Yi5nZXRTdHlsZSgiei1pbmRleCIpO2Iuc2V0U3R5bGUoInotaW5kZXgiLDEwMCk7dGhpcy5pc0NvbGxhcHNlZD10cnVlO3RoaXMubGF5b3V0LmxheW91dCgpfSxvbkNvbGxhcHNlOmZ1bmN0aW9uKGEpe3RoaXMucGFuZWwuZWwuc2V0U3R5bGUoInotaW5kZXgiLDEpO2lmKHRoaXMubGFzdEFuaW09PT1mYWxzZXx8dGhpcy5wYW5lbC5hbmltQ29sbGFwc2U9PT1mYWxzZSl7dGhpcy5nZXRDb2xsYXBzZWRFbCgpLmRvbS5zdHlsZS52aXNpYmlsaXR5PSJ2aXNpYmxlIn1lbHNle3RoaXMuZ2V0Q29sbGFwc2VkRWwoKS5zbGlkZUluKHRoaXMucGFuZWwuc2xpZGVBbmNob3Ise2R1cmF0aW9uOjAuMn0pfXRoaXMuc3RhdGUuY29sbGFwc2VkPXRydWU7dGhpcy5wYW5lbC5zYXZlU3RhdGUoKX0sYmVmb3JlRXhwYW5kOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNTbGlkKXt0aGlzLmFmdGVyU2xpZGVJbigpfXZhciBiPXRoaXMuZ2V0Q29sbGFwc2VkRWwoKTt0aGlzLmVsLnNob3coKTtpZih0aGlzLnBvc2l0aW9uPT0iZWFzdCJ8fHRoaXMucG9zaXRpb249PSJ3ZXN0Iil7dGhpcy5wYW5lbC5zZXRTaXplKHVuZGVmaW5lZCxiLmdldEhlaWdodCgpKX1lbHNle3RoaXMucGFuZWwuc2V0U2l6ZShiLmdldFdpZHRoKCksdW5kZWZpbmVkKX1iLmhpZGUoKTtiLmRvbS5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO3RoaXMucGFuZWwuZWwuc2V0U3R5bGUoInotaW5kZXgiLHRoaXMuZmxvYXRpbmdaSW5kZXgpfSxvbkV4cGFuZDpmdW5jdGlvbigpe3RoaXMuaXNDb2xsYXBzZWQ9ZmFsc2U7aWYodGhpcy5zcGxpdEVsKXt0aGlzLnNwbGl0RWwuc2hvdygpfXRoaXMubGF5b3V0LmxheW91dCgpO3RoaXMucGFuZWwuZWwuc2V0U3R5bGUoInotaW5kZXgiLHRoaXMub3JpZ2luYWxaSW5kZXgpO3RoaXMuc3RhdGUuY29sbGFwc2VkPWZhbHNlO3RoaXMucGFuZWwuc2F2ZVN0YXRlKCl9LGNvbGxhcHNlQ2xpY2s6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc1NsaWQpe2Euc3RvcFByb3BhZ2F0aW9uKCk7dGhpcy5zbGlkZUluKCl9ZWxzZXthLnN0b3BQcm9wYWdhdGlvbigpO3RoaXMuc2xpZGVPdXQoKX19LG9uSGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3RoaXMuZ2V0Q29sbGFwc2VkRWwoKS5oaWRlKCl9ZWxzZXtpZih0aGlzLnNwbGl0RWwpe3RoaXMuc3BsaXRFbC5oaWRlKCl9fX0sb25TaG93OmZ1bmN0aW9uKCl7aWYodGhpcy5pc0NvbGxhcHNlZCl7dGhpcy5nZXRDb2xsYXBzZWRFbCgpLnNob3coKX1lbHNle2lmKHRoaXMuc3BsaXRFbCl7dGhpcy5zcGxpdEVsLnNob3coKX19fSxpc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gIXRoaXMucGFuZWwuaGlkZGVufSxnZXRNYXJnaW5zOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNDb2xsYXBzZWQmJnRoaXMuY21hcmdpbnM/dGhpcy5jbWFyZ2luczp0aGlzLm1hcmdpbnN9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0NvbGxhcHNlZD90aGlzLmdldENvbGxhcHNlZEVsKCkuZ2V0U2l6ZSgpOnRoaXMucGFuZWwuZ2V0U2l6ZSgpfSxzZXRQYW5lbDpmdW5jdGlvbihhKXt0aGlzLnBhbmVsPWF9LGdldE1pbldpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWluV2lkdGh9LGdldE1pbkhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1pbkhlaWdodH0sYXBwbHlMYXlvdXRDb2xsYXBzZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRDb2xsYXBzZWRFbCgpO2Iuc2V0TGVmdFRvcChhLngsYS55KTtiLnNldFNpemUoYS53aWR0aCxhLmhlaWdodCl9LGFwcGx5TGF5b3V0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3RoaXMuYXBwbHlMYXlvdXRDb2xsYXBzZWQoYSl9ZWxzZXt0aGlzLnBhbmVsLnNldFBvc2l0aW9uKGEueCxhLnkpO3RoaXMucGFuZWwuc2V0U2l6ZShhLndpZHRoLGEuaGVpZ2h0KX19LGJlZm9yZVNsaWRlOmZ1bmN0aW9uKCl7dGhpcy5wYW5lbC5iZWZvcmVFZmZlY3QoKX0sYWZ0ZXJTbGlkZTpmdW5jdGlvbigpe3RoaXMucGFuZWwuYWZ0ZXJFZmZlY3QoKX0saW5pdEF1dG9IaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5hdXRvSGlkZSE9PWZhbHNlKXtpZighdGhpcy5hdXRvSGlkZUhkKXt0aGlzLmF1dG9IaWRlU2xpZGVUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayh0aGlzLnNsaWRlSW4sdGhpcyk7dGhpcy5hdXRvSGlkZUhkPXttb3VzZW91dDpmdW5jdGlvbihhKXtpZighYS53aXRoaW4odGhpcy5lbCx0cnVlKSl7dGhpcy5hdXRvSGlkZVNsaWRlVGFzay5kZWxheSg1MDApfX0sbW91c2VvdmVyOmZ1bmN0aW9uKGEpe3RoaXMuYXV0b0hpZGVTbGlkZVRhc2suY2FuY2VsKCl9LHNjb3BlOnRoaXN9fXRoaXMuZWwub24odGhpcy5hdXRvSGlkZUhkKTt0aGlzLmNvbGxhcHNlZEVsLm9uKHRoaXMuYXV0b0hpZGVIZCl9fSxjbGVhckF1dG9IaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5hdXRvSGlkZSE9PWZhbHNlKXt0aGlzLmVsLnVuKCJtb3VzZW91dCIsdGhpcy5hdXRvSGlkZUhkLm1vdXNlb3V0KTt0aGlzLmVsLnVuKCJtb3VzZW92ZXIiLHRoaXMuYXV0b0hpZGVIZC5tb3VzZW92ZXIpO3RoaXMuY29sbGFwc2VkRWwudW4oIm1vdXNlb3V0Iix0aGlzLmF1dG9IaWRlSGQubW91c2VvdXQpO3RoaXMuY29sbGFwc2VkRWwudW4oIm1vdXNlb3ZlciIsdGhpcy5hdXRvSGlkZUhkLm1vdXNlb3Zlcil9fSxjbGVhck1vbml0b3I6ZnVuY3Rpb24oKXtFeHQuZ2V0RG9jKCkudW4oImNsaWNrIix0aGlzLnNsaWRlSW5JZix0aGlzKX0sc2xpZGVPdXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzU2xpZHx8dGhpcy5lbC5oYXNBY3RpdmVGeCgpKXtyZXR1cm59dGhpcy5pc1NsaWQ9dHJ1ZTt2YXIgYj10aGlzLnBhbmVsLnRvb2xzLGMsYTtpZihiJiZiLnRvZ2dsZSl7Yi50b2dnbGUuaGlkZSgpfXRoaXMuZWwuc2hvdygpO2E9dGhpcy5wYW5lbC5jb2xsYXBzZWQ7dGhpcy5wYW5lbC5jb2xsYXBzZWQ9ZmFsc2U7aWYodGhpcy5wb3NpdGlvbj09ImVhc3QifHx0aGlzLnBvc2l0aW9uPT0id2VzdCIpe2M9dGhpcy5wYW5lbC5kZWZlckhlaWdodDt0aGlzLnBhbmVsLmRlZmVySGVpZ2h0PWZhbHNlO3RoaXMucGFuZWwuc2V0U2l6ZSh1bmRlZmluZWQsdGhpcy5jb2xsYXBzZWRFbC5nZXRIZWlnaHQoKSk7dGhpcy5wYW5lbC5kZWZlckhlaWdodD1jfWVsc2V7dGhpcy5wYW5lbC5zZXRTaXplKHRoaXMuY29sbGFwc2VkRWwuZ2V0V2lkdGgoKSx1bmRlZmluZWQpfXRoaXMucGFuZWwuY29sbGFwc2VkPWE7dGhpcy5yZXN0b3JlTFQ9W3RoaXMuZWwuZG9tLnN0eWxlLmxlZnQsdGhpcy5lbC5kb20uc3R5bGUudG9wXTt0aGlzLmVsLmFsaWduVG8odGhpcy5jb2xsYXBzZWRFbCx0aGlzLmdldENvbGxhcHNlQW5jaG9yKCkpO3RoaXMuZWwuc2V0U3R5bGUoInotaW5kZXgiLHRoaXMuZmxvYXRpbmdaSW5kZXgrMik7dGhpcy5wYW5lbC5lbC5yZXBsYWNlQ2xhc3MoIngtcGFuZWwtY29sbGFwc2VkIiwieC1wYW5lbC1mbG9hdGluZyIpO2lmKHRoaXMuYW5pbUZsb2F0IT09ZmFsc2Upe3RoaXMuYmVmb3JlU2xpZGUoKTt0aGlzLmVsLnNsaWRlSW4odGhpcy5nZXRTbGlkZUFuY2hvcigpLHtjYWxsYmFjazpmdW5jdGlvbigpe3RoaXMuYWZ0ZXJTbGlkZSgpO3RoaXMuaW5pdEF1dG9IaWRlKCk7RXh0LmdldERvYygpLm9uKCJjbGljayIsdGhpcy5zbGlkZUluSWYsdGhpcyl9LHNjb3BlOnRoaXMsYmxvY2s6dHJ1ZX0pfWVsc2V7dGhpcy5pbml0QXV0b0hpZGUoKTtFeHQuZ2V0RG9jKCkub24oImNsaWNrIix0aGlzLnNsaWRlSW5JZix0aGlzKX19LGFmdGVyU2xpZGVJbjpmdW5jdGlvbigpe3RoaXMuY2xlYXJBdXRvSGlkZSgpO3RoaXMuaXNTbGlkPWZhbHNlO3RoaXMuY2xlYXJNb25pdG9yKCk7dGhpcy5lbC5zZXRTdHlsZSgiei1pbmRleCIsIiIpO3RoaXMucGFuZWwuZWwucmVwbGFjZUNsYXNzKCJ4LXBhbmVsLWZsb2F0aW5nIiwieC1wYW5lbC1jb2xsYXBzZWQiKTt0aGlzLmVsLmRvbS5zdHlsZS5sZWZ0PXRoaXMucmVzdG9yZUxUWzBdO3RoaXMuZWwuZG9tLnN0eWxlLnRvcD10aGlzLnJlc3RvcmVMVFsxXTt2YXIgYT10aGlzLnBhbmVsLnRvb2xzO2lmKGEmJmEudG9nZ2xlKXthLnRvZ2dsZS5zaG93KCl9fSxzbGlkZUluOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzU2xpZHx8dGhpcy5lbC5oYXNBY3RpdmVGeCgpKXtFeHQuY2FsbGJhY2soYSk7cmV0dXJufXRoaXMuaXNTbGlkPWZhbHNlO2lmKHRoaXMuYW5pbUZsb2F0IT09ZmFsc2Upe3RoaXMuYmVmb3JlU2xpZGUoKTt0aGlzLmVsLnNsaWRlT3V0KHRoaXMuZ2V0U2xpZGVBbmNob3IoKSx7Y2FsbGJhY2s6ZnVuY3Rpb24oKXt0aGlzLmVsLmhpZGUoKTt0aGlzLmFmdGVyU2xpZGUoKTt0aGlzLmFmdGVyU2xpZGVJbigpO0V4dC5jYWxsYmFjayhhKX0sc2NvcGU6dGhpcyxibG9jazp0cnVlfSl9ZWxzZXt0aGlzLmVsLmhpZGUoKTt0aGlzLmFmdGVyU2xpZGVJbigpfX0sc2xpZGVJbklmOmZ1bmN0aW9uKGEpe2lmKCFhLndpdGhpbih0aGlzLmVsKSl7dGhpcy5zbGlkZUluKCl9fSxhbmNob3JzOnt3ZXN0OiJsZWZ0IixlYXN0OiJyaWdodCIsbm9ydGg6InRvcCIsc291dGg6ImJvdHRvbSJ9LHNhbmNob3JzOnt3ZXN0OiJsIixlYXN0OiJyIixub3J0aDoidCIsc291dGg6ImIifSxjYW5jaG9yczp7d2VzdDoidGwtdHIiLGVhc3Q6InRyLXRsIixub3J0aDoidGwtYmwiLHNvdXRoOiJibC10bCJ9LGdldEFuY2hvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFuY2hvcnNbdGhpcy5wb3NpdGlvbl19LGdldENvbGxhcHNlQW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FuY2hvcnNbdGhpcy5wb3NpdGlvbl19LGdldFNsaWRlQW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2FuY2hvcnNbdGhpcy5wb3NpdGlvbl19LGdldEFsaWduQWRqOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jbWFyZ2lucztzd2l0Y2godGhpcy5wb3NpdGlvbil7Y2FzZSJ3ZXN0IjpyZXR1cm5bMCwwXTticmVhaztjYXNlImVhc3QiOnJldHVyblswLDBdO2JyZWFrO2Nhc2Uibm9ydGgiOnJldHVyblswLDBdO2JyZWFrO2Nhc2Uic291dGgiOnJldHVyblswLDBdO2JyZWFrfX0sZ2V0RXhwYW5kQWRqOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5jb2xsYXBzZWRFbCxhPXRoaXMuY21hcmdpbnM7c3dpdGNoKHRoaXMucG9zaXRpb24pe2Nhc2Uid2VzdCI6cmV0dXJuWy0oYS5yaWdodCtiLmdldFdpZHRoKCkrYS5sZWZ0KSwwXTticmVhaztjYXNlImVhc3QiOnJldHVyblthLnJpZ2h0K2IuZ2V0V2lkdGgoKSthLmxlZnQsMF07YnJlYWs7Y2FzZSJub3J0aCI6cmV0dXJuWzAsLShhLnRvcCthLmJvdHRvbStiLmdldEhlaWdodCgpKV07YnJlYWs7Y2FzZSJzb3V0aCI6cmV0dXJuWzAsYS50b3ArYS5ib3R0b20rYi5nZXRIZWlnaHQoKV07YnJlYWt9fSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5hdXRvSGlkZVNsaWRlVGFzayYmdGhpcy5hdXRvSGlkZVNsaWRlVGFzay5jYW5jZWwpe3RoaXMuYXV0b0hpZGVTbGlkZVRhc2suY2FuY2VsKCl9RXh0LmRlc3Ryb3lNZW1iZXJzKHRoaXMsIm1pbmlDb2xsYXBzZWRFbCIsImNvbGxhcHNlZEVsIiwiZXhwYW5kVG9vbEVsIil9fTtFeHQubGF5b3V0LkJvcmRlckxheW91dC5TcGxpdFJlZ2lvbj1mdW5jdGlvbihiLGEsYyl7RXh0LmxheW91dC5Cb3JkZXJMYXlvdXQuU3BsaXRSZWdpb24uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYixhLGMpO3RoaXMuYXBwbHlMYXlvdXQ9dGhpcy5hcHBseUZuc1tjXX07RXh0LmV4dGVuZChFeHQubGF5b3V0LkJvcmRlckxheW91dC5TcGxpdFJlZ2lvbixFeHQubGF5b3V0LkJvcmRlckxheW91dC5SZWdpb24se3NwbGl0VGlwOiJEcmFnIHRvIHJlc2l6ZS4iLGNvbGxhcHNpYmxlU3BsaXRUaXA6IkRyYWcgdG8gcmVzaXplLiBEb3VibGUgY2xpY2sgdG8gaGlkZS4iLHVzZVNwbGl0VGlwczpmYWxzZSxzcGxpdFNldHRpbmdzOntub3J0aDp7b3JpZW50YXRpb246RXh0LlNwbGl0QmFyLlZFUlRJQ0FMLHBsYWNlbWVudDpFeHQuU3BsaXRCYXIuVE9QLG1heEZuOiJnZXRWTWF4U2l6ZSIsbWluUHJvcDoibWluSGVpZ2h0IixtYXhQcm9wOiJtYXhIZWlnaHQifSxzb3V0aDp7b3JpZW50YXRpb246RXh0LlNwbGl0QmFyLlZFUlRJQ0FMLHBsYWNlbWVudDpFeHQuU3BsaXRCYXIuQk9UVE9NLG1heEZuOiJnZXRWTWF4U2l6ZSIsbWluUHJvcDoibWluSGVpZ2h0IixtYXhQcm9wOiJtYXhIZWlnaHQifSxlYXN0OntvcmllbnRhdGlvbjpFeHQuU3BsaXRCYXIuSE9SSVpPTlRBTCxwbGFjZW1lbnQ6RXh0LlNwbGl0QmFyLlJJR0hULG1heEZuOiJnZXRITWF4U2l6ZSIsbWluUHJvcDoibWluV2lkdGgiLG1heFByb3A6Im1heFdpZHRoIn0sd2VzdDp7b3JpZW50YXRpb246RXh0LlNwbGl0QmFyLkhPUklaT05UQUwscGxhY2VtZW50OkV4dC5TcGxpdEJhci5MRUZULG1heEZuOiJnZXRITWF4U2l6ZSIsbWluUHJvcDoibWluV2lkdGgiLG1heFByb3A6Im1heFdpZHRoIn19LGFwcGx5Rm5zOnt3ZXN0OmZ1bmN0aW9uKGMpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3JldHVybiB0aGlzLmFwcGx5TGF5b3V0Q29sbGFwc2VkKGMpfXZhciBkPXRoaXMuc3BsaXRFbC5kb20sYj1kLnN0eWxlO3RoaXMucGFuZWwuc2V0UG9zaXRpb24oYy54LGMueSk7dmFyIGE9ZC5vZmZzZXRXaWR0aDtiLmxlZnQ9KGMueCtjLndpZHRoLWEpKyJweCI7Yi50b3A9KGMueSkrInB4IjtiLmhlaWdodD1NYXRoLm1heCgwLGMuaGVpZ2h0KSsicHgiO3RoaXMucGFuZWwuc2V0U2l6ZShjLndpZHRoLWEsYy5oZWlnaHQpfSxlYXN0OmZ1bmN0aW9uKGMpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3JldHVybiB0aGlzLmFwcGx5TGF5b3V0Q29sbGFwc2VkKGMpfXZhciBkPXRoaXMuc3BsaXRFbC5kb20sYj1kLnN0eWxlO3ZhciBhPWQub2Zmc2V0V2lkdGg7dGhpcy5wYW5lbC5zZXRQb3NpdGlvbihjLngrYSxjLnkpO2IubGVmdD0oYy54KSsicHgiO2IudG9wPShjLnkpKyJweCI7Yi5oZWlnaHQ9TWF0aC5tYXgoMCxjLmhlaWdodCkrInB4Ijt0aGlzLnBhbmVsLnNldFNpemUoYy53aWR0aC1hLGMuaGVpZ2h0KX0sbm9ydGg6ZnVuY3Rpb24oYyl7aWYodGhpcy5pc0NvbGxhcHNlZCl7cmV0dXJuIHRoaXMuYXBwbHlMYXlvdXRDb2xsYXBzZWQoYyl9dmFyIGQ9dGhpcy5zcGxpdEVsLmRvbSxiPWQuc3R5bGU7dmFyIGE9ZC5vZmZzZXRIZWlnaHQ7dGhpcy5wYW5lbC5zZXRQb3NpdGlvbihjLngsYy55KTtiLmxlZnQ9KGMueCkrInB4IjtiLnRvcD0oYy55K2MuaGVpZ2h0LWEpKyJweCI7Yi53aWR0aD1NYXRoLm1heCgwLGMud2lkdGgpKyJweCI7dGhpcy5wYW5lbC5zZXRTaXplKGMud2lkdGgsYy5oZWlnaHQtYSl9LHNvdXRoOmZ1bmN0aW9uKGMpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3JldHVybiB0aGlzLmFwcGx5TGF5b3V0Q29sbGFwc2VkKGMpfXZhciBkPXRoaXMuc3BsaXRFbC5kb20sYj1kLnN0eWxlO3ZhciBhPWQub2Zmc2V0SGVpZ2h0O3RoaXMucGFuZWwuc2V0UG9zaXRpb24oYy54LGMueSthKTtiLmxlZnQ9KGMueCkrInB4IjtiLnRvcD0oYy55KSsicHgiO2Iud2lkdGg9TWF0aC5tYXgoMCxjLndpZHRoKSsicHgiO3RoaXMucGFuZWwuc2V0U2l6ZShjLndpZHRoLGMuaGVpZ2h0LWEpfX0scmVuZGVyOmZ1bmN0aW9uKGEsYyl7RXh0LmxheW91dC5Cb3JkZXJMYXlvdXQuU3BsaXRSZWdpb24uc3VwZXJjbGFzcy5yZW5kZXIuY2FsbCh0aGlzLGEsYyk7dmFyIGQ9dGhpcy5wb3NpdGlvbjt0aGlzLnNwbGl0RWw9YS5jcmVhdGVDaGlsZCh7Y2xzOiJ4LWxheW91dC1zcGxpdCB4LWxheW91dC1zcGxpdC0iK2QsaHRtbDoiJiMxNjA7IixpZDp0aGlzLnBhbmVsLmlkKyIteHNwbGl0In0pO2lmKHRoaXMuY29sbGFwc2VNb2RlPT0ibWluaSIpe3RoaXMubWluaVNwbGl0RWw9dGhpcy5zcGxpdEVsLmNyZWF0ZUNoaWxkKHtjbHM6IngtbGF5b3V0LW1pbmkgeC1sYXlvdXQtbWluaS0iK2QsaHRtbDoiJiMxNjA7In0pO3RoaXMubWluaVNwbGl0RWwuYWRkQ2xhc3NPbk92ZXIoIngtbGF5b3V0LW1pbmktb3ZlciIpO3RoaXMubWluaVNwbGl0RWwub24oImNsaWNrIix0aGlzLm9uQ29sbGFwc2VDbGljayx0aGlzLHtzdG9wRXZlbnQ6dHJ1ZX0pfXZhciBiPXRoaXMuc3BsaXRTZXR0aW5nc1tkXTt0aGlzLnNwbGl0PW5ldyBFeHQuU3BsaXRCYXIodGhpcy5zcGxpdEVsLmRvbSxjLmVsLGIub3JpZW50YXRpb24pO3RoaXMuc3BsaXQudGlja1NpemU9dGhpcy50aWNrU2l6ZTt0aGlzLnNwbGl0LnBsYWNlbWVudD1iLnBsYWNlbWVudDt0aGlzLnNwbGl0LmdldE1heGltdW1TaXplPXRoaXNbYi5tYXhGbl0uY3JlYXRlRGVsZWdhdGUodGhpcyk7dGhpcy5zcGxpdC5taW5TaXplPXRoaXMubWluU2l6ZXx8dGhpc1tiLm1pblByb3BdO3RoaXMuc3BsaXQub24oImJlZm9yZWFwcGx5Iix0aGlzLm9uU3BsaXRNb3ZlLHRoaXMpO3RoaXMuc3BsaXQudXNlU2hpbT10aGlzLnVzZVNoaW09PT10cnVlO3RoaXMubWF4U2l6ZT10aGlzLm1heFNpemV8fHRoaXNbYi5tYXhQcm9wXTtpZihjLmhpZGRlbil7dGhpcy5zcGxpdEVsLmhpZGUoKX1pZih0aGlzLnVzZVNwbGl0VGlwcyl7dGhpcy5zcGxpdEVsLmRvbS50aXRsZT10aGlzLmNvbGxhcHNpYmxlP3RoaXMuY29sbGFwc2libGVTcGxpdFRpcDp0aGlzLnNwbGl0VGlwfWlmKHRoaXMuY29sbGFwc2libGUpe3RoaXMuc3BsaXRFbC5vbigiZGJsY2xpY2siLHRoaXMub25Db2xsYXBzZUNsaWNrLHRoaXMpfX0sZ2V0U2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMuaXNDb2xsYXBzZWQpe3JldHVybiB0aGlzLmNvbGxhcHNlZEVsLmdldFNpemUoKX12YXIgYT10aGlzLnBhbmVsLmdldFNpemUoKTtpZih0aGlzLnBvc2l0aW9uPT0ibm9ydGgifHx0aGlzLnBvc2l0aW9uPT0ic291dGgiKXthLmhlaWdodCs9dGhpcy5zcGxpdEVsLmRvbS5vZmZzZXRIZWlnaHR9ZWxzZXthLndpZHRoKz10aGlzLnNwbGl0RWwuZG9tLm9mZnNldFdpZHRofXJldHVybiBhfSxnZXRITWF4U2l6ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMubWF4U2l6ZXx8MTAwMDA7dmFyIGE9dGhpcy5sYXlvdXQuY2VudGVyO3JldHVybiBNYXRoLm1pbihiLCh0aGlzLmVsLmdldFdpZHRoKCkrYS5lbC5nZXRXaWR0aCgpKS1hLmdldE1pbldpZHRoKCkpfSxnZXRWTWF4U2l6ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMubWF4U2l6ZXx8MTAwMDA7dmFyIGE9dGhpcy5sYXlvdXQuY2VudGVyO3JldHVybiBNYXRoLm1pbihiLCh0aGlzLmVsLmdldEhlaWdodCgpK2EuZWwuZ2V0SGVpZ2h0KCkpLWEuZ2V0TWluSGVpZ2h0KCkpfSxvblNwbGl0TW92ZTpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXMucGFuZWwuZ2V0U2l6ZSgpO3RoaXMubGFzdFNwbGl0U2l6ZT1hO2lmKHRoaXMucG9zaXRpb249PSJub3J0aCJ8fHRoaXMucG9zaXRpb249PSJzb3V0aCIpe3RoaXMucGFuZWwuc2V0U2l6ZShjLndpZHRoLGEpO3RoaXMuc3RhdGUuaGVpZ2h0PWF9ZWxzZXt0aGlzLnBhbmVsLnNldFNpemUoYSxjLmhlaWdodCk7dGhpcy5zdGF0ZS53aWR0aD1hfXRoaXMubGF5b3V0LmxheW91dCgpO3RoaXMucGFuZWwuc2F2ZVN0YXRlKCk7cmV0dXJuIGZhbHNlfSxnZXRTcGxpdEJhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNwbGl0fSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5taW5pU3BsaXRFbCx0aGlzLnNwbGl0LHRoaXMuc3BsaXRFbCk7RXh0LmxheW91dC5Cb3JkZXJMYXlvdXQuU3BsaXRSZWdpb24uc3VwZXJjbGFzcy5kZXN0cm95LmNhbGwodGhpcyl9fSk7RXh0LkNvbnRhaW5lci5MQVlPVVRTLmJvcmRlcj1FeHQubGF5b3V0LkJvcmRlckxheW91dDtFeHQubGF5b3V0LkZvcm1MYXlvdXQ9RXh0LmV4dGVuZChFeHQubGF5b3V0LkFuY2hvckxheW91dCx7bGFiZWxTZXBhcmF0b3I6IjoiLHRyYWNrTGFiZWxzOnRydWUsdHlwZToiZm9ybSIsb25SZW1vdmU6ZnVuY3Rpb24oZCl7RXh0LmxheW91dC5Gb3JtTGF5b3V0LnN1cGVyY2xhc3Mub25SZW1vdmUuY2FsbCh0aGlzLGQpO2lmKHRoaXMudHJhY2tMYWJlbHMpe2QudW4oInNob3ciLHRoaXMub25GaWVsZFNob3csdGhpcyk7ZC51bigiaGlkZSIsdGhpcy5vbkZpZWxkSGlkZSx0aGlzKX12YXIgYj1kLmdldFBvc2l0aW9uRWwoKSxhPWQuZ2V0SXRlbUN0JiZkLmdldEl0ZW1DdCgpO2lmKGQucmVuZGVyZWQmJmEpe2lmKGImJmIuZG9tKXtiLmluc2VydEFmdGVyKGEpfUV4dC5kZXN0cm95KGEpO0V4dC5kZXN0cm95TWVtYmVycyhkLCJsYWJlbCIsIml0ZW1DdCIpO2lmKGQuY3VzdG9tSXRlbUN0KXtFeHQuZGVzdHJveU1lbWJlcnMoZCwiZ2V0SXRlbUN0IiwiY3VzdG9tSXRlbUN0Iil9fX0sc2V0Q29udGFpbmVyOmZ1bmN0aW9uKGEpe0V4dC5sYXlvdXQuRm9ybUxheW91dC5zdXBlcmNsYXNzLnNldENvbnRhaW5lci5jYWxsKHRoaXMsYSk7aWYoYS5sYWJlbEFsaWduKXthLmFkZENsYXNzKCJ4LWZvcm0tbGFiZWwtIithLmxhYmVsQWxpZ24pfWlmKGEuaGlkZUxhYmVscyl7RXh0LmFwcGx5KHRoaXMse2xhYmVsU3R5bGU6ImRpc3BsYXk6bm9uZSIsZWxlbWVudFN0eWxlOiJwYWRkaW5nLWxlZnQ6MDsiLGxhYmVsQWRqdXN0OjB9KX1lbHNle3RoaXMubGFiZWxTZXBhcmF0b3I9RXh0LmlzRGVmaW5lZChhLmxhYmVsU2VwYXJhdG9yKT9hLmxhYmVsU2VwYXJhdG9yOnRoaXMubGFiZWxTZXBhcmF0b3I7YS5sYWJlbFdpZHRoPWEubGFiZWxXaWR0aHx8MTAwO2lmKEV4dC5pc051bWJlcihhLmxhYmVsV2lkdGgpKXt2YXIgYj1FeHQuaXNOdW1iZXIoYS5sYWJlbFBhZCk/YS5sYWJlbFBhZDo1O0V4dC5hcHBseSh0aGlzLHtsYWJlbEFkanVzdDphLmxhYmVsV2lkdGgrYixsYWJlbFN0eWxlOiJ3aWR0aDoiK2EubGFiZWxXaWR0aCsicHg7IixlbGVtZW50U3R5bGU6InBhZGRpbmctbGVmdDoiKyhhLmxhYmVsV2lkdGgrYikrInB4In0pfWlmKGEubGFiZWxBbGlnbj09InRvcCIpe0V4dC5hcHBseSh0aGlzLHtsYWJlbFN0eWxlOiJ3aWR0aDphdXRvOyIsbGFiZWxBZGp1c3Q6MCxlbGVtZW50U3R5bGU6InBhZGRpbmctbGVmdDowOyJ9KX19fSxpc0hpZGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGlkZUxhYmVsfHx0aGlzLmNvbnRhaW5lci5oaWRlTGFiZWxzfSxvbkZpZWxkU2hvdzpmdW5jdGlvbihhKXthLmdldEl0ZW1DdCgpLnJlbW92ZUNsYXNzKCJ4LWhpZGUtIithLmhpZGVNb2RlKTtpZihhLmlzQ29tcG9zaXRlKXthLmRvTGF5b3V0KCl9fSxvbkZpZWxkSGlkZTpmdW5jdGlvbihhKXthLmdldEl0ZW1DdCgpLmFkZENsYXNzKCJ4LWhpZGUtIithLmhpZGVNb2RlKX0sZ2V0TGFiZWxTdHlsZTpmdW5jdGlvbihlKXt2YXIgYj0iIixjPVt0aGlzLmxhYmVsU3R5bGUsZV07Zm9yKHZhciBkPTAsYT1jLmxlbmd0aDtkPGE7KytkKXtpZihjW2RdKXtiKz1jW2RdO2lmKGIuc3Vic3RyKC0xLDEpIT0iOyIpe2IrPSI7In19fXJldHVybiBifSxyZW5kZXJJdGVtOmZ1bmN0aW9uKGUsYSxkKXtpZihlJiYoZS5pc0Zvcm1GaWVsZHx8ZS5maWVsZExhYmVsKSYmZS5pbnB1dFR5cGUhPSJoaWRkZW4iKXt2YXIgYj10aGlzLmdldFRlbXBsYXRlQXJncyhlKTtpZihFeHQuaXNOdW1iZXIoYSkpe2E9ZC5kb20uY2hpbGROb2Rlc1thXXx8bnVsbH1pZihhKXtlLml0ZW1DdD10aGlzLmZpZWxkVHBsLmluc2VydEJlZm9yZShhLGIsdHJ1ZSl9ZWxzZXtlLml0ZW1DdD10aGlzLmZpZWxkVHBsLmFwcGVuZChkLGIsdHJ1ZSl9aWYoIWUuZ2V0SXRlbUN0KXtFeHQuYXBwbHkoZSx7Z2V0SXRlbUN0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuaXRlbUN0fSxjdXN0b21JdGVtQ3Q6dHJ1ZX0pfWUubGFiZWw9ZS5nZXRJdGVtQ3QoKS5jaGlsZCgibGFiZWwueC1mb3JtLWl0ZW0tbGFiZWwiKTtpZighZS5yZW5kZXJlZCl7ZS5yZW5kZXIoIngtZm9ybS1lbC0iK2UuaWQpfWVsc2V7aWYoIXRoaXMuaXNWYWxpZFBhcmVudChlLGQpKXtFeHQuZmx5KCJ4LWZvcm0tZWwtIitlLmlkKS5hcHBlbmRDaGlsZChlLmdldFBvc2l0aW9uRWwoKSl9fWlmKHRoaXMudHJhY2tMYWJlbHMpe2lmKGUuaGlkZGVuKXt0aGlzLm9uRmllbGRIaWRlKGUpfWUub24oe3Njb3BlOnRoaXMsc2hvdzp0aGlzLm9uRmllbGRTaG93LGhpZGU6dGhpcy5vbkZpZWxkSGlkZX0pfXRoaXMuY29uZmlndXJlSXRlbShlKX1lbHNle0V4dC5sYXlvdXQuRm9ybUxheW91dC5zdXBlcmNsYXNzLnJlbmRlckl0ZW0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sZ2V0VGVtcGxhdGVBcmdzOmZ1bmN0aW9uKGMpe3ZhciBhPSFjLmZpZWxkTGFiZWx8fGMuaGlkZUxhYmVsLGI9KGMuaXRlbUNsc3x8dGhpcy5jb250YWluZXIuaXRlbUNsc3x8IiIpKyhjLmhpZGVMYWJlbD8iIHgtaGlkZS1sYWJlbCI6IiIpO2lmKEV4dC5pc0lFOSYmRXh0LmlzSUVRdWlya3MmJmMgaW5zdGFuY2VvZiBFeHQuZm9ybS5UZXh0RmllbGQpe2IrPSIgeC1pbnB1dC13cmFwcGVyIn1yZXR1cm57aWQ6Yy5pZCxsYWJlbDpjLmZpZWxkTGFiZWwsaXRlbUNsczpiLGNsZWFyQ2xzOmMuY2xlYXJDbHN8fCJ4LWZvcm0tY2xlYXItbGVmdCIsbGFiZWxTdHlsZTp0aGlzLmdldExhYmVsU3R5bGUoYy5sYWJlbFN0eWxlKSxlbGVtZW50U3R5bGU6dGhpcy5lbGVtZW50U3R5bGV8fCIiLGxhYmVsU2VwYXJhdG9yOmE/IiI6KEV4dC5pc0RlZmluZWQoYy5sYWJlbFNlcGFyYXRvcik/Yy5sYWJlbFNlcGFyYXRvcjp0aGlzLmxhYmVsU2VwYXJhdG9yKX19LGFkanVzdFdpZHRoQW5jaG9yOmZ1bmN0aW9uKGEsZCl7aWYoZC5sYWJlbCYmIXRoaXMuaXNIaWRlKGQpJiYodGhpcy5jb250YWluZXIubGFiZWxBbGlnbiE9InRvcCIpKXt2YXIgYj1FeHQuaXNJRTZ8fChFeHQuaXNJRSYmIUV4dC5pc1N0cmljdCk7cmV0dXJuIGEtdGhpcy5sYWJlbEFkanVzdCsoYj8tMzowKX1yZXR1cm4gYX0sYWRqdXN0SGVpZ2h0QW5jaG9yOmZ1bmN0aW9uKGEsYil7aWYoYi5sYWJlbCYmIXRoaXMuaXNIaWRlKGIpJiYodGhpcy5jb250YWluZXIubGFiZWxBbGlnbj09InRvcCIpKXtyZXR1cm4gYS1iLmxhYmVsLmdldEhlaWdodCgpfXJldHVybiBhfSxpc1ZhbGlkUGFyZW50OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGEmJnRoaXMuY29udGFpbmVyLmdldEVsKCkuY29udGFpbnMoYi5nZXRQb3NpdGlvbkVsKCkpfX0pO0V4dC5Db250YWluZXIuTEFZT1VUUy5mb3JtPUV4dC5sYXlvdXQuRm9ybUxheW91dDtFeHQubGF5b3V0LkFjY29yZGlvbkxheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuRml0TGF5b3V0LHtmaWxsOnRydWUsYXV0b1dpZHRoOnRydWUsdGl0bGVDb2xsYXBzZTp0cnVlLGhpZGVDb2xsYXBzZVRvb2w6ZmFsc2UsY29sbGFwc2VGaXJzdDpmYWxzZSxhbmltYXRlOmZhbHNlLHNlcXVlbmNlOmZhbHNlLGFjdGl2ZU9uVG9wOmZhbHNlLHR5cGU6ImFjY29yZGlvbiIscmVuZGVySXRlbTpmdW5jdGlvbihhKXtpZih0aGlzLmFuaW1hdGU9PT1mYWxzZSl7YS5hbmltQ29sbGFwc2U9ZmFsc2V9YS5jb2xsYXBzaWJsZT10cnVlO2lmKHRoaXMuYXV0b1dpZHRoKXthLmF1dG9XaWR0aD10cnVlfWlmKHRoaXMudGl0bGVDb2xsYXBzZSl7YS50aXRsZUNvbGxhcHNlPXRydWV9aWYodGhpcy5oaWRlQ29sbGFwc2VUb29sKXthLmhpZGVDb2xsYXBzZVRvb2w9dHJ1ZX1pZih0aGlzLmNvbGxhcHNlRmlyc3QhPT11bmRlZmluZWQpe2EuY29sbGFwc2VGaXJzdD10aGlzLmNvbGxhcHNlRmlyc3R9aWYoIXRoaXMuYWN0aXZlSXRlbSYmIWEuY29sbGFwc2VkKXt0aGlzLnNldEFjdGl2ZUl0ZW0oYSx0cnVlKX1lbHNle2lmKHRoaXMuYWN0aXZlSXRlbSYmdGhpcy5hY3RpdmVJdGVtIT1hKXthLmNvbGxhcHNlZD10cnVlfX1FeHQubGF5b3V0LkFjY29yZGlvbkxheW91dC5zdXBlcmNsYXNzLnJlbmRlckl0ZW0uYXBwbHkodGhpcyxhcmd1bWVudHMpO2EuaGVhZGVyLmFkZENsYXNzKCJ4LWFjY29yZGlvbi1oZCIpO2Eub24oImJlZm9yZWV4cGFuZCIsdGhpcy5iZWZvcmVFeHBhbmQsdGhpcyl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGEpe0V4dC5sYXlvdXQuQWNjb3JkaW9uTGF5b3V0LnN1cGVyY2xhc3Mub25SZW1vdmUuY2FsbCh0aGlzLGEpO2lmKGEucmVuZGVyZWQpe2EuaGVhZGVyLnJlbW92ZUNsYXNzKCJ4LWFjY29yZGlvbi1oZCIpfWEudW4oImJlZm9yZWV4cGFuZCIsdGhpcy5iZWZvcmVFeHBhbmQsdGhpcyl9LGJlZm9yZUV4cGFuZDpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXMuYWN0aXZlSXRlbTtpZihhKXtpZih0aGlzLnNlcXVlbmNlKXtkZWxldGUgdGhpcy5hY3RpdmVJdGVtO2lmKCFhLmNvbGxhcHNlZCl7YS5jb2xsYXBzZSh7Y2FsbGJhY2s6ZnVuY3Rpb24oKXtjLmV4cGFuZChifHx0cnVlKX0sc2NvcGU6dGhpc30pO3JldHVybiBmYWxzZX19ZWxzZXthLmNvbGxhcHNlKHRoaXMuYW5pbWF0ZSl9fXRoaXMuc2V0QWN0aXZlKGMpO2lmKHRoaXMuYWN0aXZlT25Ub3Ape2MuZWwuZG9tLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGMuZWwuZG9tLGMuZWwuZG9tLnBhcmVudE5vZGUuZmlyc3RDaGlsZCl9dGhpcy5sYXlvdXQoKX0sc2V0SXRlbVNpemU6ZnVuY3Rpb24oZyxlKXtpZih0aGlzLmZpbGwmJmcpe3ZhciBkPTAsYyxiPXRoaXMuZ2V0UmVuZGVyZWRJdGVtcyh0aGlzLmNvbnRhaW5lciksYT1iLmxlbmd0aCxoO2ZvcihjPTA7YzxhO2MrKyl7aWYoKGg9YltjXSkhPWcmJiFoLmhpZGRlbil7ZCs9aC5oZWFkZXIuZ2V0SGVpZ2h0KCl9fWUuaGVpZ2h0LT1kO2cuc2V0U2l6ZShlKX19LHNldEFjdGl2ZUl0ZW06ZnVuY3Rpb24oYSl7dGhpcy5zZXRBY3RpdmUoYSx0cnVlKX0sc2V0QWN0aXZlOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcy5hY3RpdmVJdGVtO2M9dGhpcy5jb250YWluZXIuZ2V0Q29tcG9uZW50KGMpO2lmKGEhPWMpe2lmKGMucmVuZGVyZWQmJmMuY29sbGFwc2VkJiZiKXtjLmV4cGFuZCgpfWVsc2V7aWYoYSl7YS5maXJlRXZlbnQoImRlYWN0aXZhdGUiLGEpfXRoaXMuYWN0aXZlSXRlbT1jO2MuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsYyl9fX19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFMuYWNjb3JkaW9uPUV4dC5sYXlvdXQuQWNjb3JkaW9uTGF5b3V0O0V4dC5sYXlvdXQuQWNjb3JkaW9uPUV4dC5sYXlvdXQuQWNjb3JkaW9uTGF5b3V0O0V4dC5sYXlvdXQuVGFibGVMYXlvdXQ9RXh0LmV4dGVuZChFeHQubGF5b3V0LkNvbnRhaW5lckxheW91dCx7bW9uaXRvclJlc2l6ZTpmYWxzZSx0eXBlOiJ0YWJsZSIsdGFyZ2V0Q2xzOiJ4LXRhYmxlLWxheW91dC1jdCIsdGFibGVBdHRyczpudWxsLHNldENvbnRhaW5lcjpmdW5jdGlvbihhKXtFeHQubGF5b3V0LlRhYmxlTGF5b3V0LnN1cGVyY2xhc3Muc2V0Q29udGFpbmVyLmNhbGwodGhpcyxhKTt0aGlzLmN1cnJlbnRSb3c9MDt0aGlzLmN1cnJlbnRDb2x1bW49MDt0aGlzLmNlbGxzPVtdfSxvbkxheW91dDpmdW5jdGlvbihkLGcpe3ZhciBlPWQuaXRlbXMuaXRlbXMsYT1lLmxlbmd0aCxoLGI7aWYoIXRoaXMudGFibGUpe2cuYWRkQ2xhc3MoIngtdGFibGUtbGF5b3V0LWN0Iik7dGhpcy50YWJsZT1nLmNyZWF0ZUNoaWxkKEV4dC5hcHBseSh7dGFnOiJ0YWJsZSIsY2xzOiJ4LXRhYmxlLWxheW91dCIsY2VsbHNwYWNpbmc6MCxjbjp7dGFnOiJ0Ym9keSJ9fSx0aGlzLnRhYmxlQXR0cnMpLG51bGwsdHJ1ZSl9dGhpcy5yZW5kZXJBbGwoZCxnKX0sZ2V0Um93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudGFibGUudEJvZGllc1swXS5jaGlsZE5vZGVzW2FdO2lmKCFiKXtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRyIik7dGhpcy50YWJsZS50Qm9kaWVzWzBdLmFwcGVuZENoaWxkKGIpfXJldHVybiBifSxnZXROZXh0Q2VsbDpmdW5jdGlvbihqKXt2YXIgYT10aGlzLmdldE5leHROb25TcGFuKHRoaXMuY3VycmVudENvbHVtbix0aGlzLmN1cnJlbnRSb3cpO3ZhciBnPXRoaXMuY3VycmVudENvbHVtbj1hWzBdLGU9dGhpcy5jdXJyZW50Um93PWFbMV07Zm9yKHZhciBpPWU7aTxlKyhqLnJvd3NwYW58fDEpO2krKyl7aWYoIXRoaXMuY2VsbHNbaV0pe3RoaXMuY2VsbHNbaV09W119Zm9yKHZhciBkPWc7ZDxnKyhqLmNvbHNwYW58fDEpO2QrKyl7dGhpcy5jZWxsc1tpXVtkXT10cnVlfX12YXIgaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZCIpO2lmKGouY2VsbElkKXtoLmlkPWouY2VsbElkfXZhciBiPSJ4LXRhYmxlLWxheW91dC1jZWxsIjtpZihqLmNlbGxDbHMpe2IrPSIgIitqLmNlbGxDbHN9aC5jbGFzc05hbWU9YjtpZihqLmNvbHNwYW4pe2guY29sU3Bhbj1qLmNvbHNwYW59aWYoai5yb3dzcGFuKXtoLnJvd1NwYW49ai5yb3dzcGFufXRoaXMuZ2V0Um93KGUpLmFwcGVuZENoaWxkKGgpO3JldHVybiBofSxnZXROZXh0Tm9uU3BhbjpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuY29sdW1uczt3aGlsZSgoYiYmYT49Yil8fCh0aGlzLmNlbGxzW2NdJiZ0aGlzLmNlbGxzW2NdW2FdKSl7aWYoYiYmYT49Yil7YysrO2E9MH1lbHNle2ErK319cmV0dXJuW2EsY119LHJlbmRlckl0ZW06ZnVuY3Rpb24oZSxhLGQpe2lmKCF0aGlzLnRhYmxlKXt0aGlzLnRhYmxlPWQuY3JlYXRlQ2hpbGQoRXh0LmFwcGx5KHt0YWc6InRhYmxlIixjbHM6IngtdGFibGUtbGF5b3V0IixjZWxsc3BhY2luZzowLGNuOnt0YWc6InRib2R5In19LHRoaXMudGFibGVBdHRycyksbnVsbCx0cnVlKX1pZihlJiYhZS5yZW5kZXJlZCl7ZS5yZW5kZXIodGhpcy5nZXROZXh0Q2VsbChlKSk7dGhpcy5jb25maWd1cmVJdGVtKGUpfWVsc2V7aWYoZSYmIXRoaXMuaXNWYWxpZFBhcmVudChlLGQpKXt2YXIgYj10aGlzLmdldE5leHRDZWxsKGUpO2IuaW5zZXJ0QmVmb3JlKGUuZ2V0UG9zaXRpb25FbCgpLmRvbSxudWxsKTtlLmNvbnRhaW5lcj1FeHQuZ2V0KGIpO3RoaXMuY29uZmlndXJlSXRlbShlKX19fSxpc1ZhbGlkUGFyZW50OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIGIuZ2V0UG9zaXRpb25FbCgpLnVwKCJ0YWJsZSIsNSkuZG9tLnBhcmVudE5vZGU9PT0oYS5kb218fGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMudGFibGU7RXh0LmxheW91dC5UYWJsZUxheW91dC5zdXBlcmNsYXNzLmRlc3Ryb3kuY2FsbCh0aGlzKX19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFMudGFibGU9RXh0LmxheW91dC5UYWJsZUxheW91dDtFeHQubGF5b3V0LkFic29sdXRlTGF5b3V0PUV4dC5leHRlbmQoRXh0LmxheW91dC5BbmNob3JMYXlvdXQse2V4dHJhQ2xzOiJ4LWFicy1sYXlvdXQtaXRlbSIsdHlwZToiYWJzb2x1dGUiLG9uTGF5b3V0OmZ1bmN0aW9uKGEsYil7Yi5wb3NpdGlvbigpO3RoaXMucGFkZGluZ0xlZnQ9Yi5nZXRQYWRkaW5nKCJsIik7dGhpcy5wYWRkaW5nVG9wPWIuZ2V0UGFkZGluZygidCIpO0V4dC5sYXlvdXQuQWJzb2x1dGVMYXlvdXQuc3VwZXJjbGFzcy5vbkxheW91dC5jYWxsKHRoaXMsYSxiKX0sYWRqdXN0V2lkdGhBbmNob3I6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYj9iLWEuZ2V0UG9zaXRpb24odHJ1ZSlbMF0rdGhpcy5wYWRkaW5nTGVmdDpifSxhZGp1c3RIZWlnaHRBbmNob3I6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYj9iLWEuZ2V0UG9zaXRpb24odHJ1ZSlbMV0rdGhpcy5wYWRkaW5nVG9wOmJ9fSk7RXh0LkNvbnRhaW5lci5MQVlPVVRTLmFic29sdXRlPUV4dC5sYXlvdXQuQWJzb2x1dGVMYXlvdXQ7RXh0LmxheW91dC5Cb3hMYXlvdXQ9RXh0LmV4dGVuZChFeHQubGF5b3V0LkNvbnRhaW5lckxheW91dCx7ZGVmYXVsdE1hcmdpbnM6e2xlZnQ6MCx0b3A6MCxyaWdodDowLGJvdHRvbTowfSxwYWRkaW5nOiIwIixwYWNrOiJzdGFydCIsbW9uaXRvclJlc2l6ZTp0cnVlLHR5cGU6ImJveCIsc2Nyb2xsT2Zmc2V0OjAsZXh0cmFDbHM6IngtYm94LWl0ZW0iLHRhcmdldENsczoieC1ib3gtbGF5b3V0LWN0Iixpbm5lckNsczoieC1ib3gtaW5uZXIiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5sYXlvdXQuQm94TGF5b3V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO2lmKEV4dC5pc1N0cmluZyh0aGlzLmRlZmF1bHRNYXJnaW5zKSl7dGhpcy5kZWZhdWx0TWFyZ2lucz10aGlzLnBhcnNlTWFyZ2lucyh0aGlzLmRlZmF1bHRNYXJnaW5zKX12YXIgZD10aGlzLm92ZXJmbG93SGFuZGxlcjtpZih0eXBlb2YgZD09InN0cmluZyIpe2Q9e3R5cGU6ZH19dmFyIGM9Im5vbmUiO2lmKGQmJmQudHlwZSE9dW5kZWZpbmVkKXtjPWQudHlwZX12YXIgYj1FeHQubGF5b3V0LmJveE92ZXJmbG93W2NdO2lmKGJbdGhpcy50eXBlXSl7Yj1iW3RoaXMudHlwZV19dGhpcy5vdmVyZmxvd0hhbmRsZXI9bmV3IGIodGhpcyxkKX0sb25MYXlvdXQ6ZnVuY3Rpb24oYixoKXtFeHQubGF5b3V0LkJveExheW91dC5zdXBlcmNsYXNzLm9uTGF5b3V0LmNhbGwodGhpcyxiLGgpO3ZhciBkPXRoaXMuZ2V0TGF5b3V0VGFyZ2V0U2l6ZSgpLGk9dGhpcy5nZXRWaXNpYmxlSXRlbXMoYiksYz10aGlzLmNhbGN1bGF0ZUNoaWxkQm94ZXMoaSxkKSxnPWMuYm94ZXMsaj1jLm1ldGE7aWYoZC53aWR0aD4wKXt2YXIgaz10aGlzLm92ZXJmbG93SGFuZGxlcixhPWoudG9vTmFycm93PyJoYW5kbGVPdmVyZmxvdyI6ImNsZWFyT3ZlcmZsb3ciO3ZhciBlPWtbYV0oYyxkKTtpZihlKXtpZihlLnRhcmdldFNpemUpe2Q9ZS50YXJnZXRTaXplfWlmKGUucmVjYWxjdWxhdGUpe2k9dGhpcy5nZXRWaXNpYmxlSXRlbXMoYik7Yz10aGlzLmNhbGN1bGF0ZUNoaWxkQm94ZXMoaSxkKTtnPWMuYm94ZXN9fX10aGlzLmxheW91dFRhcmdldExhc3RTaXplPWQ7dGhpcy5jaGlsZEJveENhY2hlPWM7dGhpcy51cGRhdGVJbm5lckN0U2l6ZShkLGMpO3RoaXMudXBkYXRlQ2hpbGRCb3hlcyhnKTt0aGlzLmhhbmRsZVRhcmdldE92ZXJmbG93KGQsYixoKX0sdXBkYXRlQ2hpbGRCb3hlczpmdW5jdGlvbihjKXtmb3IodmFyIGI9MCxlPWMubGVuZ3RoO2I8ZTtiKyspe3ZhciBkPWNbYl0sYT1kLmNvbXBvbmVudDtpZihkLmRpcnR5U2l6ZSl7YS5zZXRTaXplKGQud2lkdGgsZC5oZWlnaHQpfWlmKGlzTmFOKGQubGVmdCl8fGlzTmFOKGQudG9wKSl7Y29udGludWV9YS5zZXRQb3NpdGlvbihkLmxlZnQsZC50b3ApfX0sdXBkYXRlSW5uZXJDdFNpemU6ZnVuY3Rpb24oYyxoKXt2YXIgaT10aGlzLmFsaWduLGc9dGhpcy5wYWRkaW5nLGU9Yy53aWR0aCxhPWMuaGVpZ2h0O2lmKHRoaXMudHlwZT09Imhib3giKXt2YXIgYj1lLGQ9aC5tZXRhLm1heEhlaWdodCtnLnRvcCtnLmJvdHRvbTtpZihpPT0ic3RyZXRjaCIpe2Q9YX1lbHNle2lmKGk9PSJtaWRkbGUiKXtkPU1hdGgubWF4KGEsZCl9fX1lbHNle3ZhciBkPWEsYj1oLm1ldGEubWF4V2lkdGgrZy5sZWZ0K2cucmlnaHQ7aWYoaT09InN0cmV0Y2giKXtiPWV9ZWxzZXtpZihpPT0iY2VudGVyIil7Yj1NYXRoLm1heChlLGIpfX19dGhpcy5pbm5lckN0LnNldFNpemUoYnx8dW5kZWZpbmVkLGR8fHVuZGVmaW5lZCl9LGhhbmRsZVRhcmdldE92ZXJmbG93OmZ1bmN0aW9uKGQsYSxjKXt2YXIgZT1jLmdldFN0eWxlKCJvdmVyZmxvdyIpO2lmKGUmJmUhPSJoaWRkZW4iJiYhdGhpcy5hZGp1c3RtZW50UGFzcyl7dmFyIGI9dGhpcy5nZXRMYXlvdXRUYXJnZXRTaXplKCk7aWYoYi53aWR0aCE9ZC53aWR0aHx8Yi5oZWlnaHQhPWQuaGVpZ2h0KXt0aGlzLmFkanVzdG1lbnRQYXNzPXRydWU7dGhpcy5vbkxheW91dChhLGMpfX1kZWxldGUgdGhpcy5hZGp1c3RtZW50UGFzc30saXNWYWxpZFBhcmVudDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLmlubmVyQ3QmJmIuZ2V0UG9zaXRpb25FbCgpLmRvbS5wYXJlbnROb2RlPT10aGlzLmlubmVyQ3QuZG9tfSxnZXRWaXNpYmxlSXRlbXM6ZnVuY3Rpb24oZyl7dmFyIGc9Z3x8dGhpcy5jb250YWluZXIsZT1nLmdldExheW91dFRhcmdldCgpLGg9Zy5pdGVtcy5pdGVtcyxhPWgubGVuZ3RoLGQsaixiPVtdO2ZvcihkPTA7ZDxhO2QrKyl7aWYoKGo9aFtkXSkucmVuZGVyZWQmJnRoaXMuaXNWYWxpZFBhcmVudChqLGUpJiZqLmhpZGRlbiE9PXRydWUmJmouY29sbGFwc2VkIT09dHJ1ZSYmai5zaG91bGRMYXlvdXQhPT1mYWxzZSl7Yi5wdXNoKGopfX1yZXR1cm4gYn0scmVuZGVyQWxsOmZ1bmN0aW9uKGEsYil7aWYoIXRoaXMuaW5uZXJDdCl7dGhpcy5pbm5lckN0PWIuY3JlYXRlQ2hpbGQoe2Nsczp0aGlzLmlubmVyQ2xzfSk7dGhpcy5wYWRkaW5nPXRoaXMucGFyc2VNYXJnaW5zKHRoaXMucGFkZGluZyl9RXh0LmxheW91dC5Cb3hMYXlvdXQuc3VwZXJjbGFzcy5yZW5kZXJBbGwuY2FsbCh0aGlzLGEsdGhpcy5pbm5lckN0KX0sZ2V0TGF5b3V0VGFyZ2V0U2l6ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuY29udGFpbmVyLmdldExheW91dFRhcmdldCgpLGE7aWYoYil7YT1iLmdldFZpZXdTaXplKCk7aWYoRXh0LmlzSUUmJkV4dC5pc1N0cmljdCYmYS53aWR0aD09MCl7YT1iLmdldFN0eWxlU2l6ZSgpfWEud2lkdGgtPWIuZ2V0UGFkZGluZygibHIiKTthLmhlaWdodC09Yi5nZXRQYWRkaW5nKCJ0YiIpfXJldHVybiBhfSxyZW5kZXJJdGVtOmZ1bmN0aW9uKGEpe2lmKEV4dC5pc1N0cmluZyhhLm1hcmdpbnMpKXthLm1hcmdpbnM9dGhpcy5wYXJzZU1hcmdpbnMoYS5tYXJnaW5zKX1lbHNle2lmKCFhLm1hcmdpbnMpe2EubWFyZ2lucz10aGlzLmRlZmF1bHRNYXJnaW5zfX1FeHQubGF5b3V0LkJveExheW91dC5zdXBlcmNsYXNzLnJlbmRlckl0ZW0uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5vdmVyZmxvd0hhbmRsZXIpO0V4dC5sYXlvdXQuQm94TGF5b3V0LnN1cGVyY2xhc3MuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5Ob25lPUV4dC5leHRlbmQoT2JqZWN0LHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGEpe3RoaXMubGF5b3V0PWI7RXh0LmFwcGx5KHRoaXMsYXx8e30pfSxoYW5kbGVPdmVyZmxvdzpFeHQuZW1wdHlGbixjbGVhck92ZXJmbG93OkV4dC5lbXB0eUZufSk7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5ub25lPUV4dC5sYXlvdXQuYm94T3ZlcmZsb3cuTm9uZTtFeHQubGF5b3V0LmJveE92ZXJmbG93Lk1lbnU9RXh0LmV4dGVuZChFeHQubGF5b3V0LmJveE92ZXJmbG93Lk5vbmUse2FmdGVyQ2xzOiJ4LXN0cmlwLXJpZ2h0Iixub0l0ZW1zTWVudVRleHQ6JzxkaXYgY2xhc3M9IngtdG9vbGJhci1uby1pdGVtcyI+KE5vbmUpPC9kaXY+Jyxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQubGF5b3V0LmJveE92ZXJmbG93Lk1lbnUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5tZW51SXRlbXM9W119LGNyZWF0ZUlubmVyRWxlbWVudHM6ZnVuY3Rpb24oKXtpZighdGhpcy5hZnRlckN0KXt0aGlzLmFmdGVyQ3Q9dGhpcy5sYXlvdXQuaW5uZXJDdC5pbnNlcnRTaWJsaW5nKHtjbHM6dGhpcy5hZnRlckNsc30sImJlZm9yZSIpfX0sY2xlYXJPdmVyZmxvdzpmdW5jdGlvbihhLGcpe3ZhciBlPWcud2lkdGgrKHRoaXMuYWZ0ZXJDdD90aGlzLmFmdGVyQ3QuZ2V0V2lkdGgoKTowKSxiPXRoaXMubWVudUl0ZW1zO3RoaXMuaGlkZVRyaWdnZXIoKTtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDtjKyspe2IucG9wKCkuY29tcG9uZW50LnNob3coKX1yZXR1cm57dGFyZ2V0U2l6ZTp7aGVpZ2h0OmcuaGVpZ2h0LHdpZHRoOmV9fX0sc2hvd1RyaWdnZXI6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZU1lbnUoKTt0aGlzLm1lbnVUcmlnZ2VyLnNob3coKX0saGlkZVRyaWdnZXI6ZnVuY3Rpb24oKXtpZih0aGlzLm1lbnVUcmlnZ2VyIT11bmRlZmluZWQpe3RoaXMubWVudVRyaWdnZXIuaGlkZSgpfX0sYmVmb3JlTWVudVNob3c6ZnVuY3Rpb24oaCl7dmFyIGI9dGhpcy5tZW51SXRlbXMsYT1iLmxlbmd0aCxnLGU7dmFyIGM9ZnVuY3Rpb24oaixpKXtyZXR1cm4gai5pc1hUeXBlKCJidXR0b25ncm91cCIpJiYhKGkgaW5zdGFuY2VvZiBFeHQuVG9vbGJhci5TZXBhcmF0b3IpfTt0aGlzLmNsZWFyTWVudSgpO2gucmVtb3ZlQWxsKCk7Zm9yKHZhciBkPTA7ZDxhO2QrKyl7Zz1iW2RdLmNvbXBvbmVudDtpZihlJiYoYyhnLGUpfHxjKGUsZykpKXtoLmFkZCgiLSIpfXRoaXMuYWRkQ29tcG9uZW50VG9NZW51KGgsZyk7ZT1nfWlmKGguaXRlbXMubGVuZ3RoPDEpe2guYWRkKHRoaXMubm9JdGVtc01lbnVUZXh0KX19LGNyZWF0ZU1lbnVDb25maWc6ZnVuY3Rpb24oYyxhKXt2YXIgYj1FeHQuYXBwbHkoe30sYy5pbml0aWFsQ29uZmlnKSxkPWMudG9nZ2xlR3JvdXA7RXh0LmNvcHlUbyhiLGMsWyJpY29uQ2xzIiwiaWNvbiIsIml0ZW1JZCIsImRpc2FibGVkIiwiaGFuZGxlciIsInNjb3BlIiwibWVudSJdKTtFeHQuYXBwbHkoYix7dGV4dDpjLm92ZXJmbG93VGV4dHx8Yy50ZXh0LGhpZGVPbkNsaWNrOmF9KTtpZihkfHxjLmVuYWJsZVRvZ2dsZSl7RXh0LmFwcGx5KGIse2dyb3VwOmQsY2hlY2tlZDpjLnByZXNzZWQsbGlzdGVuZXJzOntjaGVja2NoYW5nZTpmdW5jdGlvbihnLGUpe2MudG9nZ2xlKGUpfX19KX1kZWxldGUgYi5vd25lckN0O2RlbGV0ZSBiLnh0eXBlO2RlbGV0ZSBiLmlkO3JldHVybiBifSxhZGRDb21wb25lbnRUb01lbnU6ZnVuY3Rpb24oYixhKXtpZihhIGluc3RhbmNlb2YgRXh0LlRvb2xiYXIuU2VwYXJhdG9yKXtiLmFkZCgiLSIpfWVsc2V7aWYoRXh0LmlzRnVuY3Rpb24oYS5pc1hUeXBlKSl7aWYoYS5pc1hUeXBlKCJzcGxpdGJ1dHRvbiIpKXtiLmFkZCh0aGlzLmNyZWF0ZU1lbnVDb25maWcoYSx0cnVlKSl9ZWxzZXtpZihhLmlzWFR5cGUoImJ1dHRvbiIpKXtiLmFkZCh0aGlzLmNyZWF0ZU1lbnVDb25maWcoYSwhYS5tZW51KSl9ZWxzZXtpZihhLmlzWFR5cGUoImJ1dHRvbmdyb3VwIikpe2EuaXRlbXMuZWFjaChmdW5jdGlvbihjKXt0aGlzLmFkZENvbXBvbmVudFRvTWVudShiLGMpfSx0aGlzKX19fX19fSxjbGVhck1lbnU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1vcmVNZW51O2lmKGEmJmEuaXRlbXMpe2EuaXRlbXMuZWFjaChmdW5jdGlvbihiKXtkZWxldGUgYi5tZW51fSl9fSxjcmVhdGVNZW51OmZ1bmN0aW9uKCl7aWYoIXRoaXMubWVudVRyaWdnZXIpe3RoaXMuY3JlYXRlSW5uZXJFbGVtZW50cygpO3RoaXMubWVudT1uZXcgRXh0Lm1lbnUuTWVudSh7b3duZXJDdDp0aGlzLmxheW91dC5jb250YWluZXIsbGlzdGVuZXJzOntzY29wZTp0aGlzLGJlZm9yZXNob3c6dGhpcy5iZWZvcmVNZW51U2hvd319KTt0aGlzLm1lbnVUcmlnZ2VyPW5ldyBFeHQuQnV0dG9uKHtpY29uQ2xzOiJ4LXRvb2xiYXItbW9yZS1pY29uIixjbHM6IngtdG9vbGJhci1tb3JlIixtZW51OnRoaXMubWVudSxyZW5kZXJUbzp0aGlzLmFmdGVyQ3R9KX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLm1lbnUsdGhpcy5tZW51VHJpZ2dlcil9fSk7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5tZW51PUV4dC5sYXlvdXQuYm94T3ZlcmZsb3cuTWVudTtFeHQubGF5b3V0LmJveE92ZXJmbG93Lkhvcml6b250YWxNZW51PUV4dC5leHRlbmQoRXh0LmxheW91dC5ib3hPdmVyZmxvdy5NZW51LHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe0V4dC5sYXlvdXQuYm94T3ZlcmZsb3cuSG9yaXpvbnRhbE1lbnUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGM9dGhpcyxiPWMubGF5b3V0LGE9Yi5jYWxjdWxhdGVDaGlsZEJveGVzO2IuY2FsY3VsYXRlQ2hpbGRCb3hlcz1mdW5jdGlvbihkLGkpe3ZhciBsPWEuYXBwbHkoYixhcmd1bWVudHMpLGs9bC5tZXRhLGU9Yy5tZW51SXRlbXM7dmFyIGo9MDtmb3IodmFyIGc9MCxoPWUubGVuZ3RoO2c8aDtnKyspe2orPWVbZ10ud2lkdGh9ay5taW5pbXVtV2lkdGgrPWo7ay50b29OYXJyb3c9ay5taW5pbXVtV2lkdGg+aS53aWR0aDtyZXR1cm4gbH19LGhhbmRsZU92ZXJmbG93OmZ1bmN0aW9uKGQsaCl7dGhpcy5zaG93VHJpZ2dlcigpO3ZhciBrPWgud2lkdGgtdGhpcy5hZnRlckN0LmdldFdpZHRoKCksbD1kLmJveGVzLGU9MCxyPWZhbHNlO2Zvcih2YXIgbz0wLGM9bC5sZW5ndGg7bzxjO28rKyl7ZSs9bFtvXS53aWR0aH12YXIgYT1rLWUsZz0wO2Zvcih2YXIgbz0wLGM9dGhpcy5tZW51SXRlbXMubGVuZ3RoO288YztvKyspe3ZhciBuPXRoaXMubWVudUl0ZW1zW29dLG09bi5jb21wb25lbnQsYj1uLndpZHRoO2lmKGI8YSl7bS5zaG93KCk7YS09YjtnKys7cj10cnVlfWVsc2V7YnJlYWt9fWlmKHIpe3RoaXMubWVudUl0ZW1zPXRoaXMubWVudUl0ZW1zLnNsaWNlKGcpfWVsc2V7Zm9yKHZhciBqPWwubGVuZ3RoLTE7aj49MDtqLS0pe3ZhciBxPWxbal0uY29tcG9uZW50LHA9bFtqXS5sZWZ0K2xbal0ud2lkdGg7aWYocD49ayl7dGhpcy5tZW51SXRlbXMudW5zaGlmdCh7Y29tcG9uZW50OnEsd2lkdGg6bFtqXS53aWR0aH0pO3EuaGlkZSgpfWVsc2V7YnJlYWt9fX1pZih0aGlzLm1lbnVJdGVtcy5sZW5ndGg9PTApe3RoaXMuaGlkZVRyaWdnZXIoKX1yZXR1cm57dGFyZ2V0U2l6ZTp7aGVpZ2h0OmguaGVpZ2h0LHdpZHRoOmt9LHJlY2FsY3VsYXRlOnJ9fX0pO0V4dC5sYXlvdXQuYm94T3ZlcmZsb3cubWVudS5oYm94PUV4dC5sYXlvdXQuYm94T3ZlcmZsb3cuSG9yaXpvbnRhbE1lbnU7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5TY3JvbGxlcj1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuYm94T3ZlcmZsb3cuTm9uZSx7YW5pbWF0ZVNjcm9sbDp0cnVlLHNjcm9sbEluY3JlbWVudDoxMDAsd2hlZWxJbmNyZW1lbnQ6MyxzY3JvbGxSZXBlYXRJbnRlcnZhbDo0MDAsc2Nyb2xsRHVyYXRpb246MC40LGJlZm9yZUNsczoieC1zdHJpcC1sZWZ0IixhZnRlckNsczoieC1zdHJpcC1yaWdodCIsc2Nyb2xsZXJDbHM6Ingtc3RyaXAtc2Nyb2xsZXIiLGJlZm9yZVNjcm9sbGVyQ2xzOiJ4LXN0cmlwLXNjcm9sbGVyLWxlZnQiLGFmdGVyU2Nyb2xsZXJDbHM6Ingtc3RyaXAtc2Nyb2xsZXItcmlnaHQiLGNyZWF0ZVdoZWVsTGlzdGVuZXI6ZnVuY3Rpb24oKXt0aGlzLmxheW91dC5pbm5lckN0Lm9uKHtzY29wZTp0aGlzLG1vdXNld2hlZWw6ZnVuY3Rpb24oYSl7YS5zdG9wRXZlbnQoKTt0aGlzLnNjcm9sbEJ5KGEuZ2V0V2hlZWxEZWx0YSgpKnRoaXMud2hlZWxJbmNyZW1lbnQqLTEsZmFsc2UpfX0pfSxoYW5kbGVPdmVyZmxvdzpmdW5jdGlvbihhLGIpe3RoaXMuY3JlYXRlSW5uZXJFbGVtZW50cygpO3RoaXMuc2hvd1Njcm9sbGVycygpfSxjbGVhck92ZXJmbG93OmZ1bmN0aW9uKCl7dGhpcy5oaWRlU2Nyb2xsZXJzKCl9LHNob3dTY3JvbGxlcnM6ZnVuY3Rpb24oKXt0aGlzLmNyZWF0ZVNjcm9sbGVycygpO3RoaXMuYmVmb3JlU2Nyb2xsZXIuc2hvdygpO3RoaXMuYWZ0ZXJTY3JvbGxlci5zaG93KCk7dGhpcy51cGRhdGVTY3JvbGxCdXR0b25zKCl9LGhpZGVTY3JvbGxlcnM6ZnVuY3Rpb24oKXtpZih0aGlzLmJlZm9yZVNjcm9sbGVyIT11bmRlZmluZWQpe3RoaXMuYmVmb3JlU2Nyb2xsZXIuaGlkZSgpO3RoaXMuYWZ0ZXJTY3JvbGxlci5oaWRlKCl9fSxjcmVhdGVTY3JvbGxlcnM6ZnVuY3Rpb24oKXtpZighdGhpcy5iZWZvcmVTY3JvbGxlciYmIXRoaXMuYWZ0ZXJTY3JvbGxlcil7dmFyIGE9dGhpcy5iZWZvcmVDdC5jcmVhdGVDaGlsZCh7Y2xzOlN0cmluZy5mb3JtYXQoInswfSB7MX0gIix0aGlzLnNjcm9sbGVyQ2xzLHRoaXMuYmVmb3JlU2Nyb2xsZXJDbHMpfSk7dmFyIGI9dGhpcy5hZnRlckN0LmNyZWF0ZUNoaWxkKHtjbHM6U3RyaW5nLmZvcm1hdCgiezB9IHsxfSIsdGhpcy5zY3JvbGxlckNscyx0aGlzLmFmdGVyU2Nyb2xsZXJDbHMpfSk7YS5hZGRDbGFzc09uT3Zlcih0aGlzLmJlZm9yZVNjcm9sbGVyQ2xzKyItaG92ZXIiKTtiLmFkZENsYXNzT25PdmVyKHRoaXMuYWZ0ZXJTY3JvbGxlckNscysiLWhvdmVyIik7YS5zZXRWaXNpYmlsaXR5TW9kZShFeHQuRWxlbWVudC5ESVNQTEFZKTtiLnNldFZpc2liaWxpdHlNb2RlKEV4dC5FbGVtZW50LkRJU1BMQVkpO3RoaXMuYmVmb3JlUmVwZWF0ZXI9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIoYSx7aW50ZXJ2YWw6dGhpcy5zY3JvbGxSZXBlYXRJbnRlcnZhbCxoYW5kbGVyOnRoaXMuc2Nyb2xsTGVmdCxzY29wZTp0aGlzfSk7dGhpcy5hZnRlclJlcGVhdGVyPW5ldyBFeHQudXRpbC5DbGlja1JlcGVhdGVyKGIse2ludGVydmFsOnRoaXMuc2Nyb2xsUmVwZWF0SW50ZXJ2YWwsaGFuZGxlcjp0aGlzLnNjcm9sbFJpZ2h0LHNjb3BlOnRoaXN9KTt0aGlzLmJlZm9yZVNjcm9sbGVyPWE7dGhpcy5hZnRlclNjcm9sbGVyPWJ9fSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5iZWZvcmVTY3JvbGxlcix0aGlzLmFmdGVyU2Nyb2xsZXIsdGhpcy5iZWZvcmVSZXBlYXRlcix0aGlzLmFmdGVyUmVwZWF0ZXIsdGhpcy5iZWZvcmVDdCx0aGlzLmFmdGVyQ3QpfSxzY3JvbGxCeTpmdW5jdGlvbihiLGEpe3RoaXMuc2Nyb2xsVG8odGhpcy5nZXRTY3JvbGxQb3NpdGlvbigpK2IsYSl9LGdldEl0ZW06ZnVuY3Rpb24oYSl7aWYoRXh0LmlzU3RyaW5nKGEpKXthPUV4dC5nZXRDbXAoYSl9ZWxzZXtpZihFeHQuaXNOdW1iZXIoYSkpe2E9dGhpcy5pdGVtc1thXX19cmV0dXJuIGF9LGdldFNjcm9sbEFuaW06ZnVuY3Rpb24oKXtyZXR1cm57ZHVyYXRpb246dGhpcy5zY3JvbGxEdXJhdGlvbixjYWxsYmFjazp0aGlzLnVwZGF0ZVNjcm9sbEJ1dHRvbnMsc2NvcGU6dGhpc319LHVwZGF0ZVNjcm9sbEJ1dHRvbnM6ZnVuY3Rpb24oKXtpZih0aGlzLmJlZm9yZVNjcm9sbGVyPT11bmRlZmluZWR8fHRoaXMuYWZ0ZXJTY3JvbGxlcj09dW5kZWZpbmVkKXtyZXR1cm59dmFyIGQ9dGhpcy5hdEV4dHJlbWVCZWZvcmUoKT8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyIsYz10aGlzLmF0RXh0cmVtZUFmdGVyKCk/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiLGE9dGhpcy5iZWZvcmVTY3JvbGxlckNscysiLWRpc2FibGVkIixiPXRoaXMuYWZ0ZXJTY3JvbGxlckNscysiLWRpc2FibGVkIjt0aGlzLmJlZm9yZVNjcm9sbGVyW2RdKGEpO3RoaXMuYWZ0ZXJTY3JvbGxlcltjXShiKTt0aGlzLnNjcm9sbGluZz1mYWxzZX0sYXRFeHRyZW1lQmVmb3JlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKT09PTB9LHNjcm9sbExlZnQ6ZnVuY3Rpb24oYSl7dGhpcy5zY3JvbGxCeSgtdGhpcy5zY3JvbGxJbmNyZW1lbnQsYSl9LHNjcm9sbFJpZ2h0OmZ1bmN0aW9uKGEpe3RoaXMuc2Nyb2xsQnkodGhpcy5zY3JvbGxJbmNyZW1lbnQsYSl9LHNjcm9sbFRvSXRlbTpmdW5jdGlvbihkLGIpe2Q9dGhpcy5nZXRJdGVtKGQpO2lmKGQhPXVuZGVmaW5lZCl7dmFyIGE9dGhpcy5nZXRJdGVtVmlzaWJpbGl0eShkKTtpZighYS5mdWxseVZpc2libGUpe3ZhciBjPWQuZ2V0Qm94KHRydWUsdHJ1ZSksZT1jLng7aWYoYS5oaWRkZW5SaWdodCl7ZS09KHRoaXMubGF5b3V0LmlubmVyQ3QuZ2V0V2lkdGgoKS1jLndpZHRoKX10aGlzLnNjcm9sbFRvKGUsYil9fX0sZ2V0SXRlbVZpc2liaWxpdHk6ZnVuY3Rpb24oZSl7dmFyIGQ9dGhpcy5nZXRJdGVtKGUpLmdldEJveCh0cnVlLHRydWUpLGE9ZC54LGM9ZC54K2Qud2lkdGgsZz10aGlzLmdldFNjcm9sbFBvc2l0aW9uKCksYj10aGlzLmxheW91dC5pbm5lckN0LmdldFdpZHRoKCkrZztyZXR1cm57aGlkZGVuTGVmdDphPGcsaGlkZGVuUmlnaHQ6Yz5iLGZ1bGx5VmlzaWJsZTphPmcmJmM8Yn19fSk7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5zY3JvbGxlcj1FeHQubGF5b3V0LmJveE92ZXJmbG93LlNjcm9sbGVyO0V4dC5sYXlvdXQuYm94T3ZlcmZsb3cuVmVydGljYWxTY3JvbGxlcj1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuYm94T3ZlcmZsb3cuU2Nyb2xsZXIse3Njcm9sbEluY3JlbWVudDo3NSx3aGVlbEluY3JlbWVudDoyLGhhbmRsZU92ZXJmbG93OmZ1bmN0aW9uKGEsYil7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5WZXJ0aWNhbFNjcm9sbGVyLnN1cGVyY2xhc3MuaGFuZGxlT3ZlcmZsb3cuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybnt0YXJnZXRTaXplOntoZWlnaHQ6Yi5oZWlnaHQtKHRoaXMuYmVmb3JlQ3QuZ2V0SGVpZ2h0KCkrdGhpcy5hZnRlckN0LmdldEhlaWdodCgpKSx3aWR0aDpiLndpZHRofX19LGNyZWF0ZUlubmVyRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxheW91dC5pbm5lckN0O2lmKCF0aGlzLmJlZm9yZUN0KXt0aGlzLmJlZm9yZUN0PWEuaW5zZXJ0U2libGluZyh7Y2xzOnRoaXMuYmVmb3JlQ2xzfSwiYmVmb3JlIik7dGhpcy5hZnRlckN0PWEuaW5zZXJ0U2libGluZyh7Y2xzOnRoaXMuYWZ0ZXJDbHN9LCJhZnRlciIpO3RoaXMuY3JlYXRlV2hlZWxMaXN0ZW5lcigpfX0sc2Nyb2xsVG86ZnVuY3Rpb24oYSxiKXt2YXIgZD10aGlzLmdldFNjcm9sbFBvc2l0aW9uKCksYz1hLmNvbnN0cmFpbigwLHRoaXMuZ2V0TWF4U2Nyb2xsQm90dG9tKCkpO2lmKGMhPWQmJiF0aGlzLnNjcm9sbGluZyl7aWYoYj09dW5kZWZpbmVkKXtiPXRoaXMuYW5pbWF0ZVNjcm9sbH10aGlzLmxheW91dC5pbm5lckN0LnNjcm9sbFRvKCJ0b3AiLGMsYj90aGlzLmdldFNjcm9sbEFuaW0oKTpmYWxzZSk7aWYoYil7dGhpcy5zY3JvbGxpbmc9dHJ1ZX1lbHNle3RoaXMuc2Nyb2xsaW5nPWZhbHNlO3RoaXMudXBkYXRlU2Nyb2xsQnV0dG9ucygpfX19LGdldFNjcm9sbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMubGF5b3V0LmlubmVyQ3QuZG9tLnNjcm9sbFRvcCwxMCl8fDB9LGdldE1heFNjcm9sbEJvdHRvbTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxheW91dC5pbm5lckN0LmRvbS5zY3JvbGxIZWlnaHQtdGhpcy5sYXlvdXQuaW5uZXJDdC5nZXRIZWlnaHQoKX0sYXRFeHRyZW1lQWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGxQb3NpdGlvbigpPj10aGlzLmdldE1heFNjcm9sbEJvdHRvbSgpfX0pO0V4dC5sYXlvdXQuYm94T3ZlcmZsb3cuc2Nyb2xsZXIudmJveD1FeHQubGF5b3V0LmJveE92ZXJmbG93LlZlcnRpY2FsU2Nyb2xsZXI7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5Ib3Jpem9udGFsU2Nyb2xsZXI9RXh0LmV4dGVuZChFeHQubGF5b3V0LmJveE92ZXJmbG93LlNjcm9sbGVyLHtoYW5kbGVPdmVyZmxvdzpmdW5jdGlvbihhLGIpe0V4dC5sYXlvdXQuYm94T3ZlcmZsb3cuSG9yaXpvbnRhbFNjcm9sbGVyLnN1cGVyY2xhc3MuaGFuZGxlT3ZlcmZsb3cuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybnt0YXJnZXRTaXplOntoZWlnaHQ6Yi5oZWlnaHQsd2lkdGg6Yi53aWR0aC0odGhpcy5iZWZvcmVDdC5nZXRXaWR0aCgpK3RoaXMuYWZ0ZXJDdC5nZXRXaWR0aCgpKX19fSxjcmVhdGVJbm5lckVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sYXlvdXQuaW5uZXJDdDtpZighdGhpcy5iZWZvcmVDdCl7dGhpcy5hZnRlckN0PWEuaW5zZXJ0U2libGluZyh7Y2xzOnRoaXMuYWZ0ZXJDbHN9LCJiZWZvcmUiKTt0aGlzLmJlZm9yZUN0PWEuaW5zZXJ0U2libGluZyh7Y2xzOnRoaXMuYmVmb3JlQ2xzfSwiYmVmb3JlIik7dGhpcy5jcmVhdGVXaGVlbExpc3RlbmVyKCl9fSxzY3JvbGxUbzpmdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKSxjPWEuY29uc3RyYWluKDAsdGhpcy5nZXRNYXhTY3JvbGxSaWdodCgpKTtpZihjIT1kJiYhdGhpcy5zY3JvbGxpbmcpe2lmKGI9PXVuZGVmaW5lZCl7Yj10aGlzLmFuaW1hdGVTY3JvbGx9dGhpcy5sYXlvdXQuaW5uZXJDdC5zY3JvbGxUbygibGVmdCIsYyxiP3RoaXMuZ2V0U2Nyb2xsQW5pbSgpOmZhbHNlKTtpZihiKXt0aGlzLnNjcm9sbGluZz10cnVlfWVsc2V7dGhpcy5zY3JvbGxpbmc9ZmFsc2U7dGhpcy51cGRhdGVTY3JvbGxCdXR0b25zKCl9fX0sZ2V0U2Nyb2xsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5sYXlvdXQuaW5uZXJDdC5kb20uc2Nyb2xsTGVmdCwxMCl8fDB9LGdldE1heFNjcm9sbFJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGF5b3V0LmlubmVyQ3QuZG9tLnNjcm9sbFdpZHRoLXRoaXMubGF5b3V0LmlubmVyQ3QuZ2V0V2lkdGgoKX0sYXRFeHRyZW1lQWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGxQb3NpdGlvbigpPj10aGlzLmdldE1heFNjcm9sbFJpZ2h0KCl9fSk7RXh0LmxheW91dC5ib3hPdmVyZmxvdy5zY3JvbGxlci5oYm94PUV4dC5sYXlvdXQuYm94T3ZlcmZsb3cuSG9yaXpvbnRhbFNjcm9sbGVyO0V4dC5sYXlvdXQuSEJveExheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQm94TGF5b3V0LHthbGlnbjoidG9wIix0eXBlOiJoYm94IixjYWxjdWxhdGVDaGlsZEJveGVzOmZ1bmN0aW9uKHIsYil7dmFyIEY9ci5sZW5ndGgsUj10aGlzLnBhZGRpbmcsRD1SLnRvcCxVPVIubGVmdCx5PUQrUi5ib3R0b20sTz1VK1IucmlnaHQsYT1iLndpZHRoLXRoaXMuc2Nyb2xsT2Zmc2V0LGU9Yi5oZWlnaHQsbz1NYXRoLm1heCgwLGUteSksUD10aGlzLnBhY2s9PSJzdGFydCIsVz10aGlzLnBhY2s9PSJjZW50ZXIiLEE9dGhpcy5wYWNrPT0iZW5kIixMPTAsUT0wLFQ9MCxsPTAsWD0wLEg9W10sayxKLE0sVix3LGosUyxJLGMseCxxLE47Zm9yKFM9MDtTPEY7UysrKXtrPXJbU107TT1rLmhlaWdodDtKPWsud2lkdGg7aj0hay5oYXNMYXlvdXQmJnR5cGVvZiBrLmRvTGF5b3V0PT0iZnVuY3Rpb24iO2lmKHR5cGVvZiBKIT0ibnVtYmVyIil7aWYoay5mbGV4JiYhSil7VCs9ay5mbGV4fWVsc2V7aWYoIUomJmope2suZG9MYXlvdXQoKX1WPWsuZ2V0U2l6ZSgpO0o9Vi53aWR0aDtNPVYuaGVpZ2h0fX13PWsubWFyZ2luczt4PXcubGVmdCt3LnJpZ2h0O0wrPXgrKEp8fDApO2wrPXgrKGsuZmxleD9rLm1pbldpZHRofHwwOkopO1grPXgrKGsubWluV2lkdGh8fEp8fDApO2lmKHR5cGVvZiBNIT0ibnVtYmVyIil7aWYoail7ay5kb0xheW91dCgpfU09ay5nZXRIZWlnaHQoKX1RPU1hdGgubWF4KFEsTSt3LnRvcCt3LmJvdHRvbSk7SC5wdXNoKHtjb21wb25lbnQ6ayxoZWlnaHQ6TXx8dW5kZWZpbmVkLHdpZHRoOkp8fHVuZGVmaW5lZH0pfXZhciBLPWwtYSxwPVg+YTt2YXIgbj1NYXRoLm1heCgwLGEtTC1PKTtpZihwKXtmb3IoUz0wO1M8RjtTKyspe0hbU10ud2lkdGg9cltTXS5taW5XaWR0aHx8cltTXS53aWR0aHx8SFtTXS53aWR0aH19ZWxzZXtpZihLPjApe3ZhciBDPVtdO2Zvcih2YXIgRT0wLHY9RjtFPHY7RSsrKXt2YXIgQj1yW0VdLHQ9Qi5taW5XaWR0aHx8MDtpZihCLmZsZXgpe0hbRV0ud2lkdGg9dH1lbHNle0MucHVzaCh7bWluV2lkdGg6dCxhdmFpbGFibGU6SFtFXS53aWR0aC10LGluZGV4OkV9KX19Qy5zb3J0KGZ1bmN0aW9uKFksaSl7cmV0dXJuIFkuYXZhaWxhYmxlPmkuYXZhaWxhYmxlPzE6LTF9KTtmb3IodmFyIFM9MCx2PUMubGVuZ3RoO1M8djtTKyspe3ZhciBHPUNbU10uaW5kZXg7aWYoRz09dW5kZWZpbmVkKXtjb250aW51ZX12YXIgQj1yW0ddLG09SFtHXSx1PW0ud2lkdGgsdD1CLm1pbldpZHRoLGQ9TWF0aC5tYXgodCx1LU1hdGguY2VpbChLLyh2LVMpKSksZz11LWQ7SFtHXS53aWR0aD1kO0stPWd9fWVsc2V7dmFyIGg9bixzPVQ7Zm9yKFM9MDtTPEY7UysrKXtrPXJbU107ST1IW1NdO3c9ay5tYXJnaW5zO3E9dy50b3Ardy5ib3R0b207aWYoUCYmay5mbGV4JiYhay53aWR0aCl7Yz1NYXRoLmNlaWwoKGsuZmxleC9zKSpoKTtoLT1jO3MtPWsuZmxleDtJLndpZHRoPWM7SS5kaXJ0eVNpemU9dHJ1ZX19fX1pZihXKXtVKz1uLzJ9ZWxzZXtpZihBKXtVKz1ufX1mb3IoUz0wO1M8RjtTKyspe2s9cltTXTtJPUhbU107dz1rLm1hcmdpbnM7VSs9dy5sZWZ0O3E9dy50b3Ardy5ib3R0b207SS5sZWZ0PVU7SS50b3A9RCt3LnRvcDtzd2l0Y2godGhpcy5hbGlnbil7Y2FzZSJzdHJldGNoIjpOPW8tcTtJLmhlaWdodD1OLmNvbnN0cmFpbihrLm1pbkhlaWdodHx8MCxrLm1heEhlaWdodHx8MTAwMDAwMCk7SS5kaXJ0eVNpemU9dHJ1ZTticmVhaztjYXNlInN0cmV0Y2htYXgiOk49US1xO0kuaGVpZ2h0PU4uY29uc3RyYWluKGsubWluSGVpZ2h0fHwwLGsubWF4SGVpZ2h0fHwxMDAwMDAwKTtJLmRpcnR5U2l6ZT10cnVlO2JyZWFrO2Nhc2UibWlkZGxlIjp2YXIgej1vLUkuaGVpZ2h0LXE7aWYoej4wKXtJLnRvcD1EK3ErKHovMil9fVUrPUkud2lkdGgrdy5yaWdodH1yZXR1cm57Ym94ZXM6SCxtZXRhOnttYXhIZWlnaHQ6USxub25GbGV4V2lkdGg6TCxkZXNpcmVkV2lkdGg6bCxtaW5pbXVtV2lkdGg6WCxzaG9ydGZhbGw6bC1hLHRvb05hcnJvdzpwfX19fSk7RXh0LkNvbnRhaW5lci5MQVlPVVRTLmhib3g9RXh0LmxheW91dC5IQm94TGF5b3V0O0V4dC5sYXlvdXQuVkJveExheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQm94TGF5b3V0LHthbGlnbjoibGVmdCIsdHlwZToidmJveCIsY2FsY3VsYXRlQ2hpbGRCb3hlczpmdW5jdGlvbihvLGIpe3ZhciBFPW8ubGVuZ3RoLFI9dGhpcy5wYWRkaW5nLEM9Ui50b3AsVj1SLmxlZnQseD1DK1IuYm90dG9tLE89VitSLnJpZ2h0LGE9Yi53aWR0aC10aGlzLnNjcm9sbE9mZnNldCxjPWIuaGVpZ2h0LEs9TWF0aC5tYXgoMCxhLU8pLFA9dGhpcy5wYWNrPT0ic3RhcnQiLFg9dGhpcy5wYWNrPT0iY2VudGVyIix6PXRoaXMucGFjaz09ImVuZCIsaz0wLHU9MCxVPTAsTD0wLG09MCxHPVtdLGgsSSxOLFcsdCxnLFQsSCxTLHcsbixkLHI7Zm9yKFQ9MDtUPEU7VCsrKXtoPW9bVF07Tj1oLmhlaWdodDtJPWgud2lkdGg7Zz0haC5oYXNMYXlvdXQmJnR5cGVvZiBoLmRvTGF5b3V0PT0iZnVuY3Rpb24iO2lmKHR5cGVvZiBOIT0ibnVtYmVyIil7aWYoaC5mbGV4JiYhTil7VSs9aC5mbGV4fWVsc2V7aWYoIU4mJmcpe2guZG9MYXlvdXQoKX1XPWguZ2V0U2l6ZSgpO0k9Vy53aWR0aDtOPVcuaGVpZ2h0fX10PWgubWFyZ2lucztuPXQudG9wK3QuYm90dG9tO2srPW4rKE58fDApO0wrPW4rKGguZmxleD9oLm1pbkhlaWdodHx8MDpOKTttKz1uKyhoLm1pbkhlaWdodHx8Tnx8MCk7aWYodHlwZW9mIEkhPSJudW1iZXIiKXtpZihnKXtoLmRvTGF5b3V0KCl9ST1oLmdldFdpZHRoKCl9dT1NYXRoLm1heCh1LEkrdC5sZWZ0K3QucmlnaHQpO0cucHVzaCh7Y29tcG9uZW50OmgsaGVpZ2h0Ok58fHVuZGVmaW5lZCx3aWR0aDpJfHx1bmRlZmluZWR9KX12YXIgTT1MLWMsbD1tPmM7dmFyIHE9TWF0aC5tYXgoMCwoYy1rLXgpKTtpZihsKXtmb3IoVD0wLHI9RTtUPHI7VCsrKXtHW1RdLmhlaWdodD1vW1RdLm1pbkhlaWdodHx8b1tUXS5oZWlnaHR8fEdbVF0uaGVpZ2h0fX1lbHNle2lmKE0+MCl7dmFyIEo9W107Zm9yKHZhciBEPTAscj1FO0Q8cjtEKyspe3ZhciBBPW9bRF0scz1BLm1pbkhlaWdodHx8MDtpZihBLmZsZXgpe0dbRF0uaGVpZ2h0PXN9ZWxzZXtKLnB1c2goe21pbkhlaWdodDpzLGF2YWlsYWJsZTpHW0RdLmhlaWdodC1zLGluZGV4OkR9KX19Si5zb3J0KGZ1bmN0aW9uKFksaSl7cmV0dXJuIFkuYXZhaWxhYmxlPmkuYXZhaWxhYmxlPzE6LTF9KTtmb3IodmFyIFQ9MCxyPUoubGVuZ3RoO1Q8cjtUKyspe3ZhciBGPUpbVF0uaW5kZXg7aWYoRj09dW5kZWZpbmVkKXtjb250aW51ZX12YXIgQT1vW0ZdLGo9R1tGXSx2PWouaGVpZ2h0LHM9QS5taW5IZWlnaHQsQj1NYXRoLm1heChzLHYtTWF0aC5jZWlsKE0vKHItVCkpKSxlPXYtQjtHW0ZdLmhlaWdodD1CO00tPWV9fWVsc2V7dmFyIFE9cSxwPVU7Zm9yKFQ9MDtUPEU7VCsrKXtoPW9bVF07SD1HW1RdO3Q9aC5tYXJnaW5zO3c9dC5sZWZ0K3QucmlnaHQ7aWYoUCYmaC5mbGV4JiYhaC5oZWlnaHQpe1M9TWF0aC5jZWlsKChoLmZsZXgvcCkqUSk7US09UztwLT1oLmZsZXg7SC5oZWlnaHQ9UztILmRpcnR5U2l6ZT10cnVlfX19fWlmKFgpe0MrPXEvMn1lbHNle2lmKHope0MrPXF9fWZvcihUPTA7VDxFO1QrKyl7aD1vW1RdO0g9R1tUXTt0PWgubWFyZ2lucztDKz10LnRvcDt3PXQubGVmdCt0LnJpZ2h0O0gubGVmdD1WK3QubGVmdDtILnRvcD1DO3N3aXRjaCh0aGlzLmFsaWduKXtjYXNlInN0cmV0Y2giOmQ9Sy13O0gud2lkdGg9ZC5jb25zdHJhaW4oaC5taW5XaWR0aHx8MCxoLm1heFdpZHRofHwxMDAwMDAwKTtILmRpcnR5U2l6ZT10cnVlO2JyZWFrO2Nhc2Uic3RyZXRjaG1heCI6ZD11LXc7SC53aWR0aD1kLmNvbnN0cmFpbihoLm1pbldpZHRofHwwLGgubWF4V2lkdGh8fDEwMDAwMDApO0guZGlydHlTaXplPXRydWU7YnJlYWs7Y2FzZSJjZW50ZXIiOnZhciB5PUstSC53aWR0aC13O2lmKHk+MCl7SC5sZWZ0PVYrdysoeS8yKX19Qys9SC5oZWlnaHQrdC5ib3R0b219cmV0dXJue2JveGVzOkcsbWV0YTp7bWF4V2lkdGg6dSxub25GbGV4SGVpZ2h0OmssZGVzaXJlZEhlaWdodDpMLG1pbmltdW1IZWlnaHQ6bSxzaG9ydGZhbGw6TC1jLHRvb05hcnJvdzpsfX19fSk7RXh0LkNvbnRhaW5lci5MQVlPVVRTLnZib3g9RXh0LmxheW91dC5WQm94TGF5b3V0O0V4dC5sYXlvdXQuVG9vbGJhckxheW91dD1FeHQuZXh0ZW5kKEV4dC5sYXlvdXQuQ29udGFpbmVyTGF5b3V0LHttb25pdG9yUmVzaXplOnRydWUsdHlwZToidG9vbGJhciIsdHJpZ2dlcldpZHRoOjE4LG5vSXRlbXNNZW51VGV4dDonPGRpdiBjbGFzcz0ieC10b29sYmFyLW5vLWl0ZW1zIj4oTm9uZSk8L2Rpdj4nLGxhc3RPdmVyZmxvdzpmYWxzZSx0YWJsZUhUTUw6Wyc8dGFibGUgY2VsbHNwYWNpbmc9IjAiIGNsYXNzPSJ4LXRvb2xiYXItY3QiPicsIjx0Ym9keT4iLCI8dHI+IiwnPHRkIGNsYXNzPSJ4LXRvb2xiYXItbGVmdCIgYWxpZ249InswfSI+JywnPHRhYmxlIGNlbGxzcGFjaW5nPSIwIj4nLCI8dGJvZHk+IiwnPHRyIGNsYXNzPSJ4LXRvb2xiYXItbGVmdC1yb3ciPjwvdHI+JywiPC90Ym9keT4iLCI8L3RhYmxlPiIsIjwvdGQ+IiwnPHRkIGNsYXNzPSJ4LXRvb2xiYXItcmlnaHQiIGFsaWduPSJyaWdodCI+JywnPHRhYmxlIGNlbGxzcGFjaW5nPSIwIiBjbGFzcz0ieC10b29sYmFyLXJpZ2h0LWN0Ij4nLCI8dGJvZHk+IiwiPHRyPiIsIjx0ZD4iLCc8dGFibGUgY2VsbHNwYWNpbmc9IjAiPicsIjx0Ym9keT4iLCc8dHIgY2xhc3M9IngtdG9vbGJhci1yaWdodC1yb3ciPjwvdHI+JywiPC90Ym9keT4iLCI8L3RhYmxlPiIsIjwvdGQ+IiwiPHRkPiIsJzx0YWJsZSBjZWxsc3BhY2luZz0iMCI+JywiPHRib2R5PiIsJzx0ciBjbGFzcz0ieC10b29sYmFyLWV4dHJhcy1yb3ciPjwvdHI+JywiPC90Ym9keT4iLCI8L3RhYmxlPiIsIjwvdGQ+IiwiPC90cj4iLCI8L3Rib2R5PiIsIjwvdGFibGU+IiwiPC90ZD4iLCI8L3RyPiIsIjwvdGJvZHk+IiwiPC90YWJsZT4iXS5qb2luKCIiKSxvbkxheW91dDpmdW5jdGlvbihlLGope2lmKCF0aGlzLmxlZnRUcil7dmFyIGg9ZS5idXR0b25BbGlnbj09ImNlbnRlciI/ImNlbnRlciI6ImxlZnQiO2ouYWRkQ2xhc3MoIngtdG9vbGJhci1sYXlvdXQtY3QiKTtqLmluc2VydEh0bWwoImJlZm9yZUVuZCIsU3RyaW5nLmZvcm1hdCh0aGlzLnRhYmxlSFRNTCxoKSk7dGhpcy5sZWZ0VHI9ai5jaGlsZCgidHIueC10b29sYmFyLWxlZnQtcm93Iix0cnVlKTt0aGlzLnJpZ2h0VHI9ai5jaGlsZCgidHIueC10b29sYmFyLXJpZ2h0LXJvdyIsdHJ1ZSk7dGhpcy5leHRyYXNUcj1qLmNoaWxkKCJ0ci54LXRvb2xiYXItZXh0cmFzLXJvdyIsdHJ1ZSk7aWYodGhpcy5oaWRkZW5JdGVtPT11bmRlZmluZWQpe3RoaXMuaGlkZGVuSXRlbXM9W119fXZhciBrPWUuYnV0dG9uQWxpZ249PSJyaWdodCI/dGhpcy5yaWdodFRyOnRoaXMubGVmdFRyLGw9ZS5pdGVtcy5pdGVtcyxkPTA7Zm9yKHZhciBiPTAsZz1sLmxlbmd0aCxtO2I8ZztiKyssZCsrKXttPWxbYl07aWYobS5pc0ZpbGwpe2s9dGhpcy5yaWdodFRyO2Q9LTF9ZWxzZXtpZighbS5yZW5kZXJlZCl7bS5yZW5kZXIodGhpcy5pbnNlcnRDZWxsKG0sayxkKSk7dGhpcy5jb25maWd1cmVJdGVtKG0pfWVsc2V7aWYoIW0ueHRiSGlkZGVuJiYhdGhpcy5pc1ZhbGlkUGFyZW50KG0say5jaGlsZE5vZGVzW2RdKSl7dmFyIGE9dGhpcy5pbnNlcnRDZWxsKG0sayxkKTthLmFwcGVuZENoaWxkKG0uZ2V0UG9zaXRpb25FbCgpLmRvbSk7bS5jb250YWluZXI9RXh0LmdldChhKX19fX10aGlzLmNsZWFudXAodGhpcy5sZWZ0VHIpO3RoaXMuY2xlYW51cCh0aGlzLnJpZ2h0VHIpO3RoaXMuY2xlYW51cCh0aGlzLmV4dHJhc1RyKTt0aGlzLmZpdFRvU2l6ZShqKX0sY2xlYW51cDpmdW5jdGlvbihiKXt2YXIgZT1iLmNoaWxkTm9kZXMsYSxkO2ZvcihhPWUubGVuZ3RoLTE7YT49MCYmKGQ9ZVthXSk7YS0tKXtpZighZC5maXJzdENoaWxkKXtiLnJlbW92ZUNoaWxkKGQpfX19LGluc2VydENlbGw6ZnVuY3Rpb24oZSxiLGEpe3ZhciBkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRkIik7ZC5jbGFzc05hbWU9IngtdG9vbGJhci1jZWxsIjtiLmluc2VydEJlZm9yZShkLGIuY2hpbGROb2Rlc1thXXx8bnVsbCk7cmV0dXJuIGR9LGhpZGVJdGVtOmZ1bmN0aW9uKGEpe3RoaXMuaGlkZGVuSXRlbXMucHVzaChhKTthLnh0YkhpZGRlbj10cnVlO2EueHRiV2lkdGg9YS5nZXRQb3NpdGlvbkVsKCkuZG9tLnBhcmVudE5vZGUub2Zmc2V0V2lkdGg7YS5oaWRlKCl9LHVuaGlkZUl0ZW06ZnVuY3Rpb24oYSl7YS5zaG93KCk7YS54dGJIaWRkZW49ZmFsc2U7dGhpcy5oaWRkZW5JdGVtcy5yZW1vdmUoYSl9LGdldEl0ZW1XaWR0aDpmdW5jdGlvbihhKXtyZXR1cm4gYS5oaWRkZW4/KGEueHRiV2lkdGh8fDApOmEuZ2V0UG9zaXRpb25FbCgpLmRvbS5wYXJlbnROb2RlLm9mZnNldFdpZHRofSxmaXRUb1NpemU6ZnVuY3Rpb24oayl7aWYodGhpcy5jb250YWluZXIuZW5hYmxlT3ZlcmZsb3c9PT1mYWxzZSl7cmV0dXJufXZhciBiPWsuZG9tLmNsaWVudFdpZHRoLGo9ay5kb20uZmlyc3RDaGlsZC5vZmZzZXRXaWR0aCxtPWItdGhpcy50cmlnZ2VyV2lkdGgsYT10aGlzLmxhc3RXaWR0aHx8MCxjPXRoaXMuaGlkZGVuSXRlbXMsZT1jLmxlbmd0aCE9MCxuPWI+PWE7dGhpcy5sYXN0V2lkdGg9YjtpZihqPmJ8fChlJiZuKSl7dmFyIGw9dGhpcy5jb250YWluZXIuaXRlbXMuaXRlbXMsaD1sLmxlbmd0aCxkPTAsbztmb3IodmFyIGc9MDtnPGg7ZysrKXtvPWxbZ107aWYoIW8uaXNGaWxsKXtkKz10aGlzLmdldEl0ZW1XaWR0aChvKTtpZihkPm0pe2lmKCEoby5oaWRkZW58fG8ueHRiSGlkZGVuKSl7dGhpcy5oaWRlSXRlbShvKX19ZWxzZXtpZihvLnh0YkhpZGRlbil7dGhpcy51bmhpZGVJdGVtKG8pfX19fX1lPWMubGVuZ3RoIT0wO2lmKGUpe3RoaXMuaW5pdE1vcmUoKTtpZighdGhpcy5sYXN0T3ZlcmZsb3cpe3RoaXMuY29udGFpbmVyLmZpcmVFdmVudCgib3ZlcmZsb3djaGFuZ2UiLHRoaXMuY29udGFpbmVyLHRydWUpO3RoaXMubGFzdE92ZXJmbG93PXRydWV9fWVsc2V7aWYodGhpcy5tb3JlKXt0aGlzLmNsZWFyTWVudSgpO3RoaXMubW9yZS5kZXN0cm95KCk7ZGVsZXRlIHRoaXMubW9yZTtpZih0aGlzLmxhc3RPdmVyZmxvdyl7dGhpcy5jb250YWluZXIuZmlyZUV2ZW50KCJvdmVyZmxvd2NoYW5nZSIsdGhpcy5jb250YWluZXIsZmFsc2UpO3RoaXMubGFzdE92ZXJmbG93PWZhbHNlfX19fSxjcmVhdGVNZW51Q29uZmlnOmZ1bmN0aW9uKGMsYSl7dmFyIGI9RXh0LmFwcGx5KHt9LGMuaW5pdGlhbENvbmZpZyksZD1jLnRvZ2dsZUdyb3VwO0V4dC5jb3B5VG8oYixjLFsiaWNvbkNscyIsImljb24iLCJpdGVtSWQiLCJkaXNhYmxlZCIsImhhbmRsZXIiLCJzY29wZSIsIm1lbnUiXSk7RXh0LmFwcGx5KGIse3RleHQ6Yy5vdmVyZmxvd1RleHR8fGMudGV4dCxoaWRlT25DbGljazphfSk7aWYoZHx8Yy5lbmFibGVUb2dnbGUpe0V4dC5hcHBseShiLHtncm91cDpkLGNoZWNrZWQ6Yy5wcmVzc2VkLGxpc3RlbmVyczp7Y2hlY2tjaGFuZ2U6ZnVuY3Rpb24oZyxlKXtjLnRvZ2dsZShlKX19fSl9ZGVsZXRlIGIub3duZXJDdDtkZWxldGUgYi54dHlwZTtkZWxldGUgYi5pZDtyZXR1cm4gYn0sYWRkQ29tcG9uZW50VG9NZW51OmZ1bmN0aW9uKGIsYSl7aWYoYSBpbnN0YW5jZW9mIEV4dC5Ub29sYmFyLlNlcGFyYXRvcil7Yi5hZGQoIi0iKX1lbHNle2lmKEV4dC5pc0Z1bmN0aW9uKGEuaXNYVHlwZSkpe2lmKGEuaXNYVHlwZSgic3BsaXRidXR0b24iKSl7Yi5hZGQodGhpcy5jcmVhdGVNZW51Q29uZmlnKGEsdHJ1ZSkpfWVsc2V7aWYoYS5pc1hUeXBlKCJidXR0b24iKSl7Yi5hZGQodGhpcy5jcmVhdGVNZW51Q29uZmlnKGEsIWEubWVudSkpfWVsc2V7aWYoYS5pc1hUeXBlKCJidXR0b25ncm91cCIpKXthLml0ZW1zLmVhY2goZnVuY3Rpb24oYyl7dGhpcy5hZGRDb21wb25lbnRUb01lbnUoYixjKX0sdGhpcyl9fX19fX0sY2xlYXJNZW51OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tb3JlTWVudTtpZihhJiZhLml0ZW1zKXthLml0ZW1zLmVhY2goZnVuY3Rpb24oYil7ZGVsZXRlIGIubWVudX0pfX0sYmVmb3JlTW9yZVNob3c6ZnVuY3Rpb24oaCl7dmFyIGI9dGhpcy5jb250YWluZXIuaXRlbXMuaXRlbXMsYT1iLmxlbmd0aCxnLGU7dmFyIGM9ZnVuY3Rpb24oaixpKXtyZXR1cm4gai5pc1hUeXBlKCJidXR0b25ncm91cCIpJiYhKGkgaW5zdGFuY2VvZiBFeHQuVG9vbGJhci5TZXBhcmF0b3IpfTt0aGlzLmNsZWFyTWVudSgpO2gucmVtb3ZlQWxsKCk7Zm9yKHZhciBkPTA7ZDxhO2QrKyl7Zz1iW2RdO2lmKGcueHRiSGlkZGVuKXtpZihlJiYoYyhnLGUpfHxjKGUsZykpKXtoLmFkZCgiLSIpfXRoaXMuYWRkQ29tcG9uZW50VG9NZW51KGgsZyk7ZT1nfX1pZihoLml0ZW1zLmxlbmd0aDwxKXtoLmFkZCh0aGlzLm5vSXRlbXNNZW51VGV4dCl9fSxpbml0TW9yZTpmdW5jdGlvbigpe2lmKCF0aGlzLm1vcmUpe3RoaXMubW9yZU1lbnU9bmV3IEV4dC5tZW51Lk1lbnUoe293bmVyQ3Q6dGhpcy5jb250YWluZXIsbGlzdGVuZXJzOntiZWZvcmVzaG93OnRoaXMuYmVmb3JlTW9yZVNob3csc2NvcGU6dGhpc319KTt0aGlzLm1vcmU9bmV3IEV4dC5CdXR0b24oe2ljb25DbHM6IngtdG9vbGJhci1tb3JlLWljb24iLGNsczoieC10b29sYmFyLW1vcmUiLG1lbnU6dGhpcy5tb3JlTWVudSxvd25lckN0OnRoaXMuY29udGFpbmVyfSk7dmFyIGE9dGhpcy5pbnNlcnRDZWxsKHRoaXMubW9yZSx0aGlzLmV4dHJhc1RyLDEwMCk7dGhpcy5tb3JlLnJlbmRlcihhKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLm1vcmUsdGhpcy5tb3JlTWVudSk7ZGVsZXRlIHRoaXMubGVmdFRyO2RlbGV0ZSB0aGlzLnJpZ2h0VHI7ZGVsZXRlIHRoaXMuZXh0cmFzVHI7RXh0LmxheW91dC5Ub29sYmFyTGF5b3V0LnN1cGVyY2xhc3MuZGVzdHJveS5jYWxsKHRoaXMpfX0pO0V4dC5Db250YWluZXIuTEFZT1VUUy50b29sYmFyPUV4dC5sYXlvdXQuVG9vbGJhckxheW91dDtFeHQubGF5b3V0Lk1lbnVMYXlvdXQ9RXh0LmV4dGVuZChFeHQubGF5b3V0LkNvbnRhaW5lckxheW91dCx7bW9uaXRvclJlc2l6ZTp0cnVlLHR5cGU6Im1lbnUiLHNldENvbnRhaW5lcjpmdW5jdGlvbihhKXt0aGlzLm1vbml0b3JSZXNpemU9IWEuZmxvYXRpbmc7YS5vbigiYXV0b3NpemUiLHRoaXMuZG9BdXRvU2l6ZSx0aGlzKTtFeHQubGF5b3V0Lk1lbnVMYXlvdXQuc3VwZXJjbGFzcy5zZXRDb250YWluZXIuY2FsbCh0aGlzLGEpfSxyZW5kZXJJdGVtOmZ1bmN0aW9uKGcsYixlKXtpZighdGhpcy5pdGVtVHBsKXt0aGlzLml0ZW1UcGw9RXh0LmxheW91dC5NZW51TGF5b3V0LnByb3RvdHlwZS5pdGVtVHBsPW5ldyBFeHQuWFRlbXBsYXRlKCc8bGkgaWQ9IntpdGVtSWR9IiBjbGFzcz0ie2l0ZW1DbHN9Ij4nLCc8dHBsIGlmPSJuZWVkc0ljb24iPicsJzxpbWcgYWx0PSJ7YWx0VGV4dH0iIHNyYz0ie2ljb259IiBjbGFzcz0ie2ljb25DbHN9Ii8+JywiPC90cGw+IiwiPC9saT4iKX1pZihnJiYhZy5yZW5kZXJlZCl7aWYoRXh0LmlzTnVtYmVyKGIpKXtiPWUuZG9tLmNoaWxkTm9kZXNbYl19dmFyIGQ9dGhpcy5nZXRJdGVtQXJncyhnKTtnLnJlbmRlcihnLnBvc2l0aW9uRWw9Yj90aGlzLml0ZW1UcGwuaW5zZXJ0QmVmb3JlKGIsZCx0cnVlKTp0aGlzLml0ZW1UcGwuYXBwZW5kKGUsZCx0cnVlKSk7Zy5wb3NpdGlvbkVsLm1lbnVJdGVtSWQ9Zy5nZXRJdGVtSWQoKTtpZighZC5pc01lbnVJdGVtJiZkLm5lZWRzSWNvbil7Zy5wb3NpdGlvbkVsLmFkZENsYXNzKCJ4LW1lbnUtbGlzdC1pdGVtLWluZGVudCIpfXRoaXMuY29uZmlndXJlSXRlbShnKX1lbHNle2lmKGcmJiF0aGlzLmlzVmFsaWRQYXJlbnQoZyxlKSl7aWYoRXh0LmlzTnVtYmVyKGIpKXtiPWUuZG9tLmNoaWxkTm9kZXNbYl19ZS5kb20uaW5zZXJ0QmVmb3JlKGcuZ2V0QWN0aW9uRWwoKS5kb20sYnx8bnVsbCl9fX0sZ2V0SXRlbUFyZ3M6ZnVuY3Rpb24oZCl7dmFyIGE9ZCBpbnN0YW5jZW9mIEV4dC5tZW51Lkl0ZW0sYj0hKGF8fGQgaW5zdGFuY2VvZiBFeHQubWVudS5TZXBhcmF0b3IpO3JldHVybntpc01lbnVJdGVtOmEsbmVlZHNJY29uOmImJihkLmljb258fGQuaWNvbkNscyksaWNvbjpkLmljb258fEV4dC5CTEFOS19JTUFHRV9VUkwsaWNvbkNsczoieC1tZW51LWl0ZW0taWNvbiAiKyhkLmljb25DbHN8fCIiKSxpdGVtSWQ6IngtbWVudS1lbC0iK2QuaWQsaXRlbUNsczoieC1tZW51LWxpc3QtaXRlbSAiLGFsdFRleHQ6ZC5hbHRUZXh0fHwiIn19LGlzVmFsaWRQYXJlbnQ6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYi5lbC51cCgibGkueC1tZW51LWxpc3QtaXRlbSIsNSkuZG9tLnBhcmVudE5vZGU9PT0oYS5kb218fGEpfSxvbkxheW91dDpmdW5jdGlvbihhLGIpe0V4dC5sYXlvdXQuTWVudUxheW91dC5zdXBlcmNsYXNzLm9uTGF5b3V0LmNhbGwodGhpcyxhLGIpO3RoaXMuZG9BdXRvU2l6ZSgpfSxkb0F1dG9TaXplOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5jb250YWluZXIsYT1jLndpZHRoO2lmKGMuZmxvYXRpbmcpe2lmKGEpe2Muc2V0V2lkdGgoYSl9ZWxzZXtpZihFeHQuaXNJRSl7Yy5zZXRXaWR0aChFeHQuaXNTdHJpY3QmJihFeHQuaXNJRTd8fEV4dC5pc0lFOHx8RXh0LmlzSUU5KT8iYXV0byI6Yy5taW5XaWR0aCk7dmFyIGQ9Yy5nZXRFbCgpLGI9ZC5kb20ub2Zmc2V0V2lkdGg7Yy5zZXRXaWR0aChjLmdldExheW91dFRhcmdldCgpLmdldFdpZHRoKCkrZC5nZXRGcmFtZVdpZHRoKCJsciIpKX19fX19KTtFeHQuQ29udGFpbmVyLkxBWU9VVFMubWVudT1FeHQubGF5b3V0Lk1lbnVMYXlvdXQ7RXh0LlZpZXdwb3J0PUV4dC5leHRlbmQoRXh0LkNvbnRhaW5lcix7aW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5WaWV3cG9ydC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaHRtbCIpWzBdLmNsYXNzTmFtZSs9IiB4LXZpZXdwb3J0Ijt0aGlzLmVsPUV4dC5nZXRCb2R5KCk7dGhpcy5lbC5zZXRIZWlnaHQ9RXh0LmVtcHR5Rm47dGhpcy5lbC5zZXRXaWR0aD1FeHQuZW1wdHlGbjt0aGlzLmVsLnNldFNpemU9RXh0LmVtcHR5Rm47dGhpcy5lbC5kb20uc2Nyb2xsPSJubyI7dGhpcy5hbGxvd0RvbU1vdmU9ZmFsc2U7dGhpcy5hdXRvV2lkdGg9dHJ1ZTt0aGlzLmF1dG9IZWlnaHQ9dHJ1ZTtFeHQuRXZlbnRNYW5hZ2VyLm9uV2luZG93UmVzaXplKHRoaXMuZmlyZVJlc2l6ZSx0aGlzKTt0aGlzLnJlbmRlclRvPXRoaXMuZWx9LGZpcmVSZXNpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmZpcmVFdmVudCgicmVzaXplIix0aGlzLGEsYixhLGIpfX0pO0V4dC5yZWcoInZpZXdwb3J0IixFeHQuVmlld3BvcnQpO0V4dC5QYW5lbD1FeHQuZXh0ZW5kKEV4dC5Db250YWluZXIse2Jhc2VDbHM6IngtcGFuZWwiLGNvbGxhcHNlZENsczoieC1wYW5lbC1jb2xsYXBzZWQiLG1hc2tEaXNhYmxlZDp0cnVlLGFuaW1Db2xsYXBzZTpFeHQuZW5hYmxlRngsaGVhZGVyQXNUZXh0OnRydWUsYnV0dG9uQWxpZ246InJpZ2h0Iixjb2xsYXBzZWQ6ZmFsc2UsY29sbGFwc2VGaXJzdDp0cnVlLG1pbkJ1dHRvbldpZHRoOjc1LGVsZW1lbnRzOiJib2R5IixwcmV2ZW50Qm9keVJlc2V0OmZhbHNlLHBhZGRpbmc6dW5kZWZpbmVkLHJlc2l6ZUV2ZW50OiJib2R5cmVzaXplIix0b29sVGFyZ2V0OiJoZWFkZXIiLGNvbGxhcHNlRWw6ImJ3cmFwIixzbGlkZUFuY2hvcjoidCIsZGlzYWJsZWRDbGFzczoiIixkZWZlckhlaWdodDp0cnVlLGV4cGFuZERlZmF1bHRzOntkdXJhdGlvbjowLjI1fSxjb2xsYXBzZURlZmF1bHRzOntkdXJhdGlvbjowLjI1fSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LlBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJib2R5cmVzaXplIiwidGl0bGVjaGFuZ2UiLCJpY29uY2hhbmdlIiwiY29sbGFwc2UiLCJleHBhbmQiLCJiZWZvcmVjb2xsYXBzZSIsImJlZm9yZWV4cGFuZCIsImJlZm9yZWNsb3NlIiwiY2xvc2UiLCJhY3RpdmF0ZSIsImRlYWN0aXZhdGUiKTtpZih0aGlzLnVuc3R5bGVkKXt0aGlzLmJhc2VDbHM9IngtcGxhaW4ifXRoaXMudG9vbGJhcnM9W107aWYodGhpcy50YmFyKXt0aGlzLmVsZW1lbnRzKz0iLHRiYXIiO3RoaXMudG9wVG9vbGJhcj10aGlzLmNyZWF0ZVRvb2xiYXIodGhpcy50YmFyKTt0aGlzLnRiYXI9bnVsbH1pZih0aGlzLmJiYXIpe3RoaXMuZWxlbWVudHMrPSIsYmJhciI7dGhpcy5ib3R0b21Ub29sYmFyPXRoaXMuY3JlYXRlVG9vbGJhcih0aGlzLmJiYXIpO3RoaXMuYmJhcj1udWxsfWlmKHRoaXMuaGVhZGVyPT09dHJ1ZSl7dGhpcy5lbGVtZW50cys9IixoZWFkZXIiO3RoaXMuaGVhZGVyPW51bGx9ZWxzZXtpZih0aGlzLmhlYWRlckNmZ3x8KHRoaXMudGl0bGUmJnRoaXMuaGVhZGVyIT09ZmFsc2UpKXt0aGlzLmVsZW1lbnRzKz0iLGhlYWRlciJ9fWlmKHRoaXMuZm9vdGVyQ2ZnfHx0aGlzLmZvb3Rlcj09PXRydWUpe3RoaXMuZWxlbWVudHMrPSIsZm9vdGVyIjt0aGlzLmZvb3Rlcj1udWxsfWlmKHRoaXMuYnV0dG9ucyl7dGhpcy5mYmFyPXRoaXMuYnV0dG9uczt0aGlzLmJ1dHRvbnM9bnVsbH1pZih0aGlzLmZiYXIpe3RoaXMuY3JlYXRlRmJhcih0aGlzLmZiYXIpfWlmKHRoaXMuYXV0b0xvYWQpe3RoaXMub24oInJlbmRlciIsdGhpcy5kb0F1dG9Mb2FkLHRoaXMse2RlbGF5OjEwfSl9fSxjcmVhdGVGYmFyOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubWluQnV0dG9uV2lkdGg7dGhpcy5lbGVtZW50cys9Iixmb290ZXIiO3RoaXMuZmJhcj10aGlzLmNyZWF0ZVRvb2xiYXIoYix7YnV0dG9uQWxpZ246dGhpcy5idXR0b25BbGlnbix0b29sYmFyQ2xzOiJ4LXBhbmVsLWZiYXIiLGVuYWJsZU92ZXJmbG93OmZhbHNlLGRlZmF1bHRzOmZ1bmN0aW9uKGQpe3JldHVybnttaW5XaWR0aDpkLm1pbldpZHRofHxhfX19KTt0aGlzLmZiYXIuaXRlbXMuZWFjaChmdW5jdGlvbihkKXtkLm1pbldpZHRoPWQubWluV2lkdGh8fHRoaXMubWluQnV0dG9uV2lkdGh9LHRoaXMpO3RoaXMuYnV0dG9ucz10aGlzLmZiYXIuaXRlbXMuaXRlbXN9LGNyZWF0ZVRvb2xiYXI6ZnVuY3Rpb24oYixjKXt2YXIgYTtpZihFeHQuaXNBcnJheShiKSl7Yj17aXRlbXM6Yn19YT1iLmV2ZW50cz9FeHQuYXBwbHkoYixjKTp0aGlzLmNyZWF0ZUNvbXBvbmVudChFeHQuYXBwbHkoe30sYixjKSwidG9vbGJhciIpO3RoaXMudG9vbGJhcnMucHVzaChhKTtyZXR1cm4gYX0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbihhLGMpe2lmKHRoaXNbYV0pe2MuYXBwZW5kQ2hpbGQodGhpc1thXS5kb20pO3JldHVybn1pZihhPT09ImJ3cmFwInx8dGhpcy5lbGVtZW50cy5pbmRleE9mKGEpIT0tMSl7aWYodGhpc1thKyJDZmciXSl7dGhpc1thXT1FeHQuZmx5KGMpLmNyZWF0ZUNoaWxkKHRoaXNbYSsiQ2ZnIl0pfWVsc2V7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7Yi5jbGFzc05hbWU9dGhpc1thKyJDbHMiXTt0aGlzW2FdPUV4dC5nZXQoYy5hcHBlbmRDaGlsZChiKSl9aWYodGhpc1thKyJDc3NDbGFzcyJdKXt0aGlzW2FdLmFkZENsYXNzKHRoaXNbYSsiQ3NzQ2xhc3MiXSl9aWYodGhpc1thKyJTdHlsZSJdKXt0aGlzW2FdLmFwcGx5U3R5bGVzKHRoaXNbYSsiU3R5bGUiXSl9fX0sb25SZW5kZXI6ZnVuY3Rpb24oZyxlKXtFeHQuUGFuZWwuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsZyxlKTt0aGlzLmNyZWF0ZUNsYXNzZXMoKTt2YXIgYT10aGlzLmVsLGg9YS5kb20sayxpO2lmKHRoaXMuY29sbGFwc2libGUmJiF0aGlzLmhpZGVDb2xsYXBzZVRvb2wpe3RoaXMudG9vbHM9dGhpcy50b29scz90aGlzLnRvb2xzLnNsaWNlKDApOltdO3RoaXMudG9vbHNbdGhpcy5jb2xsYXBzZUZpcnN0PyJ1bnNoaWZ0IjoicHVzaCJdKHtpZDoidG9nZ2xlIixoYW5kbGVyOnRoaXMudG9nZ2xlQ29sbGFwc2Usc2NvcGU6dGhpc30pfWlmKHRoaXMudG9vbHMpe2k9dGhpcy50b29sczt0aGlzLmVsZW1lbnRzKz0odGhpcy5oZWFkZXIhPT1mYWxzZSk/IixoZWFkZXIiOiIifXRoaXMudG9vbHM9e307YS5hZGRDbGFzcyh0aGlzLmJhc2VDbHMpO2lmKGguZmlyc3RDaGlsZCl7dGhpcy5oZWFkZXI9YS5kb3duKCIuIit0aGlzLmhlYWRlckNscyk7dGhpcy5id3JhcD1hLmRvd24oIi4iK3RoaXMuYndyYXBDbHMpO3ZhciBqPXRoaXMuYndyYXA/dGhpcy5id3JhcDphO3RoaXMudGJhcj1qLmRvd24oIi4iK3RoaXMudGJhckNscyk7dGhpcy5ib2R5PWouZG93bigiLiIrdGhpcy5ib2R5Q2xzKTt0aGlzLmJiYXI9ai5kb3duKCIuIit0aGlzLmJiYXJDbHMpO3RoaXMuZm9vdGVyPWouZG93bigiLiIrdGhpcy5mb290ZXJDbHMpO3RoaXMuZnJvbU1hcmt1cD10cnVlfWlmKHRoaXMucHJldmVudEJvZHlSZXNldD09PXRydWUpe2EuYWRkQ2xhc3MoIngtcGFuZWwtcmVzZXQiKX1pZih0aGlzLmNscyl7YS5hZGRDbGFzcyh0aGlzLmNscyl9aWYodGhpcy5idXR0b25zKXt0aGlzLmVsZW1lbnRzKz0iLGZvb3RlciJ9aWYodGhpcy5mcmFtZSl7YS5pbnNlcnRIdG1sKCJhZnRlckJlZ2luIixTdHJpbmcuZm9ybWF0KEV4dC5FbGVtZW50LmJveE1hcmt1cCx0aGlzLmJhc2VDbHMpKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImhlYWRlciIsaC5maXJzdENoaWxkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCk7dGhpcy5jcmVhdGVFbGVtZW50KCJid3JhcCIsaCk7az10aGlzLmJ3cmFwLmRvbTt2YXIgYz1oLmNoaWxkTm9kZXNbMV0sYj1oLmNoaWxkTm9kZXNbMl07ay5hcHBlbmRDaGlsZChjKTtrLmFwcGVuZENoaWxkKGIpO3ZhciBsPWsuZmlyc3RDaGlsZC5maXJzdENoaWxkLmZpcnN0Q2hpbGQ7dGhpcy5jcmVhdGVFbGVtZW50KCJ0YmFyIixsKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImJvZHkiLGwpO3RoaXMuY3JlYXRlRWxlbWVudCgiYmJhciIsbCk7dGhpcy5jcmVhdGVFbGVtZW50KCJmb290ZXIiLGsubGFzdENoaWxkLmZpcnN0Q2hpbGQuZmlyc3RDaGlsZCk7aWYoIXRoaXMuZm9vdGVyKXt0aGlzLmJ3cmFwLmRvbS5sYXN0Q2hpbGQuY2xhc3NOYW1lKz0iIHgtcGFuZWwtbm9mb290ZXIifXRoaXMuZnQ9RXh0LmdldCh0aGlzLmJ3cmFwLmRvbS5sYXN0Q2hpbGQpO3RoaXMubWM9RXh0LmdldChsKX1lbHNle3RoaXMuY3JlYXRlRWxlbWVudCgiaGVhZGVyIixoKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImJ3cmFwIixoKTtrPXRoaXMuYndyYXAuZG9tO3RoaXMuY3JlYXRlRWxlbWVudCgidGJhciIsayk7dGhpcy5jcmVhdGVFbGVtZW50KCJib2R5IixrKTt0aGlzLmNyZWF0ZUVsZW1lbnQoImJiYXIiLGspO3RoaXMuY3JlYXRlRWxlbWVudCgiZm9vdGVyIixrKTtpZighdGhpcy5oZWFkZXIpe3RoaXMuYm9keS5hZGRDbGFzcyh0aGlzLmJvZHlDbHMrIi1ub2hlYWRlciIpO2lmKHRoaXMudGJhcil7dGhpcy50YmFyLmFkZENsYXNzKHRoaXMudGJhckNscysiLW5vaGVhZGVyIil9fX1pZihFeHQuaXNEZWZpbmVkKHRoaXMucGFkZGluZykpe3RoaXMuYm9keS5zZXRTdHlsZSgicGFkZGluZyIsdGhpcy5ib2R5LmFkZFVuaXRzKHRoaXMucGFkZGluZykpfWlmKHRoaXMuYm9yZGVyPT09ZmFsc2Upe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5iYXNlQ2xzKyItbm9ib3JkZXIiKTt0aGlzLmJvZHkuYWRkQ2xhc3ModGhpcy5ib2R5Q2xzKyItbm9ib3JkZXIiKTtpZih0aGlzLmhlYWRlcil7dGhpcy5oZWFkZXIuYWRkQ2xhc3ModGhpcy5oZWFkZXJDbHMrIi1ub2JvcmRlciIpfWlmKHRoaXMuZm9vdGVyKXt0aGlzLmZvb3Rlci5hZGRDbGFzcyh0aGlzLmZvb3RlckNscysiLW5vYm9yZGVyIil9aWYodGhpcy50YmFyKXt0aGlzLnRiYXIuYWRkQ2xhc3ModGhpcy50YmFyQ2xzKyItbm9ib3JkZXIiKX1pZih0aGlzLmJiYXIpe3RoaXMuYmJhci5hZGRDbGFzcyh0aGlzLmJiYXJDbHMrIi1ub2JvcmRlciIpfX1pZih0aGlzLmJvZHlCb3JkZXI9PT1mYWxzZSl7dGhpcy5ib2R5LmFkZENsYXNzKHRoaXMuYm9keUNscysiLW5vYm9yZGVyIil9dGhpcy5id3JhcC5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTtpZih0aGlzLmhlYWRlcil7dGhpcy5oZWFkZXIudW5zZWxlY3RhYmxlKCk7aWYodGhpcy5oZWFkZXJBc1RleHQpe3RoaXMuaGVhZGVyLmRvbS5pbm5lckhUTUw9JzxzcGFuIGNsYXNzPSInK3RoaXMuaGVhZGVyVGV4dENscysnIj4nK3RoaXMuaGVhZGVyLmRvbS5pbm5lckhUTUwrIjwvc3Bhbj4iO2lmKHRoaXMuaWNvbkNscyl7dGhpcy5zZXRJY29uQ2xhc3ModGhpcy5pY29uQ2xzKX19fWlmKHRoaXMuZmxvYXRpbmcpe3RoaXMubWFrZUZsb2F0aW5nKHRoaXMuZmxvYXRpbmcpfWlmKHRoaXMuY29sbGFwc2libGUmJnRoaXMudGl0bGVDb2xsYXBzZSYmdGhpcy5oZWFkZXIpe3RoaXMubW9uKHRoaXMuaGVhZGVyLCJjbGljayIsdGhpcy50b2dnbGVDb2xsYXBzZSx0aGlzKTt0aGlzLmhlYWRlci5zZXRTdHlsZSgiY3Vyc29yIiwicG9pbnRlciIpfWlmKGkpe3RoaXMuYWRkVG9vbC5hcHBseSh0aGlzLGkpfWlmKHRoaXMuZmJhcil7dGhpcy5mb290ZXIuYWRkQ2xhc3MoIngtcGFuZWwtYnRucyIpO3RoaXMuZmJhci5vd25lckN0PXRoaXM7dGhpcy5mYmFyLnJlbmRlcih0aGlzLmZvb3Rlcik7dGhpcy5mb290ZXIuY3JlYXRlQ2hpbGQoe2NsczoieC1jbGVhciJ9KX1pZih0aGlzLnRiYXImJnRoaXMudG9wVG9vbGJhcil7dGhpcy50b3BUb29sYmFyLm93bmVyQ3Q9dGhpczt0aGlzLnRvcFRvb2xiYXIucmVuZGVyKHRoaXMudGJhcil9aWYodGhpcy5iYmFyJiZ0aGlzLmJvdHRvbVRvb2xiYXIpe3RoaXMuYm90dG9tVG9vbGJhci5vd25lckN0PXRoaXM7dGhpcy5ib3R0b21Ub29sYmFyLnJlbmRlcih0aGlzLmJiYXIpfX0sc2V0SWNvbkNsYXNzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuaWNvbkNsczt0aGlzLmljb25DbHM9YjtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLmhlYWRlcil7aWYodGhpcy5mcmFtZSl7dGhpcy5oZWFkZXIuYWRkQ2xhc3MoIngtcGFuZWwtaWNvbiIpO3RoaXMuaGVhZGVyLnJlcGxhY2VDbGFzcyhhLHRoaXMuaWNvbkNscyl9ZWxzZXt2YXIgZT10aGlzLmhlYWRlcixjPWUuY2hpbGQoImltZy54LXBhbmVsLWlubGluZS1pY29uIik7aWYoYyl7RXh0LmZseShjKS5yZXBsYWNlQ2xhc3MoYSx0aGlzLmljb25DbHMpfWVsc2V7dmFyIGQ9ZS5jaGlsZCgic3Bhbi4iK3RoaXMuaGVhZGVyVGV4dENscyk7aWYoZCl7RXh0LkRvbUhlbHBlci5pbnNlcnRCZWZvcmUoZC5kb20se3RhZzoiaW1nIixhbHQ6IiIsc3JjOkV4dC5CTEFOS19JTUFHRV9VUkwsY2xzOiJ4LXBhbmVsLWlubGluZS1pY29uICIrdGhpcy5pY29uQ2xzfSl9fX19dGhpcy5maXJlRXZlbnQoImljb25jaGFuZ2UiLHRoaXMsYixhKX0sbWFrZUZsb2F0aW5nOmZ1bmN0aW9uKGEpe3RoaXMuZmxvYXRpbmc9dHJ1ZTt0aGlzLmVsPW5ldyBFeHQuTGF5ZXIoRXh0LmFwcGx5KHt9LGEse3NoYWRvdzpFeHQuaXNEZWZpbmVkKHRoaXMuc2hhZG93KT90aGlzLnNoYWRvdzoic2lkZXMiLHNoYWRvd09mZnNldDp0aGlzLnNoYWRvd09mZnNldCxjb25zdHJhaW46ZmFsc2Usc2hpbTp0aGlzLnNoaW09PT1mYWxzZT9mYWxzZTp1bmRlZmluZWR9KSx0aGlzLmVsKX0sZ2V0VG9wVG9vbGJhcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvcFRvb2xiYXJ9LGdldEJvdHRvbVRvb2xiYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib3R0b21Ub29sYmFyfSxnZXRGb290ZXJUb29sYmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmJhcn0sYWRkQnV0dG9uOmZ1bmN0aW9uKGEsYyxiKXtpZighdGhpcy5mYmFyKXt0aGlzLmNyZWF0ZUZiYXIoW10pfWlmKGMpe2lmKEV4dC5pc1N0cmluZyhhKSl7YT17dGV4dDphfX1hPUV4dC5hcHBseSh7aGFuZGxlcjpjLHNjb3BlOmJ9LGEpfXJldHVybiB0aGlzLmZiYXIuYWRkKGEpfSxhZGRUb29sOmZ1bmN0aW9uKCl7aWYoIXRoaXMucmVuZGVyZWQpe2lmKCF0aGlzLnRvb2xzKXt0aGlzLnRvb2xzPVtdfUV4dC5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnRvb2xzLnB1c2goYSl9LHRoaXMpO3JldHVybn1pZighdGhpc1t0aGlzLnRvb2xUYXJnZXRdKXtyZXR1cm59aWYoIXRoaXMudG9vbFRlbXBsYXRlKXt2YXIgaD1uZXcgRXh0LlRlbXBsYXRlKCc8ZGl2IGNsYXNzPSJ4LXRvb2wgeC10b29sLXtpZH0iPiYjMTYwOzwvZGl2PicpO2guZGlzYWJsZUZvcm1hdHM9dHJ1ZTtoLmNvbXBpbGUoKTtFeHQuUGFuZWwucHJvdG90eXBlLnRvb2xUZW1wbGF0ZT1ofWZvcih2YXIgZz0wLGQ9YXJndW1lbnRzLGM9ZC5sZW5ndGg7ZzxjO2crKyl7dmFyIGI9ZFtnXTtpZighdGhpcy50b29sc1tiLmlkXSl7dmFyIGo9IngtdG9vbC0iK2IuaWQrIi1vdmVyIjt2YXIgZT10aGlzLnRvb2xUZW1wbGF0ZS5pbnNlcnRGaXJzdCh0aGlzW3RoaXMudG9vbFRhcmdldF0sYix0cnVlKTt0aGlzLnRvb2xzW2IuaWRdPWU7ZS5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTt0aGlzLm1vbihlLCJjbGljayIsdGhpcy5jcmVhdGVUb29sSGFuZGxlcihlLGIsaix0aGlzKSk7aWYoYi5vbil7dGhpcy5tb24oZSxiLm9uKX1pZihiLmhpZGRlbil7ZS5oaWRlKCl9aWYoYi5xdGlwKXtpZihFeHQuaXNPYmplY3QoYi5xdGlwKSl7RXh0LlF1aWNrVGlwcy5yZWdpc3RlcihFeHQuYXBwbHkoe3RhcmdldDplLmlkfSxiLnF0aXApKX1lbHNle2UuZG9tLnF0aXA9Yi5xdGlwfX1lLmFkZENsYXNzT25PdmVyKGopfX19LG9uTGF5b3V0OmZ1bmN0aW9uKGIsYSl7RXh0LlBhbmVsLnN1cGVyY2xhc3Mub25MYXlvdXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuaGFzTGF5b3V0JiZ0aGlzLnRvb2xiYXJzLmxlbmd0aD4wKXtFeHQuZWFjaCh0aGlzLnRvb2xiYXJzLGZ1bmN0aW9uKGMpe2MuZG9MYXlvdXQodW5kZWZpbmVkLGEpfSk7dGhpcy5zeW5jSGVpZ2h0KCl9fSxzeW5jSGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy50b29sYmFySGVpZ2h0LGM9dGhpcy5ib2R5LGE9dGhpcy5sYXN0U2l6ZS5oZWlnaHQsZDtpZih0aGlzLmF1dG9IZWlnaHR8fCFFeHQuaXNEZWZpbmVkKGEpfHxhPT0iYXV0byIpe3JldHVybn1pZihiIT10aGlzLmdldFRvb2xiYXJIZWlnaHQoKSl7Yj1NYXRoLm1heCgwLGEtdGhpcy5nZXRGcmFtZUhlaWdodCgpKTtjLnNldEhlaWdodChiKTtkPWMuZ2V0U2l6ZSgpO3RoaXMudG9vbGJhckhlaWdodD10aGlzLmdldFRvb2xiYXJIZWlnaHQoKTt0aGlzLm9uQm9keVJlc2l6ZShkLndpZHRoLGQuaGVpZ2h0KX19LG9uU2hvdzpmdW5jdGlvbigpe2lmKHRoaXMuZmxvYXRpbmcpe3JldHVybiB0aGlzLmVsLnNob3coKX1FeHQuUGFuZWwuc3VwZXJjbGFzcy5vblNob3cuY2FsbCh0aGlzKX0sb25IaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5mbG9hdGluZyl7cmV0dXJuIHRoaXMuZWwuaGlkZSgpfUV4dC5QYW5lbC5zdXBlcmNsYXNzLm9uSGlkZS5jYWxsKHRoaXMpfSxjcmVhdGVUb29sSGFuZGxlcjpmdW5jdGlvbihjLGEsZCxiKXtyZXR1cm4gZnVuY3Rpb24oZyl7Yy5yZW1vdmVDbGFzcyhkKTtpZihhLnN0b3BFdmVudCE9PWZhbHNlKXtnLnN0b3BFdmVudCgpfWlmKGEuaGFuZGxlcil7YS5oYW5kbGVyLmNhbGwoYS5zY29wZXx8YyxnLGMsYixhKX19fSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe2lmKHRoaXMuZmxvYXRpbmcmJiF0aGlzLmhpZGRlbil7dGhpcy5lbC5zaG93KCl9aWYodGhpcy50aXRsZSl7dGhpcy5zZXRUaXRsZSh0aGlzLnRpdGxlKX1FeHQuUGFuZWwuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO2lmKHRoaXMuY29sbGFwc2VkKXt0aGlzLmNvbGxhcHNlZD1mYWxzZTt0aGlzLmNvbGxhcHNlKGZhbHNlKX10aGlzLmluaXRFdmVudHMoKX0sZ2V0S2V5TWFwOmZ1bmN0aW9uKCl7aWYoIXRoaXMua2V5TWFwKXt0aGlzLmtleU1hcD1uZXcgRXh0LktleU1hcCh0aGlzLmVsLHRoaXMua2V5cyl9cmV0dXJuIHRoaXMua2V5TWFwfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7aWYodGhpcy5rZXlzKXt0aGlzLmdldEtleU1hcCgpfWlmKHRoaXMuZHJhZ2dhYmxlKXt0aGlzLmluaXREcmFnZ2FibGUoKX1pZih0aGlzLnRvb2xiYXJzLmxlbmd0aD4wKXtFeHQuZWFjaCh0aGlzLnRvb2xiYXJzLGZ1bmN0aW9uKGEpe2EuZG9MYXlvdXQoKTthLm9uKHtzY29wZTp0aGlzLGFmdGVybGF5b3V0OnRoaXMuc3luY0hlaWdodCxyZW1vdmU6dGhpcy5zeW5jSGVpZ2h0fSl9LHRoaXMpO3RoaXMuc3luY0hlaWdodCgpfX0saW5pdERyYWdnYWJsZTpmdW5jdGlvbigpe3RoaXMuZGQ9bmV3IEV4dC5QYW5lbC5ERCh0aGlzLEV4dC5pc0Jvb2xlYW4odGhpcy5kcmFnZ2FibGUpP251bGw6dGhpcy5kcmFnZ2FibGUpfSxiZWZvcmVFZmZlY3Q6ZnVuY3Rpb24oYSl7aWYodGhpcy5mbG9hdGluZyl7dGhpcy5lbC5iZWZvcmVBY3Rpb24oKX1pZihhIT09ZmFsc2Upe3RoaXMuZWwuYWRkQ2xhc3MoIngtcGFuZWwtYW5pbWF0ZWQiKX19LGFmdGVyRWZmZWN0OmZ1bmN0aW9uKGEpe3RoaXMuc3luY1NoYWRvdygpO3RoaXMuZWwucmVtb3ZlQ2xhc3MoIngtcGFuZWwtYW5pbWF0ZWQiKX0sY3JlYXRlRWZmZWN0OmZ1bmN0aW9uKGMsYixkKXt2YXIgZT17c2NvcGU6ZCxibG9jazp0cnVlfTtpZihjPT09dHJ1ZSl7ZS5jYWxsYmFjaz1iO3JldHVybiBlfWVsc2V7aWYoIWMuY2FsbGJhY2spe2UuY2FsbGJhY2s9Yn1lbHNle2UuY2FsbGJhY2s9ZnVuY3Rpb24oKXtiLmNhbGwoZCk7RXh0LmNhbGxiYWNrKGMuY2FsbGJhY2ssYy5zY29wZSl9fX1yZXR1cm4gRXh0LmFwcGx5SWYoZSxjKX0sY29sbGFwc2U6ZnVuY3Rpb24oYil7aWYodGhpcy5jb2xsYXBzZWR8fHRoaXMuZWwuaGFzRnhCbG9jaygpfHx0aGlzLmZpcmVFdmVudCgiYmVmb3JlY29sbGFwc2UiLHRoaXMsYik9PT1mYWxzZSl7cmV0dXJufXZhciBhPWI9PT10cnVlfHwoYiE9PWZhbHNlJiZ0aGlzLmFuaW1Db2xsYXBzZSk7dGhpcy5iZWZvcmVFZmZlY3QoYSk7dGhpcy5vbkNvbGxhcHNlKGEsYik7cmV0dXJuIHRoaXN9LG9uQ29sbGFwc2U6ZnVuY3Rpb24oYSxiKXtpZihhKXt0aGlzW3RoaXMuY29sbGFwc2VFbF0uc2xpZGVPdXQodGhpcy5zbGlkZUFuY2hvcixFeHQuYXBwbHkodGhpcy5jcmVhdGVFZmZlY3QoYnx8dHJ1ZSx0aGlzLmFmdGVyQ29sbGFwc2UsdGhpcyksdGhpcy5jb2xsYXBzZURlZmF1bHRzKSl9ZWxzZXt0aGlzW3RoaXMuY29sbGFwc2VFbF0uaGlkZSh0aGlzLmhpZGVNb2RlKTt0aGlzLmFmdGVyQ29sbGFwc2UoZmFsc2UpfX0sYWZ0ZXJDb2xsYXBzZTpmdW5jdGlvbihhKXt0aGlzLmNvbGxhcHNlZD10cnVlO3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5jb2xsYXBzZWRDbHMpO2lmKGEhPT1mYWxzZSl7dGhpc1t0aGlzLmNvbGxhcHNlRWxdLmhpZGUodGhpcy5oaWRlTW9kZSl9dGhpcy5hZnRlckVmZmVjdChhKTt0aGlzLmNhc2NhZGUoZnVuY3Rpb24oYil7aWYoYi5sYXN0U2l6ZSl7Yi5sYXN0U2l6ZT17d2lkdGg6dW5kZWZpbmVkLGhlaWdodDp1bmRlZmluZWR9fX0pO3RoaXMuZmlyZUV2ZW50KCJjb2xsYXBzZSIsdGhpcyl9LGV4cGFuZDpmdW5jdGlvbihiKXtpZighdGhpcy5jb2xsYXBzZWR8fHRoaXMuZWwuaGFzRnhCbG9jaygpfHx0aGlzLmZpcmVFdmVudCgiYmVmb3JlZXhwYW5kIix0aGlzLGIpPT09ZmFsc2Upe3JldHVybn12YXIgYT1iPT09dHJ1ZXx8KGIhPT1mYWxzZSYmdGhpcy5hbmltQ29sbGFwc2UpO3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5jb2xsYXBzZWRDbHMpO3RoaXMuYmVmb3JlRWZmZWN0KGEpO3RoaXMub25FeHBhbmQoYSxiKTtyZXR1cm4gdGhpc30sb25FeHBhbmQ6ZnVuY3Rpb24oYSxiKXtpZihhKXt0aGlzW3RoaXMuY29sbGFwc2VFbF0uc2xpZGVJbih0aGlzLnNsaWRlQW5jaG9yLEV4dC5hcHBseSh0aGlzLmNyZWF0ZUVmZmVjdChifHx0cnVlLHRoaXMuYWZ0ZXJFeHBhbmQsdGhpcyksdGhpcy5leHBhbmREZWZhdWx0cykpfWVsc2V7dGhpc1t0aGlzLmNvbGxhcHNlRWxdLnNob3codGhpcy5oaWRlTW9kZSk7dGhpcy5hZnRlckV4cGFuZChmYWxzZSl9fSxhZnRlckV4cGFuZDpmdW5jdGlvbihhKXt0aGlzLmNvbGxhcHNlZD1mYWxzZTtpZihhIT09ZmFsc2Upe3RoaXNbdGhpcy5jb2xsYXBzZUVsXS5zaG93KHRoaXMuaGlkZU1vZGUpfXRoaXMuYWZ0ZXJFZmZlY3QoYSk7aWYodGhpcy5kZWZlckxheW91dCl7ZGVsZXRlIHRoaXMuZGVmZXJMYXlvdXQ7dGhpcy5kb0xheW91dCh0cnVlKX10aGlzLmZpcmVFdmVudCgiZXhwYW5kIix0aGlzKX0sdG9nZ2xlQ29sbGFwc2U6ZnVuY3Rpb24oYSl7dGhpc1t0aGlzLmNvbGxhcHNlZD8iZXhwYW5kIjoiY29sbGFwc2UiXShhKTtyZXR1cm4gdGhpc30sb25EaXNhYmxlOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCYmdGhpcy5tYXNrRGlzYWJsZWQpe3RoaXMuZWwubWFzaygpfUV4dC5QYW5lbC5zdXBlcmNsYXNzLm9uRGlzYWJsZS5jYWxsKHRoaXMpfSxvbkVuYWJsZTpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQmJnRoaXMubWFza0Rpc2FibGVkKXt0aGlzLmVsLnVubWFzaygpfUV4dC5QYW5lbC5zdXBlcmNsYXNzLm9uRW5hYmxlLmNhbGwodGhpcyl9LG9uUmVzaXplOmZ1bmN0aW9uKGcsZCxjLGUpe3ZhciBhPWcsYj1kO2lmKEV4dC5pc0RlZmluZWQoYSl8fEV4dC5pc0RlZmluZWQoYikpe2lmKCF0aGlzLmNvbGxhcHNlZCl7aWYoRXh0LmlzTnVtYmVyKGEpKXt0aGlzLmJvZHkuc2V0V2lkdGgoYT10aGlzLmFkanVzdEJvZHlXaWR0aChhLXRoaXMuZ2V0RnJhbWVXaWR0aCgpKSl9ZWxzZXtpZihhPT0iYXV0byIpe2E9dGhpcy5ib2R5LnNldFdpZHRoKCJhdXRvIikuZG9tLm9mZnNldFdpZHRofWVsc2V7YT10aGlzLmJvZHkuZG9tLm9mZnNldFdpZHRofX1pZih0aGlzLnRiYXIpe3RoaXMudGJhci5zZXRXaWR0aChhKTtpZih0aGlzLnRvcFRvb2xiYXIpe3RoaXMudG9wVG9vbGJhci5zZXRTaXplKGEpfX1pZih0aGlzLmJiYXIpe3RoaXMuYmJhci5zZXRXaWR0aChhKTtpZih0aGlzLmJvdHRvbVRvb2xiYXIpe3RoaXMuYm90dG9tVG9vbGJhci5zZXRTaXplKGEpO2lmKEV4dC5pc0lFKXt0aGlzLmJiYXIuc2V0U3R5bGUoInBvc2l0aW9uIiwic3RhdGljIik7dGhpcy5iYmFyLnNldFN0eWxlKCJwb3NpdGlvbiIsIiIpfX19aWYodGhpcy5mb290ZXIpe3RoaXMuZm9vdGVyLnNldFdpZHRoKGEpO2lmKHRoaXMuZmJhcil7dGhpcy5mYmFyLnNldFNpemUoRXh0LmlzSUU/KGEtdGhpcy5mb290ZXIuZ2V0RnJhbWVXaWR0aCgibHIiKSk6ImF1dG8iKX19aWYoRXh0LmlzTnVtYmVyKGIpKXtiPU1hdGgubWF4KDAsYi10aGlzLmdldEZyYW1lSGVpZ2h0KCkpO3RoaXMuYm9keS5zZXRIZWlnaHQoYil9ZWxzZXtpZihiPT0iYXV0byIpe3RoaXMuYm9keS5zZXRIZWlnaHQoYil9fWlmKHRoaXMuZGlzYWJsZWQmJnRoaXMuZWwuX21hc2spe3RoaXMuZWwuX21hc2suc2V0U2l6ZSh0aGlzLmVsLmRvbS5jbGllbnRXaWR0aCx0aGlzLmVsLmdldEhlaWdodCgpKX19ZWxzZXt0aGlzLnF1ZXVlZEJvZHlTaXplPXt3aWR0aDphLGhlaWdodDpifTtpZighdGhpcy5xdWV1ZWRFeHBhbmQmJnRoaXMuYWxsb3dRdWV1ZWRFeHBhbmQhPT1mYWxzZSl7dGhpcy5xdWV1ZWRFeHBhbmQ9dHJ1ZTt0aGlzLm9uKCJleHBhbmQiLGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMucXVldWVkRXhwYW5kO3RoaXMub25SZXNpemUodGhpcy5xdWV1ZWRCb2R5U2l6ZS53aWR0aCx0aGlzLnF1ZXVlZEJvZHlTaXplLmhlaWdodCl9LHRoaXMse3NpbmdsZTp0cnVlfSl9fXRoaXMub25Cb2R5UmVzaXplKGEsYil9dGhpcy5zeW5jU2hhZG93KCk7RXh0LlBhbmVsLnN1cGVyY2xhc3Mub25SZXNpemUuY2FsbCh0aGlzLGcsZCxjLGUpfSxvbkJvZHlSZXNpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLmZpcmVFdmVudCgiYm9keXJlc2l6ZSIsdGhpcyxhLGIpfSxnZXRUb29sYmFySGVpZ2h0OmZ1bmN0aW9uKCl7dmFyIGE9MDtpZih0aGlzLnJlbmRlcmVkKXtFeHQuZWFjaCh0aGlzLnRvb2xiYXJzLGZ1bmN0aW9uKGIpe2ErPWIuZ2V0SGVpZ2h0KCl9LHRoaXMpfXJldHVybiBhfSxhZGp1c3RCb2R5SGVpZ2h0OmZ1bmN0aW9uKGEpe3JldHVybiBhfSxhZGp1c3RCb2R5V2lkdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LG9uUG9zaXRpb246ZnVuY3Rpb24oKXt0aGlzLnN5bmNTaGFkb3coKX0sZ2V0RnJhbWVXaWR0aDpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZWwuZ2V0RnJhbWVXaWR0aCgibHIiKSt0aGlzLmJ3cmFwLmdldEZyYW1lV2lkdGgoImxyIik7aWYodGhpcy5mcmFtZSl7dmFyIGE9dGhpcy5id3JhcC5kb20uZmlyc3RDaGlsZDtiKz0oRXh0LmZseShhKS5nZXRGcmFtZVdpZHRoKCJsIikrRXh0LmZseShhLmZpcnN0Q2hpbGQpLmdldEZyYW1lV2lkdGgoInIiKSk7Yis9dGhpcy5tYy5nZXRGcmFtZVdpZHRoKCJsciIpfXJldHVybiBifSxnZXRGcmFtZUhlaWdodDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWwuZ2V0RnJhbWVXaWR0aCgidGIiKSt0aGlzLmJ3cmFwLmdldEZyYW1lV2lkdGgoInRiIik7YSs9KHRoaXMudGJhcj90aGlzLnRiYXIuZ2V0SGVpZ2h0KCk6MCkrKHRoaXMuYmJhcj90aGlzLmJiYXIuZ2V0SGVpZ2h0KCk6MCk7aWYodGhpcy5mcmFtZSl7YSs9dGhpcy5lbC5kb20uZmlyc3RDaGlsZC5vZmZzZXRIZWlnaHQrdGhpcy5mdC5kb20ub2Zmc2V0SGVpZ2h0K3RoaXMubWMuZ2V0RnJhbWVXaWR0aCgidGIiKX1lbHNle2ErPSh0aGlzLmhlYWRlcj90aGlzLmhlYWRlci5nZXRIZWlnaHQoKTowKSsodGhpcy5mb290ZXI/dGhpcy5mb290ZXIuZ2V0SGVpZ2h0KCk6MCl9cmV0dXJuIGF9LGdldElubmVyV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTaXplKCkud2lkdGgtdGhpcy5nZXRGcmFtZVdpZHRoKCl9LGdldElubmVySGVpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keS5nZXRIZWlnaHQoKX0sc3luY1NoYWRvdzpmdW5jdGlvbigpe2lmKHRoaXMuZmxvYXRpbmcpe3RoaXMuZWwuc3luYyh0cnVlKX19LGdldExheW91dFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHl9LGdldENvbnRlbnRUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5fSxzZXRUaXRsZTpmdW5jdGlvbihiLGEpe3RoaXMudGl0bGU9YjtpZih0aGlzLmhlYWRlciYmdGhpcy5oZWFkZXJBc1RleHQpe3RoaXMuaGVhZGVyLmNoaWxkKCJzcGFuIikudXBkYXRlKGIpfWlmKGEpe3RoaXMuc2V0SWNvbkNsYXNzKGEpfXRoaXMuZmlyZUV2ZW50KCJ0aXRsZWNoYW5nZSIsdGhpcyxiKTtyZXR1cm4gdGhpc30sZ2V0VXBkYXRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkuZ2V0VXBkYXRlcigpfSxsb2FkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ib2R5LmdldFVwZGF0ZXIoKTthLnVwZGF0ZS5hcHBseShhLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXN9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuUGFuZWwuc3VwZXJjbGFzcy5iZWZvcmVEZXN0cm95LmNhbGwodGhpcyk7aWYodGhpcy5oZWFkZXIpe3RoaXMuaGVhZGVyLnJlbW92ZUFsbExpc3RlbmVycygpfWlmKHRoaXMudG9vbHMpe2Zvcih2YXIgYSBpbiB0aGlzLnRvb2xzKXtFeHQuZGVzdHJveSh0aGlzLnRvb2xzW2FdKX19aWYodGhpcy50b29sYmFycy5sZW5ndGg+MCl7RXh0LmVhY2godGhpcy50b29sYmFycyxmdW5jdGlvbihiKXtiLnVuKCJhZnRlcmxheW91dCIsdGhpcy5zeW5jSGVpZ2h0LHRoaXMpO2IudW4oInJlbW92ZSIsdGhpcy5zeW5jSGVpZ2h0LHRoaXMpfSx0aGlzKX1pZihFeHQuaXNBcnJheSh0aGlzLmJ1dHRvbnMpKXt3aGlsZSh0aGlzLmJ1dHRvbnMubGVuZ3RoKXtFeHQuZGVzdHJveSh0aGlzLmJ1dHRvbnNbMF0pfX1pZih0aGlzLnJlbmRlcmVkKXtFeHQuZGVzdHJveSh0aGlzLmZ0LHRoaXMuaGVhZGVyLHRoaXMuZm9vdGVyLHRoaXMudGJhcix0aGlzLmJiYXIsdGhpcy5ib2R5LHRoaXMubWMsdGhpcy5id3JhcCx0aGlzLmRkKTtpZih0aGlzLmZiYXIpe0V4dC5kZXN0cm95KHRoaXMuZmJhcix0aGlzLmZiYXIuZWwpfX1FeHQuZGVzdHJveSh0aGlzLnRvb2xiYXJzKX0sY3JlYXRlQ2xhc3NlczpmdW5jdGlvbigpe3RoaXMuaGVhZGVyQ2xzPXRoaXMuYmFzZUNscysiLWhlYWRlciI7dGhpcy5oZWFkZXJUZXh0Q2xzPXRoaXMuYmFzZUNscysiLWhlYWRlci10ZXh0Ijt0aGlzLmJ3cmFwQ2xzPXRoaXMuYmFzZUNscysiLWJ3cmFwIjt0aGlzLnRiYXJDbHM9dGhpcy5iYXNlQ2xzKyItdGJhciI7dGhpcy5ib2R5Q2xzPXRoaXMuYmFzZUNscysiLWJvZHkiO3RoaXMuYmJhckNscz10aGlzLmJhc2VDbHMrIi1iYmFyIjt0aGlzLmZvb3RlckNscz10aGlzLmJhc2VDbHMrIi1mb290ZXIifSxjcmVhdGVHaG9zdDpmdW5jdGlvbihhLGUsYil7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZC5jbGFzc05hbWU9IngtcGFuZWwtZ2hvc3QgIisoYT9hOiIiKTtpZih0aGlzLmhlYWRlcil7ZC5hcHBlbmRDaGlsZCh0aGlzLmVsLmRvbS5maXJzdENoaWxkLmNsb25lTm9kZSh0cnVlKSl9RXh0LmZseShkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInVsIikpKS5zZXRIZWlnaHQodGhpcy5id3JhcC5nZXRIZWlnaHQoKSk7ZC5zdHlsZS53aWR0aD10aGlzLmVsLmRvbS5vZmZzZXRXaWR0aCsicHgiO2lmKCFiKXt0aGlzLmNvbnRhaW5lci5kb20uYXBwZW5kQ2hpbGQoZCl9ZWxzZXtFeHQuZ2V0RG9tKGIpLmFwcGVuZENoaWxkKGQpfWlmKGUhPT1mYWxzZSYmdGhpcy5lbC51c2VTaGltIT09ZmFsc2Upe3ZhciBjPW5ldyBFeHQuTGF5ZXIoe3NoYWRvdzpmYWxzZSx1c2VEaXNwbGF5OnRydWUsY29uc3RyYWluOmZhbHNlfSxkKTtjLnNob3coKTtyZXR1cm4gY31lbHNle3JldHVybiBuZXcgRXh0LkVsZW1lbnQoZCl9fSxkb0F1dG9Mb2FkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ib2R5LmdldFVwZGF0ZXIoKTtpZih0aGlzLnJlbmRlcmVyKXthLnNldFJlbmRlcmVyKHRoaXMucmVuZGVyZXIpfWEudXBkYXRlKEV4dC5pc09iamVjdCh0aGlzLmF1dG9Mb2FkKT90aGlzLmF1dG9Mb2FkOnt1cmw6dGhpcy5hdXRvTG9hZH0pfSxnZXRUb29sOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRvb2xzW2FdfX0pO0V4dC5yZWcoInBhbmVsIixFeHQuUGFuZWwpO0V4dC5FZGl0b3I9ZnVuY3Rpb24oYixhKXtpZihiLmZpZWxkKXt0aGlzLmZpZWxkPUV4dC5jcmVhdGUoYi5maWVsZCwidGV4dGZpZWxkIik7YT1FeHQuYXBwbHkoe30sYik7ZGVsZXRlIGEuZmllbGR9ZWxzZXt0aGlzLmZpZWxkPWJ9RXh0LkVkaXRvci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX07RXh0LmV4dGVuZChFeHQuRWRpdG9yLEV4dC5Db21wb25lbnQse2FsbG93Qmx1cjp0cnVlLHZhbHVlOiIiLGFsaWdubWVudDoiYy1jPyIsb2Zmc2V0czpbMCwwXSxzaGFkb3c6ImZyYW1lIixjb25zdHJhaW46ZmFsc2Usc3dhbGxvd0tleXM6dHJ1ZSxjb21wbGV0ZU9uRW50ZXI6dHJ1ZSxjYW5jZWxPbkVzYzp0cnVlLHVwZGF0ZUVsOmZhbHNlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuRWRpdG9yLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVzdGFydGVkaXQiLCJzdGFydGVkaXQiLCJiZWZvcmVjb21wbGV0ZSIsImNvbXBsZXRlIiwiY2FuY2VsZWRpdCIsInNwZWNpYWxrZXkiKX0sb25SZW5kZXI6ZnVuY3Rpb24oYixhKXt0aGlzLmVsPW5ldyBFeHQuTGF5ZXIoe3NoYWRvdzp0aGlzLnNoYWRvdyxjbHM6IngtZWRpdG9yIixwYXJlbnRFbDpiLHNoaW06dGhpcy5zaGltLHNoYWRvd09mZnNldDp0aGlzLnNoYWRvd09mZnNldHx8NCxpZDp0aGlzLmlkLGNvbnN0cmFpbjp0aGlzLmNvbnN0cmFpbn0pO2lmKHRoaXMuekluZGV4KXt0aGlzLmVsLnNldFpJbmRleCh0aGlzLnpJbmRleCl9dGhpcy5lbC5zZXRTdHlsZSgib3ZlcmZsb3ciLEV4dC5pc0dlY2tvPyJhdXRvIjoiaGlkZGVuIik7aWYodGhpcy5maWVsZC5tc2dUYXJnZXQhPSJ0aXRsZSIpe3RoaXMuZmllbGQubXNnVGFyZ2V0PSJxdGlwIn10aGlzLmZpZWxkLmluRWRpdG9yPXRydWU7dGhpcy5tb24odGhpcy5maWVsZCx7c2NvcGU6dGhpcyxibHVyOnRoaXMub25CbHVyLHNwZWNpYWxrZXk6dGhpcy5vblNwZWNpYWxLZXl9KTtpZih0aGlzLmZpZWxkLmdyb3cpe3RoaXMubW9uKHRoaXMuZmllbGQsImF1dG9zaXplIix0aGlzLmVsLnN5bmMsdGhpcy5lbCx7ZGVsYXk6MX0pfXRoaXMuZmllbGQucmVuZGVyKHRoaXMuZWwpLnNob3coKTt0aGlzLmZpZWxkLmdldEVsKCkuZG9tLm5hbWU9IiI7aWYodGhpcy5zd2FsbG93S2V5cyl7dGhpcy5maWVsZC5lbC5zd2FsbG93RXZlbnQoWyJrZXlwcmVzcyIsImtleWRvd24iXSl9fSxvblNwZWNpYWxLZXk6ZnVuY3Rpb24oZyxkKXt2YXIgYj1kLmdldEtleSgpLGE9dGhpcy5jb21wbGV0ZU9uRW50ZXImJmI9PWQuRU5URVIsYz10aGlzLmNhbmNlbE9uRXNjJiZiPT1kLkVTQztpZihhfHxjKXtkLnN0b3BFdmVudCgpO2lmKGEpe3RoaXMuY29tcGxldGVFZGl0KCl9ZWxzZXt0aGlzLmNhbmNlbEVkaXQoKX1pZihnLnRyaWdnZXJCbHVyKXtnLnRyaWdnZXJCbHVyKCl9fXRoaXMuZmlyZUV2ZW50KCJzcGVjaWFsa2V5IixnLGQpfSxzdGFydEVkaXQ6ZnVuY3Rpb24oYixjKXtpZih0aGlzLmVkaXRpbmcpe3RoaXMuY29tcGxldGVFZGl0KCl9dGhpcy5ib3VuZEVsPUV4dC5nZXQoYik7dmFyIGE9YyE9PXVuZGVmaW5lZD9jOnRoaXMuYm91bmRFbC5kb20uaW5uZXJIVE1MO2lmKCF0aGlzLnJlbmRlcmVkKXt0aGlzLnJlbmRlcih0aGlzLnBhcmVudEVsfHxkb2N1bWVudC5ib2R5KX1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc3RhcnRlZGl0Iix0aGlzLHRoaXMuYm91bmRFbCxhKSE9PWZhbHNlKXt0aGlzLnN0YXJ0VmFsdWU9YTt0aGlzLmZpZWxkLnJlc2V0KCk7dGhpcy5maWVsZC5zZXRWYWx1ZShhKTt0aGlzLnJlYWxpZ24odHJ1ZSk7dGhpcy5lZGl0aW5nPXRydWU7dGhpcy5zaG93KCl9fSxkb0F1dG9TaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5hdXRvU2l6ZSl7dmFyIGI9dGhpcy5ib3VuZEVsLmdldFNpemUoKSxhPXRoaXMuZmllbGQuZ2V0U2l6ZSgpO3N3aXRjaCh0aGlzLmF1dG9TaXplKXtjYXNlIndpZHRoIjp0aGlzLnNldFNpemUoYi53aWR0aCxhLmhlaWdodCk7YnJlYWs7Y2FzZSJoZWlnaHQiOnRoaXMuc2V0U2l6ZShhLndpZHRoLGIuaGVpZ2h0KTticmVhaztjYXNlIm5vbmUiOnRoaXMuc2V0U2l6ZShhLndpZHRoLGEuaGVpZ2h0KTticmVhaztkZWZhdWx0OnRoaXMuc2V0U2l6ZShiLndpZHRoLGIuaGVpZ2h0KX19fSxzZXRTaXplOmZ1bmN0aW9uKGEsYil7ZGVsZXRlIHRoaXMuZmllbGQubGFzdFNpemU7dGhpcy5maWVsZC5zZXRTaXplKGEsYik7aWYodGhpcy5lbCl7aWYoRXh0LmlzR2Vja28yfHxFeHQuaXNPcGVyYXx8KEV4dC5pc0lFNyYmRXh0LmlzU3RyaWN0KSl7dGhpcy5lbC5zZXRTaXplKGEsYil9dGhpcy5lbC5zeW5jKCl9fSxyZWFsaWduOmZ1bmN0aW9uKGEpe2lmKGE9PT10cnVlKXt0aGlzLmRvQXV0b1NpemUoKX10aGlzLmVsLmFsaWduVG8odGhpcy5ib3VuZEVsLHRoaXMuYWxpZ25tZW50LHRoaXMub2Zmc2V0cyl9LGNvbXBsZXRlRWRpdDpmdW5jdGlvbihhKXtpZighdGhpcy5lZGl0aW5nKXtyZXR1cm59aWYodGhpcy5maWVsZC5hc3NlcnRWYWx1ZSl7dGhpcy5maWVsZC5hc3NlcnRWYWx1ZSgpfXZhciBiPXRoaXMuZ2V0VmFsdWUoKTtpZighdGhpcy5maWVsZC5pc1ZhbGlkKCkpe2lmKHRoaXMucmV2ZXJ0SW52YWxpZCE9PWZhbHNlKXt0aGlzLmNhbmNlbEVkaXQoYSl9cmV0dXJufWlmKFN0cmluZyhiKT09PVN0cmluZyh0aGlzLnN0YXJ0VmFsdWUpJiZ0aGlzLmlnbm9yZU5vQ2hhbmdlKXt0aGlzLmhpZGVFZGl0KGEpO3JldHVybn1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlY29tcGxldGUiLHRoaXMsYix0aGlzLnN0YXJ0VmFsdWUpIT09ZmFsc2Upe2I9dGhpcy5nZXRWYWx1ZSgpO2lmKHRoaXMudXBkYXRlRWwmJnRoaXMuYm91bmRFbCl7dGhpcy5ib3VuZEVsLnVwZGF0ZShiKX10aGlzLmhpZGVFZGl0KGEpO3RoaXMuZmlyZUV2ZW50KCJjb21wbGV0ZSIsdGhpcyxiLHRoaXMuc3RhcnRWYWx1ZSl9fSxvblNob3c6ZnVuY3Rpb24oKXt0aGlzLmVsLnNob3coKTtpZih0aGlzLmhpZGVFbCE9PWZhbHNlKXt0aGlzLmJvdW5kRWwuaGlkZSgpfXRoaXMuZmllbGQuc2hvdygpLmZvY3VzKGZhbHNlLHRydWUpO3RoaXMuZmlyZUV2ZW50KCJzdGFydGVkaXQiLHRoaXMuYm91bmRFbCx0aGlzLnN0YXJ0VmFsdWUpfSxjYW5jZWxFZGl0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuZWRpdGluZyl7dmFyIGI9dGhpcy5nZXRWYWx1ZSgpO3RoaXMuc2V0VmFsdWUodGhpcy5zdGFydFZhbHVlKTt0aGlzLmhpZGVFZGl0KGEpO3RoaXMuZmlyZUV2ZW50KCJjYW5jZWxlZGl0Iix0aGlzLGIsdGhpcy5zdGFydFZhbHVlKX19LGhpZGVFZGl0OmZ1bmN0aW9uKGEpe2lmKGEhPT10cnVlKXt0aGlzLmVkaXRpbmc9ZmFsc2U7dGhpcy5oaWRlKCl9fSxvbkJsdXI6ZnVuY3Rpb24oKXtpZih0aGlzLmFsbG93Qmx1cj09PXRydWUmJnRoaXMuZWRpdGluZyYmdGhpcy5zZWxlY3RTYW1lRWRpdG9yIT09dHJ1ZSl7dGhpcy5jb21wbGV0ZUVkaXQoKX19LG9uSGlkZTpmdW5jdGlvbigpe2lmKHRoaXMuZWRpdGluZyl7dGhpcy5jb21wbGV0ZUVkaXQoKTtyZXR1cm59dGhpcy5maWVsZC5ibHVyKCk7aWYodGhpcy5maWVsZC5jb2xsYXBzZSl7dGhpcy5maWVsZC5jb2xsYXBzZSgpfXRoaXMuZWwuaGlkZSgpO2lmKHRoaXMuaGlkZUVsIT09ZmFsc2Upe3RoaXMuYm91bmRFbC5zaG93KCl9fSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLmZpZWxkLnNldFZhbHVlKGEpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpZWxkLmdldFZhbHVlKCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveU1lbWJlcnModGhpcywiZmllbGQiKTtkZWxldGUgdGhpcy5wYXJlbnRFbDtkZWxldGUgdGhpcy5ib3VuZEVsfX0pO0V4dC5yZWcoImVkaXRvciIsRXh0LkVkaXRvcik7RXh0LkNvbG9yUGFsZXR0ZT1FeHQuZXh0ZW5kKEV4dC5Db21wb25lbnQse2l0ZW1DbHM6IngtY29sb3ItcGFsZXR0ZSIsdmFsdWU6bnVsbCxjbGlja0V2ZW50OiJjbGljayIsY3R5cGU6IkV4dC5Db2xvclBhbGV0dGUiLGFsbG93UmVzZWxlY3Q6ZmFsc2UsY29sb3JzOlsiMDAwMDAwIiwiOTkzMzAwIiwiMzMzMzAwIiwiMDAzMzAwIiwiMDAzMzY2IiwiMDAwMDgwIiwiMzMzMzk5IiwiMzMzMzMzIiwiODAwMDAwIiwiRkY2NjAwIiwiODA4MDAwIiwiMDA4MDAwIiwiMDA4MDgwIiwiMDAwMEZGIiwiNjY2Njk5IiwiODA4MDgwIiwiRkYwMDAwIiwiRkY5OTAwIiwiOTlDQzAwIiwiMzM5OTY2IiwiMzNDQ0NDIiwiMzM2NkZGIiwiODAwMDgwIiwiOTY5Njk2IiwiRkYwMEZGIiwiRkZDQzAwIiwiRkZGRjAwIiwiMDBGRjAwIiwiMDBGRkZGIiwiMDBDQ0ZGIiwiOTkzMzY2IiwiQzBDMEMwIiwiRkY5OUNDIiwiRkZDQzk5IiwiRkZGRjk5IiwiQ0NGRkNDIiwiQ0NGRkZGIiwiOTlDQ0ZGIiwiQ0M5OUZGIiwiRkZGRkZGIl0saW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5Db2xvclBhbGV0dGUuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoInNlbGVjdCIpO2lmKHRoaXMuaGFuZGxlcil7dGhpcy5vbigic2VsZWN0Iix0aGlzLmhhbmRsZXIsdGhpcy5zY29wZSx0cnVlKX19LG9uUmVuZGVyOmZ1bmN0aW9uKGIsYSl7dGhpcy5hdXRvRWw9e3RhZzoiZGl2IixjbHM6dGhpcy5pdGVtQ2xzfTtFeHQuQ29sb3JQYWxldHRlLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLGIsYSk7dmFyIGM9dGhpcy50cGx8fG5ldyBFeHQuWFRlbXBsYXRlKCc8dHBsIGZvcj0iLiI+PGEgaHJlZj0iIyIgY2xhc3M9ImNvbG9yLXsufSIgaGlkZWZvY3VzPSJvbiI+PGVtPjxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kOiN7Ln0iIHVuc2VsZWN0YWJsZT0ib24iPiYjMTYwOzwvc3Bhbj48L2VtPjwvYT48L3RwbD4nKTtjLm92ZXJ3cml0ZSh0aGlzLmVsLHRoaXMuY29sb3JzKTt0aGlzLm1vbih0aGlzLmVsLHRoaXMuY2xpY2tFdmVudCx0aGlzLmhhbmRsZUNsaWNrLHRoaXMse2RlbGVnYXRlOiJhIn0pO2lmKHRoaXMuY2xpY2tFdmVudCE9ImNsaWNrIil7dGhpcy5tb24odGhpcy5lbCwiY2xpY2siLEV4dC5lbXB0eUZuLHRoaXMse2RlbGVnYXRlOiJhIixwcmV2ZW50RGVmYXVsdDp0cnVlfSl9fSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe0V4dC5Db2xvclBhbGV0dGUuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO2lmKHRoaXMudmFsdWUpe3ZhciBhPXRoaXMudmFsdWU7dGhpcy52YWx1ZT1udWxsO3RoaXMuc2VsZWN0KGEsdHJ1ZSl9fSxoYW5kbGVDbGljazpmdW5jdGlvbihiLGEpe2IucHJldmVudERlZmF1bHQoKTtpZighdGhpcy5kaXNhYmxlZCl7dmFyIGQ9YS5jbGFzc05hbWUubWF0Y2goLyg/Ol58XHMpY29sb3ItKC57Nn0pKD86XHN8JCkvKVsxXTt0aGlzLnNlbGVjdChkLnRvVXBwZXJDYXNlKCkpfX0sc2VsZWN0OmZ1bmN0aW9uKGIsYSl7Yj1iLnJlcGxhY2UoIiMiLCIiKTtpZihiIT10aGlzLnZhbHVlfHx0aGlzLmFsbG93UmVzZWxlY3Qpe3ZhciBjPXRoaXMuZWw7aWYodGhpcy52YWx1ZSl7Yy5jaGlsZCgiYS5jb2xvci0iK3RoaXMudmFsdWUpLnJlbW92ZUNsYXNzKCJ4LWNvbG9yLXBhbGV0dGUtc2VsIil9Yy5jaGlsZCgiYS5jb2xvci0iK2IpLmFkZENsYXNzKCJ4LWNvbG9yLXBhbGV0dGUtc2VsIik7dGhpcy52YWx1ZT1iO2lmKGEhPT10cnVlKXt0aGlzLmZpcmVFdmVudCgic2VsZWN0Iix0aGlzLGIpfX19fSk7RXh0LnJlZygiY29sb3JwYWxldHRlIixFeHQuQ29sb3JQYWxldHRlKTtFeHQuRGF0ZVBpY2tlcj1FeHQuZXh0ZW5kKEV4dC5Cb3hDb21wb25lbnQse3RvZGF5VGV4dDoiVG9kYXkiLG9rVGV4dDoiJiMxNjA7T0smIzE2MDsiLGNhbmNlbFRleHQ6IkNhbmNlbCIsdG9kYXlUaXA6InswfSAoU3BhY2ViYXIpIixtaW5UZXh0OiJUaGlzIGRhdGUgaXMgYmVmb3JlIHRoZSBtaW5pbXVtIGRhdGUiLG1heFRleHQ6IlRoaXMgZGF0ZSBpcyBhZnRlciB0aGUgbWF4aW11bSBkYXRlIixmb3JtYXQ6Im0vZC95IixkaXNhYmxlZERheXNUZXh0OiJEaXNhYmxlZCIsZGlzYWJsZWREYXRlc1RleHQ6IkRpc2FibGVkIixtb250aE5hbWVzOkRhdGUubW9udGhOYW1lcyxkYXlOYW1lczpEYXRlLmRheU5hbWVzLG5leHRUZXh0OiJOZXh0IE1vbnRoIChDb250cm9sK1JpZ2h0KSIscHJldlRleHQ6IlByZXZpb3VzIE1vbnRoIChDb250cm9sK0xlZnQpIixtb250aFllYXJUZXh0OiJDaG9vc2UgYSBtb250aCAoQ29udHJvbCtVcC9Eb3duIHRvIG1vdmUgeWVhcnMpIixzdGFydERheTowLHNob3dUb2RheTp0cnVlLGZvY3VzT25TZWxlY3Q6dHJ1ZSxpbml0SG91cjoxMixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LkRhdGVQaWNrZXIuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy52YWx1ZT10aGlzLnZhbHVlP3RoaXMudmFsdWUuY2xlYXJUaW1lKHRydWUpOm5ldyBEYXRlKCkuY2xlYXJUaW1lKCk7dGhpcy5hZGRFdmVudHMoInNlbGVjdCIpO2lmKHRoaXMuaGFuZGxlcil7dGhpcy5vbigic2VsZWN0Iix0aGlzLmhhbmRsZXIsdGhpcy5zY29wZXx8dGhpcyl9dGhpcy5pbml0RGlzYWJsZWREYXlzKCl9LGluaXREaXNhYmxlZERheXM6ZnVuY3Rpb24oKXtpZighdGhpcy5kaXNhYmxlZERhdGVzUkUmJnRoaXMuZGlzYWJsZWREYXRlcyl7dmFyIGI9dGhpcy5kaXNhYmxlZERhdGVzLGE9Yi5sZW5ndGgtMSxjPSIoPzoiO0V4dC5lYWNoKGIsZnVuY3Rpb24oZyxlKXtjKz1FeHQuaXNEYXRlKGcpPyJeIitFeHQuZXNjYXBlUmUoZy5kYXRlRm9ybWF0KHRoaXMuZm9ybWF0KSkrIiQiOmJbZV07aWYoZSE9YSl7Yys9InwifX0sdGhpcyk7dGhpcy5kaXNhYmxlZERhdGVzUkU9bmV3IFJlZ0V4cChjKyIpIil9fSxzZXREaXNhYmxlZERhdGVzOmZ1bmN0aW9uKGEpe2lmKEV4dC5pc0FycmF5KGEpKXt0aGlzLmRpc2FibGVkRGF0ZXM9YTt0aGlzLmRpc2FibGVkRGF0ZXNSRT1udWxsfWVsc2V7dGhpcy5kaXNhYmxlZERhdGVzUkU9YX10aGlzLmluaXREaXNhYmxlZERheXMoKTt0aGlzLnVwZGF0ZSh0aGlzLnZhbHVlLHRydWUpfSxzZXREaXNhYmxlZERheXM6ZnVuY3Rpb24oYSl7dGhpcy5kaXNhYmxlZERheXM9YTt0aGlzLnVwZGF0ZSh0aGlzLnZhbHVlLHRydWUpfSxzZXRNaW5EYXRlOmZ1bmN0aW9uKGEpe3RoaXMubWluRGF0ZT1hO3RoaXMudXBkYXRlKHRoaXMudmFsdWUsdHJ1ZSl9LHNldE1heERhdGU6ZnVuY3Rpb24oYSl7dGhpcy5tYXhEYXRlPWE7dGhpcy51cGRhdGUodGhpcy52YWx1ZSx0cnVlKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy52YWx1ZT1hLmNsZWFyVGltZSh0cnVlKTt0aGlzLnVwZGF0ZSh0aGlzLnZhbHVlKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZSh0aGlzLmFjdGl2ZURhdGUpfSxvbkVuYWJsZTpmdW5jdGlvbihhKXtFeHQuRGF0ZVBpY2tlci5zdXBlcmNsYXNzLm9uRW5hYmxlLmNhbGwodGhpcyk7dGhpcy5kb0Rpc2FibGVkKGZhbHNlKTt0aGlzLnVwZGF0ZShhP3RoaXMudmFsdWU6dGhpcy5hY3RpdmVEYXRlKTtpZihFeHQuaXNJRSl7dGhpcy5lbC5yZXBhaW50KCl9fSxvbkRpc2FibGU6ZnVuY3Rpb24oKXtFeHQuRGF0ZVBpY2tlci5zdXBlcmNsYXNzLm9uRGlzYWJsZS5jYWxsKHRoaXMpO3RoaXMuZG9EaXNhYmxlZCh0cnVlKTtpZihFeHQuaXNJRSYmIUV4dC5pc0lFOCl7RXh0LmVhY2goW10uY29uY2F0KHRoaXMudGV4dE5vZGVzLHRoaXMuZWwucXVlcnkoInRoIHNwYW4iKSksZnVuY3Rpb24oYSl7RXh0LmZseShhKS5yZXBhaW50KCl9KX19LGRvRGlzYWJsZWQ6ZnVuY3Rpb24oYSl7dGhpcy5rZXlOYXYuc2V0RGlzYWJsZWQoYSk7dGhpcy5wcmV2UmVwZWF0ZXIuc2V0RGlzYWJsZWQoYSk7dGhpcy5uZXh0UmVwZWF0ZXIuc2V0RGlzYWJsZWQoYSk7aWYodGhpcy5zaG93VG9kYXkpe3RoaXMudG9kYXlLZXlMaXN0ZW5lci5zZXREaXNhYmxlZChhKTt0aGlzLnRvZGF5QnRuLnNldERpc2FibGVkKGEpfX0sb25SZW5kZXI6ZnVuY3Rpb24oZSxiKXt2YXIgYT1bJzx0YWJsZSBjZWxsc3BhY2luZz0iMCI+JywnPHRyPjx0ZCBjbGFzcz0ieC1kYXRlLWxlZnQiPjxhIGhyZWY9IiMiIHRpdGxlPSInLHRoaXMucHJldlRleHQsJyI+JiMxNjA7PC9hPjwvdGQ+PHRkIGNsYXNzPSJ4LWRhdGUtbWlkZGxlIiBhbGlnbj0iY2VudGVyIj48L3RkPjx0ZCBjbGFzcz0ieC1kYXRlLXJpZ2h0Ij48YSBocmVmPSIjIiB0aXRsZT0iJyx0aGlzLm5leHRUZXh0LCciPiYjMTYwOzwvYT48L3RkPjwvdHI+JywnPHRyPjx0ZCBjb2xzcGFuPSIzIj48dGFibGUgY2xhc3M9IngtZGF0ZS1pbm5lciIgY2VsbHNwYWNpbmc9IjAiPjx0aGVhZD48dHI+J10sYz10aGlzLmRheU5hbWVzLGg7Zm9yKGg9MDtoPDc7aCsrKXt2YXIgaz10aGlzLnN0YXJ0RGF5K2g7aWYoaz42KXtrPWstN31hLnB1c2goIjx0aD48c3Bhbj4iLGNba10uc3Vic3RyKDAsMSksIjwvc3Bhbj48L3RoPiIpfWFbYS5sZW5ndGhdPSI8L3RyPjwvdGhlYWQ+PHRib2R5Pjx0cj4iO2ZvcihoPTA7aDw0MjtoKyspe2lmKGglNz09PTAmJmghPT0wKXthW2EubGVuZ3RoXT0iPC90cj48dHI+In1hW2EubGVuZ3RoXT0nPHRkPjxhIGhyZWY9IiMiIGhpZGVmb2N1cz0ib24iIGNsYXNzPSJ4LWRhdGUtZGF0ZSIgdGFiSW5kZXg9IjEiPjxlbT48c3Bhbj48L3NwYW4+PC9lbT48L2E+PC90ZD4nfWEucHVzaCgiPC90cj48L3Rib2R5PjwvdGFibGU+PC90ZD48L3RyPiIsdGhpcy5zaG93VG9kYXk/Jzx0cj48dGQgY29sc3Bhbj0iMyIgY2xhc3M9IngtZGF0ZS1ib3R0b20iIGFsaWduPSJjZW50ZXIiPjwvdGQ+PC90cj4nOiIiLCc8L3RhYmxlPjxkaXYgY2xhc3M9IngtZGF0ZS1tcCI+PC9kaXY+Jyk7dmFyIGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ai5jbGFzc05hbWU9IngtZGF0ZS1waWNrZXIiO2ouaW5uZXJIVE1MPWEuam9pbigiIik7ZS5kb20uaW5zZXJ0QmVmb3JlKGosYik7dGhpcy5lbD1FeHQuZ2V0KGopO3RoaXMuZXZlbnRFbD1FeHQuZ2V0KGouZmlyc3RDaGlsZCk7dGhpcy5wcmV2UmVwZWF0ZXI9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIodGhpcy5lbC5jaGlsZCgidGQueC1kYXRlLWxlZnQgYSIpLHtoYW5kbGVyOnRoaXMuc2hvd1ByZXZNb250aCxzY29wZTp0aGlzLHByZXZlbnREZWZhdWx0OnRydWUsc3RvcERlZmF1bHQ6dHJ1ZX0pO3RoaXMubmV4dFJlcGVhdGVyPW5ldyBFeHQudXRpbC5DbGlja1JlcGVhdGVyKHRoaXMuZWwuY2hpbGQoInRkLngtZGF0ZS1yaWdodCBhIikse2hhbmRsZXI6dGhpcy5zaG93TmV4dE1vbnRoLHNjb3BlOnRoaXMscHJldmVudERlZmF1bHQ6dHJ1ZSxzdG9wRGVmYXVsdDp0cnVlfSk7dGhpcy5tb250aFBpY2tlcj10aGlzLmVsLmRvd24oImRpdi54LWRhdGUtbXAiKTt0aGlzLm1vbnRoUGlja2VyLmVuYWJsZURpc3BsYXlNb2RlKCJibG9jayIpO3RoaXMua2V5TmF2PW5ldyBFeHQuS2V5TmF2KHRoaXMuZXZlbnRFbCx7bGVmdDpmdW5jdGlvbihkKXtpZihkLmN0cmxLZXkpe3RoaXMuc2hvd1ByZXZNb250aCgpfWVsc2V7dGhpcy51cGRhdGUodGhpcy5hY3RpdmVEYXRlLmFkZCgiZCIsLTEpKX19LHJpZ2h0OmZ1bmN0aW9uKGQpe2lmKGQuY3RybEtleSl7dGhpcy5zaG93TmV4dE1vbnRoKCl9ZWxzZXt0aGlzLnVwZGF0ZSh0aGlzLmFjdGl2ZURhdGUuYWRkKCJkIiwxKSl9fSx1cDpmdW5jdGlvbihkKXtpZihkLmN0cmxLZXkpe3RoaXMuc2hvd05leHRZZWFyKCl9ZWxzZXt0aGlzLnVwZGF0ZSh0aGlzLmFjdGl2ZURhdGUuYWRkKCJkIiwtNykpfX0sZG93bjpmdW5jdGlvbihkKXtpZihkLmN0cmxLZXkpe3RoaXMuc2hvd1ByZXZZZWFyKCl9ZWxzZXt0aGlzLnVwZGF0ZSh0aGlzLmFjdGl2ZURhdGUuYWRkKCJkIiw3KSl9fSxwYWdlVXA6ZnVuY3Rpb24oZCl7dGhpcy5zaG93TmV4dE1vbnRoKCl9LHBhZ2VEb3duOmZ1bmN0aW9uKGQpe3RoaXMuc2hvd1ByZXZNb250aCgpfSxlbnRlcjpmdW5jdGlvbihkKXtkLnN0b3BQcm9wYWdhdGlvbigpO3JldHVybiB0cnVlfSxzY29wZTp0aGlzfSk7dGhpcy5lbC51bnNlbGVjdGFibGUoKTt0aGlzLmNlbGxzPXRoaXMuZWwuc2VsZWN0KCJ0YWJsZS54LWRhdGUtaW5uZXIgdGJvZHkgdGQiKTt0aGlzLnRleHROb2Rlcz10aGlzLmVsLnF1ZXJ5KCJ0YWJsZS54LWRhdGUtaW5uZXIgdGJvZHkgc3BhbiIpO3RoaXMubWJ0bj1uZXcgRXh0LkJ1dHRvbih7dGV4dDoiJiMxNjA7Iix0b29sdGlwOnRoaXMubW9udGhZZWFyVGV4dCxyZW5kZXJUbzp0aGlzLmVsLmNoaWxkKCJ0ZC54LWRhdGUtbWlkZGxlIix0cnVlKX0pO3RoaXMubWJ0bi5lbC5jaGlsZCgiZW0iKS5hZGRDbGFzcygieC1idG4tYXJyb3ciKTtpZih0aGlzLnNob3dUb2RheSl7dGhpcy50b2RheUtleUxpc3RlbmVyPXRoaXMuZXZlbnRFbC5hZGRLZXlMaXN0ZW5lcihFeHQuRXZlbnRPYmplY3QuU1BBQ0UsdGhpcy5zZWxlY3RUb2RheSx0aGlzKTt2YXIgZz0obmV3IERhdGUoKSkuZGF0ZUZvcm1hdCh0aGlzLmZvcm1hdCk7dGhpcy50b2RheUJ0bj1uZXcgRXh0LkJ1dHRvbih7cmVuZGVyVG86dGhpcy5lbC5jaGlsZCgidGQueC1kYXRlLWJvdHRvbSIsdHJ1ZSksdGV4dDpTdHJpbmcuZm9ybWF0KHRoaXMudG9kYXlUZXh0LGcpLHRvb2x0aXA6U3RyaW5nLmZvcm1hdCh0aGlzLnRvZGF5VGlwLGcpLGhhbmRsZXI6dGhpcy5zZWxlY3RUb2RheSxzY29wZTp0aGlzfSl9dGhpcy5tb24odGhpcy5ldmVudEVsLCJtb3VzZXdoZWVsIix0aGlzLmhhbmRsZU1vdXNlV2hlZWwsdGhpcyk7dGhpcy5tb24odGhpcy5ldmVudEVsLCJjbGljayIsdGhpcy5oYW5kbGVEYXRlQ2xpY2ssdGhpcyx7ZGVsZWdhdGU6ImEueC1kYXRlLWRhdGUifSk7dGhpcy5tb24odGhpcy5tYnRuLCJjbGljayIsdGhpcy5zaG93TW9udGhQaWNrZXIsdGhpcyk7dGhpcy5vbkVuYWJsZSh0cnVlKX0sY3JlYXRlTW9udGhQaWNrZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5tb250aFBpY2tlci5kb20uZmlyc3RDaGlsZCl7dmFyIGE9Wyc8dGFibGUgYm9yZGVyPSIwIiBjZWxsc3BhY2luZz0iMCI+J107Zm9yKHZhciBiPTA7Yjw2O2IrKyl7YS5wdXNoKCc8dHI+PHRkIGNsYXNzPSJ4LWRhdGUtbXAtbW9udGgiPjxhIGhyZWY9IiMiPicsRGF0ZS5nZXRTaG9ydE1vbnRoTmFtZShiKSwiPC9hPjwvdGQ+IiwnPHRkIGNsYXNzPSJ4LWRhdGUtbXAtbW9udGggeC1kYXRlLW1wLXNlcCI+PGEgaHJlZj0iIyI+JyxEYXRlLmdldFNob3J0TW9udGhOYW1lKGIrNiksIjwvYT48L3RkPiIsYj09PTA/Jzx0ZCBjbGFzcz0ieC1kYXRlLW1wLXlidG4iIGFsaWduPSJjZW50ZXIiPjxhIGNsYXNzPSJ4LWRhdGUtbXAtcHJldiI+PC9hPjwvdGQ+PHRkIGNsYXNzPSJ4LWRhdGUtbXAteWJ0biIgYWxpZ249ImNlbnRlciI+PGEgY2xhc3M9IngtZGF0ZS1tcC1uZXh0Ij48L2E+PC90ZD48L3RyPic6Jzx0ZCBjbGFzcz0ieC1kYXRlLW1wLXllYXIiPjxhIGhyZWY9IiMiPjwvYT48L3RkPjx0ZCBjbGFzcz0ieC1kYXRlLW1wLXllYXIiPjxhIGhyZWY9IiMiPjwvYT48L3RkPjwvdHI+Jyl9YS5wdXNoKCc8dHIgY2xhc3M9IngtZGF0ZS1tcC1idG5zIj48dGQgY29sc3Bhbj0iNCI+PGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ4LWRhdGUtbXAtb2siPicsdGhpcy5va1RleHQsJzwvYnV0dG9uPjxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ieC1kYXRlLW1wLWNhbmNlbCI+Jyx0aGlzLmNhbmNlbFRleHQsIjwvYnV0dG9uPjwvdGQ+PC90cj4iLCI8L3RhYmxlPiIpO3RoaXMubW9udGhQaWNrZXIudXBkYXRlKGEuam9pbigiIikpO3RoaXMubW9uKHRoaXMubW9udGhQaWNrZXIsImNsaWNrIix0aGlzLm9uTW9udGhDbGljayx0aGlzKTt0aGlzLm1vbih0aGlzLm1vbnRoUGlja2VyLCJkYmxjbGljayIsdGhpcy5vbk1vbnRoRGJsQ2xpY2ssdGhpcyk7dGhpcy5tcE1vbnRocz10aGlzLm1vbnRoUGlja2VyLnNlbGVjdCgidGQueC1kYXRlLW1wLW1vbnRoIik7dGhpcy5tcFllYXJzPXRoaXMubW9udGhQaWNrZXIuc2VsZWN0KCJ0ZC54LWRhdGUtbXAteWVhciIpO3RoaXMubXBNb250aHMuZWFjaChmdW5jdGlvbihjLGQsZSl7ZSs9MTtpZigoZSUyKT09PTApe2MuZG9tLnhtb250aD01K01hdGgucm91bmQoZSowLjUpfWVsc2V7Yy5kb20ueG1vbnRoPU1hdGgucm91bmQoKGUtMSkqMC41KX19KX19LHNob3dNb250aFBpY2tlcjpmdW5jdGlvbigpe2lmKCF0aGlzLmRpc2FibGVkKXt0aGlzLmNyZWF0ZU1vbnRoUGlja2VyKCk7dmFyIGE9dGhpcy5lbC5nZXRTaXplKCk7dGhpcy5tb250aFBpY2tlci5zZXRTaXplKGEpO3RoaXMubW9udGhQaWNrZXIuY2hpbGQoInRhYmxlIikuc2V0U2l6ZShhKTt0aGlzLm1wU2VsTW9udGg9KHRoaXMuYWN0aXZlRGF0ZXx8dGhpcy52YWx1ZSkuZ2V0TW9udGgoKTt0aGlzLnVwZGF0ZU1QTW9udGgodGhpcy5tcFNlbE1vbnRoKTt0aGlzLm1wU2VsWWVhcj0odGhpcy5hY3RpdmVEYXRlfHx0aGlzLnZhbHVlKS5nZXRGdWxsWWVhcigpO3RoaXMudXBkYXRlTVBZZWFyKHRoaXMubXBTZWxZZWFyKTt0aGlzLm1vbnRoUGlja2VyLnNsaWRlSW4oInQiLHtkdXJhdGlvbjowLjJ9KX19LHVwZGF0ZU1QWWVhcjpmdW5jdGlvbihlKXt0aGlzLm1weWVhcj1lO3ZhciBjPXRoaXMubXBZZWFycy5lbGVtZW50cztmb3IodmFyIGI9MTtiPD0xMDtiKyspe3ZhciBkPWNbYi0xXSxhO2lmKChiJTIpPT09MCl7YT1lK01hdGgucm91bmQoYiowLjUpO2QuZmlyc3RDaGlsZC5pbm5lckhUTUw9YTtkLnh5ZWFyPWF9ZWxzZXthPWUtKDUtTWF0aC5yb3VuZChiKjAuNSkpO2QuZmlyc3RDaGlsZC5pbm5lckhUTUw9YTtkLnh5ZWFyPWF9dGhpcy5tcFllYXJzLml0ZW0oYi0xKVthPT10aGlzLm1wU2VsWWVhcj8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKCJ4LWRhdGUtbXAtc2VsIil9fSx1cGRhdGVNUE1vbnRoOmZ1bmN0aW9uKGEpe3RoaXMubXBNb250aHMuZWFjaChmdW5jdGlvbihiLGMsZCl7YltiLmRvbS54bW9udGg9PWE/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgieC1kYXRlLW1wLXNlbCIpfSl9LHNlbGVjdE1QTW9udGg6ZnVuY3Rpb24oYSl7fSxvbk1vbnRoQ2xpY2s6ZnVuY3Rpb24oZyxiKXtnLnN0b3BFdmVudCgpO3ZhciBjPW5ldyBFeHQuRWxlbWVudChiKSxhO2lmKGMuaXMoImJ1dHRvbi54LWRhdGUtbXAtY2FuY2VsIikpe3RoaXMuaGlkZU1vbnRoUGlja2VyKCl9ZWxzZXtpZihjLmlzKCJidXR0b24ueC1kYXRlLW1wLW9rIikpe3ZhciBoPW5ldyBEYXRlKHRoaXMubXBTZWxZZWFyLHRoaXMubXBTZWxNb250aCwodGhpcy5hY3RpdmVEYXRlfHx0aGlzLnZhbHVlKS5nZXREYXRlKCkpO2lmKGguZ2V0TW9udGgoKSE9dGhpcy5tcFNlbE1vbnRoKXtoPW5ldyBEYXRlKHRoaXMubXBTZWxZZWFyLHRoaXMubXBTZWxNb250aCwxKS5nZXRMYXN0RGF0ZU9mTW9udGgoKX10aGlzLnVwZGF0ZShoKTt0aGlzLmhpZGVNb250aFBpY2tlcigpfWVsc2V7aWYoKGE9Yy51cCgidGQueC1kYXRlLW1wLW1vbnRoIiwyKSkpe3RoaXMubXBNb250aHMucmVtb3ZlQ2xhc3MoIngtZGF0ZS1tcC1zZWwiKTthLmFkZENsYXNzKCJ4LWRhdGUtbXAtc2VsIik7dGhpcy5tcFNlbE1vbnRoPWEuZG9tLnhtb250aH1lbHNle2lmKChhPWMudXAoInRkLngtZGF0ZS1tcC15ZWFyIiwyKSkpe3RoaXMubXBZZWFycy5yZW1vdmVDbGFzcygieC1kYXRlLW1wLXNlbCIpO2EuYWRkQ2xhc3MoIngtZGF0ZS1tcC1zZWwiKTt0aGlzLm1wU2VsWWVhcj1hLmRvbS54eWVhcn1lbHNle2lmKGMuaXMoImEueC1kYXRlLW1wLXByZXYiKSl7dGhpcy51cGRhdGVNUFllYXIodGhpcy5tcHllYXItMTApfWVsc2V7aWYoYy5pcygiYS54LWRhdGUtbXAtbmV4dCIpKXt0aGlzLnVwZGF0ZU1QWWVhcih0aGlzLm1weWVhcisxMCl9fX19fX19LG9uTW9udGhEYmxDbGljazpmdW5jdGlvbihkLGIpe2Quc3RvcEV2ZW50KCk7dmFyIGM9bmV3IEV4dC5FbGVtZW50KGIpLGE7aWYoKGE9Yy51cCgidGQueC1kYXRlLW1wLW1vbnRoIiwyKSkpe3RoaXMudXBkYXRlKG5ldyBEYXRlKHRoaXMubXBTZWxZZWFyLGEuZG9tLnhtb250aCwodGhpcy5hY3RpdmVEYXRlfHx0aGlzLnZhbHVlKS5nZXREYXRlKCkpKTt0aGlzLmhpZGVNb250aFBpY2tlcigpfWVsc2V7aWYoKGE9Yy51cCgidGQueC1kYXRlLW1wLXllYXIiLDIpKSl7dGhpcy51cGRhdGUobmV3IERhdGUoYS5kb20ueHllYXIsdGhpcy5tcFNlbE1vbnRoLCh0aGlzLmFjdGl2ZURhdGV8fHRoaXMudmFsdWUpLmdldERhdGUoKSkpO3RoaXMuaGlkZU1vbnRoUGlja2VyKCl9fX0saGlkZU1vbnRoUGlja2VyOmZ1bmN0aW9uKGEpe2lmKHRoaXMubW9udGhQaWNrZXIpe2lmKGE9PT10cnVlKXt0aGlzLm1vbnRoUGlja2VyLmhpZGUoKX1lbHNle3RoaXMubW9udGhQaWNrZXIuc2xpZGVPdXQoInQiLHtkdXJhdGlvbjowLjJ9KX19fSxzaG93UHJldk1vbnRoOmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoIm1vIiwtMSkpfSxzaG93TmV4dE1vbnRoOmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoIm1vIiwxKSl9LHNob3dQcmV2WWVhcjpmdW5jdGlvbigpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoInkiLC0xKSl9LHNob3dOZXh0WWVhcjpmdW5jdGlvbigpe3RoaXMudXBkYXRlKHRoaXMuYWN0aXZlRGF0ZS5hZGQoInkiLDEpKX0saGFuZGxlTW91c2VXaGVlbDpmdW5jdGlvbihhKXthLnN0b3BFdmVudCgpO2lmKCF0aGlzLmRpc2FibGVkKXt2YXIgYj1hLmdldFdoZWVsRGVsdGEoKTtpZihiPjApe3RoaXMuc2hvd1ByZXZNb250aCgpfWVsc2V7aWYoYjwwKXt0aGlzLnNob3dOZXh0TW9udGgoKX19fX0saGFuZGxlRGF0ZUNsaWNrOmZ1bmN0aW9uKGIsYSl7Yi5zdG9wRXZlbnQoKTtpZighdGhpcy5kaXNhYmxlZCYmYS5kYXRlVmFsdWUmJiFFeHQuZmx5KGEucGFyZW50Tm9kZSkuaGFzQ2xhc3MoIngtZGF0ZS1kaXNhYmxlZCIpKXt0aGlzLmNhbmNlbEZvY3VzPXRoaXMuZm9jdXNPblNlbGVjdD09PWZhbHNlO3RoaXMuc2V0VmFsdWUobmV3IERhdGUoYS5kYXRlVmFsdWUpKTtkZWxldGUgdGhpcy5jYW5jZWxGb2N1czt0aGlzLmZpcmVFdmVudCgic2VsZWN0Iix0aGlzLHRoaXMudmFsdWUpfX0sc2VsZWN0VG9kYXk6ZnVuY3Rpb24oKXtpZih0aGlzLnRvZGF5QnRuJiYhdGhpcy50b2RheUJ0bi5kaXNhYmxlZCl7dGhpcy5zZXRWYWx1ZShuZXcgRGF0ZSgpLmNsZWFyVGltZSgpKTt0aGlzLmZpcmVFdmVudCgic2VsZWN0Iix0aGlzLHRoaXMudmFsdWUpfX0sdXBkYXRlOmZ1bmN0aW9uKEcsQSl7aWYodGhpcy5yZW5kZXJlZCl7dmFyIGE9dGhpcy5hY3RpdmVEYXRlLHA9dGhpcy5pc1Zpc2libGUoKTt0aGlzLmFjdGl2ZURhdGU9RztpZighQSYmYSYmdGhpcy5lbCl7dmFyIG89Ry5nZXRUaW1lKCk7aWYoYS5nZXRNb250aCgpPT1HLmdldE1vbnRoKCkmJmEuZ2V0RnVsbFllYXIoKT09Ry5nZXRGdWxsWWVhcigpKXt0aGlzLmNlbGxzLnJlbW92ZUNsYXNzKCJ4LWRhdGUtc2VsZWN0ZWQiKTt0aGlzLmNlbGxzLmVhY2goZnVuY3Rpb24oZCl7aWYoZC5kb20uZmlyc3RDaGlsZC5kYXRlVmFsdWU9PW8pe2QuYWRkQ2xhc3MoIngtZGF0ZS1zZWxlY3RlZCIpO2lmKHAmJiF0aGlzLmNhbmNlbEZvY3VzKXtFeHQuZmx5KGQuZG9tLmZpcnN0Q2hpbGQpLmZvY3VzKDUwKX1yZXR1cm4gZmFsc2V9fSx0aGlzKTtyZXR1cm59fXZhciBrPUcuZ2V0RGF5c0luTW9udGgoKSxxPUcuZ2V0Rmlyc3REYXRlT2ZNb250aCgpLGc9cS5nZXREYXkoKS10aGlzLnN0YXJ0RGF5O2lmKGc8MCl7Zys9N31rKz1nO3ZhciBCPUcuYWRkKCJtbyIsLTEpLGg9Qi5nZXREYXlzSW5Nb250aCgpLWcsZT10aGlzLmNlbGxzLmVsZW1lbnRzLHI9dGhpcy50ZXh0Tm9kZXMsRD0obmV3IERhdGUoQi5nZXRGdWxsWWVhcigpLEIuZ2V0TW9udGgoKSxoLHRoaXMuaW5pdEhvdXIpKSxDPW5ldyBEYXRlKCkuY2xlYXJUaW1lKCkuZ2V0VGltZSgpLHY9Ry5jbGVhclRpbWUodHJ1ZSkuZ2V0VGltZSgpLHU9dGhpcy5taW5EYXRlP3RoaXMubWluRGF0ZS5jbGVhclRpbWUodHJ1ZSk6TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLHk9dGhpcy5tYXhEYXRlP3RoaXMubWF4RGF0ZS5jbGVhclRpbWUodHJ1ZSk6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLEY9dGhpcy5kaXNhYmxlZERhdGVzUkUscz10aGlzLmRpc2FibGVkRGF0ZXNUZXh0LEk9dGhpcy5kaXNhYmxlZERheXM/dGhpcy5kaXNhYmxlZERheXMuam9pbigiIik6ZmFsc2UsRT10aGlzLmRpc2FibGVkRGF5c1RleHQsej10aGlzLmZvcm1hdDtpZih0aGlzLnNob3dUb2RheSl7dmFyIG09bmV3IERhdGUoKS5jbGVhclRpbWUoKSxjPShtPHV8fG0+eXx8KEYmJnomJkYudGVzdChtLmRhdGVGb3JtYXQoeikpKXx8KEkmJkkuaW5kZXhPZihtLmdldERheSgpKSE9LTEpKTtpZighdGhpcy5kaXNhYmxlZCl7dGhpcy50b2RheUJ0bi5zZXREaXNhYmxlZChjKTt0aGlzLnRvZGF5S2V5TGlzdGVuZXJbYz8iZGlzYWJsZSI6ImVuYWJsZSJdKCl9fXZhciBsPWZ1bmN0aW9uKEosZCl7ZC50aXRsZT0iIjt2YXIgaT1ELmNsZWFyVGltZSh0cnVlKS5nZXRUaW1lKCk7ZC5maXJzdENoaWxkLmRhdGVWYWx1ZT1pO2lmKGk9PUMpe2QuY2xhc3NOYW1lKz0iIHgtZGF0ZS10b2RheSI7ZC50aXRsZT1KLnRvZGF5VGV4dH1pZihpPT12KXtkLmNsYXNzTmFtZSs9IiB4LWRhdGUtc2VsZWN0ZWQiO2lmKHApe0V4dC5mbHkoZC5maXJzdENoaWxkKS5mb2N1cyg1MCl9fWlmKGk8dSl7ZC5jbGFzc05hbWU9IiB4LWRhdGUtZGlzYWJsZWQiO2QudGl0bGU9Si5taW5UZXh0O3JldHVybn1pZihpPnkpe2QuY2xhc3NOYW1lPSIgeC1kYXRlLWRpc2FibGVkIjtkLnRpdGxlPUoubWF4VGV4dDtyZXR1cm59aWYoSSl7aWYoSS5pbmRleE9mKEQuZ2V0RGF5KCkpIT0tMSl7ZC50aXRsZT1FO2QuY2xhc3NOYW1lPSIgeC1kYXRlLWRpc2FibGVkIn19aWYoRiYmeil7dmFyIHc9RC5kYXRlRm9ybWF0KHopO2lmKEYudGVzdCh3KSl7ZC50aXRsZT1zLnJlcGxhY2UoIiUwIix3KTtkLmNsYXNzTmFtZT0iIHgtZGF0ZS1kaXNhYmxlZCJ9fX07dmFyIHg9MDtmb3IoO3g8Zzt4Kyspe3JbeF0uaW5uZXJIVE1MPSgrK2gpO0Quc2V0RGF0ZShELmdldERhdGUoKSsxKTtlW3hdLmNsYXNzTmFtZT0ieC1kYXRlLXByZXZkYXkiO2wodGhpcyxlW3hdKX1mb3IoO3g8azt4Kyspe3ZhciBiPXgtZysxO3JbeF0uaW5uZXJIVE1MPShiKTtELnNldERhdGUoRC5nZXREYXRlKCkrMSk7ZVt4XS5jbGFzc05hbWU9IngtZGF0ZS1hY3RpdmUiO2wodGhpcyxlW3hdKX12YXIgSD0wO2Zvcig7eDw0Mjt4Kyspe3JbeF0uaW5uZXJIVE1MPSgrK0gpO0Quc2V0RGF0ZShELmdldERhdGUoKSsxKTtlW3hdLmNsYXNzTmFtZT0ieC1kYXRlLW5leHRkYXkiO2wodGhpcyxlW3hdKX10aGlzLm1idG4uc2V0VGV4dCh0aGlzLm1vbnRoTmFtZXNbRy5nZXRNb250aCgpXSsiICIrRy5nZXRGdWxsWWVhcigpKTtpZighdGhpcy5pbnRlcm5hbFJlbmRlcil7dmFyIGo9dGhpcy5lbC5kb20uZmlyc3RDaGlsZCxuPWoub2Zmc2V0V2lkdGg7dGhpcy5lbC5zZXRXaWR0aChuK3RoaXMuZWwuZ2V0Qm9yZGVyV2lkdGgoImxyIikpO0V4dC5mbHkoaikuc2V0V2lkdGgobik7dGhpcy5pbnRlcm5hbFJlbmRlcj10cnVlO2lmKEV4dC5pc09wZXJhJiYhdGhpcy5zZWNvbmRQYXNzKXtqLnJvd3NbMF0uY2VsbHNbMV0uc3R5bGUud2lkdGg9KG4tKGoucm93c1swXS5jZWxsc1swXS5vZmZzZXRXaWR0aCtqLnJvd3NbMF0uY2VsbHNbMl0ub2Zmc2V0V2lkdGgpKSsicHgiO3RoaXMuc2Vjb25kUGFzcz10cnVlO3RoaXMudXBkYXRlLmRlZmVyKDEwLHRoaXMsW0ddKX19fX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe0V4dC5kZXN0cm95KHRoaXMua2V5TmF2LHRoaXMubW9udGhQaWNrZXIsdGhpcy5ldmVudEVsLHRoaXMubWJ0bix0aGlzLm5leHRSZXBlYXRlcix0aGlzLnByZXZSZXBlYXRlcix0aGlzLmNlbGxzLmVsLHRoaXMudG9kYXlCdG4pO2RlbGV0ZSB0aGlzLnRleHROb2RlcztkZWxldGUgdGhpcy5jZWxscy5lbGVtZW50c319fSk7RXh0LnJlZygiZGF0ZXBpY2tlciIsRXh0LkRhdGVQaWNrZXIpO0V4dC5Mb2FkTWFzaz1mdW5jdGlvbihjLGIpe3RoaXMuZWw9RXh0LmdldChjKTtFeHQuYXBwbHkodGhpcyxiKTtpZih0aGlzLnN0b3JlKXt0aGlzLnN0b3JlLm9uKHtzY29wZTp0aGlzLGJlZm9yZWxvYWQ6dGhpcy5vbkJlZm9yZUxvYWQsbG9hZDp0aGlzLm9uTG9hZCxleGNlcHRpb246dGhpcy5vbkxvYWR9KTt0aGlzLnJlbW92ZU1hc2s9RXh0LnZhbHVlKHRoaXMucmVtb3ZlTWFzayxmYWxzZSl9ZWxzZXt2YXIgYT10aGlzLmVsLmdldFVwZGF0ZXIoKTthLnNob3dMb2FkSW5kaWNhdG9yPWZhbHNlO2Eub24oe3Njb3BlOnRoaXMsYmVmb3JldXBkYXRlOnRoaXMub25CZWZvcmVMb2FkLHVwZGF0ZTp0aGlzLm9uTG9hZCxmYWlsdXJlOnRoaXMub25Mb2FkfSk7dGhpcy5yZW1vdmVNYXNrPUV4dC52YWx1ZSh0aGlzLnJlbW92ZU1hc2ssdHJ1ZSl9fTtFeHQuTG9hZE1hc2sucHJvdG90eXBlPXttc2c6IkxvYWRpbmcuLi4iLG1zZ0NsczoieC1tYXNrLWxvYWRpbmciLGRpc2FibGVkOmZhbHNlLGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWV9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ZmFsc2V9LG9uTG9hZDpmdW5jdGlvbigpe3RoaXMuZWwudW5tYXNrKHRoaXMucmVtb3ZlTWFzayl9LG9uQmVmb3JlTG9hZDpmdW5jdGlvbigpe2lmKCF0aGlzLmRpc2FibGVkKXt0aGlzLmVsLm1hc2sodGhpcy5tc2csdGhpcy5tc2dDbHMpfX0sc2hvdzpmdW5jdGlvbigpe3RoaXMub25CZWZvcmVMb2FkKCl9LGhpZGU6ZnVuY3Rpb24oKXt0aGlzLm9uTG9hZCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5zdG9yZSl7dGhpcy5zdG9yZS51bigiYmVmb3JlbG9hZCIsdGhpcy5vbkJlZm9yZUxvYWQsdGhpcyk7dGhpcy5zdG9yZS51bigibG9hZCIsdGhpcy5vbkxvYWQsdGhpcyk7dGhpcy5zdG9yZS51bigiZXhjZXB0aW9uIix0aGlzLm9uTG9hZCx0aGlzKX1lbHNle3ZhciBhPXRoaXMuZWwuZ2V0VXBkYXRlcigpO2EudW4oImJlZm9yZXVwZGF0ZSIsdGhpcy5vbkJlZm9yZUxvYWQsdGhpcyk7YS51bigidXBkYXRlIix0aGlzLm9uTG9hZCx0aGlzKTthLnVuKCJmYWlsdXJlIix0aGlzLm9uTG9hZCx0aGlzKX19fTtFeHQuc2xpZGVyLlRodW1iPUV4dC5leHRlbmQoT2JqZWN0LHtkcmFnZ2luZzpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhfHx7fSx7Y2xzOiJ4LXNsaWRlci10aHVtYiIsY29uc3RyYWluOmZhbHNlfSk7RXh0LnNsaWRlci5UaHVtYi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTtpZih0aGlzLnNsaWRlci52ZXJ0aWNhbCl7RXh0LmFwcGx5KHRoaXMsRXh0LnNsaWRlci5UaHVtYi5WZXJ0aWNhbCl9fSxyZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLmVsPXRoaXMuc2xpZGVyLmlubmVyRWwuaW5zZXJ0Rmlyc3Qoe2Nsczp0aGlzLmNsc30pO3RoaXMuaW5pdEV2ZW50cygpfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlO3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXIuZGlzYWJsZWRDbGFzcyl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWU7dGhpcy5lbC5hZGRDbGFzcyh0aGlzLnNsaWRlci5kaXNhYmxlZENsYXNzKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWw7YS5hZGRDbGFzc09uT3ZlcigieC1zbGlkZXItdGh1bWItb3ZlciIpO3RoaXMudHJhY2tlcj1uZXcgRXh0LmRkLkRyYWdUcmFja2VyKHtvbkJlZm9yZVN0YXJ0OnRoaXMub25CZWZvcmVEcmFnU3RhcnQuY3JlYXRlRGVsZWdhdGUodGhpcyksb25TdGFydDp0aGlzLm9uRHJhZ1N0YXJ0LmNyZWF0ZURlbGVnYXRlKHRoaXMpLG9uRHJhZzp0aGlzLm9uRHJhZy5jcmVhdGVEZWxlZ2F0ZSh0aGlzKSxvbkVuZDp0aGlzLm9uRHJhZ0VuZC5jcmVhdGVEZWxlZ2F0ZSh0aGlzKSx0b2xlcmFuY2U6MyxhdXRvU3RhcnQ6MzAwfSk7dGhpcy50cmFja2VyLmluaXRFbChhKX0sb25CZWZvcmVEcmFnU3RhcnQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfWVsc2V7dGhpcy5zbGlkZXIucHJvbW90ZVRodW1iKHRoaXMpO3JldHVybiB0cnVlfX0sb25EcmFnU3RhcnQ6ZnVuY3Rpb24oYSl7dGhpcy5lbC5hZGRDbGFzcygieC1zbGlkZXItdGh1bWItZHJhZyIpO3RoaXMuZHJhZ2dpbmc9dHJ1ZTt0aGlzLmRyYWdTdGFydFZhbHVlPXRoaXMudmFsdWU7dGhpcy5zbGlkZXIuZmlyZUV2ZW50KCJkcmFnc3RhcnQiLHRoaXMuc2xpZGVyLGEsdGhpcyl9LG9uRHJhZzpmdW5jdGlvbihnKXt2YXIgYz10aGlzLnNsaWRlcixiPXRoaXMuaW5kZXgsZD10aGlzLmdldE5ld1ZhbHVlKCk7aWYodGhpcy5jb25zdHJhaW4pe3ZhciBhPWMudGh1bWJzW2IrMV0saD1jLnRodW1ic1tiLTFdO2lmKGghPXVuZGVmaW5lZCYmZDw9aC52YWx1ZSl7ZD1oLnZhbHVlfWlmKGEhPXVuZGVmaW5lZCYmZD49YS52YWx1ZSl7ZD1hLnZhbHVlfX1jLnNldFZhbHVlKGIsZCxmYWxzZSk7Yy5maXJlRXZlbnQoImRyYWciLGMsZyx0aGlzKX0sZ2V0TmV3VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNsaWRlcixiPWEuaW5uZXJFbC50cmFuc2xhdGVQb2ludHModGhpcy50cmFja2VyLmdldFhZKCkpO3JldHVybiBFeHQudXRpbC5Gb3JtYXQucm91bmQoYS5yZXZlcnNlVmFsdWUoYi5sZWZ0KSxhLmRlY2ltYWxQcmVjaXNpb24pfSxvbkRyYWdFbmQ6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5zbGlkZXIsYj10aGlzLnZhbHVlO3RoaXMuZWwucmVtb3ZlQ2xhc3MoIngtc2xpZGVyLXRodW1iLWRyYWciKTt0aGlzLmRyYWdnaW5nPWZhbHNlO2EuZmlyZUV2ZW50KCJkcmFnZW5kIixhLGMpO2lmKHRoaXMuZHJhZ1N0YXJ0VmFsdWUhPWIpe2EuZmlyZUV2ZW50KCJjaGFuZ2Vjb21wbGV0ZSIsYSxiLHRoaXMpfX0sZGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95TWVtYmVycyh0aGlzLCJ0cmFja2VyIiwiZWwiKX19KTtFeHQuc2xpZGVyLk11bHRpU2xpZGVyPUV4dC5leHRlbmQoRXh0LkJveENvbXBvbmVudCx7dmVydGljYWw6ZmFsc2UsbWluVmFsdWU6MCxtYXhWYWx1ZToxMDAsZGVjaW1hbFByZWNpc2lvbjowLGtleUluY3JlbWVudDoxLGluY3JlbWVudDowLGNsaWNrUmFuZ2U6WzUsMTVdLGNsaWNrVG9DaGFuZ2U6dHJ1ZSxhbmltYXRlOnRydWUsY29uc3RyYWluVGh1bWJzOnRydWUsdG9wVGh1bWJaSW5kZXg6MTAwMDAsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe2lmKCFFeHQuaXNEZWZpbmVkKHRoaXMudmFsdWUpKXt0aGlzLnZhbHVlPXRoaXMubWluVmFsdWV9dGhpcy50aHVtYnM9W107RXh0LnNsaWRlci5NdWx0aVNsaWRlci5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmtleUluY3JlbWVudD1NYXRoLm1heCh0aGlzLmluY3JlbWVudCx0aGlzLmtleUluY3JlbWVudCk7dGhpcy5hZGRFdmVudHMoImJlZm9yZWNoYW5nZSIsImNoYW5nZSIsImNoYW5nZWNvbXBsZXRlIiwiZHJhZ3N0YXJ0IiwiZHJhZyIsImRyYWdlbmQiKTtpZih0aGlzLnZhbHVlcz09dW5kZWZpbmVkfHxFeHQuaXNFbXB0eSh0aGlzLnZhbHVlcykpe3RoaXMudmFsdWVzPVswXX12YXIgYT10aGlzLnZhbHVlcztmb3IodmFyIGI9MDtiPGEubGVuZ3RoO2IrKyl7dGhpcy5hZGRUaHVtYihhW2JdKX1pZih0aGlzLnZlcnRpY2FsKXtFeHQuYXBwbHkodGhpcyxFeHQuc2xpZGVyLlZlcnRpY2FsKX19LGFkZFRodW1iOmZ1bmN0aW9uKGIpe3ZhciBhPW5ldyBFeHQuc2xpZGVyLlRodW1iKHt2YWx1ZTpiLHNsaWRlcjp0aGlzLGluZGV4OnRoaXMudGh1bWJzLmxlbmd0aCxjb25zdHJhaW46dGhpcy5jb25zdHJhaW5UaHVtYnN9KTt0aGlzLnRodW1icy5wdXNoKGEpO2lmKHRoaXMucmVuZGVyZWQpe2EucmVuZGVyKCl9fSxwcm9tb3RlVGh1bWI6ZnVuY3Rpb24oZCl7dmFyIGE9dGhpcy50aHVtYnMsZyxiO2Zvcih2YXIgZT0wLGM9YS5sZW5ndGg7ZTxjO2UrKyl7Yj1hW2VdO2lmKGI9PWQpe2c9dGhpcy50b3BUaHVtYlpJbmRleH1lbHNle2c9IiJ9Yi5lbC5zZXRTdHlsZSgiekluZGV4IixnKX19LG9uUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5hdXRvRWw9e2NsczoieC1zbGlkZXIgIisodGhpcy52ZXJ0aWNhbD8ieC1zbGlkZXItdmVydCI6Ingtc2xpZGVyLWhvcnoiKSxjbjp7Y2xzOiJ4LXNsaWRlci1lbmQiLGNuOntjbHM6Ingtc2xpZGVyLWlubmVyIixjbjpbe3RhZzoiYSIsY2xzOiJ4LXNsaWRlci1mb2N1cyIsaHJlZjoiIyIsdGFiSW5kZXg6Ii0xIixoaWRlZm9jdXM6Im9uIn1dfX19O0V4dC5zbGlkZXIuTXVsdGlTbGlkZXIuc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5lbmRFbD10aGlzLmVsLmZpcnN0KCk7dGhpcy5pbm5lckVsPXRoaXMuZW5kRWwuZmlyc3QoKTt0aGlzLmZvY3VzRWw9dGhpcy5pbm5lckVsLmNoaWxkKCIueC1zbGlkZXItZm9jdXMiKTtmb3IodmFyIGI9MDtiPHRoaXMudGh1bWJzLmxlbmd0aDtiKyspe3RoaXMudGh1bWJzW2JdLnJlbmRlcigpfXZhciBhPXRoaXMuaW5uZXJFbC5jaGlsZCgiLngtc2xpZGVyLXRodW1iIik7dGhpcy5oYWxmVGh1bWI9KHRoaXMudmVydGljYWw/YS5nZXRIZWlnaHQoKTphLmdldFdpZHRoKCkpLzI7dGhpcy5pbml0RXZlbnRzKCl9LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLm1vbih0aGlzLmVsLHtzY29wZTp0aGlzLG1vdXNlZG93bjp0aGlzLm9uTW91c2VEb3duLGtleWRvd246dGhpcy5vbktleURvd259KTt0aGlzLmZvY3VzRWwuc3dhbGxvd0V2ZW50KCJjbGljayIsdHJ1ZSl9LG9uTW91c2VEb3duOmZ1bmN0aW9uKGQpe2lmKHRoaXMuZGlzYWJsZWQpe3JldHVybn12YXIgYz1mYWxzZTtmb3IodmFyIGI9MDtiPHRoaXMudGh1bWJzLmxlbmd0aDtiKyspe2M9Y3x8ZC50YXJnZXQ9PXRoaXMudGh1bWJzW2JdLmVsLmRvbX1pZih0aGlzLmNsaWNrVG9DaGFuZ2UmJiFjKXt2YXIgYT10aGlzLmlubmVyRWwudHJhbnNsYXRlUG9pbnRzKGQuZ2V0WFkoKSk7dGhpcy5vbkNsaWNrQ2hhbmdlKGEpfXRoaXMuZm9jdXMoKX0sb25DbGlja0NoYW5nZTpmdW5jdGlvbihjKXtpZihjLnRvcD50aGlzLmNsaWNrUmFuZ2VbMF0mJmMudG9wPHRoaXMuY2xpY2tSYW5nZVsxXSl7dmFyIGE9dGhpcy5nZXROZWFyZXN0KGMsImxlZnQiKSxiPWEuaW5kZXg7dGhpcy5zZXRWYWx1ZShiLEV4dC51dGlsLkZvcm1hdC5yb3VuZCh0aGlzLnJldmVyc2VWYWx1ZShjLmxlZnQpLHRoaXMuZGVjaW1hbFByZWNpc2lvbiksdW5kZWZpbmVkLHRydWUpfX0sZ2V0TmVhcmVzdDpmdW5jdGlvbihrLGIpe3ZhciBtPWI9PSJ0b3AiP3RoaXMuaW5uZXJFbC5nZXRIZWlnaHQoKS1rW2JdOmtbYl0sZz10aGlzLnJldmVyc2VWYWx1ZShtKSxqPSh0aGlzLm1heFZhbHVlLXRoaXMubWluVmFsdWUpKzUsZT0wLGM9bnVsbDtmb3IodmFyIGQ9MDtkPHRoaXMudGh1bWJzLmxlbmd0aDtkKyspe3ZhciBhPXRoaXMudGh1bWJzW2RdLGw9YS52YWx1ZSxoPU1hdGguYWJzKGwtZyk7aWYoTWF0aC5hYnMoaDw9aikpe2M9YTtlPWQ7aj1ofX1yZXR1cm4gY30sb25LZXlEb3duOmZ1bmN0aW9uKGIpe2lmKHRoaXMuZGlzYWJsZWR8fHRoaXMudGh1bWJzLmxlbmd0aCE9PTEpe2IucHJldmVudERlZmF1bHQoKTtyZXR1cm59dmFyIGE9Yi5nZXRLZXkoKSxjO3N3aXRjaChhKXtjYXNlIGIuVVA6Y2FzZSBiLlJJR0hUOmIuc3RvcEV2ZW50KCk7Yz1iLmN0cmxLZXk/dGhpcy5tYXhWYWx1ZTp0aGlzLmdldFZhbHVlKDApK3RoaXMua2V5SW5jcmVtZW50O3RoaXMuc2V0VmFsdWUoMCxjLHVuZGVmaW5lZCx0cnVlKTticmVhaztjYXNlIGIuRE9XTjpjYXNlIGIuTEVGVDpiLnN0b3BFdmVudCgpO2M9Yi5jdHJsS2V5P3RoaXMubWluVmFsdWU6dGhpcy5nZXRWYWx1ZSgwKS10aGlzLmtleUluY3JlbWVudDt0aGlzLnNldFZhbHVlKDAsYyx1bmRlZmluZWQsdHJ1ZSk7YnJlYWs7ZGVmYXVsdDpiLnByZXZlbnREZWZhdWx0KCl9fSxkb1NuYXA6ZnVuY3Rpb24oYil7aWYoISh0aGlzLmluY3JlbWVudCYmYikpe3JldHVybiBifXZhciBkPWIsYz10aGlzLmluY3JlbWVudCxhPWIlYztpZihhIT0wKXtkLT1hO2lmKGEqMj49Yyl7ZCs9Y31lbHNle2lmKGEqMjwtYyl7ZC09Y319fXJldHVybiBkLmNvbnN0cmFpbih0aGlzLm1pblZhbHVlLHRoaXMubWF4VmFsdWUpfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe0V4dC5zbGlkZXIuTXVsdGlTbGlkZXIuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBjPTA7Yzx0aGlzLnRodW1icy5sZW5ndGg7YysrKXt2YXIgYj10aGlzLnRodW1ic1tjXTtpZihiLnZhbHVlIT09dW5kZWZpbmVkKXt2YXIgYT10aGlzLm5vcm1hbGl6ZVZhbHVlKGIudmFsdWUpO2lmKGEhPT1iLnZhbHVlKXt0aGlzLnNldFZhbHVlKGMsYSxmYWxzZSl9ZWxzZXt0aGlzLm1vdmVUaHVtYihjLHRoaXMudHJhbnNsYXRlVmFsdWUoYSksZmFsc2UpfX19fSxnZXRSYXRpbzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaW5uZXJFbC5nZXRXaWR0aCgpLGI9dGhpcy5tYXhWYWx1ZS10aGlzLm1pblZhbHVlO3JldHVybiBiPT0wP2E6KGEvYil9LG5vcm1hbGl6ZVZhbHVlOmZ1bmN0aW9uKGEpe2E9dGhpcy5kb1NuYXAoYSk7YT1FeHQudXRpbC5Gb3JtYXQucm91bmQoYSx0aGlzLmRlY2ltYWxQcmVjaXNpb24pO2E9YS5jb25zdHJhaW4odGhpcy5taW5WYWx1ZSx0aGlzLm1heFZhbHVlKTtyZXR1cm4gYX0sc2V0TWluVmFsdWU6ZnVuY3Rpb24oZSl7dGhpcy5taW5WYWx1ZT1lO3ZhciBkPTAsYj10aGlzLnRodW1icyxhPWIubGVuZ3RoLGM7Zm9yKDtkPGE7KytkKXtjPWJbZF07Yy52YWx1ZT1jLnZhbHVlPGU/ZTpjLnZhbHVlfXRoaXMuc3luY1RodW1iKCl9LHNldE1heFZhbHVlOmZ1bmN0aW9uKGUpe3RoaXMubWF4VmFsdWU9ZTt2YXIgZD0wLGI9dGhpcy50aHVtYnMsYT1iLmxlbmd0aCxjO2Zvcig7ZDxhOysrZCl7Yz1iW2RdO2MudmFsdWU9Yy52YWx1ZT5lP2U6Yy52YWx1ZX10aGlzLnN5bmNUaHVtYigpfSxzZXRWYWx1ZTpmdW5jdGlvbihkLGMsYixnKXt2YXIgYT10aGlzLnRodW1ic1tkXSxlPWEuZWw7Yz10aGlzLm5vcm1hbGl6ZVZhbHVlKGMpO2lmKGMhPT1hLnZhbHVlJiZ0aGlzLmZpcmVFdmVudCgiYmVmb3JlY2hhbmdlIix0aGlzLGMsYS52YWx1ZSxhKSE9PWZhbHNlKXthLnZhbHVlPWM7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5tb3ZlVGh1bWIoZCx0aGlzLnRyYW5zbGF0ZVZhbHVlKGMpLGIhPT1mYWxzZSk7dGhpcy5maXJlRXZlbnQoImNoYW5nZSIsdGhpcyxjLGEpO2lmKGcpe3RoaXMuZmlyZUV2ZW50KCJjaGFuZ2Vjb21wbGV0ZSIsdGhpcyxjLGEpfX19fSx0cmFuc2xhdGVWYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdldFJhdGlvKCk7cmV0dXJuKGEqYiktKHRoaXMubWluVmFsdWUqYiktdGhpcy5oYWxmVGh1bWJ9LHJldmVyc2VWYWx1ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldFJhdGlvKCk7cmV0dXJuKGIrKHRoaXMubWluVmFsdWUqYSkpL2F9LG1vdmVUaHVtYjpmdW5jdGlvbihkLGMsYil7dmFyIGE9dGhpcy50aHVtYnNbZF0uZWw7aWYoIWJ8fHRoaXMuYW5pbWF0ZT09PWZhbHNlKXthLnNldExlZnQoYyl9ZWxzZXthLnNoaWZ0KHtsZWZ0OmMsc3RvcEZ4OnRydWUsZHVyYXRpb246MC4zNX0pfX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmZvY3VzRWwuZm9jdXMoMTApfSxvblJlc2l6ZTpmdW5jdGlvbihjLGUpe3ZhciBiPXRoaXMudGh1bWJzLGE9Yi5sZW5ndGgsZD0wO2Zvcig7ZDxhOysrZCl7YltkXS5lbC5zdG9wRngoKX1pZihFeHQuaXNOdW1iZXIoYykpe3RoaXMuaW5uZXJFbC5zZXRXaWR0aChjLSh0aGlzLmVsLmdldFBhZGRpbmcoImwiKSt0aGlzLmVuZEVsLmdldFBhZGRpbmcoInIiKSkpfXRoaXMuc3luY1RodW1iKCk7RXh0LnNsaWRlci5NdWx0aVNsaWRlci5zdXBlcmNsYXNzLm9uUmVzaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25EaXNhYmxlOmZ1bmN0aW9uKCl7RXh0LnNsaWRlci5NdWx0aVNsaWRlci5zdXBlcmNsYXNzLm9uRGlzYWJsZS5jYWxsKHRoaXMpO2Zvcih2YXIgYj0wO2I8dGhpcy50aHVtYnMubGVuZ3RoO2IrKyl7dmFyIGE9dGhpcy50aHVtYnNbYl0sYz1hLmVsO2EuZGlzYWJsZSgpO2lmKEV4dC5pc0lFKXt2YXIgZD1jLmdldFhZKCk7Yy5oaWRlKCk7dGhpcy5pbm5lckVsLmFkZENsYXNzKHRoaXMuZGlzYWJsZWRDbGFzcykuZG9tLmRpc2FibGVkPXRydWU7aWYoIXRoaXMudGh1bWJIb2xkZXIpe3RoaXMudGh1bWJIb2xkZXI9dGhpcy5lbmRFbC5jcmVhdGVDaGlsZCh7Y2xzOiJ4LXNsaWRlci10aHVtYiAiK3RoaXMuZGlzYWJsZWRDbGFzc30pfXRoaXMudGh1bWJIb2xkZXIuc2hvdygpLnNldFhZKGQpfX19LG9uRW5hYmxlOmZ1bmN0aW9uKCl7RXh0LnNsaWRlci5NdWx0aVNsaWRlci5zdXBlcmNsYXNzLm9uRW5hYmxlLmNhbGwodGhpcyk7Zm9yKHZhciBiPTA7Yjx0aGlzLnRodW1icy5sZW5ndGg7YisrKXt2YXIgYT10aGlzLnRodW1ic1tiXSxjPWEuZWw7YS5lbmFibGUoKTtpZihFeHQuaXNJRSl7dGhpcy5pbm5lckVsLnJlbW92ZUNsYXNzKHRoaXMuZGlzYWJsZWRDbGFzcykuZG9tLmRpc2FibGVkPWZhbHNlO2lmKHRoaXMudGh1bWJIb2xkZXIpe3RoaXMudGh1bWJIb2xkZXIuaGlkZSgpfWMuc2hvdygpO3RoaXMuc3luY1RodW1iKCl9fX0sc3luY1RodW1iOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7Zm9yKHZhciBhPTA7YTx0aGlzLnRodW1icy5sZW5ndGg7YSsrKXt0aGlzLm1vdmVUaHVtYihhLHRoaXMudHJhbnNsYXRlVmFsdWUodGhpcy50aHVtYnNbYV0udmFsdWUpKX19fSxnZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aHVtYnNbYV0udmFsdWV9LGdldFZhbHVlczpmdW5jdGlvbigpe3ZhciBhPVtdO2Zvcih2YXIgYj0wO2I8dGhpcy50aHVtYnMubGVuZ3RoO2IrKyl7YS5wdXNoKHRoaXMudGh1bWJzW2JdLnZhbHVlKX1yZXR1cm4gYX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe3ZhciBiPXRoaXMudGh1bWJzO2Zvcih2YXIgYz0wLGE9Yi5sZW5ndGg7YzxhOysrYyl7YltjXS5kZXN0cm95KCk7YltjXT1udWxsfUV4dC5kZXN0cm95TWVtYmVycyh0aGlzLCJlbmRFbCIsImlubmVyRWwiLCJmb2N1c0VsIiwidGh1bWJIb2xkZXIiKTtFeHQuc2xpZGVyLk11bHRpU2xpZGVyLnN1cGVyY2xhc3MuYmVmb3JlRGVzdHJveS5jYWxsKHRoaXMpfX0pO0V4dC5yZWcoIm11bHRpc2xpZGVyIixFeHQuc2xpZGVyLk11bHRpU2xpZGVyKTtFeHQuc2xpZGVyLlNpbmdsZVNsaWRlcj1FeHQuZXh0ZW5kKEV4dC5zbGlkZXIuTXVsdGlTbGlkZXIse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2E9YXx8e307RXh0LmFwcGx5SWYoYSx7dmFsdWVzOlthLnZhbHVlfHwwXX0pO0V4dC5zbGlkZXIuU2luZ2xlU2xpZGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiBFeHQuc2xpZGVyLlNpbmdsZVNsaWRlci5zdXBlcmNsYXNzLmdldFZhbHVlLmNhbGwodGhpcywwKX0sc2V0VmFsdWU6ZnVuY3Rpb24oZCxiKXt2YXIgYz1FeHQudG9BcnJheShhcmd1bWVudHMpLGE9Yy5sZW5ndGg7aWYoYT09MXx8KGE8PTMmJnR5cGVvZiBhcmd1bWVudHNbMV0hPSJudW1iZXIiKSl7Yy51bnNoaWZ0KDApfXJldHVybiBFeHQuc2xpZGVyLlNpbmdsZVNsaWRlci5zdXBlcmNsYXNzLnNldFZhbHVlLmFwcGx5KHRoaXMsYyl9LHN5bmNUaHVtYjpmdW5jdGlvbigpe3JldHVybiBFeHQuc2xpZGVyLlNpbmdsZVNsaWRlci5zdXBlcmNsYXNzLnN5bmNUaHVtYi5hcHBseSh0aGlzLFswXS5jb25jYXQoYXJndW1lbnRzKSl9LGdldE5lYXJlc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50aHVtYnNbMF19fSk7RXh0LlNsaWRlcj1FeHQuc2xpZGVyLlNpbmdsZVNsaWRlcjtFeHQucmVnKCJzbGlkZXIiLEV4dC5zbGlkZXIuU2luZ2xlU2xpZGVyKTtFeHQuc2xpZGVyLlZlcnRpY2FsPXtvblJlc2l6ZTpmdW5jdGlvbihhLGIpe3RoaXMuaW5uZXJFbC5zZXRIZWlnaHQoYi0odGhpcy5lbC5nZXRQYWRkaW5nKCJ0IikrdGhpcy5lbmRFbC5nZXRQYWRkaW5nKCJiIikpKTt0aGlzLnN5bmNUaHVtYigpfSxnZXRSYXRpbzpmdW5jdGlvbigpe3ZhciBiPXRoaXMuaW5uZXJFbC5nZXRIZWlnaHQoKSxhPXRoaXMubWF4VmFsdWUtdGhpcy5taW5WYWx1ZTtyZXR1cm4gYi9hfSxtb3ZlVGh1bWI6ZnVuY3Rpb24oZCxjLGIpe3ZhciBhPXRoaXMudGh1bWJzW2RdLGU9YS5lbDtpZighYnx8dGhpcy5hbmltYXRlPT09ZmFsc2Upe2Uuc2V0Qm90dG9tKGMpfWVsc2V7ZS5zaGlmdCh7Ym90dG9tOmMsc3RvcEZ4OnRydWUsZHVyYXRpb246MC4zNX0pfX0sb25DbGlja0NoYW5nZTpmdW5jdGlvbihjKXtpZihjLmxlZnQ+dGhpcy5jbGlja1JhbmdlWzBdJiZjLmxlZnQ8dGhpcy5jbGlja1JhbmdlWzFdKXt2YXIgYT10aGlzLmdldE5lYXJlc3QoYywidG9wIiksYj1hLmluZGV4LGQ9dGhpcy5taW5WYWx1ZSt0aGlzLnJldmVyc2VWYWx1ZSh0aGlzLmlubmVyRWwuZ2V0SGVpZ2h0KCktYy50b3ApO3RoaXMuc2V0VmFsdWUoYixFeHQudXRpbC5Gb3JtYXQucm91bmQoZCx0aGlzLmRlY2ltYWxQcmVjaXNpb24pLHVuZGVmaW5lZCx0cnVlKX19fTtFeHQuc2xpZGVyLlRodW1iLlZlcnRpY2FsPXtnZXROZXdWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuc2xpZGVyLGM9Yi5pbm5lckVsLGQ9Yy50cmFuc2xhdGVQb2ludHModGhpcy50cmFja2VyLmdldFhZKCkpLGE9Yy5nZXRIZWlnaHQoKS1kLnRvcDtyZXR1cm4gYi5taW5WYWx1ZStFeHQudXRpbC5Gb3JtYXQucm91bmQoYS9iLmdldFJhdGlvKCksYi5kZWNpbWFsUHJlY2lzaW9uKX19O0V4dC5Qcm9ncmVzc0Jhcj1FeHQuZXh0ZW5kKEV4dC5Cb3hDb21wb25lbnQse2Jhc2VDbHM6IngtcHJvZ3Jlc3MiLGFuaW1hdGU6ZmFsc2Usd2FpdFRpbWVyOm51bGwsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5Qcm9ncmVzc0Jhci5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygidXBkYXRlIil9LG9uUmVuZGVyOmZ1bmN0aW9uKGQsYSl7dmFyIGM9bmV3IEV4dC5UZW1wbGF0ZSgnPGRpdiBjbGFzcz0ie2Nsc30td3JhcCI+JywnPGRpdiBjbGFzcz0ie2Nsc30taW5uZXIiPicsJzxkaXYgY2xhc3M9IntjbHN9LWJhciI+JywnPGRpdiBjbGFzcz0ie2Nsc30tdGV4dCI+JywiPGRpdj4mIzE2MDs8L2Rpdj4iLCI8L2Rpdj4iLCI8L2Rpdj4iLCc8ZGl2IGNsYXNzPSJ7Y2xzfS10ZXh0IHtjbHN9LXRleHQtYmFjayI+JywiPGRpdj4mIzE2MDs8L2Rpdj4iLCI8L2Rpdj4iLCI8L2Rpdj4iLCI8L2Rpdj4iKTt0aGlzLmVsPWE/Yy5pbnNlcnRCZWZvcmUoYSx7Y2xzOnRoaXMuYmFzZUNsc30sdHJ1ZSk6Yy5hcHBlbmQoZCx7Y2xzOnRoaXMuYmFzZUNsc30sdHJ1ZSk7aWYodGhpcy5pZCl7dGhpcy5lbC5kb20uaWQ9dGhpcy5pZH12YXIgYj10aGlzLmVsLmRvbS5maXJzdENoaWxkO3RoaXMucHJvZ3Jlc3NCYXI9RXh0LmdldChiLmZpcnN0Q2hpbGQpO2lmKHRoaXMudGV4dEVsKXt0aGlzLnRleHRFbD1FeHQuZ2V0KHRoaXMudGV4dEVsKTtkZWxldGUgdGhpcy50ZXh0VG9wRWx9ZWxzZXt0aGlzLnRleHRUb3BFbD1FeHQuZ2V0KHRoaXMucHJvZ3Jlc3NCYXIuZG9tLmZpcnN0Q2hpbGQpO3ZhciBlPUV4dC5nZXQoYi5jaGlsZE5vZGVzWzFdKTt0aGlzLnRleHRUb3BFbC5zZXRTdHlsZSgiei1pbmRleCIsOTkpLmFkZENsYXNzKCJ4LWhpZGRlbiIpO3RoaXMudGV4dEVsPW5ldyBFeHQuQ29tcG9zaXRlRWxlbWVudChbdGhpcy50ZXh0VG9wRWwuZG9tLmZpcnN0Q2hpbGQsZS5kb20uZmlyc3RDaGlsZF0pO3RoaXMudGV4dEVsLnNldFdpZHRoKGIub2Zmc2V0V2lkdGgpfXRoaXMucHJvZ3Jlc3NCYXIuc2V0SGVpZ2h0KGIub2Zmc2V0SGVpZ2h0KX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQuUHJvZ3Jlc3NCYXIuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO2lmKHRoaXMudmFsdWUpe3RoaXMudXBkYXRlUHJvZ3Jlc3ModGhpcy52YWx1ZSx0aGlzLnRleHQpfWVsc2V7dGhpcy51cGRhdGVUZXh0KHRoaXMudGV4dCl9fSx1cGRhdGVQcm9ncmVzczpmdW5jdGlvbihjLGQsYil7dGhpcy52YWx1ZT1jfHwwO2lmKGQpe3RoaXMudXBkYXRlVGV4dChkKX1pZih0aGlzLnJlbmRlcmVkJiYhdGhpcy5pc0Rlc3Ryb3llZCl7dmFyIGE9TWF0aC5mbG9vcihjKnRoaXMuZWwuZG9tLmZpcnN0Q2hpbGQub2Zmc2V0V2lkdGgpO3RoaXMucHJvZ3Jlc3NCYXIuc2V0V2lkdGgoYSxiPT09dHJ1ZXx8KGIhPT1mYWxzZSYmdGhpcy5hbmltYXRlKSk7aWYodGhpcy50ZXh0VG9wRWwpe3RoaXMudGV4dFRvcEVsLnJlbW92ZUNsYXNzKCJ4LWhpZGRlbiIpLnNldFdpZHRoKGEpfX10aGlzLmZpcmVFdmVudCgidXBkYXRlIix0aGlzLGMsZCk7cmV0dXJuIHRoaXN9LHdhaXQ6ZnVuY3Rpb24oYil7aWYoIXRoaXMud2FpdFRpbWVyKXt2YXIgYT10aGlzO2I9Ynx8e307dGhpcy51cGRhdGVUZXh0KGIudGV4dCk7dGhpcy53YWl0VGltZXI9RXh0LlRhc2tNZ3Iuc3RhcnQoe3J1bjpmdW5jdGlvbihjKXt2YXIgZD1iLmluY3JlbWVudHx8MTA7Yy09MTt0aGlzLnVwZGF0ZVByb2dyZXNzKCgoKChjK2QpJWQpKzEpKigxMDAvZCkpKjAuMDEsbnVsbCxiLmFuaW1hdGUpfSxpbnRlcnZhbDpiLmludGVydmFsfHwxMDAwLGR1cmF0aW9uOmIuZHVyYXRpb24sb25TdG9wOmZ1bmN0aW9uKCl7aWYoYi5mbil7Yi5mbi5hcHBseShiLnNjb3BlfHx0aGlzKX10aGlzLnJlc2V0KCl9LHNjb3BlOmF9KX1yZXR1cm4gdGhpc30saXNXYWl0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2FpdFRpbWVyIT09bnVsbH0sdXBkYXRlVGV4dDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YXx8IiYjMTYwOyI7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy50ZXh0RWwudXBkYXRlKHRoaXMudGV4dCl9cmV0dXJuIHRoaXN9LHN5bmNQcm9ncmVzc0JhcjpmdW5jdGlvbigpe2lmKHRoaXMudmFsdWUpe3RoaXMudXBkYXRlUHJvZ3Jlc3ModGhpcy52YWx1ZSx0aGlzLnRleHQpfXJldHVybiB0aGlzfSxzZXRTaXplOmZ1bmN0aW9uKGEsYyl7RXh0LlByb2dyZXNzQmFyLnN1cGVyY2xhc3Muc2V0U2l6ZS5jYWxsKHRoaXMsYSxjKTtpZih0aGlzLnRleHRUb3BFbCl7dmFyIGI9dGhpcy5lbC5kb20uZmlyc3RDaGlsZDt0aGlzLnRleHRFbC5zZXRTaXplKGIub2Zmc2V0V2lkdGgsYi5vZmZzZXRIZWlnaHQpfXRoaXMuc3luY1Byb2dyZXNzQmFyKCk7cmV0dXJuIHRoaXN9LHJlc2V0OmZ1bmN0aW9uKGEpe3RoaXMudXBkYXRlUHJvZ3Jlc3MoMCk7aWYodGhpcy50ZXh0VG9wRWwpe3RoaXMudGV4dFRvcEVsLmFkZENsYXNzKCJ4LWhpZGRlbiIpfXRoaXMuY2xlYXJUaW1lcigpO2lmKGE9PT10cnVlKXt0aGlzLmhpZGUoKX1yZXR1cm4gdGhpc30sY2xlYXJUaW1lcjpmdW5jdGlvbigpe2lmKHRoaXMud2FpdFRpbWVyKXt0aGlzLndhaXRUaW1lci5vblN0b3A9bnVsbDtFeHQuVGFza01nci5zdG9wKHRoaXMud2FpdFRpbWVyKTt0aGlzLndhaXRUaW1lcj1udWxsfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5jbGVhclRpbWVyKCk7aWYodGhpcy5yZW5kZXJlZCl7aWYodGhpcy50ZXh0RWwuaXNDb21wb3NpdGUpe3RoaXMudGV4dEVsLmNsZWFyKCl9RXh0LmRlc3Ryb3lNZW1iZXJzKHRoaXMsInRleHRFbCIsInByb2dyZXNzQmFyIiwidGV4dFRvcEVsIil9RXh0LlByb2dyZXNzQmFyLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9fSk7RXh0LnJlZygicHJvZ3Jlc3MiLEV4dC5Qcm9ncmVzc0Jhcik7KGZ1bmN0aW9uKCl7dmFyIGE9RXh0LkV2ZW50TWFuYWdlcjt2YXIgYj1FeHQubGliLkRvbTtFeHQuZGQuRHJhZ0Ryb3A9ZnVuY3Rpb24oZSxjLGQpe2lmKGUpe3RoaXMuaW5pdChlLGMsZCl9fTtFeHQuZGQuRHJhZ0Ryb3AucHJvdG90eXBlPXtpZDpudWxsLGNvbmZpZzpudWxsLGRyYWdFbElkOm51bGwsaGFuZGxlRWxJZDpudWxsLGludmFsaWRIYW5kbGVUeXBlczpudWxsLGludmFsaWRIYW5kbGVJZHM6bnVsbCxpbnZhbGlkSGFuZGxlQ2xhc3NlczpudWxsLHN0YXJ0UGFnZVg6MCxzdGFydFBhZ2VZOjAsZ3JvdXBzOm51bGwsbG9ja2VkOmZhbHNlLGxvY2s6ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZD10cnVlfSxtb3ZlT25seTpmYWxzZSx1bmxvY2s6ZnVuY3Rpb24oKXt0aGlzLmxvY2tlZD1mYWxzZX0saXNUYXJnZXQ6dHJ1ZSxwYWRkaW5nOm51bGwsX2RvbVJlZjpudWxsLF9feWdEcmFnRHJvcDp0cnVlLGNvbnN0cmFpblg6ZmFsc2UsY29uc3RyYWluWTpmYWxzZSxtaW5YOjAsbWF4WDowLG1pblk6MCxtYXhZOjAsbWFpbnRhaW5PZmZzZXQ6ZmFsc2UseFRpY2tzOm51bGwseVRpY2tzOm51bGwscHJpbWFyeUJ1dHRvbk9ubHk6dHJ1ZSxhdmFpbGFibGU6ZmFsc2UsaGFzT3V0ZXJIYW5kbGVzOmZhbHNlLGI0U3RhcnREcmFnOmZ1bmN0aW9uKGMsZCl7fSxzdGFydERyYWc6ZnVuY3Rpb24oYyxkKXt9LGI0RHJhZzpmdW5jdGlvbihjKXt9LG9uRHJhZzpmdW5jdGlvbihjKXt9LG9uRHJhZ0VudGVyOmZ1bmN0aW9uKGMsZCl7fSxiNERyYWdPdmVyOmZ1bmN0aW9uKGMpe30sb25EcmFnT3ZlcjpmdW5jdGlvbihjLGQpe30sYjREcmFnT3V0OmZ1bmN0aW9uKGMpe30sb25EcmFnT3V0OmZ1bmN0aW9uKGMsZCl7fSxiNERyYWdEcm9wOmZ1bmN0aW9uKGMpe30sb25EcmFnRHJvcDpmdW5jdGlvbihjLGQpe30sb25JbnZhbGlkRHJvcDpmdW5jdGlvbihjKXt9LGI0RW5kRHJhZzpmdW5jdGlvbihjKXt9LGVuZERyYWc6ZnVuY3Rpb24oYyl7fSxiNE1vdXNlRG93bjpmdW5jdGlvbihjKXt9LG9uTW91c2VEb3duOmZ1bmN0aW9uKGMpe30sb25Nb3VzZVVwOmZ1bmN0aW9uKGMpe30sb25BdmFpbGFibGU6ZnVuY3Rpb24oKXt9LGRlZmF1bHRQYWRkaW5nOntsZWZ0OjAscmlnaHQ6MCx0b3A6MCxib3R0b206MH0sY29uc3RyYWluVG86ZnVuY3Rpb24oaixoLG8pe2lmKEV4dC5pc051bWJlcihoKSl7aD17bGVmdDpoLHJpZ2h0OmgsdG9wOmgsYm90dG9tOmh9fWg9aHx8dGhpcy5kZWZhdWx0UGFkZGluZzt2YXIgbD1FeHQuZ2V0KHRoaXMuZ2V0RWwoKSkuZ2V0Qm94KCksZD1FeHQuZ2V0KGopLG49ZC5nZXRTY3JvbGwoKSxrLGU9ZC5kb207aWYoZT09ZG9jdW1lbnQuYm9keSl7az17eDpuLmxlZnQseTpuLnRvcCx3aWR0aDpFeHQubGliLkRvbS5nZXRWaWV3V2lkdGgoKSxoZWlnaHQ6RXh0LmxpYi5Eb20uZ2V0Vmlld0hlaWdodCgpfX1lbHNle3ZhciBtPWQuZ2V0WFkoKTtrPXt4Om1bMF0seTptWzFdLHdpZHRoOmUuY2xpZW50V2lkdGgsaGVpZ2h0OmUuY2xpZW50SGVpZ2h0fX12YXIgaT1sLnktay55LGc9bC54LWsueDt0aGlzLnJlc2V0Q29uc3RyYWludHMoKTt0aGlzLnNldFhDb25zdHJhaW50KGctKGgubGVmdHx8MCksay53aWR0aC1nLWwud2lkdGgtKGgucmlnaHR8fDApLHRoaXMueFRpY2tTaXplKTt0aGlzLnNldFlDb25zdHJhaW50KGktKGgudG9wfHwwKSxrLmhlaWdodC1pLWwuaGVpZ2h0LShoLmJvdHRvbXx8MCksdGhpcy55VGlja1NpemUpfSxnZXRFbDpmdW5jdGlvbigpe2lmKCF0aGlzLl9kb21SZWYpe3RoaXMuX2RvbVJlZj1FeHQuZ2V0RG9tKHRoaXMuaWQpfXJldHVybiB0aGlzLl9kb21SZWZ9LGdldERyYWdFbDpmdW5jdGlvbigpe3JldHVybiBFeHQuZ2V0RG9tKHRoaXMuZHJhZ0VsSWQpfSxpbml0OmZ1bmN0aW9uKGUsYyxkKXt0aGlzLmluaXRUYXJnZXQoZSxjLGQpO2Eub24odGhpcy5pZCwibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKX0saW5pdFRhcmdldDpmdW5jdGlvbihlLGMsZCl7dGhpcy5jb25maWc9ZHx8e307dGhpcy5ERE09RXh0LmRkLkRETTt0aGlzLmdyb3Vwcz17fTtpZih0eXBlb2YgZSE9PSJzdHJpbmciKXtlPUV4dC5pZChlKX10aGlzLmlkPWU7dGhpcy5hZGRUb0dyb3VwKChjKT9jOiJkZWZhdWx0Iik7dGhpcy5oYW5kbGVFbElkPWU7dGhpcy5zZXREcmFnRWxJZChlKTt0aGlzLmludmFsaWRIYW5kbGVUeXBlcz17QToiQSJ9O3RoaXMuaW52YWxpZEhhbmRsZUlkcz17fTt0aGlzLmludmFsaWRIYW5kbGVDbGFzc2VzPVtdO3RoaXMuYXBwbHlDb25maWcoKTt0aGlzLmhhbmRsZU9uQXZhaWxhYmxlKCl9LGFwcGx5Q29uZmlnOmZ1bmN0aW9uKCl7dGhpcy5wYWRkaW5nPXRoaXMuY29uZmlnLnBhZGRpbmd8fFswLDAsMCwwXTt0aGlzLmlzVGFyZ2V0PSh0aGlzLmNvbmZpZy5pc1RhcmdldCE9PWZhbHNlKTt0aGlzLm1haW50YWluT2Zmc2V0PSh0aGlzLmNvbmZpZy5tYWludGFpbk9mZnNldCk7dGhpcy5wcmltYXJ5QnV0dG9uT25seT0odGhpcy5jb25maWcucHJpbWFyeUJ1dHRvbk9ubHkhPT1mYWxzZSl9LGhhbmRsZU9uQXZhaWxhYmxlOmZ1bmN0aW9uKCl7dGhpcy5hdmFpbGFibGU9dHJ1ZTt0aGlzLnJlc2V0Q29uc3RyYWludHMoKTt0aGlzLm9uQXZhaWxhYmxlKCl9LHNldFBhZGRpbmc6ZnVuY3Rpb24oZSxjLGcsZCl7aWYoIWMmJjAhPT1jKXt0aGlzLnBhZGRpbmc9W2UsZSxlLGVdfWVsc2V7aWYoIWcmJjAhPT1nKXt0aGlzLnBhZGRpbmc9W2UsYyxlLGNdfWVsc2V7dGhpcy5wYWRkaW5nPVtlLGMsZyxkXX19fSxzZXRJbml0UG9zaXRpb246ZnVuY3Rpb24oZyxlKXt2YXIgaD10aGlzLmdldEVsKCk7aWYoIXRoaXMuRERNLnZlcmlmeUVsKGgpKXtyZXR1cm59dmFyIGQ9Z3x8MDt2YXIgYz1lfHwwO3ZhciBpPWIuZ2V0WFkoaCk7dGhpcy5pbml0UGFnZVg9aVswXS1kO3RoaXMuaW5pdFBhZ2VZPWlbMV0tYzt0aGlzLmxhc3RQYWdlWD1pWzBdO3RoaXMubGFzdFBhZ2VZPWlbMV07dGhpcy5zZXRTdGFydFBvc2l0aW9uKGkpfSxzZXRTdGFydFBvc2l0aW9uOmZ1bmN0aW9uKGQpe3ZhciBjPWR8fGIuZ2V0WFkodGhpcy5nZXRFbCgpKTt0aGlzLmRlbHRhU2V0WFk9bnVsbDt0aGlzLnN0YXJ0UGFnZVg9Y1swXTt0aGlzLnN0YXJ0UGFnZVk9Y1sxXX0sYWRkVG9Hcm91cDpmdW5jdGlvbihjKXt0aGlzLmdyb3Vwc1tjXT10cnVlO3RoaXMuRERNLnJlZ0RyYWdEcm9wKHRoaXMsYyl9LHJlbW92ZUZyb21Hcm91cDpmdW5jdGlvbihjKXtpZih0aGlzLmdyb3Vwc1tjXSl7ZGVsZXRlIHRoaXMuZ3JvdXBzW2NdfXRoaXMuRERNLnJlbW92ZURERnJvbUdyb3VwKHRoaXMsYyl9LHNldERyYWdFbElkOmZ1bmN0aW9uKGMpe3RoaXMuZHJhZ0VsSWQ9Y30sc2V0SGFuZGxlRWxJZDpmdW5jdGlvbihjKXtpZih0eXBlb2YgYyE9PSJzdHJpbmciKXtjPUV4dC5pZChjKX10aGlzLmhhbmRsZUVsSWQ9Yzt0aGlzLkRETS5yZWdIYW5kbGUodGhpcy5pZCxjKX0sc2V0T3V0ZXJIYW5kbGVFbElkOmZ1bmN0aW9uKGMpe2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2M9RXh0LmlkKGMpfWEub24oYywibW91c2Vkb3duIix0aGlzLmhhbmRsZU1vdXNlRG93bix0aGlzKTt0aGlzLnNldEhhbmRsZUVsSWQoYyk7dGhpcy5oYXNPdXRlckhhbmRsZXM9dHJ1ZX0sdW5yZWc6ZnVuY3Rpb24oKXthLnVuKHRoaXMuaWQsIm1vdXNlZG93biIsdGhpcy5oYW5kbGVNb3VzZURvd24pO3RoaXMuX2RvbVJlZj1udWxsO3RoaXMuRERNLl9yZW1vdmUodGhpcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnVucmVnKCl9LGlzTG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuRERNLmlzTG9ja2VkKCl8fHRoaXMubG9ja2VkKX0saGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKGcsZCl7aWYodGhpcy5wcmltYXJ5QnV0dG9uT25seSYmZy5idXR0b24hPTApe3JldHVybn1pZih0aGlzLmlzTG9ja2VkKCkpe3JldHVybn10aGlzLkRETS5yZWZyZXNoQ2FjaGUodGhpcy5ncm91cHMpO3ZhciBjPW5ldyBFeHQubGliLlBvaW50KEV4dC5saWIuRXZlbnQuZ2V0UGFnZVgoZyksRXh0LmxpYi5FdmVudC5nZXRQYWdlWShnKSk7aWYoIXRoaXMuaGFzT3V0ZXJIYW5kbGVzJiYhdGhpcy5ERE0uaXNPdmVyVGFyZ2V0KGMsdGhpcykpe31lbHNle2lmKHRoaXMuY2xpY2tWYWxpZGF0b3IoZykpe3RoaXMuc2V0U3RhcnRQb3NpdGlvbigpO3RoaXMuYjRNb3VzZURvd24oZyk7dGhpcy5vbk1vdXNlRG93bihnKTt0aGlzLkRETS5oYW5kbGVNb3VzZURvd24oZyx0aGlzKTt0aGlzLkRETS5zdG9wRXZlbnQoZyl9ZWxzZXt9fX0sY2xpY2tWYWxpZGF0b3I6ZnVuY3Rpb24oZCl7dmFyIGM9ZC5nZXRUYXJnZXQoKTtyZXR1cm4odGhpcy5pc1ZhbGlkSGFuZGxlQ2hpbGQoYykmJih0aGlzLmlkPT10aGlzLmhhbmRsZUVsSWR8fHRoaXMuRERNLmhhbmRsZVdhc0NsaWNrZWQoYyx0aGlzLmlkKSkpfSxhZGRJbnZhbGlkSGFuZGxlVHlwZTpmdW5jdGlvbihjKXt2YXIgZD1jLnRvVXBwZXJDYXNlKCk7dGhpcy5pbnZhbGlkSGFuZGxlVHlwZXNbZF09ZH0sYWRkSW52YWxpZEhhbmRsZUlkOmZ1bmN0aW9uKGMpe2lmKHR5cGVvZiBjIT09InN0cmluZyIpe2M9RXh0LmlkKGMpfXRoaXMuaW52YWxpZEhhbmRsZUlkc1tjXT1jfSxhZGRJbnZhbGlkSGFuZGxlQ2xhc3M6ZnVuY3Rpb24oYyl7dGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlcy5wdXNoKGMpfSxyZW1vdmVJbnZhbGlkSGFuZGxlVHlwZTpmdW5jdGlvbihjKXt2YXIgZD1jLnRvVXBwZXJDYXNlKCk7ZGVsZXRlIHRoaXMuaW52YWxpZEhhbmRsZVR5cGVzW2RdfSxyZW1vdmVJbnZhbGlkSGFuZGxlSWQ6ZnVuY3Rpb24oYyl7aWYodHlwZW9mIGMhPT0ic3RyaW5nIil7Yz1FeHQuaWQoYyl9ZGVsZXRlIHRoaXMuaW52YWxpZEhhbmRsZUlkc1tjXX0scmVtb3ZlSW52YWxpZEhhbmRsZUNsYXNzOmZ1bmN0aW9uKGQpe2Zvcih2YXIgZT0wLGM9dGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlcy5sZW5ndGg7ZTxjOysrZSl7aWYodGhpcy5pbnZhbGlkSGFuZGxlQ2xhc3Nlc1tlXT09ZCl7ZGVsZXRlIHRoaXMuaW52YWxpZEhhbmRsZUNsYXNzZXNbZV19fX0saXNWYWxpZEhhbmRsZUNoaWxkOmZ1bmN0aW9uKGgpe3ZhciBnPXRydWU7dmFyIGs7dHJ5e2s9aC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpfWNhdGNoKGope2s9aC5ub2RlTmFtZX1nPWcmJiF0aGlzLmludmFsaWRIYW5kbGVUeXBlc1trXTtnPWcmJiF0aGlzLmludmFsaWRIYW5kbGVJZHNbaC5pZF07Zm9yKHZhciBkPTAsYz10aGlzLmludmFsaWRIYW5kbGVDbGFzc2VzLmxlbmd0aDtnJiZkPGM7KytkKXtnPSFFeHQuZmx5KGgpLmhhc0NsYXNzKHRoaXMuaW52YWxpZEhhbmRsZUNsYXNzZXNbZF0pfXJldHVybiBnfSxzZXRYVGlja3M6ZnVuY3Rpb24oZyxjKXt0aGlzLnhUaWNrcz1bXTt0aGlzLnhUaWNrU2l6ZT1jO3ZhciBlPXt9O2Zvcih2YXIgZD10aGlzLmluaXRQYWdlWDtkPj10aGlzLm1pblg7ZD1kLWMpe2lmKCFlW2RdKXt0aGlzLnhUaWNrc1t0aGlzLnhUaWNrcy5sZW5ndGhdPWQ7ZVtkXT10cnVlfX1mb3IoZD10aGlzLmluaXRQYWdlWDtkPD10aGlzLm1heFg7ZD1kK2Mpe2lmKCFlW2RdKXt0aGlzLnhUaWNrc1t0aGlzLnhUaWNrcy5sZW5ndGhdPWQ7ZVtkXT10cnVlfX10aGlzLnhUaWNrcy5zb3J0KHRoaXMuRERNLm51bWVyaWNTb3J0KX0sc2V0WVRpY2tzOmZ1bmN0aW9uKGcsYyl7dGhpcy55VGlja3M9W107dGhpcy55VGlja1NpemU9Yzt2YXIgZT17fTtmb3IodmFyIGQ9dGhpcy5pbml0UGFnZVk7ZD49dGhpcy5taW5ZO2Q9ZC1jKXtpZighZVtkXSl7dGhpcy55VGlja3NbdGhpcy55VGlja3MubGVuZ3RoXT1kO2VbZF09dHJ1ZX19Zm9yKGQ9dGhpcy5pbml0UGFnZVk7ZDw9dGhpcy5tYXhZO2Q9ZCtjKXtpZighZVtkXSl7dGhpcy55VGlja3NbdGhpcy55VGlja3MubGVuZ3RoXT1kO2VbZF09dHJ1ZX19dGhpcy55VGlja3Muc29ydCh0aGlzLkRETS5udW1lcmljU29ydCl9LHNldFhDb25zdHJhaW50OmZ1bmN0aW9uKGUsZCxjKXt0aGlzLmxlZnRDb25zdHJhaW50PWU7dGhpcy5yaWdodENvbnN0cmFpbnQ9ZDt0aGlzLm1pblg9dGhpcy5pbml0UGFnZVgtZTt0aGlzLm1heFg9dGhpcy5pbml0UGFnZVgrZDtpZihjKXt0aGlzLnNldFhUaWNrcyh0aGlzLmluaXRQYWdlWCxjKX10aGlzLmNvbnN0cmFpblg9dHJ1ZX0sY2xlYXJDb25zdHJhaW50czpmdW5jdGlvbigpe3RoaXMuY29uc3RyYWluWD1mYWxzZTt0aGlzLmNvbnN0cmFpblk9ZmFsc2U7dGhpcy5jbGVhclRpY2tzKCl9LGNsZWFyVGlja3M6ZnVuY3Rpb24oKXt0aGlzLnhUaWNrcz1udWxsO3RoaXMueVRpY2tzPW51bGw7dGhpcy54VGlja1NpemU9MDt0aGlzLnlUaWNrU2l6ZT0wfSxzZXRZQ29uc3RyYWludDpmdW5jdGlvbihjLGUsZCl7dGhpcy50b3BDb25zdHJhaW50PWM7dGhpcy5ib3R0b21Db25zdHJhaW50PWU7dGhpcy5taW5ZPXRoaXMuaW5pdFBhZ2VZLWM7dGhpcy5tYXhZPXRoaXMuaW5pdFBhZ2VZK2U7aWYoZCl7dGhpcy5zZXRZVGlja3ModGhpcy5pbml0UGFnZVksZCl9dGhpcy5jb25zdHJhaW5ZPXRydWV9LHJlc2V0Q29uc3RyYWludHM6ZnVuY3Rpb24oKXtpZih0aGlzLmluaXRQYWdlWHx8dGhpcy5pbml0UGFnZVg9PT0wKXt2YXIgZD0odGhpcy5tYWludGFpbk9mZnNldCk/dGhpcy5sYXN0UGFnZVgtdGhpcy5pbml0UGFnZVg6MDt2YXIgYz0odGhpcy5tYWludGFpbk9mZnNldCk/dGhpcy5sYXN0UGFnZVktdGhpcy5pbml0UGFnZVk6MDt0aGlzLnNldEluaXRQb3NpdGlvbihkLGMpfWVsc2V7dGhpcy5zZXRJbml0UG9zaXRpb24oKX1pZih0aGlzLmNvbnN0cmFpblgpe3RoaXMuc2V0WENvbnN0cmFpbnQodGhpcy5sZWZ0Q29uc3RyYWludCx0aGlzLnJpZ2h0Q29uc3RyYWludCx0aGlzLnhUaWNrU2l6ZSl9aWYodGhpcy5jb25zdHJhaW5ZKXt0aGlzLnNldFlDb25zdHJhaW50KHRoaXMudG9wQ29uc3RyYWludCx0aGlzLmJvdHRvbUNvbnN0cmFpbnQsdGhpcy55VGlja1NpemUpfX0sZ2V0VGljazpmdW5jdGlvbihrLGcpe2lmKCFnKXtyZXR1cm4ga31lbHNle2lmKGdbMF0+PWspe3JldHVybiBnWzBdfWVsc2V7Zm9yKHZhciBkPTAsYz1nLmxlbmd0aDtkPGM7KytkKXt2YXIgZT1kKzE7aWYoZ1tlXSYmZ1tlXT49ayl7dmFyIGo9ay1nW2RdO3ZhciBoPWdbZV0taztyZXR1cm4oaD5qKT9nW2RdOmdbZV19fXJldHVybiBnW2cubGVuZ3RoLTFdfX19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKCJEcmFnRHJvcCAiK3RoaXMuaWQpfX19KSgpO2lmKCFFeHQuZGQuRHJhZ0Ryb3BNZ3Ipe0V4dC5kZC5EcmFnRHJvcE1ncj1mdW5jdGlvbigpe3ZhciBhPUV4dC5FdmVudE1hbmFnZXI7cmV0dXJue2lkczp7fSxoYW5kbGVJZHM6e30sZHJhZ0N1cnJlbnQ6bnVsbCxkcmFnT3ZlcnM6e30sZGVsdGFYOjAsZGVsdGFZOjAscHJldmVudERlZmF1bHQ6dHJ1ZSxzdG9wUHJvcGFnYXRpb246dHJ1ZSxpbml0aWFsaXplZDpmYWxzZSxsb2NrZWQ6ZmFsc2UsaW5pdDpmdW5jdGlvbigpe3RoaXMuaW5pdGlhbGl6ZWQ9dHJ1ZX0sUE9JTlQ6MCxJTlRFUlNFQ1Q6MSxtb2RlOjAsX2V4ZWNPbkFsbDpmdW5jdGlvbihkLGMpe2Zvcih2YXIgZSBpbiB0aGlzLmlkcyl7Zm9yKHZhciBiIGluIHRoaXMuaWRzW2VdKXt2YXIgZz10aGlzLmlkc1tlXVtiXTtpZighdGhpcy5pc1R5cGVPZkREKGcpKXtjb250aW51ZX1nW2RdLmFwcGx5KGcsYyl9fX0sX29uTG9hZDpmdW5jdGlvbigpe3RoaXMuaW5pdCgpO2Eub24oZG9jdW1lbnQsIm1vdXNldXAiLHRoaXMuaGFuZGxlTW91c2VVcCx0aGlzLHRydWUpO2Eub24oZG9jdW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5oYW5kbGVNb3VzZU1vdmUsdGhpcyx0cnVlKTthLm9uKHdpbmRvdywidW5sb2FkIix0aGlzLl9vblVubG9hZCx0aGlzLHRydWUpO2Eub24od2luZG93LCJyZXNpemUiLHRoaXMuX29uUmVzaXplLHRoaXMsdHJ1ZSl9LF9vblJlc2l6ZTpmdW5jdGlvbihiKXt0aGlzLl9leGVjT25BbGwoInJlc2V0Q29uc3RyYWludHMiLFtdKX0sbG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPXRydWV9LHVubG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPWZhbHNlfSxpc0xvY2tlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2tlZH0sbG9jYXRpb25DYWNoZTp7fSx1c2VDYWNoZTp0cnVlLGNsaWNrUGl4ZWxUaHJlc2g6MyxjbGlja1RpbWVUaHJlc2g6MzUwLGRyYWdUaHJlc2hNZXQ6ZmFsc2UsY2xpY2tUaW1lb3V0Om51bGwsc3RhcnRYOjAsc3RhcnRZOjAscmVnRHJhZ0Ryb3A6ZnVuY3Rpb24oYyxiKXtpZighdGhpcy5pbml0aWFsaXplZCl7dGhpcy5pbml0KCl9aWYoIXRoaXMuaWRzW2JdKXt0aGlzLmlkc1tiXT17fX10aGlzLmlkc1tiXVtjLmlkXT1jfSxyZW1vdmVEREZyb21Hcm91cDpmdW5jdGlvbihkLGIpe2lmKCF0aGlzLmlkc1tiXSl7dGhpcy5pZHNbYl09e319dmFyIGM9dGhpcy5pZHNbYl07aWYoYyYmY1tkLmlkXSl7ZGVsZXRlIGNbZC5pZF19fSxfcmVtb3ZlOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYiBpbiBjLmdyb3Vwcyl7aWYoYiYmdGhpcy5pZHNbYl0mJnRoaXMuaWRzW2JdW2MuaWRdKXtkZWxldGUgdGhpcy5pZHNbYl1bYy5pZF19fWRlbGV0ZSB0aGlzLmhhbmRsZUlkc1tjLmlkXX0scmVnSGFuZGxlOmZ1bmN0aW9uKGMsYil7aWYoIXRoaXMuaGFuZGxlSWRzW2NdKXt0aGlzLmhhbmRsZUlkc1tjXT17fX10aGlzLmhhbmRsZUlkc1tjXVtiXT1ifSxpc0RyYWdEcm9wOmZ1bmN0aW9uKGIpe3JldHVybih0aGlzLmdldEREQnlJZChiKSk/dHJ1ZTpmYWxzZX0sZ2V0UmVsYXRlZDpmdW5jdGlvbihoLGMpe3ZhciBnPVtdO2Zvcih2YXIgZSBpbiBoLmdyb3Vwcyl7Zm9yKHZhciBkIGluIHRoaXMuaWRzW2VdKXt2YXIgYj10aGlzLmlkc1tlXVtkXTtpZighdGhpcy5pc1R5cGVPZkREKGIpKXtjb250aW51ZX1pZighY3x8Yi5pc1RhcmdldCl7Z1tnLmxlbmd0aF09Yn19fXJldHVybiBnfSxpc0xlZ2FsVGFyZ2V0OmZ1bmN0aW9uKGcsZSl7dmFyIGM9dGhpcy5nZXRSZWxhdGVkKGcsdHJ1ZSk7Zm9yKHZhciBkPTAsYj1jLmxlbmd0aDtkPGI7KytkKXtpZihjW2RdLmlkPT1lLmlkKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxpc1R5cGVPZkREOmZ1bmN0aW9uKGIpe3JldHVybihiJiZiLl9feWdEcmFnRHJvcCl9LGlzSGFuZGxlOmZ1bmN0aW9uKGMsYil7cmV0dXJuKHRoaXMuaGFuZGxlSWRzW2NdJiZ0aGlzLmhhbmRsZUlkc1tjXVtiXSl9LGdldEREQnlJZDpmdW5jdGlvbihjKXtmb3IodmFyIGIgaW4gdGhpcy5pZHMpe2lmKHRoaXMuaWRzW2JdW2NdKXtyZXR1cm4gdGhpcy5pZHNbYl1bY119fXJldHVybiBudWxsfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oZCxjKXtpZihFeHQuUXVpY2tUaXBzKXtFeHQuUXVpY2tUaXBzLmRkRGlzYWJsZSgpfWlmKHRoaXMuZHJhZ0N1cnJlbnQpe3RoaXMuaGFuZGxlTW91c2VVcChkKX10aGlzLmN1cnJlbnRUYXJnZXQ9ZC5nZXRUYXJnZXQoKTt0aGlzLmRyYWdDdXJyZW50PWM7dmFyIGI9Yy5nZXRFbCgpO3RoaXMuc3RhcnRYPWQuZ2V0UGFnZVgoKTt0aGlzLnN0YXJ0WT1kLmdldFBhZ2VZKCk7dGhpcy5kZWx0YVg9dGhpcy5zdGFydFgtYi5vZmZzZXRMZWZ0O3RoaXMuZGVsdGFZPXRoaXMuc3RhcnRZLWIub2Zmc2V0VG9wO3RoaXMuZHJhZ1RocmVzaE1ldD1mYWxzZTt0aGlzLmNsaWNrVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9RXh0LmRkLkRETTtlLnN0YXJ0RHJhZyhlLnN0YXJ0WCxlLnN0YXJ0WSl9LHRoaXMuY2xpY2tUaW1lVGhyZXNoKX0sc3RhcnREcmFnOmZ1bmN0aW9uKGIsYyl7Y2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lb3V0KTtpZih0aGlzLmRyYWdDdXJyZW50KXt0aGlzLmRyYWdDdXJyZW50LmI0U3RhcnREcmFnKGIsYyk7dGhpcy5kcmFnQ3VycmVudC5zdGFydERyYWcoYixjKX10aGlzLmRyYWdUaHJlc2hNZXQ9dHJ1ZX0saGFuZGxlTW91c2VVcDpmdW5jdGlvbihiKXtpZihFeHQuUXVpY2tUaXBzKXtFeHQuUXVpY2tUaXBzLmRkRW5hYmxlKCl9aWYoIXRoaXMuZHJhZ0N1cnJlbnQpe3JldHVybn1jbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVvdXQpO2lmKHRoaXMuZHJhZ1RocmVzaE1ldCl7dGhpcy5maXJlRXZlbnRzKGIsdHJ1ZSl9ZWxzZXt9dGhpcy5zdG9wRHJhZyhiKTt0aGlzLnN0b3BFdmVudChiKX0sc3RvcEV2ZW50OmZ1bmN0aW9uKGIpe2lmKHRoaXMuc3RvcFByb3BhZ2F0aW9uKXtiLnN0b3BQcm9wYWdhdGlvbigpfWlmKHRoaXMucHJldmVudERlZmF1bHQpe2IucHJldmVudERlZmF1bHQoKX19LHN0b3BEcmFnOmZ1bmN0aW9uKGIpe2lmKHRoaXMuZHJhZ0N1cnJlbnQpe2lmKHRoaXMuZHJhZ1RocmVzaE1ldCl7dGhpcy5kcmFnQ3VycmVudC5iNEVuZERyYWcoYik7dGhpcy5kcmFnQ3VycmVudC5lbmREcmFnKGIpfXRoaXMuZHJhZ0N1cnJlbnQub25Nb3VzZVVwKGIpfXRoaXMuZHJhZ0N1cnJlbnQ9bnVsbDt0aGlzLmRyYWdPdmVycz17fX0saGFuZGxlTW91c2VNb3ZlOmZ1bmN0aW9uKGQpe2lmKCF0aGlzLmRyYWdDdXJyZW50KXtyZXR1cm4gdHJ1ZX1pZihFeHQuaXNJRSYmKGQuYnV0dG9uIT09MCYmZC5idXR0b24hPT0xJiZkLmJ1dHRvbiE9PTIpKXt0aGlzLnN0b3BFdmVudChkKTtyZXR1cm4gdGhpcy5oYW5kbGVNb3VzZVVwKGQpfWlmKCF0aGlzLmRyYWdUaHJlc2hNZXQpe3ZhciBjPU1hdGguYWJzKHRoaXMuc3RhcnRYLWQuZ2V0UGFnZVgoKSk7dmFyIGI9TWF0aC5hYnModGhpcy5zdGFydFktZC5nZXRQYWdlWSgpKTtpZihjPnRoaXMuY2xpY2tQaXhlbFRocmVzaHx8Yj50aGlzLmNsaWNrUGl4ZWxUaHJlc2gpe3RoaXMuc3RhcnREcmFnKHRoaXMuc3RhcnRYLHRoaXMuc3RhcnRZKX19aWYodGhpcy5kcmFnVGhyZXNoTWV0KXt0aGlzLmRyYWdDdXJyZW50LmI0RHJhZyhkKTt0aGlzLmRyYWdDdXJyZW50Lm9uRHJhZyhkKTtpZighdGhpcy5kcmFnQ3VycmVudC5tb3ZlT25seSl7dGhpcy5maXJlRXZlbnRzKGQsZmFsc2UpfX10aGlzLnN0b3BFdmVudChkKTtyZXR1cm4gdHJ1ZX0sZmlyZUV2ZW50czpmdW5jdGlvbihuLG8pe3ZhciBxPXRoaXMuZHJhZ0N1cnJlbnQ7aWYoIXF8fHEuaXNMb2NrZWQoKSl7cmV0dXJufXZhciByPW4uZ2V0UG9pbnQoKTt2YXIgYj1bXTt2YXIgZz1bXTt2YXIgbD1bXTt2YXIgaj1bXTt2YXIgZD1bXTtmb3IodmFyIGggaW4gdGhpcy5kcmFnT3ZlcnMpe3ZhciBjPXRoaXMuZHJhZ092ZXJzW2hdO2lmKCF0aGlzLmlzVHlwZU9mREQoYykpe2NvbnRpbnVlfWlmKCF0aGlzLmlzT3ZlclRhcmdldChyLGMsdGhpcy5tb2RlKSl7Zy5wdXNoKGMpfWJbaF09dHJ1ZTtkZWxldGUgdGhpcy5kcmFnT3ZlcnNbaF19Zm9yKHZhciBwIGluIHEuZ3JvdXBzKXtpZigic3RyaW5nIiE9dHlwZW9mIHApe2NvbnRpbnVlfWZvcihoIGluIHRoaXMuaWRzW3BdKXt2YXIgaz10aGlzLmlkc1twXVtoXTtpZighdGhpcy5pc1R5cGVPZkREKGspKXtjb250aW51ZX1pZihrLmlzVGFyZ2V0JiYhay5pc0xvY2tlZCgpJiYoKGshPXEpfHwocS5pZ25vcmVTZWxmPT09ZmFsc2UpKSl7aWYodGhpcy5pc092ZXJUYXJnZXQocixrLHRoaXMubW9kZSkpe2lmKG8pe2oucHVzaChrKX1lbHNle2lmKCFiW2suaWRdKXtkLnB1c2goayl9ZWxzZXtsLnB1c2goayl9dGhpcy5kcmFnT3ZlcnNbay5pZF09a319fX19aWYodGhpcy5tb2RlKXtpZihnLmxlbmd0aCl7cS5iNERyYWdPdXQobixnKTtxLm9uRHJhZ091dChuLGcpfWlmKGQubGVuZ3RoKXtxLm9uRHJhZ0VudGVyKG4sZCl9aWYobC5sZW5ndGgpe3EuYjREcmFnT3ZlcihuLGwpO3Eub25EcmFnT3ZlcihuLGwpfWlmKGoubGVuZ3RoKXtxLmI0RHJhZ0Ryb3AobixqKTtxLm9uRHJhZ0Ryb3AobixqKX19ZWxzZXt2YXIgbT0wO2ZvcihoPTAsbT1nLmxlbmd0aDtoPG07KytoKXtxLmI0RHJhZ091dChuLGdbaF0uaWQpO3Eub25EcmFnT3V0KG4sZ1toXS5pZCl9Zm9yKGg9MCxtPWQubGVuZ3RoO2g8bTsrK2gpe3Eub25EcmFnRW50ZXIobixkW2hdLmlkKX1mb3IoaD0wLG09bC5sZW5ndGg7aDxtOysraCl7cS5iNERyYWdPdmVyKG4sbFtoXS5pZCk7cS5vbkRyYWdPdmVyKG4sbFtoXS5pZCl9Zm9yKGg9MCxtPWoubGVuZ3RoO2g8bTsrK2gpe3EuYjREcmFnRHJvcChuLGpbaF0uaWQpO3Eub25EcmFnRHJvcChuLGpbaF0uaWQpfX1pZihvJiYhai5sZW5ndGgpe3Eub25JbnZhbGlkRHJvcChuKX19LGdldEJlc3RNYXRjaDpmdW5jdGlvbihkKXt2YXIgZz1udWxsO3ZhciBjPWQubGVuZ3RoO2lmKGM9PTEpe2c9ZFswXX1lbHNle2Zvcih2YXIgZT0wO2U8YzsrK2Upe3ZhciBiPWRbZV07aWYoYi5jdXJzb3JJc092ZXIpe2c9YjticmVha31lbHNle2lmKCFnfHxnLm92ZXJsYXAuZ2V0QXJlYSgpPGIub3ZlcmxhcC5nZXRBcmVhKCkpe2c9Yn19fX1yZXR1cm4gZ30scmVmcmVzaENhY2hlOmZ1bmN0aW9uKGMpe2Zvcih2YXIgYiBpbiBjKXtpZigic3RyaW5nIiE9dHlwZW9mIGIpe2NvbnRpbnVlfWZvcih2YXIgZCBpbiB0aGlzLmlkc1tiXSl7dmFyIGU9dGhpcy5pZHNbYl1bZF07aWYodGhpcy5pc1R5cGVPZkREKGUpKXt2YXIgZz10aGlzLmdldExvY2F0aW9uKGUpO2lmKGcpe3RoaXMubG9jYXRpb25DYWNoZVtlLmlkXT1nfWVsc2V7ZGVsZXRlIHRoaXMubG9jYXRpb25DYWNoZVtlLmlkXX19fX19LHZlcmlmeUVsOmZ1bmN0aW9uKGMpe2lmKGMpe3ZhciBiO2lmKEV4dC5pc0lFKXt0cnl7Yj1jLm9mZnNldFBhcmVudH1jYXRjaChkKXt9fWVsc2V7Yj1jLm9mZnNldFBhcmVudH1pZihiKXtyZXR1cm4gdHJ1ZX19cmV0dXJuIGZhbHNlfSxnZXRMb2NhdGlvbjpmdW5jdGlvbihqKXtpZighdGhpcy5pc1R5cGVPZkREKGopKXtyZXR1cm4gbnVsbH12YXIgaD1qLmdldEVsKCksbyxnLGQscSxwLHMsYyxuLGksbTt0cnl7bz1FeHQubGliLkRvbS5nZXRYWShoKX1jYXRjaChrKXt9aWYoIW8pe3JldHVybiBudWxsfWc9b1swXTtkPWcraC5vZmZzZXRXaWR0aDtxPW9bMV07cD1xK2gub2Zmc2V0SGVpZ2h0O3M9cS1qLnBhZGRpbmdbMF07Yz1kK2oucGFkZGluZ1sxXTtuPXArai5wYWRkaW5nWzJdO2k9Zy1qLnBhZGRpbmdbM107bT1uZXcgRXh0LmxpYi5SZWdpb24ocyxjLG4saSk7aD1FeHQuZ2V0KGgucGFyZW50Tm9kZSk7d2hpbGUoaCYmbSl7aWYoaC5pc1Njcm9sbGFibGUoKSl7bT1tLmludGVyc2VjdChoLmdldFJlZ2lvbigpKX1oPWgucGFyZW50KCl9cmV0dXJuIG19LGlzT3ZlclRhcmdldDpmdW5jdGlvbihrLGIsZCl7dmFyIGc9dGhpcy5sb2NhdGlvbkNhY2hlW2IuaWRdO2lmKCFnfHwhdGhpcy51c2VDYWNoZSl7Zz10aGlzLmdldExvY2F0aW9uKGIpO3RoaXMubG9jYXRpb25DYWNoZVtiLmlkXT1nfWlmKCFnKXtyZXR1cm4gZmFsc2V9Yi5jdXJzb3JJc092ZXI9Zy5jb250YWlucyhrKTt2YXIgaj10aGlzLmRyYWdDdXJyZW50O2lmKCFqfHwhai5nZXRUYXJnZXRDb29yZHx8KCFkJiYhai5jb25zdHJhaW5YJiYhai5jb25zdHJhaW5ZKSl7cmV0dXJuIGIuY3Vyc29ySXNPdmVyfWIub3ZlcmxhcD1udWxsO3ZhciBoPWouZ2V0VGFyZ2V0Q29vcmQoay54LGsueSk7dmFyIGM9ai5nZXREcmFnRWwoKTt2YXIgZT1uZXcgRXh0LmxpYi5SZWdpb24oaC55LGgueCtjLm9mZnNldFdpZHRoLGgueStjLm9mZnNldEhlaWdodCxoLngpO3ZhciBpPWUuaW50ZXJzZWN0KGcpO2lmKGkpe2Iub3ZlcmxhcD1pO3JldHVybihkKT90cnVlOmIuY3Vyc29ySXNPdmVyfWVsc2V7cmV0dXJuIGZhbHNlfX0sX29uVW5sb2FkOmZ1bmN0aW9uKGMsYil7YS5yZW1vdmVMaXN0ZW5lcihkb2N1bWVudCwibW91c2V1cCIsdGhpcy5oYW5kbGVNb3VzZVVwLHRoaXMpO2EucmVtb3ZlTGlzdGVuZXIoZG9jdW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5oYW5kbGVNb3VzZU1vdmUsdGhpcyk7YS5yZW1vdmVMaXN0ZW5lcih3aW5kb3csInJlc2l6ZSIsdGhpcy5fb25SZXNpemUsdGhpcyk7RXh0LmRkLkRyYWdEcm9wTWdyLnVucmVnQWxsKCl9LHVucmVnQWxsOmZ1bmN0aW9uKCl7aWYodGhpcy5kcmFnQ3VycmVudCl7dGhpcy5zdG9wRHJhZygpO3RoaXMuZHJhZ0N1cnJlbnQ9bnVsbH10aGlzLl9leGVjT25BbGwoInVucmVnIixbXSk7Zm9yKHZhciBiIGluIHRoaXMuZWxlbWVudENhY2hlKXtkZWxldGUgdGhpcy5lbGVtZW50Q2FjaGVbYl19dGhpcy5lbGVtZW50Q2FjaGU9e307dGhpcy5pZHM9e319LGVsZW1lbnRDYWNoZTp7fSxnZXRFbFdyYXBwZXI6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy5lbGVtZW50Q2FjaGVbY107aWYoIWJ8fCFiLmVsKXtiPXRoaXMuZWxlbWVudENhY2hlW2NdPW5ldyB0aGlzLkVsZW1lbnRXcmFwcGVyKEV4dC5nZXREb20oYykpfXJldHVybiBifSxnZXRFbGVtZW50OmZ1bmN0aW9uKGIpe3JldHVybiBFeHQuZ2V0RG9tKGIpfSxnZXRDc3M6ZnVuY3Rpb24oYyl7dmFyIGI9RXh0LmdldERvbShjKTtyZXR1cm4oYik/Yi5zdHlsZTpudWxsfSxFbGVtZW50V3JhcHBlcjpmdW5jdGlvbihiKXt0aGlzLmVsPWJ8fG51bGw7dGhpcy5pZD10aGlzLmVsJiZiLmlkO3RoaXMuY3NzPXRoaXMuZWwmJmIuc3R5bGV9LGdldFBvc1g6ZnVuY3Rpb24oYil7cmV0dXJuIEV4dC5saWIuRG9tLmdldFgoYil9LGdldFBvc1k6ZnVuY3Rpb24oYil7cmV0dXJuIEV4dC5saWIuRG9tLmdldFkoYil9LHN3YXBOb2RlOmZ1bmN0aW9uKGQsYil7aWYoZC5zd2FwTm9kZSl7ZC5zd2FwTm9kZShiKX1lbHNle3ZhciBlPWIucGFyZW50Tm9kZTt2YXIgYz1iLm5leHRTaWJsaW5nO2lmKGM9PWQpe2UuaW5zZXJ0QmVmb3JlKGQsYil9ZWxzZXtpZihiPT1kLm5leHRTaWJsaW5nKXtlLmluc2VydEJlZm9yZShiLGQpfWVsc2V7ZC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChiLGQpO2UuaW5zZXJ0QmVmb3JlKGQsYyl9fX19LGdldFNjcm9sbDpmdW5jdGlvbigpe3ZhciBkLGIsZT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsYz1kb2N1bWVudC5ib2R5O2lmKGUmJihlLnNjcm9sbFRvcHx8ZS5zY3JvbGxMZWZ0KSl7ZD1lLnNjcm9sbFRvcDtiPWUuc2Nyb2xsTGVmdH1lbHNle2lmKGMpe2Q9Yy5zY3JvbGxUb3A7Yj1jLnNjcm9sbExlZnR9ZWxzZXt9fXJldHVybnt0b3A6ZCxsZWZ0OmJ9fSxnZXRTdHlsZTpmdW5jdGlvbihjLGIpe3JldHVybiBFeHQuZmx5KGMpLmdldFN0eWxlKGIpfSxnZXRTY3JvbGxUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS50b3B9LGdldFNjcm9sbExlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRTY3JvbGwoKS5sZWZ0fSxtb3ZlVG9FbDpmdW5jdGlvbihiLGQpe3ZhciBjPUV4dC5saWIuRG9tLmdldFhZKGQpO0V4dC5saWIuRG9tLnNldFhZKGIsYyl9LG51bWVyaWNTb3J0OmZ1bmN0aW9uKGQsYyl7cmV0dXJuKGQtYyl9LF90aW1lb3V0Q291bnQ6MCxfYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dmFyIGI9RXh0LmRkLkRETTtpZihFeHQubGliLkV2ZW50JiZkb2N1bWVudCl7Yi5fb25Mb2FkKCl9ZWxzZXtpZihiLl90aW1lb3V0Q291bnQ+MjAwMCl7fWVsc2V7c2V0VGltZW91dChiLl9hZGRMaXN0ZW5lcnMsMTApO2lmKGRvY3VtZW50JiZkb2N1bWVudC5ib2R5KXtiLl90aW1lb3V0Q291bnQrPTF9fX19LGhhbmRsZVdhc0NsaWNrZWQ6ZnVuY3Rpb24oYixkKXtpZih0aGlzLmlzSGFuZGxlKGQsYi5pZCkpe3JldHVybiB0cnVlfWVsc2V7dmFyIGM9Yi5wYXJlbnROb2RlO3doaWxlKGMpe2lmKHRoaXMuaXNIYW5kbGUoZCxjLmlkKSl7cmV0dXJuIHRydWV9ZWxzZXtjPWMucGFyZW50Tm9kZX19fXJldHVybiBmYWxzZX19fSgpO0V4dC5kZC5ERE09RXh0LmRkLkRyYWdEcm9wTWdyO0V4dC5kZC5ERE0uX2FkZExpc3RlbmVycygpfUV4dC5kZC5ERD1mdW5jdGlvbihjLGEsYil7aWYoYyl7dGhpcy5pbml0KGMsYSxiKX19O0V4dC5leHRlbmQoRXh0LmRkLkRELEV4dC5kZC5EcmFnRHJvcCx7c2Nyb2xsOnRydWUsYXV0b09mZnNldDpmdW5jdGlvbihjLGIpe3ZhciBhPWMtdGhpcy5zdGFydFBhZ2VYO3ZhciBkPWItdGhpcy5zdGFydFBhZ2VZO3RoaXMuc2V0RGVsdGEoYSxkKX0sc2V0RGVsdGE6ZnVuY3Rpb24oYixhKXt0aGlzLmRlbHRhWD1iO3RoaXMuZGVsdGFZPWF9LHNldERyYWdFbFBvczpmdW5jdGlvbihjLGIpe3ZhciBhPXRoaXMuZ2V0RHJhZ0VsKCk7dGhpcy5hbGlnbkVsV2l0aE1vdXNlKGEsYyxiKX0sYWxpZ25FbFdpdGhNb3VzZTpmdW5jdGlvbihjLGgsZyl7dmFyIGU9dGhpcy5nZXRUYXJnZXRDb29yZChoLGcpO3ZhciBiPWMuZG9tP2M6RXh0LmZseShjLCJfZGQiKTtpZighdGhpcy5kZWx0YVNldFhZKXt2YXIgaT1bZS54LGUueV07Yi5zZXRYWShpKTt2YXIgZD1iLmdldExlZnQodHJ1ZSk7dmFyIGE9Yi5nZXRUb3AodHJ1ZSk7dGhpcy5kZWx0YVNldFhZPVtkLWUueCxhLWUueV19ZWxzZXtiLnNldExlZnRUb3AoZS54K3RoaXMuZGVsdGFTZXRYWVswXSxlLnkrdGhpcy5kZWx0YVNldFhZWzFdKX10aGlzLmNhY2hlUG9zaXRpb24oZS54LGUueSk7dGhpcy5hdXRvU2Nyb2xsKGUueCxlLnksYy5vZmZzZXRIZWlnaHQsYy5vZmZzZXRXaWR0aCk7cmV0dXJuIGV9LGNhY2hlUG9zaXRpb246ZnVuY3Rpb24oYixhKXtpZihiKXt0aGlzLmxhc3RQYWdlWD1iO3RoaXMubGFzdFBhZ2VZPWF9ZWxzZXt2YXIgYz1FeHQubGliLkRvbS5nZXRYWSh0aGlzLmdldEVsKCkpO3RoaXMubGFzdFBhZ2VYPWNbMF07dGhpcy5sYXN0UGFnZVk9Y1sxXX19LGF1dG9TY3JvbGw6ZnVuY3Rpb24obCxrLGUsbSl7aWYodGhpcy5zY3JvbGwpe3ZhciBuPUV4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQoKTt2YXIgYj1FeHQubGliLkRvbS5nZXRWaWV3V2lkdGgoKTt2YXIgcD10aGlzLkRETS5nZXRTY3JvbGxUb3AoKTt2YXIgZD10aGlzLkRETS5nZXRTY3JvbGxMZWZ0KCk7dmFyIGo9ZStrO3ZhciBvPW0rbDt2YXIgaT0obitwLWstdGhpcy5kZWx0YVkpO3ZhciBnPShiK2QtbC10aGlzLmRlbHRhWCk7dmFyIGM9NDA7dmFyIGE9KGRvY3VtZW50LmFsbCk/ODA6MzA7aWYoaj5uJiZpPGMpe3dpbmRvdy5zY3JvbGxUbyhkLHArYSl9aWYoazxwJiZwPjAmJmstcDxjKXt3aW5kb3cuc2Nyb2xsVG8oZCxwLWEpfWlmKG8+YiYmZzxjKXt3aW5kb3cuc2Nyb2xsVG8oZCthLHApfWlmKGw8ZCYmZD4wJiZsLWQ8Yyl7d2luZG93LnNjcm9sbFRvKGQtYSxwKX19fSxnZXRUYXJnZXRDb29yZDpmdW5jdGlvbihjLGIpe3ZhciBhPWMtdGhpcy5kZWx0YVg7dmFyIGQ9Yi10aGlzLmRlbHRhWTtpZih0aGlzLmNvbnN0cmFpblgpe2lmKGE8dGhpcy5taW5YKXthPXRoaXMubWluWH1pZihhPnRoaXMubWF4WCl7YT10aGlzLm1heFh9fWlmKHRoaXMuY29uc3RyYWluWSl7aWYoZDx0aGlzLm1pblkpe2Q9dGhpcy5taW5ZfWlmKGQ+dGhpcy5tYXhZKXtkPXRoaXMubWF4WX19YT10aGlzLmdldFRpY2soYSx0aGlzLnhUaWNrcyk7ZD10aGlzLmdldFRpY2soZCx0aGlzLnlUaWNrcyk7cmV0dXJue3g6YSx5OmR9fSxhcHBseUNvbmZpZzpmdW5jdGlvbigpe0V4dC5kZC5ERC5zdXBlcmNsYXNzLmFwcGx5Q29uZmlnLmNhbGwodGhpcyk7dGhpcy5zY3JvbGw9KHRoaXMuY29uZmlnLnNjcm9sbCE9PWZhbHNlKX0sYjRNb3VzZURvd246ZnVuY3Rpb24oYSl7dGhpcy5hdXRvT2Zmc2V0KGEuZ2V0UGFnZVgoKSxhLmdldFBhZ2VZKCkpfSxiNERyYWc6ZnVuY3Rpb24oYSl7dGhpcy5zZXREcmFnRWxQb3MoYS5nZXRQYWdlWCgpLGEuZ2V0UGFnZVkoKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuKCJERCAiK3RoaXMuaWQpfX0pO0V4dC5kZC5ERFByb3h5PWZ1bmN0aW9uKGMsYSxiKXtpZihjKXt0aGlzLmluaXQoYyxhLGIpO3RoaXMuaW5pdEZyYW1lKCl9fTtFeHQuZGQuRERQcm94eS5kcmFnRWxJZD0ieWdkZGZkaXYiO0V4dC5leHRlbmQoRXh0LmRkLkREUHJveHksRXh0LmRkLkRELHtyZXNpemVGcmFtZTp0cnVlLGNlbnRlckZyYW1lOmZhbHNlLGNyZWF0ZUZyYW1lOmZ1bmN0aW9uKCl7dmFyIGI9dGhpczt2YXIgYT1kb2N1bWVudC5ib2R5O2lmKCFhfHwhYS5maXJzdENoaWxkKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5jcmVhdGVGcmFtZSgpfSw1MCk7cmV0dXJufXZhciBkPXRoaXMuZ2V0RHJhZ0VsKCk7aWYoIWQpe2Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZC5pZD10aGlzLmRyYWdFbElkO3ZhciBjPWQuc3R5bGU7Yy5wb3NpdGlvbj0iYWJzb2x1dGUiO2MudmlzaWJpbGl0eT0iaGlkZGVuIjtjLmN1cnNvcj0ibW92ZSI7Yy5ib3JkZXI9IjJweCBzb2xpZCAjYWFhIjtjLnpJbmRleD05OTk7YS5pbnNlcnRCZWZvcmUoZCxhLmZpcnN0Q2hpbGQpfX0saW5pdEZyYW1lOmZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVGcmFtZSgpfSxhcHBseUNvbmZpZzpmdW5jdGlvbigpe0V4dC5kZC5ERFByb3h5LnN1cGVyY2xhc3MuYXBwbHlDb25maWcuY2FsbCh0aGlzKTt0aGlzLnJlc2l6ZUZyYW1lPSh0aGlzLmNvbmZpZy5yZXNpemVGcmFtZSE9PWZhbHNlKTt0aGlzLmNlbnRlckZyYW1lPSh0aGlzLmNvbmZpZy5jZW50ZXJGcmFtZSk7dGhpcy5zZXREcmFnRWxJZCh0aGlzLmNvbmZpZy5kcmFnRWxJZHx8RXh0LmRkLkREUHJveHkuZHJhZ0VsSWQpfSxzaG93RnJhbWU6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLmdldEVsKCk7dmFyIGE9dGhpcy5nZXREcmFnRWwoKTt2YXIgYj1hLnN0eWxlO3RoaXMuX3Jlc2l6ZVByb3h5KCk7aWYodGhpcy5jZW50ZXJGcmFtZSl7dGhpcy5zZXREZWx0YShNYXRoLnJvdW5kKHBhcnNlSW50KGIud2lkdGgsMTApLzIpLE1hdGgucm91bmQocGFyc2VJbnQoYi5oZWlnaHQsMTApLzIpKX10aGlzLnNldERyYWdFbFBvcyhlLGQpO0V4dC5mbHkoYSkuc2hvdygpfSxfcmVzaXplUHJveHk6ZnVuY3Rpb24oKXtpZih0aGlzLnJlc2l6ZUZyYW1lKXt2YXIgYT10aGlzLmdldEVsKCk7RXh0LmZseSh0aGlzLmdldERyYWdFbCgpKS5zZXRTaXplKGEub2Zmc2V0V2lkdGgsYS5vZmZzZXRIZWlnaHQpfX0sYjRNb3VzZURvd246ZnVuY3Rpb24oYil7dmFyIGE9Yi5nZXRQYWdlWCgpO3ZhciBjPWIuZ2V0UGFnZVkoKTt0aGlzLmF1dG9PZmZzZXQoYSxjKTt0aGlzLnNldERyYWdFbFBvcyhhLGMpfSxiNFN0YXJ0RHJhZzpmdW5jdGlvbihhLGIpe3RoaXMuc2hvd0ZyYW1lKGEsYil9LGI0RW5kRHJhZzpmdW5jdGlvbihhKXtFeHQuZmx5KHRoaXMuZ2V0RHJhZ0VsKCkpLmhpZGUoKX0sZW5kRHJhZzpmdW5jdGlvbihjKXt2YXIgYj10aGlzLmdldEVsKCk7dmFyIGE9dGhpcy5nZXREcmFnRWwoKTthLnN0eWxlLnZpc2liaWxpdHk9IiI7dGhpcy5iZWZvcmVNb3ZlKCk7Yi5zdHlsZS52aXNpYmlsaXR5PSJoaWRkZW4iO0V4dC5kZC5ERE0ubW92ZVRvRWwoYixhKTthLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiI7Yi5zdHlsZS52aXNpYmlsaXR5PSIiO3RoaXMuYWZ0ZXJEcmFnKCl9LGJlZm9yZU1vdmU6ZnVuY3Rpb24oKXt9LGFmdGVyRHJhZzpmdW5jdGlvbigpe30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4oIkREUHJveHkgIit0aGlzLmlkKX19KTtFeHQuZGQuRERUYXJnZXQ9ZnVuY3Rpb24oYyxhLGIpe2lmKGMpe3RoaXMuaW5pdFRhcmdldChjLGEsYil9fTtFeHQuZXh0ZW5kKEV4dC5kZC5ERFRhcmdldCxFeHQuZGQuRHJhZ0Ryb3Ase2dldERyYWdFbDpFeHQuZW1wdHlGbixpc1ZhbGlkSGFuZGxlQ2hpbGQ6RXh0LmVtcHR5Rm4sc3RhcnREcmFnOkV4dC5lbXB0eUZuLGVuZERyYWc6RXh0LmVtcHR5Rm4sb25EcmFnOkV4dC5lbXB0eUZuLG9uRHJhZ0Ryb3A6RXh0LmVtcHR5Rm4sb25EcmFnRW50ZXI6RXh0LmVtcHR5Rm4sb25EcmFnT3V0OkV4dC5lbXB0eUZuLG9uRHJhZ092ZXI6RXh0LmVtcHR5Rm4sb25JbnZhbGlkRHJvcDpFeHQuZW1wdHlGbixvbk1vdXNlRG93bjpFeHQuZW1wdHlGbixvbk1vdXNlVXA6RXh0LmVtcHR5Rm4sc2V0WENvbnN0cmFpbnQ6RXh0LmVtcHR5Rm4sc2V0WUNvbnN0cmFpbnQ6RXh0LmVtcHR5Rm4scmVzZXRDb25zdHJhaW50czpFeHQuZW1wdHlGbixjbGVhckNvbnN0cmFpbnRzOkV4dC5lbXB0eUZuLGNsZWFyVGlja3M6RXh0LmVtcHR5Rm4sc2V0SW5pdFBvc2l0aW9uOkV4dC5lbXB0eUZuLHNldERyYWdFbElkOkV4dC5lbXB0eUZuLHNldEhhbmRsZUVsSWQ6RXh0LmVtcHR5Rm4sc2V0T3V0ZXJIYW5kbGVFbElkOkV4dC5lbXB0eUZuLGFkZEludmFsaWRIYW5kbGVDbGFzczpFeHQuZW1wdHlGbixhZGRJbnZhbGlkSGFuZGxlSWQ6RXh0LmVtcHR5Rm4sYWRkSW52YWxpZEhhbmRsZVR5cGU6RXh0LmVtcHR5Rm4scmVtb3ZlSW52YWxpZEhhbmRsZUNsYXNzOkV4dC5lbXB0eUZuLHJlbW92ZUludmFsaWRIYW5kbGVJZDpFeHQuZW1wdHlGbixyZW1vdmVJbnZhbGlkSGFuZGxlVHlwZTpFeHQuZW1wdHlGbix0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybigiRERUYXJnZXQgIit0aGlzLmlkKX19KTtFeHQuZGQuRHJhZ1RyYWNrZXI9RXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLHthY3RpdmU6ZmFsc2UsdG9sZXJhbmNlOjUsYXV0b1N0YXJ0OmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO3RoaXMuYWRkRXZlbnRzKCJtb3VzZWRvd24iLCJtb3VzZXVwIiwibW91c2Vtb3ZlIiwiZHJhZ3N0YXJ0IiwiZHJhZ2VuZCIsImRyYWciKTt0aGlzLmRyYWdSZWdpb249bmV3IEV4dC5saWIuUmVnaW9uKDAsMCwwLDApO2lmKHRoaXMuZWwpe3RoaXMuaW5pdEVsKHRoaXMuZWwpfUV4dC5kZC5EcmFnVHJhY2tlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX0saW5pdEVsOmZ1bmN0aW9uKGEpe3RoaXMuZWw9RXh0LmdldChhKTthLm9uKCJtb3VzZWRvd24iLHRoaXMub25Nb3VzZURvd24sdGhpcyx0aGlzLmRlbGVnYXRlP3tkZWxlZ2F0ZTp0aGlzLmRlbGVnYXRlfTp1bmRlZmluZWQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbC51bigibW91c2Vkb3duIix0aGlzLm9uTW91c2VEb3duLHRoaXMpO2RlbGV0ZSB0aGlzLmVsfSxvbk1vdXNlRG93bjpmdW5jdGlvbihiLGEpe2lmKHRoaXMuZmlyZUV2ZW50KCJtb3VzZWRvd24iLHRoaXMsYikhPT1mYWxzZSYmdGhpcy5vbkJlZm9yZVN0YXJ0KGIpIT09ZmFsc2Upe3RoaXMuc3RhcnRYWT10aGlzLmxhc3RYWT1iLmdldFhZKCk7dGhpcy5kcmFnVGFyZ2V0PXRoaXMuZGVsZWdhdGU/YTp0aGlzLmVsLmRvbTtpZih0aGlzLnByZXZlbnREZWZhdWx0IT09ZmFsc2Upe2IucHJldmVudERlZmF1bHQoKX1FeHQuZ2V0RG9jKCkub24oe3Njb3BlOnRoaXMsbW91c2V1cDp0aGlzLm9uTW91c2VVcCxtb3VzZW1vdmU6dGhpcy5vbk1vdXNlTW92ZSxzZWxlY3RzdGFydDp0aGlzLnN0b3BTZWxlY3R9KTtpZih0aGlzLmF1dG9TdGFydCl7dGhpcy50aW1lcj10aGlzLnRyaWdnZXJTdGFydC5kZWZlcih0aGlzLmF1dG9TdGFydD09PXRydWU/MTAwMDp0aGlzLmF1dG9TdGFydCx0aGlzLFtiXSl9fX0sb25Nb3VzZU1vdmU6ZnVuY3Rpb24oZCxjKXtpZih0aGlzLmFjdGl2ZSYmRXh0LmlzSUUmJiFkLmJyb3dzZXJFdmVudC5idXR0b24pe2QucHJldmVudERlZmF1bHQoKTt0aGlzLm9uTW91c2VVcChkKTtyZXR1cm59ZC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBiPWQuZ2V0WFkoKSxhPXRoaXMuc3RhcnRYWTt0aGlzLmxhc3RYWT1iO2lmKCF0aGlzLmFjdGl2ZSl7aWYoTWF0aC5hYnMoYVswXS1iWzBdKT50aGlzLnRvbGVyYW5jZXx8TWF0aC5hYnMoYVsxXS1iWzFdKT50aGlzLnRvbGVyYW5jZSl7dGhpcy50cmlnZ2VyU3RhcnQoZCl9ZWxzZXtyZXR1cm59fXRoaXMuZmlyZUV2ZW50KCJtb3VzZW1vdmUiLHRoaXMsZCk7dGhpcy5vbkRyYWcoZCk7dGhpcy5maXJlRXZlbnQoImRyYWciLHRoaXMsZCl9LG9uTW91c2VVcDpmdW5jdGlvbihjKXt2YXIgYj1FeHQuZ2V0RG9jKCksYT10aGlzLmFjdGl2ZTtiLnVuKCJtb3VzZW1vdmUiLHRoaXMub25Nb3VzZU1vdmUsdGhpcyk7Yi51bigibW91c2V1cCIsdGhpcy5vbk1vdXNlVXAsdGhpcyk7Yi51bigic2VsZWN0c3RhcnQiLHRoaXMuc3RvcFNlbGVjdCx0aGlzKTtjLnByZXZlbnREZWZhdWx0KCk7dGhpcy5jbGVhclN0YXJ0KCk7dGhpcy5hY3RpdmU9ZmFsc2U7ZGVsZXRlIHRoaXMuZWxSZWdpb247dGhpcy5maXJlRXZlbnQoIm1vdXNldXAiLHRoaXMsYyk7aWYoYSl7dGhpcy5vbkVuZChjKTt0aGlzLmZpcmVFdmVudCgiZHJhZ2VuZCIsdGhpcyxjKX19LHRyaWdnZXJTdGFydDpmdW5jdGlvbihhKXt0aGlzLmNsZWFyU3RhcnQoKTt0aGlzLmFjdGl2ZT10cnVlO3RoaXMub25TdGFydChhKTt0aGlzLmZpcmVFdmVudCgiZHJhZ3N0YXJ0Iix0aGlzLGEpfSxjbGVhclN0YXJ0OmZ1bmN0aW9uKCl7aWYodGhpcy50aW1lcil7Y2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO2RlbGV0ZSB0aGlzLnRpbWVyfX0sc3RvcFNlbGVjdDpmdW5jdGlvbihhKXthLnN0b3BFdmVudCgpO3JldHVybiBmYWxzZX0sb25CZWZvcmVTdGFydDpmdW5jdGlvbihhKXt9LG9uU3RhcnQ6ZnVuY3Rpb24oYSl7fSxvbkRyYWc6ZnVuY3Rpb24oYSl7fSxvbkVuZDpmdW5jdGlvbihhKXt9LGdldERyYWdUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kcmFnVGFyZ2V0fSxnZXREcmFnQ3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0WFk6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5jb25zdHJhaW5Nb2Rlc1thXS5jYWxsKHRoaXMsdGhpcy5sYXN0WFkpOnRoaXMubGFzdFhZfSxnZXRPZmZzZXQ6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy5nZXRYWShjKSxhPXRoaXMuc3RhcnRYWTtyZXR1cm5bYVswXS1iWzBdLGFbMV0tYlsxXV19LGNvbnN0cmFpbk1vZGVzOntwb2ludDpmdW5jdGlvbihiKXtpZighdGhpcy5lbFJlZ2lvbil7dGhpcy5lbFJlZ2lvbj10aGlzLmdldERyYWdDdCgpLmdldFJlZ2lvbigpfXZhciBhPXRoaXMuZHJhZ1JlZ2lvbjthLmxlZnQ9YlswXTthLnRvcD1iWzFdO2EucmlnaHQ9YlswXTthLmJvdHRvbT1iWzFdO2EuY29uc3RyYWluVG8odGhpcy5lbFJlZ2lvbik7cmV0dXJuW2EubGVmdCxhLnRvcF19fX0pO0V4dC5kZC5TY3JvbGxNYW5hZ2VyPWZ1bmN0aW9uKCl7dmFyIGM9RXh0LmRkLkRyYWdEcm9wTWdyO3ZhciBlPXt9O3ZhciBiPW51bGw7dmFyIGk9e307dmFyIGg9ZnVuY3Rpb24obCl7Yj1udWxsO2EoKX07dmFyIGo9ZnVuY3Rpb24oKXtpZihjLmRyYWdDdXJyZW50KXtjLnJlZnJlc2hDYWNoZShjLmRyYWdDdXJyZW50Lmdyb3Vwcyl9fTt2YXIgZD1mdW5jdGlvbigpe2lmKGMuZHJhZ0N1cnJlbnQpe3ZhciBsPUV4dC5kZC5TY3JvbGxNYW5hZ2VyO3ZhciBtPWkuZWwuZGRTY3JvbGxDb25maWc/aS5lbC5kZFNjcm9sbENvbmZpZy5pbmNyZW1lbnQ6bC5pbmNyZW1lbnQ7aWYoIWwuYW5pbWF0ZSl7aWYoaS5lbC5zY3JvbGwoaS5kaXIsbSkpe2ooKX19ZWxzZXtpLmVsLnNjcm9sbChpLmRpcixtLHRydWUsbC5hbmltRHVyYXRpb24sail9fX07dmFyIGE9ZnVuY3Rpb24oKXtpZihpLmlkKXtjbGVhckludGVydmFsKGkuaWQpfWkuaWQ9MDtpLmVsPW51bGw7aS5kaXI9IiJ9O3ZhciBnPWZ1bmN0aW9uKG0sbCl7YSgpO2kuZWw9bTtpLmRpcj1sO3ZhciBvPW0uZGRTY3JvbGxDb25maWc/bS5kZFNjcm9sbENvbmZpZy5kZEdyb3VwOnVuZGVmaW5lZCxuPShtLmRkU2Nyb2xsQ29uZmlnJiZtLmRkU2Nyb2xsQ29uZmlnLmZyZXF1ZW5jeSk/bS5kZFNjcm9sbENvbmZpZy5mcmVxdWVuY3k6RXh0LmRkLlNjcm9sbE1hbmFnZXIuZnJlcXVlbmN5O2lmKG89PT11bmRlZmluZWR8fGMuZHJhZ0N1cnJlbnQuZGRHcm91cD09byl7aS5pZD1zZXRJbnRlcnZhbChkLG4pfX07dmFyIGs9ZnVuY3Rpb24obyxxKXtpZihxfHwhYy5kcmFnQ3VycmVudCl7cmV0dXJufXZhciBzPUV4dC5kZC5TY3JvbGxNYW5hZ2VyO2lmKCFifHxiIT1jLmRyYWdDdXJyZW50KXtiPWMuZHJhZ0N1cnJlbnQ7cy5yZWZyZXNoQ2FjaGUoKX12YXIgdD1FeHQubGliLkV2ZW50LmdldFhZKG8pO3ZhciB1PW5ldyBFeHQubGliLlBvaW50KHRbMF0sdFsxXSk7Zm9yKHZhciBtIGluIGUpe3ZhciBuPWVbbV0sbD1uLl9yZWdpb247dmFyIHA9bi5kZFNjcm9sbENvbmZpZz9uLmRkU2Nyb2xsQ29uZmlnOnM7aWYobCYmbC5jb250YWlucyh1KSYmbi5pc1Njcm9sbGFibGUoKSl7aWYobC5ib3R0b20tdS55PD1wLnZ0aHJlc2gpe2lmKGkuZWwhPW4pe2cobiwiZG93biIpfXJldHVybn1lbHNle2lmKGwucmlnaHQtdS54PD1wLmh0aHJlc2gpe2lmKGkuZWwhPW4pe2cobiwibGVmdCIpfXJldHVybn1lbHNle2lmKHUueS1sLnRvcDw9cC52dGhyZXNoKXtpZihpLmVsIT1uKXtnKG4sInVwIil9cmV0dXJufWVsc2V7aWYodS54LWwubGVmdDw9cC5odGhyZXNoKXtpZihpLmVsIT1uKXtnKG4sInJpZ2h0Iil9cmV0dXJufX19fX19YSgpfTtjLmZpcmVFdmVudHM9Yy5maXJlRXZlbnRzLmNyZWF0ZVNlcXVlbmNlKGssYyk7Yy5zdG9wRHJhZz1jLnN0b3BEcmFnLmNyZWF0ZVNlcXVlbmNlKGgsYyk7cmV0dXJue3JlZ2lzdGVyOmZ1bmN0aW9uKG4pe2lmKEV4dC5pc0FycmF5KG4pKXtmb3IodmFyIG09MCxsPW4ubGVuZ3RoO208bDttKyspe3RoaXMucmVnaXN0ZXIoblttXSl9fWVsc2V7bj1FeHQuZ2V0KG4pO2Vbbi5pZF09bn19LHVucmVnaXN0ZXI6ZnVuY3Rpb24obil7aWYoRXh0LmlzQXJyYXkobikpe2Zvcih2YXIgbT0wLGw9bi5sZW5ndGg7bTxsO20rKyl7dGhpcy51bnJlZ2lzdGVyKG5bbV0pfX1lbHNle249RXh0LmdldChuKTtkZWxldGUgZVtuLmlkXX19LHZ0aHJlc2g6MjUsaHRocmVzaDoyNSxpbmNyZW1lbnQ6MTAwLGZyZXF1ZW5jeTo1MDAsYW5pbWF0ZTp0cnVlLGFuaW1EdXJhdGlvbjowLjQsZGRHcm91cDp1bmRlZmluZWQscmVmcmVzaENhY2hlOmZ1bmN0aW9uKCl7Zm9yKHZhciBsIGluIGUpe2lmKHR5cGVvZiBlW2xdPT0ib2JqZWN0Iil7ZVtsXS5fcmVnaW9uPWVbbF0uZ2V0UmVnaW9uKCl9fX19fSgpO0V4dC5kZC5SZWdpc3RyeT1mdW5jdGlvbigpe3ZhciBkPXt9O3ZhciBiPXt9O3ZhciBhPTA7dmFyIGM9ZnVuY3Rpb24oZyxlKXtpZih0eXBlb2YgZz09InN0cmluZyIpe3JldHVybiBnfXZhciBoPWcuaWQ7aWYoIWgmJmUhPT1mYWxzZSl7aD0iZXh0ZGQtIisoKythKTtnLmlkPWh9cmV0dXJuIGh9O3JldHVybntyZWdpc3RlcjpmdW5jdGlvbihqLGspe2s9a3x8e307aWYodHlwZW9mIGo9PSJzdHJpbmciKXtqPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGopfWsuZGRlbD1qO2RbYyhqKV09aztpZihrLmlzSGFuZGxlIT09ZmFsc2Upe2Jbay5kZGVsLmlkXT1rfWlmKGsuaGFuZGxlcyl7dmFyIGg9ay5oYW5kbGVzO2Zvcih2YXIgZz0wLGU9aC5sZW5ndGg7ZzxlO2crKyl7YltjKGhbZ10pXT1rfX19LHVucmVnaXN0ZXI6ZnVuY3Rpb24oail7dmFyIGw9YyhqLGZhbHNlKTt2YXIgaz1kW2xdO2lmKGspe2RlbGV0ZSBkW2xdO2lmKGsuaGFuZGxlcyl7dmFyIGg9ay5oYW5kbGVzO2Zvcih2YXIgZz0wLGU9aC5sZW5ndGg7ZzxlO2crKyl7ZGVsZXRlIGJbYyhoW2ddLGZhbHNlKV19fX19LGdldEhhbmRsZTpmdW5jdGlvbihlKXtpZih0eXBlb2YgZSE9InN0cmluZyIpe2U9ZS5pZH1yZXR1cm4gYltlXX0sZ2V0SGFuZGxlRnJvbUV2ZW50OmZ1bmN0aW9uKGgpe3ZhciBnPUV4dC5saWIuRXZlbnQuZ2V0VGFyZ2V0KGgpO3JldHVybiBnP2JbZy5pZF06bnVsbH0sZ2V0VGFyZ2V0OmZ1bmN0aW9uKGUpe2lmKHR5cGVvZiBlIT0ic3RyaW5nIil7ZT1lLmlkfXJldHVybiBkW2VdfSxnZXRUYXJnZXRGcm9tRXZlbnQ6ZnVuY3Rpb24oaCl7dmFyIGc9RXh0LmxpYi5FdmVudC5nZXRUYXJnZXQoaCk7cmV0dXJuIGc/ZFtnLmlkXXx8YltnLmlkXTpudWxsfX19KCk7RXh0LmRkLlN0YXR1c1Byb3h5PWZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO3RoaXMuaWQ9dGhpcy5pZHx8RXh0LmlkKCk7dGhpcy5lbD1uZXcgRXh0LkxheWVyKHtkaDp7aWQ6dGhpcy5pZCx0YWc6ImRpdiIsY2xzOiJ4LWRkLWRyYWctcHJveHkgIit0aGlzLmRyb3BOb3RBbGxvd2VkLGNoaWxkcmVuOlt7dGFnOiJkaXYiLGNsczoieC1kZC1kcm9wLWljb24ifSx7dGFnOiJkaXYiLGNsczoieC1kZC1kcmFnLWdob3N0In1dfSxzaGFkb3c6IWF8fGEuc2hhZG93IT09ZmFsc2V9KTt0aGlzLmdob3N0PUV4dC5nZXQodGhpcy5lbC5kb20uY2hpbGROb2Rlc1sxXSk7dGhpcy5kcm9wU3RhdHVzPXRoaXMuZHJvcE5vdEFsbG93ZWR9O0V4dC5kZC5TdGF0dXNQcm94eS5wcm90b3R5cGU9e2Ryb3BBbGxvd2VkOiJ4LWRkLWRyb3Atb2siLGRyb3BOb3RBbGxvd2VkOiJ4LWRkLWRyb3Atbm9kcm9wIixzZXRTdGF0dXM6ZnVuY3Rpb24oYSl7YT1hfHx0aGlzLmRyb3BOb3RBbGxvd2VkO2lmKHRoaXMuZHJvcFN0YXR1cyE9YSl7dGhpcy5lbC5yZXBsYWNlQ2xhc3ModGhpcy5kcm9wU3RhdHVzLGEpO3RoaXMuZHJvcFN0YXR1cz1hfX0scmVzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5lbC5kb20uY2xhc3NOYW1lPSJ4LWRkLWRyYWctcHJveHkgIit0aGlzLmRyb3BOb3RBbGxvd2VkO3RoaXMuZHJvcFN0YXR1cz10aGlzLmRyb3BOb3RBbGxvd2VkO2lmKGEpe3RoaXMuZ2hvc3QudXBkYXRlKCIiKX19LHVwZGF0ZTpmdW5jdGlvbihhKXtpZih0eXBlb2YgYT09InN0cmluZyIpe3RoaXMuZ2hvc3QudXBkYXRlKGEpfWVsc2V7dGhpcy5naG9zdC51cGRhdGUoIiIpO2Euc3R5bGUubWFyZ2luPSIwIjt0aGlzLmdob3N0LmRvbS5hcHBlbmRDaGlsZChhKX12YXIgYj10aGlzLmdob3N0LmRvbS5maXJzdENoaWxkO2lmKGIpe0V4dC5mbHkoYikuc2V0U3R5bGUoImZsb2F0Iiwibm9uZSIpfX0sZ2V0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0R2hvc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5naG9zdH0saGlkZTpmdW5jdGlvbihhKXt0aGlzLmVsLmhpZGUoKTtpZihhKXt0aGlzLnJlc2V0KHRydWUpfX0sc3RvcDpmdW5jdGlvbigpe2lmKHRoaXMuYW5pbSYmdGhpcy5hbmltLmlzQW5pbWF0ZWQmJnRoaXMuYW5pbS5pc0FuaW1hdGVkKCkpe3RoaXMuYW5pbS5zdG9wKCl9fSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5lbC5zaG93KCl9LHN5bmM6ZnVuY3Rpb24oKXt0aGlzLmVsLnN5bmMoKX0scmVwYWlyOmZ1bmN0aW9uKGIsYyxhKXt0aGlzLmNhbGxiYWNrPWM7dGhpcy5zY29wZT1hO2lmKGImJnRoaXMuYW5pbVJlcGFpciE9PWZhbHNlKXt0aGlzLmVsLmFkZENsYXNzKCJ4LWRkLWRyYWctcmVwYWlyIik7dGhpcy5lbC5oaWRlVW5kZXJzKHRydWUpO3RoaXMuYW5pbT10aGlzLmVsLnNoaWZ0KHtkdXJhdGlvbjp0aGlzLnJlcGFpckR1cmF0aW9ufHwwLjUsZWFzaW5nOiJlYXNlT3V0Iix4eTpiLHN0b3BGeDp0cnVlLGNhbGxiYWNrOnRoaXMuYWZ0ZXJSZXBhaXIsc2NvcGU6dGhpc30pfWVsc2V7dGhpcy5hZnRlclJlcGFpcigpfX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXt0aGlzLmhpZGUodHJ1ZSk7aWYodHlwZW9mIHRoaXMuY2FsbGJhY2s9PSJmdW5jdGlvbiIpe3RoaXMuY2FsbGJhY2suY2FsbCh0aGlzLnNjb3BlfHx0aGlzKX10aGlzLmNhbGxiYWNrPW51bGw7dGhpcy5zY29wZT1udWxsfSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5naG9zdCx0aGlzLmVsKX19O0V4dC5kZC5EcmFnU291cmNlPWZ1bmN0aW9uKGIsYSl7dGhpcy5lbD1FeHQuZ2V0KGIpO2lmKCF0aGlzLmRyYWdEYXRhKXt0aGlzLmRyYWdEYXRhPXt9fUV4dC5hcHBseSh0aGlzLGEpO2lmKCF0aGlzLnByb3h5KXt0aGlzLnByb3h5PW5ldyBFeHQuZGQuU3RhdHVzUHJveHkoKX1FeHQuZGQuRHJhZ1NvdXJjZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0aGlzLmVsLmRvbSx0aGlzLmRkR3JvdXB8fHRoaXMuZ3JvdXAse2RyYWdFbElkOnRoaXMucHJveHkuaWQscmVzaXplRnJhbWU6ZmFsc2UsaXNUYXJnZXQ6ZmFsc2Usc2Nyb2xsOnRoaXMuc2Nyb2xsPT09dHJ1ZX0pO3RoaXMuZHJhZ2dpbmc9ZmFsc2V9O0V4dC5leHRlbmQoRXh0LmRkLkRyYWdTb3VyY2UsRXh0LmRkLkREUHJveHkse2Ryb3BBbGxvd2VkOiJ4LWRkLWRyb3Atb2siLGRyb3BOb3RBbGxvd2VkOiJ4LWRkLWRyb3Atbm9kcm9wIixnZXREcmFnRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kcmFnRGF0YX0sb25EcmFnRW50ZXI6ZnVuY3Rpb24oYyxkKXt2YXIgYj1FeHQuZGQuRHJhZ0Ryb3BNZ3IuZ2V0RERCeUlkKGQpO3RoaXMuY2FjaGVkVGFyZ2V0PWI7aWYodGhpcy5iZWZvcmVEcmFnRW50ZXIoYixjLGQpIT09ZmFsc2Upe2lmKGIuaXNOb3RpZnlUYXJnZXQpe3ZhciBhPWIubm90aWZ5RW50ZXIodGhpcyxjLHRoaXMuZHJhZ0RhdGEpO3RoaXMucHJveHkuc2V0U3RhdHVzKGEpfWVsc2V7dGhpcy5wcm94eS5zZXRTdGF0dXModGhpcy5kcm9wQWxsb3dlZCl9aWYodGhpcy5hZnRlckRyYWdFbnRlcil7dGhpcy5hZnRlckRyYWdFbnRlcihiLGMsZCl9fX0sYmVmb3JlRHJhZ0VudGVyOmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdHJ1ZX0sYWxpZ25FbFdpdGhNb3VzZTpmdW5jdGlvbigpe0V4dC5kZC5EcmFnU291cmNlLnN1cGVyY2xhc3MuYWxpZ25FbFdpdGhNb3VzZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5wcm94eS5zeW5jKCl9LG9uRHJhZ092ZXI6ZnVuY3Rpb24oYyxkKXt2YXIgYj10aGlzLmNhY2hlZFRhcmdldHx8RXh0LmRkLkRyYWdEcm9wTWdyLmdldEREQnlJZChkKTtpZih0aGlzLmJlZm9yZURyYWdPdmVyKGIsYyxkKSE9PWZhbHNlKXtpZihiLmlzTm90aWZ5VGFyZ2V0KXt2YXIgYT1iLm5vdGlmeU92ZXIodGhpcyxjLHRoaXMuZHJhZ0RhdGEpO3RoaXMucHJveHkuc2V0U3RhdHVzKGEpfWlmKHRoaXMuYWZ0ZXJEcmFnT3Zlcil7dGhpcy5hZnRlckRyYWdPdmVyKGIsYyxkKX19fSxiZWZvcmVEcmFnT3ZlcjpmdW5jdGlvbihiLGEsYyl7cmV0dXJuIHRydWV9LG9uRHJhZ091dDpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuY2FjaGVkVGFyZ2V0fHxFeHQuZGQuRHJhZ0Ryb3BNZ3IuZ2V0RERCeUlkKGMpO2lmKHRoaXMuYmVmb3JlRHJhZ091dChhLGIsYykhPT1mYWxzZSl7aWYoYS5pc05vdGlmeVRhcmdldCl7YS5ub3RpZnlPdXQodGhpcyxiLHRoaXMuZHJhZ0RhdGEpfXRoaXMucHJveHkucmVzZXQoKTtpZih0aGlzLmFmdGVyRHJhZ091dCl7dGhpcy5hZnRlckRyYWdPdXQoYSxiLGMpfX10aGlzLmNhY2hlZFRhcmdldD1udWxsfSxiZWZvcmVEcmFnT3V0OmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdHJ1ZX0sb25EcmFnRHJvcDpmdW5jdGlvbihiLGMpe3ZhciBhPXRoaXMuY2FjaGVkVGFyZ2V0fHxFeHQuZGQuRHJhZ0Ryb3BNZ3IuZ2V0RERCeUlkKGMpO2lmKHRoaXMuYmVmb3JlRHJhZ0Ryb3AoYSxiLGMpIT09ZmFsc2Upe2lmKGEuaXNOb3RpZnlUYXJnZXQpe2lmKGEubm90aWZ5RHJvcCh0aGlzLGIsdGhpcy5kcmFnRGF0YSkpe3RoaXMub25WYWxpZERyb3AoYSxiLGMpfWVsc2V7dGhpcy5vbkludmFsaWREcm9wKGEsYixjKX19ZWxzZXt0aGlzLm9uVmFsaWREcm9wKGEsYixjKX1pZih0aGlzLmFmdGVyRHJhZ0Ryb3Ape3RoaXMuYWZ0ZXJEcmFnRHJvcChhLGIsYyl9fWRlbGV0ZSB0aGlzLmNhY2hlZFRhcmdldH0sYmVmb3JlRHJhZ0Ryb3A6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0cnVlfSxvblZhbGlkRHJvcDpmdW5jdGlvbihiLGEsYyl7dGhpcy5oaWRlUHJveHkoKTtpZih0aGlzLmFmdGVyVmFsaWREcm9wKXt0aGlzLmFmdGVyVmFsaWREcm9wKGIsYSxjKX19LGdldFJlcGFpclhZOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIHRoaXMuZWwuZ2V0WFkoKX0sb25JbnZhbGlkRHJvcDpmdW5jdGlvbihiLGEsYyl7dGhpcy5iZWZvcmVJbnZhbGlkRHJvcChiLGEsYyk7aWYodGhpcy5jYWNoZWRUYXJnZXQpe2lmKHRoaXMuY2FjaGVkVGFyZ2V0LmlzTm90aWZ5VGFyZ2V0KXt0aGlzLmNhY2hlZFRhcmdldC5ub3RpZnlPdXQodGhpcyxhLHRoaXMuZHJhZ0RhdGEpfXRoaXMuY2FjaGVUYXJnZXQ9bnVsbH10aGlzLnByb3h5LnJlcGFpcih0aGlzLmdldFJlcGFpclhZKGEsdGhpcy5kcmFnRGF0YSksdGhpcy5hZnRlclJlcGFpcix0aGlzKTtpZih0aGlzLmFmdGVySW52YWxpZERyb3Ape3RoaXMuYWZ0ZXJJbnZhbGlkRHJvcChhLGMpfX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXtpZihFeHQuZW5hYmxlRngpe3RoaXMuZWwuaGlnaGxpZ2h0KHRoaXMuaGxDb2xvcnx8ImMzZGFmOSIpfXRoaXMuZHJhZ2dpbmc9ZmFsc2V9LGJlZm9yZUludmFsaWREcm9wOmZ1bmN0aW9uKGIsYSxjKXtyZXR1cm4gdHJ1ZX0saGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKGIpe2lmKHRoaXMuZHJhZ2dpbmcpe3JldHVybn12YXIgYT10aGlzLmdldERyYWdEYXRhKGIpO2lmKGEmJnRoaXMub25CZWZvcmVEcmFnKGEsYikhPT1mYWxzZSl7dGhpcy5kcmFnRGF0YT1hO3RoaXMucHJveHkuc3RvcCgpO0V4dC5kZC5EcmFnU291cmNlLnN1cGVyY2xhc3MuaGFuZGxlTW91c2VEb3duLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LG9uQmVmb3JlRHJhZzpmdW5jdGlvbihhLGIpe3JldHVybiB0cnVlfSxvblN0YXJ0RHJhZzpFeHQuZW1wdHlGbixzdGFydERyYWc6ZnVuY3Rpb24oYSxiKXt0aGlzLnByb3h5LnJlc2V0KCk7dGhpcy5kcmFnZ2luZz10cnVlO3RoaXMucHJveHkudXBkYXRlKCIiKTt0aGlzLm9uSW5pdERyYWcoYSxiKTt0aGlzLnByb3h5LnNob3coKX0sb25Jbml0RHJhZzpmdW5jdGlvbihhLGMpe3ZhciBiPXRoaXMuZWwuZG9tLmNsb25lTm9kZSh0cnVlKTtiLmlkPUV4dC5pZCgpO3RoaXMucHJveHkudXBkYXRlKGIpO3RoaXMub25TdGFydERyYWcoYSxjKTtyZXR1cm4gdHJ1ZX0sZ2V0UHJveHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm94eX0saGlkZVByb3h5OmZ1bmN0aW9uKCl7dGhpcy5wcm94eS5oaWRlKCk7dGhpcy5wcm94eS5yZXNldCh0cnVlKTt0aGlzLmRyYWdnaW5nPWZhbHNlfSx0cmlnZ2VyQ2FjaGVSZWZyZXNoOmZ1bmN0aW9uKCl7RXh0LmRkLkRETS5yZWZyZXNoQ2FjaGUodGhpcy5ncm91cHMpfSxiNEVuZERyYWc6ZnVuY3Rpb24oYSl7fSxlbmREcmFnOmZ1bmN0aW9uKGEpe3RoaXMub25FbmREcmFnKHRoaXMuZHJhZ0RhdGEsYSl9LG9uRW5kRHJhZzpmdW5jdGlvbihhLGIpe30sYXV0b09mZnNldDpmdW5jdGlvbihhLGIpe3RoaXMuc2V0RGVsdGEoLTEyLC0yMCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGQuRHJhZ1NvdXJjZS5zdXBlcmNsYXNzLmRlc3Ryb3kuY2FsbCh0aGlzKTtFeHQuZGVzdHJveSh0aGlzLnByb3h5KX19KTtFeHQuZGQuRHJvcFRhcmdldD1FeHQuZXh0ZW5kKEV4dC5kZC5ERFRhcmdldCx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXt0aGlzLmVsPUV4dC5nZXQoYik7RXh0LmFwcGx5KHRoaXMsYSk7aWYodGhpcy5jb250YWluZXJTY3JvbGwpe0V4dC5kZC5TY3JvbGxNYW5hZ2VyLnJlZ2lzdGVyKHRoaXMuZWwpfUV4dC5kZC5Ecm9wVGFyZ2V0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHRoaXMuZWwuZG9tLHRoaXMuZGRHcm91cHx8dGhpcy5ncm91cCx7aXNUYXJnZXQ6dHJ1ZX0pfSxkcm9wQWxsb3dlZDoieC1kZC1kcm9wLW9rIixkcm9wTm90QWxsb3dlZDoieC1kZC1kcm9wLW5vZHJvcCIsaXNUYXJnZXQ6dHJ1ZSxpc05vdGlmeVRhcmdldDp0cnVlLG5vdGlmeUVudGVyOmZ1bmN0aW9uKGEsYyxiKXtpZih0aGlzLm92ZXJDbGFzcyl7dGhpcy5lbC5hZGRDbGFzcyh0aGlzLm92ZXJDbGFzcyl9cmV0dXJuIHRoaXMuZHJvcEFsbG93ZWR9LG5vdGlmeU92ZXI6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiB0aGlzLmRyb3BBbGxvd2VkfSxub3RpZnlPdXQ6ZnVuY3Rpb24oYSxjLGIpe2lmKHRoaXMub3ZlckNsYXNzKXt0aGlzLmVsLnJlbW92ZUNsYXNzKHRoaXMub3ZlckNsYXNzKX19LG5vdGlmeURyb3A6ZnVuY3Rpb24oYSxjLGIpe3JldHVybiBmYWxzZX0sZGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZC5Ecm9wVGFyZ2V0LnN1cGVyY2xhc3MuZGVzdHJveS5jYWxsKHRoaXMpO2lmKHRoaXMuY29udGFpbmVyU2Nyb2xsKXtFeHQuZGQuU2Nyb2xsTWFuYWdlci51bnJlZ2lzdGVyKHRoaXMuZWwpfX19KTtFeHQuZGQuRHJhZ1pvbmU9RXh0LmV4dGVuZChFeHQuZGQuRHJhZ1NvdXJjZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXtFeHQuZGQuRHJhZ1pvbmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYixhKTtpZih0aGlzLmNvbnRhaW5lclNjcm9sbCl7RXh0LmRkLlNjcm9sbE1hbmFnZXIucmVnaXN0ZXIodGhpcy5lbCl9fSxnZXREcmFnRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmRkLlJlZ2lzdHJ5LmdldEhhbmRsZUZyb21FdmVudChhKX0sb25Jbml0RHJhZzpmdW5jdGlvbihhLGIpe3RoaXMucHJveHkudXBkYXRlKHRoaXMuZHJhZ0RhdGEuZGRlbC5jbG9uZU5vZGUodHJ1ZSkpO3RoaXMub25TdGFydERyYWcoYSxiKTtyZXR1cm4gdHJ1ZX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXtpZihFeHQuZW5hYmxlRngpe0V4dC5FbGVtZW50LmZseSh0aGlzLmRyYWdEYXRhLmRkZWwpLmhpZ2hsaWdodCh0aGlzLmhsQ29sb3J8fCJjM2RhZjkiKX10aGlzLmRyYWdnaW5nPWZhbHNlfSxnZXRSZXBhaXJYWTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LkVsZW1lbnQuZmx5KHRoaXMuZHJhZ0RhdGEuZGRlbCkuZ2V0WFkoKX0sZGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZC5EcmFnWm9uZS5zdXBlcmNsYXNzLmRlc3Ryb3kuY2FsbCh0aGlzKTtpZih0aGlzLmNvbnRhaW5lclNjcm9sbCl7RXh0LmRkLlNjcm9sbE1hbmFnZXIudW5yZWdpc3Rlcih0aGlzLmVsKX19fSk7RXh0LmRkLkRyb3Bab25lPWZ1bmN0aW9uKGIsYSl7RXh0LmRkLkRyb3Bab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGIsYSl9O0V4dC5leHRlbmQoRXh0LmRkLkRyb3Bab25lLEV4dC5kZC5Ecm9wVGFyZ2V0LHtnZXRUYXJnZXRGcm9tRXZlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5kZC5SZWdpc3RyeS5nZXRUYXJnZXRGcm9tRXZlbnQoYSl9LG9uTm9kZUVudGVyOmZ1bmN0aW9uKGQsYSxjLGIpe30sb25Ob2RlT3ZlcjpmdW5jdGlvbihkLGEsYyxiKXtyZXR1cm4gdGhpcy5kcm9wQWxsb3dlZH0sb25Ob2RlT3V0OmZ1bmN0aW9uKGQsYSxjLGIpe30sb25Ob2RlRHJvcDpmdW5jdGlvbihkLGEsYyxiKXtyZXR1cm4gZmFsc2V9LG9uQ29udGFpbmVyT3ZlcjpmdW5jdGlvbihhLGMsYil7cmV0dXJuIHRoaXMuZHJvcE5vdEFsbG93ZWR9LG9uQ29udGFpbmVyRHJvcDpmdW5jdGlvbihhLGMsYil7cmV0dXJuIGZhbHNlfSxub3RpZnlFbnRlcjpmdW5jdGlvbihhLGMsYil7cmV0dXJuIHRoaXMuZHJvcE5vdEFsbG93ZWR9LG5vdGlmeU92ZXI6ZnVuY3Rpb24oYSxjLGIpe3ZhciBkPXRoaXMuZ2V0VGFyZ2V0RnJvbUV2ZW50KGMpO2lmKCFkKXtpZih0aGlzLmxhc3RPdmVyTm9kZSl7dGhpcy5vbk5vZGVPdXQodGhpcy5sYXN0T3Zlck5vZGUsYSxjLGIpO3RoaXMubGFzdE92ZXJOb2RlPW51bGx9cmV0dXJuIHRoaXMub25Db250YWluZXJPdmVyKGEsYyxiKX1pZih0aGlzLmxhc3RPdmVyTm9kZSE9ZCl7aWYodGhpcy5sYXN0T3Zlck5vZGUpe3RoaXMub25Ob2RlT3V0KHRoaXMubGFzdE92ZXJOb2RlLGEsYyxiKX10aGlzLm9uTm9kZUVudGVyKGQsYSxjLGIpO3RoaXMubGFzdE92ZXJOb2RlPWR9cmV0dXJuIHRoaXMub25Ob2RlT3ZlcihkLGEsYyxiKX0sbm90aWZ5T3V0OmZ1bmN0aW9uKGEsYyxiKXtpZih0aGlzLmxhc3RPdmVyTm9kZSl7dGhpcy5vbk5vZGVPdXQodGhpcy5sYXN0T3Zlck5vZGUsYSxjLGIpO3RoaXMubGFzdE92ZXJOb2RlPW51bGx9fSxub3RpZnlEcm9wOmZ1bmN0aW9uKGEsYyxiKXtpZih0aGlzLmxhc3RPdmVyTm9kZSl7dGhpcy5vbk5vZGVPdXQodGhpcy5sYXN0T3Zlck5vZGUsYSxjLGIpO3RoaXMubGFzdE92ZXJOb2RlPW51bGx9dmFyIGQ9dGhpcy5nZXRUYXJnZXRGcm9tRXZlbnQoYyk7cmV0dXJuIGQ/dGhpcy5vbk5vZGVEcm9wKGQsYSxjLGIpOnRoaXMub25Db250YWluZXJEcm9wKGEsYyxiKX0sdHJpZ2dlckNhY2hlUmVmcmVzaDpmdW5jdGlvbigpe0V4dC5kZC5ERE0ucmVmcmVzaENhY2hlKHRoaXMuZ3JvdXBzKX19KTtFeHQuRWxlbWVudC5hZGRNZXRob2RzKHtpbml0REQ6ZnVuY3Rpb24oYyxiLGQpe3ZhciBhPW5ldyBFeHQuZGQuREQoRXh0LmlkKHRoaXMuZG9tKSxjLGIpO3JldHVybiBFeHQuYXBwbHkoYSxkKX0saW5pdEREUHJveHk6ZnVuY3Rpb24oYyxiLGQpe3ZhciBhPW5ldyBFeHQuZGQuRERQcm94eShFeHQuaWQodGhpcy5kb20pLGMsYik7cmV0dXJuIEV4dC5hcHBseShhLGQpfSxpbml0RERUYXJnZXQ6ZnVuY3Rpb24oYyxiLGQpe3ZhciBhPW5ldyBFeHQuZGQuRERUYXJnZXQoRXh0LmlkKHRoaXMuZG9tKSxjLGIpO3JldHVybiBFeHQuYXBwbHkoYSxkKX19KTtFeHQuZGF0YS5BcGk9KGZ1bmN0aW9uKCl7dmFyIGE9e307cmV0dXJue2FjdGlvbnM6e2NyZWF0ZToiY3JlYXRlIixyZWFkOiJyZWFkIix1cGRhdGU6InVwZGF0ZSIsZGVzdHJveToiZGVzdHJveSJ9LHJlc3RBY3Rpb25zOntjcmVhdGU6IlBPU1QiLHJlYWQ6IkdFVCIsdXBkYXRlOiJQVVQiLGRlc3Ryb3k6IkRFTEVURSJ9LGlzQWN0aW9uOmZ1bmN0aW9uKGIpe3JldHVybihFeHQuZGF0YS5BcGkuYWN0aW9uc1tiXSk/dHJ1ZTpmYWxzZX0sZ2V0VmVyYjpmdW5jdGlvbihiKXtpZihhW2JdKXtyZXR1cm4gYVtiXX1mb3IodmFyIGMgaW4gdGhpcy5hY3Rpb25zKXtpZih0aGlzLmFjdGlvbnNbY109PT1iKXthW2JdPWM7YnJlYWt9fXJldHVybihhW2JdIT09dW5kZWZpbmVkKT9hW2JdOm51bGx9LGlzVmFsaWQ6ZnVuY3Rpb24oYil7dmFyIGU9W107dmFyIGQ9dGhpcy5hY3Rpb25zO2Zvcih2YXIgYyBpbiBiKXtpZighKGMgaW4gZCkpe2UucHVzaChjKX19cmV0dXJuKCFlLmxlbmd0aCk/dHJ1ZTplfSxoYXNVbmlxdWVVcmw6ZnVuY3Rpb24oYyxnKXt2YXIgYj0oYy5hcGlbZ10pP2MuYXBpW2ddLnVybDpudWxsO3ZhciBlPXRydWU7Zm9yKHZhciBkIGluIGMuYXBpKXtpZigoZT0oZD09PWcpP3RydWU6KGMuYXBpW2RdLnVybCE9Yik/dHJ1ZTpmYWxzZSk9PT1mYWxzZSl7YnJlYWt9fXJldHVybiBlfSxwcmVwYXJlOmZ1bmN0aW9uKGIpe2lmKCFiLmFwaSl7Yi5hcGk9e319Zm9yKHZhciBkIGluIHRoaXMuYWN0aW9ucyl7dmFyIGM9dGhpcy5hY3Rpb25zW2RdO2IuYXBpW2NdPWIuYXBpW2NdfHxiLnVybHx8Yi5kaXJlY3RGbjtpZih0eXBlb2YoYi5hcGlbY10pPT0ic3RyaW5nIil7Yi5hcGlbY109e3VybDpiLmFwaVtjXSxtZXRob2Q6KGIucmVzdGZ1bD09PXRydWUpP0V4dC5kYXRhLkFwaS5yZXN0QWN0aW9uc1tjXTp1bmRlZmluZWR9fX19LHJlc3RpZnk6ZnVuY3Rpb24oYil7Yi5yZXN0ZnVsPXRydWU7Zm9yKHZhciBjIGluIHRoaXMucmVzdEFjdGlvbnMpe2IuYXBpW3RoaXMuYWN0aW9uc1tjXV0ubWV0aG9kfHwoYi5hcGlbdGhpcy5hY3Rpb25zW2NdXS5tZXRob2Q9dGhpcy5yZXN0QWN0aW9uc1tjXSl9Yi5vbldyaXRlPWIub25Xcml0ZS5jcmVhdGVJbnRlcmNlcHRvcihmdW5jdGlvbihpLGosZyxlKXt2YXIgZD1qLnJlYWRlcjt2YXIgaD1uZXcgRXh0LmRhdGEuUmVzcG9uc2Uoe2FjdGlvbjppLHJhdzpnfSk7c3dpdGNoKGcuc3RhdHVzKXtjYXNlIDIwMDpyZXR1cm4gdHJ1ZTticmVhaztjYXNlIDIwMTppZihFeHQuaXNFbXB0eShoLnJhdy5yZXNwb25zZVRleHQpKXtoLnN1Y2Nlc3M9dHJ1ZX1lbHNle3JldHVybiB0cnVlfWJyZWFrO2Nhc2UgMjA0Omguc3VjY2Vzcz10cnVlO2guZGF0YT1udWxsO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHRydWU7YnJlYWt9aWYoaC5zdWNjZXNzPT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoIndyaXRlIix0aGlzLGksaC5kYXRhLGgsZSxqLnJlcXVlc3QuYXJnKX1lbHNle3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlbW90ZSIsaSxqLGgsZSl9ai5yZXF1ZXN0LmNhbGxiYWNrLmNhbGwoai5yZXF1ZXN0LnNjb3BlLGguZGF0YSxoLGguc3VjY2Vzcyk7cmV0dXJuIGZhbHNlfSxiKX19fSkoKTtFeHQuZGF0YS5SZXNwb25zZT1mdW5jdGlvbihiLGEpe0V4dC5hcHBseSh0aGlzLGIse3JhdzphfSl9O0V4dC5kYXRhLlJlc3BvbnNlLnByb3RvdHlwZT17bWVzc2FnZTpudWxsLHN1Y2Nlc3M6ZmFsc2Usc3RhdHVzOm51bGwscm9vdDpudWxsLHJhdzpudWxsLGdldE1lc3NhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZXNzYWdlfSxnZXRTdWNjZXNzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3VjY2Vzc30sZ2V0U3RhdHVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RhdHVzfSxnZXRSb290OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdH0sZ2V0UmF3UmVzcG9uc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYXd9fTtFeHQuZGF0YS5BcGkuRXJyb3I9RXh0LmV4dGVuZChFeHQuRXJyb3Ise2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dGhpcy5hcmc9YTtFeHQuRXJyb3IuY2FsbCh0aGlzLGIpfSxuYW1lOiJFeHQuZGF0YS5BcGkifSk7RXh0LmFwcGx5KEV4dC5kYXRhLkFwaS5FcnJvci5wcm90b3R5cGUse2xhbmc6eyJhY3Rpb24tdXJsLXVuZGVmaW5lZCI6Ik5vIGZhbGxiYWNrIHVybCBkZWZpbmVkIGZvciB0aGlzIGFjdGlvbi4gIFdoZW4gZGVmaW5pbmcgYSBEYXRhUHJveHkgYXBpLCBwbGVhc2UgYmUgc3VyZSB0byBkZWZpbmUgYW4gdXJsIGZvciBlYWNoIENSVUQgYWN0aW9uIGluIEV4dC5kYXRhLkFwaS5hY3Rpb25zIG9yIGRlZmluZSBhIGRlZmF1bHQgdXJsIGluIGFkZGl0aW9uIHRvIHlvdXIgYXBpLWNvbmZpZ3VyYXRpb24uIixpbnZhbGlkOiJyZWNlaXZlZCBhbiBpbnZhbGlkIEFQSS1jb25maWd1cmF0aW9uLiAgUGxlYXNlIGVuc3VyZSB5b3VyIHByb3h5IEFQSS1jb25maWd1cmF0aW9uIGNvbnRhaW5zIG9ubHkgdGhlIGFjdGlvbnMgZGVmaW5lZCBpbiBFeHQuZGF0YS5BcGkuYWN0aW9ucyIsImludmFsaWQtdXJsIjoiSW52YWxpZCB1cmwuICBQbGVhc2UgcmV2aWV3IHlvdXIgcHJveHkgY29uZmlndXJhdGlvbi4iLGV4ZWN1dGU6J0F0dGVtcHRlZCB0byBleGVjdXRlIGFuIHVua25vd24gYWN0aW9uLiAgVmFsaWQgQVBJIGFjdGlvbnMgYXJlIGRlZmluZWQgaW4gRXh0LmRhdGEuQXBpLmFjdGlvbnMiJ319KTtFeHQuZGF0YS5Tb3J0VHlwZXM9e25vbmU6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN0cmlwVGFnc1JFOi88XC8/W14+XSs+L2dpLGFzVGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gU3RyaW5nKGEpLnJlcGxhY2UodGhpcy5zdHJpcFRhZ3NSRSwiIil9LGFzVUNUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSkudG9VcHBlckNhc2UoKS5yZXBsYWNlKHRoaXMuc3RyaXBUYWdzUkUsIiIpfSxhc1VDU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYSkudG9VcHBlckNhc2UoKX0sYXNEYXRlOmZ1bmN0aW9uKGEpe2lmKCFhKXtyZXR1cm4gMH1pZihFeHQuaXNEYXRlKGEpKXtyZXR1cm4gYS5nZXRUaW1lKCl9cmV0dXJuIERhdGUucGFyc2UoU3RyaW5nKGEpKX0sYXNGbG9hdDpmdW5jdGlvbihhKXt2YXIgYj1wYXJzZUZsb2F0KFN0cmluZyhhKS5yZXBsYWNlKC8sL2csIiIpKTtyZXR1cm4gaXNOYU4oYik/MDpifSxhc0ludDpmdW5jdGlvbihhKXt2YXIgYj1wYXJzZUludChTdHJpbmcoYSkucmVwbGFjZSgvLC9nLCIiKSwxMCk7cmV0dXJuIGlzTmFOKGIpPzA6Yn19O0V4dC5kYXRhLlJlY29yZD1mdW5jdGlvbihhLGIpe3RoaXMuaWQ9KGJ8fGI9PT0wKT9iOkV4dC5kYXRhLlJlY29yZC5pZCh0aGlzKTt0aGlzLmRhdGE9YXx8e319O0V4dC5kYXRhLlJlY29yZC5jcmVhdGU9ZnVuY3Rpb24oZSl7dmFyIGM9RXh0LmV4dGVuZChFeHQuZGF0YS5SZWNvcmQse30pO3ZhciBkPWMucHJvdG90eXBlO2QuZmllbGRzPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oZmFsc2UsZnVuY3Rpb24oZyl7cmV0dXJuIGcubmFtZX0pO2Zvcih2YXIgYj0wLGE9ZS5sZW5ndGg7YjxhO2IrKyl7ZC5maWVsZHMuYWRkKG5ldyBFeHQuZGF0YS5GaWVsZChlW2JdKSl9Yy5nZXRGaWVsZD1mdW5jdGlvbihnKXtyZXR1cm4gZC5maWVsZHMuZ2V0KGcpfTtyZXR1cm4gY307RXh0LmRhdGEuUmVjb3JkLlBSRUZJWD0iZXh0LXJlY29yZCI7RXh0LmRhdGEuUmVjb3JkLkFVVE9fSUQ9MTtFeHQuZGF0YS5SZWNvcmQuRURJVD0iZWRpdCI7RXh0LmRhdGEuUmVjb3JkLlJFSkVDVD0icmVqZWN0IjtFeHQuZGF0YS5SZWNvcmQuQ09NTUlUPSJjb21taXQiO0V4dC5kYXRhLlJlY29yZC5pZD1mdW5jdGlvbihhKXthLnBoYW50b209dHJ1ZTtyZXR1cm5bRXh0LmRhdGEuUmVjb3JkLlBSRUZJWCwiLSIsRXh0LmRhdGEuUmVjb3JkLkFVVE9fSUQrK10uam9pbigiIil9O0V4dC5kYXRhLlJlY29yZC5wcm90b3R5cGU9e2RpcnR5OmZhbHNlLGVkaXRpbmc6ZmFsc2UsZXJyb3I6bnVsbCxtb2RpZmllZDpudWxsLHBoYW50b206ZmFsc2Usam9pbjpmdW5jdGlvbihhKXt0aGlzLnN0b3JlPWF9LHNldDpmdW5jdGlvbihhLGMpe3ZhciBiPUV4dC5pc1ByaW1pdGl2ZShjKT9TdHJpbmc6RXh0LmVuY29kZTtpZihiKHRoaXMuZGF0YVthXSk9PWIoYykpe3JldHVybn10aGlzLmRpcnR5PXRydWU7aWYoIXRoaXMubW9kaWZpZWQpe3RoaXMubW9kaWZpZWQ9e319aWYodGhpcy5tb2RpZmllZFthXT09PXVuZGVmaW5lZCl7dGhpcy5tb2RpZmllZFthXT10aGlzLmRhdGFbYV19dGhpcy5kYXRhW2FdPWM7aWYoIXRoaXMuZWRpdGluZyl7dGhpcy5hZnRlckVkaXQoKX19LGFmdGVyRWRpdDpmdW5jdGlvbigpe2lmKHRoaXMuc3RvcmUhPXVuZGVmaW5lZCYmdHlwZW9mIHRoaXMuc3RvcmUuYWZ0ZXJFZGl0PT0iZnVuY3Rpb24iKXt0aGlzLnN0b3JlLmFmdGVyRWRpdCh0aGlzKX19LGFmdGVyUmVqZWN0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdG9yZSl7dGhpcy5zdG9yZS5hZnRlclJlamVjdCh0aGlzKX19LGFmdGVyQ29tbWl0OmZ1bmN0aW9uKCl7aWYodGhpcy5zdG9yZSl7dGhpcy5zdG9yZS5hZnRlckNvbW1pdCh0aGlzKX19LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXRhW2FdfSxiZWdpbkVkaXQ6ZnVuY3Rpb24oKXt0aGlzLmVkaXRpbmc9dHJ1ZTt0aGlzLm1vZGlmaWVkPXRoaXMubW9kaWZpZWR8fHt9fSxjYW5jZWxFZGl0OmZ1bmN0aW9uKCl7dGhpcy5lZGl0aW5nPWZhbHNlO2RlbGV0ZSB0aGlzLm1vZGlmaWVkfSxlbmRFZGl0OmZ1bmN0aW9uKCl7dGhpcy5lZGl0aW5nPWZhbHNlO2lmKHRoaXMuZGlydHkpe3RoaXMuYWZ0ZXJFZGl0KCl9fSxyZWplY3Q6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5tb2RpZmllZDtmb3IodmFyIGMgaW4gYSl7aWYodHlwZW9mIGFbY10hPSJmdW5jdGlvbiIpe3RoaXMuZGF0YVtjXT1hW2NdfX10aGlzLmRpcnR5PWZhbHNlO2RlbGV0ZSB0aGlzLm1vZGlmaWVkO3RoaXMuZWRpdGluZz1mYWxzZTtpZihiIT09dHJ1ZSl7dGhpcy5hZnRlclJlamVjdCgpfX0sY29tbWl0OmZ1bmN0aW9uKGEpe3RoaXMuZGlydHk9ZmFsc2U7ZGVsZXRlIHRoaXMubW9kaWZpZWQ7dGhpcy5lZGl0aW5nPWZhbHNlO2lmKGEhPT10cnVlKXt0aGlzLmFmdGVyQ29tbWl0KCl9fSxnZXRDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tb2RpZmllZCxiPXt9O2Zvcih2YXIgYyBpbiBhKXtpZihhLmhhc093blByb3BlcnR5KGMpKXtiW2NdPXRoaXMuZGF0YVtjXX19cmV0dXJuIGJ9LGhhc0Vycm9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXJyb3IhPT1udWxsfSxjbGVhckVycm9yOmZ1bmN0aW9uKCl7dGhpcy5lcnJvcj1udWxsfSxjb3B5OmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3RvcihFeHQuYXBwbHkoe30sdGhpcy5kYXRhKSxhfHx0aGlzLmlkKX0saXNNb2RpZmllZDpmdW5jdGlvbihhKXtyZXR1cm4gISEodGhpcy5tb2RpZmllZCYmdGhpcy5tb2RpZmllZC5oYXNPd25Qcm9wZXJ0eShhKSl9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWVsZHMuZmluZChmdW5jdGlvbihhKXtyZXR1cm4oYS5hbGxvd0JsYW5rPT09ZmFsc2UmJkV4dC5pc0VtcHR5KHRoaXMuZGF0YVthLm5hbWVdKSk/dHJ1ZTpmYWxzZX0sdGhpcyk/ZmFsc2U6dHJ1ZX0sbWFya0RpcnR5OmZ1bmN0aW9uKCl7dGhpcy5kaXJ0eT10cnVlO2lmKCF0aGlzLm1vZGlmaWVkKXt0aGlzLm1vZGlmaWVkPXt9fXRoaXMuZmllbGRzLmVhY2goZnVuY3Rpb24oYSl7dGhpcy5tb2RpZmllZFthLm5hbWVdPXRoaXMuZGF0YVthLm5hbWVdfSx0aGlzKX19O0V4dC5TdG9yZU1ncj1FeHQuYXBwbHkobmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpLHtyZWdpc3RlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7KGI9YXJndW1lbnRzW2FdKTthKyspe3RoaXMuYWRkKGIpfX0sdW5yZWdpc3RlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT0wLGI7KGI9YXJndW1lbnRzW2FdKTthKyspe3RoaXMucmVtb3ZlKHRoaXMubG9va3VwKGIpKX19LGxvb2t1cDpmdW5jdGlvbihlKXtpZihFeHQuaXNBcnJheShlKSl7dmFyIGI9WyJmaWVsZDEiXSxkPSFFeHQuaXNBcnJheShlWzBdKTtpZighZCl7Zm9yKHZhciBjPTIsYT1lWzBdLmxlbmd0aDtjPD1hOysrYyl7Yi5wdXNoKCJmaWVsZCIrYyl9fXJldHVybiBuZXcgRXh0LmRhdGEuQXJyYXlTdG9yZSh7ZmllbGRzOmIsZGF0YTplLGV4cGFuZERhdGE6ZCxhdXRvRGVzdHJveTp0cnVlLGF1dG9DcmVhdGVkOnRydWV9KX1yZXR1cm4gRXh0LmlzT2JqZWN0KGUpPyhlLmV2ZW50cz9lOkV4dC5jcmVhdGUoZSwic3RvcmUiKSk6dGhpcy5nZXQoZSl9LGdldEtleTpmdW5jdGlvbihhKXtyZXR1cm4gYS5zdG9yZUlkfX0pO0V4dC5kYXRhLlN0b3JlPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7d3JpdGVyOnVuZGVmaW5lZCxyZW1vdGVTb3J0OmZhbHNlLGF1dG9EZXN0cm95OmZhbHNlLHBydW5lTW9kaWZpZWRSZWNvcmRzOmZhbHNlLGxhc3RPcHRpb25zOm51bGwsYXV0b1NhdmU6dHJ1ZSxiYXRjaDp0cnVlLHJlc3RmdWw6ZmFsc2UscGFyYW1OYW1lczp1bmRlZmluZWQsZGVmYXVsdFBhcmFtTmFtZXM6e3N0YXJ0OiJzdGFydCIsbGltaXQ6ImxpbWl0Iixzb3J0OiJzb3J0IixkaXI6ImRpciJ9LGlzRGVzdHJveWVkOmZhbHNlLGhhc011bHRpU29ydDpmYWxzZSxiYXRjaEtleToiX2V4dF9iYXRjaF8iLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3RoaXMuZGF0YT1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKGZhbHNlKTt0aGlzLmRhdGEuZ2V0S2V5PWZ1bmN0aW9uKGIpe3JldHVybiBiLmlkfTt0aGlzLnJlbW92ZWQ9W107aWYoYSYmYS5kYXRhKXt0aGlzLmlubGluZURhdGE9YS5kYXRhO2RlbGV0ZSBhLmRhdGF9RXh0LmFwcGx5KHRoaXMsYSk7dGhpcy5iYXNlUGFyYW1zPUV4dC5pc09iamVjdCh0aGlzLmJhc2VQYXJhbXMpP3RoaXMuYmFzZVBhcmFtczp7fTt0aGlzLnBhcmFtTmFtZXM9RXh0LmFwcGx5SWYodGhpcy5wYXJhbU5hbWVzfHx7fSx0aGlzLmRlZmF1bHRQYXJhbU5hbWVzKTtpZigodGhpcy51cmx8fHRoaXMuYXBpKSYmIXRoaXMucHJveHkpe3RoaXMucHJveHk9bmV3IEV4dC5kYXRhLkh0dHBQcm94eSh7dXJsOnRoaXMudXJsLGFwaTp0aGlzLmFwaX0pfWlmKHRoaXMucmVzdGZ1bD09PXRydWUmJnRoaXMucHJveHkpe3RoaXMuYmF0Y2g9ZmFsc2U7RXh0LmRhdGEuQXBpLnJlc3RpZnkodGhpcy5wcm94eSl9aWYodGhpcy5yZWFkZXIpe2lmKCF0aGlzLnJlY29yZFR5cGUpe3RoaXMucmVjb3JkVHlwZT10aGlzLnJlYWRlci5yZWNvcmRUeXBlfWlmKHRoaXMucmVhZGVyLm9uTWV0YUNoYW5nZSl7dGhpcy5yZWFkZXIub25NZXRhQ2hhbmdlPXRoaXMucmVhZGVyLm9uTWV0YUNoYW5nZS5jcmVhdGVTZXF1ZW5jZSh0aGlzLm9uTWV0YUNoYW5nZSx0aGlzKX1pZih0aGlzLndyaXRlcil7aWYodGhpcy53cml0ZXIgaW5zdGFuY2VvZiAoRXh0LmRhdGEuRGF0YVdyaXRlcik9PT1mYWxzZSl7dGhpcy53cml0ZXI9dGhpcy5idWlsZFdyaXRlcih0aGlzLndyaXRlcil9dGhpcy53cml0ZXIubWV0YT10aGlzLnJlYWRlci5tZXRhO3RoaXMucHJ1bmVNb2RpZmllZFJlY29yZHM9dHJ1ZX19aWYodGhpcy5yZWNvcmRUeXBlKXt0aGlzLmZpZWxkcz10aGlzLnJlY29yZFR5cGUucHJvdG90eXBlLmZpZWxkc310aGlzLm1vZGlmaWVkPVtdO3RoaXMuYWRkRXZlbnRzKCJkYXRhY2hhbmdlZCIsIm1ldGFjaGFuZ2UiLCJhZGQiLCJyZW1vdmUiLCJ1cGRhdGUiLCJjbGVhciIsImV4Y2VwdGlvbiIsImJlZm9yZWxvYWQiLCJsb2FkIiwibG9hZGV4Y2VwdGlvbiIsImJlZm9yZXdyaXRlIiwid3JpdGUiLCJiZWZvcmVzYXZlIiwic2F2ZSIpO2lmKHRoaXMucHJveHkpe3RoaXMucmVsYXlFdmVudHModGhpcy5wcm94eSxbImxvYWRleGNlcHRpb24iLCJleGNlcHRpb24iXSl9aWYodGhpcy53cml0ZXIpe3RoaXMub24oe3Njb3BlOnRoaXMsYWRkOnRoaXMuY3JlYXRlUmVjb3JkcyxyZW1vdmU6dGhpcy5kZXN0cm95UmVjb3JkLHVwZGF0ZTp0aGlzLnVwZGF0ZVJlY29yZCxjbGVhcjp0aGlzLm9uQ2xlYXJ9KX10aGlzLnNvcnRUb2dnbGU9e307aWYodGhpcy5zb3J0RmllbGQpe3RoaXMuc2V0RGVmYXVsdFNvcnQodGhpcy5zb3J0RmllbGQsdGhpcy5zb3J0RGlyKX1lbHNle2lmKHRoaXMuc29ydEluZm8pe3RoaXMuc2V0RGVmYXVsdFNvcnQodGhpcy5zb3J0SW5mby5maWVsZCx0aGlzLnNvcnRJbmZvLmRpcmVjdGlvbil9fUV4dC5kYXRhLlN0b3JlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTtpZih0aGlzLmlkKXt0aGlzLnN0b3JlSWQ9dGhpcy5pZDtkZWxldGUgdGhpcy5pZH1pZih0aGlzLnN0b3JlSWQpe0V4dC5TdG9yZU1nci5yZWdpc3Rlcih0aGlzKX1pZih0aGlzLmlubGluZURhdGEpe3RoaXMubG9hZERhdGEodGhpcy5pbmxpbmVEYXRhKTtkZWxldGUgdGhpcy5pbmxpbmVEYXRhfWVsc2V7aWYodGhpcy5hdXRvTG9hZCl7dGhpcy5sb2FkLmRlZmVyKDEwLHRoaXMsW3R5cGVvZiB0aGlzLmF1dG9Mb2FkPT0ib2JqZWN0Ij90aGlzLmF1dG9Mb2FkOnVuZGVmaW5lZF0pfX10aGlzLmJhdGNoQ291bnRlcj0wO3RoaXMuYmF0Y2hlcz17fX0sYnVpbGRXcml0ZXI6ZnVuY3Rpb24oYil7dmFyIGE9dW5kZWZpbmVkLGM9KGIuZm9ybWF0fHwianNvbiIpLnRvTG93ZXJDYXNlKCk7c3dpdGNoKGMpe2Nhc2UianNvbiI6YT1FeHQuZGF0YS5Kc29uV3JpdGVyO2JyZWFrO2Nhc2UieG1sIjphPUV4dC5kYXRhLlhtbFdyaXRlcjticmVhaztkZWZhdWx0OmE9RXh0LmRhdGEuSnNvbldyaXRlcn1yZXR1cm4gbmV3IGEoYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rlc3Ryb3llZCl7aWYodGhpcy5zdG9yZUlkKXtFeHQuU3RvcmVNZ3IudW5yZWdpc3Rlcih0aGlzKX10aGlzLmNsZWFyRGF0YSgpO3RoaXMuZGF0YT1udWxsO0V4dC5kZXN0cm95KHRoaXMucHJveHkpO3RoaXMucmVhZGVyPXRoaXMud3JpdGVyPW51bGw7dGhpcy5wdXJnZUxpc3RlbmVycygpO3RoaXMuaXNEZXN0cm95ZWQ9dHJ1ZX19LGFkZDpmdW5jdGlvbihjKXt2YXIgZSxhLGIsZDtjPVtdLmNvbmNhdChjKTtpZihjLmxlbmd0aDwxKXtyZXR1cm59Zm9yKGU9MCxhPWMubGVuZ3RoO2U8YTtlKyspe2I9Y1tlXTtiLmpvaW4odGhpcyk7aWYoYi5kaXJ0eXx8Yi5waGFudG9tKXt0aGlzLm1vZGlmaWVkLnB1c2goYil9fWQ9dGhpcy5kYXRhLmxlbmd0aDt0aGlzLmRhdGEuYWRkQWxsKGMpO2lmKHRoaXMuc25hcHNob3Qpe3RoaXMuc25hcHNob3QuYWRkQWxsKGMpfXRoaXMuZmlyZUV2ZW50KCJhZGQiLHRoaXMsYyxkKX0sYWRkU29ydGVkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZmluZEluc2VydEluZGV4KGEpO3RoaXMuaW5zZXJ0KGIsYSl9LGRvVXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuaWQ7dGhpcy5nZXRCeUlkKGIpLmpvaW4obnVsbCk7dGhpcy5kYXRhLnJlcGxhY2UoYixhKTtpZih0aGlzLnNuYXBzaG90KXt0aGlzLnNuYXBzaG90LnJlcGxhY2UoYixhKX1hLmpvaW4odGhpcyk7dGhpcy5maXJlRXZlbnQoInVwZGF0ZSIsdGhpcyxhLEV4dC5kYXRhLlJlY29yZC5DT01NSVQpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYoRXh0LmlzQXJyYXkoYSkpe0V4dC5lYWNoKGEsZnVuY3Rpb24oYyl7dGhpcy5yZW1vdmUoYyl9LHRoaXMpO3JldHVybn12YXIgYj10aGlzLmRhdGEuaW5kZXhPZihhKTtpZihiPi0xKXthLmpvaW4obnVsbCk7dGhpcy5kYXRhLnJlbW92ZUF0KGIpfWlmKHRoaXMucHJ1bmVNb2RpZmllZFJlY29yZHMpe3RoaXMubW9kaWZpZWQucmVtb3ZlKGEpfWlmKHRoaXMuc25hcHNob3Qpe3RoaXMuc25hcHNob3QucmVtb3ZlKGEpfWlmKGI+LTEpe3RoaXMuZmlyZUV2ZW50KCJyZW1vdmUiLHRoaXMsYSxiKX19LHJlbW92ZUF0OmZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlKHRoaXMuZ2V0QXQoYSkpfSxyZW1vdmVBbGw6ZnVuY3Rpb24oYil7dmFyIGE9W107dGhpcy5lYWNoKGZ1bmN0aW9uKGMpe2EucHVzaChjKX0pO3RoaXMuY2xlYXJEYXRhKCk7aWYodGhpcy5zbmFwc2hvdCl7dGhpcy5zbmFwc2hvdC5jbGVhcigpfWlmKHRoaXMucHJ1bmVNb2RpZmllZFJlY29yZHMpe3RoaXMubW9kaWZpZWQ9W119aWYoYiE9PXRydWUpe3RoaXMuZmlyZUV2ZW50KCJjbGVhciIsdGhpcyxhKX19LG9uQ2xlYXI6ZnVuY3Rpb24oYixhKXtFeHQuZWFjaChhLGZ1bmN0aW9uKGQsYyl7dGhpcy5kZXN0cm95UmVjb3JkKHRoaXMsZCxjKX0sdGhpcyl9LGluc2VydDpmdW5jdGlvbihkLGMpe3ZhciBlLGEsYjtjPVtdLmNvbmNhdChjKTtmb3IoZT0wLGE9Yy5sZW5ndGg7ZTxhO2UrKyl7Yj1jW2VdO3RoaXMuZGF0YS5pbnNlcnQoZCtlLGIpO2Iuam9pbih0aGlzKTtpZihiLmRpcnR5fHxiLnBoYW50b20pe3RoaXMubW9kaWZpZWQucHVzaChiKX19aWYodGhpcy5zbmFwc2hvdCl7dGhpcy5zbmFwc2hvdC5hZGRBbGwoYyl9dGhpcy5maXJlRXZlbnQoImFkZCIsdGhpcyxjLGQpfSxpbmRleE9mOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuaW5kZXhPZihhKX0saW5kZXhPZklkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuaW5kZXhPZktleShhKX0sZ2V0QnlJZDpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy5zbmFwc2hvdHx8dGhpcy5kYXRhKS5rZXkoYSl9LGdldEF0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdGEuaXRlbUF0KGEpfSxnZXRSYW5nZTpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLmRhdGEuZ2V0UmFuZ2UoYixhKX0sc3RvcmVPcHRpb25zOmZ1bmN0aW9uKGEpe2E9RXh0LmFwcGx5KHt9LGEpO2RlbGV0ZSBhLmNhbGxiYWNrO2RlbGV0ZSBhLnNjb3BlO3RoaXMubGFzdE9wdGlvbnM9YX0sY2xlYXJEYXRhOmZ1bmN0aW9uKCl7dGhpcy5kYXRhLmVhY2goZnVuY3Rpb24oYSl7YS5qb2luKG51bGwpfSk7dGhpcy5kYXRhLmNsZWFyKCl9LGxvYWQ6ZnVuY3Rpb24oYil7Yj1FeHQuYXBwbHkoe30sYik7dGhpcy5zdG9yZU9wdGlvbnMoYik7aWYodGhpcy5zb3J0SW5mbyYmdGhpcy5yZW1vdGVTb3J0KXt2YXIgYT10aGlzLnBhcmFtTmFtZXM7Yi5wYXJhbXM9RXh0LmFwcGx5KHt9LGIucGFyYW1zKTtiLnBhcmFtc1thLnNvcnRdPXRoaXMuc29ydEluZm8uZmllbGQ7Yi5wYXJhbXNbYS5kaXJdPXRoaXMuc29ydEluZm8uZGlyZWN0aW9ufXRyeXtyZXR1cm4gdGhpcy5leGVjdXRlKCJyZWFkIixudWxsLGIpfWNhdGNoKGMpe3RoaXMuaGFuZGxlRXhjZXB0aW9uKGMpO3JldHVybiBmYWxzZX19LHVwZGF0ZVJlY29yZDpmdW5jdGlvbihiLGEsYyl7aWYoYz09RXh0LmRhdGEuUmVjb3JkLkVESVQmJnRoaXMuYXV0b1NhdmU9PT10cnVlJiYoIWEucGhhbnRvbXx8KGEucGhhbnRvbSYmYS5pc1ZhbGlkKCkpKSl7dGhpcy5zYXZlKCl9fSxjcmVhdGVSZWNvcmRzOmZ1bmN0aW9uKGMsYixlKXt2YXIgZD10aGlzLm1vZGlmaWVkLGg9Yi5sZW5ndGgsYSxnO2ZvcihnPTA7ZzxoO2crKyl7YT1iW2ddO2lmKGEucGhhbnRvbSYmYS5pc1ZhbGlkKCkpe2EubWFya0RpcnR5KCk7aWYoZC5pbmRleE9mKGEpPT0tMSl7ZC5wdXNoKGEpfX19aWYodGhpcy5hdXRvU2F2ZT09PXRydWUpe3RoaXMuc2F2ZSgpfX0sZGVzdHJveVJlY29yZDpmdW5jdGlvbihiLGEsYyl7aWYodGhpcy5tb2RpZmllZC5pbmRleE9mKGEpIT0tMSl7dGhpcy5tb2RpZmllZC5yZW1vdmUoYSl9aWYoIWEucGhhbnRvbSl7dGhpcy5yZW1vdmVkLnB1c2goYSk7YS5sYXN0SW5kZXg9YztpZih0aGlzLmF1dG9TYXZlPT09dHJ1ZSl7dGhpcy5zYXZlKCl9fX0sZXhlY3V0ZTpmdW5jdGlvbihlLGEsYyxiKXtpZighRXh0LmRhdGEuQXBpLmlzQWN0aW9uKGUpKXt0aHJvdyBuZXcgRXh0LmRhdGEuQXBpLkVycm9yKCJleGVjdXRlIixlKX1jPUV4dC5hcHBseUlmKGN8fHt9LHtwYXJhbXM6e319KTtpZihiIT09dW5kZWZpbmVkKXt0aGlzLmFkZFRvQmF0Y2goYil9dmFyIGQ9dHJ1ZTtpZihlPT09InJlYWQiKXtkPXRoaXMuZmlyZUV2ZW50KCJiZWZvcmVsb2FkIix0aGlzLGMpO0V4dC5hcHBseUlmKGMucGFyYW1zLHRoaXMuYmFzZVBhcmFtcyl9ZWxzZXtpZih0aGlzLndyaXRlci5saXN0ZnVsPT09dHJ1ZSYmdGhpcy5yZXN0ZnVsIT09dHJ1ZSl7YT0oRXh0LmlzQXJyYXkoYSkpP2E6W2FdfWVsc2V7aWYoRXh0LmlzQXJyYXkoYSkmJmEubGVuZ3RoPT0xKXthPWEuc2hpZnQoKX19aWYoKGQ9dGhpcy5maXJlRXZlbnQoImJlZm9yZXdyaXRlIix0aGlzLGUsYSxjKSkhPT1mYWxzZSl7dGhpcy53cml0ZXIuYXBwbHkoYy5wYXJhbXMsdGhpcy5iYXNlUGFyYW1zLGUsYSl9fWlmKGQhPT1mYWxzZSl7aWYodGhpcy53cml0ZXImJnRoaXMucHJveHkudXJsJiYhdGhpcy5wcm94eS5yZXN0ZnVsJiYhRXh0LmRhdGEuQXBpLmhhc1VuaXF1ZVVybCh0aGlzLnByb3h5LGUpKXtjLnBhcmFtcy54YWN0aW9uPWV9dGhpcy5wcm94eS5yZXF1ZXN0KEV4dC5kYXRhLkFwaS5hY3Rpb25zW2VdLGEsYy5wYXJhbXMsdGhpcy5yZWFkZXIsdGhpcy5jcmVhdGVDYWxsYmFjayhlLGEsYiksdGhpcyxjKX1yZXR1cm4gZH0sc2F2ZTpmdW5jdGlvbigpe2lmKCF0aGlzLndyaXRlcil7dGhyb3cgbmV3IEV4dC5kYXRhLlN0b3JlLkVycm9yKCJ3cml0ZXItdW5kZWZpbmVkIil9dmFyIGg9W10saixrLGUsYz17fSxkO2lmKHRoaXMucmVtb3ZlZC5sZW5ndGgpe2gucHVzaChbImRlc3Ryb3kiLHRoaXMucmVtb3ZlZF0pfXZhciBiPVtdLmNvbmNhdCh0aGlzLmdldE1vZGlmaWVkUmVjb3JkcygpKTtpZihiLmxlbmd0aCl7dmFyIGc9W107Zm9yKGQ9Yi5sZW5ndGgtMTtkPj0wO2QtLSl7aWYoYltkXS5waGFudG9tPT09dHJ1ZSl7dmFyIGE9Yi5zcGxpY2UoZCwxKS5zaGlmdCgpO2lmKGEuaXNWYWxpZCgpKXtnLnB1c2goYSl9fWVsc2V7aWYoIWJbZF0uaXNWYWxpZCgpKXtiLnNwbGljZShkLDEpfX19aWYoZy5sZW5ndGgpe2gucHVzaChbImNyZWF0ZSIsZ10pfWlmKGIubGVuZ3RoKXtoLnB1c2goWyJ1cGRhdGUiLGJdKX19aj1oLmxlbmd0aDtpZihqKXtlPSsrdGhpcy5iYXRjaENvdW50ZXI7Zm9yKGQ9MDtkPGo7KytkKXtrPWhbZF07Y1trWzBdXT1rWzFdfWlmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVzYXZlIix0aGlzLGMpIT09ZmFsc2Upe2ZvcihkPTA7ZDxqOysrZCl7az1oW2RdO3RoaXMuZG9UcmFuc2FjdGlvbihrWzBdLGtbMV0sZSl9cmV0dXJuIGV9fXJldHVybiAtMX0sZG9UcmFuc2FjdGlvbjpmdW5jdGlvbihlLGIsYyl7ZnVuY3Rpb24gZyhoKXt0cnl7dGhpcy5leGVjdXRlKGUsaCx1bmRlZmluZWQsYyl9Y2F0Y2goaSl7dGhpcy5oYW5kbGVFeGNlcHRpb24oaSl9fWlmKHRoaXMuYmF0Y2g9PT1mYWxzZSl7Zm9yKHZhciBkPTAsYT1iLmxlbmd0aDtkPGE7ZCsrKXtnLmNhbGwodGhpcyxiW2RdKX19ZWxzZXtnLmNhbGwodGhpcyxiKX19LGFkZFRvQmF0Y2g6ZnVuY3Rpb24oYyl7dmFyIGE9dGhpcy5iYXRjaGVzLGQ9dGhpcy5iYXRjaEtleStjLGU9YVtkXTtpZighZSl7YVtkXT1lPXtpZDpjLGNvdW50OjAsZGF0YTp7fX19KytlLmNvdW50fSxyZW1vdmVGcm9tQmF0Y2g6ZnVuY3Rpb24oZCxoLGcpe3ZhciBjPXRoaXMuYmF0Y2hlcyxlPXRoaXMuYmF0Y2hLZXkrZCxpPWNbZV0sYTtpZihpKXthPWkuZGF0YVtoXXx8W107aS5kYXRhW2hdPWEuY29uY2F0KGcpO2lmKGkuY291bnQ9PT0xKXtnPWkuZGF0YTtkZWxldGUgY1tlXTt0aGlzLmZpcmVFdmVudCgic2F2ZSIsdGhpcyxkLGcpfWVsc2V7LS1pLmNvdW50fX19LGNyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKGMsYSxiKXt2YXIgZD1FeHQuZGF0YS5BcGkuYWN0aW9ucztyZXR1cm4oYz09InJlYWQiKT90aGlzLmxvYWRSZWNvcmRzOmZ1bmN0aW9uKGcsZSxoKXt0aGlzWyJvbiIrRXh0LnV0aWwuRm9ybWF0LmNhcGl0YWxpemUoYykrIlJlY29yZHMiXShoLGEsW10uY29uY2F0KGcpKTtpZihoPT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoIndyaXRlIix0aGlzLGMsZyxlLGEpfXRoaXMucmVtb3ZlRnJvbUJhdGNoKGIsYyxnKX19LGNsZWFyTW9kaWZpZWQ6ZnVuY3Rpb24oYSl7aWYoRXh0LmlzQXJyYXkoYSkpe2Zvcih2YXIgYj1hLmxlbmd0aC0xO2I+PTA7Yi0tKXt0aGlzLm1vZGlmaWVkLnNwbGljZSh0aGlzLm1vZGlmaWVkLmluZGV4T2YoYVtiXSksMSl9fWVsc2V7dGhpcy5tb2RpZmllZC5zcGxpY2UodGhpcy5tb2RpZmllZC5pbmRleE9mKGEpLDEpfX0scmVNYXA6ZnVuY3Rpb24oYil7aWYoRXh0LmlzQXJyYXkoYikpe2Zvcih2YXIgZD0wLGE9Yi5sZW5ndGg7ZDxhO2QrKyl7dGhpcy5yZU1hcChiW2RdKX19ZWxzZXtkZWxldGUgdGhpcy5kYXRhLm1hcFtiLl9waGlkXTt0aGlzLmRhdGEubWFwW2IuaWRdPWI7dmFyIGM9dGhpcy5kYXRhLmtleXMuaW5kZXhPZihiLl9waGlkKTt0aGlzLmRhdGEua2V5cy5zcGxpY2UoYywxLGIuaWQpO2RlbGV0ZSBiLl9waGlkfX0sb25DcmVhdGVSZWNvcmRzOmZ1bmN0aW9uKGQsYSxiKXtpZihkPT09dHJ1ZSl7dHJ5e3RoaXMucmVhZGVyLnJlYWxpemUoYSxiKX1jYXRjaChjKXt0aGlzLmhhbmRsZUV4Y2VwdGlvbihjKTtpZihFeHQuaXNBcnJheShhKSl7dGhpcy5vbkNyZWF0ZVJlY29yZHMoZCxhLGIpfX19fSxvblVwZGF0ZVJlY29yZHM6ZnVuY3Rpb24oZCxhLGIpe2lmKGQ9PT10cnVlKXt0cnl7dGhpcy5yZWFkZXIudXBkYXRlKGEsYil9Y2F0Y2goYyl7dGhpcy5oYW5kbGVFeGNlcHRpb24oYyk7aWYoRXh0LmlzQXJyYXkoYSkpe3RoaXMub25VcGRhdGVSZWNvcmRzKGQsYSxiKX19fX0sb25EZXN0cm95UmVjb3JkczpmdW5jdGlvbihlLGIsZCl7Yj0oYiBpbnN0YW5jZW9mIEV4dC5kYXRhLlJlY29yZCk/W2JdOltdLmNvbmNhdChiKTtmb3IodmFyIGM9MCxhPWIubGVuZ3RoO2M8YTtjKyspe3RoaXMucmVtb3ZlZC5zcGxpY2UodGhpcy5yZW1vdmVkLmluZGV4T2YoYltjXSksMSl9aWYoZT09PWZhbHNlKXtmb3IoYz1iLmxlbmd0aC0xO2M+PTA7Yy0tKXt0aGlzLmluc2VydChiW2NdLmxhc3RJbmRleCxiW2NdKX19fSxoYW5kbGVFeGNlcHRpb246ZnVuY3Rpb24oYSl7RXh0LmhhbmRsZUVycm9yKGEpfSxyZWxvYWQ6ZnVuY3Rpb24oYSl7dGhpcy5sb2FkKEV4dC5hcHBseUlmKGF8fHt9LHRoaXMubGFzdE9wdGlvbnMpKX0sbG9hZFJlY29yZHM6ZnVuY3Rpb24oYixsLGgpe3ZhciBlLGc7aWYodGhpcy5pc0Rlc3Ryb3llZD09PXRydWUpe3JldHVybn1pZighYnx8aD09PWZhbHNlKXtpZihoIT09ZmFsc2Upe3RoaXMuZmlyZUV2ZW50KCJsb2FkIix0aGlzLFtdLGwpfWlmKGwuY2FsbGJhY2spe2wuY2FsbGJhY2suY2FsbChsLnNjb3BlfHx0aGlzLFtdLGwsZmFsc2UsYil9cmV0dXJufXZhciBhPWIucmVjb3JkcyxqPWIudG90YWxSZWNvcmRzfHxhLmxlbmd0aDtpZighbHx8bC5hZGQhPT10cnVlKXtpZih0aGlzLnBydW5lTW9kaWZpZWRSZWNvcmRzKXt0aGlzLm1vZGlmaWVkPVtdfWZvcihlPTAsZz1hLmxlbmd0aDtlPGc7ZSsrKXthW2VdLmpvaW4odGhpcyl9aWYodGhpcy5zbmFwc2hvdCl7dGhpcy5kYXRhPXRoaXMuc25hcHNob3Q7ZGVsZXRlIHRoaXMuc25hcHNob3R9dGhpcy5jbGVhckRhdGEoKTt0aGlzLmRhdGEuYWRkQWxsKGEpO3RoaXMudG90YWxMZW5ndGg9ajt0aGlzLmFwcGx5U29ydCgpO3RoaXMuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsdGhpcyl9ZWxzZXt2YXIgaz1bXSxkLGM9MDtmb3IoZT0wLGc9YS5sZW5ndGg7ZTxnOysrZSl7ZD1hW2VdO2lmKHRoaXMuaW5kZXhPZklkKGQuaWQpPi0xKXt0aGlzLmRvVXBkYXRlKGQpfWVsc2V7ay5wdXNoKGQpOysrY319dGhpcy50b3RhbExlbmd0aD1NYXRoLm1heChqLHRoaXMuZGF0YS5sZW5ndGgrYyk7dGhpcy5hZGQoayl9dGhpcy5maXJlRXZlbnQoImxvYWQiLHRoaXMsYSxsKTtpZihsLmNhbGxiYWNrKXtsLmNhbGxiYWNrLmNhbGwobC5zY29wZXx8dGhpcyxhLGwsdHJ1ZSl9fSxsb2FkRGF0YTpmdW5jdGlvbihjLGEpe3ZhciBiPXRoaXMucmVhZGVyLnJlYWRSZWNvcmRzKGMpO3RoaXMubG9hZFJlY29yZHMoYix7YWRkOmF9LHRydWUpfSxnZXRDb3VudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEubGVuZ3RofHwwfSxnZXRUb3RhbENvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG90YWxMZW5ndGh8fDB9LGdldFNvcnRTdGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNvcnRJbmZvfSxhcHBseVNvcnQ6ZnVuY3Rpb24oKXtpZigodGhpcy5zb3J0SW5mb3x8dGhpcy5tdWx0aVNvcnRJbmZvKSYmIXRoaXMucmVtb3RlU29ydCl7dGhpcy5zb3J0RGF0YSgpfX0sc29ydERhdGE6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmhhc011bHRpU29ydD90aGlzLm11bHRpU29ydEluZm86dGhpcy5zb3J0SW5mbyxrPWEuZGlyZWN0aW9ufHwiQVNDIixoPWEuc29ydGVycyxjPVtdO2lmKCF0aGlzLmhhc011bHRpU29ydCl7aD1be2RpcmVjdGlvbjprLGZpZWxkOmEuZmllbGR9XX1mb3IodmFyIGQ9MCxiPWgubGVuZ3RoO2Q8YjtkKyspe2MucHVzaCh0aGlzLmNyZWF0ZVNvcnRGdW5jdGlvbihoW2RdLmZpZWxkLGhbZF0uZGlyZWN0aW9uKSl9aWYoYy5sZW5ndGg9PTApe3JldHVybn12YXIgZz1rLnRvVXBwZXJDYXNlKCk9PSJERVNDIj8tMToxO3ZhciBlPWZ1bmN0aW9uKG4sbSl7dmFyIGw9Y1swXS5jYWxsKHRoaXMsbixtKTtpZihjLmxlbmd0aD4xKXtmb3IodmFyIHA9MSxvPWMubGVuZ3RoO3A8bztwKyspe2w9bHx8Y1twXS5jYWxsKHRoaXMsbixtKX19cmV0dXJuIGcqbH07dGhpcy5kYXRhLnNvcnQoayxlKTtpZih0aGlzLnNuYXBzaG90JiZ0aGlzLnNuYXBzaG90IT10aGlzLmRhdGEpe3RoaXMuc25hcHNob3Quc29ydChrLGUpfX0sY3JlYXRlU29ydEZ1bmN0aW9uOmZ1bmN0aW9uKGMsYil7Yj1ifHwiQVNDIjt2YXIgYT1iLnRvVXBwZXJDYXNlKCk9PSJERVNDIj8tMToxO3ZhciBkPXRoaXMuZmllbGRzLmdldChjKS5zb3J0VHlwZTtyZXR1cm4gZnVuY3Rpb24oZyxlKXt2YXIgaT1kKGcuZGF0YVtjXSksaD1kKGUuZGF0YVtjXSk7cmV0dXJuIGEqKGk+aD8xOihpPGg/LTE6MCkpfX0sc2V0RGVmYXVsdFNvcnQ6ZnVuY3Rpb24oYixhKXthPWE/YS50b1VwcGVyQ2FzZSgpOiJBU0MiO3RoaXMuc29ydEluZm89e2ZpZWxkOmIsZGlyZWN0aW9uOmF9O3RoaXMuc29ydFRvZ2dsZVtiXT1hfSxzb3J0OmZ1bmN0aW9uKGIsYSl7aWYoRXh0LmlzQXJyYXkoYXJndW1lbnRzWzBdKSl7cmV0dXJuIHRoaXMubXVsdGlTb3J0LmNhbGwodGhpcyxiLGEpfWVsc2V7cmV0dXJuIHRoaXMuc2luZ2xlU29ydChiLGEpfX0sc2luZ2xlU29ydDpmdW5jdGlvbihnLGMpe3ZhciBlPXRoaXMuZmllbGRzLmdldChnKTtpZighZSl7cmV0dXJuIGZhbHNlfXZhciBiPWUubmFtZSxhPXRoaXMuc29ydEluZm98fG51bGwsZD10aGlzLnNvcnRUb2dnbGU/dGhpcy5zb3J0VG9nZ2xlW2JdOm51bGw7aWYoIWMpe2lmKGEmJmEuZmllbGQ9PWIpe2M9KHRoaXMuc29ydFRvZ2dsZVtiXXx8IkFTQyIpLnRvZ2dsZSgiQVNDIiwiREVTQyIpfWVsc2V7Yz1lLnNvcnREaXJ9fXRoaXMuc29ydFRvZ2dsZVtiXT1jO3RoaXMuc29ydEluZm89e2ZpZWxkOmIsZGlyZWN0aW9uOmN9O3RoaXMuaGFzTXVsdGlTb3J0PWZhbHNlO2lmKHRoaXMucmVtb3RlU29ydCl7aWYoIXRoaXMubG9hZCh0aGlzLmxhc3RPcHRpb25zKSl7aWYoZCl7dGhpcy5zb3J0VG9nZ2xlW2JdPWR9aWYoYSl7dGhpcy5zb3J0SW5mbz1hfX19ZWxzZXt0aGlzLmFwcGx5U29ydCgpO3RoaXMuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsdGhpcyl9cmV0dXJuIHRydWV9LG11bHRpU29ydDpmdW5jdGlvbihiLGEpe3RoaXMuaGFzTXVsdGlTb3J0PXRydWU7YT1hfHwiQVNDIjtpZih0aGlzLm11bHRpU29ydEluZm8mJmE9PXRoaXMubXVsdGlTb3J0SW5mby5kaXJlY3Rpb24pe2E9YS50b2dnbGUoIkFTQyIsIkRFU0MiKX10aGlzLm11bHRpU29ydEluZm89e3NvcnRlcnM6YixkaXJlY3Rpb246YX07aWYodGhpcy5yZW1vdGVTb3J0KXt0aGlzLnNpbmdsZVNvcnQoYlswXS5maWVsZCxiWzBdLmRpcmVjdGlvbil9ZWxzZXt0aGlzLmFwcGx5U29ydCgpO3RoaXMuZmlyZUV2ZW50KCJkYXRhY2hhbmdlZCIsdGhpcyl9fSxlYWNoOmZ1bmN0aW9uKGIsYSl7dGhpcy5kYXRhLmVhY2goYixhKX0sZ2V0TW9kaWZpZWRSZWNvcmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubW9kaWZpZWR9LHN1bTpmdW5jdGlvbihlLGcsYSl7dmFyIGM9dGhpcy5kYXRhLml0ZW1zLGI9MDtnPWd8fDA7YT0oYXx8YT09PTApP2E6Yy5sZW5ndGgtMTtmb3IodmFyIGQ9ZztkPD1hO2QrKyl7Yis9KGNbZF0uZGF0YVtlXXx8MCl9cmV0dXJuIGJ9LGNyZWF0ZUZpbHRlckZuOmZ1bmN0aW9uKGQsYyxlLGEsYil7aWYoRXh0LmlzRW1wdHkoYyxmYWxzZSkpe3JldHVybiBmYWxzZX1jPXRoaXMuZGF0YS5jcmVhdGVWYWx1ZU1hdGNoZXIoYyxlLGEsYik7cmV0dXJuIGZ1bmN0aW9uKGcpe3JldHVybiBjLnRlc3QoZy5kYXRhW2RdKX19LGNyZWF0ZU11bHRpcGxlRmlsdGVyRm46ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBrPXRydWU7Zm9yKHZhciBkPTAsYz1hLmxlbmd0aDtkPGM7ZCsrKXt2YXIgaD1hW2RdLGc9aC5mbixlPWguc2NvcGU7az1rJiZnLmNhbGwoZSxiKX1yZXR1cm4ga319LGZpbHRlcjpmdW5jdGlvbihuLG0saCxrLGUpe3ZhciBsO2lmKEV4dC5pc09iamVjdChuKSl7bj1bbl19aWYoRXh0LmlzQXJyYXkobikpe3ZhciBiPVtdO2Zvcih2YXIgZz0wLGQ9bi5sZW5ndGg7ZzxkO2crKyl7dmFyIGE9bltnXSxjPWEuZm4sbz1hLnNjb3BlfHx0aGlzO2lmKCFFeHQuaXNGdW5jdGlvbihjKSl7Yz10aGlzLmNyZWF0ZUZpbHRlckZuKGEucHJvcGVydHksYS52YWx1ZSxhLmFueU1hdGNoLGEuY2FzZVNlbnNpdGl2ZSxhLmV4YWN0TWF0Y2gpfWIucHVzaCh7Zm46YyxzY29wZTpvfSl9bD10aGlzLmNyZWF0ZU11bHRpcGxlRmlsdGVyRm4oYil9ZWxzZXtsPXRoaXMuY3JlYXRlRmlsdGVyRm4obixtLGgsayxlKX1yZXR1cm4gbD90aGlzLmZpbHRlckJ5KGwpOnRoaXMuY2xlYXJGaWx0ZXIoKX0sZmlsdGVyQnk6ZnVuY3Rpb24oYixhKXt0aGlzLnNuYXBzaG90PXRoaXMuc25hcHNob3R8fHRoaXMuZGF0YTt0aGlzLmRhdGE9dGhpcy5xdWVyeUJ5KGIsYXx8dGhpcyk7dGhpcy5maXJlRXZlbnQoImRhdGFjaGFuZ2VkIix0aGlzKX0sY2xlYXJGaWx0ZXI6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0ZpbHRlcmVkKCkpe3RoaXMuZGF0YT10aGlzLnNuYXBzaG90O2RlbGV0ZSB0aGlzLnNuYXBzaG90O2lmKGEhPT10cnVlKXt0aGlzLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLHRoaXMpfX19LGlzRmlsdGVyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLnNuYXBzaG90JiZ0aGlzLnNuYXBzaG90IT10aGlzLmRhdGF9LHF1ZXJ5OmZ1bmN0aW9uKGQsYyxlLGEpe3ZhciBiPXRoaXMuY3JlYXRlRmlsdGVyRm4oZCxjLGUsYSk7cmV0dXJuIGI/dGhpcy5xdWVyeUJ5KGIpOnRoaXMuZGF0YS5jbG9uZSgpfSxxdWVyeUJ5OmZ1bmN0aW9uKGIsYSl7dmFyIGM9dGhpcy5zbmFwc2hvdHx8dGhpcy5kYXRhO3JldHVybiBjLmZpbHRlckJ5KGIsYXx8dGhpcyl9LGZpbmQ6ZnVuY3Rpb24oZCxjLGcsZSxhKXt2YXIgYj10aGlzLmNyZWF0ZUZpbHRlckZuKGQsYyxlLGEpO3JldHVybiBiP3RoaXMuZGF0YS5maW5kSW5kZXhCeShiLG51bGwsZyk6LTF9LGZpbmRFeGFjdDpmdW5jdGlvbihiLGEsYyl7cmV0dXJuIHRoaXMuZGF0YS5maW5kSW5kZXhCeShmdW5jdGlvbihkKXtyZXR1cm4gZC5nZXQoYik9PT1hfSx0aGlzLGMpfSxmaW5kQnk6ZnVuY3Rpb24oYixhLGMpe3JldHVybiB0aGlzLmRhdGEuZmluZEluZGV4QnkoYixhLGMpfSxjb2xsZWN0OmZ1bmN0aW9uKGosayxiKXt2YXIgaD0oYj09PXRydWUmJnRoaXMuc25hcHNob3QpP3RoaXMuc25hcHNob3QuaXRlbXM6dGhpcy5kYXRhLml0ZW1zO3ZhciBtLG4sYT1bXSxjPXt9O2Zvcih2YXIgZT0wLGc9aC5sZW5ndGg7ZTxnO2UrKyl7bT1oW2VdLmRhdGFbal07bj1TdHJpbmcobSk7aWYoKGt8fCFFeHQuaXNFbXB0eShtKSkmJiFjW25dKXtjW25dPXRydWU7YVthLmxlbmd0aF09bX19cmV0dXJuIGF9LGFmdGVyRWRpdDpmdW5jdGlvbihhKXtpZih0aGlzLm1vZGlmaWVkLmluZGV4T2YoYSk9PS0xKXt0aGlzLm1vZGlmaWVkLnB1c2goYSl9dGhpcy5maXJlRXZlbnQoInVwZGF0ZSIsdGhpcyxhLEV4dC5kYXRhLlJlY29yZC5FRElUKX0sYWZ0ZXJSZWplY3Q6ZnVuY3Rpb24oYSl7dGhpcy5tb2RpZmllZC5yZW1vdmUoYSk7dGhpcy5maXJlRXZlbnQoInVwZGF0ZSIsdGhpcyxhLEV4dC5kYXRhLlJlY29yZC5SRUpFQ1QpfSxhZnRlckNvbW1pdDpmdW5jdGlvbihhKXt0aGlzLm1vZGlmaWVkLnJlbW92ZShhKTt0aGlzLmZpcmVFdmVudCgidXBkYXRlIix0aGlzLGEsRXh0LmRhdGEuUmVjb3JkLkNPTU1JVCl9LGNvbW1pdENoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1vZGlmaWVkLnNsaWNlKDApLGM9YS5sZW5ndGgsYjtmb3IoYj0wO2I8YztiKyspe2FbYl0uY29tbWl0KCl9dGhpcy5tb2RpZmllZD1bXTt0aGlzLnJlbW92ZWQ9W119LHJlamVjdENoYW5nZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1vZGlmaWVkLnNsaWNlKDApLGU9dGhpcy5yZW1vdmVkLnNsaWNlKDApLnJldmVyc2UoKSxjPWEubGVuZ3RoLGQ9ZS5sZW5ndGgsYjtmb3IoYj0wO2I8YztiKyspe2FbYl0ucmVqZWN0KCl9Zm9yKGI9MDtiPGQ7YisrKXt0aGlzLmluc2VydChlW2JdLmxhc3RJbmRleHx8MCxlW2JdKTtlW2JdLnJlamVjdCgpfXRoaXMubW9kaWZpZWQ9W107dGhpcy5yZW1vdmVkPVtdfSxvbk1ldGFDaGFuZ2U6ZnVuY3Rpb24oYSl7dGhpcy5yZWNvcmRUeXBlPXRoaXMucmVhZGVyLnJlY29yZFR5cGU7dGhpcy5maWVsZHM9dGhpcy5yZWNvcmRUeXBlLnByb3RvdHlwZS5maWVsZHM7ZGVsZXRlIHRoaXMuc25hcHNob3Q7aWYodGhpcy5yZWFkZXIubWV0YS5zb3J0SW5mbyl7dGhpcy5zb3J0SW5mbz10aGlzLnJlYWRlci5tZXRhLnNvcnRJbmZvfWVsc2V7aWYodGhpcy5zb3J0SW5mbyYmIXRoaXMuZmllbGRzLmdldCh0aGlzLnNvcnRJbmZvLmZpZWxkKSl7ZGVsZXRlIHRoaXMuc29ydEluZm99fWlmKHRoaXMud3JpdGVyKXt0aGlzLndyaXRlci5tZXRhPXRoaXMucmVhZGVyLm1ldGF9dGhpcy5tb2RpZmllZD1bXTt0aGlzLmZpcmVFdmVudCgibWV0YWNoYW5nZSIsdGhpcyx0aGlzLnJlYWRlci5tZXRhKX0sZmluZEluc2VydEluZGV4OmZ1bmN0aW9uKGEpe3RoaXMuc3VzcGVuZEV2ZW50cygpO3ZhciBjPXRoaXMuZGF0YS5jbG9uZSgpO3RoaXMuZGF0YS5hZGQoYSk7dGhpcy5hcHBseVNvcnQoKTt2YXIgYj10aGlzLmRhdGEuaW5kZXhPZihhKTt0aGlzLmRhdGE9Yzt0aGlzLnJlc3VtZUV2ZW50cygpO3JldHVybiBifSxzZXRCYXNlUGFyYW06ZnVuY3Rpb24oYSxiKXt0aGlzLmJhc2VQYXJhbXM9dGhpcy5iYXNlUGFyYW1zfHx7fTt0aGlzLmJhc2VQYXJhbXNbYV09Yn19KTtFeHQucmVnKCJzdG9yZSIsRXh0LmRhdGEuU3RvcmUpO0V4dC5kYXRhLlN0b3JlLkVycm9yPUV4dC5leHRlbmQoRXh0LkVycm9yLHtuYW1lOiJFeHQuZGF0YS5TdG9yZSJ9KTtFeHQuYXBwbHkoRXh0LmRhdGEuU3RvcmUuRXJyb3IucHJvdG90eXBlLHtsYW5nOnsid3JpdGVyLXVuZGVmaW5lZCI6IkF0dGVtcHRlZCB0byBleGVjdXRlIGEgd3JpdGUtYWN0aW9uIHdpdGhvdXQgYSBEYXRhV3JpdGVyIGluc3RhbGxlZC4ifX0pO0V4dC5kYXRhLkZpZWxkPUV4dC5leHRlbmQoT2JqZWN0LHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXtpZihFeHQuaXNTdHJpbmcoYikpe2I9e25hbWU6Yn19RXh0LmFwcGx5KHRoaXMsYik7dmFyIGQ9RXh0LmRhdGEuVHlwZXMsYT10aGlzLnNvcnRUeXBlLGM7aWYodGhpcy50eXBlKXtpZihFeHQuaXNTdHJpbmcodGhpcy50eXBlKSl7dGhpcy50eXBlPUV4dC5kYXRhLlR5cGVzW3RoaXMudHlwZS50b1VwcGVyQ2FzZSgpXXx8ZC5BVVRPfX1lbHNle3RoaXMudHlwZT1kLkFVVE99aWYoRXh0LmlzU3RyaW5nKGEpKXt0aGlzLnNvcnRUeXBlPUV4dC5kYXRhLlNvcnRUeXBlc1thXX1lbHNle2lmKEV4dC5pc0VtcHR5KGEpKXt0aGlzLnNvcnRUeXBlPXRoaXMudHlwZS5zb3J0VHlwZX19aWYoIXRoaXMuY29udmVydCl7dGhpcy5jb252ZXJ0PXRoaXMudHlwZS5jb252ZXJ0fX0sZGF0ZUZvcm1hdDpudWxsLHVzZU51bGw6ZmFsc2UsZGVmYXVsdFZhbHVlOiIiLG1hcHBpbmc6bnVsbCxzb3J0VHlwZTpudWxsLHNvcnREaXI6IkFTQyIsYWxsb3dCbGFuazp0cnVlfSk7RXh0LmRhdGEuRGF0YVJlYWRlcj1mdW5jdGlvbihhLGIpe3RoaXMubWV0YT1hO3RoaXMucmVjb3JkVHlwZT1FeHQuaXNBcnJheShiKT9FeHQuZGF0YS5SZWNvcmQuY3JlYXRlKGIpOmI7aWYodGhpcy5yZWNvcmRUeXBlKXt0aGlzLmJ1aWxkRXh0cmFjdG9ycygpfX07RXh0LmRhdGEuRGF0YVJlYWRlci5wcm90b3R5cGU9e2dldFRvdGFsOkV4dC5lbXB0eUZuLGdldFJvb3Q6RXh0LmVtcHR5Rm4sZ2V0TWVzc2FnZTpFeHQuZW1wdHlGbixnZXRTdWNjZXNzOkV4dC5lbXB0eUZuLGdldElkOkV4dC5lbXB0eUZuLGJ1aWxkRXh0cmFjdG9yczpFeHQuZW1wdHlGbixleHRyYWN0VmFsdWVzOkV4dC5lbXB0eUZuLHJlYWxpemU6ZnVuY3Rpb24oYSxjKXtpZihFeHQuaXNBcnJheShhKSl7Zm9yKHZhciBiPWEubGVuZ3RoLTE7Yj49MDtiLS0pe2lmKEV4dC5pc0FycmF5KGMpKXt0aGlzLnJlYWxpemUoYS5zcGxpY2UoYiwxKS5zaGlmdCgpLGMuc3BsaWNlKGIsMSkuc2hpZnQoKSl9ZWxzZXt0aGlzLnJlYWxpemUoYS5zcGxpY2UoYiwxKS5zaGlmdCgpLGMpfX19ZWxzZXtpZihFeHQuaXNBcnJheShjKSYmYy5sZW5ndGg9PTEpe2M9Yy5zaGlmdCgpfWlmKCF0aGlzLmlzRGF0YShjKSl7dGhyb3cgbmV3IEV4dC5kYXRhLkRhdGFSZWFkZXIuRXJyb3IoInJlYWxpemUiLGEpfWEucGhhbnRvbT1mYWxzZTthLl9waGlkPWEuaWQ7YS5pZD10aGlzLmdldElkKGMpO2EuZGF0YT1jO2EuY29tbWl0KCk7YS5zdG9yZS5yZU1hcChhKX19LHVwZGF0ZTpmdW5jdGlvbihhLGMpe2lmKEV4dC5pc0FycmF5KGEpKXtmb3IodmFyIGI9YS5sZW5ndGgtMTtiPj0wO2ItLSl7aWYoRXh0LmlzQXJyYXkoYykpe3RoaXMudXBkYXRlKGEuc3BsaWNlKGIsMSkuc2hpZnQoKSxjLnNwbGljZShiLDEpLnNoaWZ0KCkpfWVsc2V7dGhpcy51cGRhdGUoYS5zcGxpY2UoYiwxKS5zaGlmdCgpLGMpfX19ZWxzZXtpZihFeHQuaXNBcnJheShjKSYmYy5sZW5ndGg9PTEpe2M9Yy5zaGlmdCgpfWlmKHRoaXMuaXNEYXRhKGMpKXthLmRhdGE9RXh0LmFwcGx5KGEuZGF0YSxjKX1hLmNvbW1pdCgpfX0sZXh0cmFjdERhdGE6ZnVuY3Rpb24oayxhKXt2YXIgaj0odGhpcyBpbnN0YW5jZW9mIEV4dC5kYXRhLkpzb25SZWFkZXIpPyJqc29uIjoibm9kZSI7dmFyIGM9W107aWYodGhpcy5pc0RhdGEoaykmJiEodGhpcyBpbnN0YW5jZW9mIEV4dC5kYXRhLlhtbFJlYWRlcikpe2s9W2tdfXZhciBoPXRoaXMucmVjb3JkVHlwZS5wcm90b3R5cGUuZmllbGRzLG89aC5pdGVtcyxtPWgubGVuZ3RoLGM9W107aWYoYT09PXRydWUpe3ZhciBsPXRoaXMucmVjb3JkVHlwZTtmb3IodmFyIGU9MDtlPGsubGVuZ3RoO2UrKyl7dmFyIGI9a1tlXTt2YXIgZz1uZXcgbCh0aGlzLmV4dHJhY3RWYWx1ZXMoYixvLG0pLHRoaXMuZ2V0SWQoYikpO2dbal09YjtjLnB1c2goZyl9fWVsc2V7Zm9yKHZhciBlPTA7ZTxrLmxlbmd0aDtlKyspe3ZhciBkPXRoaXMuZXh0cmFjdFZhbHVlcyhrW2VdLG8sbSk7ZFt0aGlzLm1ldGEuaWRQcm9wZXJ0eV09dGhpcy5nZXRJZChrW2VdKTtjLnB1c2goZCl9fXJldHVybiBjfSxpc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuKGEmJkV4dC5pc09iamVjdChhKSYmIUV4dC5pc0VtcHR5KHRoaXMuZ2V0SWQoYSkpKT90cnVlOmZhbHNlfSxvbk1ldGFDaGFuZ2U6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuZWY7dGhpcy5tZXRhPWE7dGhpcy5yZWNvcmRUeXBlPUV4dC5kYXRhLlJlY29yZC5jcmVhdGUoYS5maWVsZHMpO3RoaXMuYnVpbGRFeHRyYWN0b3JzKCl9fTtFeHQuZGF0YS5EYXRhUmVhZGVyLkVycm9yPUV4dC5leHRlbmQoRXh0LkVycm9yLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihiLGEpe3RoaXMuYXJnPWE7RXh0LkVycm9yLmNhbGwodGhpcyxiKX0sbmFtZToiRXh0LmRhdGEuRGF0YVJlYWRlciJ9KTtFeHQuYXBwbHkoRXh0LmRhdGEuRGF0YVJlYWRlci5FcnJvci5wcm90b3R5cGUse2xhbmc6e3VwZGF0ZToiI3VwZGF0ZSByZWNlaXZlZCBpbnZhbGlkIGRhdGEgZnJvbSBzZXJ2ZXIuICBQbGVhc2Ugc2VlIGRvY3MgZm9yIERhdGFSZWFkZXIjdXBkYXRlIGFuZCByZXZpZXcgeW91ciBEYXRhUmVhZGVyIGNvbmZpZ3VyYXRpb24uIixyZWFsaXplOiIjcmVhbGl6ZSB3YXMgY2FsbGVkIHdpdGggaW52YWxpZCByZW1vdGUtZGF0YS4gIFBsZWFzZSBzZWUgdGhlIGRvY3MgZm9yIERhdGFSZWFkZXIjcmVhbGl6ZSBhbmQgcmV2aWV3IHlvdXIgRGF0YVJlYWRlciBjb25maWd1cmF0aW9uLiIsImludmFsaWQtcmVzcG9uc2UiOiIjcmVhZFJlc3BvbnNlIHJlY2VpdmVkIGFuIGludmFsaWQgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyLiJ9fSk7RXh0LmRhdGEuRGF0YVdyaXRlcj1mdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKX07RXh0LmRhdGEuRGF0YVdyaXRlci5wcm90b3R5cGU9e3dyaXRlQWxsRmllbGRzOmZhbHNlLGxpc3RmdWw6ZmFsc2UsYXBwbHk6ZnVuY3Rpb24oZSxnLGQsYSl7dmFyIGM9W10sYj1kKyJSZWNvcmQiO2lmKEV4dC5pc0FycmF5KGEpKXtFeHQuZWFjaChhLGZ1bmN0aW9uKGgpe2MucHVzaCh0aGlzW2JdKGgpKX0sdGhpcyl9ZWxzZXtpZihhIGluc3RhbmNlb2YgRXh0LmRhdGEuUmVjb3JkKXtjPXRoaXNbYl0oYSl9fXRoaXMucmVuZGVyKGUsZyxjKX0scmVuZGVyOkV4dC5lbXB0eUZuLHVwZGF0ZVJlY29yZDpFeHQuZW1wdHlGbixjcmVhdGVSZWNvcmQ6RXh0LmVtcHR5Rm4sZGVzdHJveVJlY29yZDpFeHQuZW1wdHlGbix0b0hhc2g6ZnVuY3Rpb24oZyxjKXt2YXIgZT1nLmZpZWxkcy5tYXAsZD17fSxiPSh0aGlzLndyaXRlQWxsRmllbGRzPT09ZmFsc2UmJmcucGhhbnRvbT09PWZhbHNlKT9nLmdldENoYW5nZXMoKTpnLmRhdGEsYTtFeHQuaXRlcmF0ZShiLGZ1bmN0aW9uKGksaCl7aWYoKGE9ZVtpXSkpe2RbYS5tYXBwaW5nP2EubWFwcGluZzphLm5hbWVdPWh9fSk7aWYoZy5waGFudG9tKXtpZihnLmZpZWxkcy5jb250YWluc0tleSh0aGlzLm1ldGEuaWRQcm9wZXJ0eSkmJkV4dC5pc0VtcHR5KGcuZGF0YVt0aGlzLm1ldGEuaWRQcm9wZXJ0eV0pKXtkZWxldGUgZFt0aGlzLm1ldGEuaWRQcm9wZXJ0eV19fWVsc2V7ZFt0aGlzLm1ldGEuaWRQcm9wZXJ0eV09Zy5pZH1yZXR1cm4gZH0sdG9BcnJheTpmdW5jdGlvbihiKXt2YXIgYT1bXTtFeHQuaXRlcmF0ZShiLGZ1bmN0aW9uKGQsYyl7YS5wdXNoKHtuYW1lOmQsdmFsdWU6Y30pfSx0aGlzKTtyZXR1cm4gYX19O0V4dC5kYXRhLkRhdGFQcm94eT1mdW5jdGlvbihhKXthPWF8fHt9O3RoaXMuYXBpPWEuYXBpO3RoaXMudXJsPWEudXJsO3RoaXMucmVzdGZ1bD1hLnJlc3RmdWw7dGhpcy5saXN0ZW5lcnM9YS5saXN0ZW5lcnM7dGhpcy5wcmV0dHlVcmxzPWEucHJldHR5VXJsczt0aGlzLmFkZEV2ZW50cygiZXhjZXB0aW9uIiwiYmVmb3JlbG9hZCIsImxvYWQiLCJsb2FkZXhjZXB0aW9uIiwiYmVmb3Jld3JpdGUiLCJ3cml0ZSIpO0V4dC5kYXRhLkRhdGFQcm94eS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7dHJ5e0V4dC5kYXRhLkFwaS5wcmVwYXJlKHRoaXMpfWNhdGNoKGIpe2lmKGIgaW5zdGFuY2VvZiBFeHQuZGF0YS5BcGkuRXJyb3Ipe2IudG9Db25zb2xlKCl9fUV4dC5kYXRhLkRhdGFQcm94eS5yZWxheUV2ZW50cyh0aGlzLFsiYmVmb3Jld3JpdGUiLCJ3cml0ZSIsImV4Y2VwdGlvbiJdKX07RXh0LmV4dGVuZChFeHQuZGF0YS5EYXRhUHJveHksRXh0LnV0aWwuT2JzZXJ2YWJsZSx7cmVzdGZ1bDpmYWxzZSxzZXRBcGk6ZnVuY3Rpb24oKXtpZihhcmd1bWVudHMubGVuZ3RoPT0xKXt2YXIgYT1FeHQuZGF0YS5BcGkuaXNWYWxpZChhcmd1bWVudHNbMF0pO2lmKGE9PT10cnVlKXt0aGlzLmFwaT1hcmd1bWVudHNbMF19ZWxzZXt0aHJvdyBuZXcgRXh0LmRhdGEuQXBpLkVycm9yKCJpbnZhbGlkIixhKX19ZWxzZXtpZihhcmd1bWVudHMubGVuZ3RoPT0yKXtpZighRXh0LmRhdGEuQXBpLmlzQWN0aW9uKGFyZ3VtZW50c1swXSkpe3Rocm93IG5ldyBFeHQuZGF0YS5BcGkuRXJyb3IoImludmFsaWQiLGFyZ3VtZW50c1swXSl9dGhpcy5hcGlbYXJndW1lbnRzWzBdXT1hcmd1bWVudHNbMV19fUV4dC5kYXRhLkFwaS5wcmVwYXJlKHRoaXMpfSxpc0FwaUFjdGlvbjpmdW5jdGlvbihhKXtyZXR1cm4odGhpcy5hcGlbYV0pP3RydWU6ZmFsc2V9LHJlcXVlc3Q6ZnVuY3Rpb24oZSxiLGcsYSxoLGQsYyl7aWYoIXRoaXMuYXBpW2VdJiYhdGhpcy5sb2FkKXt0aHJvdyBuZXcgRXh0LmRhdGEuRGF0YVByb3h5LkVycm9yKCJhY3Rpb24tdW5kZWZpbmVkIixlKX1nPWd8fHt9O2lmKChlPT09RXh0LmRhdGEuQXBpLmFjdGlvbnMucmVhZCk/dGhpcy5maXJlRXZlbnQoImJlZm9yZWxvYWQiLHRoaXMsZyk6dGhpcy5maXJlRXZlbnQoImJlZm9yZXdyaXRlIix0aGlzLGUsYixnKSE9PWZhbHNlKXt0aGlzLmRvUmVxdWVzdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXtoLmNhbGwoZHx8dGhpcyxudWxsLGMsZmFsc2UpfX0sbG9hZDpudWxsLGRvUmVxdWVzdDpmdW5jdGlvbihlLGIsZyxhLGgsZCxjKXt0aGlzLmxvYWQoZyxhLGgsZCxjKX0sb25SZWFkOkV4dC5lbXB0eUZuLG9uV3JpdGU6RXh0LmVtcHR5Rm4sYnVpbGRVcmw6ZnVuY3Rpb24oZCxiKXtiPWJ8fG51bGw7dmFyIGM9KHRoaXMuY29ubiYmdGhpcy5jb25uLnVybCk/dGhpcy5jb25uLnVybDoodGhpcy5hcGlbZF0pP3RoaXMuYXBpW2RdLnVybDp0aGlzLnVybDtpZighYyl7dGhyb3cgbmV3IEV4dC5kYXRhLkFwaS5FcnJvcigiaW52YWxpZC11cmwiLGQpfXZhciBlPW51bGw7dmFyIGE9Yy5tYXRjaCgvKC4qKShcLmpzb258XC54bWx8XC5odG1sKSQvKTtpZihhKXtlPWFbMl07Yz1hWzFdfWlmKCh0aGlzLnJlc3RmdWw9PT10cnVlfHx0aGlzLnByZXR0eVVybHM9PT10cnVlKSYmYiBpbnN0YW5jZW9mIEV4dC5kYXRhLlJlY29yZCYmIWIucGhhbnRvbSl7Yys9Ii8iK2IuaWR9cmV0dXJuKGU9PT1udWxsKT9jOmMrZX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMucHVyZ2VMaXN0ZW5lcnMoKX19KTtFeHQuYXBwbHkoRXh0LmRhdGEuRGF0YVByb3h5LEV4dC51dGlsLk9ic2VydmFibGUucHJvdG90eXBlKTtFeHQudXRpbC5PYnNlcnZhYmxlLmNhbGwoRXh0LmRhdGEuRGF0YVByb3h5KTtFeHQuZGF0YS5EYXRhUHJveHkuRXJyb3I9RXh0LmV4dGVuZChFeHQuRXJyb3Ise2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dGhpcy5hcmc9YTtFeHQuRXJyb3IuY2FsbCh0aGlzLGIpfSxuYW1lOiJFeHQuZGF0YS5EYXRhUHJveHkifSk7RXh0LmFwcGx5KEV4dC5kYXRhLkRhdGFQcm94eS5FcnJvci5wcm90b3R5cGUse2xhbmc6eyJhY3Rpb24tdW5kZWZpbmVkIjoiRGF0YVByb3h5IGF0dGVtcHRlZCB0byBleGVjdXRlIGFuIEFQSS1hY3Rpb24gYnV0IGZvdW5kIGFuIHVuZGVmaW5lZCB1cmwgLyBmdW5jdGlvbi4gIFBsZWFzZSByZXZpZXcgeW91ciBQcm94eSB1cmwvYXBpLWNvbmZpZ3VyYXRpb24uIiwiYXBpLWludmFsaWQiOiJSZWNpZXZlZCBhbiBpbnZhbGlkIEFQSS1jb25maWd1cmF0aW9uLiAgUGxlYXNlIGVuc3VyZSB5b3VyIHByb3h5IEFQSS1jb25maWd1cmF0aW9uIGNvbnRhaW5zIG9ubHkgdGhlIGFjdGlvbnMgZnJvbSBFeHQuZGF0YS5BcGkuYWN0aW9ucy4ifX0pO0V4dC5kYXRhLlJlcXVlc3Q9ZnVuY3Rpb24oYSl7RXh0LmFwcGx5KHRoaXMsYSl9O0V4dC5kYXRhLlJlcXVlc3QucHJvdG90eXBlPXthY3Rpb246dW5kZWZpbmVkLHJzOnVuZGVmaW5lZCxwYXJhbXM6dW5kZWZpbmVkLGNhbGxiYWNrOkV4dC5lbXB0eUZuLHNjb3BlOnVuZGVmaW5lZCxyZWFkZXI6dW5kZWZpbmVkfTtFeHQuZGF0YS5SZXNwb25zZT1mdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKX07RXh0LmRhdGEuUmVzcG9uc2UucHJvdG90eXBlPXthY3Rpb246dW5kZWZpbmVkLHN1Y2Nlc3M6dW5kZWZpbmVkLG1lc3NhZ2U6dW5kZWZpbmVkLGRhdGE6dW5kZWZpbmVkLHJhdzp1bmRlZmluZWQscmVjb3Jkczp1bmRlZmluZWR9O0V4dC5kYXRhLlNjcmlwdFRhZ1Byb3h5PWZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO0V4dC5kYXRhLlNjcmlwdFRhZ1Byb3h5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuaGVhZD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiaGVhZCIpWzBdfTtFeHQuZGF0YS5TY3JpcHRUYWdQcm94eS5UUkFOU19JRD0xMDAwO0V4dC5leHRlbmQoRXh0LmRhdGEuU2NyaXB0VGFnUHJveHksRXh0LmRhdGEuRGF0YVByb3h5LHt0aW1lb3V0OjMwMDAwLGNhbGxiYWNrUGFyYW06ImNhbGxiYWNrIixub2NhY2hlOnRydWUsZG9SZXF1ZXN0OmZ1bmN0aW9uKGUsZyxkLGgsaixrLGwpe3ZhciBjPUV4dC51cmxFbmNvZGUoRXh0LmFwcGx5KGQsdGhpcy5leHRyYVBhcmFtcykpO3ZhciBiPXRoaXMuYnVpbGRVcmwoZSxnKTtpZighYil7dGhyb3cgbmV3IEV4dC5kYXRhLkFwaS5FcnJvcigiaW52YWxpZC11cmwiLGIpfWI9RXh0LnVybEFwcGVuZChiLGMpO2lmKHRoaXMubm9jYWNoZSl7Yj1FeHQudXJsQXBwZW5kKGIsIl9kYz0iKyhuZXcgRGF0ZSgpLmdldFRpbWUoKSkpfXZhciBhPSsrRXh0LmRhdGEuU2NyaXB0VGFnUHJveHkuVFJBTlNfSUQ7dmFyIG09e2lkOmEsYWN0aW9uOmUsY2I6InN0Y0NhbGxiYWNrIithLHNjcmlwdElkOiJzdGNTY3JpcHQiK2EscGFyYW1zOmQsYXJnOmwsdXJsOmIsY2FsbGJhY2s6aixzY29wZTprLHJlYWRlcjpofTt3aW5kb3dbbS5jYl09dGhpcy5jcmVhdGVDYWxsYmFjayhlLGcsbSk7Yis9U3RyaW5nLmZvcm1hdCgiJnswfT17MX0iLHRoaXMuY2FsbGJhY2tQYXJhbSxtLmNiKTtpZih0aGlzLmF1dG9BYm9ydCE9PWZhbHNlKXt0aGlzLmFib3J0KCl9bS50aW1lb3V0SWQ9dGhpcy5oYW5kbGVGYWlsdXJlLmRlZmVyKHRoaXMudGltZW91dCx0aGlzLFttXSk7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7aS5zZXRBdHRyaWJ1dGUoInNyYyIsYik7aS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2phdmFzY3JpcHQiKTtpLnNldEF0dHJpYnV0ZSgiaWQiLG0uc2NyaXB0SWQpO3RoaXMuaGVhZC5hcHBlbmRDaGlsZChpKTt0aGlzLnRyYW5zPW19LGNyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKGQsYixjKXt2YXIgYT10aGlzO3JldHVybiBmdW5jdGlvbihlKXthLnRyYW5zPWZhbHNlO2EuZGVzdHJveVRyYW5zKGMsdHJ1ZSk7aWYoZD09PUV4dC5kYXRhLkFwaS5hY3Rpb25zLnJlYWQpe2Eub25SZWFkLmNhbGwoYSxkLGMsZSl9ZWxzZXthLm9uV3JpdGUuY2FsbChhLGQsYyxlLGIpfX19LG9uUmVhZDpmdW5jdGlvbihkLGMsYil7dmFyIGE7dHJ5e2E9Yy5yZWFkZXIucmVhZFJlY29yZHMoYil9Y2F0Y2goZyl7dGhpcy5maXJlRXZlbnQoImxvYWRleGNlcHRpb24iLHRoaXMsYyxiLGcpO3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlc3BvbnNlIixkLGMsYixnKTtjLmNhbGxiYWNrLmNhbGwoYy5zY29wZXx8d2luZG93LG51bGwsYy5hcmcsZmFsc2UpO3JldHVybn1pZihhLnN1Y2Nlc3M9PT1mYWxzZSl7dGhpcy5maXJlRXZlbnQoImxvYWRleGNlcHRpb24iLHRoaXMsYyxiKTt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIix0aGlzLCJyZW1vdGUiLGQsYyxiLG51bGwpfWVsc2V7dGhpcy5maXJlRXZlbnQoImxvYWQiLHRoaXMsYixjLmFyZyl9Yy5jYWxsYmFjay5jYWxsKGMuc2NvcGV8fHdpbmRvdyxhLGMuYXJnLGEuc3VjY2Vzcyl9LG9uV3JpdGU6ZnVuY3Rpb24oaCxnLGMsYil7dmFyIGE9Zy5yZWFkZXI7dHJ5e3ZhciBkPWEucmVhZFJlc3BvbnNlKGgsYyl9Y2F0Y2goaSl7dGhpcy5maXJlRXZlbnQoImV4Y2VwdGlvbiIsdGhpcywicmVzcG9uc2UiLGgsZyxkLGkpO2cuY2FsbGJhY2suY2FsbChnLnNjb3BlfHx3aW5kb3csbnVsbCxkLGZhbHNlKTtyZXR1cm59aWYoIWQuc3VjY2Vzcz09PXRydWUpe3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlbW90ZSIsaCxnLGQsYik7Zy5jYWxsYmFjay5jYWxsKGcuc2NvcGV8fHdpbmRvdyxudWxsLGQsZmFsc2UpO3JldHVybn10aGlzLmZpcmVFdmVudCgid3JpdGUiLHRoaXMsaCxkLmRhdGEsZCxiLGcuYXJnKTtnLmNhbGxiYWNrLmNhbGwoZy5zY29wZXx8d2luZG93LGQuZGF0YSxkLHRydWUpfSxpc0xvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFucz90cnVlOmZhbHNlfSxhYm9ydDpmdW5jdGlvbigpe2lmKHRoaXMuaXNMb2FkaW5nKCkpe3RoaXMuZGVzdHJveVRyYW5zKHRoaXMudHJhbnMpfX0sZGVzdHJveVRyYW5zOmZ1bmN0aW9uKGIsYSl7dGhpcy5oZWFkLnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGIuc2NyaXB0SWQpKTtjbGVhclRpbWVvdXQoYi50aW1lb3V0SWQpO2lmKGEpe3dpbmRvd1tiLmNiXT11bmRlZmluZWQ7dHJ5e2RlbGV0ZSB3aW5kb3dbYi5jYl19Y2F0Y2goYyl7fX1lbHNle3dpbmRvd1tiLmNiXT1mdW5jdGlvbigpe3dpbmRvd1tiLmNiXT11bmRlZmluZWQ7dHJ5e2RlbGV0ZSB3aW5kb3dbYi5jYl19Y2F0Y2goZCl7fX19fSxoYW5kbGVGYWlsdXJlOmZ1bmN0aW9uKGEpe3RoaXMudHJhbnM9ZmFsc2U7dGhpcy5kZXN0cm95VHJhbnMoYSxmYWxzZSk7aWYoYS5hY3Rpb249PT1FeHQuZGF0YS5BcGkuYWN0aW9ucy5yZWFkKXt0aGlzLmZpcmVFdmVudCgibG9hZGV4Y2VwdGlvbiIsdGhpcyxudWxsLGEuYXJnKX10aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIix0aGlzLCJyZXNwb25zZSIsYS5hY3Rpb24se3Jlc3BvbnNlOm51bGwsb3B0aW9uczphLmFyZ30pO2EuY2FsbGJhY2suY2FsbChhLnNjb3BlfHx3aW5kb3csbnVsbCxhLmFyZyxmYWxzZSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmFib3J0KCk7RXh0LmRhdGEuU2NyaXB0VGFnUHJveHkuc3VwZXJjbGFzcy5kZXN0cm95LmNhbGwodGhpcyl9fSk7RXh0LmRhdGEuSHR0cFByb3h5PWZ1bmN0aW9uKGEpe0V4dC5kYXRhLkh0dHBQcm94eS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmNvbm49YTt0aGlzLmNvbm4udXJsPW51bGw7dGhpcy51c2VBamF4PSFhfHwhYS5ldmVudHM7dmFyIGM9RXh0LmRhdGEuQXBpLmFjdGlvbnM7dGhpcy5hY3RpdmVSZXF1ZXN0PXt9O2Zvcih2YXIgYiBpbiBjKXt0aGlzLmFjdGl2ZVJlcXVlc3RbY1tiXV09dW5kZWZpbmVkfX07RXh0LmV4dGVuZChFeHQuZGF0YS5IdHRwUHJveHksRXh0LmRhdGEuRGF0YVByb3h5LHtnZXRDb25uZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXNlQWpheD9FeHQuQWpheDp0aGlzLmNvbm59LHNldFVybDpmdW5jdGlvbihhLGIpe3RoaXMuY29ubi51cmw9YTtpZihiPT09dHJ1ZSl7dGhpcy51cmw9YTt0aGlzLmFwaT1udWxsO0V4dC5kYXRhLkFwaS5wcmVwYXJlKHRoaXMpfX0sZG9SZXF1ZXN0OmZ1bmN0aW9uKGcsZCxpLGMsYixlLGEpe3ZhciBoPXttZXRob2Q6KHRoaXMuYXBpW2ddKT90aGlzLmFwaVtnXVsibWV0aG9kIl06dW5kZWZpbmVkLHJlcXVlc3Q6e2NhbGxiYWNrOmIsc2NvcGU6ZSxhcmc6YX0scmVhZGVyOmMsY2FsbGJhY2s6dGhpcy5jcmVhdGVDYWxsYmFjayhnLGQpLHNjb3BlOnRoaXN9O2lmKGkuanNvbkRhdGEpe2guanNvbkRhdGE9aS5qc29uRGF0YX1lbHNle2lmKGkueG1sRGF0YSl7aC54bWxEYXRhPWkueG1sRGF0YX1lbHNle2gucGFyYW1zPWl8fHt9fX10aGlzLmNvbm4udXJsPXRoaXMuYnVpbGRVcmwoZyxkKTtpZih0aGlzLnVzZUFqYXgpe0V4dC5hcHBseUlmKGgsdGhpcy5jb25uKTtpZih0aGlzLmFjdGl2ZVJlcXVlc3RbZ10pe310aGlzLmFjdGl2ZVJlcXVlc3RbZ109RXh0LkFqYXgucmVxdWVzdChoKX1lbHNle3RoaXMuY29ubi5yZXF1ZXN0KGgpfXRoaXMuY29ubi51cmw9bnVsbH0sY3JlYXRlQ2FsbGJhY2s6ZnVuY3Rpb24oYixhKXtyZXR1cm4gZnVuY3Rpb24oZSxkLGMpe3RoaXMuYWN0aXZlUmVxdWVzdFtiXT11bmRlZmluZWQ7aWYoIWQpe2lmKGI9PT1FeHQuZGF0YS5BcGkuYWN0aW9ucy5yZWFkKXt0aGlzLmZpcmVFdmVudCgibG9hZGV4Y2VwdGlvbiIsdGhpcyxlLGMpfXRoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlc3BvbnNlIixiLGUsYyk7ZS5yZXF1ZXN0LmNhbGxiYWNrLmNhbGwoZS5yZXF1ZXN0LnNjb3BlLG51bGwsZS5yZXF1ZXN0LmFyZyxmYWxzZSk7cmV0dXJufWlmKGI9PT1FeHQuZGF0YS5BcGkuYWN0aW9ucy5yZWFkKXt0aGlzLm9uUmVhZChiLGUsYyl9ZWxzZXt0aGlzLm9uV3JpdGUoYixlLGMsYSl9fX0sb25SZWFkOmZ1bmN0aW9uKGQsaCxiKXt2YXIgYTt0cnl7YT1oLnJlYWRlci5yZWFkKGIpfWNhdGNoKGcpe3RoaXMuZmlyZUV2ZW50KCJsb2FkZXhjZXB0aW9uIix0aGlzLGgsYixnKTt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIix0aGlzLCJyZXNwb25zZSIsZCxoLGIsZyk7aC5yZXF1ZXN0LmNhbGxiYWNrLmNhbGwoaC5yZXF1ZXN0LnNjb3BlLG51bGwsaC5yZXF1ZXN0LmFyZyxmYWxzZSk7cmV0dXJufWlmKGEuc3VjY2Vzcz09PWZhbHNlKXt0aGlzLmZpcmVFdmVudCgibG9hZGV4Y2VwdGlvbiIsdGhpcyxoLGIpO3ZhciBjPWgucmVhZGVyLnJlYWRSZXNwb25zZShkLGIpO3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlbW90ZSIsZCxoLGMsbnVsbCl9ZWxzZXt0aGlzLmZpcmVFdmVudCgibG9hZCIsdGhpcyxoLGgucmVxdWVzdC5hcmcpfWgucmVxdWVzdC5jYWxsYmFjay5jYWxsKGgucmVxdWVzdC5zY29wZSxhLGgucmVxdWVzdC5hcmcsYS5zdWNjZXNzKX0sb25Xcml0ZTpmdW5jdGlvbihnLGksYyxiKXt2YXIgYT1pLnJlYWRlcjt2YXIgZDt0cnl7ZD1hLnJlYWRSZXNwb25zZShnLGMpfWNhdGNoKGgpe3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlc3BvbnNlIixnLGksYyxoKTtpLnJlcXVlc3QuY2FsbGJhY2suY2FsbChpLnJlcXVlc3Quc2NvcGUsbnVsbCxpLnJlcXVlc3QuYXJnLGZhbHNlKTtyZXR1cm59aWYoZC5zdWNjZXNzPT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoIndyaXRlIix0aGlzLGcsZC5kYXRhLGQsYixpLnJlcXVlc3QuYXJnKX1lbHNle3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlbW90ZSIsZyxpLGQsYil9aS5yZXF1ZXN0LmNhbGxiYWNrLmNhbGwoaS5yZXF1ZXN0LnNjb3BlLGQuZGF0YSxkLGQuc3VjY2Vzcyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZighdGhpcy51c2VBamF4KXt0aGlzLmNvbm4uYWJvcnQoKX1lbHNle2lmKHRoaXMuYWN0aXZlUmVxdWVzdCl7dmFyIGI9RXh0LmRhdGEuQXBpLmFjdGlvbnM7Zm9yKHZhciBhIGluIGIpe2lmKHRoaXMuYWN0aXZlUmVxdWVzdFtiW2FdXSl7RXh0LkFqYXguYWJvcnQodGhpcy5hY3RpdmVSZXF1ZXN0W2JbYV1dKX19fX1FeHQuZGF0YS5IdHRwUHJveHkuc3VwZXJjbGFzcy5kZXN0cm95LmNhbGwodGhpcyl9fSk7RXh0LmRhdGEuTWVtb3J5UHJveHk9ZnVuY3Rpb24oYil7dmFyIGE9e307YVtFeHQuZGF0YS5BcGkuYWN0aW9ucy5yZWFkXT10cnVlO0V4dC5kYXRhLk1lbW9yeVByb3h5LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLHthcGk6YX0pO3RoaXMuZGF0YT1ifTtFeHQuZXh0ZW5kKEV4dC5kYXRhLk1lbW9yeVByb3h5LEV4dC5kYXRhLkRhdGFQcm94eSx7ZG9SZXF1ZXN0OmZ1bmN0aW9uKGIsYyxhLGQsaCxpLGope2E9YXx8e307dmFyIGs7dHJ5e2s9ZC5yZWFkUmVjb3Jkcyh0aGlzLmRhdGEpfWNhdGNoKGcpe3RoaXMuZmlyZUV2ZW50KCJsb2FkZXhjZXB0aW9uIix0aGlzLG51bGwsaixnKTt0aGlzLmZpcmVFdmVudCgiZXhjZXB0aW9uIix0aGlzLCJyZXNwb25zZSIsYixqLG51bGwsZyk7aC5jYWxsKGksbnVsbCxqLGZhbHNlKTtyZXR1cm59aC5jYWxsKGksayxqLHRydWUpfX0pO0V4dC5kYXRhLlR5cGVzPW5ldyBmdW5jdGlvbigpe3ZhciBhPUV4dC5kYXRhLlNvcnRUeXBlcztFeHQuYXBwbHkodGhpcyx7c3RyaXBSZTovW1wkLCVdL2csQVVUTzp7Y29udmVydDpmdW5jdGlvbihiKXtyZXR1cm4gYn0sc29ydFR5cGU6YS5ub25lLHR5cGU6ImF1dG8ifSxTVFJJTkc6e2NvbnZlcnQ6ZnVuY3Rpb24oYil7cmV0dXJuKGI9PT11bmRlZmluZWR8fGI9PT1udWxsKT8iIjpTdHJpbmcoYil9LHNvcnRUeXBlOmEuYXNVQ1N0cmluZyx0eXBlOiJzdHJpbmcifSxJTlQ6e2NvbnZlcnQ6ZnVuY3Rpb24oYil7cmV0dXJuIGIhPT11bmRlZmluZWQmJmIhPT1udWxsJiZiIT09IiI/cGFyc2VJbnQoU3RyaW5nKGIpLnJlcGxhY2UoRXh0LmRhdGEuVHlwZXMuc3RyaXBSZSwiIiksMTApOih0aGlzLnVzZU51bGw/bnVsbDowKX0sc29ydFR5cGU6YS5ub25lLHR5cGU6ImludCJ9LEZMT0FUOntjb252ZXJ0OmZ1bmN0aW9uKGIpe3JldHVybiBiIT09dW5kZWZpbmVkJiZiIT09bnVsbCYmYiE9PSIiP3BhcnNlRmxvYXQoU3RyaW5nKGIpLnJlcGxhY2UoRXh0LmRhdGEuVHlwZXMuc3RyaXBSZSwiIiksMTApOih0aGlzLnVzZU51bGw/bnVsbDowKX0sc29ydFR5cGU6YS5ub25lLHR5cGU6ImZsb2F0In0sQk9PTDp7Y29udmVydDpmdW5jdGlvbihiKXtyZXR1cm4gYj09PXRydWV8fGI9PT0idHJ1ZSJ8fGI9PTF9LHNvcnRUeXBlOmEubm9uZSx0eXBlOiJib29sIn0sREFURTp7Y29udmVydDpmdW5jdGlvbihjKXt2YXIgZD10aGlzLmRhdGVGb3JtYXQ7aWYoIWMpe3JldHVybiBudWxsfWlmKEV4dC5pc0RhdGUoYykpe3JldHVybiBjfWlmKGQpe2lmKGQ9PSJ0aW1lc3RhbXAiKXtyZXR1cm4gbmV3IERhdGUoYyoxMDAwKX1pZihkPT0idGltZSIpe3JldHVybiBuZXcgRGF0ZShwYXJzZUludChjLDEwKSl9cmV0dXJuIERhdGUucGFyc2VEYXRlKGMsZCl9dmFyIGI9RGF0ZS5wYXJzZShjKTtyZXR1cm4gYj9uZXcgRGF0ZShiKTpudWxsfSxzb3J0VHlwZTphLmFzRGF0ZSx0eXBlOiJkYXRlIn19KTtFeHQuYXBwbHkodGhpcyx7Qk9PTEVBTjp0aGlzLkJPT0wsSU5URUdFUjp0aGlzLklOVCxOVU1CRVI6dGhpcy5GTE9BVH0pfTtFeHQuZGF0YS5Kc29uV3JpdGVyPUV4dC5leHRlbmQoRXh0LmRhdGEuRGF0YVdyaXRlcix7ZW5jb2RlOnRydWUsZW5jb2RlRGVsZXRlOmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5kYXRhLkpzb25Xcml0ZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSl9LHJlbmRlcjpmdW5jdGlvbihjLGQsYil7aWYodGhpcy5lbmNvZGU9PT10cnVlKXtFeHQuYXBwbHkoYyxkKTtjW3RoaXMubWV0YS5yb290XT1FeHQuZW5jb2RlKGIpfWVsc2V7dmFyIGE9RXh0LmFwcGx5KHt9LGQpO2FbdGhpcy5tZXRhLnJvb3RdPWI7Yy5qc29uRGF0YT1hfX0sY3JlYXRlUmVjb3JkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRvSGFzaChhKX0sdXBkYXRlUmVjb3JkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRvSGFzaChhKX0sZGVzdHJveVJlY29yZDpmdW5jdGlvbihiKXtpZih0aGlzLmVuY29kZURlbGV0ZSl7dmFyIGE9e307YVt0aGlzLm1ldGEuaWRQcm9wZXJ0eV09Yi5pZDtyZXR1cm4gYX1lbHNle3JldHVybiBiLmlkfX19KTtFeHQuZGF0YS5Kc29uUmVhZGVyPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtFeHQuYXBwbHlJZihhLHtpZFByb3BlcnR5OiJpZCIsc3VjY2Vzc1Byb3BlcnR5OiJzdWNjZXNzIix0b3RhbFByb3BlcnR5OiJ0b3RhbCJ9KTtFeHQuZGF0YS5Kc29uUmVhZGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYnx8YS5maWVsZHMpfTtFeHQuZXh0ZW5kKEV4dC5kYXRhLkpzb25SZWFkZXIsRXh0LmRhdGEuRGF0YVJlYWRlcix7cmVhZDpmdW5jdGlvbihhKXt2YXIgYj1hLnJlc3BvbnNlVGV4dDt2YXIgYz1FeHQuZGVjb2RlKGIpO2lmKCFjKXt0aHJvdyB7bWVzc2FnZToiSnNvblJlYWRlci5yZWFkOiBKc29uIG9iamVjdCBub3QgZm91bmQifX1yZXR1cm4gdGhpcy5yZWFkUmVjb3JkcyhjKX0scmVhZFJlc3BvbnNlOmZ1bmN0aW9uKGUsYil7dmFyIGg9KGIucmVzcG9uc2VUZXh0IT09dW5kZWZpbmVkKT9FeHQuZGVjb2RlKGIucmVzcG9uc2VUZXh0KTpiO2lmKCFoKXt0aHJvdyBuZXcgRXh0LmRhdGEuSnNvblJlYWRlci5FcnJvcigicmVzcG9uc2UiKX12YXIgYT10aGlzLmdldFJvb3QoaCksZz10aGlzLmdldFN1Y2Nlc3MoaCk7aWYoZyYmZT09PUV4dC5kYXRhLkFwaS5hY3Rpb25zLmNyZWF0ZSl7dmFyIGQ9RXh0LmlzRGVmaW5lZChhKTtpZihkJiZFeHQuaXNFbXB0eShhKSl7dGhyb3cgbmV3IEV4dC5kYXRhLkpzb25SZWFkZXIuRXJyb3IoInJvb3QtZW1wdHkiLHRoaXMubWV0YS5yb290KX1lbHNle2lmKCFkKXt0aHJvdyBuZXcgRXh0LmRhdGEuSnNvblJlYWRlci5FcnJvcigicm9vdC11bmRlZmluZWQtcmVzcG9uc2UiLHRoaXMubWV0YS5yb290KX19fXZhciBjPW5ldyBFeHQuZGF0YS5SZXNwb25zZSh7YWN0aW9uOmUsc3VjY2VzczpnLGRhdGE6KGEpP3RoaXMuZXh0cmFjdERhdGEoYSxmYWxzZSk6W10sbWVzc2FnZTp0aGlzLmdldE1lc3NhZ2UoaCkscmF3Omh9KTtpZihFeHQuaXNFbXB0eShjLnN1Y2Nlc3MpKXt0aHJvdyBuZXcgRXh0LmRhdGEuSnNvblJlYWRlci5FcnJvcigic3VjY2Vzc1Byb3BlcnR5LXJlc3BvbnNlIix0aGlzLm1ldGEuc3VjY2Vzc1Byb3BlcnR5KX1yZXR1cm4gY30scmVhZFJlY29yZHM6ZnVuY3Rpb24oYSl7dGhpcy5qc29uRGF0YT1hO2lmKGEubWV0YURhdGEpe3RoaXMub25NZXRhQ2hhbmdlKGEubWV0YURhdGEpfXZhciBtPXRoaXMubWV0YSxoPXRoaXMucmVjb3JkVHlwZSxiPWgucHJvdG90eXBlLmZpZWxkcyxsPWIuaXRlbXMsaT1iLmxlbmd0aCxqO3ZhciBnPXRoaXMuZ2V0Um9vdChhKSxlPWcubGVuZ3RoLGQ9ZSxrPXRydWU7aWYobS50b3RhbFByb3BlcnR5KXtqPXBhcnNlSW50KHRoaXMuZ2V0VG90YWwoYSksMTApO2lmKCFpc05hTihqKSl7ZD1qfX1pZihtLnN1Y2Nlc3NQcm9wZXJ0eSl7aj10aGlzLmdldFN1Y2Nlc3MoYSk7aWYoaj09PWZhbHNlfHxqPT09ImZhbHNlIil7az1mYWxzZX19cmV0dXJue3N1Y2Nlc3M6ayxyZWNvcmRzOnRoaXMuZXh0cmFjdERhdGEoZyx0cnVlKSx0b3RhbFJlY29yZHM6ZH19LGJ1aWxkRXh0cmFjdG9yczpmdW5jdGlvbigpe2lmKHRoaXMuZWYpe3JldHVybn12YXIgbD10aGlzLm1ldGEsaD10aGlzLnJlY29yZFR5cGUsZT1oLnByb3RvdHlwZS5maWVsZHMsaz1lLml0ZW1zLGo9ZS5sZW5ndGg7aWYobC50b3RhbFByb3BlcnR5KXt0aGlzLmdldFRvdGFsPXRoaXMuY3JlYXRlQWNjZXNzb3IobC50b3RhbFByb3BlcnR5KX1pZihsLnN1Y2Nlc3NQcm9wZXJ0eSl7dGhpcy5nZXRTdWNjZXNzPXRoaXMuY3JlYXRlQWNjZXNzb3IobC5zdWNjZXNzUHJvcGVydHkpfWlmKGwubWVzc2FnZVByb3BlcnR5KXt0aGlzLmdldE1lc3NhZ2U9dGhpcy5jcmVhdGVBY2Nlc3NvcihsLm1lc3NhZ2VQcm9wZXJ0eSl9dGhpcy5nZXRSb290PWwucm9vdD90aGlzLmNyZWF0ZUFjY2Vzc29yKGwucm9vdCk6ZnVuY3Rpb24oZyl7cmV0dXJuIGd9O2lmKGwuaWR8fGwuaWRQcm9wZXJ0eSl7dmFyIGQ9dGhpcy5jcmVhdGVBY2Nlc3NvcihsLmlkfHxsLmlkUHJvcGVydHkpO3RoaXMuZ2V0SWQ9ZnVuY3Rpb24oaSl7dmFyIGc9ZChpKTtyZXR1cm4oZz09PXVuZGVmaW5lZHx8Zz09PSIiKT9udWxsOmd9fWVsc2V7dGhpcy5nZXRJZD1mdW5jdGlvbigpe3JldHVybiBudWxsfX12YXIgYz1bXTtmb3IodmFyIGI9MDtiPGo7YisrKXtlPWtbYl07dmFyIGE9KGUubWFwcGluZyE9PXVuZGVmaW5lZCYmZS5tYXBwaW5nIT09bnVsbCk/ZS5tYXBwaW5nOmUubmFtZTtjLnB1c2godGhpcy5jcmVhdGVBY2Nlc3NvcihhKSl9dGhpcy5lZj1jfSxzaW1wbGVBY2Nlc3M6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYlthXX0sY3JlYXRlQWNjZXNzb3I6ZnVuY3Rpb24oKXt2YXIgYT0vW1xbXC5dLztyZXR1cm4gZnVuY3Rpb24oYyl7aWYoRXh0LmlzRW1wdHkoYykpe3JldHVybiBFeHQuZW1wdHlGbn1pZihFeHQuaXNGdW5jdGlvbihjKSl7cmV0dXJuIGN9dmFyIGI9U3RyaW5nKGMpLnNlYXJjaChhKTtpZihiPj0wKXtyZXR1cm4gbmV3IEZ1bmN0aW9uKCJvYmoiLCJyZXR1cm4gb2JqIisoYj4wPyIuIjoiIikrYyl9cmV0dXJuIGZ1bmN0aW9uKGQpe3JldHVybiBkW2NdfX19KCksZXh0cmFjdFZhbHVlczpmdW5jdGlvbihoLGQsYSl7dmFyIGcsYz17fTtmb3IodmFyIGU9MDtlPGE7ZSsrKXtnPWRbZV07dmFyIGI9dGhpcy5lZltlXShoKTtjW2cubmFtZV09Zy5jb252ZXJ0KChiIT09dW5kZWZpbmVkKT9iOmcuZGVmYXVsdFZhbHVlLGgpfXJldHVybiBjfX0pO0V4dC5kYXRhLkpzb25SZWFkZXIuRXJyb3I9RXh0LmV4dGVuZChFeHQuRXJyb3Ise2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGIsYSl7dGhpcy5hcmc9YTtFeHQuRXJyb3IuY2FsbCh0aGlzLGIpfSxuYW1lOiJFeHQuZGF0YS5Kc29uUmVhZGVyIn0pO0V4dC5hcHBseShFeHQuZGF0YS5Kc29uUmVhZGVyLkVycm9yLnByb3RvdHlwZSx7bGFuZzp7cmVzcG9uc2U6IkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGpzb24tZGVjb2RpbmcgeW91ciBzZXJ2ZXIgcmVzcG9uc2UiLCJzdWNjZXNzUHJvcGVydHktcmVzcG9uc2UiOidDb3VsZCBub3QgbG9jYXRlIHlvdXIgInN1Y2Nlc3NQcm9wZXJ0eSIgaW4geW91ciBzZXJ2ZXIgcmVzcG9uc2UuICBQbGVhc2UgcmV2aWV3IHlvdXIgSnNvblJlYWRlciBjb25maWcgdG8gZW5zdXJlIHRoZSBjb25maWctcHJvcGVydHkgInN1Y2Nlc3NQcm9wZXJ0eSIgbWF0Y2hlcyB0aGUgcHJvcGVydHkgaW4geW91ciBzZXJ2ZXItcmVzcG9uc2UuICBTZWUgdGhlIEpzb25SZWFkZXIgZG9jcy4nLCJyb290LXVuZGVmaW5lZC1jb25maWciOidZb3VyIEpzb25SZWFkZXIgd2FzIGNvbmZpZ3VyZWQgd2l0aG91dCBhICJyb290IiBwcm9wZXJ0eS4gIFBsZWFzZSByZXZpZXcgeW91ciBKc29uUmVhZGVyIGNvbmZpZyBhbmQgbWFrZSBzdXJlIHRvIGRlZmluZSB0aGUgcm9vdCBwcm9wZXJ0eS4gIFNlZSB0aGUgSnNvblJlYWRlciBkb2NzLicsImlkUHJvcGVydHktdW5kZWZpbmVkIjonWW91ciBKc29uUmVhZGVyIHdhcyBjb25maWd1cmVkIHdpdGhvdXQgYW4gImlkUHJvcGVydHkiICBQbGVhc2UgcmV2aWV3IHlvdXIgSnNvblJlYWRlciBjb25maWd1cmF0aW9uIGFuZCBlbnN1cmUgdGhlICJpZFByb3BlcnR5IiBpcyBzZXQgKGUuZy46ICJpZCIpLiAgU2VlIHRoZSBKc29uUmVhZGVyIGRvY3MuJywicm9vdC1lbXB0eSI6J0RhdGEgd2FzIGV4cGVjdGVkIHRvIGJlIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgaW4gdGhlICJyb290IiBwcm9wZXJ0eSBvZiB0aGUgcmVzcG9uc2UuICBQbGVhc2UgcmV2aWV3IHlvdXIgSnNvblJlYWRlciBjb25maWd1cmF0aW9uIHRvIGVuc3VyZSB0aGUgInJvb3QiIHByb3BlcnR5IG1hdGNoZXMgdGhhdCByZXR1cm5lZCBpbiB0aGUgc2VydmVyLXJlc3BvbnNlLiAgU2VlIEpzb25SZWFkZXIgZG9jcy4nfX0pO0V4dC5kYXRhLkFycmF5UmVhZGVyPUV4dC5leHRlbmQoRXh0LmRhdGEuSnNvblJlYWRlcix7cmVhZFJlY29yZHM6ZnVuY3Rpb24ocil7dGhpcy5hcnJheURhdGE9cjt2YXIgbD10aGlzLm1ldGEsZD1sP0V4dC5udW0obC5pZEluZGV4LGwuaWQpOm51bGwsYj10aGlzLnJlY29yZFR5cGUscT1iLnByb3RvdHlwZS5maWVsZHMsej1bXSxlPXRydWUsZzt2YXIgdT10aGlzLmdldFJvb3Qocik7Zm9yKHZhciB5PTAsQT11Lmxlbmd0aDt5PEE7eSsrKXt2YXIgdD11W3ldLGE9e30scD0oKGR8fGQ9PT0wKSYmdFtkXSE9PXVuZGVmaW5lZCYmdFtkXSE9PSIiP3RbZF06bnVsbCk7Zm9yKHZhciB4PTAsbT1xLmxlbmd0aDt4PG07eCsrKXt2YXIgQj1xLml0ZW1zW3hdLHc9Qi5tYXBwaW5nIT09dW5kZWZpbmVkJiZCLm1hcHBpbmchPT1udWxsP0IubWFwcGluZzp4O2c9dFt3XSE9PXVuZGVmaW5lZD90W3ddOkIuZGVmYXVsdFZhbHVlO2c9Qi5jb252ZXJ0KGcsdCk7YVtCLm5hbWVdPWd9dmFyIGM9bmV3IGIoYSxwKTtjLmpzb249dDt6W3oubGVuZ3RoXT1jfXZhciBoPXoubGVuZ3RoO2lmKGwudG90YWxQcm9wZXJ0eSl7Zz1wYXJzZUludCh0aGlzLmdldFRvdGFsKHIpLDEwKTtpZighaXNOYU4oZykpe2g9Z319aWYobC5zdWNjZXNzUHJvcGVydHkpe2c9dGhpcy5nZXRTdWNjZXNzKHIpO2lmKGc9PT1mYWxzZXx8Zz09PSJmYWxzZSIpe2U9ZmFsc2V9fXJldHVybntzdWNjZXNzOmUscmVjb3Jkczp6LHRvdGFsUmVjb3JkczpofX19KTtFeHQuZGF0YS5BcnJheVN0b3JlPUV4dC5leHRlbmQoRXh0LmRhdGEuU3RvcmUse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5kYXRhLkFycmF5U3RvcmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsRXh0LmFwcGx5KGEse3JlYWRlcjpuZXcgRXh0LmRhdGEuQXJyYXlSZWFkZXIoYSl9KSl9LGxvYWREYXRhOmZ1bmN0aW9uKGUsYil7aWYodGhpcy5leHBhbmREYXRhPT09dHJ1ZSl7dmFyIGQ9W107Zm9yKHZhciBjPTAsYT1lLmxlbmd0aDtjPGE7YysrKXtkW2QubGVuZ3RoXT1bZVtjXV19ZT1kfUV4dC5kYXRhLkFycmF5U3RvcmUuc3VwZXJjbGFzcy5sb2FkRGF0YS5jYWxsKHRoaXMsZSxiKX19KTtFeHQucmVnKCJhcnJheXN0b3JlIixFeHQuZGF0YS5BcnJheVN0b3JlKTtFeHQuZGF0YS5TaW1wbGVTdG9yZT1FeHQuZGF0YS5BcnJheVN0b3JlO0V4dC5yZWcoInNpbXBsZXN0b3JlIixFeHQuZGF0YS5TaW1wbGVTdG9yZSk7RXh0LmRhdGEuSnNvblN0b3JlPUV4dC5leHRlbmQoRXh0LmRhdGEuU3RvcmUse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5kYXRhLkpzb25TdG9yZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxFeHQuYXBwbHkoYSx7cmVhZGVyOm5ldyBFeHQuZGF0YS5Kc29uUmVhZGVyKGEpfSkpfX0pO0V4dC5yZWcoImpzb25zdG9yZSIsRXh0LmRhdGEuSnNvblN0b3JlKTtFeHQuZGF0YS5YbWxXcml0ZXI9ZnVuY3Rpb24oYSl7RXh0LmRhdGEuWG1sV3JpdGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMudHBsPSh0eXBlb2YodGhpcy50cGwpPT09InN0cmluZyIpP25ldyBFeHQuWFRlbXBsYXRlKHRoaXMudHBsKS5jb21waWxlKCk6dGhpcy50cGwuY29tcGlsZSgpfTtFeHQuZXh0ZW5kKEV4dC5kYXRhLlhtbFdyaXRlcixFeHQuZGF0YS5EYXRhV3JpdGVyLHtkb2N1bWVudFJvb3Q6InhyZXF1ZXN0Iixmb3JjZURvY3VtZW50Um9vdDpmYWxzZSxyb290OiJyZWNvcmRzIix4bWxWZXJzaW9uOiIxLjAiLHhtbEVuY29kaW5nOiJJU08tODg1OS0xNSIsdHBsOic8dHBsIGZvcj0iLiI+PFx1MDAzZnhtbCB2ZXJzaW9uPSJ7dmVyc2lvbn0iIGVuY29kaW5nPSJ7ZW5jb2Rpbmd9Ilx1MDAzZj48dHBsIGlmPSJkb2N1bWVudFJvb3QiPjx7ZG9jdW1lbnRSb290fT48dHBsIGZvcj0iYmFzZVBhcmFtcyI+PHRwbCBmb3I9Ii4iPjx7bmFtZX0+e3ZhbHVlfTwve25hbWV9PjwvdHBsPjwvdHBsPjwvdHBsPjx0cGwgaWY9InJlY29yZHMubGVuZ3RoJmd0OzEiPjx7cm9vdH0+PC90cGw+PHRwbCBmb3I9InJlY29yZHMiPjx7cGFyZW50LnJlY29yZH0+PHRwbCBmb3I9Ii4iPjx7bmFtZX0+e3ZhbHVlfTwve25hbWV9PjwvdHBsPjwve3BhcmVudC5yZWNvcmR9PjwvdHBsPjx0cGwgaWY9InJlY29yZHMubGVuZ3RoJmd0OzEiPjwve3Jvb3R9PjwvdHBsPjx0cGwgaWY9ImRvY3VtZW50Um9vdCI+PC97ZG9jdW1lbnRSb290fT48L3RwbD48L3RwbD4nLHJlbmRlcjpmdW5jdGlvbihiLGMsYSl7Yz10aGlzLnRvQXJyYXkoYyk7Yi54bWxEYXRhPXRoaXMudHBsLmFwcGx5VGVtcGxhdGUoe3ZlcnNpb246dGhpcy54bWxWZXJzaW9uLGVuY29kaW5nOnRoaXMueG1sRW5jb2RpbmcsZG9jdW1lbnRSb290OihjLmxlbmd0aD4wfHx0aGlzLmZvcmNlRG9jdW1lbnRSb290PT09dHJ1ZSk/dGhpcy5kb2N1bWVudFJvb3Q6ZmFsc2UscmVjb3JkOnRoaXMubWV0YS5yZWNvcmQscm9vdDp0aGlzLnJvb3QsYmFzZVBhcmFtczpjLHJlY29yZHM6KEV4dC5pc0FycmF5KGFbMF0pKT9hOlthXX0pfSxjcmVhdGVSZWNvcmQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudG9BcnJheSh0aGlzLnRvSGFzaChhKSl9LHVwZGF0ZVJlY29yZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50b0FycmF5KHRoaXMudG9IYXNoKGEpKX0sZGVzdHJveVJlY29yZDpmdW5jdGlvbihiKXt2YXIgYT17fTthW3RoaXMubWV0YS5pZFByb3BlcnR5XT1iLmlkO3JldHVybiB0aGlzLnRvQXJyYXkoYSl9fSk7RXh0LmRhdGEuWG1sUmVhZGVyPWZ1bmN0aW9uKGEsYil7YT1hfHx7fTtFeHQuYXBwbHlJZihhLHtpZFByb3BlcnR5OmEuaWRQcm9wZXJ0eXx8YS5pZFBhdGh8fGEuaWQsc3VjY2Vzc1Byb3BlcnR5OmEuc3VjY2Vzc1Byb3BlcnR5fHxhLnN1Y2Nlc3N9KTtFeHQuZGF0YS5YbWxSZWFkZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSxifHxhLmZpZWxkcyl9O0V4dC5leHRlbmQoRXh0LmRhdGEuWG1sUmVhZGVyLEV4dC5kYXRhLkRhdGFSZWFkZXIse3JlYWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXNwb25zZVhNTDtpZighYil7dGhyb3cge21lc3NhZ2U6IlhtbFJlYWRlci5yZWFkOiBYTUwgRG9jdW1lbnQgbm90IGF2YWlsYWJsZSJ9fXJldHVybiB0aGlzLnJlYWRSZWNvcmRzKGIpfSxyZWFkUmVjb3JkczpmdW5jdGlvbihkKXt0aGlzLnhtbERhdGE9ZDt2YXIgYT1kLmRvY3VtZW50RWxlbWVudHx8ZCxjPUV4dC5Eb21RdWVyeSxnPTAsZT10cnVlO2lmKHRoaXMubWV0YS50b3RhbFByb3BlcnR5KXtnPXRoaXMuZ2V0VG90YWwoYSwwKX1pZih0aGlzLm1ldGEuc3VjY2Vzc1Byb3BlcnR5KXtlPXRoaXMuZ2V0U3VjY2VzcyhhKX12YXIgYj10aGlzLmV4dHJhY3REYXRhKGMuc2VsZWN0KHRoaXMubWV0YS5yZWNvcmQsYSksdHJ1ZSk7cmV0dXJue3N1Y2Nlc3M6ZSxyZWNvcmRzOmIsdG90YWxSZWNvcmRzOmd8fGIubGVuZ3RofX0scmVhZFJlc3BvbnNlOmZ1bmN0aW9uKGcsYil7dmFyIGU9RXh0LkRvbVF1ZXJ5LGg9Yi5yZXNwb25zZVhNTCxhPWguZG9jdW1lbnRFbGVtZW50fHxoO3ZhciBjPW5ldyBFeHQuZGF0YS5SZXNwb25zZSh7YWN0aW9uOmcsc3VjY2Vzczp0aGlzLmdldFN1Y2Nlc3MoYSksbWVzc2FnZTp0aGlzLmdldE1lc3NhZ2UoYSksZGF0YTp0aGlzLmV4dHJhY3REYXRhKGUuc2VsZWN0KHRoaXMubWV0YS5yZWNvcmQsYSl8fGUuc2VsZWN0KHRoaXMubWV0YS5yb290LGEpLGZhbHNlKSxyYXc6aH0pO2lmKEV4dC5pc0VtcHR5KGMuc3VjY2Vzcykpe3Rocm93IG5ldyBFeHQuZGF0YS5EYXRhUmVhZGVyLkVycm9yKCJzdWNjZXNzUHJvcGVydHktcmVzcG9uc2UiLHRoaXMubWV0YS5zdWNjZXNzUHJvcGVydHkpfWlmKGc9PT1FeHQuZGF0YS5BcGkuYWN0aW9ucy5jcmVhdGUpe3ZhciBkPUV4dC5pc0RlZmluZWQoYy5kYXRhKTtpZihkJiZFeHQuaXNFbXB0eShjLmRhdGEpKXt0aHJvdyBuZXcgRXh0LmRhdGEuSnNvblJlYWRlci5FcnJvcigicm9vdC1lbXB0eSIsdGhpcy5tZXRhLnJvb3QpfWVsc2V7aWYoIWQpe3Rocm93IG5ldyBFeHQuZGF0YS5Kc29uUmVhZGVyLkVycm9yKCJyb290LXVuZGVmaW5lZC1yZXNwb25zZSIsdGhpcy5tZXRhLnJvb3QpfX19cmV0dXJuIGN9LGdldFN1Y2Nlc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX0sYnVpbGRFeHRyYWN0b3JzOmZ1bmN0aW9uKCl7aWYodGhpcy5lZil7cmV0dXJufXZhciBsPXRoaXMubWV0YSxoPXRoaXMucmVjb3JkVHlwZSxlPWgucHJvdG90eXBlLmZpZWxkcyxrPWUuaXRlbXMsaj1lLmxlbmd0aDtpZihsLnRvdGFsUHJvcGVydHkpe3RoaXMuZ2V0VG90YWw9dGhpcy5jcmVhdGVBY2Nlc3NvcihsLnRvdGFsUHJvcGVydHkpfWlmKGwuc3VjY2Vzc1Byb3BlcnR5KXt0aGlzLmdldFN1Y2Nlc3M9dGhpcy5jcmVhdGVBY2Nlc3NvcihsLnN1Y2Nlc3NQcm9wZXJ0eSl9aWYobC5tZXNzYWdlUHJvcGVydHkpe3RoaXMuZ2V0TWVzc2FnZT10aGlzLmNyZWF0ZUFjY2Vzc29yKGwubWVzc2FnZVByb3BlcnR5KX10aGlzLmdldFJvb3Q9ZnVuY3Rpb24oZyl7cmV0dXJuKCFFeHQuaXNFbXB0eShnW3RoaXMubWV0YS5yZWNvcmRdKSk/Z1t0aGlzLm1ldGEucmVjb3JkXTpnW3RoaXMubWV0YS5yb290XX07aWYobC5pZFBhdGh8fGwuaWRQcm9wZXJ0eSl7dmFyIGQ9dGhpcy5jcmVhdGVBY2Nlc3NvcihsLmlkUGF0aHx8bC5pZFByb3BlcnR5KTt0aGlzLmdldElkPWZ1bmN0aW9uKGcpe3ZhciBpPWQoZyl8fGcuaWQ7cmV0dXJuKGk9PT11bmRlZmluZWR8fGk9PT0iIik/bnVsbDppfX1lbHNle3RoaXMuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19dmFyIGM9W107Zm9yKHZhciBiPTA7YjxqO2IrKyl7ZT1rW2JdO3ZhciBhPShlLm1hcHBpbmchPT11bmRlZmluZWQmJmUubWFwcGluZyE9PW51bGwpP2UubWFwcGluZzplLm5hbWU7Yy5wdXNoKHRoaXMuY3JlYXRlQWNjZXNzb3IoYSkpfXRoaXMuZWY9Y30sY3JlYXRlQWNjZXNzb3I6ZnVuY3Rpb24oKXt2YXIgYT1FeHQuRG9tUXVlcnk7cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKEV4dC5pc0Z1bmN0aW9uKGIpKXtyZXR1cm4gYn1zd2l0Y2goYil7Y2FzZSB0aGlzLm1ldGEudG90YWxQcm9wZXJ0eTpyZXR1cm4gZnVuY3Rpb24oYyxkKXtyZXR1cm4gYS5zZWxlY3ROdW1iZXIoYixjLGQpfTticmVhaztjYXNlIHRoaXMubWV0YS5zdWNjZXNzUHJvcGVydHk6cmV0dXJuIGZ1bmN0aW9uKGQsZSl7dmFyIGM9YS5zZWxlY3RWYWx1ZShiLGQsdHJ1ZSk7dmFyIGc9YyE9PWZhbHNlJiZjIT09ImZhbHNlIjtyZXR1cm4gZ307YnJlYWs7ZGVmYXVsdDpyZXR1cm4gZnVuY3Rpb24oYyxkKXtyZXR1cm4gYS5zZWxlY3RWYWx1ZShiLGMsZCl9O2JyZWFrfX19KCksZXh0cmFjdFZhbHVlczpmdW5jdGlvbihoLGQsYSl7dmFyIGcsYz17fTtmb3IodmFyIGU9MDtlPGE7ZSsrKXtnPWRbZV07dmFyIGI9dGhpcy5lZltlXShoKTtjW2cubmFtZV09Zy5jb252ZXJ0KChiIT09dW5kZWZpbmVkKT9iOmcuZGVmYXVsdFZhbHVlLGgpfXJldHVybiBjfX0pO0V4dC5kYXRhLlhtbFN0b3JlPUV4dC5leHRlbmQoRXh0LmRhdGEuU3RvcmUse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5kYXRhLlhtbFN0b3JlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEV4dC5hcHBseShhLHtyZWFkZXI6bmV3IEV4dC5kYXRhLlhtbFJlYWRlcihhKX0pKX19KTtFeHQucmVnKCJ4bWxzdG9yZSIsRXh0LmRhdGEuWG1sU3RvcmUpO0V4dC5kYXRhLkdyb3VwaW5nU3RvcmU9RXh0LmV4dGVuZChFeHQuZGF0YS5TdG9yZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCl7ZD1kfHx7fTt0aGlzLmhhc011bHRpU29ydD10cnVlO3RoaXMubXVsdGlTb3J0SW5mbz10aGlzLm11bHRpU29ydEluZm98fHtzb3J0ZXJzOltdfTt2YXIgZT10aGlzLm11bHRpU29ydEluZm8uc29ydGVycyxjPWQuZ3JvdXBGaWVsZHx8dGhpcy5ncm91cEZpZWxkLGI9ZC5zb3J0SW5mb3x8dGhpcy5zb3J0SW5mbyxhPWQuZ3JvdXBEaXJ8fHRoaXMuZ3JvdXBEaXI7aWYoYyl7ZS5wdXNoKHtmaWVsZDpjLGRpcmVjdGlvbjphfSl9aWYoYil7ZS5wdXNoKGIpfUV4dC5kYXRhLkdyb3VwaW5nU3RvcmUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsZCk7dGhpcy5hZGRFdmVudHMoImdyb3VwY2hhbmdlIik7dGhpcy5hcHBseUdyb3VwRmllbGQoKX0scmVtb3RlR3JvdXA6ZmFsc2UsZ3JvdXBPblNvcnQ6ZmFsc2UsZ3JvdXBEaXI6IkFTQyIsY2xlYXJHcm91cGluZzpmdW5jdGlvbigpe3RoaXMuZ3JvdXBGaWVsZD1mYWxzZTtpZih0aGlzLnJlbW90ZUdyb3VwKXtpZih0aGlzLmJhc2VQYXJhbXMpe2RlbGV0ZSB0aGlzLmJhc2VQYXJhbXMuZ3JvdXBCeTtkZWxldGUgdGhpcy5iYXNlUGFyYW1zLmdyb3VwRGlyfXZhciBhPXRoaXMubGFzdE9wdGlvbnM7aWYoYSYmYS5wYXJhbXMpe2RlbGV0ZSBhLnBhcmFtcy5ncm91cEJ5O2RlbGV0ZSBhLnBhcmFtcy5ncm91cERpcn10aGlzLnJlbG9hZCgpfWVsc2V7dGhpcy5zb3J0KCk7dGhpcy5maXJlRXZlbnQoImRhdGFjaGFuZ2VkIix0aGlzKX19LGdyb3VwQnk6ZnVuY3Rpb24oZSxhLGQpe2Q9ZD8oU3RyaW5nKGQpLnRvVXBwZXJDYXNlKCk9PSJERVNDIj8iREVTQyI6IkFTQyIpOnRoaXMuZ3JvdXBEaXI7aWYodGhpcy5ncm91cEZpZWxkPT1lJiZ0aGlzLmdyb3VwRGlyPT1kJiYhYSl7cmV0dXJufXZhciBjPXRoaXMubXVsdGlTb3J0SW5mby5zb3J0ZXJzO2lmKGMubGVuZ3RoPjAmJmNbMF0uZmllbGQ9PXRoaXMuZ3JvdXBGaWVsZCl7Yy5zaGlmdCgpfXRoaXMuZ3JvdXBGaWVsZD1lO3RoaXMuZ3JvdXBEaXI9ZDt0aGlzLmFwcGx5R3JvdXBGaWVsZCgpO3ZhciBiPWZ1bmN0aW9uKCl7dGhpcy5maXJlRXZlbnQoImdyb3VwY2hhbmdlIix0aGlzLHRoaXMuZ2V0R3JvdXBTdGF0ZSgpKX07aWYodGhpcy5ncm91cE9uU29ydCl7dGhpcy5zb3J0KGUsZCk7Yi5jYWxsKHRoaXMpO3JldHVybn1pZih0aGlzLnJlbW90ZUdyb3VwKXt0aGlzLm9uKCJsb2FkIixiLHRoaXMse3NpbmdsZTp0cnVlfSk7dGhpcy5yZWxvYWQoKX1lbHNle3RoaXMuc29ydChjKTtiLmNhbGwodGhpcyl9fSxzb3J0OmZ1bmN0aW9uKGgsYyl7aWYodGhpcy5yZW1vdGVTb3J0KXtyZXR1cm4gRXh0LmRhdGEuR3JvdXBpbmdTdG9yZS5zdXBlcmNsYXNzLnNvcnQuY2FsbCh0aGlzLGgsYyl9dmFyIGc9W107aWYoRXh0LmlzQXJyYXkoYXJndW1lbnRzWzBdKSl7Zz1hcmd1bWVudHNbMF19ZWxzZXtpZihoPT11bmRlZmluZWQpe2c9dGhpcy5zb3J0SW5mbz9bdGhpcy5zb3J0SW5mb106W119ZWxzZXt2YXIgZT10aGlzLmZpZWxkcy5nZXQoaCk7aWYoIWUpe3JldHVybiBmYWxzZX12YXIgYj1lLm5hbWUsYT10aGlzLnNvcnRJbmZvfHxudWxsLGQ9dGhpcy5zb3J0VG9nZ2xlP3RoaXMuc29ydFRvZ2dsZVtiXTpudWxsO2lmKCFjKXtpZihhJiZhLmZpZWxkPT1iKXtjPSh0aGlzLnNvcnRUb2dnbGVbYl18fCJBU0MiKS50b2dnbGUoIkFTQyIsIkRFU0MiKX1lbHNle2M9ZS5zb3J0RGlyfX10aGlzLnNvcnRUb2dnbGVbYl09Yzt0aGlzLnNvcnRJbmZvPXtmaWVsZDpiLGRpcmVjdGlvbjpjfTtnPVt0aGlzLnNvcnRJbmZvXX19aWYodGhpcy5ncm91cEZpZWxkKXtnLnVuc2hpZnQoe2RpcmVjdGlvbjp0aGlzLmdyb3VwRGlyLGZpZWxkOnRoaXMuZ3JvdXBGaWVsZH0pfXJldHVybiB0aGlzLm11bHRpU29ydC5jYWxsKHRoaXMsZyxjKX0sYXBwbHlHcm91cEZpZWxkOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW1vdGVHcm91cCl7aWYoIXRoaXMuYmFzZVBhcmFtcyl7dGhpcy5iYXNlUGFyYW1zPXt9fUV4dC5hcHBseSh0aGlzLmJhc2VQYXJhbXMse2dyb3VwQnk6dGhpcy5ncm91cEZpZWxkLGdyb3VwRGlyOnRoaXMuZ3JvdXBEaXJ9KTt2YXIgYT10aGlzLmxhc3RPcHRpb25zO2lmKGEmJmEucGFyYW1zKXthLnBhcmFtcy5ncm91cERpcj10aGlzLmdyb3VwRGlyO2RlbGV0ZSBhLnBhcmFtcy5ncm91cEJ5fX19LGFwcGx5R3JvdXBpbmc6ZnVuY3Rpb24oYSl7aWYodGhpcy5ncm91cEZpZWxkIT09ZmFsc2Upe3RoaXMuZ3JvdXBCeSh0aGlzLmdyb3VwRmllbGQsdHJ1ZSx0aGlzLmdyb3VwRGlyKTtyZXR1cm4gdHJ1ZX1lbHNle2lmKGE9PT10cnVlKXt0aGlzLmZpcmVFdmVudCgiZGF0YWNoYW5nZWQiLHRoaXMpfXJldHVybiBmYWxzZX19LGdldEdyb3VwU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cE9uU29ydCYmdGhpcy5ncm91cEZpZWxkIT09ZmFsc2U/KHRoaXMuc29ydEluZm8/dGhpcy5zb3J0SW5mby5maWVsZDp1bmRlZmluZWQpOnRoaXMuZ3JvdXBGaWVsZH19KTtFeHQucmVnKCJncm91cGluZ3N0b3JlIixFeHQuZGF0YS5Hcm91cGluZ1N0b3JlKTtFeHQuZGF0YS5EaXJlY3RQcm94eT1mdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKTtpZih0eXBlb2YgdGhpcy5wYXJhbU9yZGVyPT0ic3RyaW5nIil7dGhpcy5wYXJhbU9yZGVyPXRoaXMucGFyYW1PcmRlci5zcGxpdCgvW1xzLHxdLyl9RXh0LmRhdGEuRGlyZWN0UHJveHkuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSl9O0V4dC5leHRlbmQoRXh0LmRhdGEuRGlyZWN0UHJveHksRXh0LmRhdGEuRGF0YVByb3h5LHtwYXJhbU9yZGVyOnVuZGVmaW5lZCxwYXJhbXNBc0hhc2g6dHJ1ZSxkaXJlY3RGbjp1bmRlZmluZWQsZG9SZXF1ZXN0OmZ1bmN0aW9uKGIsYyxhLGUsayxsLG4pe3ZhciBqPVtdLGg9dGhpcy5hcGlbYl18fHRoaXMuZGlyZWN0Rm47c3dpdGNoKGIpe2Nhc2UgRXh0LmRhdGEuQXBpLmFjdGlvbnMuY3JlYXRlOmoucHVzaChhLmpzb25EYXRhKTticmVhaztjYXNlIEV4dC5kYXRhLkFwaS5hY3Rpb25zLnJlYWQ6aWYoaC5kaXJlY3RDZmcubWV0aG9kLmxlbj4wKXtpZih0aGlzLnBhcmFtT3JkZXIpe2Zvcih2YXIgZD0wLGc9dGhpcy5wYXJhbU9yZGVyLmxlbmd0aDtkPGc7ZCsrKXtqLnB1c2goYVt0aGlzLnBhcmFtT3JkZXJbZF1dKX19ZWxzZXtpZih0aGlzLnBhcmFtc0FzSGFzaCl7ai5wdXNoKGEpfX19YnJlYWs7Y2FzZSBFeHQuZGF0YS5BcGkuYWN0aW9ucy51cGRhdGU6ai5wdXNoKGEuanNvbkRhdGEpO2JyZWFrO2Nhc2UgRXh0LmRhdGEuQXBpLmFjdGlvbnMuZGVzdHJveTpqLnB1c2goYS5qc29uRGF0YSk7YnJlYWt9dmFyIG09e3BhcmFtczphfHx7fSxyZXF1ZXN0OntjYWxsYmFjazprLHNjb3BlOmwsYXJnOm59LHJlYWRlcjplfTtqLnB1c2godGhpcy5jcmVhdGVDYWxsYmFjayhiLGMsbSksdGhpcyk7aC5hcHBseSh3aW5kb3csail9LGNyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKGQsYSxiKXt2YXIgYz10aGlzO3JldHVybiBmdW5jdGlvbihlLGcpe2lmKCFnLnN0YXR1cyl7aWYoZD09PUV4dC5kYXRhLkFwaS5hY3Rpb25zLnJlYWQpe2MuZmlyZUV2ZW50KCJsb2FkZXhjZXB0aW9uIixjLGIsZyxudWxsKX1jLmZpcmVFdmVudCgiZXhjZXB0aW9uIixjLCJyZW1vdGUiLGQsYixnLG51bGwpO2IucmVxdWVzdC5jYWxsYmFjay5jYWxsKGIucmVxdWVzdC5zY29wZSxudWxsLGIucmVxdWVzdC5hcmcsZmFsc2UpO3JldHVybn1pZihkPT09RXh0LmRhdGEuQXBpLmFjdGlvbnMucmVhZCl7Yy5vblJlYWQoZCxiLGUsZyl9ZWxzZXtjLm9uV3JpdGUoZCxiLGUsZyxhKX19fSxvblJlYWQ6ZnVuY3Rpb24oZyxlLGEsZCl7dmFyIGI7dHJ5e2I9ZS5yZWFkZXIucmVhZFJlY29yZHMoYSl9Y2F0Y2goYyl7dGhpcy5maXJlRXZlbnQoImxvYWRleGNlcHRpb24iLHRoaXMsZSxkLGMpO3RoaXMuZmlyZUV2ZW50KCJleGNlcHRpb24iLHRoaXMsInJlc3BvbnNlIixnLGUsZCxjKTtlLnJlcXVlc3QuY2FsbGJhY2suY2FsbChlLnJlcXVlc3Quc2NvcGUsbnVsbCxlLnJlcXVlc3QuYXJnLGZhbHNlKTtyZXR1cm59dGhpcy5maXJlRXZlbnQoImxvYWQiLHRoaXMsZCxlLnJlcXVlc3QuYXJnKTtlLnJlcXVlc3QuY2FsbGJhY2suY2FsbChlLnJlcXVlc3Quc2NvcGUsYixlLnJlcXVlc3QuYXJnLHRydWUpfSxvbldyaXRlOmZ1bmN0aW9uKGcsZCxhLGMsYil7dmFyIGU9ZC5yZWFkZXIuZXh0cmFjdERhdGEoZC5yZWFkZXIuZ2V0Um9vdChhKSxmYWxzZSk7dmFyIGg9ZC5yZWFkZXIuZ2V0U3VjY2VzcyhhKTtoPShoIT09ZmFsc2UpO2lmKGgpe3RoaXMuZmlyZUV2ZW50KCJ3cml0ZSIsdGhpcyxnLGUsYyxiLGQucmVxdWVzdC5hcmcpfWVsc2V7dGhpcy5maXJlRXZlbnQoImV4Y2VwdGlvbiIsdGhpcywicmVtb3RlIixnLGQsYSxiKX1kLnJlcXVlc3QuY2FsbGJhY2suY2FsbChkLnJlcXVlc3Quc2NvcGUsZSxjLGgpfX0pO0V4dC5kYXRhLkRpcmVjdFN0b3JlPUV4dC5leHRlbmQoRXh0LmRhdGEuU3RvcmUse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe3ZhciBiPUV4dC5hcHBseSh7fSx7YmF0Y2hUcmFuc2FjdGlvbnM6ZmFsc2V9LGEpO0V4dC5kYXRhLkRpcmVjdFN0b3JlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLEV4dC5hcHBseShiLHtwcm94eTpFeHQuaXNEZWZpbmVkKGIucHJveHkpP2IucHJveHk6bmV3IEV4dC5kYXRhLkRpcmVjdFByb3h5KEV4dC5jb3B5VG8oe30sYiwicGFyYW1PcmRlcixwYXJhbXNBc0hhc2gsZGlyZWN0Rm4sYXBpIikpLHJlYWRlcjooIUV4dC5pc0RlZmluZWQoYi5yZWFkZXIpJiZiLmZpZWxkcyk/bmV3IEV4dC5kYXRhLkpzb25SZWFkZXIoRXh0LmNvcHlUbyh7fSxiLCJ0b3RhbFByb3BlcnR5LHJvb3QsaWRQcm9wZXJ0eSIpLGIuZmllbGRzKTpiLnJlYWRlcn0pKX19KTtFeHQucmVnKCJkaXJlY3RzdG9yZSIsRXh0LmRhdGEuRGlyZWN0U3RvcmUpO0V4dC5EaXJlY3Q9RXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLHtleGNlcHRpb25zOntUUkFOU1BPUlQ6InhociIsUEFSU0U6InBhcnNlIixMT0dJTjoibG9naW4iLFNFUlZFUjoiZXhjZXB0aW9uIn0sY29uc3RydWN0b3I6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50cygiZXZlbnQiLCJleGNlcHRpb24iKTt0aGlzLnRyYW5zYWN0aW9ucz17fTt0aGlzLnByb3ZpZGVycz17fX0sYWRkUHJvdmlkZXI6ZnVuY3Rpb24oZSl7dmFyIGM9YXJndW1lbnRzO2lmKGMubGVuZ3RoPjEpe2Zvcih2YXIgZD0wLGI9Yy5sZW5ndGg7ZDxiO2QrKyl7dGhpcy5hZGRQcm92aWRlcihjW2RdKX1yZXR1cm59aWYoIWUuZXZlbnRzKXtlPW5ldyBFeHQuRGlyZWN0LlBST1ZJREVSU1tlLnR5cGVdKGUpfWUuaWQ9ZS5pZHx8RXh0LmlkKCk7dGhpcy5wcm92aWRlcnNbZS5pZF09ZTtlLm9uKCJkYXRhIix0aGlzLm9uUHJvdmlkZXJEYXRhLHRoaXMpO2Uub24oImV4Y2VwdGlvbiIsdGhpcy5vblByb3ZpZGVyRXhjZXB0aW9uLHRoaXMpO2lmKCFlLmlzQ29ubmVjdGVkKCkpe2UuY29ubmVjdCgpfXJldHVybiBlfSxnZXRQcm92aWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wcm92aWRlcnNbYV19LHJlbW92ZVByb3ZpZGVyOmZ1bmN0aW9uKGIpe3ZhciBhPWIuaWQ/Yjp0aGlzLnByb3ZpZGVyc1tiXTthLnVuKCJkYXRhIix0aGlzLm9uUHJvdmlkZXJEYXRhLHRoaXMpO2EudW4oImV4Y2VwdGlvbiIsdGhpcy5vblByb3ZpZGVyRXhjZXB0aW9uLHRoaXMpO2RlbGV0ZSB0aGlzLnByb3ZpZGVyc1thLmlkXTtyZXR1cm4gYX0sYWRkVHJhbnNhY3Rpb246ZnVuY3Rpb24oYSl7dGhpcy50cmFuc2FjdGlvbnNbYS50aWRdPWE7cmV0dXJuIGF9LHJlbW92ZVRyYW5zYWN0aW9uOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLnRyYW5zYWN0aW9uc1thLnRpZHx8YV07cmV0dXJuIGF9LGdldFRyYW5zYWN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRyYW5zYWN0aW9uc1thLnRpZHx8YV19LG9uUHJvdmlkZXJEYXRhOmZ1bmN0aW9uKGQsYyl7aWYoRXh0LmlzQXJyYXkoYykpe2Zvcih2YXIgYj0wLGE9Yy5sZW5ndGg7YjxhO2IrKyl7dGhpcy5vblByb3ZpZGVyRGF0YShkLGNbYl0pfXJldHVybn1pZihjLm5hbWUmJmMubmFtZSE9ImV2ZW50IiYmYy5uYW1lIT0iZXhjZXB0aW9uIil7dGhpcy5maXJlRXZlbnQoYy5uYW1lLGMpfWVsc2V7aWYoYy50eXBlPT0iZXhjZXB0aW9uIil7dGhpcy5maXJlRXZlbnQoImV4Y2VwdGlvbiIsYyl9fXRoaXMuZmlyZUV2ZW50KCJldmVudCIsYyxkKX0sY3JlYXRlRXZlbnQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IEV4dC5EaXJlY3QuZXZlbnRUeXBlc1thLnR5cGVdKEV4dC5hcHBseShhLGIpKX19KTtFeHQuRGlyZWN0PW5ldyBFeHQuRGlyZWN0KCk7RXh0LkRpcmVjdC5USUQ9MTtFeHQuRGlyZWN0LlBST1ZJREVSUz17fTtFeHQuRGlyZWN0LlRyYW5zYWN0aW9uPWZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO3RoaXMudGlkPSsrRXh0LkRpcmVjdC5USUQ7dGhpcy5yZXRyeUNvdW50PTB9O0V4dC5EaXJlY3QuVHJhbnNhY3Rpb24ucHJvdG90eXBlPXtzZW5kOmZ1bmN0aW9uKCl7dGhpcy5wcm92aWRlci5xdWV1ZVRyYW5zYWN0aW9uKHRoaXMpfSxyZXRyeTpmdW5jdGlvbigpe3RoaXMucmV0cnlDb3VudCsrO3RoaXMuc2VuZCgpfSxnZXRQcm92aWRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3ZpZGVyfX07RXh0LkRpcmVjdC5FdmVudD1mdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKX07RXh0LkRpcmVjdC5FdmVudC5wcm90b3R5cGU9e3N0YXR1czp0cnVlLGdldERhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfX07RXh0LkRpcmVjdC5SZW1vdGluZ0V2ZW50PUV4dC5leHRlbmQoRXh0LkRpcmVjdC5FdmVudCx7dHlwZToicnBjIixnZXRUcmFuc2FjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zYWN0aW9ufHxFeHQuRGlyZWN0LmdldFRyYW5zYWN0aW9uKHRoaXMudGlkKX19KTtFeHQuRGlyZWN0LkV4Y2VwdGlvbkV2ZW50PUV4dC5leHRlbmQoRXh0LkRpcmVjdC5SZW1vdGluZ0V2ZW50LHtzdGF0dXM6ZmFsc2UsdHlwZToiZXhjZXB0aW9uIn0pO0V4dC5EaXJlY3QuZXZlbnRUeXBlcz17cnBjOkV4dC5EaXJlY3QuUmVtb3RpbmdFdmVudCxldmVudDpFeHQuRGlyZWN0LkV2ZW50LGV4Y2VwdGlvbjpFeHQuRGlyZWN0LkV4Y2VwdGlvbkV2ZW50fTtFeHQuZGlyZWN0LlByb3ZpZGVyPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7cHJpb3JpdHk6MSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLmFkZEV2ZW50cygiY29ubmVjdCIsImRpc2Nvbm5lY3QiLCJkYXRhIiwiZXhjZXB0aW9uIik7RXh0LmRpcmVjdC5Qcm92aWRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX0saXNDb25uZWN0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gZmFsc2V9LGNvbm5lY3Q6RXh0LmVtcHR5Rm4sZGlzY29ubmVjdDpFeHQuZW1wdHlGbn0pO0V4dC5kaXJlY3QuSnNvblByb3ZpZGVyPUV4dC5leHRlbmQoRXh0LmRpcmVjdC5Qcm92aWRlcix7cGFyc2VSZXNwb25zZTpmdW5jdGlvbihhKXtpZighRXh0LmlzRW1wdHkoYS5yZXNwb25zZVRleHQpKXtpZih0eXBlb2YgYS5yZXNwb25zZVRleHQ9PSJvYmplY3QiKXtyZXR1cm4gYS5yZXNwb25zZVRleHR9cmV0dXJuIEV4dC5kZWNvZGUoYS5yZXNwb25zZVRleHQpfXJldHVybiBudWxsfSxnZXRFdmVudHM6ZnVuY3Rpb24oail7dmFyIGc9bnVsbDt0cnl7Zz10aGlzLnBhcnNlUmVzcG9uc2Uoail9Y2F0Y2goaCl7dmFyIGQ9bmV3IEV4dC5EaXJlY3QuRXhjZXB0aW9uRXZlbnQoe2RhdGE6aCx4aHI6aixjb2RlOkV4dC5EaXJlY3QuZXhjZXB0aW9ucy5QQVJTRSxtZXNzYWdlOiJFcnJvciBwYXJzaW5nIGpzb24gcmVzcG9uc2U6IFxuXG4gIitnfSk7cmV0dXJuW2RdfXZhciBjPVtdO2lmKEV4dC5pc0FycmF5KGcpKXtmb3IodmFyIGI9MCxhPWcubGVuZ3RoO2I8YTtiKyspe2MucHVzaChFeHQuRGlyZWN0LmNyZWF0ZUV2ZW50KGdbYl0pKX19ZWxzZXtjLnB1c2goRXh0LkRpcmVjdC5jcmVhdGVFdmVudChnKSl9cmV0dXJuIGN9fSk7RXh0LmRpcmVjdC5Qb2xsaW5nUHJvdmlkZXI9RXh0LmV4dGVuZChFeHQuZGlyZWN0Lkpzb25Qcm92aWRlcix7cHJpb3JpdHk6MyxpbnRlcnZhbDozMDAwLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5kaXJlY3QuUG9sbGluZ1Byb3ZpZGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVwb2xsIiwicG9sbCIpfSxpc0Nvbm5lY3RlZDpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMucG9sbFRhc2t9LGNvbm5lY3Q6ZnVuY3Rpb24oKXtpZih0aGlzLnVybCYmIXRoaXMucG9sbFRhc2spe3RoaXMucG9sbFRhc2s9RXh0LlRhc2tNZ3Iuc3RhcnQoe3J1bjpmdW5jdGlvbigpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVwb2xsIix0aGlzKSE9PWZhbHNlKXtpZih0eXBlb2YgdGhpcy51cmw9PSJmdW5jdGlvbiIpe3RoaXMudXJsKHRoaXMuYmFzZVBhcmFtcyl9ZWxzZXtFeHQuQWpheC5yZXF1ZXN0KHt1cmw6dGhpcy51cmwsY2FsbGJhY2s6dGhpcy5vbkRhdGEsc2NvcGU6dGhpcyxwYXJhbXM6dGhpcy5iYXNlUGFyYW1zfSl9fX0saW50ZXJ2YWw6dGhpcy5pbnRlcnZhbCxzY29wZTp0aGlzfSk7dGhpcy5maXJlRXZlbnQoImNvbm5lY3QiLHRoaXMpfWVsc2V7aWYoIXRoaXMudXJsKXt0aHJvdyJFcnJvciBpbml0aWFsaXppbmcgUG9sbGluZ1Byb3ZpZGVyLCBubyB1cmwgY29uZmlndXJlZC4ifX19LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtpZih0aGlzLnBvbGxUYXNrKXtFeHQuVGFza01nci5zdG9wKHRoaXMucG9sbFRhc2spO2RlbGV0ZSB0aGlzLnBvbGxUYXNrO3RoaXMuZmlyZUV2ZW50KCJkaXNjb25uZWN0Iix0aGlzKX19LG9uRGF0YTpmdW5jdGlvbihkLGosaCl7aWYoail7dmFyIGM9dGhpcy5nZXRFdmVudHMoaCk7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt2YXIgZz1jW2JdO3RoaXMuZmlyZUV2ZW50KCJkYXRhIix0aGlzLGcpfX1lbHNle3ZhciBnPW5ldyBFeHQuRGlyZWN0LkV4Y2VwdGlvbkV2ZW50KHtkYXRhOmcsY29kZTpFeHQuRGlyZWN0LmV4Y2VwdGlvbnMuVFJBTlNQT1JULG1lc3NhZ2U6IlVuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIuIix4aHI6aH0pO3RoaXMuZmlyZUV2ZW50KCJkYXRhIix0aGlzLGcpfX19KTtFeHQuRGlyZWN0LlBST1ZJREVSUy5wb2xsaW5nPUV4dC5kaXJlY3QuUG9sbGluZ1Byb3ZpZGVyO0V4dC5kaXJlY3QuUmVtb3RpbmdQcm92aWRlcj1FeHQuZXh0ZW5kKEV4dC5kaXJlY3QuSnNvblByb3ZpZGVyLHtlbmFibGVCdWZmZXI6MTAsbWF4UmV0cmllczoxLHRpbWVvdXQ6dW5kZWZpbmVkLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5kaXJlY3QuUmVtb3RpbmdQcm92aWRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKTt0aGlzLmFkZEV2ZW50cygiYmVmb3JlY2FsbCIsImNhbGwiKTt0aGlzLm5hbWVzcGFjZT0oRXh0LmlzU3RyaW5nKHRoaXMubmFtZXNwYWNlKSk/RXh0Lm5zKHRoaXMubmFtZXNwYWNlKTp0aGlzLm5hbWVzcGFjZXx8d2luZG93O3RoaXMudHJhbnNhY3Rpb25zPXt9O3RoaXMuY2FsbEJ1ZmZlcj1bXX0saW5pdEFQSTpmdW5jdGlvbigpe3ZhciBoPXRoaXMuYWN0aW9ucztmb3IodmFyIGogaW4gaCl7dmFyIGQ9dGhpcy5uYW1lc3BhY2Vbal18fCh0aGlzLm5hbWVzcGFjZVtqXT17fSksZT1oW2pdO2Zvcih2YXIgZz0wLGI9ZS5sZW5ndGg7ZzxiO2crKyl7dmFyIGE9ZVtnXTtkW2EubmFtZV09dGhpcy5jcmVhdGVNZXRob2QoaixhKX19fSxpc0Nvbm5lY3RlZDpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMuY29ubmVjdGVkfSxjb25uZWN0OmZ1bmN0aW9uKCl7aWYodGhpcy51cmwpe3RoaXMuaW5pdEFQSSgpO3RoaXMuY29ubmVjdGVkPXRydWU7dGhpcy5maXJlRXZlbnQoImNvbm5lY3QiLHRoaXMpfWVsc2V7aWYoIXRoaXMudXJsKXt0aHJvdyJFcnJvciBpbml0aWFsaXppbmcgUmVtb3RpbmdQcm92aWRlciwgbm8gdXJsIGNvbmZpZ3VyZWQuIn19fSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7aWYodGhpcy5jb25uZWN0ZWQpe3RoaXMuY29ubmVjdGVkPWZhbHNlO3RoaXMuZmlyZUV2ZW50KCJkaXNjb25uZWN0Iix0aGlzKX19LG9uRGF0YTpmdW5jdGlvbihhLGgsail7aWYoaCl7dmFyIGs9dGhpcy5nZXRFdmVudHMoaik7Zm9yKHZhciBiPTAsYz1rLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1rW2JdLGw9dGhpcy5nZXRUcmFuc2FjdGlvbihkKTt0aGlzLmZpcmVFdmVudCgiZGF0YSIsdGhpcyxkKTtpZihsKXt0aGlzLmRvQ2FsbGJhY2sobCxkLHRydWUpO0V4dC5EaXJlY3QucmVtb3ZlVHJhbnNhY3Rpb24obCl9fX1lbHNle3ZhciBnPVtdLmNvbmNhdChhLnRzKTtmb3IodmFyIGI9MCxjPWcubGVuZ3RoO2I8YztiKyspe3ZhciBsPXRoaXMuZ2V0VHJhbnNhY3Rpb24oZ1tiXSk7aWYobCYmbC5yZXRyeUNvdW50PHRoaXMubWF4UmV0cmllcyl7bC5yZXRyeSgpfWVsc2V7dmFyIGQ9bmV3IEV4dC5EaXJlY3QuRXhjZXB0aW9uRXZlbnQoe2RhdGE6ZCx0cmFuc2FjdGlvbjpsLGNvZGU6RXh0LkRpcmVjdC5leGNlcHRpb25zLlRSQU5TUE9SVCxtZXNzYWdlOiJVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgc2VydmVyLiIseGhyOmp9KTt0aGlzLmZpcmVFdmVudCgiZGF0YSIsdGhpcyxkKTtpZihsKXt0aGlzLmRvQ2FsbGJhY2sobCxkLGZhbHNlKTtFeHQuRGlyZWN0LnJlbW92ZVRyYW5zYWN0aW9uKGwpfX19fX0sZ2V0Q2FsbERhdGE6ZnVuY3Rpb24oYSl7cmV0dXJue2FjdGlvbjphLmFjdGlvbixtZXRob2Q6YS5tZXRob2QsZGF0YTphLmRhdGEsdHlwZToicnBjIix0aWQ6YS50aWR9fSxkb1NlbmQ6ZnVuY3Rpb24oZCl7dmFyIGc9e3VybDp0aGlzLnVybCxjYWxsYmFjazp0aGlzLm9uRGF0YSxzY29wZTp0aGlzLHRzOmQsdGltZW91dDp0aGlzLnRpbWVvdXR9LGI7aWYoRXh0LmlzQXJyYXkoZCkpe2I9W107Zm9yKHZhciBjPTAsYT1kLmxlbmd0aDtjPGE7YysrKXtiLnB1c2godGhpcy5nZXRDYWxsRGF0YShkW2NdKSl9fWVsc2V7Yj10aGlzLmdldENhbGxEYXRhKGQpfWlmKHRoaXMuZW5hYmxlVXJsRW5jb2RlKXt2YXIgZT17fTtlW0V4dC5pc1N0cmluZyh0aGlzLmVuYWJsZVVybEVuY29kZSk/dGhpcy5lbmFibGVVcmxFbmNvZGU6ImRhdGEiXT1FeHQuZW5jb2RlKGIpO2cucGFyYW1zPWV9ZWxzZXtnLmpzb25EYXRhPWJ9RXh0LkFqYXgucmVxdWVzdChnKX0sY29tYmluZUFuZFNlbmQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNhbGxCdWZmZXIubGVuZ3RoO2lmKGE+MCl7dGhpcy5kb1NlbmQoYT09MT90aGlzLmNhbGxCdWZmZXJbMF06dGhpcy5jYWxsQnVmZmVyKTt0aGlzLmNhbGxCdWZmZXI9W119fSxxdWV1ZVRyYW5zYWN0aW9uOmZ1bmN0aW9uKGEpe2lmKGEuZm9ybSl7dGhpcy5wcm9jZXNzRm9ybShhKTtyZXR1cm59dGhpcy5jYWxsQnVmZmVyLnB1c2goYSk7aWYodGhpcy5lbmFibGVCdWZmZXIpe2lmKCF0aGlzLmNhbGxUYXNrKXt0aGlzLmNhbGxUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayh0aGlzLmNvbWJpbmVBbmRTZW5kLHRoaXMpfXRoaXMuY2FsbFRhc2suZGVsYXkoRXh0LmlzTnVtYmVyKHRoaXMuZW5hYmxlQnVmZmVyKT90aGlzLmVuYWJsZUJ1ZmZlcjoxMCl9ZWxzZXt0aGlzLmNvbWJpbmVBbmRTZW5kKCl9fSxkb0NhbGw6ZnVuY3Rpb24oaSxhLGIpe3ZhciBoPW51bGwsZT1iW2EubGVuXSxnPWJbYS5sZW4rMV07aWYoYS5sZW4hPT0wKXtoPWIuc2xpY2UoMCxhLmxlbil9dmFyIGQ9bmV3IEV4dC5EaXJlY3QuVHJhbnNhY3Rpb24oe3Byb3ZpZGVyOnRoaXMsYXJnczpiLGFjdGlvbjppLG1ldGhvZDphLm5hbWUsZGF0YTpoLGNiOmcmJkV4dC5pc0Z1bmN0aW9uKGUpP2UuY3JlYXRlRGVsZWdhdGUoZyk6ZX0pO2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVjYWxsIix0aGlzLGQsYSkhPT1mYWxzZSl7RXh0LkRpcmVjdC5hZGRUcmFuc2FjdGlvbihkKTt0aGlzLnF1ZXVlVHJhbnNhY3Rpb24oZCk7dGhpcy5maXJlRXZlbnQoImNhbGwiLHRoaXMsZCxhKX19LGRvRm9ybTpmdW5jdGlvbihqLGIsZyxpLGUpe3ZhciBkPW5ldyBFeHQuRGlyZWN0LlRyYW5zYWN0aW9uKHtwcm92aWRlcjp0aGlzLGFjdGlvbjpqLG1ldGhvZDpiLm5hbWUsYXJnczpbZyxpLGVdLGNiOmUmJkV4dC5pc0Z1bmN0aW9uKGkpP2kuY3JlYXRlRGVsZWdhdGUoZSk6aSxpc0Zvcm06dHJ1ZX0pO2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVjYWxsIix0aGlzLGQsYikhPT1mYWxzZSl7RXh0LkRpcmVjdC5hZGRUcmFuc2FjdGlvbihkKTt2YXIgYT1TdHJpbmcoZy5nZXRBdHRyaWJ1dGUoImVuY3R5cGUiKSkudG9Mb3dlckNhc2UoKT09Im11bHRpcGFydC9mb3JtLWRhdGEiLGg9e2V4dFRJRDpkLnRpZCxleHRBY3Rpb246aixleHRNZXRob2Q6Yi5uYW1lLGV4dFR5cGU6InJwYyIsZXh0VXBsb2FkOlN0cmluZyhhKX07RXh0LmFwcGx5KGQse2Zvcm06RXh0LmdldERvbShnKSxpc1VwbG9hZDphLHBhcmFtczppJiZFeHQuaXNPYmplY3QoaS5wYXJhbXMpP0V4dC5hcHBseShoLGkucGFyYW1zKTpofSk7dGhpcy5maXJlRXZlbnQoImNhbGwiLHRoaXMsZCxiKTt0aGlzLnByb2Nlc3NGb3JtKGQpfX0scHJvY2Vzc0Zvcm06ZnVuY3Rpb24oYSl7RXh0LkFqYXgucmVxdWVzdCh7dXJsOnRoaXMudXJsLHBhcmFtczphLnBhcmFtcyxjYWxsYmFjazp0aGlzLm9uRGF0YSxzY29wZTp0aGlzLGZvcm06YS5mb3JtLGlzVXBsb2FkOmEuaXNVcGxvYWQsdHM6YX0pfSxjcmVhdGVNZXRob2Q6ZnVuY3Rpb24oZCxhKXt2YXIgYjtpZighYS5mb3JtSGFuZGxlcil7Yj1mdW5jdGlvbigpe3RoaXMuZG9DYWxsKGQsYSxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCkpfS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKX1lbHNle2I9ZnVuY3Rpb24oZSxnLGMpe3RoaXMuZG9Gb3JtKGQsYSxlLGcsYyl9LmNyZWF0ZURlbGVnYXRlKHRoaXMpfWIuZGlyZWN0Q2ZnPXthY3Rpb246ZCxtZXRob2Q6YX07cmV0dXJuIGJ9LGdldFRyYW5zYWN0aW9uOmZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLnRpZD9FeHQuRGlyZWN0LmdldFRyYW5zYWN0aW9uKGEudGlkKTpudWxsfSxkb0NhbGxiYWNrOmZ1bmN0aW9uKGMsZyl7dmFyIGQ9Zy5zdGF0dXM/InN1Y2Nlc3MiOiJmYWlsdXJlIjtpZihjJiZjLmNiKXt2YXIgYj1jLmNiLGE9RXh0LmlzRGVmaW5lZChnLnJlc3VsdCk/Zy5yZXN1bHQ6Zy5kYXRhO2lmKEV4dC5pc0Z1bmN0aW9uKGIpKXtiKGEsZyl9ZWxzZXtFeHQuY2FsbGJhY2soYltkXSxiLnNjb3BlLFthLGddKTtFeHQuY2FsbGJhY2soYi5jYWxsYmFjayxiLnNjb3BlLFthLGddKX19fX0pO0V4dC5EaXJlY3QuUFJPVklERVJTLnJlbW90aW5nPUV4dC5kaXJlY3QuUmVtb3RpbmdQcm92aWRlcjtFeHQuUmVzaXphYmxlPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oZCxlKXt0aGlzLmVsPUV4dC5nZXQoZCk7aWYoZSYmZS53cmFwKXtlLnJlc2l6ZUNoaWxkPXRoaXMuZWw7dGhpcy5lbD10aGlzLmVsLndyYXAodHlwZW9mIGUud3JhcD09Im9iamVjdCI/ZS53cmFwOntjbHM6InhyZXNpemFibGUtd3JhcCJ9KTt0aGlzLmVsLmlkPXRoaXMuZWwuZG9tLmlkPWUucmVzaXplQ2hpbGQuaWQrIi1yendyYXAiO3RoaXMuZWwuc2V0U3R5bGUoIm92ZXJmbG93IiwiaGlkZGVuIik7dGhpcy5lbC5zZXRQb3NpdGlvbmluZyhlLnJlc2l6ZUNoaWxkLmdldFBvc2l0aW9uaW5nKCkpO2UucmVzaXplQ2hpbGQuY2xlYXJQb3NpdGlvbmluZygpO2lmKCFlLndpZHRofHwhZS5oZWlnaHQpe3ZhciBnPWUucmVzaXplQ2hpbGQuZ2V0U2l6ZSgpO3RoaXMuZWwuc2V0U2l6ZShnLndpZHRoLGcuaGVpZ2h0KX1pZihlLnBpbm5lZCYmIWUuYWRqdXN0bWVudHMpe2UuYWRqdXN0bWVudHM9ImF1dG8ifX10aGlzLnByb3h5PXRoaXMuZWwuY3JlYXRlUHJveHkoe3RhZzoiZGl2IixjbHM6IngtcmVzaXphYmxlLXByb3h5IixpZDp0aGlzLmVsLmlkKyItcnpwcm94eSJ9LEV4dC5nZXRCb2R5KCkpO3RoaXMucHJveHkudW5zZWxlY3RhYmxlKCk7dGhpcy5wcm94eS5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTtFeHQuYXBwbHkodGhpcyxlKTtpZih0aGlzLnBpbm5lZCl7dGhpcy5kaXNhYmxlVHJhY2tPdmVyPXRydWU7dGhpcy5lbC5hZGRDbGFzcygieC1yZXNpemFibGUtcGlubmVkIil9dmFyIGs9dGhpcy5lbC5nZXRTdHlsZSgicG9zaXRpb24iKTtpZihrIT0iYWJzb2x1dGUiJiZrIT0iZml4ZWQiKXt0aGlzLmVsLnNldFN0eWxlKCJwb3NpdGlvbiIsInJlbGF0aXZlIil9aWYoIXRoaXMuaGFuZGxlcyl7dGhpcy5oYW5kbGVzPSJzLGUsc2UiO2lmKHRoaXMubXVsdGlEaXJlY3Rpb25hbCl7dGhpcy5oYW5kbGVzKz0iLG4sdyJ9fWlmKHRoaXMuaGFuZGxlcz09ImFsbCIpe3RoaXMuaGFuZGxlcz0ibiBzIGUgdyBuZSBudyBzZSBzdyJ9dmFyIG89dGhpcy5oYW5kbGVzLnNwbGl0KC9ccyo/Wyw7XVxzKj98IC8pO3ZhciBjPUV4dC5SZXNpemFibGUucG9zaXRpb25zO2Zvcih2YXIgaj0wLGw9by5sZW5ndGg7ajxsO2orKyl7aWYob1tqXSYmY1tvW2pdXSl7dmFyIG49Y1tvW2pdXTt0aGlzW25dPW5ldyBFeHQuUmVzaXphYmxlLkhhbmRsZSh0aGlzLG4sdGhpcy5kaXNhYmxlVHJhY2tPdmVyLHRoaXMudHJhbnNwYXJlbnQsdGhpcy5oYW5kbGVDbHMpfX10aGlzLmNvcm5lcj10aGlzLnNvdXRoZWFzdDtpZih0aGlzLmhhbmRsZXMuaW5kZXhPZigibiIpIT0tMXx8dGhpcy5oYW5kbGVzLmluZGV4T2YoInciKSE9LTEpe3RoaXMudXBkYXRlQm94PXRydWV9dGhpcy5hY3RpdmVIYW5kbGU9bnVsbDtpZih0aGlzLnJlc2l6ZUNoaWxkKXtpZih0eXBlb2YgdGhpcy5yZXNpemVDaGlsZD09ImJvb2xlYW4iKXt0aGlzLnJlc2l6ZUNoaWxkPUV4dC5nZXQodGhpcy5lbC5kb20uZmlyc3RDaGlsZCx0cnVlKX1lbHNle3RoaXMucmVzaXplQ2hpbGQ9RXh0LmdldCh0aGlzLnJlc2l6ZUNoaWxkLHRydWUpfX1pZih0aGlzLmFkanVzdG1lbnRzPT0iYXV0byIpe3ZhciBiPXRoaXMucmVzaXplQ2hpbGQ7dmFyIG09dGhpcy53ZXN0LGg9dGhpcy5lYXN0LGE9dGhpcy5ub3J0aCxvPXRoaXMuc291dGg7aWYoYiYmKG18fGEpKXtiLnBvc2l0aW9uKCJyZWxhdGl2ZSIpO2Iuc2V0TGVmdChtP20uZWwuZ2V0V2lkdGgoKTowKTtiLnNldFRvcChhP2EuZWwuZ2V0SGVpZ2h0KCk6MCl9dGhpcy5hZGp1c3RtZW50cz1bKGg/LWguZWwuZ2V0V2lkdGgoKTowKSsobT8tbS5lbC5nZXRXaWR0aCgpOjApLChhPy1hLmVsLmdldEhlaWdodCgpOjApKyhvPy1vLmVsLmdldEhlaWdodCgpOjApLTFdfWlmKHRoaXMuZHJhZ2dhYmxlKXt0aGlzLmRkPXRoaXMuZHluYW1pYz90aGlzLmVsLmluaXRERChudWxsKTp0aGlzLmVsLmluaXRERFByb3h5KG51bGwse2RyYWdFbElkOnRoaXMucHJveHkuaWR9KTt0aGlzLmRkLnNldEhhbmRsZUVsSWQodGhpcy5yZXNpemVDaGlsZD90aGlzLnJlc2l6ZUNoaWxkLmlkOnRoaXMuZWwuaWQpO2lmKHRoaXMuY29uc3RyYWluVG8pe3RoaXMuZGQuY29uc3RyYWluVG8odGhpcy5jb25zdHJhaW5Ubyl9fXRoaXMuYWRkRXZlbnRzKCJiZWZvcmVyZXNpemUiLCJyZXNpemUiKTtpZih0aGlzLndpZHRoIT09bnVsbCYmdGhpcy5oZWlnaHQhPT1udWxsKXt0aGlzLnJlc2l6ZVRvKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpfWVsc2V7dGhpcy51cGRhdGVDaGlsZFNpemUoKX1pZihFeHQuaXNJRSl7dGhpcy5lbC5kb20uc3R5bGUuem9vbT0xfUV4dC5SZXNpemFibGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfSxhZGp1c3RtZW50czpbMCwwXSxhbmltYXRlOmZhbHNlLGRpc2FibGVUcmFja092ZXI6ZmFsc2UsZHJhZ2dhYmxlOmZhbHNlLGR1cmF0aW9uOjAuMzUsZHluYW1pYzpmYWxzZSxlYXNpbmc6ImVhc2VPdXRTdHJvbmciLGVuYWJsZWQ6dHJ1ZSxoYW5kbGVzOmZhbHNlLG11bHRpRGlyZWN0aW9uYWw6ZmFsc2UsaGVpZ2h0Om51bGwsd2lkdGg6bnVsbCxoZWlnaHRJbmNyZW1lbnQ6MCx3aWR0aEluY3JlbWVudDowLG1pbkhlaWdodDo1LG1pbldpZHRoOjUsbWF4SGVpZ2h0OjEwMDAwLG1heFdpZHRoOjEwMDAwLG1pblg6MCxtaW5ZOjAscGlubmVkOmZhbHNlLHByZXNlcnZlUmF0aW86ZmFsc2UscmVzaXplQ2hpbGQ6ZmFsc2UsdHJhbnNwYXJlbnQ6ZmFsc2UscmVzaXplVG86ZnVuY3Rpb24oYixhKXt0aGlzLmVsLnNldFNpemUoYixhKTt0aGlzLnVwZGF0ZUNoaWxkU2l6ZSgpO3RoaXMuZmlyZUV2ZW50KCJyZXNpemUiLHRoaXMsYixhLG51bGwpfSxzdGFydFNpemluZzpmdW5jdGlvbihjLGIpe3RoaXMuZmlyZUV2ZW50KCJiZWZvcmVyZXNpemUiLHRoaXMsYyk7aWYodGhpcy5lbmFibGVkKXtpZighdGhpcy5vdmVybGF5KXt0aGlzLm92ZXJsYXk9dGhpcy5lbC5jcmVhdGVQcm94eSh7dGFnOiJkaXYiLGNsczoieC1yZXNpemFibGUtb3ZlcmxheSIsaHRtbDoiJiMxNjA7In0sRXh0LmdldEJvZHkoKSk7dGhpcy5vdmVybGF5LnVuc2VsZWN0YWJsZSgpO3RoaXMub3ZlcmxheS5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTt0aGlzLm92ZXJsYXkub24oe3Njb3BlOnRoaXMsbW91c2Vtb3ZlOnRoaXMub25Nb3VzZU1vdmUsbW91c2V1cDp0aGlzLm9uTW91c2VVcH0pfXRoaXMub3ZlcmxheS5zZXRTdHlsZSgiY3Vyc29yIixiLmVsLmdldFN0eWxlKCJjdXJzb3IiKSk7dGhpcy5yZXNpemluZz10cnVlO3RoaXMuc3RhcnRCb3g9dGhpcy5lbC5nZXRCb3goKTt0aGlzLnN0YXJ0UG9pbnQ9Yy5nZXRYWSgpO3RoaXMub2Zmc2V0cz1bKHRoaXMuc3RhcnRCb3gueCt0aGlzLnN0YXJ0Qm94LndpZHRoKS10aGlzLnN0YXJ0UG9pbnRbMF0sKHRoaXMuc3RhcnRCb3gueSt0aGlzLnN0YXJ0Qm94LmhlaWdodCktdGhpcy5zdGFydFBvaW50WzFdXTt0aGlzLm92ZXJsYXkuc2V0U2l6ZShFeHQubGliLkRvbS5nZXRWaWV3V2lkdGgodHJ1ZSksRXh0LmxpYi5Eb20uZ2V0Vmlld0hlaWdodCh0cnVlKSk7dGhpcy5vdmVybGF5LnNob3coKTtpZih0aGlzLmNvbnN0cmFpblRvKXt2YXIgYT1FeHQuZ2V0KHRoaXMuY29uc3RyYWluVG8pO3RoaXMucmVzaXplUmVnaW9uPWEuZ2V0UmVnaW9uKCkuYWRqdXN0KGEuZ2V0RnJhbWVXaWR0aCgidCIpLGEuZ2V0RnJhbWVXaWR0aCgibCIpLC1hLmdldEZyYW1lV2lkdGgoImIiKSwtYS5nZXRGcmFtZVdpZHRoKCJyIikpfXRoaXMucHJveHkuc2V0U3R5bGUoInZpc2liaWxpdHkiLCJoaWRkZW4iKTt0aGlzLnByb3h5LnNob3coKTt0aGlzLnByb3h5LnNldEJveCh0aGlzLnN0YXJ0Qm94KTtpZighdGhpcy5keW5hbWljKXt0aGlzLnByb3h5LnNldFN0eWxlKCJ2aXNpYmlsaXR5IiwidmlzaWJsZSIpfX19LG9uTW91c2VEb3duOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5lbmFibGVkKXtiLnN0b3BFdmVudCgpO3RoaXMuYWN0aXZlSGFuZGxlPWE7dGhpcy5zdGFydFNpemluZyhiLGEpfX0sb25Nb3VzZVVwOmZ1bmN0aW9uKGIpe3RoaXMuYWN0aXZlSGFuZGxlPW51bGw7dmFyIGE9dGhpcy5yZXNpemVFbGVtZW50KCk7dGhpcy5yZXNpemluZz1mYWxzZTt0aGlzLmhhbmRsZU91dCgpO3RoaXMub3ZlcmxheS5oaWRlKCk7dGhpcy5wcm94eS5oaWRlKCk7dGhpcy5maXJlRXZlbnQoInJlc2l6ZSIsdGhpcyxhLndpZHRoLGEuaGVpZ2h0LGIpfSx1cGRhdGVDaGlsZFNpemU6ZnVuY3Rpb24oKXtpZih0aGlzLnJlc2l6ZUNoaWxkKXt2YXIgZD10aGlzLmVsO3ZhciBlPXRoaXMucmVzaXplQ2hpbGQ7dmFyIGM9dGhpcy5hZGp1c3RtZW50cztpZihkLmRvbS5vZmZzZXRXaWR0aCl7dmFyIGE9ZC5nZXRTaXplKHRydWUpO2Uuc2V0U2l6ZShhLndpZHRoK2NbMF0sYS5oZWlnaHQrY1sxXSl9aWYoRXh0LmlzSUUpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihkLmRvbS5vZmZzZXRXaWR0aCl7dmFyIGc9ZC5nZXRTaXplKHRydWUpO2Uuc2V0U2l6ZShnLndpZHRoK2NbMF0sZy5oZWlnaHQrY1sxXSl9fSwxMCl9fX0sc25hcDpmdW5jdGlvbihjLGUsYil7aWYoIWV8fCFjKXtyZXR1cm4gY312YXIgZD1jO3ZhciBhPWMlZTtpZihhPjApe2lmKGE+KGUvMikpe2Q9YysoZS1hKX1lbHNle2Q9Yy1hfX1yZXR1cm4gTWF0aC5tYXgoYixkKX0scmVzaXplRWxlbWVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucHJveHkuZ2V0Qm94KCk7aWYodGhpcy51cGRhdGVCb3gpe3RoaXMuZWwuc2V0Qm94KGEsZmFsc2UsdGhpcy5hbmltYXRlLHRoaXMuZHVyYXRpb24sbnVsbCx0aGlzLmVhc2luZyl9ZWxzZXt0aGlzLmVsLnNldFNpemUoYS53aWR0aCxhLmhlaWdodCx0aGlzLmFuaW1hdGUsdGhpcy5kdXJhdGlvbixudWxsLHRoaXMuZWFzaW5nKX10aGlzLnVwZGF0ZUNoaWxkU2l6ZSgpO2lmKCF0aGlzLmR5bmFtaWMpe3RoaXMucHJveHkuaGlkZSgpfWlmKHRoaXMuZHJhZ2dhYmxlJiZ0aGlzLmNvbnN0cmFpblRvKXt0aGlzLmRkLnJlc2V0Q29uc3RyYWludHMoKTt0aGlzLmRkLmNvbnN0cmFpblRvKHRoaXMuY29uc3RyYWluVG8pfXJldHVybiBhfSxjb25zdHJhaW46ZnVuY3Rpb24oYixjLGEsZCl7aWYoYi1jPGEpe2M9Yi1hfWVsc2V7aWYoYi1jPmQpe2M9Yi1kfX1yZXR1cm4gY30sb25Nb3VzZU1vdmU6ZnVuY3Rpb24oeil7aWYodGhpcy5lbmFibGVkJiZ0aGlzLmFjdGl2ZUhhbmRsZSl7dHJ5e2lmKHRoaXMucmVzaXplUmVnaW9uJiYhdGhpcy5yZXNpemVSZWdpb24uY29udGFpbnMoei5nZXRQb2ludCgpKSl7cmV0dXJufXZhciB0PXRoaXMuY3VyU2l6ZXx8dGhpcy5zdGFydEJveCxsPXRoaXMuc3RhcnRCb3gueCxrPXRoaXMuc3RhcnRCb3gueSxjPWwsYj1rLG09dC53aWR0aCx1PXQuaGVpZ2h0LGQ9bSxvPXUsbj10aGlzLm1pbldpZHRoLEE9dGhpcy5taW5IZWlnaHQscz10aGlzLm1heFdpZHRoLEQ9dGhpcy5tYXhIZWlnaHQsaT10aGlzLndpZHRoSW5jcmVtZW50LGE9dGhpcy5oZWlnaHRJbmNyZW1lbnQsQj16LmdldFhZKCkscj0tKHRoaXMuc3RhcnRQb2ludFswXS1NYXRoLm1heCh0aGlzLm1pblgsQlswXSkpLHA9LSh0aGlzLnN0YXJ0UG9pbnRbMV0tTWF0aC5tYXgodGhpcy5taW5ZLEJbMV0pKSxqPXRoaXMuYWN0aXZlSGFuZGxlLnBvc2l0aW9uLEUsZztzd2l0Y2goail7Y2FzZSJlYXN0IjptKz1yO209TWF0aC5taW4oTWF0aC5tYXgobixtKSxzKTticmVhaztjYXNlInNvdXRoIjp1Kz1wO3U9TWF0aC5taW4oTWF0aC5tYXgoQSx1KSxEKTticmVhaztjYXNlInNvdXRoZWFzdCI6bSs9cjt1Kz1wO209TWF0aC5taW4oTWF0aC5tYXgobixtKSxzKTt1PU1hdGgubWluKE1hdGgubWF4KEEsdSksRCk7YnJlYWs7Y2FzZSJub3J0aCI6cD10aGlzLmNvbnN0cmFpbih1LHAsQSxEKTtrKz1wO3UtPXA7YnJlYWs7Y2FzZSJ3ZXN0IjpyPXRoaXMuY29uc3RyYWluKG0scixuLHMpO2wrPXI7bS09cjticmVhaztjYXNlIm5vcnRoZWFzdCI6bSs9cjttPU1hdGgubWluKE1hdGgubWF4KG4sbSkscyk7cD10aGlzLmNvbnN0cmFpbih1LHAsQSxEKTtrKz1wO3UtPXA7YnJlYWs7Y2FzZSJub3J0aHdlc3QiOnI9dGhpcy5jb25zdHJhaW4obSxyLG4scyk7cD10aGlzLmNvbnN0cmFpbih1LHAsQSxEKTtrKz1wO3UtPXA7bCs9cjttLT1yO2JyZWFrO2Nhc2Uic291dGh3ZXN0IjpyPXRoaXMuY29uc3RyYWluKG0scixuLHMpO3UrPXA7dT1NYXRoLm1pbihNYXRoLm1heChBLHUpLEQpO2wrPXI7bS09cjticmVha312YXIgcT10aGlzLnNuYXAobSxpLG4pO3ZhciBDPXRoaXMuc25hcCh1LGEsQSk7aWYocSE9bXx8QyE9dSl7c3dpdGNoKGope2Nhc2Uibm9ydGhlYXN0IjprLT1DLXU7YnJlYWs7Y2FzZSJub3J0aCI6ay09Qy11O2JyZWFrO2Nhc2Uic291dGh3ZXN0IjpsLT1xLW07YnJlYWs7Y2FzZSJ3ZXN0IjpsLT1xLW07YnJlYWs7Y2FzZSJub3J0aHdlc3QiOmwtPXEtbTtrLT1DLXU7YnJlYWt9bT1xO3U9Q31pZih0aGlzLnByZXNlcnZlUmF0aW8pe3N3aXRjaChqKXtjYXNlInNvdXRoZWFzdCI6Y2FzZSJlYXN0Ijp1PW8qKG0vZCk7dT1NYXRoLm1pbihNYXRoLm1heChBLHUpLEQpO209ZCoodS9vKTticmVhaztjYXNlInNvdXRoIjptPWQqKHUvbyk7bT1NYXRoLm1pbihNYXRoLm1heChuLG0pLHMpO3U9byoobS9kKTticmVhaztjYXNlIm5vcnRoZWFzdCI6bT1kKih1L28pO209TWF0aC5taW4oTWF0aC5tYXgobixtKSxzKTt1PW8qKG0vZCk7YnJlYWs7Y2FzZSJub3J0aCI6RT1tO209ZCoodS9vKTttPU1hdGgubWluKE1hdGgubWF4KG4sbSkscyk7dT1vKihtL2QpO2wrPShFLW0pLzI7YnJlYWs7Y2FzZSJzb3V0aHdlc3QiOnU9byoobS9kKTt1PU1hdGgubWluKE1hdGgubWF4KEEsdSksRCk7RT1tO209ZCoodS9vKTtsKz1FLW07YnJlYWs7Y2FzZSJ3ZXN0IjpnPXU7dT1vKihtL2QpO3U9TWF0aC5taW4oTWF0aC5tYXgoQSx1KSxEKTtrKz0oZy11KS8yO0U9bTttPWQqKHUvbyk7bCs9RS1tO2JyZWFrO2Nhc2Uibm9ydGh3ZXN0IjpFPW07Zz11O3U9byoobS9kKTt1PU1hdGgubWluKE1hdGgubWF4KEEsdSksRCk7bT1kKih1L28pO2srPWctdTtsKz1FLW07YnJlYWt9fXRoaXMucHJveHkuc2V0Qm91bmRzKGwsayxtLHUpO2lmKHRoaXMuZHluYW1pYyl7dGhpcy5yZXNpemVFbGVtZW50KCl9fWNhdGNoKHYpe319fSxoYW5kbGVPdmVyOmZ1bmN0aW9uKCl7aWYodGhpcy5lbmFibGVkKXt0aGlzLmVsLmFkZENsYXNzKCJ4LXJlc2l6YWJsZS1vdmVyIil9fSxoYW5kbGVPdXQ6ZnVuY3Rpb24oKXtpZighdGhpcy5yZXNpemluZyl7dGhpcy5lbC5yZW1vdmVDbGFzcygieC1yZXNpemFibGUtb3ZlciIpfX0sZ2V0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sZ2V0UmVzaXplQ2hpbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXNpemVDaGlsZH0sZGVzdHJveTpmdW5jdGlvbihiKXtFeHQuZGVzdHJveSh0aGlzLmRkLHRoaXMub3ZlcmxheSx0aGlzLnByb3h5KTt0aGlzLm92ZXJsYXk9bnVsbDt0aGlzLnByb3h5PW51bGw7dmFyIGM9RXh0LlJlc2l6YWJsZS5wb3NpdGlvbnM7Zm9yKHZhciBhIGluIGMpe2lmKHR5cGVvZiBjW2FdIT0iZnVuY3Rpb24iJiZ0aGlzW2NbYV1dKXt0aGlzW2NbYV1dLmRlc3Ryb3koKX19aWYoYil7dGhpcy5lbC51cGRhdGUoIiIpO0V4dC5kZXN0cm95KHRoaXMuZWwpO3RoaXMuZWw9bnVsbH10aGlzLnB1cmdlTGlzdGVuZXJzKCl9LHN5bmNIYW5kbGVIZWlnaHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsLmdldEhlaWdodCh0cnVlKTtpZih0aGlzLndlc3Qpe3RoaXMud2VzdC5lbC5zZXRIZWlnaHQoYSl9aWYodGhpcy5lYXN0KXt0aGlzLmVhc3QuZWwuc2V0SGVpZ2h0KGEpfX19KTtFeHQuUmVzaXphYmxlLnBvc2l0aW9ucz17bjoibm9ydGgiLHM6InNvdXRoIixlOiJlYXN0Iix3OiJ3ZXN0IixzZToic291dGhlYXN0Iixzdzoic291dGh3ZXN0Iixudzoibm9ydGh3ZXN0IixuZToibm9ydGhlYXN0In07RXh0LlJlc2l6YWJsZS5IYW5kbGU9RXh0LmV4dGVuZChPYmplY3Qse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGQsZyxjLGUsYSl7aWYoIXRoaXMudHBsKXt2YXIgYj1FeHQuRG9tSGVscGVyLmNyZWF0ZVRlbXBsYXRlKHt0YWc6ImRpdiIsY2xzOiJ4LXJlc2l6YWJsZS1oYW5kbGUgeC1yZXNpemFibGUtaGFuZGxlLXswfSJ9KTtiLmNvbXBpbGUoKTtFeHQuUmVzaXphYmxlLkhhbmRsZS5wcm90b3R5cGUudHBsPWJ9dGhpcy5wb3NpdGlvbj1nO3RoaXMucno9ZDt0aGlzLmVsPXRoaXMudHBsLmFwcGVuZChkLmVsLmRvbSxbdGhpcy5wb3NpdGlvbl0sdHJ1ZSk7dGhpcy5lbC51bnNlbGVjdGFibGUoKTtpZihlKXt0aGlzLmVsLnNldE9wYWNpdHkoMCl9aWYoIUV4dC5pc0VtcHR5KGEpKXt0aGlzLmVsLmFkZENsYXNzKGEpfXRoaXMuZWwub24oIm1vdXNlZG93biIsdGhpcy5vbk1vdXNlRG93bix0aGlzKTtpZighYyl7dGhpcy5lbC5vbih7c2NvcGU6dGhpcyxtb3VzZW92ZXI6dGhpcy5vbk1vdXNlT3Zlcixtb3VzZW91dDp0aGlzLm9uTW91c2VPdXR9KX19LGFmdGVyUmVzaXplOmZ1bmN0aW9uKGEpe30sb25Nb3VzZURvd246ZnVuY3Rpb24oYSl7dGhpcy5yei5vbk1vdXNlRG93bih0aGlzLGEpfSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihhKXt0aGlzLnJ6LmhhbmRsZU92ZXIodGhpcyxhKX0sb25Nb3VzZU91dDpmdW5jdGlvbihhKXt0aGlzLnJ6LmhhbmRsZU91dCh0aGlzLGEpfSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5lbCk7dGhpcy5lbD1udWxsfX0pO0V4dC5XaW5kb3c9RXh0LmV4dGVuZChFeHQuUGFuZWwse2Jhc2VDbHM6Ingtd2luZG93IixyZXNpemFibGU6dHJ1ZSxkcmFnZ2FibGU6dHJ1ZSxjbG9zYWJsZTp0cnVlLGNsb3NlQWN0aW9uOiJjbG9zZSIsY29uc3RyYWluOmZhbHNlLGNvbnN0cmFpbkhlYWRlcjpmYWxzZSxwbGFpbjpmYWxzZSxtaW5pbWl6YWJsZTpmYWxzZSxtYXhpbWl6YWJsZTpmYWxzZSxtaW5IZWlnaHQ6MTAwLG1pbldpZHRoOjIwMCxleHBhbmRPblNob3c6dHJ1ZSxzaG93QW5pbUR1cmF0aW9uOjAuMjUsaGlkZUFuaW1EdXJhdGlvbjowLjI1LGNvbGxhcHNpYmxlOmZhbHNlLGluaXRIaWRkZW46dW5kZWZpbmVkLGhpZGRlbjp0cnVlLGVsZW1lbnRzOiJoZWFkZXIsYm9keSIsZnJhbWU6dHJ1ZSxmbG9hdGluZzp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt0aGlzLmluaXRUb29scygpO0V4dC5XaW5kb3cuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoInJlc2l6ZSIsIm1heGltaXplIiwibWluaW1pemUiLCJyZXN0b3JlIik7aWYoRXh0LmlzRGVmaW5lZCh0aGlzLmluaXRIaWRkZW4pKXt0aGlzLmhpZGRlbj10aGlzLmluaXRIaWRkZW59aWYodGhpcy5oaWRkZW49PT1mYWxzZSl7dGhpcy5oaWRkZW49dHJ1ZTt0aGlzLnNob3coKX19LGdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5hcHBseShFeHQuV2luZG93LnN1cGVyY2xhc3MuZ2V0U3RhdGUuY2FsbCh0aGlzKXx8e30sdGhpcy5nZXRCb3godHJ1ZSkpfSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe0V4dC5XaW5kb3cuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTtpZih0aGlzLnBsYWluKXt0aGlzLmVsLmFkZENsYXNzKCJ4LXdpbmRvdy1wbGFpbiIpfXRoaXMuZm9jdXNFbD10aGlzLmVsLmNyZWF0ZUNoaWxkKHt0YWc6ImEiLGhyZWY6IiMiLGNsczoieC1kbGctZm9jdXMiLHRhYkluZGV4OiItMSIsaHRtbDoiJiMxNjA7In0pO3RoaXMuZm9jdXNFbC5zd2FsbG93RXZlbnQoImNsaWNrIix0cnVlKTt0aGlzLnByb3h5PXRoaXMuZWwuY3JlYXRlUHJveHkoIngtd2luZG93LXByb3h5Iik7dGhpcy5wcm94eS5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTtpZih0aGlzLm1vZGFsKXt0aGlzLm1hc2s9dGhpcy5jb250YWluZXIuY3JlYXRlQ2hpbGQoe2NsczoiZXh0LWVsLW1hc2sifSx0aGlzLmVsLmRvbSk7dGhpcy5tYXNrLmVuYWJsZURpc3BsYXlNb2RlKCJibG9jayIpO3RoaXMubWFzay5oaWRlKCk7dGhpcy5tb24odGhpcy5tYXNrLCJjbGljayIsdGhpcy5mb2N1cyx0aGlzKX1pZih0aGlzLm1heGltaXphYmxlKXt0aGlzLm1vbih0aGlzLmhlYWRlciwiZGJsY2xpY2siLHRoaXMudG9nZ2xlTWF4aW1pemUsdGhpcyl9fSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7RXh0LldpbmRvdy5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTtpZih0aGlzLmFuaW1hdGVUYXJnZXQpe3RoaXMuc2V0QW5pbWF0ZVRhcmdldCh0aGlzLmFuaW1hdGVUYXJnZXQpfWlmKHRoaXMucmVzaXphYmxlKXt0aGlzLnJlc2l6ZXI9bmV3IEV4dC5SZXNpemFibGUodGhpcy5lbCx7bWluV2lkdGg6dGhpcy5taW5XaWR0aCxtaW5IZWlnaHQ6dGhpcy5taW5IZWlnaHQsaGFuZGxlczp0aGlzLnJlc2l6ZUhhbmRsZXN8fCJhbGwiLHBpbm5lZDp0cnVlLHJlc2l6ZUVsZW1lbnQ6dGhpcy5yZXNpemVyQWN0aW9uLGhhbmRsZUNsczoieC13aW5kb3ctaGFuZGxlIn0pO3RoaXMucmVzaXplci53aW5kb3c9dGhpczt0aGlzLm1vbih0aGlzLnJlc2l6ZXIsImJlZm9yZXJlc2l6ZSIsdGhpcy5iZWZvcmVSZXNpemUsdGhpcyl9aWYodGhpcy5kcmFnZ2FibGUpe3RoaXMuaGVhZGVyLmFkZENsYXNzKCJ4LXdpbmRvdy1kcmFnZ2FibGUiKX10aGlzLm1vbih0aGlzLmVsLCJtb3VzZWRvd24iLHRoaXMudG9Gcm9udCx0aGlzKTt0aGlzLm1hbmFnZXI9dGhpcy5tYW5hZ2VyfHxFeHQuV2luZG93TWdyO3RoaXMubWFuYWdlci5yZWdpc3Rlcih0aGlzKTtpZih0aGlzLm1heGltaXplZCl7dGhpcy5tYXhpbWl6ZWQ9ZmFsc2U7dGhpcy5tYXhpbWl6ZSgpfWlmKHRoaXMuY2xvc2FibGUpe3ZhciBhPXRoaXMuZ2V0S2V5TWFwKCk7YS5vbigyNyx0aGlzLm9uRXNjLHRoaXMpO2EuZGlzYWJsZSgpfX0saW5pdERyYWdnYWJsZTpmdW5jdGlvbigpe3RoaXMuZGQ9bmV3IEV4dC5XaW5kb3cuREQodGhpcyl9LG9uRXNjOmZ1bmN0aW9uKGEsYil7aWYodGhpcy5hY3RpdmVHaG9zdCl7dGhpcy51bmdob3N0KCl9Yi5zdG9wRXZlbnQoKTt0aGlzW3RoaXMuY2xvc2VBY3Rpb25dKCl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmhpZGUoKTt0aGlzLmNsZWFyQW5jaG9yKCk7RXh0LmRlc3Ryb3kodGhpcy5mb2N1c0VsLHRoaXMucmVzaXplcix0aGlzLmRkLHRoaXMucHJveHksdGhpcy5tYXNrKX1FeHQuV2luZG93LnN1cGVyY2xhc3MuYmVmb3JlRGVzdHJveS5jYWxsKHRoaXMpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLm1hbmFnZXIpe3RoaXMubWFuYWdlci51bnJlZ2lzdGVyKHRoaXMpfUV4dC5XaW5kb3cuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0saW5pdFRvb2xzOmZ1bmN0aW9uKCl7aWYodGhpcy5taW5pbWl6YWJsZSl7dGhpcy5hZGRUb29sKHtpZDoibWluaW1pemUiLGhhbmRsZXI6dGhpcy5taW5pbWl6ZS5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtdKX0pfWlmKHRoaXMubWF4aW1pemFibGUpe3RoaXMuYWRkVG9vbCh7aWQ6Im1heGltaXplIixoYW5kbGVyOnRoaXMubWF4aW1pemUuY3JlYXRlRGVsZWdhdGUodGhpcyxbXSl9KTt0aGlzLmFkZFRvb2woe2lkOiJyZXN0b3JlIixoYW5kbGVyOnRoaXMucmVzdG9yZS5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtdKSxoaWRkZW46dHJ1ZX0pfWlmKHRoaXMuY2xvc2FibGUpe3RoaXMuYWRkVG9vbCh7aWQ6ImNsb3NlIixoYW5kbGVyOnRoaXNbdGhpcy5jbG9zZUFjdGlvbl0uY3JlYXRlRGVsZWdhdGUodGhpcyxbXSl9KX19LHJlc2l6ZXJBY3Rpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnByb3h5LmdldEJveCgpO3RoaXMucHJveHkuaGlkZSgpO3RoaXMud2luZG93LmhhbmRsZVJlc2l6ZShhKTtyZXR1cm4gYX0sYmVmb3JlUmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5yZXNpemVyLm1pbkhlaWdodD1NYXRoLm1heCh0aGlzLm1pbkhlaWdodCx0aGlzLmdldEZyYW1lSGVpZ2h0KCkrNDApO3RoaXMucmVzaXplci5taW5XaWR0aD1NYXRoLm1heCh0aGlzLm1pbldpZHRoLHRoaXMuZ2V0RnJhbWVXaWR0aCgpKzQwKTt0aGlzLnJlc2l6ZUJveD10aGlzLmVsLmdldEJveCgpfSx1cGRhdGVIYW5kbGVzOmZ1bmN0aW9uKCl7aWYoRXh0LmlzSUUmJnRoaXMucmVzaXplcil7dGhpcy5yZXNpemVyLnN5bmNIYW5kbGVIZWlnaHQoKTt0aGlzLmVsLnJlcGFpbnQoKX19LGhhbmRsZVJlc2l6ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLnJlc2l6ZUJveDtpZihhLnghPWIueHx8YS55IT1iLnkpe3RoaXMudXBkYXRlQm94KGIpfWVsc2V7dGhpcy5zZXRTaXplKGIpO2lmKEV4dC5pc0lFNiYmRXh0LmlzU3RyaWN0KXt0aGlzLmRvTGF5b3V0KCl9fXRoaXMuZm9jdXMoKTt0aGlzLnVwZGF0ZUhhbmRsZXMoKTt0aGlzLnNhdmVTdGF0ZSgpfSxmb2N1czpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZm9jdXNFbCxhPXRoaXMuZGVmYXVsdEJ1dHRvbixjPXR5cGVvZiBhLGQsYjtpZihFeHQuaXNEZWZpbmVkKGEpKXtpZihFeHQuaXNOdW1iZXIoYSkmJnRoaXMuZmJhcil7ZT10aGlzLmZiYXIuaXRlbXMuZ2V0KGEpfWVsc2V7aWYoRXh0LmlzU3RyaW5nKGEpKXtlPUV4dC5nZXRDbXAoYSl9ZWxzZXtlPWF9fWQ9ZS5nZXRFbCgpO2I9RXh0LmdldERvbSh0aGlzLmNvbnRhaW5lcik7aWYoZCYmYil7aWYoYiE9ZG9jdW1lbnQuYm9keSYmIUV4dC5saWIuUmVnaW9uLmdldFJlZ2lvbihiKS5jb250YWlucyhFeHQubGliLlJlZ2lvbi5nZXRSZWdpb24oZC5kb20pKSl7cmV0dXJufX19ZT1lfHx0aGlzLmZvY3VzRWw7ZS5mb2N1cy5kZWZlcigxMCxlKX0sc2V0QW5pbWF0ZVRhcmdldDpmdW5jdGlvbihhKXthPUV4dC5nZXQoYSk7dGhpcy5hbmltYXRlVGFyZ2V0PWF9LGJlZm9yZVNob3c6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5lbC5sYXN0WFk7ZGVsZXRlIHRoaXMuZWwubGFzdExUO2lmKHRoaXMueD09PXVuZGVmaW5lZHx8dGhpcy55PT09dW5kZWZpbmVkKXt2YXIgYT10aGlzLmVsLmdldEFsaWduVG9YWSh0aGlzLmNvbnRhaW5lciwiYy1jIik7dmFyIGI9dGhpcy5lbC50cmFuc2xhdGVQb2ludHMoYVswXSxhWzFdKTt0aGlzLng9dGhpcy54PT09dW5kZWZpbmVkP2IubGVmdDp0aGlzLng7dGhpcy55PXRoaXMueT09PXVuZGVmaW5lZD9iLnRvcDp0aGlzLnl9dGhpcy5lbC5zZXRMZWZ0VG9wKHRoaXMueCx0aGlzLnkpO2lmKHRoaXMuZXhwYW5kT25TaG93KXt0aGlzLmV4cGFuZChmYWxzZSl9aWYodGhpcy5tb2RhbCl7RXh0LmdldEJvZHkoKS5hZGRDbGFzcygieC1ib2R5LW1hc2tlZCIpO3RoaXMubWFzay5zZXRTaXplKEV4dC5saWIuRG9tLmdldFZpZXdXaWR0aCh0cnVlKSxFeHQubGliLkRvbS5nZXRWaWV3SGVpZ2h0KHRydWUpKTt0aGlzLm1hc2suc2hvdygpfX0sc2hvdzpmdW5jdGlvbihjLGEsYil7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMucmVuZGVyKEV4dC5nZXRCb2R5KCkpfWlmKHRoaXMuaGlkZGVuPT09ZmFsc2Upe3RoaXMudG9Gcm9udCgpO3JldHVybiB0aGlzfWlmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVzaG93Iix0aGlzKT09PWZhbHNlKXtyZXR1cm4gdGhpc31pZihhKXt0aGlzLm9uKCJzaG93IixhLGIse3NpbmdsZTp0cnVlfSl9dGhpcy5oaWRkZW49ZmFsc2U7aWYoRXh0LmlzRGVmaW5lZChjKSl7dGhpcy5zZXRBbmltYXRlVGFyZ2V0KGMpfXRoaXMuYmVmb3JlU2hvdygpO2lmKHRoaXMuYW5pbWF0ZVRhcmdldCl7dGhpcy5hbmltU2hvdygpfWVsc2V7dGhpcy5hZnRlclNob3coKX1yZXR1cm4gdGhpc30sYWZ0ZXJTaG93OmZ1bmN0aW9uKGIpe2lmKHRoaXMuaXNEZXN0cm95ZWQpe3JldHVybiBmYWxzZX10aGlzLnByb3h5LmhpZGUoKTt0aGlzLmVsLnNldFN0eWxlKCJkaXNwbGF5IiwiYmxvY2siKTt0aGlzLmVsLnNob3coKTtpZih0aGlzLm1heGltaXplZCl7dGhpcy5maXRDb250YWluZXIoKX1pZihFeHQuaXNNYWMmJkV4dC5pc0dlY2tvMil7dGhpcy5jYXNjYWRlKHRoaXMuc2V0QXV0b1Njcm9sbCl9aWYodGhpcy5tb25pdG9yUmVzaXplfHx0aGlzLm1vZGFsfHx0aGlzLmNvbnN0cmFpbnx8dGhpcy5jb25zdHJhaW5IZWFkZXIpe0V4dC5FdmVudE1hbmFnZXIub25XaW5kb3dSZXNpemUodGhpcy5vbldpbmRvd1Jlc2l6ZSx0aGlzKX10aGlzLmRvQ29uc3RyYWluKCk7dGhpcy5kb0xheW91dCgpO2lmKHRoaXMua2V5TWFwKXt0aGlzLmtleU1hcC5lbmFibGUoKX10aGlzLnRvRnJvbnQoKTt0aGlzLnVwZGF0ZUhhbmRsZXMoKTtpZihiJiYoRXh0LmlzSUV8fEV4dC5pc1dlYktpdCkpe3ZhciBhPXRoaXMuZ2V0U2l6ZSgpO3RoaXMub25SZXNpemUoYS53aWR0aCxhLmhlaWdodCl9dGhpcy5vblNob3coKTt0aGlzLmZpcmVFdmVudCgic2hvdyIsdGhpcyl9LGFuaW1TaG93OmZ1bmN0aW9uKCl7dGhpcy5wcm94eS5zaG93KCk7dGhpcy5wcm94eS5zZXRCb3godGhpcy5hbmltYXRlVGFyZ2V0LmdldEJveCgpKTt0aGlzLnByb3h5LnNldE9wYWNpdHkoMCk7dmFyIGE9dGhpcy5nZXRCb3goKTt0aGlzLmVsLnNldFN0eWxlKCJkaXNwbGF5Iiwibm9uZSIpO3RoaXMucHJveHkuc2hpZnQoRXh0LmFwcGx5KGEse2NhbGxiYWNrOnRoaXMuYWZ0ZXJTaG93LmNyZWF0ZURlbGVnYXRlKHRoaXMsW3RydWVdLGZhbHNlKSxzY29wZTp0aGlzLGVhc2luZzoiZWFzZU5vbmUiLGR1cmF0aW9uOnRoaXMuc2hvd0FuaW1EdXJhdGlvbixvcGFjaXR5OjAuNX0pKX0saGlkZTpmdW5jdGlvbihjLGEsYil7aWYodGhpcy5oaWRkZW58fHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVoaWRlIix0aGlzKT09PWZhbHNlKXtyZXR1cm4gdGhpc31pZihhKXt0aGlzLm9uKCJoaWRlIixhLGIse3NpbmdsZTp0cnVlfSl9dGhpcy5oaWRkZW49dHJ1ZTtpZihjIT09dW5kZWZpbmVkKXt0aGlzLnNldEFuaW1hdGVUYXJnZXQoYyl9aWYodGhpcy5tb2RhbCl7dGhpcy5tYXNrLmhpZGUoKTtFeHQuZ2V0Qm9keSgpLnJlbW92ZUNsYXNzKCJ4LWJvZHktbWFza2VkIil9aWYodGhpcy5hbmltYXRlVGFyZ2V0KXt0aGlzLmFuaW1IaWRlKCl9ZWxzZXt0aGlzLmVsLmhpZGUoKTt0aGlzLmFmdGVySGlkZSgpfXJldHVybiB0aGlzfSxhZnRlckhpZGU6ZnVuY3Rpb24oKXt0aGlzLnByb3h5LmhpZGUoKTtpZih0aGlzLm1vbml0b3JSZXNpemV8fHRoaXMubW9kYWx8fHRoaXMuY29uc3RyYWlufHx0aGlzLmNvbnN0cmFpbkhlYWRlcil7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVSZXNpemVMaXN0ZW5lcih0aGlzLm9uV2luZG93UmVzaXplLHRoaXMpfWlmKHRoaXMua2V5TWFwKXt0aGlzLmtleU1hcC5kaXNhYmxlKCl9dGhpcy5vbkhpZGUoKTt0aGlzLmZpcmVFdmVudCgiaGlkZSIsdGhpcyl9LGFuaW1IaWRlOmZ1bmN0aW9uKCl7dGhpcy5wcm94eS5zZXRPcGFjaXR5KDAuNSk7dGhpcy5wcm94eS5zaG93KCk7dmFyIGE9dGhpcy5nZXRCb3goZmFsc2UpO3RoaXMucHJveHkuc2V0Qm94KGEpO3RoaXMuZWwuaGlkZSgpO3RoaXMucHJveHkuc2hpZnQoRXh0LmFwcGx5KHRoaXMuYW5pbWF0ZVRhcmdldC5nZXRCb3goKSx7Y2FsbGJhY2s6dGhpcy5hZnRlckhpZGUsc2NvcGU6dGhpcyxkdXJhdGlvbjp0aGlzLmhpZGVBbmltRHVyYXRpb24sZWFzaW5nOiJlYXNlTm9uZSIsb3BhY2l0eTowfSkpfSxvblNob3c6RXh0LmVtcHR5Rm4sb25IaWRlOkV4dC5lbXB0eUZuLG9uV2luZG93UmVzaXplOmZ1bmN0aW9uKCl7aWYodGhpcy5tYXhpbWl6ZWQpe3RoaXMuZml0Q29udGFpbmVyKCl9aWYodGhpcy5tb2RhbCl7dGhpcy5tYXNrLnNldFNpemUoIjEwMCUiLCIxMDAlIik7dmFyIGE9dGhpcy5tYXNrLmRvbS5vZmZzZXRIZWlnaHQ7dGhpcy5tYXNrLnNldFNpemUoRXh0LmxpYi5Eb20uZ2V0Vmlld1dpZHRoKHRydWUpLEV4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQodHJ1ZSkpfXRoaXMuZG9Db25zdHJhaW4oKX0sZG9Db25zdHJhaW46ZnVuY3Rpb24oKXtpZih0aGlzLmNvbnN0cmFpbnx8dGhpcy5jb25zdHJhaW5IZWFkZXIpe3ZhciBiO2lmKHRoaXMuY29uc3RyYWluKXtiPXtyaWdodDp0aGlzLmVsLnNoYWRvd09mZnNldCxsZWZ0OnRoaXMuZWwuc2hhZG93T2Zmc2V0LGJvdHRvbTp0aGlzLmVsLnNoYWRvd09mZnNldH19ZWxzZXt2YXIgYT10aGlzLmdldFNpemUoKTtiPXtyaWdodDotKGEud2lkdGgtMTAwKSxib3R0b206LShhLmhlaWdodC0yNSt0aGlzLmVsLmdldENvbnN0cmFpbk9mZnNldCgpKX19dmFyIGM9dGhpcy5lbC5nZXRDb25zdHJhaW5Ub1hZKHRoaXMuY29udGFpbmVyLHRydWUsYik7aWYoYyl7dGhpcy5zZXRQb3NpdGlvbihjWzBdLGNbMV0pfX19LGdob3N0OmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuY3JlYXRlR2hvc3QoYSk7dmFyIGI9dGhpcy5nZXRCb3godHJ1ZSk7Yy5zZXRMZWZ0VG9wKGIueCxiLnkpO2Muc2V0V2lkdGgoYi53aWR0aCk7dGhpcy5lbC5oaWRlKCk7dGhpcy5hY3RpdmVHaG9zdD1jO3JldHVybiBjfSx1bmdob3N0OmZ1bmN0aW9uKGIsYSl7aWYoIXRoaXMuYWN0aXZlR2hvc3Qpe3JldHVybn1pZihiIT09ZmFsc2Upe3RoaXMuZWwuc2hvdygpO3RoaXMuZm9jdXMuZGVmZXIoMTAsdGhpcyk7aWYoRXh0LmlzTWFjJiZFeHQuaXNHZWNrbzIpe3RoaXMuY2FzY2FkZSh0aGlzLnNldEF1dG9TY3JvbGwpfX1pZihhIT09ZmFsc2Upe3RoaXMuc2V0UG9zaXRpb24odGhpcy5hY3RpdmVHaG9zdC5nZXRMZWZ0KHRydWUpLHRoaXMuYWN0aXZlR2hvc3QuZ2V0VG9wKHRydWUpKX10aGlzLmFjdGl2ZUdob3N0LmhpZGUoKTt0aGlzLmFjdGl2ZUdob3N0LnJlbW92ZSgpO2RlbGV0ZSB0aGlzLmFjdGl2ZUdob3N0fSxtaW5pbWl6ZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJtaW5pbWl6ZSIsdGhpcyk7cmV0dXJuIHRoaXN9LGNsb3NlOmZ1bmN0aW9uKCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWNsb3NlIix0aGlzKSE9PWZhbHNlKXtpZih0aGlzLmhpZGRlbil7dGhpcy5kb0Nsb3NlKCl9ZWxzZXt0aGlzLmhpZGUobnVsbCx0aGlzLmRvQ2xvc2UsdGhpcyl9fX0sZG9DbG9zZTpmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjbG9zZSIsdGhpcyk7dGhpcy5kZXN0cm95KCl9LG1heGltaXplOmZ1bmN0aW9uKCl7aWYoIXRoaXMubWF4aW1pemVkKXt0aGlzLmV4cGFuZChmYWxzZSk7dGhpcy5yZXN0b3JlU2l6ZT10aGlzLmdldFNpemUoKTt0aGlzLnJlc3RvcmVQb3M9dGhpcy5nZXRQb3NpdGlvbih0cnVlKTtpZih0aGlzLm1heGltaXphYmxlKXt0aGlzLnRvb2xzLm1heGltaXplLmhpZGUoKTt0aGlzLnRvb2xzLnJlc3RvcmUuc2hvdygpfXRoaXMubWF4aW1pemVkPXRydWU7dGhpcy5lbC5kaXNhYmxlU2hhZG93KCk7aWYodGhpcy5kZCl7dGhpcy5kZC5sb2NrKCl9aWYodGhpcy5jb2xsYXBzaWJsZSl7dGhpcy50b29scy50b2dnbGUuaGlkZSgpfXRoaXMuZWwuYWRkQ2xhc3MoIngtd2luZG93LW1heGltaXplZCIpO3RoaXMuY29udGFpbmVyLmFkZENsYXNzKCJ4LXdpbmRvdy1tYXhpbWl6ZWQtY3QiKTt0aGlzLnNldFBvc2l0aW9uKDAsMCk7dGhpcy5maXRDb250YWluZXIoKTt0aGlzLmZpcmVFdmVudCgibWF4aW1pemUiLHRoaXMpfXJldHVybiB0aGlzfSxyZXN0b3JlOmZ1bmN0aW9uKCl7aWYodGhpcy5tYXhpbWl6ZWQpe3ZhciBhPXRoaXMudG9vbHM7dGhpcy5lbC5yZW1vdmVDbGFzcygieC13aW5kb3ctbWF4aW1pemVkIik7aWYoYS5yZXN0b3JlKXthLnJlc3RvcmUuaGlkZSgpfWlmKGEubWF4aW1pemUpe2EubWF4aW1pemUuc2hvdygpfXRoaXMuc2V0UG9zaXRpb24odGhpcy5yZXN0b3JlUG9zWzBdLHRoaXMucmVzdG9yZVBvc1sxXSk7dGhpcy5zZXRTaXplKHRoaXMucmVzdG9yZVNpemUud2lkdGgsdGhpcy5yZXN0b3JlU2l6ZS5oZWlnaHQpO2RlbGV0ZSB0aGlzLnJlc3RvcmVQb3M7ZGVsZXRlIHRoaXMucmVzdG9yZVNpemU7dGhpcy5tYXhpbWl6ZWQ9ZmFsc2U7dGhpcy5lbC5lbmFibGVTaGFkb3codHJ1ZSk7aWYodGhpcy5kZCl7dGhpcy5kZC51bmxvY2soKX1pZih0aGlzLmNvbGxhcHNpYmxlJiZhLnRvZ2dsZSl7YS50b2dnbGUuc2hvdygpfXRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCJ4LXdpbmRvdy1tYXhpbWl6ZWQtY3QiKTt0aGlzLmRvQ29uc3RyYWluKCk7dGhpcy5maXJlRXZlbnQoInJlc3RvcmUiLHRoaXMpfXJldHVybiB0aGlzfSx0b2dnbGVNYXhpbWl6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzW3RoaXMubWF4aW1pemVkPyJyZXN0b3JlIjoibWF4aW1pemUiXSgpfSxmaXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRhaW5lci5nZXRWaWV3U2l6ZShmYWxzZSk7dGhpcy5zZXRTaXplKGEud2lkdGgsYS5oZWlnaHQpfSxzZXRaSW5kZXg6ZnVuY3Rpb24oYSl7aWYodGhpcy5tb2RhbCl7dGhpcy5tYXNrLnNldFN0eWxlKCJ6LWluZGV4IixhKX10aGlzLmVsLnNldFpJbmRleCgrK2EpO2ErPTU7aWYodGhpcy5yZXNpemVyKXt0aGlzLnJlc2l6ZXIucHJveHkuc2V0U3R5bGUoInotaW5kZXgiLCsrYSl9dGhpcy5sYXN0WkluZGV4PWF9LGFsaWduVG86ZnVuY3Rpb24oYixhLGMpe3ZhciBkPXRoaXMuZWwuZ2V0QWxpZ25Ub1hZKGIsYSxjKTt0aGlzLnNldFBhZ2VQb3NpdGlvbihkWzBdLGRbMV0pO3JldHVybiB0aGlzfSxhbmNob3JUbzpmdW5jdGlvbihjLGUsZCxiKXt0aGlzLmNsZWFyQW5jaG9yKCk7dGhpcy5hbmNob3JUYXJnZXQ9e2VsOmMsYWxpZ25tZW50OmUsb2Zmc2V0czpkfTtFeHQuRXZlbnRNYW5hZ2VyLm9uV2luZG93UmVzaXplKHRoaXMuZG9BbmNob3IsdGhpcyk7dmFyIGE9dHlwZW9mIGI7aWYoYSE9InVuZGVmaW5lZCIpe0V4dC5FdmVudE1hbmFnZXIub24od2luZG93LCJzY3JvbGwiLHRoaXMuZG9BbmNob3IsdGhpcyx7YnVmZmVyOmE9PSJudW1iZXIiP2I6NTB9KX1yZXR1cm4gdGhpcy5kb0FuY2hvcigpfSxkb0FuY2hvcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYW5jaG9yVGFyZ2V0O3RoaXMuYWxpZ25UbyhhLmVsLGEuYWxpZ25tZW50LGEub2Zmc2V0cyk7cmV0dXJuIHRoaXN9LGNsZWFyQW5jaG9yOmZ1bmN0aW9uKCl7aWYodGhpcy5hbmNob3JUYXJnZXQpe0V4dC5FdmVudE1hbmFnZXIucmVtb3ZlUmVzaXplTGlzdGVuZXIodGhpcy5kb0FuY2hvcix0aGlzKTtFeHQuRXZlbnRNYW5hZ2VyLnVuKHdpbmRvdywic2Nyb2xsIix0aGlzLmRvQW5jaG9yLHRoaXMpO2RlbGV0ZSB0aGlzLmFuY2hvclRhcmdldH1yZXR1cm4gdGhpc30sdG9Gcm9udDpmdW5jdGlvbihhKXtpZih0aGlzLm1hbmFnZXIuYnJpbmdUb0Zyb250KHRoaXMpKXtpZighYXx8IWEuZ2V0VGFyZ2V0KCkuZm9jdXMpe3RoaXMuZm9jdXMoKX19cmV0dXJuIHRoaXN9LHNldEFjdGl2ZTpmdW5jdGlvbihhKXtpZihhKXtpZighdGhpcy5tYXhpbWl6ZWQpe3RoaXMuZWwuZW5hYmxlU2hhZG93KHRydWUpfXRoaXMuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsdGhpcyl9ZWxzZXt0aGlzLmVsLmRpc2FibGVTaGFkb3coKTt0aGlzLmZpcmVFdmVudCgiZGVhY3RpdmF0ZSIsdGhpcyl9fSx0b0JhY2s6ZnVuY3Rpb24oKXt0aGlzLm1hbmFnZXIuc2VuZFRvQmFjayh0aGlzKTtyZXR1cm4gdGhpc30sY2VudGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbC5nZXRBbGlnblRvWFkodGhpcy5jb250YWluZXIsImMtYyIpO3RoaXMuc2V0UGFnZVBvc2l0aW9uKGFbMF0sYVsxXSk7cmV0dXJuIHRoaXN9fSk7RXh0LnJlZygid2luZG93IixFeHQuV2luZG93KTtFeHQuV2luZG93LkREPUV4dC5leHRlbmQoRXh0LmRkLkRELHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLndpbj1hO0V4dC5XaW5kb3cuREQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYS5lbC5pZCwiV2luZG93REQtIithLmlkKTt0aGlzLnNldEhhbmRsZUVsSWQoYS5oZWFkZXIuaWQpO3RoaXMuc2Nyb2xsPWZhbHNlfSxtb3ZlT25seTp0cnVlLGhlYWRlck9mZnNldHM6WzEwMCwyNV0sc3RhcnREcmFnOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy53aW47dGhpcy5wcm94eT1hLmdob3N0KGEuaW5pdGlhbENvbmZpZy5jbHMpO2lmKGEuY29uc3RyYWluIT09ZmFsc2Upe3ZhciBjPWEuZWwuc2hhZG93T2Zmc2V0O3RoaXMuY29uc3RyYWluVG8oYS5jb250YWluZXIse3JpZ2h0OmMsbGVmdDpjLGJvdHRvbTpjfSl9ZWxzZXtpZihhLmNvbnN0cmFpbkhlYWRlciE9PWZhbHNlKXt2YXIgYj10aGlzLnByb3h5LmdldFNpemUoKTt0aGlzLmNvbnN0cmFpblRvKGEuY29udGFpbmVyLHtyaWdodDotKGIud2lkdGgtdGhpcy5oZWFkZXJPZmZzZXRzWzBdKSxib3R0b206LShiLmhlaWdodC10aGlzLmhlYWRlck9mZnNldHNbMV0pfSl9fX0sYjREcmFnOkV4dC5lbXB0eUZuLG9uRHJhZzpmdW5jdGlvbihhKXt0aGlzLmFsaWduRWxXaXRoTW91c2UodGhpcy5wcm94eSxhLmdldFBhZ2VYKCksYS5nZXRQYWdlWSgpKX0sZW5kRHJhZzpmdW5jdGlvbihhKXt0aGlzLndpbi51bmdob3N0KCk7dGhpcy53aW4uc2F2ZVN0YXRlKCl9fSk7RXh0LldpbmRvd0dyb3VwPWZ1bmN0aW9uKCl7dmFyIGc9e307dmFyIGQ9W107dmFyIGU9bnVsbDt2YXIgYz1mdW5jdGlvbihqLGkpe3JldHVybighai5fbGFzdEFjY2Vzc3x8ai5fbGFzdEFjY2VzczxpLl9sYXN0QWNjZXNzKT8tMToxfTt2YXIgaD1mdW5jdGlvbigpe3ZhciBsPWQsaj1sLmxlbmd0aDtpZihqPjApe2wuc29ydChjKTt2YXIgaz1sWzBdLm1hbmFnZXIuenNlZWQ7Zm9yKHZhciBtPTA7bTxqO20rKyl7dmFyIG49bFttXTtpZihuJiYhbi5oaWRkZW4pe24uc2V0WkluZGV4KGsrKG0qMTApKX19fWEoKX07dmFyIGI9ZnVuY3Rpb24oaSl7aWYoaSE9ZSl7aWYoZSl7ZS5zZXRBY3RpdmUoZmFsc2UpfWU9aTtpZihpKXtpLnNldEFjdGl2ZSh0cnVlKX19fTt2YXIgYT1mdW5jdGlvbigpe2Zvcih2YXIgaj1kLmxlbmd0aC0xO2o+PTA7LS1qKXtpZighZFtqXS5oaWRkZW4pe2IoZFtqXSk7cmV0dXJufX1iKG51bGwpfTtyZXR1cm57enNlZWQ6OTAwMCxyZWdpc3RlcjpmdW5jdGlvbihpKXtpZihpLm1hbmFnZXIpe2kubWFuYWdlci51bnJlZ2lzdGVyKGkpfWkubWFuYWdlcj10aGlzO2dbaS5pZF09aTtkLnB1c2goaSk7aS5vbigiaGlkZSIsYSl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oaSl7ZGVsZXRlIGkubWFuYWdlcjtkZWxldGUgZ1tpLmlkXTtpLnVuKCJoaWRlIixhKTtkLnJlbW92ZShpKX0sZ2V0OmZ1bmN0aW9uKGkpe3JldHVybiB0eXBlb2YgaT09Im9iamVjdCI/aTpnW2ldfSxicmluZ1RvRnJvbnQ6ZnVuY3Rpb24oaSl7aT10aGlzLmdldChpKTtpZihpIT1lKXtpLl9sYXN0QWNjZXNzPW5ldyBEYXRlKCkuZ2V0VGltZSgpO2goKTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9LHNlbmRUb0JhY2s6ZnVuY3Rpb24oaSl7aT10aGlzLmdldChpKTtpLl9sYXN0QWNjZXNzPS0obmV3IERhdGUoKS5nZXRUaW1lKCkpO2goKTtyZXR1cm4gaX0saGlkZUFsbDpmdW5jdGlvbigpe2Zvcih2YXIgaSBpbiBnKXtpZihnW2ldJiZ0eXBlb2YgZ1tpXSE9ImZ1bmN0aW9uIiYmZ1tpXS5pc1Zpc2libGUoKSl7Z1tpXS5oaWRlKCl9fX0sZ2V0QWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIGV9LGdldEJ5OmZ1bmN0aW9uKGwsayl7dmFyIG09W107Zm9yKHZhciBqPWQubGVuZ3RoLTE7aj49MDstLWope3ZhciBuPWRbal07aWYobC5jYWxsKGt8fG4sbikhPT1mYWxzZSl7bS5wdXNoKG4pfX1yZXR1cm4gbX0sZWFjaDpmdW5jdGlvbihqLGkpe2Zvcih2YXIgayBpbiBnKXtpZihnW2tdJiZ0eXBlb2YgZ1trXSE9ImZ1bmN0aW9uIil7aWYoai5jYWxsKGl8fGdba10sZ1trXSk9PT1mYWxzZSl7cmV0dXJufX19fX19O0V4dC5XaW5kb3dNZ3I9bmV3IEV4dC5XaW5kb3dHcm91cCgpO0V4dC5NZXNzYWdlQm94PWZ1bmN0aW9uKCl7dmFyIHUsYixxLHQsaCxsLHMsYSxuLHAsaixnLHIsdixvLGk9IiIsZD0iIixtPVsib2siLCJ5ZXMiLCJubyIsImNhbmNlbCJdO3ZhciBjPWZ1bmN0aW9uKHgpe3JbeF0uYmx1cigpO2lmKHUuaXNWaXNpYmxlKCkpe3UuaGlkZSgpO3coKTtFeHQuY2FsbGJhY2soYi5mbixiLnNjb3BlfHx3aW5kb3csW3gsdi5kb20udmFsdWUsYl0sMSl9fTt2YXIgdz1mdW5jdGlvbigpe2lmKGImJmIuY2xzKXt1LmVsLnJlbW92ZUNsYXNzKGIuY2xzKX1uLnJlc2V0KCl9O3ZhciBlPWZ1bmN0aW9uKHoseCx5KXtpZihiJiZiLmNsb3NhYmxlIT09ZmFsc2Upe3UuaGlkZSgpO3coKX1pZih5KXt5LnN0b3BFdmVudCgpfX07dmFyIGs9ZnVuY3Rpb24oeCl7dmFyIHo9MCx5O2lmKCF4KXtFeHQuZWFjaChtLGZ1bmN0aW9uKEEpe3JbQV0uaGlkZSgpfSk7cmV0dXJuIHp9dS5mb290ZXIuZG9tLnN0eWxlLmRpc3BsYXk9IiI7RXh0Lml0ZXJhdGUocixmdW5jdGlvbihBLEIpe3k9eFtBXTtpZih5KXtCLnNob3coKTtCLnNldFRleHQoRXh0LmlzU3RyaW5nKHkpP3k6RXh0Lk1lc3NhZ2VCb3guYnV0dG9uVGV4dFtBXSk7eis9Qi5nZXRFbCgpLmdldFdpZHRoKCkrMTV9ZWxzZXtCLmhpZGUoKX19KTtyZXR1cm4gen07cmV0dXJue2dldERpYWxvZzpmdW5jdGlvbih4KXtpZighdSl7dmFyIHo9W107cj17fTtFeHQuZWFjaChtLGZ1bmN0aW9uKEEpe3oucHVzaChyW0FdPW5ldyBFeHQuQnV0dG9uKHt0ZXh0OnRoaXMuYnV0dG9uVGV4dFtBXSxoYW5kbGVyOmMuY3JlYXRlQ2FsbGJhY2soQSksaGlkZU1vZGU6Im9mZnNldHMifSkpfSx0aGlzKTt1PW5ldyBFeHQuV2luZG93KHthdXRvQ3JlYXRlOnRydWUsdGl0bGU6eCxyZXNpemFibGU6ZmFsc2UsY29uc3RyYWluOnRydWUsY29uc3RyYWluSGVhZGVyOnRydWUsbWluaW1pemFibGU6ZmFsc2UsbWF4aW1pemFibGU6ZmFsc2Usc3RhdGVmdWw6ZmFsc2UsbW9kYWw6dHJ1ZSxzaGltOnRydWUsYnV0dG9uQWxpZ246ImNlbnRlciIsd2lkdGg6NDAwLGhlaWdodDoxMDAsbWluSGVpZ2h0OjgwLHBsYWluOnRydWUsZm9vdGVyOnRydWUsY2xvc2FibGU6dHJ1ZSxjbG9zZTpmdW5jdGlvbigpe2lmKGImJmIuYnV0dG9ucyYmYi5idXR0b25zLm5vJiYhYi5idXR0b25zLmNhbmNlbCl7Yygibm8iKX1lbHNle2MoImNhbmNlbCIpfX0sZmJhcjpuZXcgRXh0LlRvb2xiYXIoe2l0ZW1zOnosZW5hYmxlT3ZlcmZsb3c6ZmFsc2V9KX0pO3UucmVuZGVyKGRvY3VtZW50LmJvZHkpO3UuZ2V0RWwoKS5hZGRDbGFzcygieC13aW5kb3ctZGxnIik7cT11Lm1hc2s7aD11LmJvZHkuY3JlYXRlQ2hpbGQoe2h0bWw6JzxkaXYgY2xhc3M9ImV4dC1tYi1pY29uIj48L2Rpdj48ZGl2IGNsYXNzPSJleHQtbWItY29udGVudCI+PHNwYW4gY2xhc3M9ImV4dC1tYi10ZXh0Ij48L3NwYW4+PGJyIC8+PGRpdiBjbGFzcz0iZXh0LW1iLWZpeC1jdXJzb3IiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iZXh0LW1iLWlucHV0IiAvPjx0ZXh0YXJlYSBjbGFzcz0iZXh0LW1iLXRleHRhcmVhIj48L3RleHRhcmVhPjwvZGl2PjwvZGl2Pid9KTtqPUV4dC5nZXQoaC5kb20uZmlyc3RDaGlsZCk7dmFyIHk9aC5kb20uY2hpbGROb2Rlc1sxXTtsPUV4dC5nZXQoeS5maXJzdENoaWxkKTtzPUV4dC5nZXQoeS5jaGlsZE5vZGVzWzJdLmZpcnN0Q2hpbGQpO3MuZW5hYmxlRGlzcGxheU1vZGUoKTtzLmFkZEtleUxpc3RlbmVyKFsxMCwxM10sZnVuY3Rpb24oKXtpZih1LmlzVmlzaWJsZSgpJiZiJiZiLmJ1dHRvbnMpe2lmKGIuYnV0dG9ucy5vayl7Yygib2siKX1lbHNle2lmKGIuYnV0dG9ucy55ZXMpe2MoInllcyIpfX19fSk7YT1FeHQuZ2V0KHkuY2hpbGROb2Rlc1syXS5jaGlsZE5vZGVzWzFdKTthLmVuYWJsZURpc3BsYXlNb2RlKCk7bj1uZXcgRXh0LlByb2dyZXNzQmFyKHtyZW5kZXJUbzpofSk7aC5jcmVhdGVDaGlsZCh7Y2xzOiJ4LWNsZWFyIn0pfXJldHVybiB1fSx1cGRhdGVUZXh0OmZ1bmN0aW9uKEEpe2lmKCF1LmlzVmlzaWJsZSgpJiYhYi53aWR0aCl7dS5zZXRTaXplKHRoaXMubWF4V2lkdGgsMTAwKX1sLnVwZGF0ZShBP0ErIiAiOiImIzE2MDsiKTt2YXIgeT1kIT0iIj8oai5nZXRXaWR0aCgpK2ouZ2V0TWFyZ2lucygibHIiKSk6MCxDPWwuZ2V0V2lkdGgoKStsLmdldE1hcmdpbnMoImxyIiksej11LmdldEZyYW1lV2lkdGgoImxyIiksQj11LmJvZHkuZ2V0RnJhbWVXaWR0aCgibHIiKSx4O3g9TWF0aC5tYXgoTWF0aC5taW4oYi53aWR0aHx8eStDK3orQixiLm1heFdpZHRofHx0aGlzLm1heFdpZHRoKSxNYXRoLm1heChiLm1pbldpZHRofHx0aGlzLm1pbldpZHRoLG98fDApKTtpZihiLnByb21wdD09PXRydWUpe3Yuc2V0V2lkdGgoeC15LXotQil9aWYoYi5wcm9ncmVzcz09PXRydWV8fGIud2FpdD09PXRydWUpe24uc2V0U2l6ZSh4LXktei1CKX1pZihFeHQuaXNJRSYmeD09byl7eCs9NH1sLnVwZGF0ZShBfHwiJiMxNjA7Iik7dS5zZXRTaXplKHgsImF1dG8iKS5jZW50ZXIoKTtyZXR1cm4gdGhpc30sdXBkYXRlUHJvZ3Jlc3M6ZnVuY3Rpb24oeSx4LHope24udXBkYXRlUHJvZ3Jlc3MoeSx4KTtpZih6KXt0aGlzLnVwZGF0ZVRleHQoeil9cmV0dXJuIHRoaXN9LGlzVmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB1JiZ1LmlzVmlzaWJsZSgpfSxoaWRlOmZ1bmN0aW9uKCl7dmFyIHg9dT91LmFjdGl2ZUdob3N0Om51bGw7aWYodGhpcy5pc1Zpc2libGUoKXx8eCl7dS5oaWRlKCk7dygpO2lmKHgpe3UudW5naG9zdChmYWxzZSxmYWxzZSl9fXJldHVybiB0aGlzfSxzaG93OmZ1bmN0aW9uKEEpe2lmKHRoaXMuaXNWaXNpYmxlKCkpe3RoaXMuaGlkZSgpfWI9QTt2YXIgQj10aGlzLmdldERpYWxvZyhiLnRpdGxlfHwiJiMxNjA7Iik7Qi5zZXRUaXRsZShiLnRpdGxlfHwiJiMxNjA7Iik7dmFyIHg9KGIuY2xvc2FibGUhPT1mYWxzZSYmYi5wcm9ncmVzcyE9PXRydWUmJmIud2FpdCE9PXRydWUpO0IudG9vbHMuY2xvc2Uuc2V0RGlzcGxheWVkKHgpO3Y9cztiLnByb21wdD1iLnByb21wdHx8KGIubXVsdGlsaW5lP3RydWU6ZmFsc2UpO2lmKGIucHJvbXB0KXtpZihiLm11bHRpbGluZSl7cy5oaWRlKCk7YS5zaG93KCk7YS5zZXRIZWlnaHQoRXh0LmlzTnVtYmVyKGIubXVsdGlsaW5lKT9iLm11bHRpbGluZTp0aGlzLmRlZmF1bHRUZXh0SGVpZ2h0KTt2PWF9ZWxzZXtzLnNob3coKTthLmhpZGUoKX19ZWxzZXtzLmhpZGUoKTthLmhpZGUoKX12LmRvbS52YWx1ZT1iLnZhbHVlfHwiIjtpZihiLnByb21wdCl7Qi5mb2N1c0VsPXZ9ZWxzZXt2YXIgej1iLmJ1dHRvbnM7dmFyIHk9bnVsbDtpZih6JiZ6Lm9rKXt5PXIub2t9ZWxzZXtpZih6JiZ6Lnllcyl7eT1yLnllc319aWYoeSl7Qi5mb2N1c0VsPXl9fWlmKEV4dC5pc0RlZmluZWQoYi5pY29uQ2xzKSl7Qi5zZXRJY29uQ2xhc3MoYi5pY29uQ2xzKX10aGlzLnNldEljb24oRXh0LmlzRGVmaW5lZChiLmljb24pP2IuaWNvbjppKTtvPWsoYi5idXR0b25zKTtuLnNldFZpc2libGUoYi5wcm9ncmVzcz09PXRydWV8fGIud2FpdD09PXRydWUpO3RoaXMudXBkYXRlUHJvZ3Jlc3MoMCxiLnByb2dyZXNzVGV4dCk7dGhpcy51cGRhdGVUZXh0KGIubXNnKTtpZihiLmNscyl7Qi5lbC5hZGRDbGFzcyhiLmNscyl9Qi5wcm94eURyYWc9Yi5wcm94eURyYWc9PT10cnVlO0IubW9kYWw9Yi5tb2RhbCE9PWZhbHNlO0IubWFzaz1iLm1vZGFsIT09ZmFsc2U/cTpmYWxzZTtpZighQi5pc1Zpc2libGUoKSl7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh1LmVsLmRvbSk7Qi5zZXRBbmltYXRlVGFyZ2V0KGIuYW5pbUVsKTtCLm9uKCJzaG93IixmdW5jdGlvbigpe2lmKHg9PT10cnVlKXtCLmtleU1hcC5lbmFibGUoKX1lbHNle0Iua2V5TWFwLmRpc2FibGUoKX19LHRoaXMse3NpbmdsZTp0cnVlfSk7Qi5zaG93KGIuYW5pbUVsKX1pZihiLndhaXQ9PT10cnVlKXtuLndhaXQoYi53YWl0Q29uZmlnKX1yZXR1cm4gdGhpc30sc2V0SWNvbjpmdW5jdGlvbih4KXtpZighdSl7aT14O3JldHVybn1pPXVuZGVmaW5lZDtpZih4JiZ4IT0iIil7ai5yZW1vdmVDbGFzcygieC1oaWRkZW4iKTtqLnJlcGxhY2VDbGFzcyhkLHgpO2guYWRkQ2xhc3MoIngtZGxnLWljb24iKTtkPXh9ZWxzZXtqLnJlcGxhY2VDbGFzcyhkLCJ4LWhpZGRlbiIpO2gucmVtb3ZlQ2xhc3MoIngtZGxnLWljb24iKTtkPSIifXJldHVybiB0aGlzfSxwcm9ncmVzczpmdW5jdGlvbih6LHkseCl7dGhpcy5zaG93KHt0aXRsZTp6LG1zZzp5LGJ1dHRvbnM6ZmFsc2UscHJvZ3Jlc3M6dHJ1ZSxjbG9zYWJsZTpmYWxzZSxtaW5XaWR0aDp0aGlzLm1pblByb2dyZXNzV2lkdGgscHJvZ3Jlc3NUZXh0Onh9KTtyZXR1cm4gdGhpc30sd2FpdDpmdW5jdGlvbih6LHkseCl7dGhpcy5zaG93KHt0aXRsZTp5LG1zZzp6LGJ1dHRvbnM6ZmFsc2UsY2xvc2FibGU6ZmFsc2Usd2FpdDp0cnVlLG1vZGFsOnRydWUsbWluV2lkdGg6dGhpcy5taW5Qcm9ncmVzc1dpZHRoLHdhaXRDb25maWc6eH0pO3JldHVybiB0aGlzfSxhbGVydDpmdW5jdGlvbihBLHoseSx4KXt0aGlzLnNob3coe3RpdGxlOkEsbXNnOnosYnV0dG9uczp0aGlzLk9LLGZuOnksc2NvcGU6eCxtaW5XaWR0aDp0aGlzLm1pbldpZHRofSk7cmV0dXJuIHRoaXN9LGNvbmZpcm06ZnVuY3Rpb24oQSx6LHkseCl7dGhpcy5zaG93KHt0aXRsZTpBLG1zZzp6LGJ1dHRvbnM6dGhpcy5ZRVNOTyxmbjp5LHNjb3BlOngsaWNvbjp0aGlzLlFVRVNUSU9OLG1pbldpZHRoOnRoaXMubWluV2lkdGh9KTtyZXR1cm4gdGhpc30scHJvbXB0OmZ1bmN0aW9uKEMsQix6LHkseCxBKXt0aGlzLnNob3coe3RpdGxlOkMsbXNnOkIsYnV0dG9uczp0aGlzLk9LQ0FOQ0VMLGZuOnosbWluV2lkdGg6dGhpcy5taW5Qcm9tcHRXaWR0aCxzY29wZTp5LHByb21wdDp0cnVlLG11bHRpbGluZTp4LHZhbHVlOkF9KTtyZXR1cm4gdGhpc30sT0s6e29rOnRydWV9LENBTkNFTDp7Y2FuY2VsOnRydWV9LE9LQ0FOQ0VMOntvazp0cnVlLGNhbmNlbDp0cnVlfSxZRVNOTzp7eWVzOnRydWUsbm86dHJ1ZX0sWUVTTk9DQU5DRUw6e3llczp0cnVlLG5vOnRydWUsY2FuY2VsOnRydWV9LElORk86ImV4dC1tYi1pbmZvIixXQVJOSU5HOiJleHQtbWItd2FybmluZyIsUVVFU1RJT046ImV4dC1tYi1xdWVzdGlvbiIsRVJST1I6ImV4dC1tYi1lcnJvciIsZGVmYXVsdFRleHRIZWlnaHQ6NzUsbWF4V2lkdGg6NjAwLG1pbldpZHRoOjEwMCxtaW5Qcm9ncmVzc1dpZHRoOjI1MCxtaW5Qcm9tcHRXaWR0aDoyNTAsYnV0dG9uVGV4dDp7b2s6Ik9LIixjYW5jZWw6IkNhbmNlbCIseWVzOiJZZXMiLG5vOiJObyJ9fX0oKTtFeHQuTXNnPUV4dC5NZXNzYWdlQm94O0V4dC5kZC5QYW5lbFByb3h5PUV4dC5leHRlbmQoT2JqZWN0LHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIpe3RoaXMucGFuZWw9YTt0aGlzLmlkPXRoaXMucGFuZWwuaWQrIi1kZHByb3h5IjtFeHQuYXBwbHkodGhpcyxiKX0saW5zZXJ0UHJveHk6dHJ1ZSxzZXRTdGF0dXM6RXh0LmVtcHR5Rm4scmVzZXQ6RXh0LmVtcHR5Rm4sdXBkYXRlOkV4dC5lbXB0eUZuLHN0b3A6RXh0LmVtcHR5Rm4sc3luYzpFeHQuZW1wdHlGbixnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdob3N0fSxnZXRHaG9zdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdob3N0fSxnZXRQcm94eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3h5fSxoaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5naG9zdCl7aWYodGhpcy5wcm94eSl7dGhpcy5wcm94eS5yZW1vdmUoKTtkZWxldGUgdGhpcy5wcm94eX10aGlzLnBhbmVsLmVsLmRvbS5zdHlsZS5kaXNwbGF5PSIiO3RoaXMuZ2hvc3QucmVtb3ZlKCk7ZGVsZXRlIHRoaXMuZ2hvc3R9fSxzaG93OmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ2hvc3Qpe3RoaXMuZ2hvc3Q9dGhpcy5wYW5lbC5jcmVhdGVHaG9zdCh0aGlzLnBhbmVsLmluaXRpYWxDb25maWcuY2xzLHVuZGVmaW5lZCxFeHQuZ2V0Qm9keSgpKTt0aGlzLmdob3N0LnNldFhZKHRoaXMucGFuZWwuZWwuZ2V0WFkoKSk7aWYodGhpcy5pbnNlcnRQcm94eSl7dGhpcy5wcm94eT10aGlzLnBhbmVsLmVsLmluc2VydFNpYmxpbmcoe2NsczoieC1wYW5lbC1kZC1zcGFjZXIifSk7dGhpcy5wcm94eS5zZXRTaXplKHRoaXMucGFuZWwuZ2V0U2l6ZSgpKX10aGlzLnBhbmVsLmVsLmRvbS5zdHlsZS5kaXNwbGF5PSJub25lIn19LHJlcGFpcjpmdW5jdGlvbihiLGMsYSl7dGhpcy5oaWRlKCk7aWYodHlwZW9mIGM9PSJmdW5jdGlvbiIpe2MuY2FsbChhfHx0aGlzKX19LG1vdmVQcm94eTpmdW5jdGlvbihhLGIpe2lmKHRoaXMucHJveHkpe2EuaW5zZXJ0QmVmb3JlKHRoaXMucHJveHkuZG9tLGIpfX19KTtFeHQuUGFuZWwuREQ9RXh0LmV4dGVuZChFeHQuZGQuRHJhZ1NvdXJjZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXt0aGlzLnBhbmVsPWI7dGhpcy5kcmFnRGF0YT17cGFuZWw6Yn07dGhpcy5wcm94eT1uZXcgRXh0LmRkLlBhbmVsUHJveHkoYixhKTtFeHQuUGFuZWwuREQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYi5lbCxhKTt2YXIgZD1iLmhlYWRlcixjPWIuYm9keTtpZihkKXt0aGlzLnNldEhhbmRsZUVsSWQoZC5pZCk7Yz1iLmhlYWRlcn1jLnNldFN0eWxlKCJjdXJzb3IiLCJtb3ZlIik7dGhpcy5zY3JvbGw9ZmFsc2V9LHNob3dGcmFtZTpFeHQuZW1wdHlGbixzdGFydERyYWc6RXh0LmVtcHR5Rm4sYjRTdGFydERyYWc6ZnVuY3Rpb24oYSxiKXt0aGlzLnByb3h5LnNob3coKX0sYjRNb3VzZURvd246ZnVuY3Rpb24oYil7dmFyIGE9Yi5nZXRQYWdlWCgpLGM9Yi5nZXRQYWdlWSgpO3RoaXMuYXV0b09mZnNldChhLGMpfSxvbkluaXREcmFnOmZ1bmN0aW9uKGEsYil7dGhpcy5vblN0YXJ0RHJhZyhhLGIpO3JldHVybiB0cnVlfSxjcmVhdGVGcmFtZTpFeHQuZW1wdHlGbixnZXREcmFnRWw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHJveHkuZ2hvc3QuZG9tfSxlbmREcmFnOmZ1bmN0aW9uKGEpe3RoaXMucHJveHkuaGlkZSgpO3RoaXMucGFuZWwuc2F2ZVN0YXRlKCl9LGF1dG9PZmZzZXQ6ZnVuY3Rpb24oYSxiKXthLT10aGlzLnN0YXJ0UGFnZVg7Yi09dGhpcy5zdGFydFBhZ2VZO3RoaXMuc2V0RGVsdGEoYSxiKX19KTtFeHQuc3RhdGUuUHJvdmlkZXI9RXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRzKCJzdGF0ZWNoYW5nZSIpO3RoaXMuc3RhdGU9e307RXh0LnN0YXRlLlByb3ZpZGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0sZ2V0OmZ1bmN0aW9uKGIsYSl7cmV0dXJuIHR5cGVvZiB0aGlzLnN0YXRlW2JdPT0idW5kZWZpbmVkIj9hOnRoaXMuc3RhdGVbYl19LGNsZWFyOmZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLnN0YXRlW2FdO3RoaXMuZmlyZUV2ZW50KCJzdGF0ZWNoYW5nZSIsdGhpcyxhLG51bGwpfSxzZXQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnN0YXRlW2FdPWI7dGhpcy5maXJlRXZlbnQoInN0YXRlY2hhbmdlIix0aGlzLGEsYil9LGRlY29kZVZhbHVlOmZ1bmN0aW9uKGIpe3ZhciBlPS9eKGF8bnxkfGJ8c3xvfGUpXDooLiopJC8saD1lLmV4ZWModW5lc2NhcGUoYikpLGQsYyxhLGc7aWYoIWh8fCFoWzFdKXtyZXR1cm59Yz1oWzFdO2E9aFsyXTtzd2l0Y2goYyl7Y2FzZSJlIjpyZXR1cm4gbnVsbDtjYXNlIm4iOnJldHVybiBwYXJzZUZsb2F0KGEpO2Nhc2UiZCI6cmV0dXJuIG5ldyBEYXRlKERhdGUucGFyc2UoYSkpO2Nhc2UiYiI6cmV0dXJuKGE9PSIxIik7Y2FzZSJhIjpkPVtdO2lmKGEhPSIiKXtFeHQuZWFjaChhLnNwbGl0KCJeIiksZnVuY3Rpb24oaSl7ZC5wdXNoKHRoaXMuZGVjb2RlVmFsdWUoaSkpfSx0aGlzKX1yZXR1cm4gZDtjYXNlIm8iOmQ9e307aWYoYSE9IiIpe0V4dC5lYWNoKGEuc3BsaXQoIl4iKSxmdW5jdGlvbihpKXtnPWkuc3BsaXQoIj0iKTtkW2dbMF1dPXRoaXMuZGVjb2RlVmFsdWUoZ1sxXSl9LHRoaXMpfXJldHVybiBkO2RlZmF1bHQ6cmV0dXJuIGF9fSxlbmNvZGVWYWx1ZTpmdW5jdGlvbihjKXt2YXIgYixnPSIiLGU9MCxhLGQ7aWYoYz09bnVsbCl7cmV0dXJuImU6MSJ9ZWxzZXtpZih0eXBlb2YgYz09Im51bWJlciIpe2I9Im46IitjfWVsc2V7aWYodHlwZW9mIGM9PSJib29sZWFuIil7Yj0iYjoiKyhjPyIxIjoiMCIpfWVsc2V7aWYoRXh0LmlzRGF0ZShjKSl7Yj0iZDoiK2MudG9HTVRTdHJpbmcoKX1lbHNle2lmKEV4dC5pc0FycmF5KGMpKXtmb3IoYT1jLmxlbmd0aDtlPGE7ZSsrKXtnKz10aGlzLmVuY29kZVZhbHVlKGNbZV0pO2lmKGUhPWEtMSl7Zys9Il4ifX1iPSJhOiIrZ31lbHNle2lmKHR5cGVvZiBjPT0ib2JqZWN0Iil7Zm9yKGQgaW4gYyl7aWYodHlwZW9mIGNbZF0hPSJmdW5jdGlvbiImJmNbZF0hPT11bmRlZmluZWQpe2crPWQrIj0iK3RoaXMuZW5jb2RlVmFsdWUoY1tkXSkrIl4ifX1iPSJvOiIrZy5zdWJzdHJpbmcoMCxnLmxlbmd0aC0xKX1lbHNle2I9InM6IitjfX19fX19cmV0dXJuIGVzY2FwZShiKX19KTtFeHQuc3RhdGUuTWFuYWdlcj1mdW5jdGlvbigpe3ZhciBhPW5ldyBFeHQuc3RhdGUuUHJvdmlkZXIoKTtyZXR1cm57c2V0UHJvdmlkZXI6ZnVuY3Rpb24oYil7YT1ifSxnZXQ6ZnVuY3Rpb24oYyxiKXtyZXR1cm4gYS5nZXQoYyxiKX0sc2V0OmZ1bmN0aW9uKGIsYyl7YS5zZXQoYixjKX0sY2xlYXI6ZnVuY3Rpb24oYil7YS5jbGVhcihiKX0sZ2V0UHJvdmlkZXI6ZnVuY3Rpb24oKXtyZXR1cm4gYX19fSgpO0V4dC5zdGF0ZS5Db29raWVQcm92aWRlcj1FeHQuZXh0ZW5kKEV4dC5zdGF0ZS5Qcm92aWRlcix7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7RXh0LnN0YXRlLkNvb2tpZVByb3ZpZGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKTt0aGlzLnBhdGg9Ii8iO3RoaXMuZXhwaXJlcz1uZXcgRGF0ZShuZXcgRGF0ZSgpLmdldFRpbWUoKSsoMTAwMCo2MCo2MCoyNCo3KSk7dGhpcy5kb21haW49bnVsbDt0aGlzLnNlY3VyZT1mYWxzZTtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLnN0YXRlPXRoaXMucmVhZENvb2tpZXMoKX0sc2V0OmZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGI9PSJ1bmRlZmluZWQifHxiPT09bnVsbCl7dGhpcy5jbGVhcihhKTtyZXR1cm59dGhpcy5zZXRDb29raWUoYSxiKTtFeHQuc3RhdGUuQ29va2llUHJvdmlkZXIuc3VwZXJjbGFzcy5zZXQuY2FsbCh0aGlzLGEsYil9LGNsZWFyOmZ1bmN0aW9uKGEpe3RoaXMuY2xlYXJDb29raWUoYSk7RXh0LnN0YXRlLkNvb2tpZVByb3ZpZGVyLnN1cGVyY2xhc3MuY2xlYXIuY2FsbCh0aGlzLGEpfSxyZWFkQ29va2llczpmdW5jdGlvbigpe3ZhciBkPXt9LGg9ZG9jdW1lbnQuY29va2llKyI7IixiPS9ccz8oLio/KT0oLio/KTsvZyxnLGEsZTt3aGlsZSgoZz1iLmV4ZWMoaCkpIT1udWxsKXthPWdbMV07ZT1nWzJdO2lmKGEmJmEuc3Vic3RyaW5nKDAsMyk9PSJ5cy0iKXtkW2Euc3Vic3RyKDMpXT10aGlzLmRlY29kZVZhbHVlKGUpfX1yZXR1cm4gZH0sc2V0Q29va2llOmZ1bmN0aW9uKGEsYil7ZG9jdW1lbnQuY29va2llPSJ5cy0iK2ErIj0iK3RoaXMuZW5jb2RlVmFsdWUoYikrKCh0aGlzLmV4cGlyZXM9PW51bGwpPyIiOigiOyBleHBpcmVzPSIrdGhpcy5leHBpcmVzLnRvR01UU3RyaW5nKCkpKSsoKHRoaXMucGF0aD09bnVsbCk/IiI6KCI7IHBhdGg9Iit0aGlzLnBhdGgpKSsoKHRoaXMuZG9tYWluPT1udWxsKT8iIjooIjsgZG9tYWluPSIrdGhpcy5kb21haW4pKSsoKHRoaXMuc2VjdXJlPT10cnVlKT8iOyBzZWN1cmUiOiIiKX0sY2xlYXJDb29raWU6ZnVuY3Rpb24oYSl7ZG9jdW1lbnQuY29va2llPSJ5cy0iK2ErIj1udWxsOyBleHBpcmVzPVRodSwgMDEtSmFuLTcwIDAwOjAwOjAxIEdNVCIrKCh0aGlzLnBhdGg9PW51bGwpPyIiOigiOyBwYXRoPSIrdGhpcy5wYXRoKSkrKCh0aGlzLmRvbWFpbj09bnVsbCk/IiI6KCI7IGRvbWFpbj0iK3RoaXMuZG9tYWluKSkrKCh0aGlzLnNlY3VyZT09dHJ1ZSk/Ijsgc2VjdXJlIjoiIil9fSk7RXh0LkRhdGFWaWV3PUV4dC5leHRlbmQoRXh0LkJveENvbXBvbmVudCx7c2VsZWN0ZWRDbGFzczoieC12aWV3LXNlbGVjdGVkIixlbXB0eVRleHQ6IiIsZGVmZXJFbXB0eVRleHQ6dHJ1ZSx0cmFja092ZXI6ZmFsc2UsYmxvY2tSZWZyZXNoOmZhbHNlLGxhc3Q6ZmFsc2UsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5EYXRhVmlldy5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZihFeHQuaXNTdHJpbmcodGhpcy50cGwpfHxFeHQuaXNBcnJheSh0aGlzLnRwbCkpe3RoaXMudHBsPW5ldyBFeHQuWFRlbXBsYXRlKHRoaXMudHBsKX10aGlzLmFkZEV2ZW50cygiYmVmb3JlY2xpY2siLCJjbGljayIsIm1vdXNlZW50ZXIiLCJtb3VzZWxlYXZlIiwiY29udGFpbmVyY2xpY2siLCJkYmxjbGljayIsImNvbnRleHRtZW51IiwiY29udGFpbmVyY29udGV4dG1lbnUiLCJzZWxlY3Rpb25jaGFuZ2UiLCJiZWZvcmVzZWxlY3QiKTt0aGlzLnN0b3JlPUV4dC5TdG9yZU1nci5sb29rdXAodGhpcy5zdG9yZSk7dGhpcy5hbGw9bmV3IEV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZSgpO3RoaXMuc2VsZWN0ZWQ9bmV3IEV4dC5Db21wb3NpdGVFbGVtZW50TGl0ZSgpfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe0V4dC5EYXRhVmlldy5zdXBlcmNsYXNzLmFmdGVyUmVuZGVyLmNhbGwodGhpcyk7dGhpcy5tb24odGhpcy5nZXRUZW1wbGF0ZVRhcmdldCgpLHtjbGljazp0aGlzLm9uQ2xpY2ssZGJsY2xpY2s6dGhpcy5vbkRibENsaWNrLGNvbnRleHRtZW51OnRoaXMub25Db250ZXh0TWVudSxzY29wZTp0aGlzfSk7aWYodGhpcy5vdmVyQ2xhc3N8fHRoaXMudHJhY2tPdmVyKXt0aGlzLm1vbih0aGlzLmdldFRlbXBsYXRlVGFyZ2V0KCkse21vdXNlb3Zlcjp0aGlzLm9uTW91c2VPdmVyLG1vdXNlb3V0OnRoaXMub25Nb3VzZU91dCxzY29wZTp0aGlzfSl9aWYodGhpcy5zdG9yZSl7dGhpcy5iaW5kU3RvcmUodGhpcy5zdG9yZSx0cnVlKX19LHJlZnJlc2g6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyU2VsZWN0aW9ucyhmYWxzZSx0cnVlKTt2YXIgYj10aGlzLmdldFRlbXBsYXRlVGFyZ2V0KCksYT10aGlzLnN0b3JlLmdldFJhbmdlKCk7Yi51cGRhdGUoIiIpO2lmKGEubGVuZ3RoPDEpe2lmKCF0aGlzLmRlZmVyRW1wdHlUZXh0fHx0aGlzLmhhc1NraXBwZWRFbXB0eVRleHQpe2IudXBkYXRlKHRoaXMuZW1wdHlUZXh0KX10aGlzLmFsbC5jbGVhcigpfWVsc2V7dGhpcy50cGwub3ZlcndyaXRlKGIsdGhpcy5jb2xsZWN0RGF0YShhLDApKTt0aGlzLmFsbC5maWxsKEV4dC5xdWVyeSh0aGlzLml0ZW1TZWxlY3RvcixiLmRvbSkpO3RoaXMudXBkYXRlSW5kZXhlcygwKX10aGlzLmhhc1NraXBwZWRFbXB0eVRleHQ9dHJ1ZX0sZ2V0VGVtcGxhdGVUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0scHJlcGFyZURhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LGNvbGxlY3REYXRhOmZ1bmN0aW9uKGIsZSl7dmFyIGQ9W10sYz0wLGE9Yi5sZW5ndGg7Zm9yKDtjPGE7YysrKXtkW2QubGVuZ3RoXT10aGlzLnByZXBhcmVEYXRhKGJbY10uZGF0YSxlK2MsYltjXSl9cmV0dXJuIGR9LGJ1ZmZlclJlbmRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMudHBsLm92ZXJ3cml0ZShjLHRoaXMuY29sbGVjdERhdGEoYSxiKSk7cmV0dXJuIEV4dC5xdWVyeSh0aGlzLml0ZW1TZWxlY3RvcixjKX0sb25VcGRhdGU6ZnVuY3Rpb24oZyxhKXt2YXIgYj10aGlzLnN0b3JlLmluZGV4T2YoYSk7aWYoYj4tMSl7dmFyIGU9dGhpcy5pc1NlbGVjdGVkKGIpLGM9dGhpcy5hbGwuZWxlbWVudHNbYl0sZD10aGlzLmJ1ZmZlclJlbmRlcihbYV0sYilbMF07dGhpcy5hbGwucmVwbGFjZUVsZW1lbnQoYixkLHRydWUpO2lmKGUpe3RoaXMuc2VsZWN0ZWQucmVwbGFjZUVsZW1lbnQoYyxkKTt0aGlzLmFsbC5pdGVtKGIpLmFkZENsYXNzKHRoaXMuc2VsZWN0ZWRDbGFzcyl9dGhpcy51cGRhdGVJbmRleGVzKGIsYil9fSxvbkFkZDpmdW5jdGlvbihnLGQsZSl7aWYodGhpcy5hbGwuZ2V0Q291bnQoKT09PTApe3RoaXMucmVmcmVzaCgpO3JldHVybn12YXIgYz10aGlzLmJ1ZmZlclJlbmRlcihkLGUpLGgsYj10aGlzLmFsbC5lbGVtZW50cztpZihlPHRoaXMuYWxsLmdldENvdW50KCkpe2g9dGhpcy5hbGwuaXRlbShlKS5pbnNlcnRTaWJsaW5nKGMsImJlZm9yZSIsdHJ1ZSk7Yi5zcGxpY2UuYXBwbHkoYixbZSwwXS5jb25jYXQoYykpfWVsc2V7aD10aGlzLmFsbC5sYXN0KCkuaW5zZXJ0U2libGluZyhjLCJhZnRlciIsdHJ1ZSk7Yi5wdXNoLmFwcGx5KGIsYyl9dGhpcy51cGRhdGVJbmRleGVzKGUpfSxvblJlbW92ZTpmdW5jdGlvbihjLGEsYil7dGhpcy5kZXNlbGVjdChiKTt0aGlzLmFsbC5yZW1vdmVFbGVtZW50KGIsdHJ1ZSk7dGhpcy51cGRhdGVJbmRleGVzKGIpO2lmKHRoaXMuc3RvcmUuZ2V0Q291bnQoKT09PTApe3RoaXMucmVmcmVzaCgpfX0scmVmcmVzaE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5vblVwZGF0ZSh0aGlzLnN0b3JlLHRoaXMuc3RvcmUuZ2V0QXQoYSkpfSx1cGRhdGVJbmRleGVzOmZ1bmN0aW9uKGQsYyl7dmFyIGI9dGhpcy5hbGwuZWxlbWVudHM7ZD1kfHwwO2M9Y3x8KChjPT09MCk/MDooYi5sZW5ndGgtMSkpO2Zvcih2YXIgYT1kO2E8PWM7YSsrKXtiW2FdLnZpZXdJbmRleD1hfX0sZ2V0U3RvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZX0sYmluZFN0b3JlOmZ1bmN0aW9uKGEsYil7aWYoIWImJnRoaXMuc3RvcmUpe2lmKGEhPT10aGlzLnN0b3JlJiZ0aGlzLnN0b3JlLmF1dG9EZXN0cm95KXt0aGlzLnN0b3JlLmRlc3Ryb3koKX1lbHNle3RoaXMuc3RvcmUudW4oImJlZm9yZWxvYWQiLHRoaXMub25CZWZvcmVMb2FkLHRoaXMpO3RoaXMuc3RvcmUudW4oImRhdGFjaGFuZ2VkIix0aGlzLm9uRGF0YUNoYW5nZWQsdGhpcyk7dGhpcy5zdG9yZS51bigiYWRkIix0aGlzLm9uQWRkLHRoaXMpO3RoaXMuc3RvcmUudW4oInJlbW92ZSIsdGhpcy5vblJlbW92ZSx0aGlzKTt0aGlzLnN0b3JlLnVuKCJ1cGRhdGUiLHRoaXMub25VcGRhdGUsdGhpcyk7dGhpcy5zdG9yZS51bigiY2xlYXIiLHRoaXMucmVmcmVzaCx0aGlzKX1pZighYSl7dGhpcy5zdG9yZT1udWxsfX1pZihhKXthPUV4dC5TdG9yZU1nci5sb29rdXAoYSk7YS5vbih7c2NvcGU6dGhpcyxiZWZvcmVsb2FkOnRoaXMub25CZWZvcmVMb2FkLGRhdGFjaGFuZ2VkOnRoaXMub25EYXRhQ2hhbmdlZCxhZGQ6dGhpcy5vbkFkZCxyZW1vdmU6dGhpcy5vblJlbW92ZSx1cGRhdGU6dGhpcy5vblVwZGF0ZSxjbGVhcjp0aGlzLnJlZnJlc2h9KX10aGlzLnN0b3JlPWE7aWYoYSl7dGhpcy5yZWZyZXNoKCl9fSxvbkRhdGFDaGFuZ2VkOmZ1bmN0aW9uKCl7aWYodGhpcy5ibG9ja1JlZnJlc2ghPT10cnVlKXt0aGlzLnJlZnJlc2guYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sZmluZEl0ZW1Gcm9tQ2hpbGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5mbHkoYSkuZmluZFBhcmVudCh0aGlzLml0ZW1TZWxlY3Rvcix0aGlzLmdldFRlbXBsYXRlVGFyZ2V0KCkpfSxvbkNsaWNrOmZ1bmN0aW9uKGMpe3ZhciBiPWMuZ2V0VGFyZ2V0KHRoaXMuaXRlbVNlbGVjdG9yLHRoaXMuZ2V0VGVtcGxhdGVUYXJnZXQoKSksYTtpZihiKXthPXRoaXMuaW5kZXhPZihiKTtpZih0aGlzLm9uSXRlbUNsaWNrKGIsYSxjKSE9PWZhbHNlKXt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsYSxiLGMpfX1lbHNle2lmKHRoaXMuZmlyZUV2ZW50KCJjb250YWluZXJjbGljayIsdGhpcyxjKSE9PWZhbHNlKXt0aGlzLm9uQ29udGFpbmVyQ2xpY2soYyl9fX0sb25Db250YWluZXJDbGljazpmdW5jdGlvbihhKXt0aGlzLmNsZWFyU2VsZWN0aW9ucygpfSxvbkNvbnRleHRNZW51OmZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0VGFyZ2V0KHRoaXMuaXRlbVNlbGVjdG9yLHRoaXMuZ2V0VGVtcGxhdGVUYXJnZXQoKSk7aWYoYSl7dGhpcy5maXJlRXZlbnQoImNvbnRleHRtZW51Iix0aGlzLHRoaXMuaW5kZXhPZihhKSxhLGIpfWVsc2V7dGhpcy5maXJlRXZlbnQoImNvbnRhaW5lcmNvbnRleHRtZW51Iix0aGlzLGIpfX0sb25EYmxDbGljazpmdW5jdGlvbihiKXt2YXIgYT1iLmdldFRhcmdldCh0aGlzLml0ZW1TZWxlY3Rvcix0aGlzLmdldFRlbXBsYXRlVGFyZ2V0KCkpO2lmKGEpe3RoaXMuZmlyZUV2ZW50KCJkYmxjbGljayIsdGhpcyx0aGlzLmluZGV4T2YoYSksYSxiKX19LG9uTW91c2VPdmVyOmZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0VGFyZ2V0KHRoaXMuaXRlbVNlbGVjdG9yLHRoaXMuZ2V0VGVtcGxhdGVUYXJnZXQoKSk7aWYoYSYmYSE9PXRoaXMubGFzdEl0ZW0pe3RoaXMubGFzdEl0ZW09YTtFeHQuZmx5KGEpLmFkZENsYXNzKHRoaXMub3ZlckNsYXNzKTt0aGlzLmZpcmVFdmVudCgibW91c2VlbnRlciIsdGhpcyx0aGlzLmluZGV4T2YoYSksYSxiKX19LG9uTW91c2VPdXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5sYXN0SXRlbSl7aWYoIWEud2l0aGluKHRoaXMubGFzdEl0ZW0sdHJ1ZSx0cnVlKSl7RXh0LmZseSh0aGlzLmxhc3RJdGVtKS5yZW1vdmVDbGFzcyh0aGlzLm92ZXJDbGFzcyk7dGhpcy5maXJlRXZlbnQoIm1vdXNlbGVhdmUiLHRoaXMsdGhpcy5pbmRleE9mKHRoaXMubGFzdEl0ZW0pLHRoaXMubGFzdEl0ZW0sYSk7ZGVsZXRlIHRoaXMubGFzdEl0ZW19fX0sb25JdGVtQ2xpY2s6ZnVuY3Rpb24oYixhLGMpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVjbGljayIsdGhpcyxhLGIsYyk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWlmKHRoaXMubXVsdGlTZWxlY3Qpe3RoaXMuZG9NdWx0aVNlbGVjdGlvbihiLGEsYyk7Yy5wcmV2ZW50RGVmYXVsdCgpfWVsc2V7aWYodGhpcy5zaW5nbGVTZWxlY3Qpe3RoaXMuZG9TaW5nbGVTZWxlY3Rpb24oYixhLGMpO2MucHJldmVudERlZmF1bHQoKX19cmV0dXJuIHRydWV9LGRvU2luZ2xlU2VsZWN0aW9uOmZ1bmN0aW9uKGIsYSxjKXtpZihjLmN0cmxLZXkmJnRoaXMuaXNTZWxlY3RlZChhKSl7dGhpcy5kZXNlbGVjdChhKX1lbHNle3RoaXMuc2VsZWN0KGEsZmFsc2UpfX0sZG9NdWx0aVNlbGVjdGlvbjpmdW5jdGlvbihjLGEsZCl7aWYoZC5zaGlmdEtleSYmdGhpcy5sYXN0IT09ZmFsc2Upe3ZhciBiPXRoaXMubGFzdDt0aGlzLnNlbGVjdFJhbmdlKGIsYSxkLmN0cmxLZXkpO3RoaXMubGFzdD1ifWVsc2V7aWYoKGQuY3RybEtleXx8dGhpcy5zaW1wbGVTZWxlY3QpJiZ0aGlzLmlzU2VsZWN0ZWQoYSkpe3RoaXMuZGVzZWxlY3QoYSl9ZWxzZXt0aGlzLnNlbGVjdChhLGQuY3RybEtleXx8ZC5zaGlmdEtleXx8dGhpcy5zaW1wbGVTZWxlY3QpfX19LGdldFNlbGVjdGlvbkNvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0ZWQuZ2V0Q291bnQoKX0sZ2V0U2VsZWN0ZWROb2RlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGVkLmVsZW1lbnRzfSxnZXRTZWxlY3RlZEluZGV4ZXM6ZnVuY3Rpb24oKXt2YXIgYj1bXSxkPXRoaXMuc2VsZWN0ZWQuZWxlbWVudHMsYz0wLGE9ZC5sZW5ndGg7Zm9yKDtjPGE7YysrKXtiLnB1c2goZFtjXS52aWV3SW5kZXgpfXJldHVybiBifSxnZXRTZWxlY3RlZFJlY29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSZWNvcmRzKHRoaXMuc2VsZWN0ZWQuZWxlbWVudHMpfSxnZXRSZWNvcmRzOmZ1bmN0aW9uKGMpe3ZhciBiPVtdLGQ9MCxhPWMubGVuZ3RoO2Zvcig7ZDxhO2QrKyl7YltiLmxlbmd0aF09dGhpcy5zdG9yZS5nZXRBdChjW2RdLnZpZXdJbmRleCl9cmV0dXJuIGJ9LGdldFJlY29yZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zdG9yZS5nZXRBdChhLnZpZXdJbmRleCl9LGNsZWFyU2VsZWN0aW9uczpmdW5jdGlvbihhLGIpe2lmKCh0aGlzLm11bHRpU2VsZWN0fHx0aGlzLnNpbmdsZVNlbGVjdCkmJnRoaXMuc2VsZWN0ZWQuZ2V0Q291bnQoKT4wKXtpZighYil7dGhpcy5zZWxlY3RlZC5yZW1vdmVDbGFzcyh0aGlzLnNlbGVjdGVkQ2xhc3MpfXRoaXMuc2VsZWN0ZWQuY2xlYXIoKTt0aGlzLmxhc3Q9ZmFsc2U7aWYoIWEpe3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsdGhpcy5zZWxlY3RlZC5lbGVtZW50cyl9fX0saXNTZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZWxlY3RlZC5jb250YWlucyh0aGlzLmdldE5vZGUoYSkpfSxkZXNlbGVjdDpmdW5jdGlvbihhKXtpZih0aGlzLmlzU2VsZWN0ZWQoYSkpe2E9dGhpcy5nZXROb2RlKGEpO3RoaXMuc2VsZWN0ZWQucmVtb3ZlRWxlbWVudChhKTtpZih0aGlzLmxhc3Q9PWEudmlld0luZGV4KXt0aGlzLmxhc3Q9ZmFsc2V9RXh0LmZseShhKS5yZW1vdmVDbGFzcyh0aGlzLnNlbGVjdGVkQ2xhc3MpO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsdGhpcy5zZWxlY3RlZC5lbGVtZW50cyl9fSxzZWxlY3Q6ZnVuY3Rpb24oZCxnLGIpe2lmKEV4dC5pc0FycmF5KGQpKXtpZighZyl7dGhpcy5jbGVhclNlbGVjdGlvbnModHJ1ZSl9Zm9yKHZhciBjPTAsYT1kLmxlbmd0aDtjPGE7YysrKXt0aGlzLnNlbGVjdChkW2NdLHRydWUsdHJ1ZSl9aWYoIWIpe3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsdGhpcy5zZWxlY3RlZC5lbGVtZW50cyl9fWVsc2V7dmFyIGU9dGhpcy5nZXROb2RlKGQpO2lmKCFnKXt0aGlzLmNsZWFyU2VsZWN0aW9ucyh0cnVlKX1pZihlJiYhdGhpcy5pc1NlbGVjdGVkKGUpKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc2VsZWN0Iix0aGlzLGUsdGhpcy5zZWxlY3RlZC5lbGVtZW50cykhPT1mYWxzZSl7RXh0LmZseShlKS5hZGRDbGFzcyh0aGlzLnNlbGVjdGVkQ2xhc3MpO3RoaXMuc2VsZWN0ZWQuYWRkKGUpO3RoaXMubGFzdD1lLnZpZXdJbmRleDtpZighYil7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbGVjdGVkLmVsZW1lbnRzKX19fX19LHNlbGVjdFJhbmdlOmZ1bmN0aW9uKGMsYSxiKXtpZighYil7dGhpcy5jbGVhclNlbGVjdGlvbnModHJ1ZSl9dGhpcy5zZWxlY3QodGhpcy5nZXROb2RlcyhjLGEpLHRydWUpfSxnZXROb2RlOmZ1bmN0aW9uKGIpe2lmKEV4dC5pc1N0cmluZyhiKSl7cmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGIpfWVsc2V7aWYoRXh0LmlzTnVtYmVyKGIpKXtyZXR1cm4gdGhpcy5hbGwuZWxlbWVudHNbYl19ZWxzZXtpZihiIGluc3RhbmNlb2YgRXh0LmRhdGEuUmVjb3JkKXt2YXIgYT10aGlzLnN0b3JlLmluZGV4T2YoYik7cmV0dXJuIHRoaXMuYWxsLmVsZW1lbnRzW2FdfX19cmV0dXJuIGJ9LGdldE5vZGVzOmZ1bmN0aW9uKGUsYSl7dmFyIGQ9dGhpcy5hbGwuZWxlbWVudHMsYj1bXSxjO2U9ZXx8MDthPSFFeHQuaXNEZWZpbmVkKGEpP01hdGgubWF4KGQubGVuZ3RoLTEsMCk6YTtpZihlPD1hKXtmb3IoYz1lO2M8PWEmJmRbY107YysrKXtiLnB1c2goZFtjXSl9fWVsc2V7Zm9yKGM9ZTtjPj1hJiZkW2NdO2MtLSl7Yi5wdXNoKGRbY10pfX1yZXR1cm4gYn0saW5kZXhPZjpmdW5jdGlvbihhKXthPXRoaXMuZ2V0Tm9kZShhKTtpZihFeHQuaXNOdW1iZXIoYS52aWV3SW5kZXgpKXtyZXR1cm4gYS52aWV3SW5kZXh9cmV0dXJuIHRoaXMuYWxsLmluZGV4T2YoYSl9LG9uQmVmb3JlTG9hZDpmdW5jdGlvbigpe2lmKHRoaXMubG9hZGluZ1RleHQpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKGZhbHNlLHRydWUpO3RoaXMuZ2V0VGVtcGxhdGVUYXJnZXQoKS51cGRhdGUoJzxkaXYgY2xhc3M9ImxvYWRpbmctaW5kaWNhdG9yIj4nK3RoaXMubG9hZGluZ1RleHQrIjwvZGl2PiIpO3RoaXMuYWxsLmNsZWFyKCl9fSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmFsbC5jbGVhcigpO3RoaXMuc2VsZWN0ZWQuY2xlYXIoKTtFeHQuRGF0YVZpZXcuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKTt0aGlzLmJpbmRTdG9yZShudWxsKX19KTtFeHQuRGF0YVZpZXcucHJvdG90eXBlLnNldFN0b3JlPUV4dC5EYXRhVmlldy5wcm90b3R5cGUuYmluZFN0b3JlO0V4dC5yZWcoImRhdGF2aWV3IixFeHQuRGF0YVZpZXcpO0V4dC5saXN0Lkxpc3RWaWV3PUV4dC5leHRlbmQoRXh0LkRhdGFWaWV3LHtpdGVtU2VsZWN0b3I6ImRsIixzZWxlY3RlZENsYXNzOiJ4LWxpc3Qtc2VsZWN0ZWQiLG92ZXJDbGFzczoieC1saXN0LW92ZXIiLHNjcm9sbE9mZnNldDp1bmRlZmluZWQsY29sdW1uUmVzaXplOnRydWUsY29sdW1uU29ydDp0cnVlLG1heENvbHVtbldpZHRoOkV4dC5pc0lFPzk5OjEwMCxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5jb2x1bW5SZXNpemUpe3RoaXMuY29sUmVzaXplcj1uZXcgRXh0Lmxpc3QuQ29sdW1uUmVzaXplcih0aGlzLmNvbFJlc2l6ZXIpO3RoaXMuY29sUmVzaXplci5pbml0KHRoaXMpfWlmKHRoaXMuY29sdW1uU29ydCl7dGhpcy5jb2xTb3J0ZXI9bmV3IEV4dC5saXN0LlNvcnRlcih0aGlzLmNvbHVtblNvcnQpO3RoaXMuY29sU29ydGVyLmluaXQodGhpcyl9aWYoIXRoaXMuaW50ZXJuYWxUcGwpe3RoaXMuaW50ZXJuYWxUcGw9bmV3IEV4dC5YVGVtcGxhdGUoJzxkaXYgY2xhc3M9IngtbGlzdC1oZWFkZXIiPjxkaXYgY2xhc3M9IngtbGlzdC1oZWFkZXItaW5uZXIiPicsJzx0cGwgZm9yPSJjb2x1bW5zIj4nLCc8ZGl2IHN0eWxlPSJ3aWR0aDp7W3ZhbHVlcy53aWR0aCoxMDBdfSU7dGV4dC1hbGlnbjp7YWxpZ259OyI+PGVtIHVuc2VsZWN0YWJsZT0ib24iIGlkPSInLHRoaXMuaWQsJy14bGhkLXsjfSI+Jywie2hlYWRlcn0iLCI8L2VtPjwvZGl2PiIsIjwvdHBsPiIsJzxkaXYgY2xhc3M9IngtY2xlYXIiPjwvZGl2PicsIjwvZGl2PjwvZGl2PiIsJzxkaXYgY2xhc3M9IngtbGlzdC1ib2R5Ij48ZGl2IGNsYXNzPSJ4LWxpc3QtYm9keS1pbm5lciI+JywiPC9kaXY+PC9kaXY+Iil9aWYoIXRoaXMudHBsKXt0aGlzLnRwbD1uZXcgRXh0LlhUZW1wbGF0ZSgnPHRwbCBmb3I9InJvd3MiPicsIjxkbD4iLCc8dHBsIGZvcj0icGFyZW50LmNvbHVtbnMiPicsJzxkdCBzdHlsZT0id2lkdGg6e1t2YWx1ZXMud2lkdGgqMTAwXX0lO3RleHQtYWxpZ246e2FsaWdufTsiPicsJzxlbSB1bnNlbGVjdGFibGU9Im9uIjx0cGwgaWY9ImNscyI+IGNsYXNzPSJ7Y2xzfTwvdHBsPiI+Jywie1t2YWx1ZXMudHBsLmFwcGx5KHBhcmVudCldfSIsIjwvZW0+PC9kdD4iLCI8L3RwbD4iLCc8ZGl2IGNsYXNzPSJ4LWNsZWFyIj48L2Rpdj4nLCI8L2RsPiIsIjwvdHBsPiIpfXZhciBsPXRoaXMuY29sdW1ucyxoPTAsaz0wLG09bC5sZW5ndGgsYj1bXTtmb3IodmFyIGc9MDtnPG07ZysrKXt2YXIgbj1sW2ddO2lmKCFuLmlzQ29sdW1uKXtuLnh0eXBlPW4ueHR5cGU/KC9ebHYvLnRlc3Qobi54dHlwZSk/bi54dHlwZToibHYiK24ueHR5cGUpOiJsdmNvbHVtbiI7bj1FeHQuY3JlYXRlKG4pfWlmKG4ud2lkdGgpe2grPW4ud2lkdGgqMTAwO2lmKGg+dGhpcy5tYXhDb2x1bW5XaWR0aCl7bi53aWR0aC09KGgtdGhpcy5tYXhDb2x1bW5XaWR0aCkvMTAwfWsrK31iLnB1c2gobil9bD10aGlzLmNvbHVtbnM9YjtpZihrPG0pe3ZhciBkPW0taztpZihoPHRoaXMubWF4Q29sdW1uV2lkdGgpe3ZhciBhPSgodGhpcy5tYXhDb2x1bW5XaWR0aC1oKS9kKS8xMDA7Zm9yKHZhciBlPTA7ZTxtO2UrKyl7dmFyIG49bFtlXTtpZighbi53aWR0aCl7bi53aWR0aD1hfX19fUV4dC5saXN0Lkxpc3RWaWV3LnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpfSxvblJlbmRlcjpmdW5jdGlvbigpe3RoaXMuYXV0b0VsPXtjbHM6IngtbGlzdC13cmFwIn07RXh0Lmxpc3QuTGlzdFZpZXcuc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5pbnRlcm5hbFRwbC5vdmVyd3JpdGUodGhpcy5lbCx7Y29sdW1uczp0aGlzLmNvbHVtbnN9KTt0aGlzLmlubmVyQm9keT1FeHQuZ2V0KHRoaXMuZWwuZG9tLmNoaWxkTm9kZXNbMV0uZmlyc3RDaGlsZCk7dGhpcy5pbm5lckhkPUV4dC5nZXQodGhpcy5lbC5kb20uZmlyc3RDaGlsZC5maXJzdENoaWxkKTtpZih0aGlzLmhpZGVIZWFkZXJzKXt0aGlzLmVsLmRvbS5maXJzdENoaWxkLnN0eWxlLmRpc3BsYXk9Im5vbmUifX0sZ2V0VGVtcGxhdGVUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbm5lckJvZHl9LGNvbGxlY3REYXRhOmZ1bmN0aW9uKCl7dmFyIGE9RXh0Lmxpc3QuTGlzdFZpZXcuc3VwZXJjbGFzcy5jb2xsZWN0RGF0YS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJue2NvbHVtbnM6dGhpcy5jb2x1bW5zLHJvd3M6YX19LHZlcmlmeUludGVybmFsU2l6ZTpmdW5jdGlvbigpe2lmKHRoaXMubGFzdFNpemUpe3RoaXMub25SZXNpemUodGhpcy5sYXN0U2l6ZS53aWR0aCx0aGlzLmxhc3RTaXplLmhlaWdodCl9fSxvblJlc2l6ZTpmdW5jdGlvbihjLGUpe3ZhciBiPXRoaXMuaW5uZXJCb2R5LmRvbSxnPXRoaXMuaW5uZXJIZC5kb20sZD1jLUV4dC5udW0odGhpcy5zY3JvbGxPZmZzZXQsRXh0LmdldFNjcm9sbEJhcldpZHRoKCkpKyJweCIsYTtpZighYil7cmV0dXJufWE9Yi5wYXJlbnROb2RlO2lmKEV4dC5pc051bWJlcihjKSl7aWYodGhpcy5yZXNlcnZlU2Nyb2xsT2Zmc2V0fHwoKGEub2Zmc2V0V2lkdGgtYS5jbGllbnRXaWR0aCk+MTApKXtiLnN0eWxlLndpZHRoPWQ7Zy5zdHlsZS53aWR0aD1kfWVsc2V7Yi5zdHlsZS53aWR0aD1jKyJweCI7Zy5zdHlsZS53aWR0aD1jKyJweCI7c2V0VGltZW91dChmdW5jdGlvbigpe2lmKChhLm9mZnNldFdpZHRoLWEuY2xpZW50V2lkdGgpPjEwKXtiLnN0eWxlLndpZHRoPWQ7Zy5zdHlsZS53aWR0aD1kfX0sMTApfX1pZihFeHQuaXNOdW1iZXIoZSkpe2Euc3R5bGUuaGVpZ2h0PU1hdGgubWF4KDAsZS1nLnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0KSsicHgifX0sdXBkYXRlSW5kZXhlczpmdW5jdGlvbigpe0V4dC5saXN0Lkxpc3RWaWV3LnN1cGVyY2xhc3MudXBkYXRlSW5kZXhlcy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy52ZXJpZnlJbnRlcm5hbFNpemUoKX0sZmluZEhlYWRlckluZGV4OmZ1bmN0aW9uKGcpe2c9Zy5kb218fGc7dmFyIGE9Zy5wYXJlbnROb2RlLGQ9YS5wYXJlbnROb2RlLmNoaWxkTm9kZXMsYj0wLGU7Zm9yKDtlPWRbYl07YisrKXtpZihlPT1hKXtyZXR1cm4gYn19cmV0dXJuIC0xfSxzZXRIZFdpZHRoczpmdW5jdGlvbigpe3ZhciBkPXRoaXMuaW5uZXJIZC5kb20uZ2V0RWxlbWVudHNCeVRhZ05hbWUoImRpdiIpLGM9MCxiPXRoaXMuY29sdW1ucyxhPWIubGVuZ3RoO2Zvcig7YzxhO2MrKyl7ZFtjXS5zdHlsZS53aWR0aD0oYltjXS53aWR0aCoxMDApKyIlIn19fSk7RXh0LnJlZygibGlzdHZpZXciLEV4dC5saXN0Lkxpc3RWaWV3KTtFeHQuTGlzdFZpZXc9RXh0Lmxpc3QuTGlzdFZpZXc7RXh0Lmxpc3QuQ29sdW1uPUV4dC5leHRlbmQoT2JqZWN0LHtpc0NvbHVtbjp0cnVlLGFsaWduOiJsZWZ0IixoZWFkZXI6IiIsd2lkdGg6bnVsbCxjbHM6IiIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7aWYoIWEudHBsKXthLnRwbD1uZXcgRXh0LlhUZW1wbGF0ZSgieyIrYS5kYXRhSW5kZXgrIn0iKX1lbHNle2lmKEV4dC5pc1N0cmluZyhhLnRwbCkpe2EudHBsPW5ldyBFeHQuWFRlbXBsYXRlKGEudHBsKX19RXh0LmFwcGx5KHRoaXMsYSl9fSk7RXh0LnJlZygibHZjb2x1bW4iLEV4dC5saXN0LkNvbHVtbik7RXh0Lmxpc3QuTnVtYmVyQ29sdW1uPUV4dC5leHRlbmQoRXh0Lmxpc3QuQ29sdW1uLHtmb3JtYXQ6IjAsMDAwLjAwIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXthLnRwbD1hLnRwbHx8bmV3IEV4dC5YVGVtcGxhdGUoInsiK2EuZGF0YUluZGV4Kyc6bnVtYmVyKCInKyhhLmZvcm1hdHx8dGhpcy5mb3JtYXQpKyciKX0nKTtFeHQubGlzdC5OdW1iZXJDb2x1bW4uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSl9fSk7RXh0LnJlZygibHZudW1iZXJjb2x1bW4iLEV4dC5saXN0Lk51bWJlckNvbHVtbik7RXh0Lmxpc3QuRGF0ZUNvbHVtbj1FeHQuZXh0ZW5kKEV4dC5saXN0LkNvbHVtbix7Zm9ybWF0OiJtL2QvWSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7YS50cGw9YS50cGx8fG5ldyBFeHQuWFRlbXBsYXRlKCJ7IithLmRhdGFJbmRleCsnOmRhdGUoIicrKGEuZm9ybWF0fHx0aGlzLmZvcm1hdCkrJyIpfScpO0V4dC5saXN0LkRhdGVDb2x1bW4uc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYSl9fSk7RXh0LnJlZygibHZkYXRlY29sdW1uIixFeHQubGlzdC5EYXRlQ29sdW1uKTtFeHQubGlzdC5Cb29sZWFuQ29sdW1uPUV4dC5leHRlbmQoRXh0Lmxpc3QuQ29sdW1uLHt0cnVlVGV4dDoidHJ1ZSIsZmFsc2VUZXh0OiJmYWxzZSIsdW5kZWZpbmVkVGV4dDoiJiMxNjA7Iixjb25zdHJ1Y3RvcjpmdW5jdGlvbihlKXtlLnRwbD1lLnRwbHx8bmV3IEV4dC5YVGVtcGxhdGUoInsiK2UuZGF0YUluZGV4KyI6dGhpcy5mb3JtYXR9Iik7dmFyIGI9dGhpcy50cnVlVGV4dCxkPXRoaXMuZmFsc2VUZXh0LGE9dGhpcy51bmRlZmluZWRUZXh0O2UudHBsLmZvcm1hdD1mdW5jdGlvbihjKXtpZihjPT09dW5kZWZpbmVkKXtyZXR1cm4gYX1pZighY3x8Yz09PSJmYWxzZSIpe3JldHVybiBkfXJldHVybiBifTtFeHQubGlzdC5EYXRlQ29sdW1uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGUpfX0pO0V4dC5yZWcoImx2Ym9vbGVhbmNvbHVtbiIsRXh0Lmxpc3QuQm9vbGVhbkNvbHVtbik7RXh0Lmxpc3QuQ29sdW1uUmVzaXplcj1FeHQuZXh0ZW5kKEV4dC51dGlsLk9ic2VydmFibGUse21pblBjdDowLjA1LGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO0V4dC5saXN0LkNvbHVtblJlc2l6ZXIuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMudmlldz1hO2Eub24oInJlbmRlciIsdGhpcy5pbml0RXZlbnRzLHRoaXMpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKGEpe2EubW9uKGEuaW5uZXJIZCwibW91c2Vtb3ZlIix0aGlzLmhhbmRsZUhkTW92ZSx0aGlzKTt0aGlzLnRyYWNrZXI9bmV3IEV4dC5kZC5EcmFnVHJhY2tlcih7b25CZWZvcmVTdGFydDp0aGlzLm9uQmVmb3JlU3RhcnQuY3JlYXRlRGVsZWdhdGUodGhpcyksb25TdGFydDp0aGlzLm9uU3RhcnQuY3JlYXRlRGVsZWdhdGUodGhpcyksb25EcmFnOnRoaXMub25EcmFnLmNyZWF0ZURlbGVnYXRlKHRoaXMpLG9uRW5kOnRoaXMub25FbmQuY3JlYXRlRGVsZWdhdGUodGhpcyksdG9sZXJhbmNlOjMsYXV0b1N0YXJ0OjMwMH0pO3RoaXMudHJhY2tlci5pbml0RWwoYS5pbm5lckhkKTthLm9uKCJiZWZvcmVkZXN0cm95Iix0aGlzLnRyYWNrZXIuZGVzdHJveSx0aGlzLnRyYWNrZXIpfSxoYW5kbGVIZE1vdmU6ZnVuY3Rpb24oaSxkKXt2YXIgYz01LGI9aS5nZXRQYWdlWCgpLGo9aS5nZXRUYXJnZXQoImVtIiwzLHRydWUpO2lmKGope3ZhciBoPWouZ2V0UmVnaW9uKCksZz1qLmRvbS5zdHlsZSxhPWouZG9tLnBhcmVudE5vZGU7aWYoYi1oLmxlZnQ8PWMmJmEhPWEucGFyZW50Tm9kZS5maXJzdENoaWxkKXt0aGlzLmFjdGl2ZUhkPUV4dC5nZXQoYS5wcmV2aW91c1NpYmxpbmcuZmlyc3RDaGlsZCk7Zy5jdXJzb3I9RXh0LmlzV2ViS2l0PyJlLXJlc2l6ZSI6ImNvbC1yZXNpemUifWVsc2V7aWYoaC5yaWdodC1iPD1jJiZhIT1hLnBhcmVudE5vZGUubGFzdENoaWxkLnByZXZpb3VzU2libGluZyl7dGhpcy5hY3RpdmVIZD1qO2cuY3Vyc29yPUV4dC5pc1dlYktpdD8idy1yZXNpemUiOiJjb2wtcmVzaXplIn1lbHNle2RlbGV0ZSB0aGlzLmFjdGl2ZUhkO2cuY3Vyc29yPSIifX19fSxvbkJlZm9yZVN0YXJ0OmZ1bmN0aW9uKGEpe3RoaXMuZHJhZ0hkPXRoaXMuYWN0aXZlSGQ7cmV0dXJuICEhdGhpcy5kcmFnSGR9LG9uU3RhcnQ6ZnVuY3Rpb24oZyl7dmFyIGQ9dGhpcyxiPWQudmlldyxjPWQuZHJhZ0hkLGE9ZC50cmFja2VyLmdldFhZKClbMF07ZC5wcm94eT1iLmVsLmNyZWF0ZUNoaWxkKHtjbHM6IngtbGlzdC1yZXNpemVyIn0pO2QuZHJhZ1g9Yy5nZXRYKCk7ZC5oZWFkZXJJbmRleD1iLmZpbmRIZWFkZXJJbmRleChjKTtkLmhlYWRlcnNEaXNhYmxlZD1iLmRpc2FibGVIZWFkZXJzO2IuZGlzYWJsZUhlYWRlcnM9dHJ1ZTtkLnByb3h5LnNldEhlaWdodChiLmVsLmdldEhlaWdodCgpKTtkLnByb3h5LnNldFgoZC5kcmFnWCk7ZC5wcm94eS5zZXRXaWR0aChhLWQuZHJhZ1gpO3RoaXMuc2V0Qm91bmRhcmllcygpfSxzZXRCb3VuZGFyaWVzOmZ1bmN0aW9uKGope3ZhciBrPXRoaXMudmlldyxoPXRoaXMuaGVhZGVySW5kZXgsYz1rLmlubmVySGQuZ2V0V2lkdGgoKSxqPWsuaW5uZXJIZC5nZXRYKCksYj1NYXRoLmNlaWwoYyp0aGlzLm1pblBjdCksbD1jLWIsZT1rLmNvbHVtbnMubGVuZ3RoLGQ9ay5pbm5lckhkLnNlbGVjdCgiZW0iLHRydWUpLGc9YitqLGE9bCtqLGk7aWYoZT09Mil7dGhpcy5taW5YPWc7dGhpcy5tYXhYPWF9ZWxzZXtpPWQuaXRlbShoKzIpO3RoaXMubWluWD1kLml0ZW0oaCkuZ2V0WCgpK2I7dGhpcy5tYXhYPWk/aS5nZXRYKCktYjphO2lmKGg9PTApe3RoaXMubWluWD1nfWVsc2V7aWYoaD09ZS0yKXt0aGlzLm1heFg9YX19fX0sb25EcmFnOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsYT1iLnRyYWNrZXIuZ2V0WFkoKVswXS5jb25zdHJhaW4oYi5taW5YLGIubWF4WCk7Yi5wcm94eS5zZXRXaWR0aChhLXRoaXMuZHJhZ1gpfSxvbkVuZDpmdW5jdGlvbihpKXt2YXIgZz10aGlzLnByb3h5LmdldFdpZHRoKCksaD10aGlzLmhlYWRlckluZGV4LGw9dGhpcy52aWV3LGM9bC5jb2x1bW5zLGI9bC5pbm5lckhkLmdldFdpZHRoKCksaz1NYXRoLmNlaWwoZypsLm1heENvbHVtbldpZHRoL2IpLzEwMCxkPXRoaXMuaGVhZGVyc0Rpc2FibGVkLG09Y1toXSxqPWNbaCsxXSxhPW0ud2lkdGgrai53aWR0aDt0aGlzLnByb3h5LnJlbW92ZSgpO20ud2lkdGg9aztqLndpZHRoPWEtaztkZWxldGUgdGhpcy5kcmFnSGQ7bC5zZXRIZFdpZHRocygpO2wucmVmcmVzaCgpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtsLmRpc2FibGVIZWFkZXJzPWR9LDEwMCl9fSk7RXh0Lkxpc3RWaWV3LkNvbHVtblJlc2l6ZXI9RXh0Lmxpc3QuQ29sdW1uUmVzaXplcjtFeHQubGlzdC5Tb3J0ZXI9RXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLHtzb3J0Q2xhc3NlczpbInNvcnQtYXNjIiwic29ydC1kZXNjIl0sY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7RXh0LmFwcGx5KHRoaXMsYSk7RXh0Lmxpc3QuU29ydGVyLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0saW5pdDpmdW5jdGlvbihhKXt0aGlzLnZpZXc9YTthLm9uKCJyZW5kZXIiLHRoaXMuaW5pdEV2ZW50cyx0aGlzKX0saW5pdEV2ZW50czpmdW5jdGlvbihhKXthLm1vbihhLmlubmVySGQsImNsaWNrIix0aGlzLm9uSGRDbGljayx0aGlzKTthLmlubmVySGQuc2V0U3R5bGUoImN1cnNvciIsInBvaW50ZXIiKTthLm1vbihhLnN0b3JlLCJkYXRhY2hhbmdlZCIsdGhpcy51cGRhdGVTb3J0U3RhdGUsdGhpcyk7dGhpcy51cGRhdGVTb3J0U3RhdGUuZGVmZXIoMTAsdGhpcyxbYS5zdG9yZV0pfSx1cGRhdGVTb3J0U3RhdGU6ZnVuY3Rpb24oYyl7dmFyIGc9Yy5nZXRTb3J0U3RhdGUoKTtpZighZyl7cmV0dXJufXRoaXMuc29ydFN0YXRlPWc7dmFyIGU9dGhpcy52aWV3LmNvbHVtbnMsaD0tMTtmb3IodmFyIGQ9MCxhPWUubGVuZ3RoO2Q8YTtkKyspe2lmKGVbZF0uZGF0YUluZGV4PT1nLmZpZWxkKXtoPWQ7YnJlYWt9fWlmKGghPS0xKXt2YXIgYj1nLmRpcmVjdGlvbjt0aGlzLnVwZGF0ZVNvcnRJY29uKGgsYil9fSx1cGRhdGVTb3J0SWNvbjpmdW5jdGlvbihiLGEpe3ZhciBkPXRoaXMuc29ydENsYXNzZXM7dmFyIGM9dGhpcy52aWV3LmlubmVySGQuc2VsZWN0KCJlbSIpLnJlbW92ZUNsYXNzKGQpO2MuaXRlbShiKS5hZGRDbGFzcyhkW2E9PSJERVNDIj8xOjBdKX0sb25IZENsaWNrOmZ1bmN0aW9uKGMpe3ZhciBiPWMuZ2V0VGFyZ2V0KCJlbSIsMyk7aWYoYiYmIXRoaXMudmlldy5kaXNhYmxlSGVhZGVycyl7dmFyIGE9dGhpcy52aWV3LmZpbmRIZWFkZXJJbmRleChiKTt0aGlzLnZpZXcuc3RvcmUuc29ydCh0aGlzLnZpZXcuY29sdW1uc1thXS5kYXRhSW5kZXgpfX19KTtFeHQuTGlzdFZpZXcuU29ydGVyPUV4dC5saXN0LlNvcnRlcjtFeHQuVGFiUGFuZWw9RXh0LmV4dGVuZChFeHQuUGFuZWwse2RlZmVycmVkUmVuZGVyOnRydWUsdGFiV2lkdGg6MTIwLG1pblRhYldpZHRoOjMwLHJlc2l6ZVRhYnM6ZmFsc2UsZW5hYmxlVGFiU2Nyb2xsOmZhbHNlLHNjcm9sbEluY3JlbWVudDowLHNjcm9sbFJlcGVhdEludGVydmFsOjQwMCxzY3JvbGxEdXJhdGlvbjowLjM1LGFuaW1TY3JvbGw6dHJ1ZSx0YWJQb3NpdGlvbjoidG9wIixiYXNlQ2xzOiJ4LXRhYi1wYW5lbCIsYXV0b1RhYnM6ZmFsc2UsYXV0b1RhYlNlbGVjdG9yOiJkaXYueC10YWIiLGFjdGl2ZVRhYjp1bmRlZmluZWQsdGFiTWFyZ2luOjIscGxhaW46ZmFsc2Usd2hlZWxJbmNyZW1lbnQ6MjAsaWREZWxpbWl0ZXI6Il9fIixpdGVtQ2xzOiJ4LXRhYi1pdGVtIixlbGVtZW50czoiYm9keSIsaGVhZGVyQXNUZXh0OmZhbHNlLGZyYW1lOmZhbHNlLGhpZGVCb3JkZXJzOnRydWUsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMuZnJhbWU9ZmFsc2U7RXh0LlRhYlBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmV0YWJjaGFuZ2UiLCJ0YWJjaGFuZ2UiLCJjb250ZXh0bWVudSIpO3RoaXMuc2V0TGF5b3V0KG5ldyBFeHQubGF5b3V0LkNhcmRMYXlvdXQoRXh0LmFwcGx5KHtsYXlvdXRPbkNhcmRDaGFuZ2U6dGhpcy5sYXlvdXRPblRhYkNoYW5nZSxkZWZlcnJlZFJlbmRlcjp0aGlzLmRlZmVycmVkUmVuZGVyfSx0aGlzLmxheW91dENvbmZpZykpKTtpZih0aGlzLnRhYlBvc2l0aW9uPT0idG9wIil7dGhpcy5lbGVtZW50cys9IixoZWFkZXIiO3RoaXMuc3RyaXBUYXJnZXQ9ImhlYWRlciJ9ZWxzZXt0aGlzLmVsZW1lbnRzKz0iLGZvb3RlciI7dGhpcy5zdHJpcFRhcmdldD0iZm9vdGVyIn1pZighdGhpcy5zdGFjayl7dGhpcy5zdGFjaz1FeHQuVGFiUGFuZWwuQWNjZXNzU3RhY2soKX10aGlzLmluaXRJdGVtcygpfSxvblJlbmRlcjpmdW5jdGlvbihjLGEpe0V4dC5UYWJQYW5lbC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxjLGEpO2lmKHRoaXMucGxhaW4pe3ZhciBnPXRoaXMudGFiUG9zaXRpb249PSJ0b3AiPyJoZWFkZXIiOiJmb290ZXIiO3RoaXNbZ10uYWRkQ2xhc3MoIngtdGFiLXBhbmVsLSIrZysiLXBsYWluIil9dmFyIGI9dGhpc1t0aGlzLnN0cmlwVGFyZ2V0XTt0aGlzLnN0cmlwV3JhcD1iLmNyZWF0ZUNoaWxkKHtjbHM6IngtdGFiLXN0cmlwLXdyYXAiLGNuOnt0YWc6InVsIixjbHM6IngtdGFiLXN0cmlwIHgtdGFiLXN0cmlwLSIrdGhpcy50YWJQb3NpdGlvbn19KTt2YXIgZT0odGhpcy50YWJQb3NpdGlvbj09ImJvdHRvbSI/dGhpcy5zdHJpcFdyYXA6bnVsbCk7Yi5jcmVhdGVDaGlsZCh7Y2xzOiJ4LXRhYi1zdHJpcC1zcGFjZXIifSxlKTt0aGlzLnN0cmlwPW5ldyBFeHQuRWxlbWVudCh0aGlzLnN0cmlwV3JhcC5kb20uZmlyc3RDaGlsZCk7dGhpcy5lZGdlPXRoaXMuc3RyaXAuY3JlYXRlQ2hpbGQoe3RhZzoibGkiLGNsczoieC10YWItZWRnZSIsY246W3t0YWc6InNwYW4iLGNsczoieC10YWItc3RyaXAtdGV4dCIsY246IiYjMTYwOyJ9XX0pO3RoaXMuc3RyaXAuY3JlYXRlQ2hpbGQoe2NsczoieC1jbGVhciJ9KTt0aGlzLmJvZHkuYWRkQ2xhc3MoIngtdGFiLXBhbmVsLWJvZHktIit0aGlzLnRhYlBvc2l0aW9uKTtpZighdGhpcy5pdGVtVHBsKXt2YXIgZD1uZXcgRXh0LlRlbXBsYXRlKCc8bGkgY2xhc3M9IntjbHN9IiBpZD0ie2lkfSI+PGEgY2xhc3M9IngtdGFiLXN0cmlwLWNsb3NlIj48L2E+JywnPGEgY2xhc3M9IngtdGFiLXJpZ2h0IiBocmVmPSIjIj48ZW0gY2xhc3M9IngtdGFiLWxlZnQiPicsJzxzcGFuIGNsYXNzPSJ4LXRhYi1zdHJpcC1pbm5lciI+PHNwYW4gY2xhc3M9IngtdGFiLXN0cmlwLXRleHQge2ljb25DbHN9Ij57dGV4dH08L3NwYW4+PC9zcGFuPicsIjwvZW0+PC9hPjwvbGk+Iik7ZC5kaXNhYmxlRm9ybWF0cz10cnVlO2QuY29tcGlsZSgpO0V4dC5UYWJQYW5lbC5wcm90b3R5cGUuaXRlbVRwbD1kfXRoaXMuaXRlbXMuZWFjaCh0aGlzLmluaXRUYWIsdGhpcyl9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LlRhYlBhbmVsLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTtpZih0aGlzLmF1dG9UYWJzKXt0aGlzLnJlYWRUYWJzKGZhbHNlKX1pZih0aGlzLmFjdGl2ZVRhYiE9PXVuZGVmaW5lZCl7dmFyIGE9RXh0LmlzT2JqZWN0KHRoaXMuYWN0aXZlVGFiKT90aGlzLmFjdGl2ZVRhYjp0aGlzLml0ZW1zLmdldCh0aGlzLmFjdGl2ZVRhYik7ZGVsZXRlIHRoaXMuYWN0aXZlVGFiO3RoaXMuc2V0QWN0aXZlVGFiKGEpfX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5UYWJQYW5lbC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTt0aGlzLm1vbih0aGlzLnN0cmlwLHtzY29wZTp0aGlzLG1vdXNlZG93bjp0aGlzLm9uU3RyaXBNb3VzZURvd24sY29udGV4dG1lbnU6dGhpcy5vblN0cmlwQ29udGV4dE1lbnV9KTtpZih0aGlzLmVuYWJsZVRhYlNjcm9sbCl7dGhpcy5tb24odGhpcy5zdHJpcCwibW91c2V3aGVlbCIsdGhpcy5vbldoZWVsLHRoaXMpfX0sZmluZFRhcmdldHM6ZnVuY3Rpb24oYyl7dmFyIGI9bnVsbCxhPWMuZ2V0VGFyZ2V0KCJsaTpub3QoLngtdGFiLWVkZ2UpIix0aGlzLnN0cmlwKTtpZihhKXtiPXRoaXMuZ2V0Q29tcG9uZW50KGEuaWQuc3BsaXQodGhpcy5pZERlbGltaXRlcilbMV0pO2lmKGIuZGlzYWJsZWQpe3JldHVybntjbG9zZTpudWxsLGl0ZW06bnVsbCxlbDpudWxsfX19cmV0dXJue2Nsb3NlOmMuZ2V0VGFyZ2V0KCIueC10YWItc3RyaXAtY2xvc2UiLHRoaXMuc3RyaXApLGl0ZW06YixlbDphfX0sb25TdHJpcE1vdXNlRG93bjpmdW5jdGlvbihiKXtpZihiLmJ1dHRvbiE9PTApe3JldHVybn1iLnByZXZlbnREZWZhdWx0KCk7dmFyIGE9dGhpcy5maW5kVGFyZ2V0cyhiKTtpZihhLmNsb3NlKXtpZihhLml0ZW0uZmlyZUV2ZW50KCJiZWZvcmVjbG9zZSIsYS5pdGVtKSE9PWZhbHNlKXthLml0ZW0uZmlyZUV2ZW50KCJjbG9zZSIsYS5pdGVtKTt0aGlzLnJlbW92ZShhLml0ZW0pfXJldHVybn1pZihhLml0ZW0mJmEuaXRlbSE9dGhpcy5hY3RpdmVUYWIpe3RoaXMuc2V0QWN0aXZlVGFiKGEuaXRlbSl9fSxvblN0cmlwQ29udGV4dE1lbnU6ZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBhPXRoaXMuZmluZFRhcmdldHMoYik7aWYoYS5pdGVtKXt0aGlzLmZpcmVFdmVudCgiY29udGV4dG1lbnUiLHRoaXMsYS5pdGVtLGIpfX0scmVhZFRhYnM6ZnVuY3Rpb24oZCl7aWYoZD09PXRydWUpe3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihoKXt0aGlzLnJlbW92ZShoKX0sdGhpcyl9dmFyIGM9dGhpcy5lbC5xdWVyeSh0aGlzLmF1dG9UYWJTZWxlY3Rvcik7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt2YXIgZT1jW2JdLGc9ZS5nZXRBdHRyaWJ1dGUoInRpdGxlIik7ZS5yZW1vdmVBdHRyaWJ1dGUoInRpdGxlIik7dGhpcy5hZGQoe3RpdGxlOmcsY29udGVudEVsOmV9KX19LGluaXRUYWI6ZnVuY3Rpb24oZCxiKXt2YXIgZT10aGlzLnN0cmlwLmRvbS5jaGlsZE5vZGVzW2JdLGc9dGhpcy5nZXRUZW1wbGF0ZUFyZ3MoZCksYz1lP3RoaXMuaXRlbVRwbC5pbnNlcnRCZWZvcmUoZSxnKTp0aGlzLml0ZW1UcGwuYXBwZW5kKHRoaXMuc3RyaXAsZyksYT0ieC10YWItc3RyaXAtb3ZlciIsaD1FeHQuZ2V0KGMpO2guaG92ZXIoZnVuY3Rpb24oKXtpZighZC5kaXNhYmxlZCl7aC5hZGRDbGFzcyhhKX19LGZ1bmN0aW9uKCl7aC5yZW1vdmVDbGFzcyhhKX0pO2lmKGQudGFiVGlwKXtoLmNoaWxkKCJzcGFuLngtdGFiLXN0cmlwLXRleHQiLHRydWUpLnF0aXA9ZC50YWJUaXB9ZC50YWJFbD1jO2guc2VsZWN0KCJhIikub24oImNsaWNrIixmdW5jdGlvbihpKXtpZighaS5nZXRQYWdlWCgpKXt0aGlzLm9uU3RyaXBNb3VzZURvd24oaSl9fSx0aGlzLHtwcmV2ZW50RGVmYXVsdDp0cnVlfSk7ZC5vbih7c2NvcGU6dGhpcyxkaXNhYmxlOnRoaXMub25JdGVtRGlzYWJsZWQsZW5hYmxlOnRoaXMub25JdGVtRW5hYmxlZCx0aXRsZWNoYW5nZTp0aGlzLm9uSXRlbVRpdGxlQ2hhbmdlZCxpY29uY2hhbmdlOnRoaXMub25JdGVtSWNvbkNoYW5nZWQsYmVmb3Jlc2hvdzp0aGlzLm9uQmVmb3JlU2hvd0l0ZW19KX0sZ2V0VGVtcGxhdGVBcmdzOmZ1bmN0aW9uKGIpe3ZhciBhPWIuY2xvc2FibGU/IngtdGFiLXN0cmlwLWNsb3NhYmxlIjoiIjtpZihiLmRpc2FibGVkKXthKz0iIHgtaXRlbS1kaXNhYmxlZCJ9aWYoYi5pY29uQ2xzKXthKz0iIHgtdGFiLXdpdGgtaWNvbiJ9aWYoYi50YWJDbHMpe2ErPSIgIitiLnRhYkNsc31yZXR1cm57aWQ6dGhpcy5pZCt0aGlzLmlkRGVsaW1pdGVyK2IuZ2V0SXRlbUlkKCksdGV4dDpiLnRpdGxlLGNsczphLGljb25DbHM6Yi5pY29uQ2xzfHwiIn19LG9uQWRkOmZ1bmN0aW9uKGIpe0V4dC5UYWJQYW5lbC5zdXBlcmNsYXNzLm9uQWRkLmNhbGwodGhpcyxiKTtpZih0aGlzLnJlbmRlcmVkKXt2YXIgYT10aGlzLml0ZW1zO3RoaXMuaW5pdFRhYihiLGEuaW5kZXhPZihiKSk7dGhpcy5kZWxlZ2F0ZVVwZGF0ZXMoKX19LG9uQmVmb3JlQWRkOmZ1bmN0aW9uKGIpe3ZhciBhPWIuZXZlbnRzPyh0aGlzLml0ZW1zLmNvbnRhaW5zS2V5KGIuZ2V0SXRlbUlkKCkpP2I6bnVsbCk6dGhpcy5pdGVtcy5nZXQoYik7aWYoYSl7dGhpcy5zZXRBY3RpdmVUYWIoYik7cmV0dXJuIGZhbHNlfUV4dC5UYWJQYW5lbC5zdXBlcmNsYXNzLm9uQmVmb3JlQWRkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYz1iLmVsZW1lbnRzO2IuZWxlbWVudHM9Yz9jLnJlcGxhY2UoIixoZWFkZXIiLCIiKTpjO2IuYm9yZGVyPShiLmJvcmRlcj09PXRydWUpfSxvblJlbW92ZTpmdW5jdGlvbihkKXt2YXIgYj1FeHQuZ2V0KGQudGFiRWwpO2lmKGIpe2Iuc2VsZWN0KCJhIikucmVtb3ZlQWxsTGlzdGVuZXJzKCk7RXh0LmRlc3Ryb3koYil9RXh0LlRhYlBhbmVsLnN1cGVyY2xhc3Mub25SZW1vdmUuY2FsbCh0aGlzLGQpO3RoaXMuc3RhY2sucmVtb3ZlKGQpO2RlbGV0ZSBkLnRhYkVsO2QudW4oImRpc2FibGUiLHRoaXMub25JdGVtRGlzYWJsZWQsdGhpcyk7ZC51bigiZW5hYmxlIix0aGlzLm9uSXRlbUVuYWJsZWQsdGhpcyk7ZC51bigidGl0bGVjaGFuZ2UiLHRoaXMub25JdGVtVGl0bGVDaGFuZ2VkLHRoaXMpO2QudW4oImljb25jaGFuZ2UiLHRoaXMub25JdGVtSWNvbkNoYW5nZWQsdGhpcyk7ZC51bigiYmVmb3Jlc2hvdyIsdGhpcy5vbkJlZm9yZVNob3dJdGVtLHRoaXMpO2lmKGQ9PXRoaXMuYWN0aXZlVGFiKXt2YXIgYT10aGlzLnN0YWNrLm5leHQoKTtpZihhKXt0aGlzLnNldEFjdGl2ZVRhYihhKX1lbHNle2lmKHRoaXMuaXRlbXMuZ2V0Q291bnQoKT4wKXt0aGlzLnNldEFjdGl2ZVRhYigwKX1lbHNle3RoaXMuc2V0QWN0aXZlVGFiKG51bGwpfX19aWYoIXRoaXMuZGVzdHJveWluZyl7dGhpcy5kZWxlZ2F0ZVVwZGF0ZXMoKX19LG9uQmVmb3JlU2hvd0l0ZW06ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5hY3RpdmVUYWIpe3RoaXMuc2V0QWN0aXZlVGFiKGEpO3JldHVybiBmYWxzZX19LG9uSXRlbURpc2FibGVkOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0VGFiRWwoYik7aWYoYSl7RXh0LmZseShhKS5hZGRDbGFzcygieC1pdGVtLWRpc2FibGVkIil9dGhpcy5zdGFjay5yZW1vdmUoYil9LG9uSXRlbUVuYWJsZWQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXRUYWJFbChiKTtpZihhKXtFeHQuZmx5KGEpLnJlbW92ZUNsYXNzKCJ4LWl0ZW0tZGlzYWJsZWQiKX19LG9uSXRlbVRpdGxlQ2hhbmdlZDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldFRhYkVsKGIpO2lmKGEpe0V4dC5mbHkoYSkuY2hpbGQoInNwYW4ueC10YWItc3RyaXAtdGV4dCIsdHJ1ZSkuaW5uZXJIVE1MPWIudGl0bGV9fSxvbkl0ZW1JY29uQ2hhbmdlZDpmdW5jdGlvbihkLGEsYyl7dmFyIGI9dGhpcy5nZXRUYWJFbChkKTtpZihiKXtiPUV4dC5nZXQoYik7Yi5jaGlsZCgic3Bhbi54LXRhYi1zdHJpcC10ZXh0IikucmVwbGFjZUNsYXNzKGMsYSk7YltFeHQuaXNFbXB0eShhKT8icmVtb3ZlQ2xhc3MiOiJhZGRDbGFzcyJdKCJ4LXRhYi13aXRoLWljb24iKX19LGdldFRhYkVsOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Q29tcG9uZW50KGEpO3JldHVybiBiP2IudGFiRWw6bnVsbH0sb25SZXNpemU6ZnVuY3Rpb24oKXtFeHQuVGFiUGFuZWwuc3VwZXJjbGFzcy5vblJlc2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5kZWxlZ2F0ZVVwZGF0ZXMoKX0sYmVnaW5VcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLnN1c3BlbmRVcGRhdGVzPXRydWV9LGVuZFVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuc3VzcGVuZFVwZGF0ZXM9ZmFsc2U7dGhpcy5kZWxlZ2F0ZVVwZGF0ZXMoKX0saGlkZVRhYlN0cmlwSXRlbTpmdW5jdGlvbihiKXtiPXRoaXMuZ2V0Q29tcG9uZW50KGIpO3ZhciBhPXRoaXMuZ2V0VGFiRWwoYik7aWYoYSl7YS5zdHlsZS5kaXNwbGF5PSJub25lIjt0aGlzLmRlbGVnYXRlVXBkYXRlcygpfXRoaXMuc3RhY2sucmVtb3ZlKGIpfSx1bmhpZGVUYWJTdHJpcEl0ZW06ZnVuY3Rpb24oYil7Yj10aGlzLmdldENvbXBvbmVudChiKTt2YXIgYT10aGlzLmdldFRhYkVsKGIpO2lmKGEpe2Euc3R5bGUuZGlzcGxheT0iIjt0aGlzLmRlbGVnYXRlVXBkYXRlcygpfX0sZGVsZWdhdGVVcGRhdGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZW5kZXJlZDtpZih0aGlzLnN1c3BlbmRVcGRhdGVzKXtyZXR1cm59aWYodGhpcy5yZXNpemVUYWJzJiZhKXt0aGlzLmF1dG9TaXplVGFicygpfWlmKHRoaXMuZW5hYmxlVGFiU2Nyb2xsJiZhKXt0aGlzLmF1dG9TY3JvbGxUYWJzKCl9fSxhdXRvU2l6ZVRhYnM6ZnVuY3Rpb24oKXt2YXIgaD10aGlzLml0ZW1zLmxlbmd0aCxiPXRoaXMudGFiUG9zaXRpb24hPSJib3R0b20iPyJoZWFkZXIiOiJmb290ZXIiLGM9dGhpc1tiXS5kb20ub2Zmc2V0V2lkdGgsYT10aGlzW2JdLmRvbS5jbGllbnRXaWR0aDtpZighdGhpcy5yZXNpemVUYWJzfHxoPDF8fCFhKXtyZXR1cm59dmFyIGs9TWF0aC5tYXgoTWF0aC5taW4oTWF0aC5mbG9vcigoYS00KS9oKS10aGlzLnRhYk1hcmdpbix0aGlzLnRhYldpZHRoKSx0aGlzLm1pblRhYldpZHRoKTt0aGlzLmxhc3RUYWJXaWR0aD1rO3ZhciBtPXRoaXMuc3RyaXAucXVlcnkoImxpOm5vdCgueC10YWItZWRnZSkiKTtmb3IodmFyIGU9MCxqPW0ubGVuZ3RoO2U8ajtlKyspe3ZhciBsPW1bZV0sbj1FeHQuZmx5KGwpLmNoaWxkKCIueC10YWItc3RyaXAtaW5uZXIiLHRydWUpLGc9bC5vZmZzZXRXaWR0aCxkPW4ub2Zmc2V0V2lkdGg7bi5zdHlsZS53aWR0aD0oay0oZy1kKSkrInB4In19LGFkanVzdEJvZHlXaWR0aDpmdW5jdGlvbihhKXtpZih0aGlzLmhlYWRlcil7dGhpcy5oZWFkZXIuc2V0V2lkdGgoYSl9aWYodGhpcy5mb290ZXIpe3RoaXMuZm9vdGVyLnNldFdpZHRoKGEpfXJldHVybiBhfSxzZXRBY3RpdmVUYWI6ZnVuY3Rpb24oYyl7Yz10aGlzLmdldENvbXBvbmVudChjKTtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JldGFiY2hhbmdlIix0aGlzLGMsdGhpcy5hY3RpdmVUYWIpPT09ZmFsc2Upe3JldHVybn1pZighdGhpcy5yZW5kZXJlZCl7dGhpcy5hY3RpdmVUYWI9YztyZXR1cm59aWYodGhpcy5hY3RpdmVUYWIhPWMpe2lmKHRoaXMuYWN0aXZlVGFiKXt2YXIgYT10aGlzLmdldFRhYkVsKHRoaXMuYWN0aXZlVGFiKTtpZihhKXtFeHQuZmx5KGEpLnJlbW92ZUNsYXNzKCJ4LXRhYi1zdHJpcC1hY3RpdmUiKX19dGhpcy5hY3RpdmVUYWI9YztpZihjKXt2YXIgYj10aGlzLmdldFRhYkVsKGMpO0V4dC5mbHkoYikuYWRkQ2xhc3MoIngtdGFiLXN0cmlwLWFjdGl2ZSIpO3RoaXMuc3RhY2suYWRkKGMpO3RoaXMubGF5b3V0LnNldEFjdGl2ZUl0ZW0oYyk7dGhpcy5kZWxlZ2F0ZVVwZGF0ZXMoKTtpZih0aGlzLnNjcm9sbGluZyl7dGhpcy5zY3JvbGxUb1RhYihjLHRoaXMuYW5pbVNjcm9sbCl9fXRoaXMuZmlyZUV2ZW50KCJ0YWJjaGFuZ2UiLHRoaXMsYyl9fSxnZXRBY3RpdmVUYWI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmVUYWJ8fG51bGx9LGdldEl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0Q29tcG9uZW50KGEpfSxhdXRvU2Nyb2xsVGFiczpmdW5jdGlvbigpe3RoaXMucG9zPXRoaXMudGFiUG9zaXRpb249PSJib3R0b20iP3RoaXMuZm9vdGVyOnRoaXMuaGVhZGVyO3ZhciBoPXRoaXMuaXRlbXMubGVuZ3RoLGQ9dGhpcy5wb3MuZG9tLm9mZnNldFdpZHRoLGM9dGhpcy5wb3MuZG9tLmNsaWVudFdpZHRoLGc9dGhpcy5zdHJpcFdyYXAsZT1nLmRvbSxiPWUub2Zmc2V0V2lkdGgsaT10aGlzLmdldFNjcm9sbFBvcygpLGE9dGhpcy5lZGdlLmdldE9mZnNldHNUbyh0aGlzLnN0cmlwV3JhcClbMF0raTtpZighdGhpcy5lbmFibGVUYWJTY3JvbGx8fGI8MjApe3JldHVybn1pZihoPT0wfHxhPD1jKXtlLnNjcm9sbExlZnQ9MDtnLnNldFdpZHRoKGMpO2lmKHRoaXMuc2Nyb2xsaW5nKXt0aGlzLnNjcm9sbGluZz1mYWxzZTt0aGlzLnBvcy5yZW1vdmVDbGFzcygieC10YWItc2Nyb2xsaW5nIik7dGhpcy5zY3JvbGxMZWZ0LmhpZGUoKTt0aGlzLnNjcm9sbFJpZ2h0LmhpZGUoKTtpZihFeHQuaXNBaXJ8fEV4dC5pc1dlYktpdCl7ZS5zdHlsZS5tYXJnaW5MZWZ0PSIiO2Uuc3R5bGUubWFyZ2luUmlnaHQ9IiJ9fX1lbHNle2lmKCF0aGlzLnNjcm9sbGluZyl7dGhpcy5wb3MuYWRkQ2xhc3MoIngtdGFiLXNjcm9sbGluZyIpO2lmKEV4dC5pc0Fpcnx8RXh0LmlzV2ViS2l0KXtlLnN0eWxlLm1hcmdpbkxlZnQ9IjE4cHgiO2Uuc3R5bGUubWFyZ2luUmlnaHQ9IjE4cHgifX1jLT1nLmdldE1hcmdpbnMoImxyIik7Zy5zZXRXaWR0aChjPjIwP2M6MjApO2lmKCF0aGlzLnNjcm9sbGluZyl7aWYoIXRoaXMuc2Nyb2xsTGVmdCl7dGhpcy5jcmVhdGVTY3JvbGxlcnMoKX1lbHNle3RoaXMuc2Nyb2xsTGVmdC5zaG93KCk7dGhpcy5zY3JvbGxSaWdodC5zaG93KCl9fXRoaXMuc2Nyb2xsaW5nPXRydWU7aWYoaT4oYS1jKSl7ZS5zY3JvbGxMZWZ0PWEtY31lbHNle3RoaXMuc2Nyb2xsVG9UYWIodGhpcy5hY3RpdmVUYWIsZmFsc2UpfXRoaXMudXBkYXRlU2Nyb2xsQnV0dG9ucygpfX0sY3JlYXRlU2Nyb2xsZXJzOmZ1bmN0aW9uKCl7dGhpcy5wb3MuYWRkQ2xhc3MoIngtdGFiLXNjcm9sbGluZy0iK3RoaXMudGFiUG9zaXRpb24pO3ZhciBjPXRoaXMuc3RyaXBXcmFwLmRvbS5vZmZzZXRIZWlnaHQ7dmFyIGE9dGhpcy5wb3MuaW5zZXJ0Rmlyc3Qoe2NsczoieC10YWItc2Nyb2xsZXItbGVmdCJ9KTthLnNldEhlaWdodChjKTthLmFkZENsYXNzT25PdmVyKCJ4LXRhYi1zY3JvbGxlci1sZWZ0LW92ZXIiKTt0aGlzLmxlZnRSZXBlYXRlcj1uZXcgRXh0LnV0aWwuQ2xpY2tSZXBlYXRlcihhLHtpbnRlcnZhbDp0aGlzLnNjcm9sbFJlcGVhdEludGVydmFsLGhhbmRsZXI6dGhpcy5vblNjcm9sbExlZnQsc2NvcGU6dGhpc30pO3RoaXMuc2Nyb2xsTGVmdD1hO3ZhciBiPXRoaXMucG9zLmluc2VydEZpcnN0KHtjbHM6IngtdGFiLXNjcm9sbGVyLXJpZ2h0In0pO2Iuc2V0SGVpZ2h0KGMpO2IuYWRkQ2xhc3NPbk92ZXIoIngtdGFiLXNjcm9sbGVyLXJpZ2h0LW92ZXIiKTt0aGlzLnJpZ2h0UmVwZWF0ZXI9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIoYix7aW50ZXJ2YWw6dGhpcy5zY3JvbGxSZXBlYXRJbnRlcnZhbCxoYW5kbGVyOnRoaXMub25TY3JvbGxSaWdodCxzY29wZTp0aGlzfSk7dGhpcy5zY3JvbGxSaWdodD1ifSxnZXRTY3JvbGxXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVkZ2UuZ2V0T2Zmc2V0c1RvKHRoaXMuc3RyaXBXcmFwKVswXSt0aGlzLmdldFNjcm9sbFBvcygpfSxnZXRTY3JvbGxQb3M6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5zdHJpcFdyYXAuZG9tLnNjcm9sbExlZnQsMTApfHwwfSxnZXRTY3JvbGxBcmVhOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuc3RyaXBXcmFwLmRvbS5jbGllbnRXaWR0aCwxMCl8fDB9LGdldFNjcm9sbEFuaW06ZnVuY3Rpb24oKXtyZXR1cm57ZHVyYXRpb246dGhpcy5zY3JvbGxEdXJhdGlvbixjYWxsYmFjazp0aGlzLnVwZGF0ZVNjcm9sbEJ1dHRvbnMsc2NvcGU6dGhpc319LGdldFNjcm9sbEluY3JlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbEluY3JlbWVudHx8KHRoaXMucmVzaXplVGFicz90aGlzLmxhc3RUYWJXaWR0aCsyOjEwMCl9LHNjcm9sbFRvVGFiOmZ1bmN0aW9uKGUsYSl7aWYoIWUpe3JldHVybn12YXIgYz10aGlzLmdldFRhYkVsKGUpLGg9dGhpcy5nZXRTY3JvbGxQb3MoKSxkPXRoaXMuZ2V0U2Nyb2xsQXJlYSgpLGc9RXh0LmZseShjKS5nZXRPZmZzZXRzVG8odGhpcy5zdHJpcFdyYXApWzBdK2gsYj1nK2Mub2Zmc2V0V2lkdGg7aWYoZzxoKXt0aGlzLnNjcm9sbFRvKGcsYSl9ZWxzZXtpZihiPihoK2QpKXt0aGlzLnNjcm9sbFRvKGItZCxhKX19fSxzY3JvbGxUbzpmdW5jdGlvbihiLGEpe3RoaXMuc3RyaXBXcmFwLnNjcm9sbFRvKCJsZWZ0IixiLGE/dGhpcy5nZXRTY3JvbGxBbmltKCk6ZmFsc2UpO2lmKCFhKXt0aGlzLnVwZGF0ZVNjcm9sbEJ1dHRvbnMoKX19LG9uV2hlZWw6ZnVuY3Rpb24oZyl7dmFyIGg9Zy5nZXRXaGVlbERlbHRhKCkqdGhpcy53aGVlbEluY3JlbWVudCotMTtnLnN0b3BFdmVudCgpO3ZhciBpPXRoaXMuZ2V0U2Nyb2xsUG9zKCksYz1pK2gsYT10aGlzLmdldFNjcm9sbFdpZHRoKCktdGhpcy5nZXRTY3JvbGxBcmVhKCk7dmFyIGI9TWF0aC5tYXgoMCxNYXRoLm1pbihhLGMpKTtpZihiIT1pKXt0aGlzLnNjcm9sbFRvKGIsZmFsc2UpfX0sb25TY3JvbGxSaWdodDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0U2Nyb2xsV2lkdGgoKS10aGlzLmdldFNjcm9sbEFyZWEoKSxjPXRoaXMuZ2V0U2Nyb2xsUG9zKCksYj1NYXRoLm1pbihhLGMrdGhpcy5nZXRTY3JvbGxJbmNyZW1lbnQoKSk7aWYoYiE9Yyl7dGhpcy5zY3JvbGxUbyhiLHRoaXMuYW5pbVNjcm9sbCl9fSxvblNjcm9sbExlZnQ6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmdldFNjcm9sbFBvcygpLGE9TWF0aC5tYXgoMCxiLXRoaXMuZ2V0U2Nyb2xsSW5jcmVtZW50KCkpO2lmKGEhPWIpe3RoaXMuc2Nyb2xsVG8oYSx0aGlzLmFuaW1TY3JvbGwpfX0sdXBkYXRlU2Nyb2xsQnV0dG9uczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0U2Nyb2xsUG9zKCk7dGhpcy5zY3JvbGxMZWZ0W2E9PT0wPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oIngtdGFiLXNjcm9sbGVyLWxlZnQtZGlzYWJsZWQiKTt0aGlzLnNjcm9sbFJpZ2h0W2E+PSh0aGlzLmdldFNjcm9sbFdpZHRoKCktdGhpcy5nZXRTY3JvbGxBcmVhKCkpPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oIngtdGFiLXNjcm9sbGVyLXJpZ2h0LWRpc2FibGVkIil9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLmxlZnRSZXBlYXRlcix0aGlzLnJpZ2h0UmVwZWF0ZXIpO3RoaXMuZGVsZXRlTWVtYmVycygic3RyaXAiLCJlZGdlIiwic2Nyb2xsTGVmdCIsInNjcm9sbFJpZ2h0Iiwic3RyaXBXcmFwIik7dGhpcy5hY3RpdmVUYWI9bnVsbDtFeHQuVGFiUGFuZWwuc3VwZXJjbGFzcy5iZWZvcmVEZXN0cm95LmFwcGx5KHRoaXMpfX0pO0V4dC5yZWcoInRhYnBhbmVsIixFeHQuVGFiUGFuZWwpO0V4dC5UYWJQYW5lbC5wcm90b3R5cGUuYWN0aXZhdGU9RXh0LlRhYlBhbmVsLnByb3RvdHlwZS5zZXRBY3RpdmVUYWI7RXh0LlRhYlBhbmVsLkFjY2Vzc1N0YWNrPWZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJue2FkZDpmdW5jdGlvbihiKXthLnB1c2goYik7aWYoYS5sZW5ndGg+MTApe2Euc2hpZnQoKX19LHJlbW92ZTpmdW5jdGlvbihlKXt2YXIgZD1bXTtmb3IodmFyIGM9MCxiPWEubGVuZ3RoO2M8YjtjKyspe2lmKGFbY10hPWUpe2QucHVzaChhW2NdKX19YT1kfSxuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGEucG9wKCl9fX07RXh0LkJ1dHRvbj1FeHQuZXh0ZW5kKEV4dC5Cb3hDb21wb25lbnQse2hpZGRlbjpmYWxzZSxkaXNhYmxlZDpmYWxzZSxwcmVzc2VkOmZhbHNlLGVuYWJsZVRvZ2dsZTpmYWxzZSxtZW51QWxpZ246InRsLWJsPyIsdHlwZToiYnV0dG9uIixtZW51Q2xhc3NUYXJnZXQ6InRyOm50aCgyKSIsY2xpY2tFdmVudDoiY2xpY2siLGhhbmRsZU1vdXNlRXZlbnRzOnRydWUsdG9vbHRpcFR5cGU6InF0aXAiLGJ1dHRvblNlbGVjdG9yOiJidXR0b246Zmlyc3QtY2hpbGQiLHNjYWxlOiJzbWFsbCIsaWNvbkFsaWduOiJsZWZ0IixhcnJvd0FsaWduOiJyaWdodCIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe2lmKHRoaXMubWVudSl7aWYoRXh0LmlzQXJyYXkodGhpcy5tZW51KSl7dGhpcy5tZW51PXtpdGVtczp0aGlzLm1lbnV9fWlmKEV4dC5pc09iamVjdCh0aGlzLm1lbnUpKXt0aGlzLm1lbnUub3duZXJDdD10aGlzfXRoaXMubWVudT1FeHQubWVudS5NZW51TWdyLmdldCh0aGlzLm1lbnUpO3RoaXMubWVudS5vd25lckN0PXVuZGVmaW5lZH1FeHQuQnV0dG9uLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJjbGljayIsInRvZ2dsZSIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0IiwibWVudXNob3ciLCJtZW51aGlkZSIsIm1lbnV0cmlnZ2Vyb3ZlciIsIm1lbnV0cmlnZ2Vyb3V0Iik7aWYoRXh0LmlzU3RyaW5nKHRoaXMudG9nZ2xlR3JvdXApKXt0aGlzLmVuYWJsZVRvZ2dsZT10cnVlfX0sZ2V0VGVtcGxhdGVBcmdzOmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMudHlwZSwieC1idG4tIit0aGlzLnNjYWxlKyIgeC1idG4taWNvbi0iK3RoaXMuc2NhbGUrIi0iK3RoaXMuaWNvbkFsaWduLHRoaXMuZ2V0TWVudUNsYXNzKCksdGhpcy5jbHMsdGhpcy5pZF19LHNldEJ1dHRvbkNsYXNzOmZ1bmN0aW9uKCl7aWYodGhpcy51c2VTZXRDbGFzcyl7aWYoIUV4dC5pc0VtcHR5KHRoaXMub2xkQ2xzKSl7dGhpcy5lbC5yZW1vdmVDbGFzcyhbdGhpcy5vbGRDbHMsIngtYnRuLXByZXNzZWQiXSl9dGhpcy5vbGRDbHM9KHRoaXMuaWNvbkNsc3x8dGhpcy5pY29uKT8odGhpcy50ZXh0PyJ4LWJ0bi10ZXh0LWljb24iOiJ4LWJ0bi1pY29uIik6IngtYnRuLW5vaWNvbiI7dGhpcy5lbC5hZGRDbGFzcyhbdGhpcy5vbGRDbHMsdGhpcy5wcmVzc2VkPyJ4LWJ0bi1wcmVzc2VkIjpudWxsXSl9fSxnZXRNZW51Q2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZW51Pyh0aGlzLmFycm93QWxpZ24hPSJib3R0b20iPyJ4LWJ0bi1hcnJvdyI6IngtYnRuLWFycm93LWJvdHRvbSIpOiIifSxvblJlbmRlcjpmdW5jdGlvbihjLGEpe2lmKCF0aGlzLnRlbXBsYXRlKXtpZighRXh0LkJ1dHRvbi5idXR0b25UZW1wbGF0ZSl7RXh0LkJ1dHRvbi5idXR0b25UZW1wbGF0ZT1uZXcgRXh0LlRlbXBsYXRlKCc8dGFibGUgaWQ9Ins0fSIgY2VsbHNwYWNpbmc9IjAiIGNsYXNzPSJ4LWJ0biB7M30iPjx0Ym9keSBjbGFzcz0iezF9Ij4nLCc8dHI+PHRkIGNsYXNzPSJ4LWJ0bi10bCI+PGk+JiMxNjA7PC9pPjwvdGQ+PHRkIGNsYXNzPSJ4LWJ0bi10YyI+PC90ZD48dGQgY2xhc3M9IngtYnRuLXRyIj48aT4mIzE2MDs8L2k+PC90ZD48L3RyPicsJzx0cj48dGQgY2xhc3M9IngtYnRuLW1sIj48aT4mIzE2MDs8L2k+PC90ZD48dGQgY2xhc3M9IngtYnRuLW1jIj48ZW0gY2xhc3M9InsyfSIgdW5zZWxlY3RhYmxlPSJvbiI+PGJ1dHRvbiB0eXBlPSJ7MH0iPjwvYnV0dG9uPjwvZW0+PC90ZD48dGQgY2xhc3M9IngtYnRuLW1yIj48aT4mIzE2MDs8L2k+PC90ZD48L3RyPicsJzx0cj48dGQgY2xhc3M9IngtYnRuLWJsIj48aT4mIzE2MDs8L2k+PC90ZD48dGQgY2xhc3M9IngtYnRuLWJjIj48L3RkPjx0ZCBjbGFzcz0ieC1idG4tYnIiPjxpPiYjMTYwOzwvaT48L3RkPjwvdHI+JywiPC90Ym9keT48L3RhYmxlPiIpO0V4dC5CdXR0b24uYnV0dG9uVGVtcGxhdGUuY29tcGlsZSgpfXRoaXMudGVtcGxhdGU9RXh0LkJ1dHRvbi5idXR0b25UZW1wbGF0ZX12YXIgYixkPXRoaXMuZ2V0VGVtcGxhdGVBcmdzKCk7aWYoYSl7Yj10aGlzLnRlbXBsYXRlLmluc2VydEJlZm9yZShhLGQsdHJ1ZSl9ZWxzZXtiPXRoaXMudGVtcGxhdGUuYXBwZW5kKGMsZCx0cnVlKX10aGlzLmJ0bkVsPWIuY2hpbGQodGhpcy5idXR0b25TZWxlY3Rvcik7dGhpcy5tb24odGhpcy5idG5FbCx7c2NvcGU6dGhpcyxmb2N1czp0aGlzLm9uRm9jdXMsYmx1cjp0aGlzLm9uQmx1cn0pO3RoaXMuaW5pdEJ1dHRvbkVsKGIsdGhpcy5idG5FbCk7RXh0LkJ1dHRvblRvZ2dsZU1nci5yZWdpc3Rlcih0aGlzKX0saW5pdEJ1dHRvbkVsOmZ1bmN0aW9uKGIsYyl7dGhpcy5lbD1iO3RoaXMuc2V0SWNvbih0aGlzLmljb24pO3RoaXMuc2V0VGV4dCh0aGlzLnRleHQpO3RoaXMuc2V0SWNvbkNsYXNzKHRoaXMuaWNvbkNscyk7aWYoRXh0LmlzRGVmaW5lZCh0aGlzLnRhYkluZGV4KSl7Yy5kb20udGFiSW5kZXg9dGhpcy50YWJJbmRleH1pZih0aGlzLnRvb2x0aXApe3RoaXMuc2V0VG9vbHRpcCh0aGlzLnRvb2x0aXAsdHJ1ZSl9aWYodGhpcy5oYW5kbGVNb3VzZUV2ZW50cyl7dGhpcy5tb24oYix7c2NvcGU6dGhpcyxtb3VzZW92ZXI6dGhpcy5vbk1vdXNlT3Zlcixtb3VzZWRvd246dGhpcy5vbk1vdXNlRG93bn0pfWlmKHRoaXMubWVudSl7dGhpcy5tb24odGhpcy5tZW51LHtzY29wZTp0aGlzLHNob3c6dGhpcy5vbk1lbnVTaG93LGhpZGU6dGhpcy5vbk1lbnVIaWRlfSl9aWYodGhpcy5yZXBlYXQpe3ZhciBhPW5ldyBFeHQudXRpbC5DbGlja1JlcGVhdGVyKGIsRXh0LmlzT2JqZWN0KHRoaXMucmVwZWF0KT90aGlzLnJlcGVhdDp7fSk7dGhpcy5tb24oYSwiY2xpY2siLHRoaXMub25SZXBlYXRDbGljayx0aGlzKX1lbHNle3RoaXMubW9uKGIsdGhpcy5jbGlja0V2ZW50LHRoaXMub25DbGljayx0aGlzKX19LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LkJ1dHRvbi5zdXBlcmNsYXNzLmFmdGVyUmVuZGVyLmNhbGwodGhpcyk7dGhpcy51c2VTZXRDbGFzcz10cnVlO3RoaXMuc2V0QnV0dG9uQ2xhc3MoKTt0aGlzLmRvYz1FeHQuZ2V0RG9jKCk7dGhpcy5kb0F1dG9XaWR0aCgpfSxzZXRJY29uQ2xhc3M6ZnVuY3Rpb24oYSl7dGhpcy5pY29uQ2xzPWE7aWYodGhpcy5lbCl7dGhpcy5idG5FbC5kb20uY2xhc3NOYW1lPSIiO3RoaXMuYnRuRWwuYWRkQ2xhc3MoWyJ4LWJ0bi10ZXh0IixhfHwiIl0pO3RoaXMuc2V0QnV0dG9uQ2xhc3MoKX1yZXR1cm4gdGhpc30sc2V0VG9vbHRpcDpmdW5jdGlvbihiLGEpe2lmKHRoaXMucmVuZGVyZWQpe2lmKCFhKXt0aGlzLmNsZWFyVGlwKCl9aWYoRXh0LmlzT2JqZWN0KGIpKXtFeHQuUXVpY2tUaXBzLnJlZ2lzdGVyKEV4dC5hcHBseSh7dGFyZ2V0OnRoaXMuYnRuRWwuaWR9LGIpKTt0aGlzLnRvb2x0aXA9Yn1lbHNle3RoaXMuYnRuRWwuZG9tW3RoaXMudG9vbHRpcFR5cGVdPWJ9fWVsc2V7dGhpcy50b29sdGlwPWJ9cmV0dXJuIHRoaXN9LGNsZWFyVGlwOmZ1bmN0aW9uKCl7aWYoRXh0LmlzT2JqZWN0KHRoaXMudG9vbHRpcCkpe0V4dC5RdWlja1RpcHMudW5yZWdpc3Rlcih0aGlzLmJ0bkVsKX19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmNsZWFyVGlwKCl9aWYodGhpcy5tZW51JiZ0aGlzLmRlc3Ryb3lNZW51IT09ZmFsc2Upe0V4dC5kZXN0cm95KHRoaXMuYnRuRWwsdGhpcy5tZW51KX1FeHQuZGVzdHJveSh0aGlzLnJlcGVhdGVyKX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5kb2MudW4oIm1vdXNlb3ZlciIsdGhpcy5tb25pdG9yTW91c2VPdmVyLHRoaXMpO3RoaXMuZG9jLnVuKCJtb3VzZXVwIix0aGlzLm9uTW91c2VVcCx0aGlzKTtkZWxldGUgdGhpcy5kb2M7ZGVsZXRlIHRoaXMuYnRuRWw7RXh0LkJ1dHRvblRvZ2dsZU1nci51bnJlZ2lzdGVyKHRoaXMpfUV4dC5CdXR0b24uc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0sZG9BdXRvV2lkdGg6ZnVuY3Rpb24oKXtpZih0aGlzLmF1dG9XaWR0aCE9PWZhbHNlJiZ0aGlzLmVsJiZ0aGlzLnRleHQmJnRoaXMud2lkdGg9PT11bmRlZmluZWQpe3RoaXMuZWwuc2V0V2lkdGgoImF1dG8iKTtpZihFeHQuaXNJRTcmJkV4dC5pc1N0cmljdCl7dmFyIGE9dGhpcy5idG5FbDtpZihhJiZhLmdldFdpZHRoKCk+MjApe2EuY2xpcCgpO2Euc2V0V2lkdGgoRXh0LnV0aWwuVGV4dE1ldHJpY3MubWVhc3VyZShhLHRoaXMudGV4dCkud2lkdGgrYS5nZXRGcmFtZVdpZHRoKCJsciIpKX19aWYodGhpcy5taW5XaWR0aCl7aWYodGhpcy5lbC5nZXRXaWR0aCgpPHRoaXMubWluV2lkdGgpe3RoaXMuZWwuc2V0V2lkdGgodGhpcy5taW5XaWR0aCl9fX19LHNldEhhbmRsZXI6ZnVuY3Rpb24oYixhKXt0aGlzLmhhbmRsZXI9Yjt0aGlzLnNjb3BlPWE7cmV0dXJuIHRoaXN9LHNldFRleHQ6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWE7aWYodGhpcy5lbCl7dGhpcy5idG5FbC51cGRhdGUoYXx8IiYjMTYwOyIpO3RoaXMuc2V0QnV0dG9uQ2xhc3MoKX10aGlzLmRvQXV0b1dpZHRoKCk7cmV0dXJuIHRoaXN9LHNldEljb246ZnVuY3Rpb24oYSl7dGhpcy5pY29uPWE7aWYodGhpcy5lbCl7dGhpcy5idG5FbC5zZXRTdHlsZSgiYmFja2dyb3VuZC1pbWFnZSIsYT8idXJsKCIrYSsiKSI6IiIpO3RoaXMuc2V0QnV0dG9uQ2xhc3MoKX1yZXR1cm4gdGhpc30sZ2V0VGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHR9LHRvZ2dsZTpmdW5jdGlvbihiLGEpe2I9Yj09PXVuZGVmaW5lZD8hdGhpcy5wcmVzc2VkOiEhYjtpZihiIT10aGlzLnByZXNzZWQpe2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuZWxbYj8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKCJ4LWJ0bi1wcmVzc2VkIil9dGhpcy5wcmVzc2VkPWI7aWYoIWEpe3RoaXMuZmlyZUV2ZW50KCJ0b2dnbGUiLHRoaXMsYik7aWYodGhpcy50b2dnbGVIYW5kbGVyKXt0aGlzLnRvZ2dsZUhhbmRsZXIuY2FsbCh0aGlzLnNjb3BlfHx0aGlzLHRoaXMsYil9fX1yZXR1cm4gdGhpc30sb25EaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5vbkRpc2FibGVDaGFuZ2UodHJ1ZSl9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7dGhpcy5vbkRpc2FibGVDaGFuZ2UoZmFsc2UpfSxvbkRpc2FibGVDaGFuZ2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5lbCl7aWYoIUV4dC5pc0lFNnx8IXRoaXMudGV4dCl7dGhpcy5lbFthPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0odGhpcy5kaXNhYmxlZENsYXNzKX10aGlzLmVsLmRvbS5kaXNhYmxlZD1hfXRoaXMuZGlzYWJsZWQ9YX0sc2hvd01lbnU6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLm1lbnUpe2lmKHRoaXMudG9vbHRpcCl7RXh0LlF1aWNrVGlwcy5nZXRRdWlja1RpcCgpLmNhbmNlbFNob3codGhpcy5idG5FbCl9aWYodGhpcy5tZW51LmlzVmlzaWJsZSgpKXt0aGlzLm1lbnUuaGlkZSgpfXRoaXMubWVudS5vd25lckN0PXRoaXM7dGhpcy5tZW51LnNob3codGhpcy5lbCx0aGlzLm1lbnVBbGlnbil9cmV0dXJuIHRoaXN9LGhpZGVNZW51OmZ1bmN0aW9uKCl7aWYodGhpcy5oYXNWaXNpYmxlTWVudSgpKXt0aGlzLm1lbnUuaGlkZSgpfXJldHVybiB0aGlzfSxoYXNWaXNpYmxlTWVudTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1lbnUmJnRoaXMubWVudS5vd25lckN0PT10aGlzJiZ0aGlzLm1lbnUuaXNWaXNpYmxlKCl9LG9uUmVwZWF0Q2xpY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLm9uQ2xpY2soYil9LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7aWYoYSl7YS5wcmV2ZW50RGVmYXVsdCgpfWlmKGEuYnV0dG9uIT09MCl7cmV0dXJufWlmKCF0aGlzLmRpc2FibGVkKXt0aGlzLmRvVG9nZ2xlKCk7aWYodGhpcy5tZW51JiYhdGhpcy5oYXNWaXNpYmxlTWVudSgpJiYhdGhpcy5pZ25vcmVOZXh0Q2xpY2spe3RoaXMuc2hvd01lbnUoKX10aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsYSk7aWYodGhpcy5oYW5kbGVyKXt0aGlzLmhhbmRsZXIuY2FsbCh0aGlzLnNjb3BlfHx0aGlzLHRoaXMsYSl9fX0sZG9Ub2dnbGU6ZnVuY3Rpb24oKXtpZih0aGlzLmVuYWJsZVRvZ2dsZSYmKHRoaXMuYWxsb3dEZXByZXNzIT09ZmFsc2V8fCF0aGlzLnByZXNzZWQpKXt0aGlzLnRvZ2dsZSgpfX0saXNNZW51VHJpZ2dlck92ZXI6ZnVuY3Rpb24oYixhKXtyZXR1cm4gdGhpcy5tZW51JiYhYX0saXNNZW51VHJpZ2dlck91dDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLm1lbnUmJiFhfSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihiKXtpZighdGhpcy5kaXNhYmxlZCl7dmFyIGE9Yi53aXRoaW4odGhpcy5lbCx0cnVlKTtpZighYSl7dGhpcy5lbC5hZGRDbGFzcygieC1idG4tb3ZlciIpO2lmKCF0aGlzLm1vbml0b3JpbmdNb3VzZU92ZXIpe3RoaXMuZG9jLm9uKCJtb3VzZW92ZXIiLHRoaXMubW9uaXRvck1vdXNlT3Zlcix0aGlzKTt0aGlzLm1vbml0b3JpbmdNb3VzZU92ZXI9dHJ1ZX10aGlzLmZpcmVFdmVudCgibW91c2VvdmVyIix0aGlzLGIpfWlmKHRoaXMuaXNNZW51VHJpZ2dlck92ZXIoYixhKSl7dGhpcy5maXJlRXZlbnQoIm1lbnV0cmlnZ2Vyb3ZlciIsdGhpcyx0aGlzLm1lbnUsYil9fX0sbW9uaXRvck1vdXNlT3ZlcjpmdW5jdGlvbihhKXtpZihhLnRhcmdldCE9dGhpcy5lbC5kb20mJiFhLndpdGhpbih0aGlzLmVsKSl7aWYodGhpcy5tb25pdG9yaW5nTW91c2VPdmVyKXt0aGlzLmRvYy51bigibW91c2VvdmVyIix0aGlzLm1vbml0b3JNb3VzZU92ZXIsdGhpcyk7dGhpcy5tb25pdG9yaW5nTW91c2VPdmVyPWZhbHNlfXRoaXMub25Nb3VzZU91dChhKX19LG9uTW91c2VPdXQ6ZnVuY3Rpb24oYil7dmFyIGE9Yi53aXRoaW4odGhpcy5lbCkmJmIudGFyZ2V0IT10aGlzLmVsLmRvbTt0aGlzLmVsLnJlbW92ZUNsYXNzKCJ4LWJ0bi1vdmVyIik7dGhpcy5maXJlRXZlbnQoIm1vdXNlb3V0Iix0aGlzLGIpO2lmKHRoaXMuaXNNZW51VHJpZ2dlck91dChiLGEpKXt0aGlzLmZpcmVFdmVudCgibWVudXRyaWdnZXJvdXQiLHRoaXMsdGhpcy5tZW51LGIpfX0sZm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmJ0bkVsLmZvY3VzKCl9LGJsdXI6ZnVuY3Rpb24oKXt0aGlzLmJ0bkVsLmJsdXIoKX0sb25Gb2N1czpmdW5jdGlvbihhKXtpZighdGhpcy5kaXNhYmxlZCl7dGhpcy5lbC5hZGRDbGFzcygieC1idG4tZm9jdXMiKX19LG9uQmx1cjpmdW5jdGlvbihhKXt0aGlzLmVsLnJlbW92ZUNsYXNzKCJ4LWJ0bi1mb2N1cyIpfSxnZXRDbGlja0VsOmZ1bmN0aW9uKGIsYSl7cmV0dXJuIHRoaXMuZWx9LG9uTW91c2VEb3duOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmRpc2FibGVkJiZhLmJ1dHRvbj09PTApe3RoaXMuZ2V0Q2xpY2tFbChhKS5hZGRDbGFzcygieC1idG4tY2xpY2siKTt0aGlzLmRvYy5vbigibW91c2V1cCIsdGhpcy5vbk1vdXNlVXAsdGhpcyl9fSxvbk1vdXNlVXA6ZnVuY3Rpb24oYSl7aWYoYS5idXR0b249PT0wKXt0aGlzLmdldENsaWNrRWwoYSx0cnVlKS5yZW1vdmVDbGFzcygieC1idG4tY2xpY2siKTt0aGlzLmRvYy51bigibW91c2V1cCIsdGhpcy5vbk1vdXNlVXAsdGhpcyl9fSxvbk1lbnVTaG93OmZ1bmN0aW9uKGEpe2lmKHRoaXMubWVudS5vd25lckN0PT10aGlzKXt0aGlzLm1lbnUub3duZXJDdD10aGlzO3RoaXMuaWdub3JlTmV4dENsaWNrPTA7dGhpcy5lbC5hZGRDbGFzcygieC1idG4tbWVudS1hY3RpdmUiKTt0aGlzLmZpcmVFdmVudCgibWVudXNob3ciLHRoaXMsdGhpcy5tZW51KX19LG9uTWVudUhpZGU6ZnVuY3Rpb24oYSl7aWYodGhpcy5tZW51Lm93bmVyQ3Q9PXRoaXMpe3RoaXMuZWwucmVtb3ZlQ2xhc3MoIngtYnRuLW1lbnUtYWN0aXZlIik7dGhpcy5pZ25vcmVOZXh0Q2xpY2s9dGhpcy5yZXN0b3JlQ2xpY2suZGVmZXIoMjUwLHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJtZW51aGlkZSIsdGhpcyx0aGlzLm1lbnUpO2RlbGV0ZSB0aGlzLm1lbnUub3duZXJDdH19LHJlc3RvcmVDbGljazpmdW5jdGlvbigpe3RoaXMuaWdub3JlTmV4dENsaWNrPTB9fSk7RXh0LnJlZygiYnV0dG9uIixFeHQuQnV0dG9uKTtFeHQuQnV0dG9uVG9nZ2xlTWdyPWZ1bmN0aW9uKCl7dmFyIGE9e307ZnVuY3Rpb24gYihlLGope2lmKGope3ZhciBoPWFbZS50b2dnbGVHcm91cF07Zm9yKHZhciBkPTAsYz1oLmxlbmd0aDtkPGM7ZCsrKXtpZihoW2RdIT1lKXtoW2RdLnRvZ2dsZShmYWxzZSl9fX19cmV0dXJue3JlZ2lzdGVyOmZ1bmN0aW9uKGMpe2lmKCFjLnRvZ2dsZUdyb3VwKXtyZXR1cm59dmFyIGQ9YVtjLnRvZ2dsZUdyb3VwXTtpZighZCl7ZD1hW2MudG9nZ2xlR3JvdXBdPVtdfWQucHVzaChjKTtjLm9uKCJ0b2dnbGUiLGIpfSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKGMpe2lmKCFjLnRvZ2dsZUdyb3VwKXtyZXR1cm59dmFyIGQ9YVtjLnRvZ2dsZUdyb3VwXTtpZihkKXtkLnJlbW92ZShjKTtjLnVuKCJ0b2dnbGUiLGIpfX0sZ2V0UHJlc3NlZDpmdW5jdGlvbihoKXt2YXIgZT1hW2hdO2lmKGUpe2Zvcih2YXIgZD0wLGM9ZS5sZW5ndGg7ZDxjO2QrKyl7aWYoZVtkXS5wcmVzc2VkPT09dHJ1ZSl7cmV0dXJuIGVbZF19fX1yZXR1cm4gbnVsbH19fSgpO0V4dC5TcGxpdEJ1dHRvbj1FeHQuZXh0ZW5kKEV4dC5CdXR0b24se2Fycm93U2VsZWN0b3I6ImVtIixzcGxpdDp0cnVlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuU3BsaXRCdXR0b24uc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoImFycm93Y2xpY2siKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXtFeHQuU3BsaXRCdXR0b24uc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5hcnJvd1Rvb2x0aXApe3RoaXMuZWwuY2hpbGQodGhpcy5hcnJvd1NlbGVjdG9yKS5kb21bdGhpcy50b29sdGlwVHlwZV09dGhpcy5hcnJvd1Rvb2x0aXB9fSxzZXRBcnJvd0hhbmRsZXI6ZnVuY3Rpb24oYixhKXt0aGlzLmFycm93SGFuZGxlcj1iO3RoaXMuc2NvcGU9YX0sZ2V0TWVudUNsYXNzOmZ1bmN0aW9uKCl7cmV0dXJuIngtYnRuLXNwbGl0IisodGhpcy5hcnJvd0FsaWduPT0iYm90dG9tIj8iLWJvdHRvbSI6IiIpfSxpc0NsaWNrT25BcnJvdzpmdW5jdGlvbihjKXtpZih0aGlzLmFycm93QWxpZ24hPSJib3R0b20iKXt2YXIgYj10aGlzLmVsLmNoaWxkKCJlbS54LWJ0bi1zcGxpdCIpO3ZhciBhPWIuZ2V0UmVnaW9uKCkucmlnaHQtYi5nZXRQYWRkaW5nKCJyIik7cmV0dXJuIGMuZ2V0UGFnZVgoKT5hfWVsc2V7cmV0dXJuIGMuZ2V0UGFnZVkoKT50aGlzLmJ0bkVsLmdldFJlZ2lvbigpLmJvdHRvbX19LG9uQ2xpY2s6ZnVuY3Rpb24oYixhKXtiLnByZXZlbnREZWZhdWx0KCk7aWYoIXRoaXMuZGlzYWJsZWQpe2lmKHRoaXMuaXNDbGlja09uQXJyb3coYikpe2lmKHRoaXMubWVudSYmIXRoaXMubWVudS5pc1Zpc2libGUoKSYmIXRoaXMuaWdub3JlTmV4dENsaWNrKXt0aGlzLnNob3dNZW51KCl9dGhpcy5maXJlRXZlbnQoImFycm93Y2xpY2siLHRoaXMsYik7aWYodGhpcy5hcnJvd0hhbmRsZXIpe3RoaXMuYXJyb3dIYW5kbGVyLmNhbGwodGhpcy5zY29wZXx8dGhpcyx0aGlzLGIpfX1lbHNle3RoaXMuZG9Ub2dnbGUoKTt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMsYik7aWYodGhpcy5oYW5kbGVyKXt0aGlzLmhhbmRsZXIuY2FsbCh0aGlzLnNjb3BlfHx0aGlzLHRoaXMsYil9fX19LGlzTWVudVRyaWdnZXJPdmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm1lbnUmJmEudGFyZ2V0LnRhZ05hbWU9PXRoaXMuYXJyb3dTZWxlY3Rvcn0saXNNZW51VHJpZ2dlck91dDpmdW5jdGlvbihiLGEpe3JldHVybiB0aGlzLm1lbnUmJmIudGFyZ2V0LnRhZ05hbWUhPXRoaXMuYXJyb3dTZWxlY3Rvcn19KTtFeHQucmVnKCJzcGxpdGJ1dHRvbiIsRXh0LlNwbGl0QnV0dG9uKTtFeHQuQ3ljbGVCdXR0b249RXh0LmV4dGVuZChFeHQuU3BsaXRCdXR0b24se2dldEl0ZW1UZXh0OmZ1bmN0aW9uKGEpe2lmKGEmJnRoaXMuc2hvd1RleHQ9PT10cnVlKXt2YXIgYj0iIjtpZih0aGlzLnByZXBlbmRUZXh0KXtiKz10aGlzLnByZXBlbmRUZXh0fWIrPWEudGV4dDtyZXR1cm4gYn1yZXR1cm4gdW5kZWZpbmVkfSxzZXRBY3RpdmVJdGVtOmZ1bmN0aW9uKGMsYSl7aWYoIUV4dC5pc09iamVjdChjKSl7Yz10aGlzLm1lbnUuZ2V0Q29tcG9uZW50KGMpfWlmKGMpe2lmKCF0aGlzLnJlbmRlcmVkKXt0aGlzLnRleHQ9dGhpcy5nZXRJdGVtVGV4dChjKTt0aGlzLmljb25DbHM9Yy5pY29uQ2xzfWVsc2V7dmFyIGI9dGhpcy5nZXRJdGVtVGV4dChjKTtpZihiKXt0aGlzLnNldFRleHQoYil9dGhpcy5zZXRJY29uQ2xhc3MoYy5pY29uQ2xzKX10aGlzLmFjdGl2ZUl0ZW09YztpZighYy5jaGVja2VkKXtjLnNldENoZWNrZWQodHJ1ZSxhKX1pZih0aGlzLmZvcmNlSWNvbil7dGhpcy5zZXRJY29uQ2xhc3ModGhpcy5mb3JjZUljb24pfWlmKCFhKXt0aGlzLmZpcmVFdmVudCgiY2hhbmdlIix0aGlzLGMpfX19LGdldEFjdGl2ZUl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmVJdGVtfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudHMoImNoYW5nZSIpO2lmKHRoaXMuY2hhbmdlSGFuZGxlcil7dGhpcy5vbigiY2hhbmdlIix0aGlzLmNoYW5nZUhhbmRsZXIsdGhpcy5zY29wZXx8dGhpcyk7ZGVsZXRlIHRoaXMuY2hhbmdlSGFuZGxlcn10aGlzLml0ZW1Db3VudD10aGlzLml0ZW1zLmxlbmd0aDt0aGlzLm1lbnU9e2NsczoieC1jeWNsZS1tZW51IixpdGVtczpbXX07dmFyIGE9MDtFeHQuZWFjaCh0aGlzLml0ZW1zLGZ1bmN0aW9uKGMsYil7RXh0LmFwcGx5KGMse2dyb3VwOmMuZ3JvdXB8fHRoaXMuaWQsaXRlbUluZGV4OmIsY2hlY2tIYW5kbGVyOnRoaXMuY2hlY2tIYW5kbGVyLHNjb3BlOnRoaXMsY2hlY2tlZDpjLmNoZWNrZWR8fGZhbHNlfSk7dGhpcy5tZW51Lml0ZW1zLnB1c2goYyk7aWYoYy5jaGVja2VkKXthPWJ9fSx0aGlzKTtFeHQuQ3ljbGVCdXR0b24uc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5vbigiY2xpY2siLHRoaXMudG9nZ2xlU2VsZWN0ZWQsdGhpcyk7dGhpcy5zZXRBY3RpdmVJdGVtKGEsdHJ1ZSl9LGNoZWNrSGFuZGxlcjpmdW5jdGlvbihhLGIpe2lmKGIpe3RoaXMuc2V0QWN0aXZlSXRlbShhKX19LHRvZ2dsZVNlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5tZW51O2EucmVuZGVyKCk7aWYoIWEuaGFzTGF5b3V0KXthLmRvTGF5b3V0KCl9dmFyIGQsYjtmb3IodmFyIGM9MTtjPHRoaXMuaXRlbUNvdW50O2MrKyl7ZD0odGhpcy5hY3RpdmVJdGVtLml0ZW1JbmRleCtjKSV0aGlzLml0ZW1Db3VudDtiPWEuaXRlbXMuaXRlbUF0KGQpO2lmKCFiLmRpc2FibGVkKXtiLnNldENoZWNrZWQodHJ1ZSk7YnJlYWt9fX19KTtFeHQucmVnKCJjeWNsZSIsRXh0LkN5Y2xlQnV0dG9uKTtFeHQuVG9vbGJhcj1mdW5jdGlvbihhKXtpZihFeHQuaXNBcnJheShhKSl7YT17aXRlbXM6YSxsYXlvdXQ6InRvb2xiYXIifX1lbHNle2E9RXh0LmFwcGx5KHtsYXlvdXQ6InRvb2xiYXIifSxhKTtpZihhLmJ1dHRvbnMpe2EuaXRlbXM9YS5idXR0b25zfX1FeHQuVG9vbGJhci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX07KGZ1bmN0aW9uKCl7dmFyIGE9RXh0LlRvb2xiYXI7RXh0LmV4dGVuZChhLEV4dC5Db250YWluZXIse2RlZmF1bHRUeXBlOiJidXR0b24iLGVuYWJsZU92ZXJmbG93OmZhbHNlLHRyYWNrTWVudXM6dHJ1ZSxpbnRlcm5hbERlZmF1bHRzOntyZW1vdmVNb2RlOiJjb250YWluZXIiLGhpZGVQYXJlbnQ6dHJ1ZX0sdG9vbGJhckNsczoieC10b29sYmFyIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7YS5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygib3ZlcmZsb3djaGFuZ2UiKX0sb25SZW5kZXI6ZnVuY3Rpb24oYyxiKXtpZighdGhpcy5lbCl7aWYoIXRoaXMuYXV0b0NyZWF0ZSl7dGhpcy5hdXRvQ3JlYXRlPXtjbHM6dGhpcy50b29sYmFyQ2xzKyIgeC1zbWFsbC1lZGl0b3IifX10aGlzLmVsPWMuY3JlYXRlQ2hpbGQoRXh0LmFwcGx5KHtpZDp0aGlzLmlkfSx0aGlzLmF1dG9DcmVhdGUpLGIpO0V4dC5Ub29sYmFyLnN1cGVyY2xhc3Mub25SZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0sbG9va3VwQ29tcG9uZW50OmZ1bmN0aW9uKGIpe2lmKEV4dC5pc1N0cmluZyhiKSl7aWYoYj09Ii0iKXtiPW5ldyBhLlNlcGFyYXRvcigpfWVsc2V7aWYoYj09IiAiKXtiPW5ldyBhLlNwYWNlcigpfWVsc2V7aWYoYj09Ii0+Iil7Yj1uZXcgYS5GaWxsKCl9ZWxzZXtiPW5ldyBhLlRleHRJdGVtKGIpfX19dGhpcy5hcHBseURlZmF1bHRzKGIpfWVsc2V7aWYoYi5pc0Zvcm1GaWVsZHx8Yi5yZW5kZXIpe2I9dGhpcy5jcmVhdGVDb21wb25lbnQoYil9ZWxzZXtpZihiLnRhZyl7Yj1uZXcgYS5JdGVtKHthdXRvRWw6Yn0pfWVsc2V7aWYoYi50YWdOYW1lKXtiPW5ldyBhLkl0ZW0oe2VsOmJ9KX1lbHNle2lmKEV4dC5pc09iamVjdChiKSl7Yj1iLnh0eXBlP3RoaXMuY3JlYXRlQ29tcG9uZW50KGIpOnRoaXMuY29uc3RydWN0QnV0dG9uKGIpfX19fX1yZXR1cm4gYn0sYXBwbHlEZWZhdWx0czpmdW5jdGlvbihlKXtpZighRXh0LmlzU3RyaW5nKGUpKXtlPUV4dC5Ub29sYmFyLnN1cGVyY2xhc3MuYXBwbHlEZWZhdWx0cy5jYWxsKHRoaXMsZSk7dmFyIGI9dGhpcy5pbnRlcm5hbERlZmF1bHRzO2lmKGUuZXZlbnRzKXtFeHQuYXBwbHlJZihlLmluaXRpYWxDb25maWcsYik7RXh0LmFwcGx5KGUsYil9ZWxzZXtFeHQuYXBwbHlJZihlLGIpfX1yZXR1cm4gZX0sYWRkU2VwYXJhdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRkKG5ldyBhLlNlcGFyYXRvcigpKX0sYWRkU3BhY2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWRkKG5ldyBhLlNwYWNlcigpKX0sYWRkRmlsbDpmdW5jdGlvbigpe3RoaXMuYWRkKG5ldyBhLkZpbGwoKSl9LGFkZEVsZW1lbnQ6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuYWRkSXRlbShuZXcgYS5JdGVtKHtlbDpifSkpfSxhZGRJdGVtOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmFkZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGFkZEJ1dHRvbjpmdW5jdGlvbihjKXtpZihFeHQuaXNBcnJheShjKSl7dmFyIGU9W107Zm9yKHZhciBkPTAsYj1jLmxlbmd0aDtkPGI7ZCsrKXtlLnB1c2godGhpcy5hZGRCdXR0b24oY1tkXSkpfXJldHVybiBlfXJldHVybiB0aGlzLmFkZCh0aGlzLmNvbnN0cnVjdEJ1dHRvbihjKSl9LGFkZFRleHQ6ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuYWRkSXRlbShuZXcgYS5UZXh0SXRlbShiKSl9LGFkZERvbTpmdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5hZGQobmV3IGEuSXRlbSh7YXV0b0VsOmJ9KSl9LGFkZEZpZWxkOmZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLmFkZChiKX0saW5zZXJ0QnV0dG9uOmZ1bmN0aW9uKGMsZyl7aWYoRXh0LmlzQXJyYXkoZykpe3ZhciBlPVtdO2Zvcih2YXIgZD0wLGI9Zy5sZW5ndGg7ZDxiO2QrKyl7ZS5wdXNoKHRoaXMuaW5zZXJ0QnV0dG9uKGMrZCxnW2RdKSl9cmV0dXJuIGV9cmV0dXJuIEV4dC5Ub29sYmFyLnN1cGVyY2xhc3MuaW5zZXJ0LmNhbGwodGhpcyxjLGcpfSx0cmFja01lbnU6ZnVuY3Rpb24oYyxiKXtpZih0aGlzLnRyYWNrTWVudXMmJmMubWVudSl7dmFyIGQ9Yj8ibXVuIjoibW9uIjt0aGlzW2RdKGMsIm1lbnV0cmlnZ2Vyb3ZlciIsdGhpcy5vbkJ1dHRvblRyaWdnZXJPdmVyLHRoaXMpO3RoaXNbZF0oYywibWVudXNob3ciLHRoaXMub25CdXR0b25NZW51U2hvdyx0aGlzKTt0aGlzW2RdKGMsIm1lbnVoaWRlIix0aGlzLm9uQnV0dG9uTWVudUhpZGUsdGhpcyl9fSxjb25zdHJ1Y3RCdXR0b246ZnVuY3Rpb24oZCl7dmFyIGM9ZC5ldmVudHM/ZDp0aGlzLmNyZWF0ZUNvbXBvbmVudChkLGQuc3BsaXQ/InNwbGl0YnV0dG9uIjp0aGlzLmRlZmF1bHRUeXBlKTtyZXR1cm4gY30sb25BZGQ6ZnVuY3Rpb24oYil7RXh0LlRvb2xiYXIuc3VwZXJjbGFzcy5vbkFkZC5jYWxsKHRoaXMpO3RoaXMudHJhY2tNZW51KGIpO2lmKHRoaXMuZGlzYWJsZWQpe2IuZGlzYWJsZSgpfX0sb25SZW1vdmU6ZnVuY3Rpb24oYil7RXh0LlRvb2xiYXIuc3VwZXJjbGFzcy5vblJlbW92ZS5jYWxsKHRoaXMpO2lmKGI9PXRoaXMuYWN0aXZlTWVudUJ0bil7ZGVsZXRlIHRoaXMuYWN0aXZlTWVudUJ0bn10aGlzLnRyYWNrTWVudShiLHRydWUpfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oYil7aWYoYi5kaXNhYmxlKXtiLmRpc2FibGUoKX19KX0sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oYil7aWYoYi5lbmFibGUpe2IuZW5hYmxlKCl9fSl9LG9uQnV0dG9uVHJpZ2dlck92ZXI6ZnVuY3Rpb24oYil7aWYodGhpcy5hY3RpdmVNZW51QnRuJiZ0aGlzLmFjdGl2ZU1lbnVCdG4hPWIpe3RoaXMuYWN0aXZlTWVudUJ0bi5oaWRlTWVudSgpO2Iuc2hvd01lbnUoKTt0aGlzLmFjdGl2ZU1lbnVCdG49Yn19LG9uQnV0dG9uTWVudVNob3c6ZnVuY3Rpb24oYil7dGhpcy5hY3RpdmVNZW51QnRuPWJ9LG9uQnV0dG9uTWVudUhpZGU6ZnVuY3Rpb24oYil7ZGVsZXRlIHRoaXMuYWN0aXZlTWVudUJ0bn19KTtFeHQucmVnKCJ0b29sYmFyIixFeHQuVG9vbGJhcik7YS5JdGVtPUV4dC5leHRlbmQoRXh0LkJveENvbXBvbmVudCx7aGlkZVBhcmVudDp0cnVlLGVuYWJsZTpFeHQuZW1wdHlGbixkaXNhYmxlOkV4dC5lbXB0eUZuLGZvY3VzOkV4dC5lbXB0eUZufSk7RXh0LnJlZygidGJpdGVtIixhLkl0ZW0pO2EuU2VwYXJhdG9yPUV4dC5leHRlbmQoYS5JdGVtLHtvblJlbmRlcjpmdW5jdGlvbihjLGIpe3RoaXMuZWw9Yy5jcmVhdGVDaGlsZCh7dGFnOiJzcGFuIixjbHM6Inh0Yi1zZXAifSxiKX19KTtFeHQucmVnKCJ0YnNlcGFyYXRvciIsYS5TZXBhcmF0b3IpO2EuU3BhY2VyPUV4dC5leHRlbmQoYS5JdGVtLHtvblJlbmRlcjpmdW5jdGlvbihjLGIpe3RoaXMuZWw9Yy5jcmVhdGVDaGlsZCh7dGFnOiJkaXYiLGNsczoieHRiLXNwYWNlciIsc3R5bGU6dGhpcy53aWR0aD8id2lkdGg6Iit0aGlzLndpZHRoKyJweCI6IiJ9LGIpfX0pO0V4dC5yZWcoInRic3BhY2VyIixhLlNwYWNlcik7YS5GaWxsPUV4dC5leHRlbmQoYS5JdGVtLHtyZW5kZXI6RXh0LmVtcHR5Rm4saXNGaWxsOnRydWV9KTtFeHQucmVnKCJ0YmZpbGwiLGEuRmlsbCk7YS5UZXh0SXRlbT1FeHQuZXh0ZW5kKGEuSXRlbSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYil7YS5UZXh0SXRlbS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxFeHQuaXNTdHJpbmcoYik/e3RleHQ6Yn06Yil9LG9uUmVuZGVyOmZ1bmN0aW9uKGMsYil7dGhpcy5hdXRvRWw9e2NsczoieHRiLXRleHQiLGh0bWw6dGhpcy50ZXh0fHwiIn07YS5UZXh0SXRlbS5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxjLGIpfSxzZXRUZXh0OmZ1bmN0aW9uKGIpe2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuZWwudXBkYXRlKGIpfWVsc2V7dGhpcy50ZXh0PWJ9fX0pO0V4dC5yZWcoInRidGV4dCIsYS5UZXh0SXRlbSk7YS5CdXR0b249RXh0LmV4dGVuZChFeHQuQnV0dG9uLHt9KTthLlNwbGl0QnV0dG9uPUV4dC5leHRlbmQoRXh0LlNwbGl0QnV0dG9uLHt9KTtFeHQucmVnKCJ0YmJ1dHRvbiIsYS5CdXR0b24pO0V4dC5yZWcoInRic3BsaXQiLGEuU3BsaXRCdXR0b24pfSkoKTtFeHQuQnV0dG9uR3JvdXA9RXh0LmV4dGVuZChFeHQuUGFuZWwse2Jhc2VDbHM6IngtYnRuLWdyb3VwIixsYXlvdXQ6InRhYmxlIixkZWZhdWx0VHlwZToiYnV0dG9uIixmcmFtZTp0cnVlLGludGVybmFsRGVmYXVsdHM6e3JlbW92ZU1vZGU6ImNvbnRhaW5lciIsaGlkZVBhcmVudDp0cnVlfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5sYXlvdXRDb25maWc9dGhpcy5sYXlvdXRDb25maWd8fHt9O0V4dC5hcHBseUlmKHRoaXMubGF5b3V0Q29uZmlnLHtjb2x1bW5zOnRoaXMuY29sdW1uc30pO2lmKCF0aGlzLnRpdGxlKXt0aGlzLmFkZENsYXNzKCJ4LWJ0bi1ncm91cC1ub3RpdGxlIil9dGhpcy5vbigiYWZ0ZXJsYXlvdXQiLHRoaXMub25BZnRlckxheW91dCx0aGlzKTtFeHQuQnV0dG9uR3JvdXAuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyl9LGFwcGx5RGVmYXVsdHM6ZnVuY3Rpb24oYil7Yj1FeHQuQnV0dG9uR3JvdXAuc3VwZXJjbGFzcy5hcHBseURlZmF1bHRzLmNhbGwodGhpcyxiKTt2YXIgYT10aGlzLmludGVybmFsRGVmYXVsdHM7aWYoYi5ldmVudHMpe0V4dC5hcHBseUlmKGIuaW5pdGlhbENvbmZpZyxhKTtFeHQuYXBwbHkoYixhKX1lbHNle0V4dC5hcHBseUlmKGIsYSl9cmV0dXJuIGJ9LG9uQWZ0ZXJMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJvZHkuZ2V0RnJhbWVXaWR0aCgibHIiKSt0aGlzLmJvZHkuZG9tLmZpcnN0Q2hpbGQub2Zmc2V0V2lkdGg7dGhpcy5ib2R5LnNldFdpZHRoKGEpO3RoaXMuZWwuc2V0V2lkdGgoYSt0aGlzLmdldEZyYW1lV2lkdGgoKSl9fSk7RXh0LnJlZygiYnV0dG9uZ3JvdXAiLEV4dC5CdXR0b25Hcm91cCk7KGZ1bmN0aW9uKCl7dmFyIGE9RXh0LlRvb2xiYXI7RXh0LlBhZ2luZ1Rvb2xiYXI9RXh0LmV4dGVuZChFeHQuVG9vbGJhcix7cGFnZVNpemU6MjAsZGlzcGxheU1zZzoiRGlzcGxheWluZyB7MH0gLSB7MX0gb2YgezJ9IixlbXB0eU1zZzoiTm8gZGF0YSB0byBkaXNwbGF5IixiZWZvcmVQYWdlVGV4dDoiUGFnZSIsYWZ0ZXJQYWdlVGV4dDoib2YgezB9IixmaXJzdFRleHQ6IkZpcnN0IFBhZ2UiLHByZXZUZXh0OiJQcmV2aW91cyBQYWdlIixuZXh0VGV4dDoiTmV4dCBQYWdlIixsYXN0VGV4dDoiTGFzdCBQYWdlIixyZWZyZXNoVGV4dDoiUmVmcmVzaCIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3ZhciBjPVt0aGlzLmZpcnN0PW5ldyBhLkJ1dHRvbih7dG9vbHRpcDp0aGlzLmZpcnN0VGV4dCxvdmVyZmxvd1RleHQ6dGhpcy5maXJzdFRleHQsaWNvbkNsczoieC10YmFyLXBhZ2UtZmlyc3QiLGRpc2FibGVkOnRydWUsaGFuZGxlcjp0aGlzLm1vdmVGaXJzdCxzY29wZTp0aGlzfSksdGhpcy5wcmV2PW5ldyBhLkJ1dHRvbih7dG9vbHRpcDp0aGlzLnByZXZUZXh0LG92ZXJmbG93VGV4dDp0aGlzLnByZXZUZXh0LGljb25DbHM6IngtdGJhci1wYWdlLXByZXYiLGRpc2FibGVkOnRydWUsaGFuZGxlcjp0aGlzLm1vdmVQcmV2aW91cyxzY29wZTp0aGlzfSksIi0iLHRoaXMuYmVmb3JlUGFnZVRleHQsdGhpcy5pbnB1dEl0ZW09bmV3IEV4dC5mb3JtLk51bWJlckZpZWxkKHtjbHM6IngtdGJhci1wYWdlLW51bWJlciIsYWxsb3dEZWNpbWFsczpmYWxzZSxhbGxvd05lZ2F0aXZlOmZhbHNlLGVuYWJsZUtleUV2ZW50czp0cnVlLHNlbGVjdE9uRm9jdXM6dHJ1ZSxzdWJtaXRWYWx1ZTpmYWxzZSxsaXN0ZW5lcnM6e3Njb3BlOnRoaXMsa2V5ZG93bjp0aGlzLm9uUGFnaW5nS2V5RG93bixibHVyOnRoaXMub25QYWdpbmdCbHVyfX0pLHRoaXMuYWZ0ZXJUZXh0SXRlbT1uZXcgYS5UZXh0SXRlbSh7dGV4dDpTdHJpbmcuZm9ybWF0KHRoaXMuYWZ0ZXJQYWdlVGV4dCwxKX0pLCItIix0aGlzLm5leHQ9bmV3IGEuQnV0dG9uKHt0b29sdGlwOnRoaXMubmV4dFRleHQsb3ZlcmZsb3dUZXh0OnRoaXMubmV4dFRleHQsaWNvbkNsczoieC10YmFyLXBhZ2UtbmV4dCIsZGlzYWJsZWQ6dHJ1ZSxoYW5kbGVyOnRoaXMubW92ZU5leHQsc2NvcGU6dGhpc30pLHRoaXMubGFzdD1uZXcgYS5CdXR0b24oe3Rvb2x0aXA6dGhpcy5sYXN0VGV4dCxvdmVyZmxvd1RleHQ6dGhpcy5sYXN0VGV4dCxpY29uQ2xzOiJ4LXRiYXItcGFnZS1sYXN0IixkaXNhYmxlZDp0cnVlLGhhbmRsZXI6dGhpcy5tb3ZlTGFzdCxzY29wZTp0aGlzfSksIi0iLHRoaXMucmVmcmVzaD1uZXcgYS5CdXR0b24oe3Rvb2x0aXA6dGhpcy5yZWZyZXNoVGV4dCxvdmVyZmxvd1RleHQ6dGhpcy5yZWZyZXNoVGV4dCxpY29uQ2xzOiJ4LXRiYXItbG9hZGluZyIsaGFuZGxlcjp0aGlzLmRvUmVmcmVzaCxzY29wZTp0aGlzfSldO3ZhciBiPXRoaXMuaXRlbXN8fHRoaXMuYnV0dG9uc3x8W107aWYodGhpcy5wcmVwZW5kQnV0dG9ucyl7dGhpcy5pdGVtcz1iLmNvbmNhdChjKX1lbHNle3RoaXMuaXRlbXM9Yy5jb25jYXQoYil9ZGVsZXRlIHRoaXMuYnV0dG9ucztpZih0aGlzLmRpc3BsYXlJbmZvKXt0aGlzLml0ZW1zLnB1c2goIi0+Iik7dGhpcy5pdGVtcy5wdXNoKHRoaXMuZGlzcGxheUl0ZW09bmV3IGEuVGV4dEl0ZW0oe30pKX1FeHQuUGFnaW5nVG9vbGJhci5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiY2hhbmdlIiwiYmVmb3JlY2hhbmdlIik7dGhpcy5vbigiYWZ0ZXJsYXlvdXQiLHRoaXMub25GaXJzdExheW91dCx0aGlzLHtzaW5nbGU6dHJ1ZX0pO3RoaXMuY3Vyc29yPTA7dGhpcy5iaW5kU3RvcmUodGhpcy5zdG9yZSx0cnVlKX0sb25GaXJzdExheW91dDpmdW5jdGlvbigpe2lmKHRoaXMuZHNMb2FkZWQpe3RoaXMub25Mb2FkLmFwcGx5KHRoaXMsdGhpcy5kc0xvYWRlZCl9fSx1cGRhdGVJbmZvOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNwbGF5SXRlbSl7dmFyIGI9dGhpcy5zdG9yZS5nZXRDb3VudCgpO3ZhciBjPWI9PTA/dGhpcy5lbXB0eU1zZzpTdHJpbmcuZm9ybWF0KHRoaXMuZGlzcGxheU1zZyx0aGlzLmN1cnNvcisxLHRoaXMuY3Vyc29yK2IsdGhpcy5zdG9yZS5nZXRUb3RhbENvdW50KCkpO3RoaXMuZGlzcGxheUl0ZW0uc2V0VGV4dChjKX19LG9uTG9hZDpmdW5jdGlvbihiLGUsail7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMuZHNMb2FkZWQ9W2IsZSxqXTtyZXR1cm59dmFyIGc9dGhpcy5nZXRQYXJhbXMoKTt0aGlzLmN1cnNvcj0oai5wYXJhbXMmJmoucGFyYW1zW2cuc3RhcnRdKT9qLnBhcmFtc1tnLnN0YXJ0XTowO3ZhciBpPXRoaXMuZ2V0UGFnZURhdGEoKSxjPWkuYWN0aXZlUGFnZSxoPWkucGFnZXM7dGhpcy5hZnRlclRleHRJdGVtLnNldFRleHQoU3RyaW5nLmZvcm1hdCh0aGlzLmFmdGVyUGFnZVRleHQsaS5wYWdlcykpO3RoaXMuaW5wdXRJdGVtLnNldFZhbHVlKGMpO3RoaXMuZmlyc3Quc2V0RGlzYWJsZWQoYz09MSk7dGhpcy5wcmV2LnNldERpc2FibGVkKGM9PTEpO3RoaXMubmV4dC5zZXREaXNhYmxlZChjPT1oKTt0aGlzLmxhc3Quc2V0RGlzYWJsZWQoYz09aCk7dGhpcy5yZWZyZXNoLmVuYWJsZSgpO3RoaXMudXBkYXRlSW5mbygpO3RoaXMuZmlyZUV2ZW50KCJjaGFuZ2UiLHRoaXMsaSl9LGdldFBhZ2VEYXRhOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5zdG9yZS5nZXRUb3RhbENvdW50KCk7cmV0dXJue3RvdGFsOmIsYWN0aXZlUGFnZTpNYXRoLmNlaWwoKHRoaXMuY3Vyc29yK3RoaXMucGFnZVNpemUpL3RoaXMucGFnZVNpemUpLHBhZ2VzOmI8dGhpcy5wYWdlU2l6ZT8xOk1hdGguY2VpbChiL3RoaXMucGFnZVNpemUpfX0sY2hhbmdlUGFnZTpmdW5jdGlvbihiKXt0aGlzLmRvTG9hZCgoKGItMSkqdGhpcy5wYWdlU2l6ZSkuY29uc3RyYWluKDAsdGhpcy5zdG9yZS5nZXRUb3RhbENvdW50KCkpKX0sb25Mb2FkRXJyb3I6ZnVuY3Rpb24oKXtpZighdGhpcy5yZW5kZXJlZCl7cmV0dXJufXRoaXMucmVmcmVzaC5lbmFibGUoKX0scmVhZFBhZ2U6ZnVuY3Rpb24oZSl7dmFyIGI9dGhpcy5pbnB1dEl0ZW0uZ2V0VmFsdWUoKSxjO2lmKCFifHxpc05hTihjPXBhcnNlSW50KGIsMTApKSl7dGhpcy5pbnB1dEl0ZW0uc2V0VmFsdWUoZS5hY3RpdmVQYWdlKTtyZXR1cm4gZmFsc2V9cmV0dXJuIGN9LG9uUGFnaW5nRm9jdXM6ZnVuY3Rpb24oKXt0aGlzLmlucHV0SXRlbS5zZWxlY3QoKX0sb25QYWdpbmdCbHVyOmZ1bmN0aW9uKGIpe3RoaXMuaW5wdXRJdGVtLnNldFZhbHVlKHRoaXMuZ2V0UGFnZURhdGEoKS5hY3RpdmVQYWdlKX0sb25QYWdpbmdLZXlEb3duOmZ1bmN0aW9uKGksaCl7dmFyIGM9aC5nZXRLZXkoKSxqPXRoaXMuZ2V0UGFnZURhdGEoKSxnO2lmKGM9PWguUkVUVVJOKXtoLnN0b3BFdmVudCgpO2c9dGhpcy5yZWFkUGFnZShqKTtpZihnIT09ZmFsc2Upe2c9TWF0aC5taW4oTWF0aC5tYXgoMSxnKSxqLnBhZ2VzKS0xO3RoaXMuZG9Mb2FkKGcqdGhpcy5wYWdlU2l6ZSl9fWVsc2V7aWYoYz09aC5IT01FfHxjPT1oLkVORCl7aC5zdG9wRXZlbnQoKTtnPWM9PWguSE9NRT8xOmoucGFnZXM7aS5zZXRWYWx1ZShnKX1lbHNle2lmKGM9PWguVVB8fGM9PWguUEFHRVVQfHxjPT1oLkRPV058fGM9PWguUEFHRURPV04pe2guc3RvcEV2ZW50KCk7aWYoKGc9dGhpcy5yZWFkUGFnZShqKSkpe3ZhciBiPWguc2hpZnRLZXk/MTA6MTtpZihjPT1oLkRPV058fGM9PWguUEFHRURPV04pe2IqPS0xfWcrPWI7aWYoZz49MSZnPD1qLnBhZ2VzKXtpLnNldFZhbHVlKGcpfX19fX19LGdldFBhcmFtczpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmFtTmFtZXN8fHRoaXMuc3RvcmUucGFyYW1OYW1lc30sYmVmb3JlTG9hZDpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQmJnRoaXMucmVmcmVzaCl7dGhpcy5yZWZyZXNoLmRpc2FibGUoKX19LGRvTG9hZDpmdW5jdGlvbihkKXt2YXIgYz17fSxiPXRoaXMuZ2V0UGFyYW1zKCk7Y1tiLnN0YXJ0XT1kO2NbYi5saW1pdF09dGhpcy5wYWdlU2l6ZTtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlY2hhbmdlIix0aGlzLGMpIT09ZmFsc2Upe3RoaXMuc3RvcmUubG9hZCh7cGFyYW1zOmN9KX19LG1vdmVGaXJzdDpmdW5jdGlvbigpe3RoaXMuZG9Mb2FkKDApfSxtb3ZlUHJldmlvdXM6ZnVuY3Rpb24oKXt0aGlzLmRvTG9hZChNYXRoLm1heCgwLHRoaXMuY3Vyc29yLXRoaXMucGFnZVNpemUpKX0sbW92ZU5leHQ6ZnVuY3Rpb24oKXt0aGlzLmRvTG9hZCh0aGlzLmN1cnNvcit0aGlzLnBhZ2VTaXplKX0sbW92ZUxhc3Q6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLnN0b3JlLmdldFRvdGFsQ291bnQoKSxiPWMldGhpcy5wYWdlU2l6ZTt0aGlzLmRvTG9hZChiPyhjLWIpOmMtdGhpcy5wYWdlU2l6ZSl9LGRvUmVmcmVzaDpmdW5jdGlvbigpe3RoaXMuZG9Mb2FkKHRoaXMuY3Vyc29yKX0sYmluZFN0b3JlOmZ1bmN0aW9uKGMsZCl7dmFyIGI7aWYoIWQmJnRoaXMuc3RvcmUpe2lmKGMhPT10aGlzLnN0b3JlJiZ0aGlzLnN0b3JlLmF1dG9EZXN0cm95KXt0aGlzLnN0b3JlLmRlc3Ryb3koKX1lbHNle3RoaXMuc3RvcmUudW4oImJlZm9yZWxvYWQiLHRoaXMuYmVmb3JlTG9hZCx0aGlzKTt0aGlzLnN0b3JlLnVuKCJsb2FkIix0aGlzLm9uTG9hZCx0aGlzKTt0aGlzLnN0b3JlLnVuKCJleGNlcHRpb24iLHRoaXMub25Mb2FkRXJyb3IsdGhpcyl9aWYoIWMpe3RoaXMuc3RvcmU9bnVsbH19aWYoYyl7Yz1FeHQuU3RvcmVNZ3IubG9va3VwKGMpO2Mub24oe3Njb3BlOnRoaXMsYmVmb3JlbG9hZDp0aGlzLmJlZm9yZUxvYWQsbG9hZDp0aGlzLm9uTG9hZCxleGNlcHRpb246dGhpcy5vbkxvYWRFcnJvcn0pO2I9dHJ1ZX10aGlzLnN0b3JlPWM7aWYoYil7dGhpcy5vbkxvYWQoYyxudWxsLHt9KX19LHVuYmluZDpmdW5jdGlvbihiKXt0aGlzLmJpbmRTdG9yZShudWxsKX0sYmluZDpmdW5jdGlvbihiKXt0aGlzLmJpbmRTdG9yZShiKX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5iaW5kU3RvcmUobnVsbCk7RXh0LlBhZ2luZ1Rvb2xiYXIuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX19KX0pKCk7RXh0LnJlZygicGFnaW5nIixFeHQuUGFnaW5nVG9vbGJhcik7RXh0Lkhpc3Rvcnk9KGZ1bmN0aW9uKCl7dmFyIGUsYzt2YXIgaz1mYWxzZTt2YXIgZDtmdW5jdGlvbiBnKCl7dmFyIGw9bG9jYXRpb24uaHJlZixtPWwuaW5kZXhPZigiIyIpLG49bT49MD9sLnN1YnN0cihtKzEpOm51bGw7aWYoRXh0LmlzR2Vja28pe249ZGVjb2RlVVJJQ29tcG9uZW50KG4pfXJldHVybiBufWZ1bmN0aW9uIGEoKXtjLnZhbHVlPWR9ZnVuY3Rpb24gaChsKXtkPWw7RXh0Lkhpc3RvcnkuZmlyZUV2ZW50KCJjaGFuZ2UiLGwpfWZ1bmN0aW9uIGkobSl7dmFyIGw9Wyc8aHRtbD48Ym9keT48ZGl2IGlkPSJzdGF0ZSI+JyxFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShtKSwiPC9kaXY+PC9ib2R5PjwvaHRtbD4iXS5qb2luKCIiKTt0cnl7dmFyIG89ZS5jb250ZW50V2luZG93LmRvY3VtZW50O28ub3BlbigpO28ud3JpdGUobCk7by5jbG9zZSgpO3JldHVybiB0cnVlfWNhdGNoKG4pe3JldHVybiBmYWxzZX19ZnVuY3Rpb24gYigpe2lmKCFlLmNvbnRlbnRXaW5kb3d8fCFlLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpe3NldFRpbWVvdXQoYiwxMCk7cmV0dXJufXZhciBvPWUuY29udGVudFdpbmRvdy5kb2N1bWVudDt2YXIgbT1vLmdldEVsZW1lbnRCeUlkKCJzdGF0ZSIpO3ZhciBsPW0/bS5pbm5lclRleHQ6bnVsbDt2YXIgbj1nKCk7c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtvPWUuY29udGVudFdpbmRvdy5kb2N1bWVudDttPW8uZ2V0RWxlbWVudEJ5SWQoInN0YXRlIik7dmFyIHE9bT9tLmlubmVyVGV4dDpudWxsO3ZhciBwPWcoKTtpZihxIT09bCl7bD1xO2gobCk7bG9jYXRpb24uaGFzaD1sO249bDthKCl9ZWxzZXtpZihwIT09bil7bj1wO2kocCl9fX0sNTApO2s9dHJ1ZTtFeHQuSGlzdG9yeS5maXJlRXZlbnQoInJlYWR5IixFeHQuSGlzdG9yeSl9ZnVuY3Rpb24gaigpe2Q9Yy52YWx1ZT9jLnZhbHVlOmcoKTtpZihFeHQuaXNJRSl7YigpfWVsc2V7dmFyIGw9ZygpO3NldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIG09ZygpO2lmKG0hPT1sKXtsPW07aChsKTthKCl9fSw1MCk7az10cnVlO0V4dC5IaXN0b3J5LmZpcmVFdmVudCgicmVhZHkiLEV4dC5IaXN0b3J5KX19cmV0dXJue2ZpZWxkSWQ6IngtaGlzdG9yeS1maWVsZCIsaWZyYW1lSWQ6IngtaGlzdG9yeS1mcmFtZSIsZXZlbnRzOnt9LGluaXQ6ZnVuY3Rpb24obSxsKXtpZihrKXtFeHQuY2FsbGJhY2sobSxsLFt0aGlzXSk7cmV0dXJufWlmKCFFeHQuaXNSZWFkeSl7RXh0Lm9uUmVhZHkoZnVuY3Rpb24oKXtFeHQuSGlzdG9yeS5pbml0KG0sbCl9KTtyZXR1cm59Yz1FeHQuZ2V0RG9tKEV4dC5IaXN0b3J5LmZpZWxkSWQpO2lmKEV4dC5pc0lFKXtlPUV4dC5nZXREb20oRXh0Lkhpc3RvcnkuaWZyYW1lSWQpfXRoaXMuYWRkRXZlbnRzKCJyZWFkeSIsImNoYW5nZSIpO2lmKG0pe3RoaXMub24oInJlYWR5IixtLGwse3NpbmdsZTp0cnVlfSl9aigpfSxhZGQ6ZnVuY3Rpb24obCxtKXtpZihtIT09ZmFsc2Upe2lmKHRoaXMuZ2V0VG9rZW4oKT09bCl7cmV0dXJuIHRydWV9fWlmKEV4dC5pc0lFKXtyZXR1cm4gaShsKX1lbHNle2xvY2F0aW9uLmhhc2g9bDtyZXR1cm4gdHJ1ZX19LGJhY2s6ZnVuY3Rpb24oKXtoaXN0b3J5LmdvKC0xKX0sZm9yd2FyZDpmdW5jdGlvbigpe2hpc3RvcnkuZ28oMSl9LGdldFRva2VuOmZ1bmN0aW9uKCl7cmV0dXJuIGs/ZDpnKCl9fX0pKCk7RXh0LmFwcGx5KEV4dC5IaXN0b3J5LG5ldyBFeHQudXRpbC5PYnNlcnZhYmxlKCkpO0V4dC5UaXA9RXh0LmV4dGVuZChFeHQuUGFuZWwse21pbldpZHRoOjQwLG1heFdpZHRoOjMwMCxzaGFkb3c6InNpZGVzIixkZWZhdWx0QWxpZ246InRsLWJsPyIsYXV0b1JlbmRlcjp0cnVlLHF1aWNrU2hvd0ludGVydmFsOjI1MCxmcmFtZTp0cnVlLGhpZGRlbjp0cnVlLGJhc2VDbHM6IngtdGlwIixmbG9hdGluZzp7c2hhZG93OnRydWUsc2hpbTp0cnVlLHVzZURpc3BsYXk6dHJ1ZSxjb25zdHJhaW46ZmFsc2V9LGF1dG9IZWlnaHQ6dHJ1ZSxjbG9zZUFjdGlvbjoiaGlkZSIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5UaXAuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7aWYodGhpcy5jbG9zYWJsZSYmIXRoaXMudGl0bGUpe3RoaXMuZWxlbWVudHMrPSIsaGVhZGVyIn19LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LlRpcC5zdXBlcmNsYXNzLmFmdGVyUmVuZGVyLmNhbGwodGhpcyk7aWYodGhpcy5jbG9zYWJsZSl7dGhpcy5hZGRUb29sKHtpZDoiY2xvc2UiLGhhbmRsZXI6dGhpc1t0aGlzLmNsb3NlQWN0aW9uXSxzY29wZTp0aGlzfSl9fSxzaG93QXQ6ZnVuY3Rpb24oYSl7RXh0LlRpcC5zdXBlcmNsYXNzLnNob3cuY2FsbCh0aGlzKTtpZih0aGlzLm1lYXN1cmVXaWR0aCE9PWZhbHNlJiYoIXRoaXMuaW5pdGlhbENvbmZpZ3x8dHlwZW9mIHRoaXMuaW5pdGlhbENvbmZpZy53aWR0aCE9Im51bWJlciIpKXt0aGlzLmRvQXV0b1dpZHRoKCl9aWYodGhpcy5jb25zdHJhaW5Qb3NpdGlvbil7YT10aGlzLmVsLmFkanVzdEZvckNvbnN0cmFpbnRzKGEpfXRoaXMuc2V0UGFnZVBvc2l0aW9uKGFbMF0sYVsxXSl9LGRvQXV0b1dpZHRoOmZ1bmN0aW9uKGEpe2E9YXx8MDt2YXIgYj10aGlzLmJvZHkuZ2V0VGV4dFdpZHRoKCk7aWYodGhpcy50aXRsZSl7Yj1NYXRoLm1heChiLHRoaXMuaGVhZGVyLmNoaWxkKCJzcGFuIikuZ2V0VGV4dFdpZHRoKHRoaXMudGl0bGUpKX1iKz10aGlzLmdldEZyYW1lV2lkdGgoKSsodGhpcy5jbG9zYWJsZT8yMDowKSt0aGlzLmJvZHkuZ2V0UGFkZGluZygibHIiKSthO3RoaXMuc2V0V2lkdGgoYi5jb25zdHJhaW4odGhpcy5taW5XaWR0aCx0aGlzLm1heFdpZHRoKSk7aWYoRXh0LmlzSUU3JiYhdGhpcy5yZXBhaW50ZWQpe3RoaXMuZWwucmVwYWludCgpO3RoaXMucmVwYWludGVkPXRydWV9fSxzaG93Qnk6ZnVuY3Rpb24oYSxiKXtpZighdGhpcy5yZW5kZXJlZCl7dGhpcy5yZW5kZXIoRXh0LmdldEJvZHkoKSl9dGhpcy5zaG93QXQodGhpcy5lbC5nZXRBbGlnblRvWFkoYSxifHx0aGlzLmRlZmF1bHRBbGlnbikpfSxpbml0RHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dGhpcy5kZD1uZXcgRXh0LlRpcC5ERCh0aGlzLHR5cGVvZiB0aGlzLmRyYWdnYWJsZT09ImJvb2xlYW4iP251bGw6dGhpcy5kcmFnZ2FibGUpO3RoaXMuaGVhZGVyLmFkZENsYXNzKCJ4LXRpcC1kcmFnZ2FibGUiKX19KTtFeHQucmVnKCJ0aXAiLEV4dC5UaXApO0V4dC5UaXAuREQ9ZnVuY3Rpb24oYixhKXtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLnRpcD1iO0V4dC5UaXAuREQuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYi5lbC5pZCwiV2luZG93REQtIitiLmlkKTt0aGlzLnNldEhhbmRsZUVsSWQoYi5oZWFkZXIuaWQpO3RoaXMuc2Nyb2xsPWZhbHNlfTtFeHQuZXh0ZW5kKEV4dC5UaXAuREQsRXh0LmRkLkRELHttb3ZlT25seTp0cnVlLHNjcm9sbDpmYWxzZSxoZWFkZXJPZmZzZXRzOlsxMDAsMjVdLHN0YXJ0RHJhZzpmdW5jdGlvbigpe3RoaXMudGlwLmVsLmRpc2FibGVTaGFkb3coKX0sZW5kRHJhZzpmdW5jdGlvbihhKXt0aGlzLnRpcC5lbC5lbmFibGVTaGFkb3codHJ1ZSl9fSk7RXh0LlRvb2xUaXA9RXh0LmV4dGVuZChFeHQuVGlwLHtzaG93RGVsYXk6NTAwLGhpZGVEZWxheToyMDAsZGlzbWlzc0RlbGF5OjUwMDAsdHJhY2tNb3VzZTpmYWxzZSxhbmNob3JUb1RhcmdldDp0cnVlLGFuY2hvck9mZnNldDowLHRhcmdldENvdW50ZXI6MCxjb25zdHJhaW5Qb3NpdGlvbjpmYWxzZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LlRvb2xUaXAuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5sYXN0QWN0aXZlPW5ldyBEYXRlKCk7dGhpcy5pbml0VGFyZ2V0KHRoaXMudGFyZ2V0KTt0aGlzLm9yaWdBbmNob3I9dGhpcy5hbmNob3J9LG9uUmVuZGVyOmZ1bmN0aW9uKGIsYSl7RXh0LlRvb2xUaXAuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTt0aGlzLmFuY2hvckNscz0ieC10aXAtYW5jaG9yLSIrdGhpcy5nZXRBbmNob3JQb3NpdGlvbigpO3RoaXMuYW5jaG9yRWw9dGhpcy5lbC5jcmVhdGVDaGlsZCh7Y2xzOiJ4LXRpcC1hbmNob3IgIit0aGlzLmFuY2hvckNsc30pfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe0V4dC5Ub29sVGlwLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTt0aGlzLmFuY2hvckVsLnNldFN0eWxlKCJ6LWluZGV4Iix0aGlzLmVsLmdldFpJbmRleCgpKzEpLnNldFZpc2liaWxpdHlNb2RlKEV4dC5FbGVtZW50LkRJU1BMQVkpfSxpbml0VGFyZ2V0OmZ1bmN0aW9uKGMpe3ZhciBhO2lmKChhPUV4dC5nZXQoYykpKXtpZih0aGlzLnRhcmdldCl7dmFyIGI9RXh0LmdldCh0aGlzLnRhcmdldCk7dGhpcy5tdW4oYiwibW91c2VvdmVyIix0aGlzLm9uVGFyZ2V0T3Zlcix0aGlzKTt0aGlzLm11bihiLCJtb3VzZW91dCIsdGhpcy5vblRhcmdldE91dCx0aGlzKTt0aGlzLm11bihiLCJtb3VzZW1vdmUiLHRoaXMub25Nb3VzZU1vdmUsdGhpcyl9dGhpcy5tb24oYSx7bW91c2VvdmVyOnRoaXMub25UYXJnZXRPdmVyLG1vdXNlb3V0OnRoaXMub25UYXJnZXRPdXQsbW91c2Vtb3ZlOnRoaXMub25Nb3VzZU1vdmUsc2NvcGU6dGhpc30pO3RoaXMudGFyZ2V0PWF9aWYodGhpcy5hbmNob3Ipe3RoaXMuYW5jaG9yVGFyZ2V0PXRoaXMudGFyZ2V0fX0sb25Nb3VzZU1vdmU6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5kZWxlZ2F0ZT9iLmdldFRhcmdldCh0aGlzLmRlbGVnYXRlKTp0aGlzLnRyaWdnZXJFbGVtZW50PXRydWU7aWYoYSl7dGhpcy50YXJnZXRYWT1iLmdldFhZKCk7aWYoYT09PXRoaXMudHJpZ2dlckVsZW1lbnQpe2lmKCF0aGlzLmhpZGRlbiYmdGhpcy50cmFja01vdXNlKXt0aGlzLnNldFBhZ2VQb3NpdGlvbih0aGlzLmdldFRhcmdldFhZKCkpfX1lbHNle3RoaXMuaGlkZSgpO3RoaXMubGFzdEFjdGl2ZT1uZXcgRGF0ZSgwKTt0aGlzLm9uVGFyZ2V0T3ZlcihiKX19ZWxzZXtpZighdGhpcy5jbG9zYWJsZSYmdGhpcy5pc1Zpc2libGUoKSl7dGhpcy5oaWRlKCl9fX0sZ2V0VGFyZ2V0WFk6ZnVuY3Rpb24oKXtpZih0aGlzLmRlbGVnYXRlKXt0aGlzLmFuY2hvclRhcmdldD10aGlzLnRyaWdnZXJFbGVtZW50fWlmKHRoaXMuYW5jaG9yKXt0aGlzLnRhcmdldENvdW50ZXIrKzt2YXIgYz10aGlzLmdldE9mZnNldHMoKSxsPSh0aGlzLmFuY2hvclRvVGFyZ2V0JiYhdGhpcy50cmFja01vdXNlKT90aGlzLmVsLmdldEFsaWduVG9YWSh0aGlzLmFuY2hvclRhcmdldCx0aGlzLmdldEFuY2hvckFsaWduKCkpOnRoaXMudGFyZ2V0WFksYT1FeHQubGliLkRvbS5nZXRWaWV3V2lkdGgoKS01LGg9RXh0LmxpYi5Eb20uZ2V0Vmlld0hlaWdodCgpLTUsaT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZT1kb2N1bWVudC5ib2R5LGs9KGkuc2Nyb2xsTGVmdHx8ZS5zY3JvbGxMZWZ0fHwwKSs1LGo9KGkuc2Nyb2xsVG9wfHxlLnNjcm9sbFRvcHx8MCkrNSxiPVtsWzBdK2NbMF0sbFsxXStjWzFdXSxnPXRoaXMuZ2V0U2l6ZSgpO3RoaXMuYW5jaG9yRWwucmVtb3ZlQ2xhc3ModGhpcy5hbmNob3JDbHMpO2lmKHRoaXMudGFyZ2V0Q291bnRlcjwyKXtpZihiWzBdPGspe2lmKHRoaXMuYW5jaG9yVG9UYXJnZXQpe3RoaXMuZGVmYXVsdEFsaWduPSJsLXIiO2lmKHRoaXMubW91c2VPZmZzZXQpe3RoaXMubW91c2VPZmZzZXRbMF0qPS0xfX10aGlzLmFuY2hvcj0ibGVmdCI7cmV0dXJuIHRoaXMuZ2V0VGFyZ2V0WFkoKX1pZihiWzBdK2cud2lkdGg+YSl7aWYodGhpcy5hbmNob3JUb1RhcmdldCl7dGhpcy5kZWZhdWx0QWxpZ249InItbCI7aWYodGhpcy5tb3VzZU9mZnNldCl7dGhpcy5tb3VzZU9mZnNldFswXSo9LTF9fXRoaXMuYW5jaG9yPSJyaWdodCI7cmV0dXJuIHRoaXMuZ2V0VGFyZ2V0WFkoKX1pZihiWzFdPGope2lmKHRoaXMuYW5jaG9yVG9UYXJnZXQpe3RoaXMuZGVmYXVsdEFsaWduPSJ0LWIiO2lmKHRoaXMubW91c2VPZmZzZXQpe3RoaXMubW91c2VPZmZzZXRbMV0qPS0xfX10aGlzLmFuY2hvcj0idG9wIjtyZXR1cm4gdGhpcy5nZXRUYXJnZXRYWSgpfWlmKGJbMV0rZy5oZWlnaHQ+aCl7aWYodGhpcy5hbmNob3JUb1RhcmdldCl7dGhpcy5kZWZhdWx0QWxpZ249ImItdCI7aWYodGhpcy5tb3VzZU9mZnNldCl7dGhpcy5tb3VzZU9mZnNldFsxXSo9LTF9fXRoaXMuYW5jaG9yPSJib3R0b20iO3JldHVybiB0aGlzLmdldFRhcmdldFhZKCl9fXRoaXMuYW5jaG9yQ2xzPSJ4LXRpcC1hbmNob3ItIit0aGlzLmdldEFuY2hvclBvc2l0aW9uKCk7dGhpcy5hbmNob3JFbC5hZGRDbGFzcyh0aGlzLmFuY2hvckNscyk7dGhpcy50YXJnZXRDb3VudGVyPTA7cmV0dXJuIGJ9ZWxzZXt2YXIgZD10aGlzLmdldE1vdXNlT2Zmc2V0KCk7cmV0dXJuW3RoaXMudGFyZ2V0WFlbMF0rZFswXSx0aGlzLnRhcmdldFhZWzFdK2RbMV1dfX0sZ2V0TW91c2VPZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmFuY2hvcj9bMCwwXTpbMTUsMThdO2lmKHRoaXMubW91c2VPZmZzZXQpe2FbMF0rPXRoaXMubW91c2VPZmZzZXRbMF07YVsxXSs9dGhpcy5tb3VzZU9mZnNldFsxXX1yZXR1cm4gYX0sZ2V0QW5jaG9yUG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLmFuY2hvcil7dGhpcy50aXBBbmNob3I9dGhpcy5hbmNob3IuY2hhckF0KDApfWVsc2V7dmFyIGE9dGhpcy5kZWZhdWx0QWxpZ24ubWF0Y2goL14oW2Etel0rKS0oW2Etel0rKShcPyk/JC8pO2lmKCFhKXt0aHJvdyJBbmNob3JUaXAuZGVmYXVsdEFsaWduIGlzIGludmFsaWQifXRoaXMudGlwQW5jaG9yPWFbMV0uY2hhckF0KDApfXN3aXRjaCh0aGlzLnRpcEFuY2hvcil7Y2FzZSJ0IjpyZXR1cm4idG9wIjtjYXNlImIiOnJldHVybiJib3R0b20iO2Nhc2UiciI6cmV0dXJuInJpZ2h0In1yZXR1cm4ibGVmdCJ9LGdldEFuY2hvckFsaWduOmZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMuYW5jaG9yKXtjYXNlInRvcCI6cmV0dXJuInRsLWJsIjtjYXNlImxlZnQiOnJldHVybiJ0bC10ciI7Y2FzZSJyaWdodCI6cmV0dXJuInRyLXRsIjtkZWZhdWx0OnJldHVybiJibC10bCJ9fSxnZXRPZmZzZXRzOmZ1bmN0aW9uKCl7dmFyIGIsYT10aGlzLmdldEFuY2hvclBvc2l0aW9uKCkuY2hhckF0KDApO2lmKHRoaXMuYW5jaG9yVG9UYXJnZXQmJiF0aGlzLnRyYWNrTW91c2Upe3N3aXRjaChhKXtjYXNlInQiOmI9WzAsOV07YnJlYWs7Y2FzZSJiIjpiPVswLC0xM107YnJlYWs7Y2FzZSJyIjpiPVstMTMsMF07YnJlYWs7ZGVmYXVsdDpiPVs5LDBdO2JyZWFrfX1lbHNle3N3aXRjaChhKXtjYXNlInQiOmI9Wy0xNS10aGlzLmFuY2hvck9mZnNldCwzMF07YnJlYWs7Y2FzZSJiIjpiPVstMTktdGhpcy5hbmNob3JPZmZzZXQsLTEzLXRoaXMuZWwuZG9tLm9mZnNldEhlaWdodF07YnJlYWs7Y2FzZSJyIjpiPVstMTUtdGhpcy5lbC5kb20ub2Zmc2V0V2lkdGgsLTEzLXRoaXMuYW5jaG9yT2Zmc2V0XTticmVhaztkZWZhdWx0OmI9WzI1LC0xMy10aGlzLmFuY2hvck9mZnNldF07YnJlYWt9fXZhciBjPXRoaXMuZ2V0TW91c2VPZmZzZXQoKTtiWzBdKz1jWzBdO2JbMV0rPWNbMV07cmV0dXJuIGJ9LG9uVGFyZ2V0T3ZlcjpmdW5jdGlvbihiKXtpZih0aGlzLmRpc2FibGVkfHxiLndpdGhpbih0aGlzLnRhcmdldC5kb20sdHJ1ZSkpe3JldHVybn12YXIgYT1iLmdldFRhcmdldCh0aGlzLmRlbGVnYXRlKTtpZihhKXt0aGlzLnRyaWdnZXJFbGVtZW50PWE7dGhpcy5jbGVhclRpbWVyKCJoaWRlIik7dGhpcy50YXJnZXRYWT1iLmdldFhZKCk7dGhpcy5kZWxheVNob3coKX19LGRlbGF5U2hvdzpmdW5jdGlvbigpe2lmKHRoaXMuaGlkZGVuJiYhdGhpcy5zaG93VGltZXIpe2lmKHRoaXMubGFzdEFjdGl2ZS5nZXRFbGFwc2VkKCk8dGhpcy5xdWlja1Nob3dJbnRlcnZhbCl7dGhpcy5zaG93KCl9ZWxzZXt0aGlzLnNob3dUaW1lcj10aGlzLnNob3cuZGVmZXIodGhpcy5zaG93RGVsYXksdGhpcyl9fWVsc2V7aWYoIXRoaXMuaGlkZGVuJiZ0aGlzLmF1dG9IaWRlIT09ZmFsc2Upe3RoaXMuc2hvdygpfX19LG9uVGFyZ2V0T3V0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGlzYWJsZWR8fGEud2l0aGluKHRoaXMudGFyZ2V0LmRvbSx0cnVlKSl7cmV0dXJufXRoaXMuY2xlYXJUaW1lcigic2hvdyIpO2lmKHRoaXMuYXV0b0hpZGUhPT1mYWxzZSl7dGhpcy5kZWxheUhpZGUoKX19LGRlbGF5SGlkZTpmdW5jdGlvbigpe2lmKCF0aGlzLmhpZGRlbiYmIXRoaXMuaGlkZVRpbWVyKXt0aGlzLmhpZGVUaW1lcj10aGlzLmhpZGUuZGVmZXIodGhpcy5oaWRlRGVsYXksdGhpcyl9fSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhclRpbWVyKCJkaXNtaXNzIik7dGhpcy5sYXN0QWN0aXZlPW5ldyBEYXRlKCk7aWYodGhpcy5hbmNob3JFbCl7dGhpcy5hbmNob3JFbC5oaWRlKCl9RXh0LlRvb2xUaXAuc3VwZXJjbGFzcy5oaWRlLmNhbGwodGhpcyk7ZGVsZXRlIHRoaXMudHJpZ2dlckVsZW1lbnR9LHNob3c6ZnVuY3Rpb24oKXtpZih0aGlzLmFuY2hvcil7dGhpcy5zaG93QXQoWy0xMDAwLC0xMDAwXSk7dGhpcy5vcmlnQ29uc3RyYWluUG9zaXRpb249dGhpcy5jb25zdHJhaW5Qb3NpdGlvbjt0aGlzLmNvbnN0cmFpblBvc2l0aW9uPWZhbHNlO3RoaXMuYW5jaG9yPXRoaXMub3JpZ0FuY2hvcn10aGlzLnNob3dBdCh0aGlzLmdldFRhcmdldFhZKCkpO2lmKHRoaXMuYW5jaG9yKXt0aGlzLmFuY2hvckVsLnNob3coKTt0aGlzLnN5bmNBbmNob3IoKTt0aGlzLmNvbnN0cmFpblBvc2l0aW9uPXRoaXMub3JpZ0NvbnN0cmFpblBvc2l0aW9ufWVsc2V7dGhpcy5hbmNob3JFbC5oaWRlKCl9fSxzaG93QXQ6ZnVuY3Rpb24oYSl7dGhpcy5sYXN0QWN0aXZlPW5ldyBEYXRlKCk7dGhpcy5jbGVhclRpbWVycygpO0V4dC5Ub29sVGlwLnN1cGVyY2xhc3Muc2hvd0F0LmNhbGwodGhpcyxhKTtpZih0aGlzLmRpc21pc3NEZWxheSYmdGhpcy5hdXRvSGlkZSE9PWZhbHNlKXt0aGlzLmRpc21pc3NUaW1lcj10aGlzLmhpZGUuZGVmZXIodGhpcy5kaXNtaXNzRGVsYXksdGhpcyl9aWYodGhpcy5hbmNob3ImJiF0aGlzLmFuY2hvckVsLmlzVmlzaWJsZSgpKXt0aGlzLnN5bmNBbmNob3IoKTt0aGlzLmFuY2hvckVsLnNob3coKX1lbHNle3RoaXMuYW5jaG9yRWwuaGlkZSgpfX0sc3luY0FuY2hvcjpmdW5jdGlvbigpe3ZhciBhLGIsYztzd2l0Y2godGhpcy50aXBBbmNob3IuY2hhckF0KDApKXtjYXNlInQiOmE9ImIiO2I9InRsIjtjPVsyMCt0aGlzLmFuY2hvck9mZnNldCwyXTticmVhaztjYXNlInIiOmE9ImwiO2I9InRyIjtjPVstMiwxMSt0aGlzLmFuY2hvck9mZnNldF07YnJlYWs7Y2FzZSJiIjphPSJ0IjtiPSJibCI7Yz1bMjArdGhpcy5hbmNob3JPZmZzZXQsLTJdO2JyZWFrO2RlZmF1bHQ6YT0iciI7Yj0idGwiO2M9WzIsMTErdGhpcy5hbmNob3JPZmZzZXRdO2JyZWFrfXRoaXMuYW5jaG9yRWwuYWxpZ25Ubyh0aGlzLmVsLGErIi0iK2IsYyl9LHNldFBhZ2VQb3NpdGlvbjpmdW5jdGlvbihhLGIpe0V4dC5Ub29sVGlwLnN1cGVyY2xhc3Muc2V0UGFnZVBvc2l0aW9uLmNhbGwodGhpcyxhLGIpO2lmKHRoaXMuYW5jaG9yKXt0aGlzLnN5bmNBbmNob3IoKX19LGNsZWFyVGltZXI6ZnVuY3Rpb24oYSl7YT1hKyJUaW1lciI7Y2xlYXJUaW1lb3V0KHRoaXNbYV0pO2RlbGV0ZSB0aGlzW2FdfSxjbGVhclRpbWVyczpmdW5jdGlvbigpe3RoaXMuY2xlYXJUaW1lcigic2hvdyIpO3RoaXMuY2xlYXJUaW1lcigiZGlzbWlzcyIpO3RoaXMuY2xlYXJUaW1lcigiaGlkZSIpfSxvblNob3c6ZnVuY3Rpb24oKXtFeHQuVG9vbFRpcC5zdXBlcmNsYXNzLm9uU2hvdy5jYWxsKHRoaXMpO0V4dC5nZXREb2MoKS5vbigibW91c2Vkb3duIix0aGlzLm9uRG9jTW91c2VEb3duLHRoaXMpfSxvbkhpZGU6ZnVuY3Rpb24oKXtFeHQuVG9vbFRpcC5zdXBlcmNsYXNzLm9uSGlkZS5jYWxsKHRoaXMpO0V4dC5nZXREb2MoKS51bigibW91c2Vkb3duIix0aGlzLm9uRG9jTW91c2VEb3duLHRoaXMpfSxvbkRvY01vdXNlRG93bjpmdW5jdGlvbihhKXtpZih0aGlzLmF1dG9IaWRlIT09dHJ1ZSYmIXRoaXMuY2xvc2FibGUmJiFhLndpdGhpbih0aGlzLmVsLmRvbSkpe3RoaXMuZGlzYWJsZSgpO3RoaXMuZG9FbmFibGUuZGVmZXIoMTAwLHRoaXMpfX0sZG9FbmFibGU6ZnVuY3Rpb24oKXtpZighdGhpcy5pc0Rlc3Ryb3llZCl7dGhpcy5lbmFibGUoKX19LG9uRGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuY2xlYXJUaW1lcnMoKTt0aGlzLmhpZGUoKX0sYWRqdXN0UG9zaXRpb246ZnVuY3Rpb24oYSxkKXtpZih0aGlzLmNvbnN0cmFpblBvc2l0aW9uKXt2YXIgYz10aGlzLnRhcmdldFhZWzFdLGI9dGhpcy5nZXRTaXplKCkuaGVpZ2h0O2lmKGQ8PWMmJihkK2IpPj1jKXtkPWMtYi01fX1yZXR1cm57eDphLHk6ZH19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmNsZWFyVGltZXJzKCk7RXh0LmRlc3Ryb3kodGhpcy5hbmNob3JFbCk7ZGVsZXRlIHRoaXMuYW5jaG9yRWw7ZGVsZXRlIHRoaXMudGFyZ2V0O2RlbGV0ZSB0aGlzLmFuY2hvclRhcmdldDtkZWxldGUgdGhpcy50cmlnZ2VyRWxlbWVudDtFeHQuVG9vbFRpcC5zdXBlcmNsYXNzLmJlZm9yZURlc3Ryb3kuY2FsbCh0aGlzKX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmdldERvYygpLnVuKCJtb3VzZWRvd24iLHRoaXMub25Eb2NNb3VzZURvd24sdGhpcyk7RXh0LlRvb2xUaXAuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX19KTtFeHQucmVnKCJ0b29sdGlwIixFeHQuVG9vbFRpcCk7RXh0LlF1aWNrVGlwPUV4dC5leHRlbmQoRXh0LlRvb2xUaXAse2ludGVyY2VwdFRpdGxlczpmYWxzZSx0YWdDb25maWc6e25hbWVzcGFjZToiZXh0IixhdHRyaWJ1dGU6InF0aXAiLHdpZHRoOiJxd2lkdGgiLHRhcmdldDoidGFyZ2V0Iix0aXRsZToicXRpdGxlIixoaWRlOiJoaWRlIixjbHM6InFjbGFzcyIsYWxpZ246InFhbGlnbiIsYW5jaG9yOiJhbmNob3IifSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy50YXJnZXQ9dGhpcy50YXJnZXR8fEV4dC5nZXREb2MoKTt0aGlzLnRhcmdldHM9dGhpcy50YXJnZXRzfHx7fTtFeHQuUXVpY2tUaXAuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyl9LHJlZ2lzdGVyOmZ1bmN0aW9uKGUpe3ZhciBoPUV4dC5pc0FycmF5KGUpP2U6YXJndW1lbnRzO2Zvcih2YXIgZz0wLGE9aC5sZW5ndGg7ZzxhO2crKyl7dmFyIGw9aFtnXTt2YXIgaz1sLnRhcmdldDtpZihrKXtpZihFeHQuaXNBcnJheShrKSl7Zm9yKHZhciBkPTAsYj1rLmxlbmd0aDtkPGI7ZCsrKXt0aGlzLnRhcmdldHNbRXh0LmlkKGtbZF0pXT1sfX1lbHNle3RoaXMudGFyZ2V0c1tFeHQuaWQoayldPWx9fX19LHVucmVnaXN0ZXI6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMudGFyZ2V0c1tFeHQuaWQoYSldfSxjYW5jZWxTaG93OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuYWN0aXZlVGFyZ2V0O2I9RXh0LmdldChiKS5kb207aWYodGhpcy5pc1Zpc2libGUoKSl7aWYoYSYmYS5lbD09Yil7dGhpcy5oaWRlKCl9fWVsc2V7aWYoYSYmYS5lbD09Yil7dGhpcy5jbGVhclRpbWVyKCJzaG93Iil9fX0sZ2V0VGlwQ2ZnOmZ1bmN0aW9uKGQpe3ZhciBiPWQuZ2V0VGFyZ2V0KCksYyxhO2lmKHRoaXMuaW50ZXJjZXB0VGl0bGVzJiZiLnRpdGxlJiZFeHQuaXNTdHJpbmcoYi50aXRsZSkpe2M9Yi50aXRsZTtiLnF0aXA9YztiLnJlbW92ZUF0dHJpYnV0ZSgidGl0bGUiKTtkLnByZXZlbnREZWZhdWx0KCl9ZWxzZXthPXRoaXMudGFnQ29uZmlnO2M9Yi5xdGlwfHxFeHQuZmx5KGIpLmdldEF0dHJpYnV0ZShhLmF0dHJpYnV0ZSxhLm5hbWVzcGFjZSl9cmV0dXJuIGN9LG9uVGFyZ2V0T3ZlcjpmdW5jdGlvbihpKXtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm59dGhpcy50YXJnZXRYWT1pLmdldFhZKCk7dmFyIGM9aS5nZXRUYXJnZXQoKTtpZighY3x8Yy5ub2RlVHlwZSE9PTF8fGM9PWRvY3VtZW50fHxjPT1kb2N1bWVudC5ib2R5KXtyZXR1cm59aWYodGhpcy5hY3RpdmVUYXJnZXQmJigoYz09dGhpcy5hY3RpdmVUYXJnZXQuZWwpfHxFeHQuZmx5KHRoaXMuYWN0aXZlVGFyZ2V0LmVsKS5jb250YWlucyhjKSkpe3RoaXMuY2xlYXJUaW1lcigiaGlkZSIpO3RoaXMuc2hvdygpO3JldHVybn1pZihjJiZ0aGlzLnRhcmdldHNbYy5pZF0pe3RoaXMuYWN0aXZlVGFyZ2V0PXRoaXMudGFyZ2V0c1tjLmlkXTt0aGlzLmFjdGl2ZVRhcmdldC5lbD1jO3RoaXMuYW5jaG9yPXRoaXMuYWN0aXZlVGFyZ2V0LmFuY2hvcjtpZih0aGlzLmFuY2hvcil7dGhpcy5hbmNob3JUYXJnZXQ9Y310aGlzLmRlbGF5U2hvdygpO3JldHVybn12YXIgZyxoPUV4dC5mbHkoYyksYj10aGlzLnRhZ0NvbmZpZyxkPWIubmFtZXNwYWNlO2lmKGc9dGhpcy5nZXRUaXBDZmcoaSkpe3ZhciBhPWguZ2V0QXR0cmlidXRlKGIuaGlkZSxkKTt0aGlzLmFjdGl2ZVRhcmdldD17ZWw6Yyx0ZXh0Omcsd2lkdGg6aC5nZXRBdHRyaWJ1dGUoYi53aWR0aCxkKSxhdXRvSGlkZTphIT0idXNlciImJmEhPT0iZmFsc2UiLHRpdGxlOmguZ2V0QXR0cmlidXRlKGIudGl0bGUsZCksY2xzOmguZ2V0QXR0cmlidXRlKGIuY2xzLGQpLGFsaWduOmguZ2V0QXR0cmlidXRlKGIuYWxpZ24sZCl9O3RoaXMuYW5jaG9yPWguZ2V0QXR0cmlidXRlKGIuYW5jaG9yLGQpO2lmKHRoaXMuYW5jaG9yKXt0aGlzLmFuY2hvclRhcmdldD1jfXRoaXMuZGVsYXlTaG93KCl9fSxvblRhcmdldE91dDpmdW5jdGlvbihhKXtpZih0aGlzLmFjdGl2ZVRhcmdldCYmYS53aXRoaW4odGhpcy5hY3RpdmVUYXJnZXQuZWwpJiYhdGhpcy5nZXRUaXBDZmcoYSkpe3JldHVybn10aGlzLmNsZWFyVGltZXIoInNob3ciKTtpZih0aGlzLmF1dG9IaWRlIT09ZmFsc2Upe3RoaXMuZGVsYXlIaWRlKCl9fSxzaG93QXQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5hY3RpdmVUYXJnZXQ7aWYoYSl7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMucmVuZGVyKEV4dC5nZXRCb2R5KCkpO3RoaXMuYWN0aXZlVGFyZ2V0PWF9aWYoYS53aWR0aCl7dGhpcy5zZXRXaWR0aChhLndpZHRoKTt0aGlzLmJvZHkuc2V0V2lkdGgodGhpcy5hZGp1c3RCb2R5V2lkdGgoYS53aWR0aC10aGlzLmdldEZyYW1lV2lkdGgoKSkpO3RoaXMubWVhc3VyZVdpZHRoPWZhbHNlfWVsc2V7dGhpcy5tZWFzdXJlV2lkdGg9dHJ1ZX10aGlzLnNldFRpdGxlKGEudGl0bGV8fCIiKTt0aGlzLmJvZHkudXBkYXRlKGEudGV4dCk7dGhpcy5hdXRvSGlkZT1hLmF1dG9IaWRlO3RoaXMuZGlzbWlzc0RlbGF5PWEuZGlzbWlzc0RlbGF5fHx0aGlzLmRpc21pc3NEZWxheTtpZih0aGlzLmxhc3RDbHMpe3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5sYXN0Q2xzKTtkZWxldGUgdGhpcy5sYXN0Q2xzfWlmKGEuY2xzKXt0aGlzLmVsLmFkZENsYXNzKGEuY2xzKTt0aGlzLmxhc3RDbHM9YS5jbHN9aWYodGhpcy5hbmNob3Ipe3RoaXMuY29uc3RyYWluUG9zaXRpb249ZmFsc2V9ZWxzZXtpZihhLmFsaWduKXtiPXRoaXMuZWwuZ2V0QWxpZ25Ub1hZKGEuZWwsYS5hbGlnbik7dGhpcy5jb25zdHJhaW5Qb3NpdGlvbj1mYWxzZX1lbHNle3RoaXMuY29uc3RyYWluUG9zaXRpb249dHJ1ZX19fUV4dC5RdWlja1RpcC5zdXBlcmNsYXNzLnNob3dBdC5jYWxsKHRoaXMsYil9LGhpZGU6ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5hY3RpdmVUYXJnZXQ7RXh0LlF1aWNrVGlwLnN1cGVyY2xhc3MuaGlkZS5jYWxsKHRoaXMpfX0pO0V4dC5yZWcoInF1aWNrdGlwIixFeHQuUXVpY2tUaXApO0V4dC5RdWlja1RpcHM9ZnVuY3Rpb24oKXt2YXIgYixhPWZhbHNlO3JldHVybntpbml0OmZ1bmN0aW9uKGMpe2lmKCFiKXtpZighRXh0LmlzUmVhZHkpe0V4dC5vblJlYWR5KGZ1bmN0aW9uKCl7RXh0LlF1aWNrVGlwcy5pbml0KGMpfSk7cmV0dXJufWI9bmV3IEV4dC5RdWlja1RpcCh7ZWxlbWVudHM6ImhlYWRlcixib2R5IixkaXNhYmxlZDphfSk7aWYoYyE9PWZhbHNlKXtiLnJlbmRlcihFeHQuZ2V0Qm9keSgpKX19fSxkZERpc2FibGU6ZnVuY3Rpb24oKXtpZihiJiYhYSl7Yi5kaXNhYmxlKCl9fSxkZEVuYWJsZTpmdW5jdGlvbigpe2lmKGImJiFhKXtiLmVuYWJsZSgpfX0sZW5hYmxlOmZ1bmN0aW9uKCl7aWYoYil7Yi5lbmFibGUoKX1hPWZhbHNlfSxkaXNhYmxlOmZ1bmN0aW9uKCl7aWYoYil7Yi5kaXNhYmxlKCl9YT10cnVlfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYiE9PXVuZGVmaW5lZCYmIWIuZGlzYWJsZWR9LGdldFF1aWNrVGlwOmZ1bmN0aW9uKCl7cmV0dXJuIGJ9LHJlZ2lzdGVyOmZ1bmN0aW9uKCl7Yi5yZWdpc3Rlci5hcHBseShiLGFyZ3VtZW50cyl9LHVucmVnaXN0ZXI6ZnVuY3Rpb24oKXtiLnVucmVnaXN0ZXIuYXBwbHkoYixhcmd1bWVudHMpfSx0aXBzOmZ1bmN0aW9uKCl7Yi5yZWdpc3Rlci5hcHBseShiLGFyZ3VtZW50cyl9fX0oKTtFeHQuc2xpZGVyLlRpcD1FeHQuZXh0ZW5kKEV4dC5UaXAse21pbldpZHRoOjEwLG9mZnNldHM6WzAsLTEwXSxpbml0OmZ1bmN0aW9uKGEpe2Eub24oe3Njb3BlOnRoaXMsZHJhZ3N0YXJ0OnRoaXMub25TbGlkZSxkcmFnOnRoaXMub25TbGlkZSxkcmFnZW5kOnRoaXMuaGlkZSxkZXN0cm95OnRoaXMuZGVzdHJveX0pfSxvblNsaWRlOmZ1bmN0aW9uKGIsYyxhKXt0aGlzLnNob3coKTt0aGlzLmJvZHkudXBkYXRlKHRoaXMuZ2V0VGV4dChhKSk7dGhpcy5kb0F1dG9XaWR0aCgpO3RoaXMuZWwuYWxpZ25UbyhhLmVsLCJiLXQ/Iix0aGlzLm9mZnNldHMpfSxnZXRUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcoYS52YWx1ZSl9fSk7RXh0LnV4LlNsaWRlclRpcD1FeHQuc2xpZGVyLlRpcDtFeHQudHJlZS5UcmVlUGFuZWw9RXh0LmV4dGVuZChFeHQuUGFuZWwse3Jvb3RWaXNpYmxlOnRydWUsYW5pbWF0ZTpFeHQuZW5hYmxlRngsbGluZXM6dHJ1ZSxlbmFibGVERDpmYWxzZSxobERyb3A6RXh0LmVuYWJsZUZ4LHBhdGhTZXBhcmF0b3I6Ii8iLGJ1YmJsZUV2ZW50czpbXSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LnRyZWUuVHJlZVBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO2lmKCF0aGlzLmV2ZW50TW9kZWwpe3RoaXMuZXZlbnRNb2RlbD1uZXcgRXh0LnRyZWUuVHJlZUV2ZW50TW9kZWwodGhpcyl9dmFyIGE9dGhpcy5sb2FkZXI7aWYoIWEpe2E9bmV3IEV4dC50cmVlLlRyZWVMb2FkZXIoe2RhdGFVcmw6dGhpcy5kYXRhVXJsLHJlcXVlc3RNZXRob2Q6dGhpcy5yZXF1ZXN0TWV0aG9kfSl9ZWxzZXtpZihFeHQuaXNPYmplY3QoYSkmJiFhLmxvYWQpe2E9bmV3IEV4dC50cmVlLlRyZWVMb2FkZXIoYSl9fXRoaXMubG9hZGVyPWE7dGhpcy5ub2RlSGFzaD17fTtpZih0aGlzLnJvb3Qpe3ZhciBiPXRoaXMucm9vdDtkZWxldGUgdGhpcy5yb290O3RoaXMuc2V0Um9vdE5vZGUoYil9dGhpcy5hZGRFdmVudHMoImFwcGVuZCIsInJlbW92ZSIsIm1vdmVub2RlIiwiaW5zZXJ0IiwiYmVmb3JlYXBwZW5kIiwiYmVmb3JlcmVtb3ZlIiwiYmVmb3JlbW92ZW5vZGUiLCJiZWZvcmVpbnNlcnQiLCJiZWZvcmVsb2FkIiwibG9hZCIsInRleHRjaGFuZ2UiLCJiZWZvcmVleHBhbmRub2RlIiwiYmVmb3JlY29sbGFwc2Vub2RlIiwiZXhwYW5kbm9kZSIsImRpc2FibGVkY2hhbmdlIiwiY29sbGFwc2Vub2RlIiwiYmVmb3JlY2xpY2siLCJjbGljayIsImNvbnRhaW5lcmNsaWNrIiwiY2hlY2tjaGFuZ2UiLCJiZWZvcmVkYmxjbGljayIsImRibGNsaWNrIiwiY29udGFpbmVyZGJsY2xpY2siLCJjb250ZXh0bWVudSIsImNvbnRhaW5lcmNvbnRleHRtZW51IiwiYmVmb3JlY2hpbGRyZW5yZW5kZXJlZCIsInN0YXJ0ZHJhZyIsImVuZGRyYWciLCJkcmFnZHJvcCIsImJlZm9yZW5vZGVkcm9wIiwibm9kZWRyb3AiLCJub2RlZHJhZ292ZXIiKTtpZih0aGlzLnNpbmdsZUV4cGFuZCl7dGhpcy5vbigiYmVmb3JlZXhwYW5kbm9kZSIsdGhpcy5yZXN0cmljdEV4cGFuZCx0aGlzKX19LHByb3h5Tm9kZUV2ZW50OmZ1bmN0aW9uKGMsYixhLGgsZyxlLGQpe2lmKGM9PSJjb2xsYXBzZSJ8fGM9PSJleHBhbmQifHxjPT0iYmVmb3JlY29sbGFwc2UifHxjPT0iYmVmb3JlZXhwYW5kInx8Yz09Im1vdmUifHxjPT0iYmVmb3JlbW92ZSIpe2M9Yysibm9kZSJ9cmV0dXJuIHRoaXMuZmlyZUV2ZW50KGMsYixhLGgsZyxlLGQpfSxnZXRSb290Tm9kZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnJvb3R9LHNldFJvb3ROb2RlOmZ1bmN0aW9uKGIpe3RoaXMuZGVzdHJveVJvb3QoKTtpZighYi5yZW5kZXIpe2I9dGhpcy5sb2FkZXIuY3JlYXRlTm9kZShiKX10aGlzLnJvb3Q9YjtiLm93bmVyVHJlZT10aGlzO2IuaXNSb290PXRydWU7dGhpcy5yZWdpc3Rlck5vZGUoYik7aWYoIXRoaXMucm9vdFZpc2libGUpe3ZhciBhPWIuYXR0cmlidXRlcy51aVByb3ZpZGVyO2IudWk9YT9uZXcgYShiKTpuZXcgRXh0LnRyZWUuUm9vdFRyZWVOb2RlVUkoYil9aWYodGhpcy5pbm5lckN0KXt0aGlzLmNsZWFySW5uZXJDdCgpO3RoaXMucmVuZGVyUm9vdCgpfXJldHVybiBifSxjbGVhcklubmVyQ3Q6ZnVuY3Rpb24oKXt0aGlzLmlubmVyQ3QudXBkYXRlKCIiKX0scmVuZGVyUm9vdDpmdW5jdGlvbigpe3RoaXMucm9vdC5yZW5kZXIoKTtpZighdGhpcy5yb290VmlzaWJsZSl7dGhpcy5yb290LnJlbmRlckNoaWxkcmVuKCl9fSxnZXROb2RlQnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub2RlSGFzaFthXX0scmVnaXN0ZXJOb2RlOmZ1bmN0aW9uKGEpe3RoaXMubm9kZUhhc2hbYS5pZF09YX0sdW5yZWdpc3Rlck5vZGU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMubm9kZUhhc2hbYS5pZF19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIltUcmVlIisodGhpcy5pZD8iICIrdGhpcy5pZDoiIikrIl0ifSxyZXN0cmljdEV4cGFuZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7aWYoYil7aWYoYi5leHBhbmRlZENoaWxkJiZiLmV4cGFuZGVkQ2hpbGQucGFyZW50Tm9kZT09Yil7Yi5leHBhbmRlZENoaWxkLmNvbGxhcHNlKCl9Yi5leHBhbmRlZENoaWxkPWF9fSxnZXRDaGVja2VkOmZ1bmN0aW9uKGIsYyl7Yz1jfHx0aGlzLnJvb3Q7dmFyIGQ9W107dmFyIGU9ZnVuY3Rpb24oKXtpZih0aGlzLmF0dHJpYnV0ZXMuY2hlY2tlZCl7ZC5wdXNoKCFiP3RoaXM6KGI9PSJpZCI/dGhpcy5pZDp0aGlzLmF0dHJpYnV0ZXNbYl0pKX19O2MuY2FzY2FkZShlKTtyZXR1cm4gZH0sZ2V0TG9hZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9hZGVyfSxleHBhbmRBbGw6ZnVuY3Rpb24oKXt0aGlzLnJvb3QuZXhwYW5kKHRydWUpfSxjb2xsYXBzZUFsbDpmdW5jdGlvbigpe3RoaXMucm9vdC5jb2xsYXBzZSh0cnVlKX0sZ2V0U2VsZWN0aW9uTW9kZWw6ZnVuY3Rpb24oKXtpZighdGhpcy5zZWxNb2RlbCl7dGhpcy5zZWxNb2RlbD1uZXcgRXh0LnRyZWUuRGVmYXVsdFNlbGVjdGlvbk1vZGVsKCl9cmV0dXJuIHRoaXMuc2VsTW9kZWx9LGV4cGFuZFBhdGg6ZnVuY3Rpb24oZyxhLGgpe2lmKEV4dC5pc0VtcHR5KGcpKXtpZihoKXtoKGZhbHNlLHVuZGVmaW5lZCl9cmV0dXJufWE9YXx8ImlkIjt2YXIgZD1nLnNwbGl0KHRoaXMucGF0aFNlcGFyYXRvcik7dmFyIGM9dGhpcy5yb290O2lmKGMuYXR0cmlidXRlc1thXSE9ZFsxXSl7aWYoaCl7aChmYWxzZSxudWxsKX1yZXR1cm59dmFyIGI9MTt2YXIgZT1mdW5jdGlvbigpe2lmKCsrYj09ZC5sZW5ndGgpe2lmKGgpe2godHJ1ZSxjKX1yZXR1cm59dmFyIGk9Yy5maW5kQ2hpbGQoYSxkW2JdKTtpZighaSl7aWYoaCl7aChmYWxzZSxjKX1yZXR1cm59Yz1pO2kuZXhwYW5kKGZhbHNlLGZhbHNlLGUpfTtjLmV4cGFuZChmYWxzZSxmYWxzZSxlKX0sc2VsZWN0UGF0aDpmdW5jdGlvbihlLGEsZyl7aWYoRXh0LmlzRW1wdHkoZSkpe2lmKGcpe2coZmFsc2UsdW5kZWZpbmVkKX1yZXR1cm59YT1hfHwiaWQiO3ZhciBjPWUuc3BsaXQodGhpcy5wYXRoU2VwYXJhdG9yKSxiPWMucG9wKCk7aWYoYy5sZW5ndGg+MSl7dmFyIGQ9ZnVuY3Rpb24oaSxoKXtpZihpJiZoKXt2YXIgaj1oLmZpbmRDaGlsZChhLGIpO2lmKGope2ouc2VsZWN0KCk7aWYoZyl7Zyh0cnVlLGopfX1lbHNle2lmKGcpe2coZmFsc2Usail9fX1lbHNle2lmKGcpe2coZmFsc2Usail9fX07dGhpcy5leHBhbmRQYXRoKGMuam9pbih0aGlzLnBhdGhTZXBhcmF0b3IpLGEsZCl9ZWxzZXt0aGlzLnJvb3Quc2VsZWN0KCk7aWYoZyl7Zyh0cnVlLHRoaXMucm9vdCl9fX0sZ2V0VHJlZUVsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keX0sb25SZW5kZXI6ZnVuY3Rpb24oYixhKXtFeHQudHJlZS5UcmVlUGFuZWwuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTt0aGlzLmVsLmFkZENsYXNzKCJ4LXRyZWUiKTt0aGlzLmlubmVyQ3Q9dGhpcy5ib2R5LmNyZWF0ZUNoaWxkKHt0YWc6InVsIixjbHM6IngtdHJlZS1yb290LWN0ICIrKHRoaXMudXNlQXJyb3dzPyJ4LXRyZWUtYXJyb3dzIjp0aGlzLmxpbmVzPyJ4LXRyZWUtbGluZXMiOiJ4LXRyZWUtbm8tbGluZXMiKX0pfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7RXh0LnRyZWUuVHJlZVBhbmVsLnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO2lmKHRoaXMuY29udGFpbmVyU2Nyb2xsKXtFeHQuZGQuU2Nyb2xsTWFuYWdlci5yZWdpc3Rlcih0aGlzLmJvZHkpfWlmKCh0aGlzLmVuYWJsZUREfHx0aGlzLmVuYWJsZURyb3ApJiYhdGhpcy5kcm9wWm9uZSl7dGhpcy5kcm9wWm9uZT1uZXcgRXh0LnRyZWUuVHJlZURyb3Bab25lKHRoaXMsdGhpcy5kcm9wQ29uZmlnfHx7ZGRHcm91cDp0aGlzLmRkR3JvdXB8fCJUcmVlREQiLGFwcGVuZE9ubHk6dGhpcy5kZEFwcGVuZE9ubHk9PT10cnVlfSl9aWYoKHRoaXMuZW5hYmxlRER8fHRoaXMuZW5hYmxlRHJhZykmJiF0aGlzLmRyYWdab25lKXt0aGlzLmRyYWdab25lPW5ldyBFeHQudHJlZS5UcmVlRHJhZ1pvbmUodGhpcyx0aGlzLmRyYWdDb25maWd8fHtkZEdyb3VwOnRoaXMuZGRHcm91cHx8IlRyZWVERCIsc2Nyb2xsOnRoaXMuZGRTY3JvbGx9KX10aGlzLmdldFNlbGVjdGlvbk1vZGVsKCkuaW5pdCh0aGlzKX0sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQudHJlZS5UcmVlUGFuZWwuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO3RoaXMucmVuZGVyUm9vdCgpfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7RXh0LmRkLlNjcm9sbE1hbmFnZXIudW5yZWdpc3Rlcih0aGlzLmJvZHkpO0V4dC5kZXN0cm95KHRoaXMuZHJvcFpvbmUsdGhpcy5kcmFnWm9uZSl9dGhpcy5kZXN0cm95Um9vdCgpO0V4dC5kZXN0cm95KHRoaXMubG9hZGVyKTt0aGlzLm5vZGVIYXNoPXRoaXMucm9vdD10aGlzLmxvYWRlcj1udWxsO0V4dC50cmVlLlRyZWVQYW5lbC5zdXBlcmNsYXNzLmJlZm9yZURlc3Ryb3kuY2FsbCh0aGlzKX0sZGVzdHJveVJvb3Q6ZnVuY3Rpb24oKXtpZih0aGlzLnJvb3QmJnRoaXMucm9vdC5kZXN0cm95KXt0aGlzLnJvb3QuZGVzdHJveSh0cnVlKX19fSk7RXh0LnRyZWUuVHJlZVBhbmVsLm5vZGVUeXBlcz17fTtFeHQucmVnKCJ0cmVlcGFuZWwiLEV4dC50cmVlLlRyZWVQYW5lbCk7RXh0LnRyZWUuVHJlZUV2ZW50TW9kZWw9ZnVuY3Rpb24oYSl7dGhpcy50cmVlPWE7dGhpcy50cmVlLm9uKCJyZW5kZXIiLHRoaXMuaW5pdEV2ZW50cyx0aGlzKX07RXh0LnRyZWUuVHJlZUV2ZW50TW9kZWwucHJvdG90eXBlPXtpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmVlO2lmKGEudHJhY2tNb3VzZU92ZXIhPT1mYWxzZSl7YS5tb24oYS5pbm5lckN0LHtzY29wZTp0aGlzLG1vdXNlb3Zlcjp0aGlzLmRlbGVnYXRlT3Zlcixtb3VzZW91dDp0aGlzLmRlbGVnYXRlT3V0fSl9YS5tb24oYS5nZXRUcmVlRWwoKSx7c2NvcGU6dGhpcyxjbGljazp0aGlzLmRlbGVnYXRlQ2xpY2ssZGJsY2xpY2s6dGhpcy5kZWxlZ2F0ZURibENsaWNrLGNvbnRleHRtZW51OnRoaXMuZGVsZWdhdGVDb250ZXh0TWVudX0pfSxnZXROb2RlOmZ1bmN0aW9uKGIpe3ZhciBhO2lmKGE9Yi5nZXRUYXJnZXQoIi54LXRyZWUtbm9kZS1lbCIsMTApKXt2YXIgYz1FeHQuZmx5KGEsIl90cmVlRXZlbnRzIikuZ2V0QXR0cmlidXRlKCJ0cmVlLW5vZGUtaWQiLCJleHQiKTtpZihjKXtyZXR1cm4gdGhpcy50cmVlLmdldE5vZGVCeUlkKGMpfX1yZXR1cm4gbnVsbH0sZ2V0Tm9kZVRhcmdldDpmdW5jdGlvbihiKXt2YXIgYT1iLmdldFRhcmdldCgiLngtdHJlZS1ub2RlLWljb24iLDEpO2lmKCFhKXthPWIuZ2V0VGFyZ2V0KCIueC10cmVlLW5vZGUtZWwiLDYpfXJldHVybiBhfSxkZWxlZ2F0ZU91dDpmdW5jdGlvbihiLGEpe2lmKCF0aGlzLmJlZm9yZUV2ZW50KGIpKXtyZXR1cm59aWYoYi5nZXRUYXJnZXQoIi54LXRyZWUtZWMtaWNvbiIsMSkpe3ZhciBjPXRoaXMuZ2V0Tm9kZShiKTt0aGlzLm9uSWNvbk91dChiLGMpO2lmKGM9PXRoaXMubGFzdEVjT3Zlcil7ZGVsZXRlIHRoaXMubGFzdEVjT3Zlcn19aWYoKGE9dGhpcy5nZXROb2RlVGFyZ2V0KGIpKSYmIWIud2l0aGluKGEsdHJ1ZSkpe3RoaXMub25Ob2RlT3V0KGIsdGhpcy5nZXROb2RlKGIpKX19LGRlbGVnYXRlT3ZlcjpmdW5jdGlvbihiLGEpe2lmKCF0aGlzLmJlZm9yZUV2ZW50KGIpKXtyZXR1cm59aWYoRXh0LmlzR2Vja28mJiF0aGlzLnRyYWNraW5nRG9jKXtFeHQuZ2V0Qm9keSgpLm9uKCJtb3VzZW92ZXIiLHRoaXMudHJhY2tFeGl0LHRoaXMpO3RoaXMudHJhY2tpbmdEb2M9dHJ1ZX1pZih0aGlzLmxhc3RFY092ZXIpe3RoaXMub25JY29uT3V0KGIsdGhpcy5sYXN0RWNPdmVyKTtkZWxldGUgdGhpcy5sYXN0RWNPdmVyfWlmKGIuZ2V0VGFyZ2V0KCIueC10cmVlLWVjLWljb24iLDEpKXt0aGlzLmxhc3RFY092ZXI9dGhpcy5nZXROb2RlKGIpO3RoaXMub25JY29uT3ZlcihiLHRoaXMubGFzdEVjT3Zlcil9aWYoYT10aGlzLmdldE5vZGVUYXJnZXQoYikpe3RoaXMub25Ob2RlT3ZlcihiLHRoaXMuZ2V0Tm9kZShiKSl9fSx0cmFja0V4aXQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5sYXN0T3Zlck5vZGUpe2lmKHRoaXMubGFzdE92ZXJOb2RlLnVpJiYhYS53aXRoaW4odGhpcy5sYXN0T3Zlck5vZGUudWkuZ2V0RWwoKSkpe3RoaXMub25Ob2RlT3V0KGEsdGhpcy5sYXN0T3Zlck5vZGUpfWRlbGV0ZSB0aGlzLmxhc3RPdmVyTm9kZTtFeHQuZ2V0Qm9keSgpLnVuKCJtb3VzZW92ZXIiLHRoaXMudHJhY2tFeGl0LHRoaXMpO3RoaXMudHJhY2tpbmdEb2M9ZmFsc2V9fSxkZWxlZ2F0ZUNsaWNrOmZ1bmN0aW9uKGIsYSl7aWYodGhpcy5iZWZvcmVFdmVudChiKSl7aWYoYi5nZXRUYXJnZXQoImlucHV0W3R5cGU9Y2hlY2tib3hdIiwxKSl7dGhpcy5vbkNoZWNrYm94Q2xpY2soYix0aGlzLmdldE5vZGUoYikpfWVsc2V7aWYoYi5nZXRUYXJnZXQoIi54LXRyZWUtZWMtaWNvbiIsMSkpe3RoaXMub25JY29uQ2xpY2soYix0aGlzLmdldE5vZGUoYikpfWVsc2V7aWYodGhpcy5nZXROb2RlVGFyZ2V0KGIpKXt0aGlzLm9uTm9kZUNsaWNrKGIsdGhpcy5nZXROb2RlKGIpKX19fX1lbHNle3RoaXMuY2hlY2tDb250YWluZXJFdmVudChiLCJjbGljayIpfX0sZGVsZWdhdGVEYmxDbGljazpmdW5jdGlvbihiLGEpe2lmKHRoaXMuYmVmb3JlRXZlbnQoYikpe2lmKHRoaXMuZ2V0Tm9kZVRhcmdldChiKSl7dGhpcy5vbk5vZGVEYmxDbGljayhiLHRoaXMuZ2V0Tm9kZShiKSl9fWVsc2V7dGhpcy5jaGVja0NvbnRhaW5lckV2ZW50KGIsImRibGNsaWNrIil9fSxkZWxlZ2F0ZUNvbnRleHRNZW51OmZ1bmN0aW9uKGIsYSl7aWYodGhpcy5iZWZvcmVFdmVudChiKSl7aWYodGhpcy5nZXROb2RlVGFyZ2V0KGIpKXt0aGlzLm9uTm9kZUNvbnRleHRNZW51KGIsdGhpcy5nZXROb2RlKGIpKX19ZWxzZXt0aGlzLmNoZWNrQ29udGFpbmVyRXZlbnQoYiwiY29udGV4dG1lbnUiKX19LGNoZWNrQ29udGFpbmVyRXZlbnQ6ZnVuY3Rpb24oYixhKXtpZih0aGlzLmRpc2FibGVkKXtiLnN0b3BFdmVudCgpO3JldHVybiBmYWxzZX10aGlzLm9uQ29udGFpbmVyRXZlbnQoYixhKX0sb25Db250YWluZXJFdmVudDpmdW5jdGlvbihiLGEpe3RoaXMudHJlZS5maXJlRXZlbnQoImNvbnRhaW5lciIrYSx0aGlzLnRyZWUsYil9LG9uTm9kZUNsaWNrOmZ1bmN0aW9uKGIsYSl7YS51aS5vbkNsaWNrKGIpfSxvbk5vZGVPdmVyOmZ1bmN0aW9uKGIsYSl7dGhpcy5sYXN0T3Zlck5vZGU9YTthLnVpLm9uT3ZlcihiKX0sb25Ob2RlT3V0OmZ1bmN0aW9uKGIsYSl7YS51aS5vbk91dChiKX0sb25JY29uT3ZlcjpmdW5jdGlvbihiLGEpe2EudWkuYWRkQ2xhc3MoIngtdHJlZS1lYy1vdmVyIil9LG9uSWNvbk91dDpmdW5jdGlvbihiLGEpe2EudWkucmVtb3ZlQ2xhc3MoIngtdHJlZS1lYy1vdmVyIil9LG9uSWNvbkNsaWNrOmZ1bmN0aW9uKGIsYSl7YS51aS5lY0NsaWNrKGIpfSxvbkNoZWNrYm94Q2xpY2s6ZnVuY3Rpb24oYixhKXthLnVpLm9uQ2hlY2tDaGFuZ2UoYil9LG9uTm9kZURibENsaWNrOmZ1bmN0aW9uKGIsYSl7YS51aS5vbkRibENsaWNrKGIpfSxvbk5vZGVDb250ZXh0TWVudTpmdW5jdGlvbihiLGEpe2EudWkub25Db250ZXh0TWVudShiKX0sYmVmb3JlRXZlbnQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5nZXROb2RlKGIpO2lmKHRoaXMuZGlzYWJsZWR8fCFhfHwhYS51aSl7Yi5zdG9wRXZlbnQoKTtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPXRydWV9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9ZmFsc2V9fTtFeHQudHJlZS5EZWZhdWx0U2VsZWN0aW9uTW9kZWw9RXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLnNlbE5vZGU9bnVsbDt0aGlzLmFkZEV2ZW50cygic2VsZWN0aW9uY2hhbmdlIiwiYmVmb3Jlc2VsZWN0Iik7RXh0LmFwcGx5KHRoaXMsYSk7RXh0LnRyZWUuRGVmYXVsdFNlbGVjdGlvbk1vZGVsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0saW5pdDpmdW5jdGlvbihhKXt0aGlzLnRyZWU9YTthLm1vbihhLmdldFRyZWVFbCgpLCJrZXlkb3duIix0aGlzLm9uS2V5RG93bix0aGlzKTthLm9uKCJjbGljayIsdGhpcy5vbk5vZGVDbGljayx0aGlzKX0sb25Ob2RlQ2xpY2s6ZnVuY3Rpb24oYSxiKXt0aGlzLnNlbGVjdChhKX0sc2VsZWN0OmZ1bmN0aW9uKGMsYSl7aWYoIUV4dC5mbHkoYy51aS53cmFwKS5pc1Zpc2libGUoKSYmYSl7cmV0dXJuIGEuY2FsbCh0aGlzLGMpfXZhciBiPXRoaXMuc2VsTm9kZTtpZihjPT1iKXtjLnVpLm9uU2VsZWN0ZWRDaGFuZ2UodHJ1ZSl9ZWxzZXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3Jlc2VsZWN0Iix0aGlzLGMsYikhPT1mYWxzZSl7aWYoYiYmYi51aSl7Yi51aS5vblNlbGVjdGVkQ2hhbmdlKGZhbHNlKX10aGlzLnNlbE5vZGU9YztjLnVpLm9uU2VsZWN0ZWRDaGFuZ2UodHJ1ZSk7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyxjLGIpfX1yZXR1cm4gY30sdW5zZWxlY3Q6ZnVuY3Rpb24oYixhKXtpZih0aGlzLnNlbE5vZGU9PWIpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKGEpfX0sY2xlYXJTZWxlY3Rpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VsTm9kZTtpZihiKXtiLnVpLm9uU2VsZWN0ZWRDaGFuZ2UoZmFsc2UpO3RoaXMuc2VsTm9kZT1udWxsO2lmKGEhPT10cnVlKXt0aGlzLmZpcmVFdmVudCgic2VsZWN0aW9uY2hhbmdlIix0aGlzLG51bGwpfX1yZXR1cm4gYn0sZ2V0U2VsZWN0ZWROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsTm9kZX0saXNTZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zZWxOb2RlPT1hfSxzZWxlY3RQcmV2aW91czpmdW5jdGlvbihhKXtpZighKGE9YXx8dGhpcy5zZWxOb2RlfHx0aGlzLmxhc3RTZWxOb2RlKSl7cmV0dXJuIG51bGx9dmFyIGM9YS5wcmV2aW91c1NpYmxpbmc7aWYoYyl7aWYoIWMuaXNFeHBhbmRlZCgpfHxjLmNoaWxkTm9kZXMubGVuZ3RoPDEpe3JldHVybiB0aGlzLnNlbGVjdChjLHRoaXMuc2VsZWN0UHJldmlvdXMpfWVsc2V7dmFyIGI9Yy5sYXN0Q2hpbGQ7d2hpbGUoYiYmYi5pc0V4cGFuZGVkKCkmJkV4dC5mbHkoYi51aS53cmFwKS5pc1Zpc2libGUoKSYmYi5jaGlsZE5vZGVzLmxlbmd0aD4wKXtiPWIubGFzdENoaWxkfXJldHVybiB0aGlzLnNlbGVjdChiLHRoaXMuc2VsZWN0UHJldmlvdXMpfX1lbHNle2lmKGEucGFyZW50Tm9kZSYmKHRoaXMudHJlZS5yb290VmlzaWJsZXx8IWEucGFyZW50Tm9kZS5pc1Jvb3QpKXtyZXR1cm4gdGhpcy5zZWxlY3QoYS5wYXJlbnROb2RlLHRoaXMuc2VsZWN0UHJldmlvdXMpfX1yZXR1cm4gbnVsbH0sc2VsZWN0TmV4dDpmdW5jdGlvbihiKXtpZighKGI9Ynx8dGhpcy5zZWxOb2RlfHx0aGlzLmxhc3RTZWxOb2RlKSl7cmV0dXJuIG51bGx9aWYoYi5maXJzdENoaWxkJiZiLmlzRXhwYW5kZWQoKSYmRXh0LmZseShiLnVpLndyYXApLmlzVmlzaWJsZSgpKXtyZXR1cm4gdGhpcy5zZWxlY3QoYi5maXJzdENoaWxkLHRoaXMuc2VsZWN0TmV4dCl9ZWxzZXtpZihiLm5leHRTaWJsaW5nKXtyZXR1cm4gdGhpcy5zZWxlY3QoYi5uZXh0U2libGluZyx0aGlzLnNlbGVjdE5leHQpfWVsc2V7aWYoYi5wYXJlbnROb2RlKXt2YXIgYT1udWxsO2IucGFyZW50Tm9kZS5idWJibGUoZnVuY3Rpb24oKXtpZih0aGlzLm5leHRTaWJsaW5nKXthPXRoaXMuZ2V0T3duZXJUcmVlKCkuc2VsTW9kZWwuc2VsZWN0KHRoaXMubmV4dFNpYmxpbmcsdGhpcy5zZWxlY3ROZXh0KTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIGF9fX1yZXR1cm4gbnVsbH0sb25LZXlEb3duOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMuc2VsTm9kZXx8dGhpcy5sYXN0U2VsTm9kZTt2YXIgZD10aGlzO2lmKCFiKXtyZXR1cm59dmFyIGE9Yy5nZXRLZXkoKTtzd2l0Y2goYSl7Y2FzZSBjLkRPV046Yy5zdG9wRXZlbnQoKTt0aGlzLnNlbGVjdE5leHQoKTticmVhaztjYXNlIGMuVVA6Yy5zdG9wRXZlbnQoKTt0aGlzLnNlbGVjdFByZXZpb3VzKCk7YnJlYWs7Y2FzZSBjLlJJR0hUOmMucHJldmVudERlZmF1bHQoKTtpZihiLmhhc0NoaWxkTm9kZXMoKSl7aWYoIWIuaXNFeHBhbmRlZCgpKXtiLmV4cGFuZCgpfWVsc2V7aWYoYi5maXJzdENoaWxkKXt0aGlzLnNlbGVjdChiLmZpcnN0Q2hpbGQsYyl9fX1icmVhaztjYXNlIGMuTEVGVDpjLnByZXZlbnREZWZhdWx0KCk7aWYoYi5oYXNDaGlsZE5vZGVzKCkmJmIuaXNFeHBhbmRlZCgpKXtiLmNvbGxhcHNlKCl9ZWxzZXtpZihiLnBhcmVudE5vZGUmJih0aGlzLnRyZWUucm9vdFZpc2libGV8fGIucGFyZW50Tm9kZSE9dGhpcy50cmVlLmdldFJvb3ROb2RlKCkpKXt0aGlzLnNlbGVjdChiLnBhcmVudE5vZGUsYyl9fWJyZWFrfX19KTtFeHQudHJlZS5NdWx0aVNlbGVjdGlvbk1vZGVsPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5zZWxOb2Rlcz1bXTt0aGlzLnNlbE1hcD17fTt0aGlzLmFkZEV2ZW50cygic2VsZWN0aW9uY2hhbmdlIik7RXh0LmFwcGx5KHRoaXMsYSk7RXh0LnRyZWUuTXVsdGlTZWxlY3Rpb25Nb2RlbC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9LGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy50cmVlPWE7YS5tb24oYS5nZXRUcmVlRWwoKSwia2V5ZG93biIsdGhpcy5vbktleURvd24sdGhpcyk7YS5vbigiY2xpY2siLHRoaXMub25Ob2RlQ2xpY2ssdGhpcyl9LG9uTm9kZUNsaWNrOmZ1bmN0aW9uKGEsYil7aWYoYi5jdHJsS2V5JiZ0aGlzLmlzU2VsZWN0ZWQoYSkpe3RoaXMudW5zZWxlY3QoYSl9ZWxzZXt0aGlzLnNlbGVjdChhLGIsYi5jdHJsS2V5KX19LHNlbGVjdDpmdW5jdGlvbihhLGMsYil7aWYoYiE9PXRydWUpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKHRydWUpfWlmKHRoaXMuaXNTZWxlY3RlZChhKSl7dGhpcy5sYXN0U2VsTm9kZT1hO3JldHVybiBhfXRoaXMuc2VsTm9kZXMucHVzaChhKTt0aGlzLnNlbE1hcFthLmlkXT1hO3RoaXMubGFzdFNlbE5vZGU9YTthLnVpLm9uU2VsZWN0ZWRDaGFuZ2UodHJ1ZSk7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbE5vZGVzKTtyZXR1cm4gYX0sdW5zZWxlY3Q6ZnVuY3Rpb24oYil7aWYodGhpcy5zZWxNYXBbYi5pZF0pe2IudWkub25TZWxlY3RlZENoYW5nZShmYWxzZSk7dmFyIGM9dGhpcy5zZWxOb2Rlczt2YXIgYT1jLmluZGV4T2YoYik7aWYoYSE9LTEpe3RoaXMuc2VsTm9kZXMuc3BsaWNlKGEsMSl9ZGVsZXRlIHRoaXMuc2VsTWFwW2IuaWRdO3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMsdGhpcy5zZWxOb2Rlcyl9fSxjbGVhclNlbGVjdGlvbnM6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcy5zZWxOb2RlcztpZihkLmxlbmd0aD4wKXtmb3IodmFyIGM9MCxhPWQubGVuZ3RoO2M8YTtjKyspe2RbY10udWkub25TZWxlY3RlZENoYW5nZShmYWxzZSl9dGhpcy5zZWxOb2Rlcz1bXTt0aGlzLnNlbE1hcD17fTtpZihiIT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbE5vZGVzKX19fSxpc1NlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnNlbE1hcFthLmlkXT90cnVlOmZhbHNlfSxnZXRTZWxlY3RlZE5vZGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsTm9kZXMuY29uY2F0KFtdKX0sb25LZXlEb3duOkV4dC50cmVlLkRlZmF1bHRTZWxlY3Rpb25Nb2RlbC5wcm90b3R5cGUub25LZXlEb3duLHNlbGVjdE5leHQ6RXh0LnRyZWUuRGVmYXVsdFNlbGVjdGlvbk1vZGVsLnByb3RvdHlwZS5zZWxlY3ROZXh0LHNlbGVjdFByZXZpb3VzOkV4dC50cmVlLkRlZmF1bHRTZWxlY3Rpb25Nb2RlbC5wcm90b3R5cGUuc2VsZWN0UHJldmlvdXN9KTtFeHQuZGF0YS5UcmVlPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7dGhpcy5ub2RlSGFzaD17fTt0aGlzLnJvb3Q9bnVsbDtpZihhKXt0aGlzLnNldFJvb3ROb2RlKGEpfXRoaXMuYWRkRXZlbnRzKCJhcHBlbmQiLCJyZW1vdmUiLCJtb3ZlIiwiaW5zZXJ0IiwiYmVmb3JlYXBwZW5kIiwiYmVmb3JlcmVtb3ZlIiwiYmVmb3JlbW92ZSIsImJlZm9yZWluc2VydCIpO0V4dC5kYXRhLlRyZWUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfSxwYXRoU2VwYXJhdG9yOiIvIixwcm94eU5vZGVFdmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpcmVFdmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGdldFJvb3ROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucm9vdH0sc2V0Um9vdE5vZGU6ZnVuY3Rpb24oYSl7dGhpcy5yb290PWE7YS5vd25lclRyZWU9dGhpczthLmlzUm9vdD10cnVlO3RoaXMucmVnaXN0ZXJOb2RlKGEpO3JldHVybiBhfSxnZXROb2RlQnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5ub2RlSGFzaFthXX0scmVnaXN0ZXJOb2RlOmZ1bmN0aW9uKGEpe3RoaXMubm9kZUhhc2hbYS5pZF09YX0sdW5yZWdpc3Rlck5vZGU6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMubm9kZUhhc2hbYS5pZF19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIltUcmVlIisodGhpcy5pZD8iICIrdGhpcy5pZDoiIikrIl0ifX0pO0V4dC5kYXRhLk5vZGU9RXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXt0aGlzLmF0dHJpYnV0ZXM9YXx8e307dGhpcy5sZWFmPXRoaXMuYXR0cmlidXRlcy5sZWFmO3RoaXMuaWQ9dGhpcy5hdHRyaWJ1dGVzLmlkO2lmKCF0aGlzLmlkKXt0aGlzLmlkPUV4dC5pZChudWxsLCJ4bm9kZS0iKTt0aGlzLmF0dHJpYnV0ZXMuaWQ9dGhpcy5pZH10aGlzLmNoaWxkTm9kZXM9W107dGhpcy5wYXJlbnROb2RlPW51bGw7dGhpcy5maXJzdENoaWxkPW51bGw7dGhpcy5sYXN0Q2hpbGQ9bnVsbDt0aGlzLnByZXZpb3VzU2libGluZz1udWxsO3RoaXMubmV4dFNpYmxpbmc9bnVsbDt0aGlzLmFkZEV2ZW50cyh7YXBwZW5kOnRydWUscmVtb3ZlOnRydWUsbW92ZTp0cnVlLGluc2VydDp0cnVlLGJlZm9yZWFwcGVuZDp0cnVlLGJlZm9yZXJlbW92ZTp0cnVlLGJlZm9yZW1vdmU6dHJ1ZSxiZWZvcmVpbnNlcnQ6dHJ1ZX0pO3RoaXMubGlzdGVuZXJzPXRoaXMuYXR0cmlidXRlcy5saXN0ZW5lcnM7RXh0LmRhdGEuTm9kZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9LGZpcmVFdmVudDpmdW5jdGlvbihiKXtpZihFeHQuZGF0YS5Ob2RlLnN1cGVyY2xhc3MuZmlyZUV2ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9dmFyIGE9dGhpcy5nZXRPd25lclRyZWUoKTtpZihhKXtpZihhLnByb3h5Tm9kZUV2ZW50LmFwcGx5KGEsYXJndW1lbnRzKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfSxpc0xlYWY6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZWFmPT09dHJ1ZX0sc2V0Rmlyc3RDaGlsZDpmdW5jdGlvbihhKXt0aGlzLmZpcnN0Q2hpbGQ9YX0sc2V0TGFzdENoaWxkOmZ1bmN0aW9uKGEpe3RoaXMubGFzdENoaWxkPWF9LGlzTGFzdDpmdW5jdGlvbigpe3JldHVybighdGhpcy5wYXJlbnROb2RlP3RydWU6dGhpcy5wYXJlbnROb2RlLmxhc3RDaGlsZD09dGhpcyl9LGlzRmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4oIXRoaXMucGFyZW50Tm9kZT90cnVlOnRoaXMucGFyZW50Tm9kZS5maXJzdENoaWxkPT10aGlzKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiAhdGhpcy5pc0xlYWYoKSYmdGhpcy5jaGlsZE5vZGVzLmxlbmd0aD4wfSxpc0V4cGFuZGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzLmV4cGFuZGFibGV8fHRoaXMuaGFzQ2hpbGROb2RlcygpfSxhcHBlbmRDaGlsZDpmdW5jdGlvbihlKXt2YXIgZz1mYWxzZTtpZihFeHQuaXNBcnJheShlKSl7Zz1lfWVsc2V7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXtnPWFyZ3VtZW50c319aWYoZyl7Zm9yKHZhciBkPTAsYT1nLmxlbmd0aDtkPGE7ZCsrKXt0aGlzLmFwcGVuZENoaWxkKGdbZF0pfX1lbHNle2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVhcHBlbmQiLHRoaXMub3duZXJUcmVlLHRoaXMsZSk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfXZhciBiPXRoaXMuY2hpbGROb2Rlcy5sZW5ndGg7dmFyIGM9ZS5wYXJlbnROb2RlO2lmKGMpe2lmKGUuZmlyZUV2ZW50KCJiZWZvcmVtb3ZlIixlLmdldE93bmVyVHJlZSgpLGUsYyx0aGlzLGIpPT09ZmFsc2Upe3JldHVybiBmYWxzZX1jLnJlbW92ZUNoaWxkKGUpfWI9dGhpcy5jaGlsZE5vZGVzLmxlbmd0aDtpZihiPT09MCl7dGhpcy5zZXRGaXJzdENoaWxkKGUpfXRoaXMuY2hpbGROb2Rlcy5wdXNoKGUpO2UucGFyZW50Tm9kZT10aGlzO3ZhciBoPXRoaXMuY2hpbGROb2Rlc1tiLTFdO2lmKGgpe2UucHJldmlvdXNTaWJsaW5nPWg7aC5uZXh0U2libGluZz1lfWVsc2V7ZS5wcmV2aW91c1NpYmxpbmc9bnVsbH1lLm5leHRTaWJsaW5nPW51bGw7dGhpcy5zZXRMYXN0Q2hpbGQoZSk7ZS5zZXRPd25lclRyZWUodGhpcy5nZXRPd25lclRyZWUoKSk7dGhpcy5maXJlRXZlbnQoImFwcGVuZCIsdGhpcy5vd25lclRyZWUsdGhpcyxlLGIpO2lmKGMpe2UuZmlyZUV2ZW50KCJtb3ZlIix0aGlzLm93bmVyVHJlZSxlLGMsdGhpcyxiKX1yZXR1cm4gZX19LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcy5jaGlsZE5vZGVzLmluZGV4T2YoYyk7aWYoYT09LTEpe3JldHVybiBmYWxzZX1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVtb3ZlIix0aGlzLm93bmVyVHJlZSx0aGlzLGMpPT09ZmFsc2Upe3JldHVybiBmYWxzZX10aGlzLmNoaWxkTm9kZXMuc3BsaWNlKGEsMSk7aWYoYy5wcmV2aW91c1NpYmxpbmcpe2MucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nPWMubmV4dFNpYmxpbmd9aWYoYy5uZXh0U2libGluZyl7Yy5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmc9Yy5wcmV2aW91c1NpYmxpbmd9aWYodGhpcy5maXJzdENoaWxkPT1jKXt0aGlzLnNldEZpcnN0Q2hpbGQoYy5uZXh0U2libGluZyl9aWYodGhpcy5sYXN0Q2hpbGQ9PWMpe3RoaXMuc2V0TGFzdENoaWxkKGMucHJldmlvdXNTaWJsaW5nKX10aGlzLmZpcmVFdmVudCgicmVtb3ZlIix0aGlzLm93bmVyVHJlZSx0aGlzLGMpO2lmKGIpe2MuZGVzdHJveSh0cnVlKX1lbHNle2MuY2xlYXIoKX1yZXR1cm4gY30sY2xlYXI6ZnVuY3Rpb24oYSl7dGhpcy5zZXRPd25lclRyZWUobnVsbCxhKTt0aGlzLnBhcmVudE5vZGU9dGhpcy5wcmV2aW91c1NpYmxpbmc9dGhpcy5uZXh0U2libGluZz1udWxsO2lmKGEpe3RoaXMuZmlyc3RDaGlsZD10aGlzLmxhc3RDaGlsZD1udWxsfX0sZGVzdHJveTpmdW5jdGlvbihhKXtpZihhPT09dHJ1ZSl7dGhpcy5wdXJnZUxpc3RlbmVycygpO3RoaXMuY2xlYXIodHJ1ZSk7RXh0LmVhY2godGhpcy5jaGlsZE5vZGVzLGZ1bmN0aW9uKGIpe2IuZGVzdHJveSh0cnVlKX0pO3RoaXMuY2hpbGROb2Rlcz1udWxsfWVsc2V7dGhpcy5yZW1vdmUodHJ1ZSl9fSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oZCxhKXtpZighYSl7cmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQoZCl9aWYoZD09YSl7cmV0dXJuIGZhbHNlfWlmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVpbnNlcnQiLHRoaXMub3duZXJUcmVlLHRoaXMsZCxhKT09PWZhbHNlKXtyZXR1cm4gZmFsc2V9dmFyIGI9dGhpcy5jaGlsZE5vZGVzLmluZGV4T2YoYSk7dmFyIGM9ZC5wYXJlbnROb2RlO3ZhciBlPWI7aWYoYz09dGhpcyYmdGhpcy5jaGlsZE5vZGVzLmluZGV4T2YoZCk8Yil7ZS0tfWlmKGMpe2lmKGQuZmlyZUV2ZW50KCJiZWZvcmVtb3ZlIixkLmdldE93bmVyVHJlZSgpLGQsYyx0aGlzLGIsYSk9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfWMucmVtb3ZlQ2hpbGQoZCl9aWYoZT09PTApe3RoaXMuc2V0Rmlyc3RDaGlsZChkKX10aGlzLmNoaWxkTm9kZXMuc3BsaWNlKGUsMCxkKTtkLnBhcmVudE5vZGU9dGhpczt2YXIgZz10aGlzLmNoaWxkTm9kZXNbZS0xXTtpZihnKXtkLnByZXZpb3VzU2libGluZz1nO2cubmV4dFNpYmxpbmc9ZH1lbHNle2QucHJldmlvdXNTaWJsaW5nPW51bGx9ZC5uZXh0U2libGluZz1hO2EucHJldmlvdXNTaWJsaW5nPWQ7ZC5zZXRPd25lclRyZWUodGhpcy5nZXRPd25lclRyZWUoKSk7dGhpcy5maXJlRXZlbnQoImluc2VydCIsdGhpcy5vd25lclRyZWUsdGhpcyxkLGEpO2lmKGMpe2QuZmlyZUV2ZW50KCJtb3ZlIix0aGlzLm93bmVyVHJlZSxkLGMsdGhpcyxlLGEpfXJldHVybiBkfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYodGhpcy5wYXJlbnROb2RlKXt0aGlzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcyxhKX1yZXR1cm4gdGhpc30scmVtb3ZlQWxsOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuY2hpbGROb2RlcyxiO3doaWxlKChiPWNbMF0pKXt0aGlzLnJlbW92ZUNoaWxkKGIsYSl9cmV0dXJuIHRoaXN9LGl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2hpbGROb2Rlc1thXX0scmVwbGFjZUNoaWxkOmZ1bmN0aW9uKGEsYyl7dmFyIGI9Yz9jLm5leHRTaWJsaW5nOm51bGw7dGhpcy5yZW1vdmVDaGlsZChjKTt0aGlzLmluc2VydEJlZm9yZShhLGIpO3JldHVybiBjfSxpbmRleE9mOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNoaWxkTm9kZXMuaW5kZXhPZihhKX0sZ2V0T3duZXJUcmVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMub3duZXJUcmVlKXt2YXIgYT10aGlzO3doaWxlKGEpe2lmKGEub3duZXJUcmVlKXt0aGlzLm93bmVyVHJlZT1hLm93bmVyVHJlZTticmVha31hPWEucGFyZW50Tm9kZX19cmV0dXJuIHRoaXMub3duZXJUcmVlfSxnZXREZXB0aDpmdW5jdGlvbigpe3ZhciBiPTA7dmFyIGE9dGhpczt3aGlsZShhLnBhcmVudE5vZGUpeysrYjthPWEucGFyZW50Tm9kZX1yZXR1cm4gYn0sc2V0T3duZXJUcmVlOmZ1bmN0aW9uKGEsYil7aWYoYSE9dGhpcy5vd25lclRyZWUpe2lmKHRoaXMub3duZXJUcmVlKXt0aGlzLm93bmVyVHJlZS51bnJlZ2lzdGVyTm9kZSh0aGlzKX10aGlzLm93bmVyVHJlZT1hO2lmKGIhPT10cnVlKXtFeHQuZWFjaCh0aGlzLmNoaWxkTm9kZXMsZnVuY3Rpb24oYyl7Yy5zZXRPd25lclRyZWUoYSl9KX1pZihhKXthLnJlZ2lzdGVyTm9kZSh0aGlzKX19fSxzZXRJZDpmdW5jdGlvbihiKXtpZihiIT09dGhpcy5pZCl7dmFyIGE9dGhpcy5vd25lclRyZWU7aWYoYSl7YS51bnJlZ2lzdGVyTm9kZSh0aGlzKX10aGlzLmlkPXRoaXMuYXR0cmlidXRlcy5pZD1iO2lmKGEpe2EucmVnaXN0ZXJOb2RlKHRoaXMpfXRoaXMub25JZENoYW5nZShiKX19LG9uSWRDaGFuZ2U6RXh0LmVtcHR5Rm4sZ2V0UGF0aDpmdW5jdGlvbihjKXtjPWN8fCJpZCI7dmFyIGU9dGhpcy5wYXJlbnROb2RlO3ZhciBhPVt0aGlzLmF0dHJpYnV0ZXNbY11dO3doaWxlKGUpe2EudW5zaGlmdChlLmF0dHJpYnV0ZXNbY10pO2U9ZS5wYXJlbnROb2RlfXZhciBkPXRoaXMuZ2V0T3duZXJUcmVlKCkucGF0aFNlcGFyYXRvcjtyZXR1cm4gZCthLmpvaW4oZCl9LGJ1YmJsZTpmdW5jdGlvbihjLGIsYSl7dmFyIGQ9dGhpczt3aGlsZShkKXtpZihjLmFwcGx5KGJ8fGQsYXx8W2RdKT09PWZhbHNlKXticmVha31kPWQucGFyZW50Tm9kZX19LGNhc2NhZGU6ZnVuY3Rpb24oZyxlLGIpe2lmKGcuYXBwbHkoZXx8dGhpcyxifHxbdGhpc10pIT09ZmFsc2Upe3ZhciBkPXRoaXMuY2hpbGROb2Rlcztmb3IodmFyIGM9MCxhPWQubGVuZ3RoO2M8YTtjKyspe2RbY10uY2FzY2FkZShnLGUsYil9fX0sZWFjaENoaWxkOmZ1bmN0aW9uKGcsZSxiKXt2YXIgZD10aGlzLmNoaWxkTm9kZXM7Zm9yKHZhciBjPTAsYT1kLmxlbmd0aDtjPGE7YysrKXtpZihnLmFwcGx5KGV8fGRbY10sYnx8W2RbY11dKT09PWZhbHNlKXticmVha319fSxmaW5kQ2hpbGQ6ZnVuY3Rpb24oYixjLGEpe3JldHVybiB0aGlzLmZpbmRDaGlsZEJ5KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1tiXT09Y30sbnVsbCxhKX0sZmluZENoaWxkQnk6ZnVuY3Rpb24oaCxnLGIpe3ZhciBlPXRoaXMuY2hpbGROb2RlcyxhPWUubGVuZ3RoLGQ9MCxqLGM7Zm9yKDtkPGE7ZCsrKXtqPWVbZF07aWYoaC5jYWxsKGd8fGosaik9PT10cnVlKXtyZXR1cm4gan1lbHNle2lmKGIpe2M9ai5maW5kQ2hpbGRCeShoLGcsYik7aWYoYyE9bnVsbCl7cmV0dXJuIGN9fX19cmV0dXJuIG51bGx9LHNvcnQ6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLmNoaWxkTm9kZXM7dmFyIGE9Yy5sZW5ndGg7aWYoYT4wKXt2YXIgZz1kP2Z1bmN0aW9uKCl7ZS5hcHBseShkLGFyZ3VtZW50cyl9OmU7Yy5zb3J0KGcpO2Zvcih2YXIgYj0wO2I8YTtiKyspe3ZhciBoPWNbYl07aC5wcmV2aW91c1NpYmxpbmc9Y1tiLTFdO2gubmV4dFNpYmxpbmc9Y1tiKzFdO2lmKGI9PT0wKXt0aGlzLnNldEZpcnN0Q2hpbGQoaCl9aWYoYj09YS0xKXt0aGlzLnNldExhc3RDaGlsZChoKX19fX0sY29udGFpbnM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaXNBbmNlc3Rvcih0aGlzKX0saXNBbmNlc3RvcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcmVudE5vZGU7d2hpbGUoYil7aWYoYj09YSl7cmV0dXJuIHRydWV9Yj1iLnBhcmVudE5vZGV9cmV0dXJuIGZhbHNlfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiJbTm9kZSIrKHRoaXMuaWQ/IiAiK3RoaXMuaWQ6IiIpKyJdIn19KTtFeHQudHJlZS5UcmVlTm9kZT1FeHQuZXh0ZW5kKEV4dC5kYXRhLk5vZGUse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2E9YXx8e307aWYoRXh0LmlzU3RyaW5nKGEpKXthPXt0ZXh0OmF9fXRoaXMuY2hpbGRyZW5SZW5kZXJlZD1mYWxzZTt0aGlzLnJlbmRlcmVkPWZhbHNlO0V4dC50cmVlLlRyZWVOb2RlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMuZXhwYW5kZWQ9YS5leHBhbmRlZD09PXRydWU7dGhpcy5pc1RhcmdldD1hLmlzVGFyZ2V0IT09ZmFsc2U7dGhpcy5kcmFnZ2FibGU9YS5kcmFnZ2FibGUhPT1mYWxzZSYmYS5hbGxvd0RyYWchPT1mYWxzZTt0aGlzLmFsbG93Q2hpbGRyZW49YS5hbGxvd0NoaWxkcmVuIT09ZmFsc2UmJmEuYWxsb3dEcm9wIT09ZmFsc2U7dGhpcy50ZXh0PWEudGV4dDt0aGlzLmRpc2FibGVkPWEuZGlzYWJsZWQ9PT10cnVlO3RoaXMuaGlkZGVuPWEuaGlkZGVuPT09dHJ1ZTt0aGlzLmFkZEV2ZW50cygidGV4dGNoYW5nZSIsImJlZm9yZWV4cGFuZCIsImJlZm9yZWNvbGxhcHNlIiwiZXhwYW5kIiwiZGlzYWJsZWRjaGFuZ2UiLCJjb2xsYXBzZSIsImJlZm9yZWNsaWNrIiwiY2xpY2siLCJjaGVja2NoYW5nZSIsImJlZm9yZWRibGNsaWNrIiwiZGJsY2xpY2siLCJjb250ZXh0bWVudSIsImJlZm9yZWNoaWxkcmVucmVuZGVyZWQiKTt2YXIgYj10aGlzLmF0dHJpYnV0ZXMudWlQcm92aWRlcnx8dGhpcy5kZWZhdWx0VUl8fEV4dC50cmVlLlRyZWVOb2RlVUk7dGhpcy51aT1uZXcgYih0aGlzKX0scHJldmVudEhTY3JvbGw6dHJ1ZSxpc0V4cGFuZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXhwYW5kZWR9LGdldFVJOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWl9LGdldExvYWRlcjpmdW5jdGlvbigpe3ZhciBhO3JldHVybiB0aGlzLmxvYWRlcnx8KChhPXRoaXMuZ2V0T3duZXJUcmVlKCkpJiZhLmxvYWRlcj9hLmxvYWRlcjoodGhpcy5sb2FkZXI9bmV3IEV4dC50cmVlLlRyZWVMb2FkZXIoKSkpfSxzZXRGaXJzdENoaWxkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZmlyc3RDaGlsZDtFeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLnNldEZpcnN0Q2hpbGQuY2FsbCh0aGlzLGEpO2lmKHRoaXMuY2hpbGRyZW5SZW5kZXJlZCYmYiYmYSE9Yil7Yi5yZW5kZXJJbmRlbnQodHJ1ZSx0cnVlKX1pZih0aGlzLnJlbmRlcmVkKXt0aGlzLnJlbmRlckluZGVudCh0cnVlLHRydWUpfX0sc2V0TGFzdENoaWxkOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMubGFzdENoaWxkO0V4dC50cmVlLlRyZWVOb2RlLnN1cGVyY2xhc3Muc2V0TGFzdENoaWxkLmNhbGwodGhpcyxiKTtpZih0aGlzLmNoaWxkcmVuUmVuZGVyZWQmJmEmJmIhPWEpe2EucmVuZGVySW5kZW50KHRydWUsdHJ1ZSl9aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5yZW5kZXJJbmRlbnQodHJ1ZSx0cnVlKX19LGFwcGVuZENoaWxkOmZ1bmN0aW9uKGIpe2lmKCFiLnJlbmRlciYmIUV4dC5pc0FycmF5KGIpKXtiPXRoaXMuZ2V0TG9hZGVyKCkuY3JlYXRlTm9kZShiKX12YXIgYT1FeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLmFwcGVuZENoaWxkLmNhbGwodGhpcyxiKTtpZihhJiZ0aGlzLmNoaWxkcmVuUmVuZGVyZWQpe2EucmVuZGVyKCl9dGhpcy51aS51cGRhdGVFeHBhbmRJY29uKCk7cmV0dXJuIGF9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGIsYSl7dGhpcy5vd25lclRyZWUuZ2V0U2VsZWN0aW9uTW9kZWwoKS51bnNlbGVjdChiKTtFeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLnJlbW92ZUNoaWxkLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZighYSl7dmFyIGM9Yi51aS5yZW5kZXJlZDtpZihjKXtiLnVpLnJlbW92ZSgpfWlmKGMmJnRoaXMuY2hpbGROb2Rlcy5sZW5ndGg8MSl7dGhpcy5jb2xsYXBzZShmYWxzZSxmYWxzZSl9ZWxzZXt0aGlzLnVpLnVwZGF0ZUV4cGFuZEljb24oKX1pZighdGhpcy5maXJzdENoaWxkJiYhdGhpcy5pc0hpZGRlblJvb3QoKSl7dGhpcy5jaGlsZHJlblJlbmRlcmVkPWZhbHNlfX1yZXR1cm4gYn0saW5zZXJ0QmVmb3JlOmZ1bmN0aW9uKGMsYSl7aWYoIWMucmVuZGVyKXtjPXRoaXMuZ2V0TG9hZGVyKCkuY3JlYXRlTm9kZShjKX12YXIgYj1FeHQudHJlZS5UcmVlTm9kZS5zdXBlcmNsYXNzLmluc2VydEJlZm9yZS5jYWxsKHRoaXMsYyxhKTtpZihiJiZhJiZ0aGlzLmNoaWxkcmVuUmVuZGVyZWQpe2MucmVuZGVyKCl9dGhpcy51aS51cGRhdGVFeHBhbmRJY29uKCk7cmV0dXJuIGJ9LHNldFRleHQ6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy50ZXh0O3RoaXMudGV4dD10aGlzLmF0dHJpYnV0ZXMudGV4dD1iO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMudWkub25UZXh0Q2hhbmdlKHRoaXMsYixhKX10aGlzLmZpcmVFdmVudCgidGV4dGNoYW5nZSIsdGhpcyxiLGEpfSxzZXRJY29uQ2xzOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuYXR0cmlidXRlcy5pY29uQ2xzO3RoaXMuYXR0cmlidXRlcy5pY29uQ2xzPWI7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy51aS5vbkljb25DbHNDaGFuZ2UodGhpcyxiLGEpfX0sc2V0VG9vbHRpcDpmdW5jdGlvbihhLGIpe3RoaXMuYXR0cmlidXRlcy5xdGlwPWE7dGhpcy5hdHRyaWJ1dGVzLnF0aXBUaXRsZT1iO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMudWkub25UaXBDaGFuZ2UodGhpcyxhLGIpfX0sc2V0SWNvbjpmdW5jdGlvbihhKXt0aGlzLmF0dHJpYnV0ZXMuaWNvbj1hO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMudWkub25JY29uQ2hhbmdlKHRoaXMsYSl9fSxzZXRIcmVmOmZ1bmN0aW9uKGEsYil7dGhpcy5hdHRyaWJ1dGVzLmhyZWY9YTt0aGlzLmF0dHJpYnV0ZXMuaHJlZlRhcmdldD1iO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMudWkub25IcmVmQ2hhbmdlKHRoaXMsYSxiKX19LHNldENsczpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmF0dHJpYnV0ZXMuY2xzO3RoaXMuYXR0cmlidXRlcy5jbHM9YjtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLnVpLm9uQ2xzQ2hhbmdlKHRoaXMsYixhKX19LHNlbGVjdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0T3duZXJUcmVlKCk7aWYoYSl7YS5nZXRTZWxlY3Rpb25Nb2RlbCgpLnNlbGVjdCh0aGlzKX19LHVuc2VsZWN0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0T3duZXJUcmVlKCk7aWYoYil7Yi5nZXRTZWxlY3Rpb25Nb2RlbCgpLnVuc2VsZWN0KHRoaXMsYSl9fSxpc1NlbGVjdGVkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRPd25lclRyZWUoKTtyZXR1cm4gYT9hLmdldFNlbGVjdGlvbk1vZGVsKCkuaXNTZWxlY3RlZCh0aGlzKTpmYWxzZX0sZXhwYW5kOmZ1bmN0aW9uKGEsYyxkLGIpe2lmKCF0aGlzLmV4cGFuZGVkKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlZXhwYW5kIix0aGlzLGEsYyk9PT1mYWxzZSl7cmV0dXJufWlmKCF0aGlzLmNoaWxkcmVuUmVuZGVyZWQpe3RoaXMucmVuZGVyQ2hpbGRyZW4oKX10aGlzLmV4cGFuZGVkPXRydWU7aWYoIXRoaXMuaXNIaWRkZW5Sb290KCkmJih0aGlzLmdldE93bmVyVHJlZSgpLmFuaW1hdGUmJmMhPT1mYWxzZSl8fGMpe3RoaXMudWkuYW5pbUV4cGFuZChmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJleHBhbmQiLHRoaXMpO3RoaXMucnVuQ2FsbGJhY2soZCxifHx0aGlzLFt0aGlzXSk7aWYoYT09PXRydWUpe3RoaXMuZXhwYW5kQ2hpbGROb2Rlcyh0cnVlLHRydWUpfX0uY3JlYXRlRGVsZWdhdGUodGhpcykpO3JldHVybn1lbHNle3RoaXMudWkuZXhwYW5kKCk7dGhpcy5maXJlRXZlbnQoImV4cGFuZCIsdGhpcyk7dGhpcy5ydW5DYWxsYmFjayhkLGJ8fHRoaXMsW3RoaXNdKX19ZWxzZXt0aGlzLnJ1bkNhbGxiYWNrKGQsYnx8dGhpcyxbdGhpc10pfWlmKGE9PT10cnVlKXt0aGlzLmV4cGFuZENoaWxkTm9kZXModHJ1ZSl9fSxydW5DYWxsYmFjazpmdW5jdGlvbihhLGMsYil7aWYoRXh0LmlzRnVuY3Rpb24oYSkpe2EuYXBwbHkoYyxiKX19LGlzSGlkZGVuUm9vdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUm9vdCYmIXRoaXMuZ2V0T3duZXJUcmVlKCkucm9vdFZpc2libGV9LGNvbGxhcHNlOmZ1bmN0aW9uKGIsZyxoLGUpe2lmKHRoaXMuZXhwYW5kZWQmJiF0aGlzLmlzSGlkZGVuUm9vdCgpKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlY29sbGFwc2UiLHRoaXMsYixnKT09PWZhbHNlKXtyZXR1cm59dGhpcy5leHBhbmRlZD1mYWxzZTtpZigodGhpcy5nZXRPd25lclRyZWUoKS5hbmltYXRlJiZnIT09ZmFsc2UpfHxnKXt0aGlzLnVpLmFuaW1Db2xsYXBzZShmdW5jdGlvbigpe3RoaXMuZmlyZUV2ZW50KCJjb2xsYXBzZSIsdGhpcyk7dGhpcy5ydW5DYWxsYmFjayhoLGV8fHRoaXMsW3RoaXNdKTtpZihiPT09dHJ1ZSl7dGhpcy5jb2xsYXBzZUNoaWxkTm9kZXModHJ1ZSl9fS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKSk7cmV0dXJufWVsc2V7dGhpcy51aS5jb2xsYXBzZSgpO3RoaXMuZmlyZUV2ZW50KCJjb2xsYXBzZSIsdGhpcyk7dGhpcy5ydW5DYWxsYmFjayhoLGV8fHRoaXMsW3RoaXNdKX19ZWxzZXtpZighdGhpcy5leHBhbmRlZCl7dGhpcy5ydW5DYWxsYmFjayhoLGV8fHRoaXMsW3RoaXNdKX19aWYoYj09PXRydWUpe3ZhciBkPXRoaXMuY2hpbGROb2Rlcztmb3IodmFyIGM9MCxhPWQubGVuZ3RoO2M8YTtjKyspe2RbY10uY29sbGFwc2UodHJ1ZSxmYWxzZSl9fX0sZGVsYXllZEV4cGFuZDpmdW5jdGlvbihhKXtpZighdGhpcy5leHBhbmRQcm9jSWQpe3RoaXMuZXhwYW5kUHJvY0lkPXRoaXMuZXhwYW5kLmRlZmVyKGEsdGhpcyl9fSxjYW5jZWxFeHBhbmQ6ZnVuY3Rpb24oKXtpZih0aGlzLmV4cGFuZFByb2NJZCl7Y2xlYXJUaW1lb3V0KHRoaXMuZXhwYW5kUHJvY0lkKX10aGlzLmV4cGFuZFByb2NJZD1mYWxzZX0sdG9nZ2xlOmZ1bmN0aW9uKCl7aWYodGhpcy5leHBhbmRlZCl7dGhpcy5jb2xsYXBzZSgpfWVsc2V7dGhpcy5leHBhbmQoKX19LGVuc3VyZVZpc2libGU6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzLmdldE93bmVyVHJlZSgpO2EuZXhwYW5kUGF0aCh0aGlzLnBhcmVudE5vZGU/dGhpcy5wYXJlbnROb2RlLmdldFBhdGgoKTp0aGlzLmdldFBhdGgoKSxmYWxzZSxmdW5jdGlvbigpe3ZhciBkPWEuZ2V0Tm9kZUJ5SWQodGhpcy5pZCk7YS5nZXRUcmVlRWwoKS5zY3JvbGxDaGlsZEludG9WaWV3KGQudWkuYW5jaG9yKTt0aGlzLnJ1bkNhbGxiYWNrKGMsYnx8dGhpcyxbdGhpc10pfS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKSl9LGV4cGFuZENoaWxkTm9kZXM6ZnVuY3Rpb24oYixlKXt2YXIgZD10aGlzLmNoaWxkTm9kZXMsYyxhPWQubGVuZ3RoO2ZvcihjPTA7YzxhO2MrKyl7ZFtjXS5leHBhbmQoYixlKX19LGNvbGxhcHNlQ2hpbGROb2RlczpmdW5jdGlvbihiKXt2YXIgZD10aGlzLmNoaWxkTm9kZXM7Zm9yKHZhciBjPTAsYT1kLmxlbmd0aDtjPGE7YysrKXtkW2NdLmNvbGxhcHNlKGIpfX0sZGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZGlzYWJsZWQ9dHJ1ZTt0aGlzLnVuc2VsZWN0KCk7aWYodGhpcy5yZW5kZXJlZCYmdGhpcy51aS5vbkRpc2FibGVDaGFuZ2Upe3RoaXMudWkub25EaXNhYmxlQ2hhbmdlKHRoaXMsdHJ1ZSl9dGhpcy5maXJlRXZlbnQoImRpc2FibGVkY2hhbmdlIix0aGlzLHRydWUpfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmRpc2FibGVkPWZhbHNlO2lmKHRoaXMucmVuZGVyZWQmJnRoaXMudWkub25EaXNhYmxlQ2hhbmdlKXt0aGlzLnVpLm9uRGlzYWJsZUNoYW5nZSh0aGlzLGZhbHNlKX10aGlzLmZpcmVFdmVudCgiZGlzYWJsZWRjaGFuZ2UiLHRoaXMsZmFsc2UpfSxyZW5kZXJDaGlsZHJlbjpmdW5jdGlvbihiKXtpZihiIT09ZmFsc2Upe3RoaXMuZmlyZUV2ZW50KCJiZWZvcmVjaGlsZHJlbnJlbmRlcmVkIix0aGlzKX12YXIgZD10aGlzLmNoaWxkTm9kZXM7Zm9yKHZhciBjPTAsYT1kLmxlbmd0aDtjPGE7YysrKXtkW2NdLnJlbmRlcih0cnVlKX10aGlzLmNoaWxkcmVuUmVuZGVyZWQ9dHJ1ZX0sc29ydDpmdW5jdGlvbihlLGQpe0V4dC50cmVlLlRyZWVOb2RlLnN1cGVyY2xhc3Muc29ydC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5jaGlsZHJlblJlbmRlcmVkKXt2YXIgYz10aGlzLmNoaWxkTm9kZXM7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXtjW2JdLnJlbmRlcih0cnVlKX19fSxyZW5kZXI6ZnVuY3Rpb24oYSl7dGhpcy51aS5yZW5kZXIoYSk7aWYoIXRoaXMucmVuZGVyZWQpe3RoaXMuZ2V0T3duZXJUcmVlKCkucmVnaXN0ZXJOb2RlKHRoaXMpO3RoaXMucmVuZGVyZWQ9dHJ1ZTtpZih0aGlzLmV4cGFuZGVkKXt0aGlzLmV4cGFuZGVkPWZhbHNlO3RoaXMuZXhwYW5kKGZhbHNlLGZhbHNlKX19fSxyZW5kZXJJbmRlbnQ6ZnVuY3Rpb24oYixlKXtpZihlKXt0aGlzLnVpLmNoaWxkSW5kZW50PW51bGx9dGhpcy51aS5yZW5kZXJJbmRlbnQoKTtpZihiPT09dHJ1ZSYmdGhpcy5jaGlsZHJlblJlbmRlcmVkKXt2YXIgZD10aGlzLmNoaWxkTm9kZXM7Zm9yKHZhciBjPTAsYT1kLmxlbmd0aDtjPGE7YysrKXtkW2NdLnJlbmRlckluZGVudCh0cnVlLGUpfX19LGJlZ2luVXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5jaGlsZHJlblJlbmRlcmVkPWZhbHNlfSxlbmRVcGRhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmV4cGFuZGVkJiZ0aGlzLnJlbmRlcmVkKXt0aGlzLnJlbmRlckNoaWxkcmVuKCl9fSxkZXN0cm95OmZ1bmN0aW9uKGEpe2lmKGE9PT10cnVlKXt0aGlzLnVuc2VsZWN0KHRydWUpfUV4dC50cmVlLlRyZWVOb2RlLnN1cGVyY2xhc3MuZGVzdHJveS5jYWxsKHRoaXMsYSk7RXh0LmRlc3Ryb3kodGhpcy51aSx0aGlzLmxvYWRlcik7dGhpcy51aT10aGlzLmxvYWRlcj1udWxsfSxvbklkQ2hhbmdlOmZ1bmN0aW9uKGEpe3RoaXMudWkub25JZENoYW5nZShhKX19KTtFeHQudHJlZS5UcmVlUGFuZWwubm9kZVR5cGVzLm5vZGU9RXh0LnRyZWUuVHJlZU5vZGU7RXh0LnRyZWUuQXN5bmNUcmVlTm9kZT1mdW5jdGlvbihhKXt0aGlzLmxvYWRlZD1hJiZhLmxvYWRlZD09PXRydWU7dGhpcy5sb2FkaW5nPWZhbHNlO0V4dC50cmVlLkFzeW5jVHJlZU5vZGUuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5hZGRFdmVudHMoImJlZm9yZWxvYWQiLCJsb2FkIil9O0V4dC5leHRlbmQoRXh0LnRyZWUuQXN5bmNUcmVlTm9kZSxFeHQudHJlZS5UcmVlTm9kZSx7ZXhwYW5kOmZ1bmN0aW9uKGIsZSxoLGMpe2lmKHRoaXMubG9hZGluZyl7dmFyIGc7dmFyIGQ9ZnVuY3Rpb24oKXtpZighdGhpcy5sb2FkaW5nKXtjbGVhckludGVydmFsKGcpO3RoaXMuZXhwYW5kKGIsZSxoLGMpfX0uY3JlYXRlRGVsZWdhdGUodGhpcyk7Zz1zZXRJbnRlcnZhbChkLDIwMCk7cmV0dXJufWlmKCF0aGlzLmxvYWRlZCl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWxvYWQiLHRoaXMpPT09ZmFsc2Upe3JldHVybn10aGlzLmxvYWRpbmc9dHJ1ZTt0aGlzLnVpLmJlZm9yZUxvYWQodGhpcyk7dmFyIGE9dGhpcy5sb2FkZXJ8fHRoaXMuYXR0cmlidXRlcy5sb2FkZXJ8fHRoaXMuZ2V0T3duZXJUcmVlKCkuZ2V0TG9hZGVyKCk7aWYoYSl7YS5sb2FkKHRoaXMsdGhpcy5sb2FkQ29tcGxldGUuY3JlYXRlRGVsZWdhdGUodGhpcyxbYixlLGgsY10pLHRoaXMpO3JldHVybn19RXh0LnRyZWUuQXN5bmNUcmVlTm9kZS5zdXBlcmNsYXNzLmV4cGFuZC5jYWxsKHRoaXMsYixlLGgsYyl9LGlzTG9hZGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvYWRpbmd9LGxvYWRDb21wbGV0ZTpmdW5jdGlvbihhLGMsZCxiKXt0aGlzLmxvYWRpbmc9ZmFsc2U7dGhpcy5sb2FkZWQ9dHJ1ZTt0aGlzLnVpLmFmdGVyTG9hZCh0aGlzKTt0aGlzLmZpcmVFdmVudCgibG9hZCIsdGhpcyk7dGhpcy5leHBhbmQoYSxjLGQsYil9LGlzTG9hZGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9hZGVkfSxoYXNDaGlsZE5vZGVzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNMZWFmKCkmJiF0aGlzLmxvYWRlZCl7cmV0dXJuIHRydWV9ZWxzZXtyZXR1cm4gRXh0LnRyZWUuQXN5bmNUcmVlTm9kZS5zdXBlcmNsYXNzLmhhc0NoaWxkTm9kZXMuY2FsbCh0aGlzKX19LHJlbG9hZDpmdW5jdGlvbihiLGEpe3RoaXMuY29sbGFwc2UoZmFsc2UsZmFsc2UpO3doaWxlKHRoaXMuZmlyc3RDaGlsZCl7dGhpcy5yZW1vdmVDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpLmRlc3Ryb3koKX10aGlzLmNoaWxkcmVuUmVuZGVyZWQ9ZmFsc2U7dGhpcy5sb2FkZWQ9ZmFsc2U7aWYodGhpcy5pc0hpZGRlblJvb3QoKSl7dGhpcy5leHBhbmRlZD1mYWxzZX10aGlzLmV4cGFuZChmYWxzZSxmYWxzZSxiLGEpfX0pO0V4dC50cmVlLlRyZWVQYW5lbC5ub2RlVHlwZXMuYXN5bmM9RXh0LnRyZWUuQXN5bmNUcmVlTm9kZTtFeHQudHJlZS5UcmVlTm9kZVVJPUV4dC5leHRlbmQoT2JqZWN0LHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyx7bm9kZTphLHJlbmRlcmVkOmZhbHNlLGFuaW1hdGluZzpmYWxzZSx3YXNMZWFmOnRydWUsZWNjOiJ4LXRyZWUtZWMtaWNvbiB4LXRyZWUtZWxib3ciLGVtcHR5SWNvbjpFeHQuQkxBTktfSU1BR0VfVVJMfSl9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuY3ROb2RlLnJlbW92ZUNoaWxkKGEudWkuZ2V0RWwoKSl9fSxiZWZvcmVMb2FkOmZ1bmN0aW9uKCl7dGhpcy5hZGRDbGFzcygieC10cmVlLW5vZGUtbG9hZGluZyIpfSxhZnRlckxvYWQ6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUNsYXNzKCJ4LXRyZWUtbm9kZS1sb2FkaW5nIil9LG9uVGV4dENoYW5nZTpmdW5jdGlvbihiLGMsYSl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy50ZXh0Tm9kZS5pbm5lckhUTUw9Y319LG9uSWNvbkNsc0NoYW5nZTpmdW5jdGlvbihjLGEsYil7aWYodGhpcy5yZW5kZXJlZCl7RXh0LmZseSh0aGlzLmljb25Ob2RlKS5yZXBsYWNlQ2xhc3MoYixhKX19LG9uSWNvbkNoYW5nZTpmdW5jdGlvbihiLGEpe2lmKHRoaXMucmVuZGVyZWQpe3ZhciBjPUV4dC5pc0VtcHR5KGEpO3RoaXMuaWNvbk5vZGUuc3JjPWM/dGhpcy5lbXB0eUljb246YTtFeHQuZmx5KHRoaXMuaWNvbk5vZGUpW2M/InJlbW92ZUNsYXNzIjoiYWRkQ2xhc3MiXSgieC10cmVlLW5vZGUtaW5saW5lLWljb24iKX19LG9uVGlwQ2hhbmdlOmZ1bmN0aW9uKGIsYyxkKXtpZih0aGlzLnJlbmRlcmVkKXt2YXIgYT1FeHQuaXNEZWZpbmVkKGQpO2lmKHRoaXMudGV4dE5vZGUuc2V0QXR0cmlidXRlTlMpe3RoaXMudGV4dE5vZGUuc2V0QXR0cmlidXRlTlMoImV4dCIsInF0aXAiLGMpO2lmKGEpe3RoaXMudGV4dE5vZGUuc2V0QXR0cmlidXRlTlMoImV4dCIsInF0aXRsZSIsZCl9fWVsc2V7dGhpcy50ZXh0Tm9kZS5zZXRBdHRyaWJ1dGUoImV4dDpxdGlwIixjKTtpZihhKXt0aGlzLnRleHROb2RlLnNldEF0dHJpYnV0ZSgiZXh0OnF0aXRsZSIsZCl9fX19LG9uSHJlZkNoYW5nZTpmdW5jdGlvbihiLGEsYyl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5hbmNob3IuaHJlZj10aGlzLmdldEhyZWYoYSk7aWYoRXh0LmlzRGVmaW5lZChjKSl7dGhpcy5hbmNob3IudGFyZ2V0PWN9fX0sb25DbHNDaGFuZ2U6ZnVuY3Rpb24oYyxhLGIpe2lmKHRoaXMucmVuZGVyZWQpe0V4dC5mbHkodGhpcy5lbE5vZGUpLnJlcGxhY2VDbGFzcyhiLGEpfX0sb25EaXNhYmxlQ2hhbmdlOmZ1bmN0aW9uKGEsYil7dGhpcy5kaXNhYmxlZD1iO2lmKHRoaXMuY2hlY2tib3gpe3RoaXMuY2hlY2tib3guZGlzYWJsZWQ9Yn10aGlzW2I/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgieC10cmVlLW5vZGUtZGlzYWJsZWQiKX0sb25TZWxlY3RlZENoYW5nZTpmdW5jdGlvbihhKXtpZihhKXt0aGlzLmZvY3VzKCk7dGhpcy5hZGRDbGFzcygieC10cmVlLXNlbGVjdGVkIil9ZWxzZXt0aGlzLnJlbW92ZUNsYXNzKCJ4LXRyZWUtc2VsZWN0ZWQiKX19LG9uTW92ZTpmdW5jdGlvbihhLGgsZSxnLGQsYil7dGhpcy5jaGlsZEluZGVudD1udWxsO2lmKHRoaXMucmVuZGVyZWQpe3ZhciBpPWcudWkuZ2V0Q29udGFpbmVyKCk7aWYoIWkpe3RoaXMuaG9sZGVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuaG9sZGVyLmFwcGVuZENoaWxkKHRoaXMud3JhcCk7cmV0dXJufXZhciBjPWI/Yi51aS5nZXRFbCgpOm51bGw7aWYoYyl7aS5pbnNlcnRCZWZvcmUodGhpcy53cmFwLGMpfWVsc2V7aS5hcHBlbmRDaGlsZCh0aGlzLndyYXApfXRoaXMubm9kZS5yZW5kZXJJbmRlbnQodHJ1ZSxlIT1nKX19LGFkZENsYXNzOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZWxOb2RlKXtFeHQuZmx5KHRoaXMuZWxOb2RlKS5hZGRDbGFzcyhhKX19LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZWxOb2RlKXtFeHQuZmx5KHRoaXMuZWxOb2RlKS5yZW1vdmVDbGFzcyhhKX19LHJlbW92ZTpmdW5jdGlvbigpe2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuaG9sZGVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuaG9sZGVyLmFwcGVuZENoaWxkKHRoaXMud3JhcCl9fSxmaXJlRXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ub2RlLmZpcmVFdmVudC5hcHBseSh0aGlzLm5vZGUsYXJndW1lbnRzKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe3RoaXMubm9kZS5vbigibW92ZSIsdGhpcy5vbk1vdmUsdGhpcyk7aWYodGhpcy5ub2RlLmRpc2FibGVkKXt0aGlzLm9uRGlzYWJsZUNoYW5nZSh0aGlzLm5vZGUsdHJ1ZSl9aWYodGhpcy5ub2RlLmhpZGRlbil7dGhpcy5oaWRlKCl9dmFyIGI9dGhpcy5ub2RlLmdldE93bmVyVHJlZSgpO3ZhciBhPWIuZW5hYmxlRER8fGIuZW5hYmxlRHJhZ3x8Yi5lbmFibGVEcm9wO2lmKGEmJighdGhpcy5ub2RlLmlzUm9vdHx8Yi5yb290VmlzaWJsZSkpe0V4dC5kZC5SZWdpc3RyeS5yZWdpc3Rlcih0aGlzLmVsTm9kZSx7bm9kZTp0aGlzLm5vZGUsaGFuZGxlczp0aGlzLmdldERESGFuZGxlcygpLGlzSGFuZGxlOmZhbHNlfSl9fSxnZXREREhhbmRsZXM6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5pY29uTm9kZSx0aGlzLnRleHROb2RlLHRoaXMuZWxOb2RlXX0saGlkZTpmdW5jdGlvbigpe3RoaXMubm9kZS5oaWRkZW49dHJ1ZTtpZih0aGlzLndyYXApe3RoaXMud3JhcC5zdHlsZS5kaXNwbGF5PSJub25lIn19LHNob3c6ZnVuY3Rpb24oKXt0aGlzLm5vZGUuaGlkZGVuPWZhbHNlO2lmKHRoaXMud3JhcCl7dGhpcy53cmFwLnN0eWxlLmRpc3BsYXk9IiJ9fSxvbkNvbnRleHRNZW51OmZ1bmN0aW9uKGEpe2lmKHRoaXMubm9kZS5oYXNMaXN0ZW5lcigiY29udGV4dG1lbnUiKXx8dGhpcy5ub2RlLmdldE93bmVyVHJlZSgpLmhhc0xpc3RlbmVyKCJjb250ZXh0bWVudSIpKXthLnByZXZlbnREZWZhdWx0KCk7dGhpcy5mb2N1cygpO3RoaXMuZmlyZUV2ZW50KCJjb250ZXh0bWVudSIsdGhpcy5ub2RlLGEpfX0sb25DbGljazpmdW5jdGlvbihjKXtpZih0aGlzLmRyb3BwaW5nKXtjLnN0b3BFdmVudCgpO3JldHVybn1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlY2xpY2siLHRoaXMubm9kZSxjKSE9PWZhbHNlKXt2YXIgYj1jLmdldFRhcmdldCgiYSIpO2lmKCF0aGlzLmRpc2FibGVkJiZ0aGlzLm5vZGUuYXR0cmlidXRlcy5ocmVmJiZiKXt0aGlzLmZpcmVFdmVudCgiY2xpY2siLHRoaXMubm9kZSxjKTtyZXR1cm59ZWxzZXtpZihiJiZjLmN0cmxLZXkpe2Muc3RvcEV2ZW50KCl9fWMucHJldmVudERlZmF1bHQoKTtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm59aWYodGhpcy5ub2RlLmF0dHJpYnV0ZXMuc2luZ2xlQ2xpY2tFeHBhbmQmJiF0aGlzLmFuaW1hdGluZyYmdGhpcy5ub2RlLmlzRXhwYW5kYWJsZSgpKXt0aGlzLm5vZGUudG9nZ2xlKCl9dGhpcy5maXJlRXZlbnQoImNsaWNrIix0aGlzLm5vZGUsYyl9ZWxzZXtjLnN0b3BFdmVudCgpfX0sb25EYmxDbGljazpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7aWYodGhpcy5kaXNhYmxlZCl7cmV0dXJufWlmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVkYmxjbGljayIsdGhpcy5ub2RlLGEpIT09ZmFsc2Upe2lmKHRoaXMuY2hlY2tib3gpe3RoaXMudG9nZ2xlQ2hlY2soKX1pZighdGhpcy5hbmltYXRpbmcmJnRoaXMubm9kZS5pc0V4cGFuZGFibGUoKSl7dGhpcy5ub2RlLnRvZ2dsZSgpfXRoaXMuZmlyZUV2ZW50KCJkYmxjbGljayIsdGhpcy5ub2RlLGEpfX0sb25PdmVyOmZ1bmN0aW9uKGEpe3RoaXMuYWRkQ2xhc3MoIngtdHJlZS1ub2RlLW92ZXIiKX0sb25PdXQ6ZnVuY3Rpb24oYSl7dGhpcy5yZW1vdmVDbGFzcygieC10cmVlLW5vZGUtb3ZlciIpfSxvbkNoZWNrQ2hhbmdlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jaGVja2JveC5jaGVja2VkO3RoaXMuY2hlY2tib3guZGVmYXVsdENoZWNrZWQ9YTt0aGlzLm5vZGUuYXR0cmlidXRlcy5jaGVja2VkPWE7dGhpcy5maXJlRXZlbnQoImNoZWNrY2hhbmdlIix0aGlzLm5vZGUsYSl9LGVjQ2xpY2s6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuYW5pbWF0aW5nJiZ0aGlzLm5vZGUuaXNFeHBhbmRhYmxlKCkpe3RoaXMubm9kZS50b2dnbGUoKX19LHN0YXJ0RHJvcDpmdW5jdGlvbigpe3RoaXMuZHJvcHBpbmc9dHJ1ZX0sZW5kRHJvcDpmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLmRyb3BwaW5nPWZhbHNlfS5jcmVhdGVEZWxlZ2F0ZSh0aGlzKSw1MCl9LGV4cGFuZDpmdW5jdGlvbigpe3RoaXMudXBkYXRlRXhwYW5kSWNvbigpO3RoaXMuY3ROb2RlLnN0eWxlLmRpc3BsYXk9IiJ9LGZvY3VzOmZ1bmN0aW9uKCl7aWYoIXRoaXMubm9kZS5wcmV2ZW50SFNjcm9sbCl7dHJ5e3RoaXMuYW5jaG9yLmZvY3VzKCl9Y2F0Y2goYyl7fX1lbHNle3RyeXt2YXIgYj10aGlzLm5vZGUuZ2V0T3duZXJUcmVlKCkuZ2V0VHJlZUVsKCkuZG9tO3ZhciBhPWIuc2Nyb2xsTGVmdDt0aGlzLmFuY2hvci5mb2N1cygpO2Iuc2Nyb2xsTGVmdD1hfWNhdGNoKGMpe319fSx0b2dnbGVDaGVjazpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmNoZWNrYm94O2lmKGEpe2EuY2hlY2tlZD0oYj09PXVuZGVmaW5lZD8hYS5jaGVja2VkOmIpO3RoaXMub25DaGVja0NoYW5nZSgpfX0sYmx1cjpmdW5jdGlvbigpe3RyeXt0aGlzLmFuY2hvci5ibHVyKCl9Y2F0Y2goYSl7fX0sYW5pbUV4cGFuZDpmdW5jdGlvbihiKXt2YXIgYT1FeHQuZ2V0KHRoaXMuY3ROb2RlKTthLnN0b3BGeCgpO2lmKCF0aGlzLm5vZGUuaXNFeHBhbmRhYmxlKCkpe3RoaXMudXBkYXRlRXhwYW5kSWNvbigpO3RoaXMuY3ROb2RlLnN0eWxlLmRpc3BsYXk9IiI7RXh0LmNhbGxiYWNrKGIpO3JldHVybn10aGlzLmFuaW1hdGluZz10cnVlO3RoaXMudXBkYXRlRXhwYW5kSWNvbigpO2Euc2xpZGVJbigidCIse2NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hbmltYXRpbmc9ZmFsc2U7RXh0LmNhbGxiYWNrKGIpfSxzY29wZTp0aGlzLGR1cmF0aW9uOnRoaXMubm9kZS5vd25lclRyZWUuZHVyYXRpb258fDAuMjV9KX0saGlnaGxpZ2h0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ub2RlLmdldE93bmVyVHJlZSgpO0V4dC5mbHkodGhpcy53cmFwKS5oaWdobGlnaHQoYS5obENvbG9yfHwiQzNEQUY5Iix7ZW5kQ29sb3I6YS5obEJhc2VDb2xvcn0pfSxjb2xsYXBzZTpmdW5jdGlvbigpe3RoaXMudXBkYXRlRXhwYW5kSWNvbigpO3RoaXMuY3ROb2RlLnN0eWxlLmRpc3BsYXk9Im5vbmUifSxhbmltQ29sbGFwc2U6ZnVuY3Rpb24oYil7dmFyIGE9RXh0LmdldCh0aGlzLmN0Tm9kZSk7YS5lbmFibGVEaXNwbGF5TW9kZSgiYmxvY2siKTthLnN0b3BGeCgpO3RoaXMuYW5pbWF0aW5nPXRydWU7dGhpcy51cGRhdGVFeHBhbmRJY29uKCk7YS5zbGlkZU91dCgidCIse2NhbGxiYWNrOmZ1bmN0aW9uKCl7dGhpcy5hbmltYXRpbmc9ZmFsc2U7RXh0LmNhbGxiYWNrKGIpfSxzY29wZTp0aGlzLGR1cmF0aW9uOnRoaXMubm9kZS5vd25lclRyZWUuZHVyYXRpb258fDAuMjV9KX0sZ2V0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3ROb2RlfSxnZXRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndyYXB9LGFwcGVuZERER2hvc3Q6ZnVuY3Rpb24oYSl7YS5hcHBlbmRDaGlsZCh0aGlzLmVsTm9kZS5jbG9uZU5vZGUodHJ1ZSkpfSxnZXRERFJlcGFpclhZOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5saWIuRG9tLmdldFhZKHRoaXMuaWNvbk5vZGUpfSxvblJlbmRlcjpmdW5jdGlvbigpe3RoaXMucmVuZGVyKCl9LHJlbmRlcjpmdW5jdGlvbihjKXt2YXIgZT10aGlzLm5vZGUsYj1lLmF0dHJpYnV0ZXM7dmFyIGQ9ZS5wYXJlbnROb2RlP2UucGFyZW50Tm9kZS51aS5nZXRDb250YWluZXIoKTplLm93bmVyVHJlZS5pbm5lckN0LmRvbTtpZighdGhpcy5yZW5kZXJlZCl7dGhpcy5yZW5kZXJlZD10cnVlO3RoaXMucmVuZGVyRWxlbWVudHMoZSxiLGQsYyk7aWYoYi5xdGlwKXt0aGlzLm9uVGlwQ2hhbmdlKGUsYi5xdGlwLGIucXRpcFRpdGxlKX1lbHNle2lmKGIucXRpcENmZyl7Yi5xdGlwQ2ZnLnRhcmdldD1FeHQuaWQodGhpcy50ZXh0Tm9kZSk7RXh0LlF1aWNrVGlwcy5yZWdpc3RlcihiLnF0aXBDZmcpfX10aGlzLmluaXRFdmVudHMoKTtpZighdGhpcy5ub2RlLmV4cGFuZGVkKXt0aGlzLnVwZGF0ZUV4cGFuZEljb24odHJ1ZSl9fWVsc2V7aWYoYz09PXRydWUpe2QuYXBwZW5kQ2hpbGQodGhpcy53cmFwKX19fSxyZW5kZXJFbGVtZW50czpmdW5jdGlvbihlLGssaixsKXt0aGlzLmluZGVudE1hcmt1cD1lLnBhcmVudE5vZGU/ZS5wYXJlbnROb2RlLnVpLmdldENoaWxkSW5kZW50KCk6IiI7dmFyIGc9RXh0LmlzQm9vbGVhbihrLmNoZWNrZWQpLGIsYz10aGlzLmdldEhyZWYoay5ocmVmKSxkPVsnPGxpIGNsYXNzPSJ4LXRyZWUtbm9kZSI+PGRpdiBleHQ6dHJlZS1ub2RlLWlkPSInLGUuaWQsJyIgY2xhc3M9IngtdHJlZS1ub2RlLWVsIHgtdHJlZS1ub2RlLWxlYWYgeC11bnNlbGVjdGFibGUgJyxrLmNscywnIiB1bnNlbGVjdGFibGU9Im9uIj4nLCc8c3BhbiBjbGFzcz0ieC10cmVlLW5vZGUtaW5kZW50Ij4nLHRoaXMuaW5kZW50TWFya3VwLCI8L3NwYW4+IiwnPGltZyBhbHQ9IiIgc3JjPSInLHRoaXMuZW1wdHlJY29uLCciIGNsYXNzPSJ4LXRyZWUtZWMtaWNvbiB4LXRyZWUtZWxib3ciIC8+JywnPGltZyBhbHQ9IiIgc3JjPSInLGsuaWNvbnx8dGhpcy5lbXB0eUljb24sJyIgY2xhc3M9IngtdHJlZS1ub2RlLWljb24nLChrLmljb24/IiB4LXRyZWUtbm9kZS1pbmxpbmUtaWNvbiI6IiIpLChrLmljb25DbHM/IiAiK2suaWNvbkNsczoiIiksJyIgdW5zZWxlY3RhYmxlPSJvbiIgLz4nLGc/KCc8aW5wdXQgY2xhc3M9IngtdHJlZS1ub2RlLWNiIiB0eXBlPSJjaGVja2JveCIgJysoay5jaGVja2VkPydjaGVja2VkPSJjaGVja2VkIiAvPic6Ii8+IikpOiIiLCc8YSBoaWRlZm9jdXM9Im9uIiBjbGFzcz0ieC10cmVlLW5vZGUtYW5jaG9yIiBocmVmPSInLGMsJyIgdGFiSW5kZXg9IjEiICcsay5ocmVmVGFyZ2V0PycgdGFyZ2V0PSInK2suaHJlZlRhcmdldCsnIic6IiIsJz48c3BhbiB1bnNlbGVjdGFibGU9Im9uIj4nLGUudGV4dCwiPC9zcGFuPjwvYT48L2Rpdj4iLCc8dWwgY2xhc3M9IngtdHJlZS1ub2RlLWN0IiBzdHlsZT0iZGlzcGxheTpub25lOyI+PC91bD4nLCI8L2xpPiJdLmpvaW4oIiIpO2lmKGwhPT10cnVlJiZlLm5leHRTaWJsaW5nJiYoYj1lLm5leHRTaWJsaW5nLnVpLmdldEVsKCkpKXt0aGlzLndyYXA9RXh0LkRvbUhlbHBlci5pbnNlcnRIdG1sKCJiZWZvcmVCZWdpbiIsYixkKX1lbHNle3RoaXMud3JhcD1FeHQuRG9tSGVscGVyLmluc2VydEh0bWwoImJlZm9yZUVuZCIsaixkKX10aGlzLmVsTm9kZT10aGlzLndyYXAuY2hpbGROb2Rlc1swXTt0aGlzLmN0Tm9kZT10aGlzLndyYXAuY2hpbGROb2Rlc1sxXTt2YXIgaT10aGlzLmVsTm9kZS5jaGlsZE5vZGVzO3RoaXMuaW5kZW50Tm9kZT1pWzBdO3RoaXMuZWNOb2RlPWlbMV07dGhpcy5pY29uTm9kZT1pWzJdO3ZhciBoPTM7aWYoZyl7dGhpcy5jaGVja2JveD1pWzNdO3RoaXMuY2hlY2tib3guZGVmYXVsdENoZWNrZWQ9dGhpcy5jaGVja2JveC5jaGVja2VkO2grK310aGlzLmFuY2hvcj1pW2hdO3RoaXMudGV4dE5vZGU9aVtoXS5maXJzdENoaWxkfSxnZXRIcmVmOmZ1bmN0aW9uKGEpe3JldHVybiBFeHQuaXNFbXB0eShhKT8oRXh0LmlzR2Vja28/IiI6IiMiKTphfSxnZXRBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hbmNob3J9LGdldFRleHRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRleHROb2RlfSxnZXRJY29uRWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pY29uTm9kZX0saXNDaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hlY2tib3g/dGhpcy5jaGVja2JveC5jaGVja2VkOmZhbHNlfSx1cGRhdGVFeHBhbmRJY29uOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dmFyIGc9dGhpcy5ub2RlLGQsYyxhPWcuaXNMYXN0KCk/IngtdHJlZS1lbGJvdy1lbmQiOiJ4LXRyZWUtZWxib3ciLGU9Zy5oYXNDaGlsZE5vZGVzKCk7aWYoZXx8Zy5hdHRyaWJ1dGVzLmV4cGFuZGFibGUpe2lmKGcuZXhwYW5kZWQpe2ErPSItbWludXMiO2Q9IngtdHJlZS1ub2RlLWNvbGxhcHNlZCI7Yz0ieC10cmVlLW5vZGUtZXhwYW5kZWQifWVsc2V7YSs9Ii1wbHVzIjtkPSJ4LXRyZWUtbm9kZS1leHBhbmRlZCI7Yz0ieC10cmVlLW5vZGUtY29sbGFwc2VkIn1pZih0aGlzLndhc0xlYWYpe3RoaXMucmVtb3ZlQ2xhc3MoIngtdHJlZS1ub2RlLWxlYWYiKTt0aGlzLndhc0xlYWY9ZmFsc2V9aWYodGhpcy5jMSE9ZHx8dGhpcy5jMiE9Yyl7RXh0LmZseSh0aGlzLmVsTm9kZSkucmVwbGFjZUNsYXNzKGQsYyk7dGhpcy5jMT1kO3RoaXMuYzI9Y319ZWxzZXtpZighdGhpcy53YXNMZWFmKXtFeHQuZmx5KHRoaXMuZWxOb2RlKS5yZXBsYWNlQ2xhc3MoIngtdHJlZS1ub2RlLWV4cGFuZGVkIiwieC10cmVlLW5vZGUtY29sbGFwc2VkIik7ZGVsZXRlIHRoaXMuYzE7ZGVsZXRlIHRoaXMuYzI7dGhpcy53YXNMZWFmPXRydWV9fXZhciBiPSJ4LXRyZWUtZWMtaWNvbiAiK2E7aWYodGhpcy5lY2MhPWIpe3RoaXMuZWNOb2RlLmNsYXNzTmFtZT1iO3RoaXMuZWNjPWJ9fX0sb25JZENoYW5nZTpmdW5jdGlvbihhKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmVsTm9kZS5zZXRBdHRyaWJ1dGUoImV4dDp0cmVlLW5vZGUtaWQiLGEpfX0sZ2V0Q2hpbGRJbmRlbnQ6ZnVuY3Rpb24oKXtpZighdGhpcy5jaGlsZEluZGVudCl7dmFyIGE9W10sYj10aGlzLm5vZGU7d2hpbGUoYil7aWYoIWIuaXNSb290fHwoYi5pc1Jvb3QmJmIub3duZXJUcmVlLnJvb3RWaXNpYmxlKSl7aWYoIWIuaXNMYXN0KCkpe2EudW5zaGlmdCgnPGltZyBhbHQ9IiIgc3JjPSInK3RoaXMuZW1wdHlJY29uKyciIGNsYXNzPSJ4LXRyZWUtZWxib3ctbGluZSIgLz4nKX1lbHNle2EudW5zaGlmdCgnPGltZyBhbHQ9IiIgc3JjPSInK3RoaXMuZW1wdHlJY29uKyciIGNsYXNzPSJ4LXRyZWUtaWNvbiIgLz4nKX19Yj1iLnBhcmVudE5vZGV9dGhpcy5jaGlsZEluZGVudD1hLmpvaW4oIiIpfXJldHVybiB0aGlzLmNoaWxkSW5kZW50fSxyZW5kZXJJbmRlbnQ6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt2YXIgYT0iIixiPXRoaXMubm9kZS5wYXJlbnROb2RlO2lmKGIpe2E9Yi51aS5nZXRDaGlsZEluZGVudCgpfWlmKHRoaXMuaW5kZW50TWFya3VwIT1hKXt0aGlzLmluZGVudE5vZGUuaW5uZXJIVE1MPWE7dGhpcy5pbmRlbnRNYXJrdXA9YX10aGlzLnVwZGF0ZUV4cGFuZEljb24oKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmVsTm9kZSl7RXh0LmRkLlJlZ2lzdHJ5LnVucmVnaXN0ZXIodGhpcy5lbE5vZGUuaWQpfUV4dC5lYWNoKFsidGV4dG5vZGUiLCJhbmNob3IiLCJjaGVja2JveCIsImluZGVudE5vZGUiLCJlY05vZGUiLCJpY29uTm9kZSIsImVsTm9kZSIsImN0Tm9kZSIsIndyYXAiLCJob2xkZXIiXSxmdW5jdGlvbihhKXtpZih0aGlzW2FdKXtFeHQuZmx5KHRoaXNbYV0pLnJlbW92ZSgpO2RlbGV0ZSB0aGlzW2FdfX0sdGhpcyk7ZGVsZXRlIHRoaXMubm9kZX19KTtFeHQudHJlZS5Sb290VHJlZU5vZGVVST1FeHQuZXh0ZW5kKEV4dC50cmVlLlRyZWVOb2RlVUkse3JlbmRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLnJlbmRlcmVkKXt2YXIgYT10aGlzLm5vZGUub3duZXJUcmVlLmlubmVyQ3QuZG9tO3RoaXMubm9kZS5leHBhbmRlZD10cnVlO2EuaW5uZXJIVE1MPSc8ZGl2IGNsYXNzPSJ4LXRyZWUtcm9vdC1ub2RlIj48L2Rpdj4nO3RoaXMud3JhcD10aGlzLmN0Tm9kZT1hLmZpcnN0Q2hpbGR9fSxjb2xsYXBzZTpFeHQuZW1wdHlGbixleHBhbmQ6RXh0LmVtcHR5Rm59KTtFeHQudHJlZS5UcmVlTG9hZGVyPWZ1bmN0aW9uKGEpe3RoaXMuYmFzZVBhcmFtcz17fTtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLmFkZEV2ZW50cygiYmVmb3JlbG9hZCIsImxvYWQiLCJsb2FkZXhjZXB0aW9uIik7RXh0LnRyZWUuVHJlZUxvYWRlci5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7aWYoRXh0LmlzU3RyaW5nKHRoaXMucGFyYW1PcmRlcikpe3RoaXMucGFyYW1PcmRlcj10aGlzLnBhcmFtT3JkZXIuc3BsaXQoL1tccyx8XS8pfX07RXh0LmV4dGVuZChFeHQudHJlZS5UcmVlTG9hZGVyLEV4dC51dGlsLk9ic2VydmFibGUse3VpUHJvdmlkZXJzOnt9LGNsZWFyT25Mb2FkOnRydWUscGFyYW1PcmRlcjp1bmRlZmluZWQscGFyYW1zQXNIYXNoOmZhbHNlLG5vZGVQYXJhbWV0ZXI6Im5vZGUiLGRpcmVjdEZuOnVuZGVmaW5lZCxsb2FkOmZ1bmN0aW9uKGIsYyxhKXtpZih0aGlzLmNsZWFyT25Mb2FkKXt3aGlsZShiLmZpcnN0Q2hpbGQpe2IucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKX19aWYodGhpcy5kb1ByZWxvYWQoYikpe3RoaXMucnVuQ2FsbGJhY2soYyxhfHxiLFtiXSl9ZWxzZXtpZih0aGlzLmRpcmVjdEZufHx0aGlzLmRhdGFVcmx8fHRoaXMudXJsKXt0aGlzLnJlcXVlc3REYXRhKGIsYyxhfHxiKX19fSxkb1ByZWxvYWQ6ZnVuY3Rpb24oZCl7aWYoZC5hdHRyaWJ1dGVzLmNoaWxkcmVuKXtpZihkLmNoaWxkTm9kZXMubGVuZ3RoPDEpe3ZhciBjPWQuYXR0cmlidXRlcy5jaGlsZHJlbjtkLmJlZ2luVXBkYXRlKCk7Zm9yKHZhciBiPTAsYT1jLmxlbmd0aDtiPGE7YisrKXt2YXIgZT1kLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlTm9kZShjW2JdKSk7aWYodGhpcy5wcmVsb2FkQ2hpbGRyZW4pe3RoaXMuZG9QcmVsb2FkKGUpfX1kLmVuZFVwZGF0ZSgpfXJldHVybiB0cnVlfXJldHVybiBmYWxzZX0sZ2V0UGFyYW1zOmZ1bmN0aW9uKGcpe3ZhciBlPUV4dC5hcHBseSh7fSx0aGlzLmJhc2VQYXJhbXMpLGg9dGhpcy5ub2RlUGFyYW1ldGVyLGI9dGhpcy5wYXJhbU9yZGVyO2gmJihlW2hdPWcuaWQpO2lmKHRoaXMuZGlyZWN0Rm4pe3ZhciBjPVtnLmlkXTtpZihiKXtpZihoJiZiLmluZGV4T2YoaCk+LTEpe2M9W119Zm9yKHZhciBkPTAsYT1iLmxlbmd0aDtkPGE7ZCsrKXtjLnB1c2goZVtiW2RdXSl9fWVsc2V7aWYodGhpcy5wYXJhbXNBc0hhc2gpe2M9W2VdfX1yZXR1cm4gY31lbHNle3JldHVybiBlfX0scmVxdWVzdERhdGE6ZnVuY3Rpb24oYyxkLGIpe2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVsb2FkIix0aGlzLGMsZCkhPT1mYWxzZSl7aWYodGhpcy5kaXJlY3RGbil7dmFyIGE9dGhpcy5nZXRQYXJhbXMoYyk7YS5wdXNoKHRoaXMucHJvY2Vzc0RpcmVjdFJlc3BvbnNlLmNyZWF0ZURlbGVnYXRlKHRoaXMsW3tjYWxsYmFjazpkLG5vZGU6YyxzY29wZTpifV0sdHJ1ZSkpO3RoaXMuZGlyZWN0Rm4uYXBwbHkod2luZG93LGEpfWVsc2V7dGhpcy50cmFuc0lkPUV4dC5BamF4LnJlcXVlc3Qoe21ldGhvZDp0aGlzLnJlcXVlc3RNZXRob2QsdXJsOnRoaXMuZGF0YVVybHx8dGhpcy51cmwsc3VjY2Vzczp0aGlzLmhhbmRsZVJlc3BvbnNlLGZhaWx1cmU6dGhpcy5oYW5kbGVGYWlsdXJlLHNjb3BlOnRoaXMsYXJndW1lbnQ6e2NhbGxiYWNrOmQsbm9kZTpjLHNjb3BlOmJ9LHBhcmFtczp0aGlzLmdldFBhcmFtcyhjKX0pfX1lbHNle3RoaXMucnVuQ2FsbGJhY2soZCxifHxjLFtdKX19LHByb2Nlc3NEaXJlY3RSZXNwb25zZTpmdW5jdGlvbihhLGIsYyl7aWYoYi5zdGF0dXMpe3RoaXMuaGFuZGxlUmVzcG9uc2Uoe3Jlc3BvbnNlRGF0YTpFeHQuaXNBcnJheShhKT9hOm51bGwscmVzcG9uc2VUZXh0OmEsYXJndW1lbnQ6Y30pfWVsc2V7dGhpcy5oYW5kbGVGYWlsdXJlKHthcmd1bWVudDpjfSl9fSxydW5DYWxsYmFjazpmdW5jdGlvbihhLGMsYil7aWYoRXh0LmlzRnVuY3Rpb24oYSkpe2EuYXBwbHkoYyxiKX19LGlzTG9hZGluZzpmdW5jdGlvbigpe3JldHVybiAhIXRoaXMudHJhbnNJZH0sYWJvcnQ6ZnVuY3Rpb24oKXtpZih0aGlzLmlzTG9hZGluZygpKXtFeHQuQWpheC5hYm9ydCh0aGlzLnRyYW5zSWQpfX0sY3JlYXRlTm9kZTpmdW5jdGlvbihhdHRyKXtpZih0aGlzLmJhc2VBdHRycyl7RXh0LmFwcGx5SWYoYXR0cix0aGlzLmJhc2VBdHRycyl9aWYodGhpcy5hcHBseUxvYWRlciE9PWZhbHNlJiYhYXR0ci5sb2FkZXIpe2F0dHIubG9hZGVyPXRoaXN9aWYoRXh0LmlzU3RyaW5nKGF0dHIudWlQcm92aWRlcikpe2F0dHIudWlQcm92aWRlcj10aGlzLnVpUHJvdmlkZXJzW2F0dHIudWlQcm92aWRlcl18fGV2YWwoYXR0ci51aVByb3ZpZGVyKX1pZihhdHRyLm5vZGVUeXBlKXtyZXR1cm4gbmV3IEV4dC50cmVlLlRyZWVQYW5lbC5ub2RlVHlwZXNbYXR0ci5ub2RlVHlwZV0oYXR0cil9ZWxzZXtyZXR1cm4gYXR0ci5sZWFmP25ldyBFeHQudHJlZS5UcmVlTm9kZShhdHRyKTpuZXcgRXh0LnRyZWUuQXN5bmNUcmVlTm9kZShhdHRyKX19LHByb2Nlc3NSZXNwb25zZTpmdW5jdGlvbihkLGMsayxsKXt2YXIgbT1kLnJlc3BvbnNlVGV4dDt0cnl7dmFyIGE9ZC5yZXNwb25zZURhdGF8fEV4dC5kZWNvZGUobSk7Yy5iZWdpblVwZGF0ZSgpO2Zvcih2YXIgZz0wLGg9YS5sZW5ndGg7ZzxoO2crKyl7dmFyIGI9dGhpcy5jcmVhdGVOb2RlKGFbZ10pO2lmKGIpe2MuYXBwZW5kQ2hpbGQoYil9fWMuZW5kVXBkYXRlKCk7dGhpcy5ydW5DYWxsYmFjayhrLGx8fGMsW2NdKX1jYXRjaChqKXt0aGlzLmhhbmRsZUZhaWx1cmUoZCl9fSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihjKXt0aGlzLnRyYW5zSWQ9ZmFsc2U7dmFyIGI9Yy5hcmd1bWVudDt0aGlzLnByb2Nlc3NSZXNwb25zZShjLGIubm9kZSxiLmNhbGxiYWNrLGIuc2NvcGUpO3RoaXMuZmlyZUV2ZW50KCJsb2FkIix0aGlzLGIubm9kZSxjKX0saGFuZGxlRmFpbHVyZTpmdW5jdGlvbihjKXt0aGlzLnRyYW5zSWQ9ZmFsc2U7dmFyIGI9Yy5hcmd1bWVudDt0aGlzLmZpcmVFdmVudCgibG9hZGV4Y2VwdGlvbiIsdGhpcyxiLm5vZGUsYyk7dGhpcy5ydW5DYWxsYmFjayhiLmNhbGxiYWNrLGIuc2NvcGV8fGIubm9kZSxbYi5ub2RlXSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmFib3J0KCk7dGhpcy5wdXJnZUxpc3RlbmVycygpfX0pO0V4dC50cmVlLlRyZWVGaWx0ZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnRyZWU9YTt0aGlzLmZpbHRlcmVkPXt9O0V4dC5hcHBseSh0aGlzLGIpfTtFeHQudHJlZS5UcmVlRmlsdGVyLnByb3RvdHlwZT17Y2xlYXJCbGFuazpmYWxzZSxyZXZlcnNlOmZhbHNlLGF1dG9DbGVhcjpmYWxzZSxyZW1vdmU6ZmFsc2UsZmlsdGVyOmZ1bmN0aW9uKGQsYSxiKXthPWF8fCJ0ZXh0Ijt2YXIgYztpZih0eXBlb2YgZD09InN0cmluZyIpe3ZhciBlPWQubGVuZ3RoO2lmKGU9PTAmJnRoaXMuY2xlYXJCbGFuayl7dGhpcy5jbGVhcigpO3JldHVybn1kPWQudG9Mb3dlckNhc2UoKTtjPWZ1bmN0aW9uKGcpe3JldHVybiBnLmF0dHJpYnV0ZXNbYV0uc3Vic3RyKDAsZSkudG9Mb3dlckNhc2UoKT09ZH19ZWxzZXtpZihkLmV4ZWMpe2M9ZnVuY3Rpb24oZyl7cmV0dXJuIGQudGVzdChnLmF0dHJpYnV0ZXNbYV0pfX1lbHNle3Rocm93IklsbGVnYWwgZmlsdGVyIHR5cGUsIG11c3QgYmUgc3RyaW5nIG9yIHJlZ2V4In19dGhpcy5maWx0ZXJCeShjLG51bGwsYil9LGZpbHRlckJ5OmZ1bmN0aW9uKGQsYyxiKXtiPWJ8fHRoaXMudHJlZS5yb290O2lmKHRoaXMuYXV0b0NsZWFyKXt0aGlzLmNsZWFyKCl9dmFyIGE9dGhpcy5maWx0ZXJlZCxpPXRoaXMucmV2ZXJzZTt2YXIgZT1mdW5jdGlvbihrKXtpZihrPT1iKXtyZXR1cm4gdHJ1ZX1pZihhW2suaWRdKXtyZXR1cm4gZmFsc2V9dmFyIGo9ZC5jYWxsKGN8fGssayk7aWYoIWp8fGkpe2Fbay5pZF09aztrLnVpLmhpZGUoKTtyZXR1cm4gZmFsc2V9cmV0dXJuIHRydWV9O2IuY2FzY2FkZShlKTtpZih0aGlzLnJlbW92ZSl7Zm9yKHZhciBoIGluIGEpe2lmKHR5cGVvZiBoIT0iZnVuY3Rpb24iKXt2YXIgZz1hW2hdO2lmKGcmJmcucGFyZW50Tm9kZSl7Zy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGcpfX19fX0sY2xlYXI6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnRyZWU7dmFyIGE9dGhpcy5maWx0ZXJlZDtmb3IodmFyIGQgaW4gYSl7aWYodHlwZW9mIGQhPSJmdW5jdGlvbiIpe3ZhciBjPWFbZF07aWYoYyl7Yy51aS5zaG93KCl9fX10aGlzLmZpbHRlcmVkPXt9fX07RXh0LnRyZWUuVHJlZVNvcnRlcj1FeHQuZXh0ZW5kKE9iamVjdCx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYSxjKXtFeHQuYXBwbHkodGhpcyxjKTthLm9uKHtzY29wZTp0aGlzLGJlZm9yZWNoaWxkcmVucmVuZGVyZWQ6dGhpcy5kb1NvcnQsYXBwZW5kOnRoaXMudXBkYXRlU29ydCxpbnNlcnQ6dGhpcy51cGRhdGVTb3J0LHRleHRjaGFuZ2U6dGhpcy51cGRhdGVTb3J0UGFyZW50fSk7dmFyIGU9dGhpcy5kaXImJnRoaXMuZGlyLnRvTG93ZXJDYXNlKCk9PSJkZXNjIixpPXRoaXMucHJvcGVydHl8fCJ0ZXh0IixkPXRoaXMuc29ydFR5cGUsaD10aGlzLmZvbGRlclNvcnQsYj10aGlzLmNhc2VTZW5zaXRpdmU9PT10cnVlLGc9dGhpcy5sZWFmQXR0cnx8ImxlYWYiO2lmKEV4dC5pc1N0cmluZyhkKSl7ZD1FeHQuZGF0YS5Tb3J0VHlwZXNbZF19dGhpcy5zb3J0Rm49ZnVuY3Rpb24obyxtKXt2YXIgaz1vLmF0dHJpYnV0ZXMsaj1tLmF0dHJpYnV0ZXM7aWYoaCl7aWYoa1tnXSYmIWpbZ10pe3JldHVybiAxfWlmKCFrW2ddJiZqW2ddKXtyZXR1cm4gLTF9fXZhciBuPWtbaV0sbD1qW2ldLHE9ZD9kKG4pOihiP246bi50b1VwcGVyQ2FzZSgpKSxwPWQ/ZChsKTooYj9sOmwudG9VcHBlckNhc2UoKSk7aWYocTxwKXtyZXR1cm4gZT8xOi0xfWVsc2V7aWYocT5wKXtyZXR1cm4gZT8tMToxfX1yZXR1cm4gMH19LGRvU29ydDpmdW5jdGlvbihhKXthLnNvcnQodGhpcy5zb3J0Rm4pfSx1cGRhdGVTb3J0OmZ1bmN0aW9uKGEsYil7aWYoYi5jaGlsZHJlblJlbmRlcmVkKXt0aGlzLmRvU29ydC5kZWZlcigxLHRoaXMsW2JdKX19LHVwZGF0ZVNvcnRQYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2lmKGImJmIuY2hpbGRyZW5SZW5kZXJlZCl7dGhpcy5kb1NvcnQuZGVmZXIoMSx0aGlzLFtiXSl9fX0pO2lmKEV4dC5kZC5Ecm9wWm9uZSl7RXh0LnRyZWUuVHJlZURyb3Bab25lPWZ1bmN0aW9uKGEsYil7dGhpcy5hbGxvd1BhcmVudEluc2VydD1iLmFsbG93UGFyZW50SW5zZXJ0fHxmYWxzZTt0aGlzLmFsbG93Q29udGFpbmVyRHJvcD1iLmFsbG93Q29udGFpbmVyRHJvcHx8ZmFsc2U7dGhpcy5hcHBlbmRPbmx5PWIuYXBwZW5kT25seXx8ZmFsc2U7RXh0LnRyZWUuVHJlZURyb3Bab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEuZ2V0VHJlZUVsKCksYik7dGhpcy50cmVlPWE7dGhpcy5kcmFnT3ZlckRhdGE9e307dGhpcy5sYXN0SW5zZXJ0Q2xhc3M9IngtdHJlZS1uby1zdGF0dXMifTtFeHQuZXh0ZW5kKEV4dC50cmVlLlRyZWVEcm9wWm9uZSxFeHQuZGQuRHJvcFpvbmUse2RkR3JvdXA6IlRyZWVERCIsZXhwYW5kRGVsYXk6MTAwMCxleHBhbmROb2RlOmZ1bmN0aW9uKGEpe2lmKGEuaGFzQ2hpbGROb2RlcygpJiYhYS5pc0V4cGFuZGVkKCkpe2EuZXhwYW5kKGZhbHNlLG51bGwsdGhpcy50cmlnZ2VyQ2FjaGVSZWZyZXNoLmNyZWF0ZURlbGVnYXRlKHRoaXMpKX19LHF1ZXVlRXhwYW5kOmZ1bmN0aW9uKGEpe3RoaXMuZXhwYW5kUHJvY0lkPXRoaXMuZXhwYW5kTm9kZS5kZWZlcih0aGlzLmV4cGFuZERlbGF5LHRoaXMsW2FdKX0sY2FuY2VsRXhwYW5kOmZ1bmN0aW9uKCl7aWYodGhpcy5leHBhbmRQcm9jSWQpe2NsZWFyVGltZW91dCh0aGlzLmV4cGFuZFByb2NJZCk7dGhpcy5leHBhbmRQcm9jSWQ9ZmFsc2V9fSxpc1ZhbGlkRHJvcFBvaW50OmZ1bmN0aW9uKGEsayxpLGQsYyl7aWYoIWF8fCFjKXtyZXR1cm4gZmFsc2V9dmFyIGc9YS5ub2RlO3ZhciBoPWMubm9kZTtpZighKGcmJmcuaXNUYXJnZXQmJmspKXtyZXR1cm4gZmFsc2V9aWYoaz09ImFwcGVuZCImJmcuYWxsb3dDaGlsZHJlbj09PWZhbHNlKXtyZXR1cm4gZmFsc2V9aWYoKGs9PSJhYm92ZSJ8fGs9PSJiZWxvdyIpJiYoZy5wYXJlbnROb2RlJiZnLnBhcmVudE5vZGUuYWxsb3dDaGlsZHJlbj09PWZhbHNlKSl7cmV0dXJuIGZhbHNlfWlmKGgmJihnPT1ofHxoLmNvbnRhaW5zKGcpKSl7cmV0dXJuIGZhbHNlfXZhciBiPXRoaXMuZHJhZ092ZXJEYXRhO2IudHJlZT10aGlzLnRyZWU7Yi50YXJnZXQ9ZztiLmRhdGE9YztiLnBvaW50PWs7Yi5zb3VyY2U9aTtiLnJhd0V2ZW50PWQ7Yi5kcm9wTm9kZT1oO2IuY2FuY2VsPWZhbHNlO3ZhciBqPXRoaXMudHJlZS5maXJlRXZlbnQoIm5vZGVkcmFnb3ZlciIsYik7cmV0dXJuIGIuY2FuY2VsPT09ZmFsc2UmJmohPT1mYWxzZX0sZ2V0RHJvcFBvaW50OmZ1bmN0aW9uKGgsZyxsKXt2YXIgbT1nLm5vZGU7aWYobS5pc1Jvb3Qpe3JldHVybiBtLmFsbG93Q2hpbGRyZW4hPT1mYWxzZT8iYXBwZW5kIjpmYWxzZX12YXIgYz1nLmRkZWw7dmFyIG89RXh0LmxpYi5Eb20uZ2V0WShjKSxqPW8rYy5vZmZzZXRIZWlnaHQ7dmFyIGk9RXh0LmxpYi5FdmVudC5nZXRQYWdlWShoKTt2YXIgaz1tLmFsbG93Q2hpbGRyZW49PT1mYWxzZXx8bS5pc0xlYWYoKTtpZih0aGlzLmFwcGVuZE9ubHl8fG0ucGFyZW50Tm9kZS5hbGxvd0NoaWxkcmVuPT09ZmFsc2Upe3JldHVybiBrP2ZhbHNlOiJhcHBlbmQifXZhciBkPWZhbHNlO2lmKCF0aGlzLmFsbG93UGFyZW50SW5zZXJ0KXtkPW0uaGFzQ2hpbGROb2RlcygpJiZtLmlzRXhwYW5kZWQoKX12YXIgYT0oai1vKS8oaz8yOjMpO2lmKGk+PW8mJmk8KG8rYSkpe3JldHVybiJhYm92ZSJ9ZWxzZXtpZighZCYmKGt8fGk+PWotYSYmaTw9aikpe3JldHVybiJiZWxvdyJ9ZWxzZXtyZXR1cm4iYXBwZW5kIn19fSxvbk5vZGVFbnRlcjpmdW5jdGlvbihkLGEsYyxiKXt0aGlzLmNhbmNlbEV4cGFuZCgpfSxvbkNvbnRhaW5lck92ZXI6ZnVuY3Rpb24oYSxjLGIpe2lmKHRoaXMuYWxsb3dDb250YWluZXJEcm9wJiZ0aGlzLmlzVmFsaWREcm9wUG9pbnQoe2RkZWw6dGhpcy50cmVlLmdldFJvb3ROb2RlKCkudWkuZWxOb2RlLG5vZGU6dGhpcy50cmVlLmdldFJvb3ROb2RlKCl9LCJhcHBlbmQiLGEsYyxiKSl7cmV0dXJuIHRoaXMuZHJvcEFsbG93ZWR9cmV0dXJuIHRoaXMuZHJvcE5vdEFsbG93ZWR9LG9uTm9kZU92ZXI6ZnVuY3Rpb24oYixpLGgsZyl7dmFyIGs9dGhpcy5nZXREcm9wUG9pbnQoaCxiLGkpO3ZhciBjPWIubm9kZTtpZighdGhpcy5leHBhbmRQcm9jSWQmJms9PSJhcHBlbmQiJiZjLmhhc0NoaWxkTm9kZXMoKSYmIWIubm9kZS5pc0V4cGFuZGVkKCkpe3RoaXMucXVldWVFeHBhbmQoYyl9ZWxzZXtpZihrIT0iYXBwZW5kIil7dGhpcy5jYW5jZWxFeHBhbmQoKX19dmFyIGQ9dGhpcy5kcm9wTm90QWxsb3dlZDtpZih0aGlzLmlzVmFsaWREcm9wUG9pbnQoYixrLGksaCxnKSl7aWYoayl7dmFyIGE9Yi5kZGVsO3ZhciBqO2lmKGs9PSJhYm92ZSIpe2Q9Yi5ub2RlLmlzRmlyc3QoKT8ieC10cmVlLWRyb3Atb2stYWJvdmUiOiJ4LXRyZWUtZHJvcC1vay1iZXR3ZWVuIjtqPSJ4LXRyZWUtZHJhZy1pbnNlcnQtYWJvdmUifWVsc2V7aWYoaz09ImJlbG93Iil7ZD1iLm5vZGUuaXNMYXN0KCk/IngtdHJlZS1kcm9wLW9rLWJlbG93IjoieC10cmVlLWRyb3Atb2stYmV0d2VlbiI7aj0ieC10cmVlLWRyYWctaW5zZXJ0LWJlbG93In1lbHNle2Q9IngtdHJlZS1kcm9wLW9rLWFwcGVuZCI7aj0ieC10cmVlLWRyYWctYXBwZW5kIn19aWYodGhpcy5sYXN0SW5zZXJ0Q2xhc3MhPWope0V4dC5mbHkoYSkucmVwbGFjZUNsYXNzKHRoaXMubGFzdEluc2VydENsYXNzLGopO3RoaXMubGFzdEluc2VydENsYXNzPWp9fX1yZXR1cm4gZH0sb25Ob2RlT3V0OmZ1bmN0aW9uKGQsYSxjLGIpe3RoaXMuY2FuY2VsRXhwYW5kKCk7dGhpcy5yZW1vdmVEcm9wSW5kaWNhdG9ycyhkKX0sb25Ob2RlRHJvcDpmdW5jdGlvbihpLGIsaCxkKXt2YXIgYT10aGlzLmdldERyb3BQb2ludChoLGksYik7dmFyIGc9aS5ub2RlO2cudWkuc3RhcnREcm9wKCk7aWYoIXRoaXMuaXNWYWxpZERyb3BQb2ludChpLGEsYixoLGQpKXtnLnVpLmVuZERyb3AoKTtyZXR1cm4gZmFsc2V9dmFyIGM9ZC5ub2RlfHwoYi5nZXRUcmVlTm9kZT9iLmdldFRyZWVOb2RlKGQsZyxhLGgpOm51bGwpO3JldHVybiB0aGlzLnByb2Nlc3NEcm9wKGcsZCxhLGIsaCxjKX0sb25Db250YWluZXJEcm9wOmZ1bmN0aW9uKGEsZyxjKXtpZih0aGlzLmFsbG93Q29udGFpbmVyRHJvcCYmdGhpcy5pc1ZhbGlkRHJvcFBvaW50KHtkZGVsOnRoaXMudHJlZS5nZXRSb290Tm9kZSgpLnVpLmVsTm9kZSxub2RlOnRoaXMudHJlZS5nZXRSb290Tm9kZSgpfSwiYXBwZW5kIixhLGcsYykpe3ZhciBkPXRoaXMudHJlZS5nZXRSb290Tm9kZSgpO2QudWkuc3RhcnREcm9wKCk7dmFyIGI9Yy5ub2RlfHwoYS5nZXRUcmVlTm9kZT9hLmdldFRyZWVOb2RlKGMsZCwiYXBwZW5kIixnKTpudWxsKTtyZXR1cm4gdGhpcy5wcm9jZXNzRHJvcChkLGMsImFwcGVuZCIsYSxnLGIpfXJldHVybiBmYWxzZX0scHJvY2Vzc0Ryb3A6ZnVuY3Rpb24oaixoLGIsYSxpLGQpe3ZhciBnPXt0cmVlOnRoaXMudHJlZSx0YXJnZXQ6aixkYXRhOmgscG9pbnQ6Yixzb3VyY2U6YSxyYXdFdmVudDppLGRyb3BOb2RlOmQsY2FuY2VsOiFkLGRyb3BTdGF0dXM6ZmFsc2V9O3ZhciBjPXRoaXMudHJlZS5maXJlRXZlbnQoImJlZm9yZW5vZGVkcm9wIixnKTtpZihjPT09ZmFsc2V8fGcuY2FuY2VsPT09dHJ1ZXx8IWcuZHJvcE5vZGUpe2oudWkuZW5kRHJvcCgpO3JldHVybiBnLmRyb3BTdGF0dXN9aj1nLnRhcmdldDtpZihiPT0iYXBwZW5kIiYmIWouaXNFeHBhbmRlZCgpKXtqLmV4cGFuZChmYWxzZSxudWxsLGZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZURyb3AoZyl9LmNyZWF0ZURlbGVnYXRlKHRoaXMpKX1lbHNle3RoaXMuY29tcGxldGVEcm9wKGcpfXJldHVybiB0cnVlfSxjb21wbGV0ZURyb3A6ZnVuY3Rpb24oaCl7dmFyIGQ9aC5kcm9wTm9kZSxlPWgucG9pbnQsYz1oLnRhcmdldDtpZighRXh0LmlzQXJyYXkoZCkpe2Q9W2RdfXZhciBnO2Zvcih2YXIgYj0wLGE9ZC5sZW5ndGg7YjxhO2IrKyl7Zz1kW2JdO2lmKGU9PSJhYm92ZSIpe2MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZyxjKX1lbHNle2lmKGU9PSJiZWxvdyIpe2MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZyxjLm5leHRTaWJsaW5nKX1lbHNle2MuYXBwZW5kQ2hpbGQoZyl9fX1nLnVpLmZvY3VzKCk7aWYoRXh0LmVuYWJsZUZ4JiZ0aGlzLnRyZWUuaGxEcm9wKXtnLnVpLmhpZ2hsaWdodCgpfWMudWkuZW5kRHJvcCgpO3RoaXMudHJlZS5maXJlRXZlbnQoIm5vZGVkcm9wIixoKX0sYWZ0ZXJOb2RlTW92ZWQ6ZnVuY3Rpb24oYSxjLGcsZCxiKXtpZihFeHQuZW5hYmxlRngmJnRoaXMudHJlZS5obERyb3Ape2IudWkuZm9jdXMoKTtiLnVpLmhpZ2hsaWdodCgpfXRoaXMudHJlZS5maXJlRXZlbnQoIm5vZGVkcm9wIix0aGlzLnRyZWUsZCxjLGEsZyl9LGdldFRyZWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmVlfSxyZW1vdmVEcm9wSW5kaWNhdG9yczpmdW5jdGlvbihiKXtpZihiJiZiLmRkZWwpe3ZhciBhPWIuZGRlbDtFeHQuZmx5KGEpLnJlbW92ZUNsYXNzKFsieC10cmVlLWRyYWctaW5zZXJ0LWFib3ZlIiwieC10cmVlLWRyYWctaW5zZXJ0LWJlbG93IiwieC10cmVlLWRyYWctYXBwZW5kIl0pO3RoaXMubGFzdEluc2VydENsYXNzPSJfbm9jbGFzcyJ9fSxiZWZvcmVEcmFnRHJvcDpmdW5jdGlvbihiLGEsYyl7dGhpcy5jYW5jZWxFeHBhbmQoKTtyZXR1cm4gdHJ1ZX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oYSl7aWYoYSYmRXh0LmVuYWJsZUZ4KXthLm5vZGUudWkuaGlnaGxpZ2h0KCl9dGhpcy5oaWRlUHJveHkoKX19KX1pZihFeHQuZGQuRHJhZ1pvbmUpe0V4dC50cmVlLlRyZWVEcmFnWm9uZT1mdW5jdGlvbihhLGIpe0V4dC50cmVlLlRyZWVEcmFnWm9uZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhLmlubmVyQ3QsYik7dGhpcy50cmVlPWF9O0V4dC5leHRlbmQoRXh0LnRyZWUuVHJlZURyYWdab25lLEV4dC5kZC5EcmFnWm9uZSx7ZGRHcm91cDoiVHJlZUREIixvbkJlZm9yZURyYWc6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLm5vZGU7cmV0dXJuIGMmJmMuZHJhZ2dhYmxlJiYhYy5kaXNhYmxlZH0sb25Jbml0RHJhZzpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmRyYWdEYXRhO3RoaXMudHJlZS5nZXRTZWxlY3Rpb25Nb2RlbCgpLnNlbGVjdChhLm5vZGUpO3RoaXMudHJlZS5ldmVudE1vZGVsLmRpc2FibGUoKTt0aGlzLnByb3h5LnVwZGF0ZSgiIik7YS5ub2RlLnVpLmFwcGVuZERER2hvc3QodGhpcy5wcm94eS5naG9zdC5kb20pO3RoaXMudHJlZS5maXJlRXZlbnQoInN0YXJ0ZHJhZyIsdGhpcy50cmVlLGEubm9kZSxiKX0sZ2V0UmVwYWlyWFk6ZnVuY3Rpb24oYixhKXtyZXR1cm4gYS5ub2RlLnVpLmdldEREUmVwYWlyWFkoKX0sb25FbmREcmFnOmZ1bmN0aW9uKGEsYil7dGhpcy50cmVlLmV2ZW50TW9kZWwuZW5hYmxlLmRlZmVyKDEwMCx0aGlzLnRyZWUuZXZlbnRNb2RlbCk7dGhpcy50cmVlLmZpcmVFdmVudCgiZW5kZHJhZyIsdGhpcy50cmVlLGEubm9kZSxiKX0sb25WYWxpZERyb3A6ZnVuY3Rpb24oYSxiLGMpe3RoaXMudHJlZS5maXJlRXZlbnQoImRyYWdkcm9wIix0aGlzLnRyZWUsdGhpcy5kcmFnRGF0YS5ub2RlLGEsYik7dGhpcy5oaWRlUHJveHkoKX0sYmVmb3JlSW52YWxpZERyb3A6ZnVuY3Rpb24oYSxjKXt2YXIgYj10aGlzLnRyZWUuZ2V0U2VsZWN0aW9uTW9kZWwoKTtiLmNsZWFyU2VsZWN0aW9ucygpO2Iuc2VsZWN0KHRoaXMuZHJhZ0RhdGEubm9kZSl9LGFmdGVyUmVwYWlyOmZ1bmN0aW9uKCl7aWYoRXh0LmVuYWJsZUZ4JiZ0aGlzLnRyZWUuaGxEcm9wKXtFeHQuRWxlbWVudC5mbHkodGhpcy5kcmFnRGF0YS5kZGVsKS5oaWdobGlnaHQodGhpcy5obENvbG9yfHwiYzNkYWY5Iil9dGhpcy5kcmFnZ2luZz1mYWxzZX19KX1FeHQudHJlZS5UcmVlRWRpdG9yPWZ1bmN0aW9uKGEsYyxiKXtjPWN8fHt9O3ZhciBkPWMuZXZlbnRzP2M6bmV3IEV4dC5mb3JtLlRleHRGaWVsZChjKTtFeHQudHJlZS5UcmVlRWRpdG9yLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGQsYik7dGhpcy50cmVlPWE7aWYoIWEucmVuZGVyZWQpe2Eub24oInJlbmRlciIsdGhpcy5pbml0RWRpdG9yLHRoaXMpfWVsc2V7dGhpcy5pbml0RWRpdG9yKGEpfX07RXh0LmV4dGVuZChFeHQudHJlZS5UcmVlRWRpdG9yLEV4dC5FZGl0b3Ise2FsaWdubWVudDoibC1sIixhdXRvU2l6ZTpmYWxzZSxoaWRlRWw6ZmFsc2UsY2xzOiJ4LXNtYWxsLWVkaXRvciB4LXRyZWUtZWRpdG9yIixzaGltOmZhbHNlLHNoYWRvdzoiZnJhbWUiLG1heFdpZHRoOjI1MCxlZGl0RGVsYXk6MzUwLGluaXRFZGl0b3I6ZnVuY3Rpb24oYSl7YS5vbih7c2NvcGU6dGhpcyxiZWZvcmVjbGljazp0aGlzLmJlZm9yZU5vZGVDbGljayxkYmxjbGljazp0aGlzLm9uTm9kZURibENsaWNrfSk7dGhpcy5vbih7c2NvcGU6dGhpcyxjb21wbGV0ZTp0aGlzLnVwZGF0ZU5vZGUsYmVmb3Jlc3RhcnRlZGl0OnRoaXMuZml0VG9UcmVlLHNwZWNpYWxrZXk6dGhpcy5vblNwZWNpYWxLZXl9KTt0aGlzLm9uKCJzdGFydGVkaXQiLHRoaXMuYmluZFNjcm9sbCx0aGlzLHtkZWxheToxMH0pfSxmaXRUb1RyZWU6ZnVuY3Rpb24oYixjKXt2YXIgZT10aGlzLnRyZWUuZ2V0VHJlZUVsKCkuZG9tLGQ9Yy5kb207aWYoZS5zY3JvbGxMZWZ0PmQub2Zmc2V0TGVmdCl7ZS5zY3JvbGxMZWZ0PWQub2Zmc2V0TGVmdH12YXIgYT1NYXRoLm1pbih0aGlzLm1heFdpZHRoLChlLmNsaWVudFdpZHRoPjIwP2UuY2xpZW50V2lkdGg6ZS5vZmZzZXRXaWR0aCktTWF0aC5tYXgoMCxkLm9mZnNldExlZnQtZS5zY3JvbGxMZWZ0KS01KTt0aGlzLnNldFNpemUoYSwiIil9LHRyaWdnZXJFZGl0OmZ1bmN0aW9uKGEsYyl7dGhpcy5jb21wbGV0ZUVkaXQoKTtpZihhLmF0dHJpYnV0ZXMuZWRpdGFibGUhPT1mYWxzZSl7dGhpcy5lZGl0Tm9kZT1hO2lmKHRoaXMudHJlZS5hdXRvU2Nyb2xsKXtFeHQuZmx5KGEudWkuZ2V0RWwoKSkuc2Nyb2xsSW50b1ZpZXcodGhpcy50cmVlLmJvZHkpfXZhciBiPWEudGV4dHx8IiI7aWYoIUV4dC5pc0dlY2tvJiZFeHQuaXNFbXB0eShhLnRleHQpKXthLnNldFRleHQoIiYjMTYwOyIpfXRoaXMuYXV0b0VkaXRUaW1lcj10aGlzLnN0YXJ0RWRpdC5kZWZlcih0aGlzLmVkaXREZWxheSx0aGlzLFthLnVpLnRleHROb2RlLGJdKTtyZXR1cm4gZmFsc2V9fSxiaW5kU2Nyb2xsOmZ1bmN0aW9uKCl7dGhpcy50cmVlLmdldFRyZWVFbCgpLm9uKCJzY3JvbGwiLHRoaXMuY2FuY2VsRWRpdCx0aGlzKX0sYmVmb3JlTm9kZUNsaWNrOmZ1bmN0aW9uKGEsYil7Y2xlYXJUaW1lb3V0KHRoaXMuYXV0b0VkaXRUaW1lcik7aWYodGhpcy50cmVlLmdldFNlbGVjdGlvbk1vZGVsKCkuaXNTZWxlY3RlZChhKSl7Yi5zdG9wRXZlbnQoKTtyZXR1cm4gdGhpcy50cmlnZ2VyRWRpdChhKX19LG9uTm9kZURibENsaWNrOmZ1bmN0aW9uKGEsYil7Y2xlYXJUaW1lb3V0KHRoaXMuYXV0b0VkaXRUaW1lcil9LHVwZGF0ZU5vZGU6ZnVuY3Rpb24oYSxiKXt0aGlzLnRyZWUuZ2V0VHJlZUVsKCkudW4oInNjcm9sbCIsdGhpcy5jYW5jZWxFZGl0LHRoaXMpO3RoaXMuZWRpdE5vZGUuc2V0VGV4dChiKX0sb25IaWRlOmZ1bmN0aW9uKCl7RXh0LnRyZWUuVHJlZUVkaXRvci5zdXBlcmNsYXNzLm9uSGlkZS5jYWxsKHRoaXMpO2lmKHRoaXMuZWRpdE5vZGUpe3RoaXMuZWRpdE5vZGUudWkuZm9jdXMuZGVmZXIoNTAsdGhpcy5lZGl0Tm9kZS51aSl9fSxvblNwZWNpYWxLZXk6ZnVuY3Rpb24oYyxiKXt2YXIgYT1iLmdldEtleSgpO2lmKGE9PWIuRVNDKXtiLnN0b3BFdmVudCgpO3RoaXMuY2FuY2VsRWRpdCgpfWVsc2V7aWYoYT09Yi5FTlRFUiYmIWIuaGFzTW9kaWZpZXIoKSl7Yi5zdG9wRXZlbnQoKTt0aGlzLmNvbXBsZXRlRWRpdCgpfX19LG9uRGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLmF1dG9FZGl0VGltZXIpO0V4dC50cmVlLlRyZWVFZGl0b3Iuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKTt2YXIgYT10aGlzLnRyZWU7YS51bigiYmVmb3JlY2xpY2siLHRoaXMuYmVmb3JlTm9kZUNsaWNrLHRoaXMpO2EudW4oImRibGNsaWNrIix0aGlzLm9uTm9kZURibENsaWNrLHRoaXMpfX0pOwovKiBTV0ZPYmplY3QgdjIuMiA8aHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL3N3Zm9iamVjdC8+IAogICAgaXMgcmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIDxodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocD4gCiovCnZhciBzd2ZvYmplY3Q9ZnVuY3Rpb24oKXt2YXIgRT0idW5kZWZpbmVkIixzPSJvYmplY3QiLFQ9IlNob2Nrd2F2ZSBGbGFzaCIsWD0iU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2giLHI9ImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoIixTPSJTV0ZPYmplY3RFeHBySW5zdCIseT0ib25yZWFkeXN0YXRlY2hhbmdlIixQPXdpbmRvdyxrPWRvY3VtZW50LHU9bmF2aWdhdG9yLFU9ZmFsc2UsVj1baV0scD1bXSxPPVtdLEo9W10sbSxSLEYsQyxLPWZhbHNlLGE9ZmFsc2UsbyxILG49dHJ1ZSxOPWZ1bmN0aW9uKCl7dmFyIGFiPXR5cGVvZiBrLmdldEVsZW1lbnRCeUlkIT1FJiZ0eXBlb2Ygay5nZXRFbGVtZW50c0J5VGFnTmFtZSE9RSYmdHlwZW9mIGsuY3JlYXRlRWxlbWVudCE9RSxhaT11LnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLFo9dS5wbGF0Zm9ybS50b0xvd2VyQ2FzZSgpLGFmPVo/KC93aW4vKS50ZXN0KFopOi93aW4vLnRlc3QoYWkpLGFkPVo/KC9tYWMvKS50ZXN0KFopOi9tYWMvLnRlc3QoYWkpLGFnPS93ZWJraXQvLnRlc3QoYWkpP3BhcnNlRmxvYXQoYWkucmVwbGFjZSgvXi4qd2Via2l0XC8oXGQrKFwuXGQrKT8pLiokLywiJDEiKSk6ZmFsc2UsWT0hKyJcdjEiLGFoPVswLDAsMF0sYWM9bnVsbDtpZih0eXBlb2YgdS5wbHVnaW5zIT1FJiZ0eXBlb2YgdS5wbHVnaW5zW1RdPT1zKXthYz11LnBsdWdpbnNbVF0uZGVzY3JpcHRpb247aWYoYWMmJiEodHlwZW9mIHUubWltZVR5cGVzIT1FJiZ1Lm1pbWVUeXBlc1tyXSYmIXUubWltZVR5cGVzW3JdLmVuYWJsZWRQbHVnaW4pKXtVPXRydWU7WT1mYWxzZTthYz1hYy5yZXBsYWNlKC9eLipccysoXFMrXHMrXFMrJCkvLCIkMSIpO2FoWzBdPXBhcnNlSW50KGFjLnJlcGxhY2UoL14oLiopXC4uKiQvLCIkMSIpLDEwKTthaFsxXT1wYXJzZUludChhYy5yZXBsYWNlKC9eLipcLiguKilccy4qJC8sIiQxIiksMTApO2FoWzJdPS9bYS16QS1aXS8udGVzdChhYyk/cGFyc2VJbnQoYWMucmVwbGFjZSgvXi4qW2EtekEtWl0rKC4qKSQvLCIkMSIpLDEwKTowfX1lbHNle2lmKHR5cGVvZiBQLkFjdGl2ZVhPYmplY3QhPUUpe3RyeXt2YXIgYWU9bmV3IEFjdGl2ZVhPYmplY3QoWCk7aWYoYWUpe2FjPWFlLkdldFZhcmlhYmxlKCIkdmVyc2lvbiIpO2lmKGFjKXtZPXRydWU7YWM9YWMuc3BsaXQoIiAiKVsxXS5zcGxpdCgiLCIpO2FoPVtwYXJzZUludChhY1swXSwxMCkscGFyc2VJbnQoYWNbMV0sMTApLHBhcnNlSW50KGFjWzJdLDEwKV19fX1jYXRjaChhYSl7fX19cmV0dXJue3czOmFiLHB2OmFoLHdrOmFnLGllOlksd2luOmFmLG1hYzphZH19KCksbD1mdW5jdGlvbigpe2lmKCFOLnczKXtyZXR1cm59aWYoKHR5cGVvZiBrLnJlYWR5U3RhdGUhPUUmJmsucmVhZHlTdGF0ZT09ImNvbXBsZXRlIil8fCh0eXBlb2Ygay5yZWFkeVN0YXRlPT1FJiYoay5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdfHxrLmJvZHkpKSl7ZygpfWlmKCFLKXtpZih0eXBlb2Ygay5hZGRFdmVudExpc3RlbmVyIT1FKXtrLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGcsZmFsc2UpfWlmKE4uaWUmJk4ud2luKXtrLmF0dGFjaEV2ZW50KHksZnVuY3Rpb24oKXtpZihrLnJlYWR5U3RhdGU9PSJjb21wbGV0ZSIpe2suZGV0YWNoRXZlbnQoeSxhcmd1bWVudHMuY2FsbGVlKTtnKCl9fSk7aWYoUD09dG9wKXsoZnVuY3Rpb24oKXtpZihLKXtyZXR1cm59dHJ5e2suZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsKCJsZWZ0Iil9Y2F0Y2goWSl7c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDApO3JldHVybn1nKCl9KSgpfX1pZihOLndrKXsoZnVuY3Rpb24oKXtpZihLKXtyZXR1cm59aWYoISgvbG9hZGVkfGNvbXBsZXRlLykudGVzdChrLnJlYWR5U3RhdGUpKXtzZXRUaW1lb3V0KGFyZ3VtZW50cy5jYWxsZWUsMCk7cmV0dXJufWcoKX0pKCl9dChnKX19KCk7ZnVuY3Rpb24gZygpe2lmKEspe3JldHVybn10cnl7dmFyIGFhPWsuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKVswXS5hcHBlbmRDaGlsZChEKCJzcGFuIikpO2FhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWEpfWNhdGNoKGFiKXtyZXR1cm59Sz10cnVlO3ZhciBZPVYubGVuZ3RoO2Zvcih2YXIgWj0wO1o8WTtaKyspe1ZbWl0oKX19ZnVuY3Rpb24gTChZKXtpZihLKXtZKCl9ZWxzZXtWW1YubGVuZ3RoXT1ZfX1mdW5jdGlvbiB0KFope2lmKHR5cGVvZiBQLmFkZEV2ZW50TGlzdGVuZXIhPUUpe1AuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsWixmYWxzZSl9ZWxzZXtpZih0eXBlb2Ygay5hZGRFdmVudExpc3RlbmVyIT1FKXtrLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLFosZmFsc2UpfWVsc2V7aWYodHlwZW9mIFAuYXR0YWNoRXZlbnQhPUUpe2ooUCwib25sb2FkIixaKX1lbHNle2lmKHR5cGVvZiBQLm9ubG9hZD09ImZ1bmN0aW9uIil7dmFyIFk9UC5vbmxvYWQ7UC5vbmxvYWQ9ZnVuY3Rpb24oKXtZKCk7WigpfX1lbHNle1Aub25sb2FkPVp9fX19fWZ1bmN0aW9uIGkoKXtpZihVKXtXKCl9ZWxzZXtJKCl9fWZ1bmN0aW9uIFcoKXt2YXIgWT1rLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJib2R5IilbMF07dmFyIGFiPUQocyk7YWIuc2V0QXR0cmlidXRlKCJ0eXBlIixyKTt2YXIgYWE9WS5hcHBlbmRDaGlsZChhYik7aWYoYWEpe3ZhciBaPTA7KGZ1bmN0aW9uKCl7aWYodHlwZW9mIGFhLkdldFZhcmlhYmxlIT1FKXt2YXIgYWM9YWEuR2V0VmFyaWFibGUoIiR2ZXJzaW9uIik7aWYoYWMpe2FjPWFjLnNwbGl0KCIgIilbMV0uc3BsaXQoIiwiKTtOLnB2PVtwYXJzZUludChhY1swXSwxMCkscGFyc2VJbnQoYWNbMV0sMTApLHBhcnNlSW50KGFjWzJdLDEwKV19fWVsc2V7aWYoWjwxMCl7WisrO3NldFRpbWVvdXQoYXJndW1lbnRzLmNhbGxlZSwxMCk7cmV0dXJufX1ZLnJlbW92ZUNoaWxkKGFiKTthYT1udWxsO0koKX0pKCl9ZWxzZXtJKCl9fWZ1bmN0aW9uIEkoKXt2YXIgYWg9cC5sZW5ndGg7aWYoYWg+MCl7Zm9yKHZhciBhZz0wO2FnPGFoO2FnKyspe3ZhciBaPXBbYWddLmlkO3ZhciBhYz1wW2FnXS5jYWxsYmFja0ZuO3ZhciBhYj17c3VjY2VzczpmYWxzZSxpZDpafTtpZihOLnB2WzBdPjApe3ZhciBhZj1jKFopO2lmKGFmKXtpZihHKHBbYWddLnN3ZlZlcnNpb24pJiYhKE4ud2smJk4ud2s8MzEyKSl7eChaLHRydWUpO2lmKGFjKXthYi5zdWNjZXNzPXRydWU7YWIucmVmPUEoWik7YWMoYWIpfX1lbHNle2lmKHBbYWddLmV4cHJlc3NJbnN0YWxsJiZCKCkpe3ZhciBhaj17fTthai5kYXRhPXBbYWddLmV4cHJlc3NJbnN0YWxsO2FqLndpZHRoPWFmLmdldEF0dHJpYnV0ZSgid2lkdGgiKXx8IjAiO2FqLmhlaWdodD1hZi5nZXRBdHRyaWJ1dGUoImhlaWdodCIpfHwiMCI7aWYoYWYuZ2V0QXR0cmlidXRlKCJjbGFzcyIpKXthai5zdHlsZWNsYXNzPWFmLmdldEF0dHJpYnV0ZSgiY2xhc3MiKX1pZihhZi5nZXRBdHRyaWJ1dGUoImFsaWduIikpe2FqLmFsaWduPWFmLmdldEF0dHJpYnV0ZSgiYWxpZ24iKX12YXIgYWk9e307dmFyIFk9YWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInBhcmFtIik7dmFyIGFkPVkubGVuZ3RoO2Zvcih2YXIgYWU9MDthZTxhZDthZSsrKXtpZihZW2FlXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKS50b0xvd2VyQ2FzZSgpIT0ibW92aWUiKXthaVtZW2FlXS5nZXRBdHRyaWJ1dGUoIm5hbWUiKV09WVthZV0uZ2V0QXR0cmlidXRlKCJ2YWx1ZSIpfX1RKGFqLGFpLFosYWMpfWVsc2V7cShhZik7aWYoYWMpe2FjKGFiKX19fX19ZWxzZXt4KFosdHJ1ZSk7aWYoYWMpe3ZhciBhYT1BKFopO2lmKGFhJiZ0eXBlb2YgYWEuU2V0VmFyaWFibGUhPUUpe2FiLnN1Y2Nlc3M9dHJ1ZTthYi5yZWY9YWF9YWMoYWIpfX19fX1mdW5jdGlvbiBBKGFiKXt2YXIgWT1udWxsO3ZhciBaPWMoYWIpO2lmKFomJloubm9kZU5hbWU9PSJPQkpFQ1QiKXtpZih0eXBlb2YgWi5TZXRWYXJpYWJsZSE9RSl7WT1afWVsc2V7dmFyIGFhPVouZ2V0RWxlbWVudHNCeVRhZ05hbWUocylbMF07aWYoYWEpe1k9YWF9fX1yZXR1cm4gWX1mdW5jdGlvbiBCKCl7cmV0dXJuICFhJiZHKCI2LjAuNjUiKSYmKE4ud2lufHxOLm1hYykmJiEoTi53ayYmTi53azwzMTIpfWZ1bmN0aW9uIFEoYWIsYWMsWSxhYSl7YT10cnVlO0Y9YWF8fG51bGw7Qz17c3VjY2VzczpmYWxzZSxpZDpZfTt2YXIgYWY9YyhZKTtpZihhZil7aWYoYWYubm9kZU5hbWU9PSJPQkpFQ1QiKXttPWgoYWYpO1I9bnVsbH1lbHNle209YWY7Uj1ZfWFiLmlkPVM7aWYodHlwZW9mIGFiLndpZHRoPT1FfHwoISgvJSQvKS50ZXN0KGFiLndpZHRoKSYmcGFyc2VJbnQoYWIud2lkdGgsMTApPDMxMCkpe2FiLndpZHRoPSIzMTAifWlmKHR5cGVvZiBhYi5oZWlnaHQ9PUV8fCghKC8lJC8pLnRlc3QoYWIuaGVpZ2h0KSYmcGFyc2VJbnQoYWIuaGVpZ2h0LDEwKTwxMzcpKXthYi5oZWlnaHQ9IjEzNyJ9ay50aXRsZT1rLnRpdGxlLnNsaWNlKDAsNDcpKyIgLSBGbGFzaCBQbGF5ZXIgSW5zdGFsbGF0aW9uIjt2YXIgYWU9Ti5pZSYmTi53aW4/IkFjdGl2ZVgiOiJQbHVnSW4iLGFkPSJNTXJlZGlyZWN0VVJMPSIrUC5sb2NhdGlvbi50b1N0cmluZygpLnJlcGxhY2UoLyYvZywiJTI2IikrIiZNTXBsYXllclR5cGU9IithZSsiJk1NZG9jdGl0bGU9IitrLnRpdGxlO2lmKHR5cGVvZiBhYy5mbGFzaHZhcnMhPUUpe2FjLmZsYXNodmFycys9IiYiK2FkfWVsc2V7YWMuZmxhc2h2YXJzPWFkfWlmKE4uaWUmJk4ud2luJiZhZi5yZWFkeVN0YXRlIT00KXt2YXIgWj1EKCJkaXYiKTtZKz0iU1dGT2JqZWN0TmV3IjtaLnNldEF0dHJpYnV0ZSgiaWQiLFkpO2FmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKFosYWYpO2FmLnN0eWxlLmRpc3BsYXk9Im5vbmUiOyhmdW5jdGlvbigpe2lmKGFmLnJlYWR5U3RhdGU9PTQpe2FmLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWYpfWVsc2V7c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDEwKX19KSgpfXYoYWIsYWMsWSl9fWZ1bmN0aW9uIHEoWil7aWYoTi5pZSYmTi53aW4mJloucmVhZHlTdGF0ZSE9NCl7dmFyIFk9RCgiZGl2Iik7Wi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShZLFopO1kucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoaChaKSxZKTtaLnN0eWxlLmRpc3BsYXk9Im5vbmUiOyhmdW5jdGlvbigpe2lmKFoucmVhZHlTdGF0ZT09NCl7Wi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKFopfWVsc2V7c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDEwKX19KSgpfWVsc2V7Wi5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChoKFopLFopfX1mdW5jdGlvbiBoKGFkKXt2YXIgYWI9RCgiZGl2Iik7aWYoTi53aW4mJk4uaWUpe2FiLmlubmVySFRNTD1hZC5pbm5lckhUTUx9ZWxzZXt2YXIgWj1hZC5nZXRFbGVtZW50c0J5VGFnTmFtZShzKVswXTtpZihaKXt2YXIgYWU9Wi5jaGlsZE5vZGVzO2lmKGFlKXt2YXIgWT1hZS5sZW5ndGg7Zm9yKHZhciBhYT0wO2FhPFk7YWErKyl7aWYoIShhZVthYV0ubm9kZVR5cGU9PTEmJmFlW2FhXS5ub2RlTmFtZT09IlBBUkFNIikmJiEoYWVbYWFdLm5vZGVUeXBlPT04KSl7YWIuYXBwZW5kQ2hpbGQoYWVbYWFdLmNsb25lTm9kZSh0cnVlKSl9fX19fXJldHVybiBhYn1mdW5jdGlvbiB2KGFqLGFoLFope3ZhciBZLGFiPWMoWik7aWYoTi53ayYmTi53azwzMTIpe3JldHVybiBZfWlmKGFiKXtpZih0eXBlb2YgYWouaWQ9PUUpe2FqLmlkPVp9aWYoTi5pZSYmTi53aW4pe3ZhciBhaT0iIjtmb3IodmFyIGFmIGluIGFqKXtpZihhalthZl0hPU9iamVjdC5wcm90b3R5cGVbYWZdKXtpZihhZi50b0xvd2VyQ2FzZSgpPT0iZGF0YSIpe2FoLm1vdmllPWFqW2FmXX1lbHNle2lmKGFmLnRvTG93ZXJDYXNlKCk9PSJzdHlsZWNsYXNzIil7YWkrPScgY2xhc3M9IicrYWpbYWZdKyciJ31lbHNle2lmKGFmLnRvTG93ZXJDYXNlKCkhPSJjbGFzc2lkIil7YWkrPSIgIithZisnPSInK2FqW2FmXSsnIid9fX19fXZhciBhZz0iIjtmb3IodmFyIGFlIGluIGFoKXtpZihhaFthZV0hPU9iamVjdC5wcm90b3R5cGVbYWVdKXthZys9JzxwYXJhbSBuYW1lPSInK2FlKyciIHZhbHVlPSInK2FoW2FlXSsnIiAvPid9fWFiLm91dGVySFRNTD0nPG9iamVjdCBjbGFzc2lkPSJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDAiJythaSsiPiIrYWcrIjwvb2JqZWN0PiI7T1tPLmxlbmd0aF09YWouaWQ7WT1jKGFqLmlkKX1lbHNle3ZhciBhYT1EKHMpO2FhLnNldEF0dHJpYnV0ZSgidHlwZSIscik7Zm9yKHZhciBhZCBpbiBhail7aWYoYWpbYWRdIT1PYmplY3QucHJvdG90eXBlW2FkXSl7aWYoYWQudG9Mb3dlckNhc2UoKT09InN0eWxlY2xhc3MiKXthYS5zZXRBdHRyaWJ1dGUoImNsYXNzIixhalthZF0pfWVsc2V7aWYoYWQudG9Mb3dlckNhc2UoKSE9ImNsYXNzaWQiKXthYS5zZXRBdHRyaWJ1dGUoYWQsYWpbYWRdKX19fX1mb3IodmFyIGFjIGluIGFoKXtpZihhaFthY10hPU9iamVjdC5wcm90b3R5cGVbYWNdJiZhYy50b0xvd2VyQ2FzZSgpIT0ibW92aWUiKXtlKGFhLGFjLGFoW2FjXSl9fWFiLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGFhLGFiKTtZPWFhfX1yZXR1cm4gWX1mdW5jdGlvbiBlKGFhLFksWil7dmFyIGFiPUQoInBhcmFtIik7YWIuc2V0QXR0cmlidXRlKCJuYW1lIixZKTthYi5zZXRBdHRyaWJ1dGUoInZhbHVlIixaKTthYS5hcHBlbmRDaGlsZChhYil9ZnVuY3Rpb24geihaKXt2YXIgWT1jKFopO2lmKFkmJlkubm9kZU5hbWU9PSJPQkpFQ1QiKXtpZihOLmllJiZOLndpbil7WS5zdHlsZS5kaXNwbGF5PSJub25lIjsoZnVuY3Rpb24oKXtpZihZLnJlYWR5U3RhdGU9PTQpe2IoWil9ZWxzZXtzZXRUaW1lb3V0KGFyZ3VtZW50cy5jYWxsZWUsMTApfX0pKCl9ZWxzZXtZLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoWSl9fX1mdW5jdGlvbiBiKGFhKXt2YXIgWj1jKGFhKTtpZihaKXtmb3IodmFyIFkgaW4gWil7aWYodHlwZW9mIFpbWV09PSJmdW5jdGlvbiIpe1pbWV09bnVsbH19Wi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKFopfX1mdW5jdGlvbiBjKGFhKXt2YXIgWT1udWxsO3RyeXtZPWsuZ2V0RWxlbWVudEJ5SWQoYWEpfWNhdGNoKFope31yZXR1cm4gWX1mdW5jdGlvbiBEKFkpe3JldHVybiBrLmNyZWF0ZUVsZW1lbnQoWSl9ZnVuY3Rpb24gaihhYSxZLFope2FhLmF0dGFjaEV2ZW50KFksWik7SltKLmxlbmd0aF09W2FhLFksWl19ZnVuY3Rpb24gRyhhYSl7dmFyIFo9Ti5wdixZPWFhLnNwbGl0KCIuIik7WVswXT1wYXJzZUludChZWzBdLDEwKTtZWzFdPXBhcnNlSW50KFlbMV0sMTApfHwwO1lbMl09cGFyc2VJbnQoWVsyXSwxMCl8fDA7cmV0dXJuKFpbMF0+WVswXXx8KFpbMF09PVlbMF0mJlpbMV0+WVsxXSl8fChaWzBdPT1ZWzBdJiZaWzFdPT1ZWzFdJiZaWzJdPj1ZWzJdKSk/dHJ1ZTpmYWxzZX1mdW5jdGlvbiB3KGFkLFosYWUsYWMpe2lmKE4uaWUmJk4ubWFjKXtyZXR1cm59dmFyIGFiPWsuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXTtpZighYWIpe3JldHVybn12YXIgWT0oYWUmJnR5cGVvZiBhZT09InN0cmluZyIpP2FlOiJzY3JlZW4iO2lmKGFjKXtvPW51bGw7SD1udWxsfWlmKCFvfHxIIT1ZKXt2YXIgYWE9RCgic3R5bGUiKTthYS5zZXRBdHRyaWJ1dGUoInR5cGUiLCJ0ZXh0L2NzcyIpO2FhLnNldEF0dHJpYnV0ZSgibWVkaWEiLFkpO289YWIuYXBwZW5kQ2hpbGQoYWEpO2lmKE4uaWUmJk4ud2luJiZ0eXBlb2Ygay5zdHlsZVNoZWV0cyE9RSYmay5zdHlsZVNoZWV0cy5sZW5ndGg+MCl7bz1rLnN0eWxlU2hlZXRzW2suc3R5bGVTaGVldHMubGVuZ3RoLTFdfUg9WX1pZihOLmllJiZOLndpbil7aWYobyYmdHlwZW9mIG8uYWRkUnVsZT09cyl7by5hZGRSdWxlKGFkLFopfX1lbHNle2lmKG8mJnR5cGVvZiBrLmNyZWF0ZVRleHROb2RlIT1FKXtvLmFwcGVuZENoaWxkKGsuY3JlYXRlVGV4dE5vZGUoYWQrIiB7IitaKyJ9IikpfX19ZnVuY3Rpb24geChhYSxZKXtpZighbil7cmV0dXJufXZhciBaPVk/InZpc2libGUiOiJoaWRkZW4iO2lmKEsmJmMoYWEpKXtjKGFhKS5zdHlsZS52aXNpYmlsaXR5PVp9ZWxzZXt3KCIjIithYSwidmlzaWJpbGl0eToiK1opfX1mdW5jdGlvbiBNKFope3ZhciBhYT0vW1xcXCI8PlwuO10vO3ZhciBZPWFhLmV4ZWMoWikhPW51bGw7cmV0dXJuIFkmJnR5cGVvZiBlbmNvZGVVUklDb21wb25lbnQhPUU/ZW5jb2RlVVJJQ29tcG9uZW50KFopOlp9dmFyIGQ9ZnVuY3Rpb24oKXtpZihOLmllJiZOLndpbil7d2luZG93LmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsZnVuY3Rpb24oKXt2YXIgYWQ9Si5sZW5ndGg7Zm9yKHZhciBhYz0wO2FjPGFkO2FjKyspe0pbYWNdWzBdLmRldGFjaEV2ZW50KEpbYWNdWzFdLEpbYWNdWzJdKX12YXIgYWE9Ty5sZW5ndGg7Zm9yKHZhciBhYj0wO2FiPGFhO2FiKyspe3ooT1thYl0pfWZvcih2YXIgWiBpbiBOKXtOW1pdPW51bGx9Tj1udWxsO2Zvcih2YXIgWSBpbiBzd2ZvYmplY3Qpe3N3Zm9iamVjdFtZXT1udWxsfXN3Zm9iamVjdD1udWxsO3dpbmRvdy5kZXRhY2hFdmVudCgib251bmxvYWQiLGFyZ3VtZW50cy5jYWxsZWUpfSl9fSgpO3JldHVybntyZWdpc3Rlck9iamVjdDpmdW5jdGlvbihhYyxZLGFiLGFhKXtpZihOLnczJiZhYyYmWSl7dmFyIFo9e307Wi5pZD1hYztaLnN3ZlZlcnNpb249WTtaLmV4cHJlc3NJbnN0YWxsPWFiO1ouY2FsbGJhY2tGbj1hYTtwW3AubGVuZ3RoXT1aO3goYWMsZmFsc2UpfWVsc2V7aWYoYWEpe2FhKHtzdWNjZXNzOmZhbHNlLGlkOmFjfSl9fX0sZ2V0T2JqZWN0QnlJZDpmdW5jdGlvbihZKXtpZihOLnczKXtyZXR1cm4gQShZKX19LGVtYmVkU1dGOmZ1bmN0aW9uKGFjLGFpLGFmLGFoLFosYWIsYWEsYWUsYWcsYWQpe3ZhciBZPXtzdWNjZXNzOmZhbHNlLGlkOmFpfTtpZihOLnczJiYhKE4ud2smJk4ud2s8MzEyKSYmYWMmJmFpJiZhZiYmYWgmJlope3goYWksZmFsc2UpO0woZnVuY3Rpb24oKXthZis9IiI7YWgrPSIiO3ZhciBhaz17fTtpZihhZyYmdHlwZW9mIGFnPT09cyl7Zm9yKHZhciBhbSBpbiBhZyl7YWtbYW1dPWFnW2FtXX19YWsuZGF0YT1hYzthay53aWR0aD1hZjthay5oZWlnaHQ9YWg7dmFyIGFuPXt9O2lmKGFlJiZ0eXBlb2YgYWU9PT1zKXtmb3IodmFyIGFsIGluIGFlKXthblthbF09YWVbYWxdfX1pZihhYSYmdHlwZW9mIGFhPT09cyl7Zm9yKHZhciBhaiBpbiBhYSl7aWYodHlwZW9mIGFuLmZsYXNodmFycyE9RSl7YW4uZmxhc2h2YXJzKz0iJiIrYWorIj0iK2FhW2FqXX1lbHNle2FuLmZsYXNodmFycz1haisiPSIrYWFbYWpdfX19aWYoRyhaKSl7dmFyIGFvPXYoYWssYW4sYWkpO2lmKGFrLmlkPT1haSl7eChhaSx0cnVlKX1ZLnN1Y2Nlc3M9dHJ1ZTtZLnJlZj1hb31lbHNle2lmKGFiJiZCKCkpe2FrLmRhdGE9YWI7UShhayxhbixhaSxhZCk7cmV0dXJufWVsc2V7eChhaSx0cnVlKX19aWYoYWQpe2FkKFkpfX0pfWVsc2V7aWYoYWQpe2FkKFkpfX19LHN3aXRjaE9mZkF1dG9IaWRlU2hvdzpmdW5jdGlvbigpe249ZmFsc2V9LHVhOk4sZ2V0Rmxhc2hQbGF5ZXJWZXJzaW9uOmZ1bmN0aW9uKCl7cmV0dXJue21ham9yOk4ucHZbMF0sbWlub3I6Ti5wdlsxXSxyZWxlYXNlOk4ucHZbMl19fSxoYXNGbGFzaFBsYXllclZlcnNpb246RyxjcmVhdGVTV0Y6ZnVuY3Rpb24oYWEsWixZKXtpZihOLnczKXtyZXR1cm4gdihhYSxaLFkpfWVsc2V7cmV0dXJuIHVuZGVmaW5lZH19LHNob3dFeHByZXNzSW5zdGFsbDpmdW5jdGlvbihhYSxhYixZLFope2lmKE4udzMmJkIoKSl7UShhYSxhYixZLFopfX0scmVtb3ZlU1dGOmZ1bmN0aW9uKFkpe2lmKE4udzMpe3ooWSl9fSxjcmVhdGVDU1M6ZnVuY3Rpb24oYWIsYWEsWixZKXtpZihOLnczKXt3KGFiLGFhLFosWSl9fSxhZGREb21Mb2FkRXZlbnQ6TCxhZGRMb2FkRXZlbnQ6dCxnZXRRdWVyeVBhcmFtVmFsdWU6ZnVuY3Rpb24oYWIpe3ZhciBhYT1rLmxvY2F0aW9uLnNlYXJjaHx8ay5sb2NhdGlvbi5oYXNoO2lmKGFhKXtpZigvXD8vLnRlc3QoYWEpKXthYT1hYS5zcGxpdCgiPyIpWzFdfWlmKGFiPT1udWxsKXtyZXR1cm4gTShhYSl9dmFyIFo9YWEuc3BsaXQoIiYiKTtmb3IodmFyIFk9MDtZPFoubGVuZ3RoO1krKyl7aWYoWltZXS5zdWJzdHJpbmcoMCxaW1ldLmluZGV4T2YoIj0iKSk9PWFiKXtyZXR1cm4gTShaW1ldLnN1YnN0cmluZygoWltZXS5pbmRleE9mKCI9IikrMSkpKX19fXJldHVybiIifSxleHByZXNzSW5zdGFsbENhbGxiYWNrOmZ1bmN0aW9uKCl7aWYoYSl7dmFyIFk9YyhTKTtpZihZJiZtKXtZLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG0sWSk7aWYoUil7eChSLHRydWUpO2lmKE4uaWUmJk4ud2luKXttLnN0eWxlLmRpc3BsYXk9ImJsb2NrIn19aWYoRil7RihDKX19YT1mYWxzZX19fX0oKTtFeHQuRmxhc2hDb21wb25lbnQ9RXh0LmV4dGVuZChFeHQuQm94Q29tcG9uZW50LHtmbGFzaFZlcnNpb246IjkuMC4xMTUiLGJhY2tncm91bmRDb2xvcjoiI2ZmZmZmZiIsd21vZGU6Im9wYXF1ZSIsZmxhc2hWYXJzOnVuZGVmaW5lZCxmbGFzaFBhcmFtczp1bmRlZmluZWQsdXJsOnVuZGVmaW5lZCxzd2ZJZDp1bmRlZmluZWQsc3dmV2lkdGg6IjEwMCUiLHN3ZkhlaWdodDoiMTAwJSIsZXhwcmVzc0luc3RhbGw6ZmFsc2UsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5GbGFzaENvbXBvbmVudC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiaW5pdGlhbGl6ZSIpfSxvblJlbmRlcjpmdW5jdGlvbigpe0V4dC5GbGFzaENvbXBvbmVudC5zdXBlcmNsYXNzLm9uUmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYj1FeHQuYXBwbHkoe2FsbG93U2NyaXB0QWNjZXNzOiJhbHdheXMiLGJnY29sb3I6dGhpcy5iYWNrZ3JvdW5kQ29sb3Isd21vZGU6dGhpcy53bW9kZX0sdGhpcy5mbGFzaFBhcmFtcyksYT1FeHQuYXBwbHkoe2FsbG93ZWREb21haW46ZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUsWVVJU3dmSWQ6dGhpcy5nZXRJZCgpLFlVSUJyaWRnZUNhbGxiYWNrOiJFeHQuRmxhc2hFdmVudFByb3h5Lm9uRXZlbnQifSx0aGlzLmZsYXNoVmFycyk7bmV3IHN3Zm9iamVjdC5lbWJlZFNXRih0aGlzLnVybCx0aGlzLmlkLHRoaXMuc3dmV2lkdGgsdGhpcy5zd2ZIZWlnaHQsdGhpcy5mbGFzaFZlcnNpb24sdGhpcy5leHByZXNzSW5zdGFsbD9FeHQuRmxhc2hDb21wb25lbnQuRVhQUkVTU19JTlNUQUxMX1VSTDp1bmRlZmluZWQsYSxiKTt0aGlzLnN3Zj1FeHQuZ2V0RG9tKHRoaXMuaWQpO3RoaXMuZWw9RXh0LmdldCh0aGlzLnN3Zil9LGdldFN3ZklkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3dmSWR8fCh0aGlzLnN3ZklkPSJleHRzd2YiKygrK0V4dC5Db21wb25lbnQuQVVUT19JRCkpfSxnZXRJZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlkfHwodGhpcy5pZD0iZXh0Zmxhc2hjbXAiKygrK0V4dC5Db21wb25lbnQuQVVUT19JRCkpfSxvbkZsYXNoRXZlbnQ6ZnVuY3Rpb24oYSl7c3dpdGNoKGEudHlwZSl7Y2FzZSJzd2ZSZWFkeSI6dGhpcy5pbml0U3dmKCk7cmV0dXJuO2Nhc2UibG9nIjpyZXR1cm59YS5jb21wb25lbnQ9dGhpczt0aGlzLmZpcmVFdmVudChhLnR5cGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9ldmVudCQvLCIiKSxhKX0saW5pdFN3ZjpmdW5jdGlvbigpe3RoaXMub25Td2ZSZWFkeSghIXRoaXMuaXNJbml0aWFsaXplZCk7dGhpcy5pc0luaXRpYWxpemVkPXRydWU7dGhpcy5maXJlRXZlbnQoImluaXRpYWxpemUiLHRoaXMpfSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7c3dmb2JqZWN0LnJlbW92ZVNXRih0aGlzLnN3Zi5pZCl9RXh0LkZsYXNoQ29tcG9uZW50LnN1cGVyY2xhc3MuYmVmb3JlRGVzdHJveS5jYWxsKHRoaXMpfSxvblN3ZlJlYWR5OkV4dC5lbXB0eUZufSk7RXh0LkZsYXNoQ29tcG9uZW50LkVYUFJFU1NfSU5TVEFMTF9VUkw9Imh0dHA6Ly9zd2ZvYmplY3QuZ29vZ2xlY29kZS5jb20vc3ZuL3RydW5rL3N3Zm9iamVjdC9leHByZXNzSW5zdGFsbC5zd2YiO0V4dC5yZWcoImZsYXNoIixFeHQuRmxhc2hDb21wb25lbnQpO0V4dC5GbGFzaEV2ZW50UHJveHk9e29uRXZlbnQ6ZnVuY3Rpb24oYyxiKXt2YXIgYT1FeHQuZ2V0Q21wKGMpO2lmKGEpe2Eub25GbGFzaEV2ZW50KGIpfWVsc2V7YXJndW1lbnRzLmNhbGxlZS5kZWZlcigxMCx0aGlzLFtjLGJdKX19fTtFeHQuY2hhcnQuQ2hhcnQ9RXh0LmV4dGVuZChFeHQuRmxhc2hDb21wb25lbnQse3JlZnJlc2hCdWZmZXI6MTAwLGNoYXJ0U3R5bGU6e3BhZGRpbmc6MTAsYW5pbWF0aW9uRW5hYmxlZDp0cnVlLGZvbnQ6e25hbWU6IlRhaG9tYSIsY29sb3I6NDQ3MzkyNCxzaXplOjExfSxkYXRhVGlwOntwYWRkaW5nOjUsYm9yZGVyOntjb2xvcjoxMDA3NTExMixzaXplOjF9LGJhY2tncm91bmQ6e2NvbG9yOjE0MzQ2MjMwLGFscGhhOjAuOX0sZm9udDp7bmFtZToiVGFob21hIixjb2xvcjoxMzkzMjkxLHNpemU6MTAsYm9sZDp0cnVlfX19LGV4dHJhU3R5bGU6bnVsbCxzZXJpZXNTdHlsZXM6bnVsbCxkaXNhYmxlQ2FjaGluZzpFeHQuaXNJRXx8RXh0LmlzT3BlcmEsZGlzYWJsZUNhY2hlUGFyYW06Il9kYyIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5jaGFydC5DaGFydC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZighdGhpcy51cmwpe3RoaXMudXJsPUV4dC5jaGFydC5DaGFydC5DSEFSVF9VUkx9aWYodGhpcy5kaXNhYmxlQ2FjaGluZyl7dGhpcy51cmw9RXh0LnVybEFwcGVuZCh0aGlzLnVybCxTdHJpbmcuZm9ybWF0KCJ7MH09ezF9Iix0aGlzLmRpc2FibGVDYWNoZVBhcmFtLG5ldyBEYXRlKCkuZ2V0VGltZSgpKSl9dGhpcy5hZGRFdmVudHMoIml0ZW1tb3VzZW92ZXIiLCJpdGVtbW91c2VvdXQiLCJpdGVtY2xpY2siLCJpdGVtZG91YmxlY2xpY2siLCJpdGVtZHJhZ3N0YXJ0IiwiaXRlbWRyYWciLCJpdGVtZHJhZ2VuZCIsImJlZm9yZXJlZnJlc2giLCJyZWZyZXNoIik7dGhpcy5zdG9yZT1FeHQuU3RvcmVNZ3IubG9va3VwKHRoaXMuc3RvcmUpfSxzZXRTdHlsZTpmdW5jdGlvbihhLGIpe3RoaXMuc3dmLnNldFN0eWxlKGEsRXh0LmVuY29kZShiKSl9LHNldFN0eWxlczpmdW5jdGlvbihhKXt0aGlzLnN3Zi5zZXRTdHlsZXMoRXh0LmVuY29kZShhKSl9LHNldFNlcmllc1N0eWxlczpmdW5jdGlvbihiKXt0aGlzLnNlcmllc1N0eWxlcz1iO3ZhciBhPVtdO0V4dC5lYWNoKGIsZnVuY3Rpb24oYyl7YS5wdXNoKEV4dC5lbmNvZGUoYykpfSk7dGhpcy5zd2Yuc2V0U2VyaWVzU3R5bGVzKGEpfSxzZXRDYXRlZ29yeU5hbWVzOmZ1bmN0aW9uKGEpe3RoaXMuc3dmLnNldENhdGVnb3J5TmFtZXMoYSl9LHNldExlZ2VuZFJlbmRlcmVyOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcztiPWJ8fGE7YS5yZW1vdmVGblByb3h5KGEubGVnZW5kRm5OYW1lKTthLmxlZ2VuZEZuTmFtZT1hLmNyZWF0ZUZuUHJveHkoZnVuY3Rpb24oZCl7cmV0dXJuIGMuY2FsbChiLGQpfSk7YS5zd2Yuc2V0TGVnZW5kTGFiZWxGdW5jdGlvbihhLmxlZ2VuZEZuTmFtZSl9LHNldFRpcFJlbmRlcmVyOmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcztiPWJ8fGE7YS5yZW1vdmVGblByb3h5KGEudGlwRm5OYW1lKTthLnRpcEZuTmFtZT1hLmNyZWF0ZUZuUHJveHkoZnVuY3Rpb24oaCxlLGcpe3ZhciBkPWEuc3RvcmUuZ2V0QXQoZSk7cmV0dXJuIGMuY2FsbChiLGEsZCxlLGcpfSk7YS5zd2Yuc2V0RGF0YVRpcEZ1bmN0aW9uKGEudGlwRm5OYW1lKX0sc2V0U2VyaWVzOmZ1bmN0aW9uKGEpe3RoaXMuc2VyaWVzPWE7dGhpcy5yZWZyZXNoKCl9LGJpbmRTdG9yZTpmdW5jdGlvbihhLGIpe2lmKCFiJiZ0aGlzLnN0b3JlKXtpZihhIT09dGhpcy5zdG9yZSYmdGhpcy5zdG9yZS5hdXRvRGVzdHJveSl7dGhpcy5zdG9yZS5kZXN0cm95KCl9ZWxzZXt0aGlzLnN0b3JlLnVuKCJkYXRhY2hhbmdlZCIsdGhpcy5yZWZyZXNoLHRoaXMpO3RoaXMuc3RvcmUudW4oImFkZCIsdGhpcy5kZWxheVJlZnJlc2gsdGhpcyk7dGhpcy5zdG9yZS51bigicmVtb3ZlIix0aGlzLmRlbGF5UmVmcmVzaCx0aGlzKTt0aGlzLnN0b3JlLnVuKCJ1cGRhdGUiLHRoaXMuZGVsYXlSZWZyZXNoLHRoaXMpO3RoaXMuc3RvcmUudW4oImNsZWFyIix0aGlzLnJlZnJlc2gsdGhpcyl9fWlmKGEpe2E9RXh0LlN0b3JlTWdyLmxvb2t1cChhKTthLm9uKHtzY29wZTp0aGlzLGRhdGFjaGFuZ2VkOnRoaXMucmVmcmVzaCxhZGQ6dGhpcy5kZWxheVJlZnJlc2gscmVtb3ZlOnRoaXMuZGVsYXlSZWZyZXNoLHVwZGF0ZTp0aGlzLmRlbGF5UmVmcmVzaCxjbGVhcjp0aGlzLnJlZnJlc2h9KX10aGlzLnN0b3JlPWE7aWYoYSYmIWIpe3RoaXMucmVmcmVzaCgpfX0sb25Td2ZSZWFkeTpmdW5jdGlvbihiKXtFeHQuY2hhcnQuQ2hhcnQuc3VwZXJjbGFzcy5vblN3ZlJlYWR5LmNhbGwodGhpcyxiKTt2YXIgYTt0aGlzLnN3Zi5zZXRUeXBlKHRoaXMudHlwZSk7aWYodGhpcy5jaGFydFN0eWxlKXt0aGlzLnNldFN0eWxlcyhFeHQuYXBwbHkoe30sdGhpcy5leHRyYVN0eWxlLHRoaXMuY2hhcnRTdHlsZSkpfWlmKHRoaXMuY2F0ZWdvcnlOYW1lcyl7dGhpcy5zZXRDYXRlZ29yeU5hbWVzKHRoaXMuY2F0ZWdvcnlOYW1lcyl9aWYodGhpcy50aXBSZW5kZXJlcil7YT10aGlzLmdldEZ1bmN0aW9uUmVmKHRoaXMudGlwUmVuZGVyZXIpO3RoaXMuc2V0VGlwUmVuZGVyZXIoYS5mbixhLnNjb3BlKX1pZih0aGlzLmxlZ2VuZFJlbmRlcmVyKXthPXRoaXMuZ2V0RnVuY3Rpb25SZWYodGhpcy5sZWdlbmRSZW5kZXJlcik7dGhpcy5zZXRMZWdlbmRSZW5kZXJlcihhLmZuLGEuc2NvcGUpfWlmKCFiKXt0aGlzLmJpbmRTdG9yZSh0aGlzLnN0b3JlLHRydWUpfXRoaXMucmVmcmVzaC5kZWZlcigxMCx0aGlzKX0sZGVsYXlSZWZyZXNoOmZ1bmN0aW9uKCl7aWYoIXRoaXMucmVmcmVzaFRhc2spe3RoaXMucmVmcmVzaFRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKHRoaXMucmVmcmVzaCx0aGlzKX10aGlzLnJlZnJlc2hUYXNrLmRlbGF5KHRoaXMucmVmcmVzaEJ1ZmZlcil9LHJlZnJlc2g6ZnVuY3Rpb24oKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVmcmVzaCIsdGhpcykhPT1mYWxzZSl7dmFyIG09ZmFsc2U7dmFyIGs9W10sYz10aGlzLnN0b3JlLmRhdGEuaXRlbXM7Zm9yKHZhciBnPTAsbD1jLmxlbmd0aDtnPGw7ZysrKXtrW2ddPWNbZ10uZGF0YX12YXIgZT1bXTt2YXIgZD0wO3ZhciBuPW51bGw7dmFyIGg9MDtpZih0aGlzLnNlcmllcyl7ZD10aGlzLnNlcmllcy5sZW5ndGg7Zm9yKGg9MDtoPGQ7aCsrKXtuPXRoaXMuc2VyaWVzW2hdO3ZhciBiPXt9O2Zvcih2YXIgYSBpbiBuKXtpZihhPT0ic3R5bGUiJiZuLnN0eWxlIT09bnVsbCl7Yi5zdHlsZT1FeHQuZW5jb2RlKG4uc3R5bGUpO209dHJ1ZX1lbHNle2JbYV09blthXX19ZS5wdXNoKGIpfX1pZihkPjApe2ZvcihoPTA7aDxkO2grKyl7bj1lW2hdO2lmKCFuLnR5cGUpe24udHlwZT10aGlzLnR5cGV9bi5kYXRhUHJvdmlkZXI9a319ZWxzZXtlLnB1c2goe3R5cGU6dGhpcy50eXBlLGRhdGFQcm92aWRlcjprfSl9dGhpcy5zd2Yuc2V0RGF0YVByb3ZpZGVyKGUpO2lmKHRoaXMuc2VyaWVzU3R5bGVzKXt0aGlzLnNldFNlcmllc1N0eWxlcyh0aGlzLnNlcmllc1N0eWxlcyl9dGhpcy5maXJlRXZlbnQoInJlZnJlc2giLHRoaXMpfX0sY3JlYXRlRm5Qcm94eTpmdW5jdGlvbihhKXt2YXIgYj0iZXh0Rm5Qcm94eSIrKCsrRXh0LmNoYXJ0LkNoYXJ0LlBST1hZX0ZOX0lEKTtFeHQuY2hhcnQuQ2hhcnQucHJveHlGdW5jdGlvbltiXT1hO3JldHVybiJFeHQuY2hhcnQuQ2hhcnQucHJveHlGdW5jdGlvbi4iK2J9LHJlbW92ZUZuUHJveHk6ZnVuY3Rpb24oYSl7aWYoIUV4dC5pc0VtcHR5KGEpKXthPWEucmVwbGFjZSgiRXh0LmNoYXJ0LkNoYXJ0LnByb3h5RnVuY3Rpb24uIiwiIik7ZGVsZXRlIEV4dC5jaGFydC5DaGFydC5wcm94eUZ1bmN0aW9uW2FdfX0sZ2V0RnVuY3Rpb25SZWY6ZnVuY3Rpb24oYSl7aWYoRXh0LmlzRnVuY3Rpb24oYSkpe3JldHVybntmbjphLHNjb3BlOnRoaXN9fWVsc2V7cmV0dXJue2ZuOmEuZm4sc2NvcGU6YS5zY29wZXx8dGhpc319fSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnJlZnJlc2hUYXNrJiZ0aGlzLnJlZnJlc2hUYXNrLmNhbmNlbCl7dGhpcy5yZWZyZXNoVGFzay5jYW5jZWwoKX1FeHQuY2hhcnQuQ2hhcnQuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKTt0aGlzLmJpbmRTdG9yZShudWxsKTt0aGlzLnJlbW92ZUZuUHJveHkodGhpcy50aXBGbk5hbWUpO3RoaXMucmVtb3ZlRm5Qcm94eSh0aGlzLmxlZ2VuZEZuTmFtZSl9fSk7RXh0LnJlZygiY2hhcnQiLEV4dC5jaGFydC5DaGFydCk7RXh0LmNoYXJ0LkNoYXJ0LlBST1hZX0ZOX0lEPTA7RXh0LmNoYXJ0LkNoYXJ0LnByb3h5RnVuY3Rpb249e307RXh0LmNoYXJ0LkNoYXJ0LkNIQVJUX1VSTD0iaHR0cDovL3l1aS55YWhvb2FwaXMuY29tLzIuOC4yL2J1aWxkL2NoYXJ0cy9hc3NldHMvY2hhcnRzLnN3ZiI7RXh0LmNoYXJ0LlBpZUNoYXJ0PUV4dC5leHRlbmQoRXh0LmNoYXJ0LkNoYXJ0LHt0eXBlOiJwaWUiLG9uU3dmUmVhZHk6ZnVuY3Rpb24oYSl7RXh0LmNoYXJ0LlBpZUNoYXJ0LnN1cGVyY2xhc3Mub25Td2ZSZWFkeS5jYWxsKHRoaXMsYSk7dGhpcy5zZXREYXRhRmllbGQodGhpcy5kYXRhRmllbGQpO3RoaXMuc2V0Q2F0ZWdvcnlGaWVsZCh0aGlzLmNhdGVnb3J5RmllbGQpfSxzZXREYXRhRmllbGQ6ZnVuY3Rpb24oYSl7dGhpcy5kYXRhRmllbGQ9YTt0aGlzLnN3Zi5zZXREYXRhRmllbGQoYSl9LHNldENhdGVnb3J5RmllbGQ6ZnVuY3Rpb24oYSl7dGhpcy5jYXRlZ29yeUZpZWxkPWE7dGhpcy5zd2Yuc2V0Q2F0ZWdvcnlGaWVsZChhKX19KTtFeHQucmVnKCJwaWVjaGFydCIsRXh0LmNoYXJ0LlBpZUNoYXJ0KTtFeHQuY2hhcnQuQ2FydGVzaWFuQ2hhcnQ9RXh0LmV4dGVuZChFeHQuY2hhcnQuQ2hhcnQse29uU3dmUmVhZHk6ZnVuY3Rpb24oYSl7RXh0LmNoYXJ0LkNhcnRlc2lhbkNoYXJ0LnN1cGVyY2xhc3Mub25Td2ZSZWFkeS5jYWxsKHRoaXMsYSk7dGhpcy5sYWJlbEZuPVtdO2lmKHRoaXMueEZpZWxkKXt0aGlzLnNldFhGaWVsZCh0aGlzLnhGaWVsZCl9aWYodGhpcy55RmllbGQpe3RoaXMuc2V0WUZpZWxkKHRoaXMueUZpZWxkKX1pZih0aGlzLnhBeGlzKXt0aGlzLnNldFhBeGlzKHRoaXMueEF4aXMpfWlmKHRoaXMueEF4ZXMpe3RoaXMuc2V0WEF4ZXModGhpcy54QXhlcyl9aWYodGhpcy55QXhpcyl7dGhpcy5zZXRZQXhpcyh0aGlzLnlBeGlzKX1pZih0aGlzLnlBeGVzKXt0aGlzLnNldFlBeGVzKHRoaXMueUF4ZXMpfWlmKEV4dC5pc0RlZmluZWQodGhpcy5jb25zdHJhaW5WaWV3cG9ydCkpe3RoaXMuc3dmLnNldENvbnN0cmFpblZpZXdwb3J0KHRoaXMuY29uc3RyYWluVmlld3BvcnQpfX0sc2V0WEZpZWxkOmZ1bmN0aW9uKGEpe3RoaXMueEZpZWxkPWE7dGhpcy5zd2Yuc2V0SG9yaXpvbnRhbEZpZWxkKGEpfSxzZXRZRmllbGQ6ZnVuY3Rpb24oYSl7dGhpcy55RmllbGQ9YTt0aGlzLnN3Zi5zZXRWZXJ0aWNhbEZpZWxkKGEpfSxzZXRYQXhpczpmdW5jdGlvbihhKXt0aGlzLnhBeGlzPXRoaXMuY3JlYXRlQXhpcygieEF4aXMiLGEpO3RoaXMuc3dmLnNldEhvcml6b250YWxBeGlzKHRoaXMueEF4aXMpfSxzZXRYQXhlczpmdW5jdGlvbihjKXt2YXIgYjtmb3IodmFyIGE9MDthPGMubGVuZ3RoO2ErKyl7Yj10aGlzLmNyZWF0ZUF4aXMoInhBeGlzIithLGNbYV0pO3RoaXMuc3dmLnNldEhvcml6b250YWxBeGlzKGIpfX0sc2V0WUF4aXM6ZnVuY3Rpb24oYSl7dGhpcy55QXhpcz10aGlzLmNyZWF0ZUF4aXMoInlBeGlzIixhKTt0aGlzLnN3Zi5zZXRWZXJ0aWNhbEF4aXModGhpcy55QXhpcyl9LHNldFlBeGVzOmZ1bmN0aW9uKGMpe3ZhciBiO2Zvcih2YXIgYT0wO2E8Yy5sZW5ndGg7YSsrKXtiPXRoaXMuY3JlYXRlQXhpcygieUF4aXMiK2EsY1thXSk7dGhpcy5zd2Yuc2V0VmVydGljYWxBeGlzKGIpfX0sY3JlYXRlQXhpczpmdW5jdGlvbihiLGQpe3ZhciBlPUV4dC5hcHBseSh7fSxkKSxjLGE7aWYodGhpc1tiXSl7YT10aGlzW2JdLmxhYmVsRnVuY3Rpb247dGhpcy5yZW1vdmVGblByb3h5KGEpO3RoaXMubGFiZWxGbi5yZW1vdmUoYSl9aWYoZS5sYWJlbFJlbmRlcmVyKXtjPXRoaXMuZ2V0RnVuY3Rpb25SZWYoZS5sYWJlbFJlbmRlcmVyKTtlLmxhYmVsRnVuY3Rpb249dGhpcy5jcmVhdGVGblByb3h5KGZ1bmN0aW9uKGcpe3JldHVybiBjLmZuLmNhbGwoYy5zY29wZSxnKX0pO2RlbGV0ZSBlLmxhYmVsUmVuZGVyZXI7dGhpcy5sYWJlbEZuLnB1c2goZS5sYWJlbEZ1bmN0aW9uKX1pZihiLmluZGV4T2YoInhBeGlzIik+LTEmJmUucG9zaXRpb249PSJsZWZ0Iil7ZS5wb3NpdGlvbj0iYm90dG9tIn1yZXR1cm4gZX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmNoYXJ0LkNhcnRlc2lhbkNoYXJ0LnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyk7RXh0LmVhY2godGhpcy5sYWJlbEZuLGZ1bmN0aW9uKGEpe3RoaXMucmVtb3ZlRm5Qcm94eShhKX0sdGhpcyl9fSk7RXh0LnJlZygiY2FydGVzaWFuY2hhcnQiLEV4dC5jaGFydC5DYXJ0ZXNpYW5DaGFydCk7RXh0LmNoYXJ0LkxpbmVDaGFydD1FeHQuZXh0ZW5kKEV4dC5jaGFydC5DYXJ0ZXNpYW5DaGFydCx7dHlwZToibGluZSJ9KTtFeHQucmVnKCJsaW5lY2hhcnQiLEV4dC5jaGFydC5MaW5lQ2hhcnQpO0V4dC5jaGFydC5Db2x1bW5DaGFydD1FeHQuZXh0ZW5kKEV4dC5jaGFydC5DYXJ0ZXNpYW5DaGFydCx7dHlwZToiY29sdW1uIn0pO0V4dC5yZWcoImNvbHVtbmNoYXJ0IixFeHQuY2hhcnQuQ29sdW1uQ2hhcnQpO0V4dC5jaGFydC5TdGFja2VkQ29sdW1uQ2hhcnQ9RXh0LmV4dGVuZChFeHQuY2hhcnQuQ2FydGVzaWFuQ2hhcnQse3R5cGU6InN0YWNrY29sdW1uIn0pO0V4dC5yZWcoInN0YWNrZWRjb2x1bW5jaGFydCIsRXh0LmNoYXJ0LlN0YWNrZWRDb2x1bW5DaGFydCk7RXh0LmNoYXJ0LkJhckNoYXJ0PUV4dC5leHRlbmQoRXh0LmNoYXJ0LkNhcnRlc2lhbkNoYXJ0LHt0eXBlOiJiYXIifSk7RXh0LnJlZygiYmFyY2hhcnQiLEV4dC5jaGFydC5CYXJDaGFydCk7RXh0LmNoYXJ0LlN0YWNrZWRCYXJDaGFydD1FeHQuZXh0ZW5kKEV4dC5jaGFydC5DYXJ0ZXNpYW5DaGFydCx7dHlwZToic3RhY2tiYXIifSk7RXh0LnJlZygic3RhY2tlZGJhcmNoYXJ0IixFeHQuY2hhcnQuU3RhY2tlZEJhckNoYXJ0KTtFeHQuY2hhcnQuQXhpcz1mdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKX07RXh0LmNoYXJ0LkF4aXMucHJvdG90eXBlPXt0eXBlOm51bGwsb3JpZW50YXRpb246Imhvcml6b250YWwiLHJldmVyc2U6ZmFsc2UsbGFiZWxGdW5jdGlvbjpudWxsLGhpZGVPdmVybGFwcGluZ0xhYmVsczp0cnVlLGxhYmVsU3BhY2luZzoyfTtFeHQuY2hhcnQuTnVtZXJpY0F4aXM9RXh0LmV4dGVuZChFeHQuY2hhcnQuQXhpcyx7dHlwZToibnVtZXJpYyIsbWluaW11bTpOYU4sbWF4aW11bTpOYU4sbWFqb3JVbml0Ok5hTixtaW5vclVuaXQ6TmFOLHNuYXBUb1VuaXRzOnRydWUsYWx3YXlzU2hvd1plcm86dHJ1ZSxzY2FsZToibGluZWFyIixyb3VuZE1ham9yVW5pdDp0cnVlLGNhbGN1bGF0ZUJ5TGFiZWxTaXplOnRydWUscG9zaXRpb246ImxlZnQiLGFkanVzdE1heGltdW1CeU1ham9yVW5pdDp0cnVlLGFkanVzdE1pbmltdW1CeU1ham9yVW5pdDp0cnVlfSk7RXh0LmNoYXJ0LlRpbWVBeGlzPUV4dC5leHRlbmQoRXh0LmNoYXJ0LkF4aXMse3R5cGU6InRpbWUiLG1pbmltdW06bnVsbCxtYXhpbXVtOm51bGwsbWFqb3JVbml0Ok5hTixtYWpvclRpbWVVbml0Om51bGwsbWlub3JVbml0Ok5hTixtaW5vclRpbWVVbml0Om51bGwsc25hcFRvVW5pdHM6dHJ1ZSxzdGFja2luZ0VuYWJsZWQ6ZmFsc2UsY2FsY3VsYXRlQnlMYWJlbFNpemU6dHJ1ZX0pO0V4dC5jaGFydC5DYXRlZ29yeUF4aXM9RXh0LmV4dGVuZChFeHQuY2hhcnQuQXhpcyx7dHlwZToiY2F0ZWdvcnkiLGNhdGVnb3J5TmFtZXM6bnVsbCxjYWxjdWxhdGVDYXRlZ29yeUNvdW50OmZhbHNlfSk7RXh0LmNoYXJ0LlNlcmllcz1mdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKX07RXh0LmNoYXJ0LlNlcmllcy5wcm90b3R5cGU9e3R5cGU6bnVsbCxkaXNwbGF5TmFtZTpudWxsfTtFeHQuY2hhcnQuQ2FydGVzaWFuU2VyaWVzPUV4dC5leHRlbmQoRXh0LmNoYXJ0LlNlcmllcyx7eEZpZWxkOm51bGwseUZpZWxkOm51bGwsc2hvd0luTGVnZW5kOnRydWUsYXhpczoicHJpbWFyeSJ9KTtFeHQuY2hhcnQuQ29sdW1uU2VyaWVzPUV4dC5leHRlbmQoRXh0LmNoYXJ0LkNhcnRlc2lhblNlcmllcyx7dHlwZToiY29sdW1uIn0pO0V4dC5jaGFydC5MaW5lU2VyaWVzPUV4dC5leHRlbmQoRXh0LmNoYXJ0LkNhcnRlc2lhblNlcmllcyx7dHlwZToibGluZSJ9KTtFeHQuY2hhcnQuQmFyU2VyaWVzPUV4dC5leHRlbmQoRXh0LmNoYXJ0LkNhcnRlc2lhblNlcmllcyx7dHlwZToiYmFyIn0pO0V4dC5jaGFydC5QaWVTZXJpZXM9RXh0LmV4dGVuZChFeHQuY2hhcnQuU2VyaWVzLHt0eXBlOiJwaWUiLGRhdGFGaWVsZDpudWxsLGNhdGVnb3J5RmllbGQ6bnVsbH0pO0V4dC5tZW51Lk1lbnU9RXh0LmV4dGVuZChFeHQuQ29udGFpbmVyLHttaW5XaWR0aDoxMjAsc2hhZG93OiJzaWRlcyIsc3ViTWVudUFsaWduOiJ0bC10cj8iLGRlZmF1bHRBbGlnbjoidGwtYmw/IixhbGxvd090aGVyTWVudXM6ZmFsc2UsaWdub3JlUGFyZW50Q2xpY2tzOmZhbHNlLGVuYWJsZVNjcm9sbGluZzp0cnVlLG1heEhlaWdodDpudWxsLHNjcm9sbEluY3JlbWVudDoyNCxzaG93U2VwYXJhdG9yOnRydWUsZGVmYXVsdE9mZnNldHM6WzAsMF0scGxhaW46ZmFsc2UsZmxvYXRpbmc6dHJ1ZSx6SW5kZXg6MTUwMDAsaGlkZGVuOnRydWUsbGF5b3V0OiJtZW51IixoaWRlTW9kZToib2Zmc2V0cyIsc2Nyb2xsZXJIZWlnaHQ6OCxhdXRvTGF5b3V0OnRydWUsZGVmYXVsdFR5cGU6Im1lbnVpdGVtIixidWZmZXJSZXNpemU6ZmFsc2UsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe2lmKEV4dC5pc0FycmF5KHRoaXMuaW5pdGlhbENvbmZpZykpe0V4dC5hcHBseSh0aGlzLHtpdGVtczp0aGlzLmluaXRpYWxDb25maWd9KX10aGlzLmFkZEV2ZW50cygiY2xpY2siLCJtb3VzZW92ZXIiLCJtb3VzZW91dCIsIml0ZW1jbGljayIpO0V4dC5tZW51Lk1lbnVNZ3IucmVnaXN0ZXIodGhpcyk7aWYodGhpcy5mbG9hdGluZyl7RXh0LkV2ZW50TWFuYWdlci5vbldpbmRvd1Jlc2l6ZSh0aGlzLmhpZGUsdGhpcyl9ZWxzZXtpZih0aGlzLmluaXRpYWxDb25maWcuaGlkZGVuIT09ZmFsc2Upe3RoaXMuaGlkZGVuPWZhbHNlfXRoaXMuaW50ZXJuYWxEZWZhdWx0cz17aGlkZU9uQ2xpY2s6ZmFsc2V9fUV4dC5tZW51Lk1lbnUuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7aWYodGhpcy5hdXRvTGF5b3V0KXt2YXIgYT10aGlzLmRvTGF5b3V0LmNyZWF0ZURlbGVnYXRlKHRoaXMsW10pO3RoaXMub24oe2FkZDphLHJlbW92ZTphfSl9fSxnZXRMYXlvdXRUYXJnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51bH0sb25SZW5kZXI6ZnVuY3Rpb24oYixhKXtpZighYil7Yj1FeHQuZ2V0Qm9keSgpfXZhciBjPXtpZDp0aGlzLmdldElkKCksY2xzOiJ4LW1lbnUgIisoKHRoaXMuZmxvYXRpbmcpPyJ4LW1lbnUtZmxvYXRpbmcgeC1sYXllciAiOiIiKSsodGhpcy5jbHN8fCIiKSsodGhpcy5wbGFpbj8iIHgtbWVudS1wbGFpbiI6IiIpKyh0aGlzLnNob3dTZXBhcmF0b3I/IiI6IiB4LW1lbnUtbm9zZXAiKSxzdHlsZTp0aGlzLnN0eWxlLGNuOlt7dGFnOiJhIixjbHM6IngtbWVudS1mb2N1cyIsaHJlZjoiIyIsb25jbGljazoicmV0dXJuIGZhbHNlOyIsdGFiSW5kZXg6Ii0xIn0se3RhZzoidWwiLGNsczoieC1tZW51LWxpc3QifV19O2lmKHRoaXMuZmxvYXRpbmcpe3RoaXMuZWw9bmV3IEV4dC5MYXllcih7c2hhZG93OnRoaXMuc2hhZG93LGRoOmMsY29uc3RyYWluOmZhbHNlLHBhcmVudEVsOmIsemluZGV4OnRoaXMuekluZGV4fSl9ZWxzZXt0aGlzLmVsPWIuY3JlYXRlQ2hpbGQoYyl9RXh0Lm1lbnUuTWVudS5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxiLGEpO2lmKCF0aGlzLmtleU5hdil7dGhpcy5rZXlOYXY9bmV3IEV4dC5tZW51Lk1lbnVOYXYodGhpcyl9dGhpcy5mb2N1c0VsPXRoaXMuZWwuY2hpbGQoImEueC1tZW51LWZvY3VzIik7dGhpcy51bD10aGlzLmVsLmNoaWxkKCJ1bC54LW1lbnUtbGlzdCIpO3RoaXMubW9uKHRoaXMudWwse3Njb3BlOnRoaXMsY2xpY2s6dGhpcy5vbkNsaWNrLG1vdXNlb3Zlcjp0aGlzLm9uTW91c2VPdmVyLG1vdXNlb3V0OnRoaXMub25Nb3VzZU91dH0pO2lmKHRoaXMuZW5hYmxlU2Nyb2xsaW5nKXt0aGlzLm1vbih0aGlzLmVsLHtzY29wZTp0aGlzLGRlbGVnYXRlOiIueC1tZW51LXNjcm9sbGVyIixjbGljazp0aGlzLm9uU2Nyb2xsLG1vdXNlb3Zlcjp0aGlzLmRlYWN0aXZhdGVBY3RpdmV9KX19LGZpbmRUYXJnZXRJdGVtOmZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0VGFyZ2V0KCIueC1tZW51LWxpc3QtaXRlbSIsdGhpcy51bCx0cnVlKTtpZihhJiZhLm1lbnVJdGVtSWQpe3JldHVybiB0aGlzLml0ZW1zLmdldChhLm1lbnVJdGVtSWQpfX0sb25DbGljazpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmZpbmRUYXJnZXRJdGVtKGIpO2lmKGEpe2lmKGEuaXNGb3JtRmllbGQpe3RoaXMuc2V0QWN0aXZlSXRlbShhKX1lbHNle2lmKGEgaW5zdGFuY2VvZiBFeHQubWVudS5CYXNlSXRlbSl7aWYoYS5tZW51JiZ0aGlzLmlnbm9yZVBhcmVudENsaWNrcyl7YS5leHBhbmRNZW51KCk7Yi5wcmV2ZW50RGVmYXVsdCgpfWVsc2V7aWYoYS5vbkNsaWNrKXthLm9uQ2xpY2soYik7dGhpcy5maXJlRXZlbnQoImNsaWNrIix0aGlzLGEsYil9fX19fX0sc2V0QWN0aXZlSXRlbTpmdW5jdGlvbihhLGIpe2lmKGEhPXRoaXMuYWN0aXZlSXRlbSl7dGhpcy5kZWFjdGl2YXRlQWN0aXZlKCk7aWYoKHRoaXMuYWN0aXZlSXRlbT1hKS5pc0Zvcm1GaWVsZCl7YS5mb2N1cygpfWVsc2V7YS5hY3RpdmF0ZShiKX19ZWxzZXtpZihiKXthLmV4cGFuZE1lbnUoKX19fSxkZWFjdGl2YXRlQWN0aXZlOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5hY3RpdmVJdGVtO2lmKGIpe2lmKGIuaXNGb3JtRmllbGQpe2lmKGIuY29sbGFwc2Upe2IuY29sbGFwc2UoKX19ZWxzZXtiLmRlYWN0aXZhdGUoKX1kZWxldGUgdGhpcy5hY3RpdmVJdGVtfX0sdHJ5QWN0aXZhdGU6ZnVuY3Rpb24oZyxlKXt2YXIgYj10aGlzLml0ZW1zO2Zvcih2YXIgYz1nLGE9Yi5sZW5ndGg7Yz49MCYmYzxhO2MrPWUpe3ZhciBkPWIuZ2V0KGMpO2lmKGQuaXNWaXNpYmxlKCkmJiFkLmRpc2FibGVkJiYoZC5jYW5BY3RpdmF0ZXx8ZC5pc0Zvcm1GaWVsZCkpe3RoaXMuc2V0QWN0aXZlSXRlbShkLGZhbHNlKTtyZXR1cm4gZH19cmV0dXJuIGZhbHNlfSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmZpbmRUYXJnZXRJdGVtKGIpO2lmKGEpe2lmKGEuY2FuQWN0aXZhdGUmJiFhLmRpc2FibGVkKXt0aGlzLnNldEFjdGl2ZUl0ZW0oYSx0cnVlKX19dGhpcy5vdmVyPXRydWU7dGhpcy5maXJlRXZlbnQoIm1vdXNlb3ZlciIsdGhpcyxiLGEpfSxvbk1vdXNlT3V0OmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZmluZFRhcmdldEl0ZW0oYik7aWYoYSl7aWYoYT09dGhpcy5hY3RpdmVJdGVtJiZhLnNob3VsZERlYWN0aXZhdGUmJmEuc2hvdWxkRGVhY3RpdmF0ZShiKSl7dGhpcy5hY3RpdmVJdGVtLmRlYWN0aXZhdGUoKTtkZWxldGUgdGhpcy5hY3RpdmVJdGVtfX10aGlzLm92ZXI9ZmFsc2U7dGhpcy5maXJlRXZlbnQoIm1vdXNlb3V0Iix0aGlzLGIsYSl9LG9uU2Nyb2xsOmZ1bmN0aW9uKGQsYil7aWYoZCl7ZC5zdG9wRXZlbnQoKX12YXIgYT10aGlzLnVsLmRvbSxjPUV4dC5mbHkoYikuaXMoIi54LW1lbnUtc2Nyb2xsZXItdG9wIik7YS5zY3JvbGxUb3ArPXRoaXMuc2Nyb2xsSW5jcmVtZW50KihjPy0xOjEpO2lmKGM/YS5zY3JvbGxUb3A8PTA6YS5zY3JvbGxUb3ArdGhpcy5hY3RpdmVNYXg+PWEuc2Nyb2xsSGVpZ2h0KXt0aGlzLm9uU2Nyb2xsZXJPdXQobnVsbCxiKX19LG9uU2Nyb2xsZXJJbjpmdW5jdGlvbihkLGIpe3ZhciBhPXRoaXMudWwuZG9tLGM9RXh0LmZseShiKS5pcygiLngtbWVudS1zY3JvbGxlci10b3AiKTtpZihjP2Euc2Nyb2xsVG9wPjA6YS5zY3JvbGxUb3ArdGhpcy5hY3RpdmVNYXg8YS5zY3JvbGxIZWlnaHQpe0V4dC5mbHkoYikuYWRkQ2xhc3MoWyJ4LW1lbnUtaXRlbS1hY3RpdmUiLCJ4LW1lbnUtc2Nyb2xsZXItYWN0aXZlIl0pfX0sb25TY3JvbGxlck91dDpmdW5jdGlvbihiLGEpe0V4dC5mbHkoYSkucmVtb3ZlQ2xhc3MoWyJ4LW1lbnUtaXRlbS1hY3RpdmUiLCJ4LW1lbnUtc2Nyb2xsZXItYWN0aXZlIl0pfSxzaG93OmZ1bmN0aW9uKGIsYyxhKXtpZih0aGlzLmZsb2F0aW5nKXt0aGlzLnBhcmVudE1lbnU9YTtpZighdGhpcy5lbCl7dGhpcy5yZW5kZXIoKTt0aGlzLmRvTGF5b3V0KGZhbHNlLHRydWUpfXRoaXMuc2hvd0F0KHRoaXMuZWwuZ2V0QWxpZ25Ub1hZKGIsY3x8dGhpcy5kZWZhdWx0QWxpZ24sdGhpcy5kZWZhdWx0T2Zmc2V0cyksYSl9ZWxzZXtFeHQubWVudS5NZW51LnN1cGVyY2xhc3Muc2hvdy5jYWxsKHRoaXMpfX0sc2hvd0F0OmZ1bmN0aW9uKGIsYSl7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZXNob3ciLHRoaXMpIT09ZmFsc2Upe3RoaXMucGFyZW50TWVudT1hO2lmKCF0aGlzLmVsKXt0aGlzLnJlbmRlcigpfWlmKHRoaXMuZW5hYmxlU2Nyb2xsaW5nKXt0aGlzLmVsLnNldFhZKGIpO2JbMV09dGhpcy5jb25zdHJhaW5TY3JvbGwoYlsxXSk7Yj1bdGhpcy5lbC5hZGp1c3RGb3JDb25zdHJhaW50cyhiKVswXSxiWzFdXX1lbHNle2I9dGhpcy5lbC5hZGp1c3RGb3JDb25zdHJhaW50cyhiKX10aGlzLmVsLnNldFhZKGIpO3RoaXMuZWwuc2hvdygpO0V4dC5tZW51Lk1lbnUuc3VwZXJjbGFzcy5vblNob3cuY2FsbCh0aGlzKTtpZihFeHQuaXNJRSl7dGhpcy5maXJlRXZlbnQoImF1dG9zaXplIix0aGlzKTtpZighRXh0LmlzSUU4KXt0aGlzLmVsLnJlcGFpbnQoKX19dGhpcy5oaWRkZW49ZmFsc2U7dGhpcy5mb2N1cygpO3RoaXMuZmlyZUV2ZW50KCJzaG93Iix0aGlzKX19LGNvbnN0cmFpblNjcm9sbDpmdW5jdGlvbihpKXt2YXIgYixkPXRoaXMudWwuc2V0SGVpZ2h0KCJhdXRvIikuZ2V0SGVpZ2h0KCksYT1pLGgsZSxnLGM7aWYodGhpcy5mbG9hdGluZyl7ZT1FeHQuZmx5KHRoaXMuZWwuZG9tLnBhcmVudE5vZGUpO2c9ZS5nZXRTY3JvbGwoKS50b3A7Yz1lLmdldFZpZXdTaXplKCkuaGVpZ2h0O2g9aS1nO2I9dGhpcy5tYXhIZWlnaHQ/dGhpcy5tYXhIZWlnaHQ6Yy1oO2lmKGQ+Yyl7Yj1jO2E9aS1ofWVsc2V7aWYoYjxkKXthPWktKGQtYik7Yj1kfX19ZWxzZXtiPXRoaXMuZ2V0SGVpZ2h0KCl9aWYodGhpcy5tYXhIZWlnaHQpe2I9TWF0aC5taW4odGhpcy5tYXhIZWlnaHQsYil9aWYoZD5iJiZiPjApe3RoaXMuYWN0aXZlTWF4PWItdGhpcy5zY3JvbGxlckhlaWdodCoyLXRoaXMuZWwuZ2V0RnJhbWVXaWR0aCgidGIiKS1FeHQubnVtKHRoaXMuZWwuc2hhZG93T2Zmc2V0LDApO3RoaXMudWwuc2V0SGVpZ2h0KHRoaXMuYWN0aXZlTWF4KTt0aGlzLmNyZWF0ZVNjcm9sbGVycygpO3RoaXMuZWwuc2VsZWN0KCIueC1tZW51LXNjcm9sbGVyIikuc2V0RGlzcGxheWVkKCIiKX1lbHNle3RoaXMudWwuc2V0SGVpZ2h0KGQpO3RoaXMuZWwuc2VsZWN0KCIueC1tZW51LXNjcm9sbGVyIikuc2V0RGlzcGxheWVkKCJub25lIil9dGhpcy51bC5kb20uc2Nyb2xsVG9wPTA7cmV0dXJuIGF9LGNyZWF0ZVNjcm9sbGVyczpmdW5jdGlvbigpe2lmKCF0aGlzLnNjcm9sbGVyKXt0aGlzLnNjcm9sbGVyPXtwb3M6MCx0b3A6dGhpcy5lbC5pbnNlcnRGaXJzdCh7dGFnOiJkaXYiLGNsczoieC1tZW51LXNjcm9sbGVyIHgtbWVudS1zY3JvbGxlci10b3AiLGh0bWw6IiYjMTYwOyJ9KSxib3R0b206dGhpcy5lbC5jcmVhdGVDaGlsZCh7dGFnOiJkaXYiLGNsczoieC1tZW51LXNjcm9sbGVyIHgtbWVudS1zY3JvbGxlci1ib3R0b20iLGh0bWw6IiYjMTYwOyJ9KX07dGhpcy5zY3JvbGxlci50b3AuaG92ZXIodGhpcy5vblNjcm9sbGVySW4sdGhpcy5vblNjcm9sbGVyT3V0LHRoaXMpO3RoaXMuc2Nyb2xsZXIudG9wUmVwZWF0ZXI9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIodGhpcy5zY3JvbGxlci50b3Ase2xpc3RlbmVyczp7Y2xpY2s6dGhpcy5vblNjcm9sbC5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtudWxsLHRoaXMuc2Nyb2xsZXIudG9wXSxmYWxzZSl9fSk7dGhpcy5zY3JvbGxlci5ib3R0b20uaG92ZXIodGhpcy5vblNjcm9sbGVySW4sdGhpcy5vblNjcm9sbGVyT3V0LHRoaXMpO3RoaXMuc2Nyb2xsZXIuYm90dG9tUmVwZWF0ZXI9bmV3IEV4dC51dGlsLkNsaWNrUmVwZWF0ZXIodGhpcy5zY3JvbGxlci5ib3R0b20se2xpc3RlbmVyczp7Y2xpY2s6dGhpcy5vblNjcm9sbC5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtudWxsLHRoaXMuc2Nyb2xsZXIuYm90dG9tXSxmYWxzZSl9fSl9fSxvbkxheW91dDpmdW5jdGlvbigpe2lmKHRoaXMuaXNWaXNpYmxlKCkpe2lmKHRoaXMuZW5hYmxlU2Nyb2xsaW5nKXt0aGlzLmNvbnN0cmFpblNjcm9sbCh0aGlzLmVsLmdldFRvcCgpKX1pZih0aGlzLmZsb2F0aW5nKXt0aGlzLmVsLnN5bmMoKX19fSxmb2N1czpmdW5jdGlvbigpe2lmKCF0aGlzLmhpZGRlbil7dGhpcy5kb0ZvY3VzLmRlZmVyKDUwLHRoaXMpfX0sZG9Gb2N1czpmdW5jdGlvbigpe2lmKCF0aGlzLmhpZGRlbil7dGhpcy5mb2N1c0VsLmZvY3VzKCl9fSxoaWRlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRGVzdHJveWVkKXt0aGlzLmRlZXBIaWRlPWE7RXh0Lm1lbnUuTWVudS5zdXBlcmNsYXNzLmhpZGUuY2FsbCh0aGlzKTtkZWxldGUgdGhpcy5kZWVwSGlkZX19LG9uSGlkZTpmdW5jdGlvbigpe0V4dC5tZW51Lk1lbnUuc3VwZXJjbGFzcy5vbkhpZGUuY2FsbCh0aGlzKTt0aGlzLmRlYWN0aXZhdGVBY3RpdmUoKTtpZih0aGlzLmVsJiZ0aGlzLmZsb2F0aW5nKXt0aGlzLmVsLmhpZGUoKX12YXIgYT10aGlzLnBhcmVudE1lbnU7aWYodGhpcy5kZWVwSGlkZT09PXRydWUmJmEpe2lmKGEuZmxvYXRpbmcpe2EuaGlkZSh0cnVlKX1lbHNle2EuZGVhY3RpdmF0ZUFjdGl2ZSgpfX19LGxvb2t1cENvbXBvbmVudDpmdW5jdGlvbihhKXtpZihFeHQuaXNTdHJpbmcoYSkpe2E9KGE9PSJzZXBhcmF0b3IifHxhPT0iLSIpP25ldyBFeHQubWVudS5TZXBhcmF0b3IoKTpuZXcgRXh0Lm1lbnUuVGV4dEl0ZW0oYSk7dGhpcy5hcHBseURlZmF1bHRzKGEpfWVsc2V7aWYoRXh0LmlzT2JqZWN0KGEpKXthPXRoaXMuZ2V0TWVudUl0ZW0oYSl9ZWxzZXtpZihhLnRhZ05hbWV8fGEuZWwpe2E9bmV3IEV4dC5Cb3hDb21wb25lbnQoe2VsOmF9KX19fXJldHVybiBhfSxhcHBseURlZmF1bHRzOmZ1bmN0aW9uKGIpe2lmKCFFeHQuaXNTdHJpbmcoYikpe2I9RXh0Lm1lbnUuTWVudS5zdXBlcmNsYXNzLmFwcGx5RGVmYXVsdHMuY2FsbCh0aGlzLGIpO3ZhciBhPXRoaXMuaW50ZXJuYWxEZWZhdWx0cztpZihhKXtpZihiLmV2ZW50cyl7RXh0LmFwcGx5SWYoYi5pbml0aWFsQ29uZmlnLGEpO0V4dC5hcHBseShiLGEpfWVsc2V7RXh0LmFwcGx5SWYoYixhKX19fXJldHVybiBifSxnZXRNZW51SXRlbTpmdW5jdGlvbihhKXthLm93bmVyQ3Q9dGhpcztpZighYS5pc1hUeXBlKXtpZighYS54dHlwZSYmRXh0LmlzQm9vbGVhbihhLmNoZWNrZWQpKXtyZXR1cm4gbmV3IEV4dC5tZW51LkNoZWNrSXRlbShhKX1yZXR1cm4gRXh0LmNyZWF0ZShhLHRoaXMuZGVmYXVsdFR5cGUpfXJldHVybiBhfSxhZGRTZXBhcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hZGQobmV3IEV4dC5tZW51LlNlcGFyYXRvcigpKX0sYWRkRWxlbWVudDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobmV3IEV4dC5tZW51LkJhc2VJdGVtKHtlbDphfSkpfSxhZGRJdGVtOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChhKX0sYWRkTWVudUl0ZW06ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKHRoaXMuZ2V0TWVudUl0ZW0oYSkpfSxhZGRUZXh0OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChuZXcgRXh0Lm1lbnUuVGV4dEl0ZW0oYSkpfSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKHRoaXMuaGlkZSx0aGlzKTt2YXIgYT10aGlzLnBhcmVudE1lbnU7aWYoYSYmYS5hY3RpdmVDaGlsZD09dGhpcyl7ZGVsZXRlIGEuYWN0aXZlQ2hpbGR9ZGVsZXRlIHRoaXMucGFyZW50TWVudTtFeHQubWVudS5NZW51LnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyk7RXh0Lm1lbnUuTWVudU1nci51bnJlZ2lzdGVyKHRoaXMpO2lmKHRoaXMua2V5TmF2KXt0aGlzLmtleU5hdi5kaXNhYmxlKCl9dmFyIGI9dGhpcy5zY3JvbGxlcjtpZihiKXtFeHQuZGVzdHJveShiLnRvcFJlcGVhdGVyLGIuYm90dG9tUmVwZWF0ZXIsYi50b3AsYi5ib3R0b20pfUV4dC5kZXN0cm95KHRoaXMuZWwsdGhpcy5mb2N1c0VsLHRoaXMudWwpfX0pO0V4dC5yZWcoIm1lbnUiLEV4dC5tZW51Lk1lbnUpO0V4dC5tZW51Lk1lbnVOYXY9RXh0LmV4dGVuZChFeHQuS2V5TmF2LGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShkLGMpe2lmKCFjLnRyeUFjdGl2YXRlKGMuaXRlbXMuaW5kZXhPZihjLmFjdGl2ZUl0ZW0pLTEsLTEpKXtjLnRyeUFjdGl2YXRlKGMuaXRlbXMubGVuZ3RoLTEsLTEpfX1mdW5jdGlvbiBiKGQsYyl7aWYoIWMudHJ5QWN0aXZhdGUoYy5pdGVtcy5pbmRleE9mKGMuYWN0aXZlSXRlbSkrMSwxKSl7Yy50cnlBY3RpdmF0ZSgwLDEpfX1yZXR1cm57Y29uc3RydWN0b3I6ZnVuY3Rpb24oYyl7RXh0Lm1lbnUuTWVudU5hdi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxjLmVsKTt0aGlzLnNjb3BlPXRoaXMubWVudT1jfSxkb1JlbGF5OmZ1bmN0aW9uKGcsZCl7dmFyIGM9Zy5nZXRLZXkoKTtpZih0aGlzLm1lbnUuYWN0aXZlSXRlbSYmdGhpcy5tZW51LmFjdGl2ZUl0ZW0uaXNGb3JtRmllbGQmJmMhPWcuVEFCKXtyZXR1cm4gZmFsc2V9aWYoIXRoaXMubWVudS5hY3RpdmVJdGVtJiZnLmlzTmF2S2V5UHJlc3MoKSYmYyE9Zy5TUEFDRSYmYyE9Zy5SRVRVUk4pe3RoaXMubWVudS50cnlBY3RpdmF0ZSgwLDEpO3JldHVybiBmYWxzZX1yZXR1cm4gZC5jYWxsKHRoaXMuc2NvcGV8fHRoaXMsZyx0aGlzLm1lbnUpfSx0YWI6ZnVuY3Rpb24oZCxjKXtkLnN0b3BFdmVudCgpO2lmKGQuc2hpZnRLZXkpe2EoZCxjKX1lbHNle2IoZCxjKX19LHVwOmEsZG93bjpiLHJpZ2h0OmZ1bmN0aW9uKGQsYyl7aWYoYy5hY3RpdmVJdGVtKXtjLmFjdGl2ZUl0ZW0uZXhwYW5kTWVudSh0cnVlKX19LGxlZnQ6ZnVuY3Rpb24oZCxjKXtjLmhpZGUoKTtpZihjLnBhcmVudE1lbnUmJmMucGFyZW50TWVudS5hY3RpdmVJdGVtKXtjLnBhcmVudE1lbnUuYWN0aXZlSXRlbS5hY3RpdmF0ZSgpfX0sZW50ZXI6ZnVuY3Rpb24oZCxjKXtpZihjLmFjdGl2ZUl0ZW0pe2Quc3RvcFByb3BhZ2F0aW9uKCk7Yy5hY3RpdmVJdGVtLm9uQ2xpY2soZCk7Yy5maXJlRXZlbnQoImNsaWNrIix0aGlzLGMuYWN0aXZlSXRlbSk7cmV0dXJuIHRydWV9fX19KCkpO0V4dC5tZW51Lk1lbnVNZ3I9ZnVuY3Rpb24oKXt2YXIgaCxlLGIsZD17fSxhPWZhbHNlLGw9bmV3IERhdGUoKTtmdW5jdGlvbiBuKCl7aD17fTtlPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTtiPUV4dC5nZXREb2MoKS5hZGRLZXlMaXN0ZW5lcigyNyxqKTtiLmRpc2FibGUoKX1mdW5jdGlvbiBqKCl7aWYoZSYmZS5sZW5ndGg+MCl7dmFyIG89ZS5jbG9uZSgpO28uZWFjaChmdW5jdGlvbihwKXtwLmhpZGUoKX0pO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX1mdW5jdGlvbiBnKG8pe2UucmVtb3ZlKG8pO2lmKGUubGVuZ3RoPDEpe2IuZGlzYWJsZSgpO0V4dC5nZXREb2MoKS51bigibW91c2Vkb3duIixtKTthPWZhbHNlfX1mdW5jdGlvbiBrKG8pe3ZhciBwPWUubGFzdCgpO2w9bmV3IERhdGUoKTtlLmFkZChvKTtpZighYSl7Yi5lbmFibGUoKTtFeHQuZ2V0RG9jKCkub24oIm1vdXNlZG93biIsbSk7YT10cnVlfWlmKG8ucGFyZW50TWVudSl7by5nZXRFbCgpLnNldFpJbmRleChwYXJzZUludChvLnBhcmVudE1lbnUuZ2V0RWwoKS5nZXRTdHlsZSgiei1pbmRleCIpLDEwKSszKTtvLnBhcmVudE1lbnUuYWN0aXZlQ2hpbGQ9b31lbHNle2lmKHAmJiFwLmlzRGVzdHJveWVkJiZwLmlzVmlzaWJsZSgpKXtvLmdldEVsKCkuc2V0WkluZGV4KHBhcnNlSW50KHAuZ2V0RWwoKS5nZXRTdHlsZSgiei1pbmRleCIpLDEwKSszKX19fWZ1bmN0aW9uIGMobyl7aWYoby5hY3RpdmVDaGlsZCl7by5hY3RpdmVDaGlsZC5oaWRlKCl9aWYoby5hdXRvSGlkZVRpbWVyKXtjbGVhclRpbWVvdXQoby5hdXRvSGlkZVRpbWVyKTtkZWxldGUgby5hdXRvSGlkZVRpbWVyfX1mdW5jdGlvbiBpKG8pe3ZhciBwPW8ucGFyZW50TWVudTtpZighcCYmIW8uYWxsb3dPdGhlck1lbnVzKXtqKCl9ZWxzZXtpZihwJiZwLmFjdGl2ZUNoaWxkKXtwLmFjdGl2ZUNoaWxkLmhpZGUoKX19fWZ1bmN0aW9uIG0obyl7aWYobC5nZXRFbGFwc2VkKCk+NTAmJmUubGVuZ3RoPjAmJiFvLmdldFRhcmdldCgiLngtbWVudSIpKXtqKCl9fXJldHVybntoaWRlQWxsOmZ1bmN0aW9uKCl7cmV0dXJuIGooKX0scmVnaXN0ZXI6ZnVuY3Rpb24obyl7aWYoIWgpe24oKX1oW28uaWRdPW87by5vbih7YmVmb3JlaGlkZTpjLGhpZGU6ZyxiZWZvcmVzaG93Omksc2hvdzprfSl9LGdldDpmdW5jdGlvbihvKXtpZih0eXBlb2Ygbz09InN0cmluZyIpe2lmKCFoKXtyZXR1cm4gbnVsbH1yZXR1cm4gaFtvXX1lbHNle2lmKG8uZXZlbnRzKXtyZXR1cm4gb31lbHNle2lmKHR5cGVvZiBvLmxlbmd0aD09Im51bWJlciIpe3JldHVybiBuZXcgRXh0Lm1lbnUuTWVudSh7aXRlbXM6b30pfWVsc2V7cmV0dXJuIEV4dC5jcmVhdGUobywibWVudSIpfX19fSx1bnJlZ2lzdGVyOmZ1bmN0aW9uKG8pe2RlbGV0ZSBoW28uaWRdO28udW4oImJlZm9yZWhpZGUiLGMpO28udW4oImhpZGUiLGcpO28udW4oImJlZm9yZXNob3ciLGkpO28udW4oInNob3ciLGspfSxyZWdpc3RlckNoZWNrYWJsZTpmdW5jdGlvbihvKXt2YXIgcD1vLmdyb3VwO2lmKHApe2lmKCFkW3BdKXtkW3BdPVtdfWRbcF0ucHVzaChvKX19LHVucmVnaXN0ZXJDaGVja2FibGU6ZnVuY3Rpb24obyl7dmFyIHA9by5ncm91cDtpZihwKXtkW3BdLnJlbW92ZShvKX19LG9uQ2hlY2tDaGFuZ2U6ZnVuY3Rpb24ocSxyKXtpZihxLmdyb3VwJiZyKXt2YXIgdD1kW3EuZ3JvdXBdLHA9MCxvPXQubGVuZ3RoLHM7Zm9yKDtwPG87cCsrKXtzPXRbcF07aWYocyE9cSl7cy5zZXRDaGVja2VkKGZhbHNlKX19fX0sZ2V0Q2hlY2tlZEl0ZW06ZnVuY3Rpb24ocSl7dmFyIHI9ZFtxXTtpZihyKXtmb3IodmFyIHA9MCxvPXIubGVuZ3RoO3A8bztwKyspe2lmKHJbcF0uY2hlY2tlZCl7cmV0dXJuIHJbcF19fX1yZXR1cm4gbnVsbH0sc2V0Q2hlY2tlZEl0ZW06ZnVuY3Rpb24ocSxzKXt2YXIgcj1kW3FdO2lmKHIpe2Zvcih2YXIgcD0wLG89ci5sZW5ndGg7cDxvO3ArKyl7aWYocltwXS5pZD09cyl7cltwXS5zZXRDaGVja2VkKHRydWUpfX19cmV0dXJuIG51bGx9fX0oKTtFeHQubWVudS5CYXNlSXRlbT1FeHQuZXh0ZW5kKEV4dC5Db21wb25lbnQse2NhbkFjdGl2YXRlOmZhbHNlLGFjdGl2ZUNsYXNzOiJ4LW1lbnUtaXRlbS1hY3RpdmUiLGhpZGVPbkNsaWNrOnRydWUsY2xpY2tIaWRlRGVsYXk6MSxjdHlwZToiRXh0Lm1lbnUuQmFzZUl0ZW0iLGFjdGlvbk1vZGU6ImNvbnRhaW5lciIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5tZW51LkJhc2VJdGVtLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMuYWRkRXZlbnRzKCJjbGljayIsImFjdGl2YXRlIiwiZGVhY3RpdmF0ZSIpO2lmKHRoaXMuaGFuZGxlcil7dGhpcy5vbigiY2xpY2siLHRoaXMuaGFuZGxlcix0aGlzLnNjb3BlKX19LG9uUmVuZGVyOmZ1bmN0aW9uKGIsYSl7RXh0Lm1lbnUuQmFzZUl0ZW0uc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5vd25lckN0JiZ0aGlzLm93bmVyQ3QgaW5zdGFuY2VvZiBFeHQubWVudS5NZW51KXt0aGlzLnBhcmVudE1lbnU9dGhpcy5vd25lckN0fWVsc2V7dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoIngtbWVudS1saXN0LWl0ZW0iKTt0aGlzLm1vbih0aGlzLmVsLHtzY29wZTp0aGlzLGNsaWNrOnRoaXMub25DbGljayxtb3VzZWVudGVyOnRoaXMuYWN0aXZhdGUsbW91c2VsZWF2ZTp0aGlzLmRlYWN0aXZhdGV9KX19LHNldEhhbmRsZXI6ZnVuY3Rpb24oYixhKXtpZih0aGlzLmhhbmRsZXIpe3RoaXMudW4oImNsaWNrIix0aGlzLmhhbmRsZXIsdGhpcy5zY29wZSl9dGhpcy5vbigiY2xpY2siLHRoaXMuaGFuZGxlcj1iLHRoaXMuc2NvcGU9YSl9LG9uQ2xpY2s6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuZGlzYWJsZWQmJnRoaXMuZmlyZUV2ZW50KCJjbGljayIsdGhpcyxhKSE9PWZhbHNlJiYodGhpcy5wYXJlbnRNZW51JiZ0aGlzLnBhcmVudE1lbnUuZmlyZUV2ZW50KCJpdGVtY2xpY2siLHRoaXMsYSkhPT1mYWxzZSkpe3RoaXMuaGFuZGxlQ2xpY2soYSl9ZWxzZXthLnN0b3BFdmVudCgpfX0sYWN0aXZhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm4gZmFsc2V9dmFyIGE9dGhpcy5jb250YWluZXI7YS5hZGRDbGFzcyh0aGlzLmFjdGl2ZUNsYXNzKTt0aGlzLnJlZ2lvbj1hLmdldFJlZ2lvbigpLmFkanVzdCgyLDIsLTIsLTIpO3RoaXMuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsdGhpcyk7cmV0dXJuIHRydWV9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXt0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcyh0aGlzLmFjdGl2ZUNsYXNzKTt0aGlzLmZpcmVFdmVudCgiZGVhY3RpdmF0ZSIsdGhpcyl9LHNob3VsZERlYWN0aXZhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuICF0aGlzLnJlZ2lvbnx8IXRoaXMucmVnaW9uLmNvbnRhaW5zKGEuZ2V0UG9pbnQoKSl9LGhhbmRsZUNsaWNrOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMucGFyZW50TWVudTtpZih0aGlzLmhpZGVPbkNsaWNrKXtpZihhLmZsb2F0aW5nKXt0aGlzLmNsaWNrSGlkZURlbGF5VGltZXI9YS5oaWRlLmRlZmVyKHRoaXMuY2xpY2tIaWRlRGVsYXksYSxbdHJ1ZV0pfWVsc2V7YS5kZWFjdGl2YXRlQWN0aXZlKCl9fX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLmNsaWNrSGlkZURlbGF5VGltZXIpO0V4dC5tZW51LkJhc2VJdGVtLnN1cGVyY2xhc3MuYmVmb3JlRGVzdHJveS5jYWxsKHRoaXMpfSxleHBhbmRNZW51OkV4dC5lbXB0eUZuLGhpZGVNZW51OkV4dC5lbXB0eUZufSk7RXh0LnJlZygibWVudWJhc2VpdGVtIixFeHQubWVudS5CYXNlSXRlbSk7RXh0Lm1lbnUuVGV4dEl0ZW09RXh0LmV4dGVuZChFeHQubWVudS5CYXNlSXRlbSx7aGlkZU9uQ2xpY2s6ZmFsc2UsaXRlbUNsczoieC1tZW51LXRleHQiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe2lmKHR5cGVvZiBhPT0ic3RyaW5nIil7YT17dGV4dDphfX1FeHQubWVudS5UZXh0SXRlbS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7YS5jbGFzc05hbWU9dGhpcy5pdGVtQ2xzO2EuaW5uZXJIVE1MPXRoaXMudGV4dDt0aGlzLmVsPWE7RXh0Lm1lbnUuVGV4dEl0ZW0uc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7RXh0LnJlZygibWVudXRleHRpdGVtIixFeHQubWVudS5UZXh0SXRlbSk7RXh0Lm1lbnUuU2VwYXJhdG9yPUV4dC5leHRlbmQoRXh0Lm1lbnUuQmFzZUl0ZW0se2l0ZW1DbHM6IngtbWVudS1zZXAiLGhpZGVPbkNsaWNrOmZhbHNlLGFjdGl2ZUNsYXNzOiIiLG9uUmVuZGVyOmZ1bmN0aW9uKGEpe3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtiLmNsYXNzTmFtZT10aGlzLml0ZW1DbHM7Yi5pbm5lckhUTUw9IiYjMTYwOyI7dGhpcy5lbD1iO2EuYWRkQ2xhc3MoIngtbWVudS1zZXAtbGkiKTtFeHQubWVudS5TZXBhcmF0b3Iuc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7RXh0LnJlZygibWVudXNlcGFyYXRvciIsRXh0Lm1lbnUuU2VwYXJhdG9yKTtFeHQubWVudS5JdGVtPUV4dC5leHRlbmQoRXh0Lm1lbnUuQmFzZUl0ZW0se2l0ZW1DbHM6IngtbWVudS1pdGVtIixjYW5BY3RpdmF0ZTp0cnVlLHNob3dEZWxheToyMDAsYWx0VGV4dDoiIixoaWRlRGVsYXk6MjAwLGN0eXBlOiJFeHQubWVudS5JdGVtIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0Lm1lbnUuSXRlbS5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZih0aGlzLm1lbnUpe2lmKEV4dC5pc0FycmF5KHRoaXMubWVudSkpe3RoaXMubWVudT17aXRlbXM6dGhpcy5tZW51fX1pZihFeHQuaXNPYmplY3QodGhpcy5tZW51KSl7dGhpcy5tZW51Lm93bmVyQ3Q9dGhpc310aGlzLm1lbnU9RXh0Lm1lbnUuTWVudU1nci5nZXQodGhpcy5tZW51KTt0aGlzLm1lbnUub3duZXJDdD11bmRlZmluZWR9fSxvblJlbmRlcjpmdW5jdGlvbihkLGIpe2lmKCF0aGlzLml0ZW1UcGwpe3RoaXMuaXRlbVRwbD1FeHQubWVudS5JdGVtLnByb3RvdHlwZS5pdGVtVHBsPW5ldyBFeHQuWFRlbXBsYXRlKCc8YSBpZD0ie2lkfSIgY2xhc3M9IntjbHN9IiBoaWRlZm9jdXM9InRydWUiIHVuc2VsZWN0YWJsZT0ib24iIGhyZWY9IntocmVmfSInLCc8dHBsIGlmPSJocmVmVGFyZ2V0Ij4nLCcgdGFyZ2V0PSJ7aHJlZlRhcmdldH0iJywiPC90cGw+IiwiPiIsJzxpbWcgYWx0PSJ7YWx0VGV4dH0iIHNyYz0ie2ljb259IiBjbGFzcz0ieC1tZW51LWl0ZW0taWNvbiB7aWNvbkNsc30iLz4nLCc8c3BhbiBjbGFzcz0ieC1tZW51LWl0ZW0tdGV4dCI+e3RleHR9PC9zcGFuPicsIjwvYT4iKX12YXIgYz10aGlzLmdldFRlbXBsYXRlQXJncygpO3RoaXMuZWw9Yj90aGlzLml0ZW1UcGwuaW5zZXJ0QmVmb3JlKGIsYyx0cnVlKTp0aGlzLml0ZW1UcGwuYXBwZW5kKGQsYyx0cnVlKTt0aGlzLmljb25FbD10aGlzLmVsLmNoaWxkKCJpbWcueC1tZW51LWl0ZW0taWNvbiIpO3RoaXMudGV4dEVsPXRoaXMuZWwuY2hpbGQoIi54LW1lbnUtaXRlbS10ZXh0Iik7aWYoIXRoaXMuaHJlZil7dGhpcy5tb24odGhpcy5lbCwiY2xpY2siLEV4dC5lbXB0eUZuLG51bGwse3ByZXZlbnREZWZhdWx0OnRydWV9KX1FeHQubWVudS5JdGVtLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLGQsYil9LGdldFRlbXBsYXRlQXJnczpmdW5jdGlvbigpe3JldHVybntpZDp0aGlzLmlkLGNsczp0aGlzLml0ZW1DbHMrKHRoaXMubWVudT8iIHgtbWVudS1pdGVtLWFycm93IjoiIikrKHRoaXMuY2xzPyIgIit0aGlzLmNsczoiIiksaHJlZjp0aGlzLmhyZWZ8fCIjIixocmVmVGFyZ2V0OnRoaXMuaHJlZlRhcmdldCxpY29uOnRoaXMuaWNvbnx8RXh0LkJMQU5LX0lNQUdFX1VSTCxpY29uQ2xzOnRoaXMuaWNvbkNsc3x8IiIsdGV4dDp0aGlzLml0ZW1UZXh0fHx0aGlzLnRleHR8fCImIzE2MDsiLGFsdFRleHQ6dGhpcy5hbHRUZXh0fHwiIn19LHNldFRleHQ6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWF8fCImIzE2MDsiO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMudGV4dEVsLnVwZGF0ZSh0aGlzLnRleHQpO3RoaXMucGFyZW50TWVudS5sYXlvdXQuZG9BdXRvU2l6ZSgpfX0sc2V0SWNvbkNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaWNvbkNsczt0aGlzLmljb25DbHM9YTtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmljb25FbC5yZXBsYWNlQ2xhc3MoYix0aGlzLmljb25DbHMpfX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnNob3dUaW1lcik7Y2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKTtpZih0aGlzLm1lbnUpe2RlbGV0ZSB0aGlzLm1lbnUub3duZXJDdDt0aGlzLm1lbnUuZGVzdHJveSgpfUV4dC5tZW51Lkl0ZW0uc3VwZXJjbGFzcy5iZWZvcmVEZXN0cm95LmNhbGwodGhpcyl9LGhhbmRsZUNsaWNrOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmhyZWYpe2Euc3RvcEV2ZW50KCl9RXh0Lm1lbnUuSXRlbS5zdXBlcmNsYXNzLmhhbmRsZUNsaWNrLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYWN0aXZhdGU6ZnVuY3Rpb24oYSl7aWYoRXh0Lm1lbnUuSXRlbS5zdXBlcmNsYXNzLmFjdGl2YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dGhpcy5mb2N1cygpO2lmKGEpe3RoaXMuZXhwYW5kTWVudSgpfX1yZXR1cm4gdHJ1ZX0sc2hvdWxkRGVhY3RpdmF0ZTpmdW5jdGlvbihhKXtpZihFeHQubWVudS5JdGVtLnN1cGVyY2xhc3Muc2hvdWxkRGVhY3RpdmF0ZS5jYWxsKHRoaXMsYSkpe2lmKHRoaXMubWVudSYmdGhpcy5tZW51LmlzVmlzaWJsZSgpKXtyZXR1cm4gIXRoaXMubWVudS5nZXRFbCgpLmdldFJlZ2lvbigpLmNvbnRhaW5zKGEuZ2V0UG9pbnQoKSl9cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfSxkZWFjdGl2YXRlOmZ1bmN0aW9uKCl7RXh0Lm1lbnUuSXRlbS5zdXBlcmNsYXNzLmRlYWN0aXZhdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuaGlkZU1lbnUoKX0sZXhwYW5kTWVudTpmdW5jdGlvbihhKXtpZighdGhpcy5kaXNhYmxlZCYmdGhpcy5tZW51KXtjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZXIpO2RlbGV0ZSB0aGlzLmhpZGVUaW1lcjtpZighdGhpcy5tZW51LmlzVmlzaWJsZSgpJiYhdGhpcy5zaG93VGltZXIpe3RoaXMuc2hvd1RpbWVyPXRoaXMuZGVmZXJFeHBhbmQuZGVmZXIodGhpcy5zaG93RGVsYXksdGhpcyxbYV0pfWVsc2V7aWYodGhpcy5tZW51LmlzVmlzaWJsZSgpJiZhKXt0aGlzLm1lbnUudHJ5QWN0aXZhdGUoMCwxKX19fX0sZGVmZXJFeHBhbmQ6ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuc2hvd1RpbWVyO3RoaXMubWVudS5zaG93KHRoaXMuY29udGFpbmVyLHRoaXMucGFyZW50TWVudS5zdWJNZW51QWxpZ258fCJ0bC10cj8iLHRoaXMucGFyZW50TWVudSk7aWYoYSl7dGhpcy5tZW51LnRyeUFjdGl2YXRlKDAsMSl9fSxoaWRlTWVudTpmdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnNob3dUaW1lcik7ZGVsZXRlIHRoaXMuc2hvd1RpbWVyO2lmKCF0aGlzLmhpZGVUaW1lciYmdGhpcy5tZW51JiZ0aGlzLm1lbnUuaXNWaXNpYmxlKCkpe3RoaXMuaGlkZVRpbWVyPXRoaXMuZGVmZXJIaWRlLmRlZmVyKHRoaXMuaGlkZURlbGF5LHRoaXMpfX0sZGVmZXJIaWRlOmZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuaGlkZVRpbWVyO2lmKHRoaXMubWVudS5vdmVyKXt0aGlzLnBhcmVudE1lbnUuc2V0QWN0aXZlSXRlbSh0aGlzLGZhbHNlKX1lbHNle3RoaXMubWVudS5oaWRlKCl9fX0pO0V4dC5yZWcoIm1lbnVpdGVtIixFeHQubWVudS5JdGVtKTtFeHQubWVudS5DaGVja0l0ZW09RXh0LmV4dGVuZChFeHQubWVudS5JdGVtLHtpdGVtQ2xzOiJ4LW1lbnUtaXRlbSB4LW1lbnUtY2hlY2staXRlbSIsZ3JvdXBDbGFzczoieC1tZW51LWdyb3VwLWl0ZW0iLGNoZWNrZWQ6ZmFsc2UsY3R5cGU6IkV4dC5tZW51LkNoZWNrSXRlbSIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5tZW51LkNoZWNrSXRlbS5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiYmVmb3JlY2hlY2tjaGFuZ2UiLCJjaGVja2NoYW5nZSIpO2lmKHRoaXMuY2hlY2tIYW5kbGVyKXt0aGlzLm9uKCJjaGVja2NoYW5nZSIsdGhpcy5jaGVja0hhbmRsZXIsdGhpcy5zY29wZSl9RXh0Lm1lbnUuTWVudU1nci5yZWdpc3RlckNoZWNrYWJsZSh0aGlzKX0sb25SZW5kZXI6ZnVuY3Rpb24oYSl7RXh0Lm1lbnUuQ2hlY2tJdGVtLnN1cGVyY2xhc3Mub25SZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuZ3JvdXApe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5ncm91cENsYXNzKX1pZih0aGlzLmNoZWNrZWQpe3RoaXMuY2hlY2tlZD1mYWxzZTt0aGlzLnNldENoZWNrZWQodHJ1ZSx0cnVlKX19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQubWVudS5NZW51TWdyLnVucmVnaXN0ZXJDaGVja2FibGUodGhpcyk7RXh0Lm1lbnUuQ2hlY2tJdGVtLnN1cGVyY2xhc3MuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHNldENoZWNrZWQ6ZnVuY3Rpb24oYixhKXt2YXIgYz1hPT09dHJ1ZTtpZih0aGlzLmNoZWNrZWQhPWImJihjfHx0aGlzLmZpcmVFdmVudCgiYmVmb3JlY2hlY2tjaGFuZ2UiLHRoaXMsYikhPT1mYWxzZSkpe0V4dC5tZW51Lk1lbnVNZ3Iub25DaGVja0NoYW5nZSh0aGlzLGIpO2lmKHRoaXMuY29udGFpbmVyKXt0aGlzLmNvbnRhaW5lcltiPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0oIngtbWVudS1pdGVtLWNoZWNrZWQiKX10aGlzLmNoZWNrZWQ9YjtpZighYyl7dGhpcy5maXJlRXZlbnQoImNoZWNrY2hhbmdlIix0aGlzLGIpfX19LGhhbmRsZUNsaWNrOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmRpc2FibGVkJiYhKHRoaXMuY2hlY2tlZCYmdGhpcy5ncm91cCkpe3RoaXMuc2V0Q2hlY2tlZCghdGhpcy5jaGVja2VkKX1FeHQubWVudS5DaGVja0l0ZW0uc3VwZXJjbGFzcy5oYW5kbGVDbGljay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7RXh0LnJlZygibWVudWNoZWNraXRlbSIsRXh0Lm1lbnUuQ2hlY2tJdGVtKTtFeHQubWVudS5EYXRlTWVudT1FeHQuZXh0ZW5kKEV4dC5tZW51Lk1lbnUse2VuYWJsZVNjcm9sbGluZzpmYWxzZSxoaWRlT25DbGljazp0cnVlLHBpY2tlcklkOm51bGwsY2xzOiJ4LWRhdGUtbWVudSIsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe3RoaXMub24oImJlZm9yZXNob3ciLHRoaXMub25CZWZvcmVTaG93LHRoaXMpO2lmKHRoaXMuc3RyaWN0PShFeHQuaXNJRTcmJkV4dC5pc1N0cmljdCkpe3RoaXMub24oInNob3ciLHRoaXMub25TaG93LHRoaXMse3NpbmdsZTp0cnVlLGRlbGF5OjIwfSl9RXh0LmFwcGx5KHRoaXMse3BsYWluOnRydWUsc2hvd1NlcGFyYXRvcjpmYWxzZSxpdGVtczp0aGlzLnBpY2tlcj1uZXcgRXh0LkRhdGVQaWNrZXIoRXh0LmFwcGx5SWYoe2ludGVybmFsUmVuZGVyOnRoaXMuc3RyaWN0fHwhRXh0LmlzSUUsY3RDbHM6IngtbWVudS1kYXRlLWl0ZW0iLGlkOnRoaXMucGlja2VySWR9LHRoaXMuaW5pdGlhbENvbmZpZykpfSk7dGhpcy5waWNrZXIucHVyZ2VMaXN0ZW5lcnMoKTtFeHQubWVudS5EYXRlTWVudS5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLnJlbGF5RXZlbnRzKHRoaXMucGlja2VyLFsic2VsZWN0Il0pO3RoaXMub24oInNob3ciLHRoaXMucGlja2VyLmZvY3VzLHRoaXMucGlja2VyKTt0aGlzLm9uKCJzZWxlY3QiLHRoaXMubWVudUhpZGUsdGhpcyk7aWYodGhpcy5oYW5kbGVyKXt0aGlzLm9uKCJzZWxlY3QiLHRoaXMuaGFuZGxlcix0aGlzLnNjb3BlfHx0aGlzKX19LG1lbnVIaWRlOmZ1bmN0aW9uKCl7aWYodGhpcy5oaWRlT25DbGljayl7dGhpcy5oaWRlKHRydWUpfX0sb25CZWZvcmVTaG93OmZ1bmN0aW9uKCl7aWYodGhpcy5waWNrZXIpe3RoaXMucGlja2VyLmhpZGVNb250aFBpY2tlcih0cnVlKX19LG9uU2hvdzpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGlja2VyLmdldEVsKCk7YS5zZXRXaWR0aChhLmdldFdpZHRoKCkpfX0pO0V4dC5yZWcoImRhdGVtZW51IixFeHQubWVudS5EYXRlTWVudSk7RXh0Lm1lbnUuQ29sb3JNZW51PUV4dC5leHRlbmQoRXh0Lm1lbnUuTWVudSx7ZW5hYmxlU2Nyb2xsaW5nOmZhbHNlLGhpZGVPbkNsaWNrOnRydWUsY2xzOiJ4LWNvbG9yLW1lbnUiLHBhbGV0dGVJZDpudWxsLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuYXBwbHkodGhpcyx7cGxhaW46dHJ1ZSxzaG93U2VwYXJhdG9yOmZhbHNlLGl0ZW1zOnRoaXMucGFsZXR0ZT1uZXcgRXh0LkNvbG9yUGFsZXR0ZShFeHQuYXBwbHlJZih7aWQ6dGhpcy5wYWxldHRlSWR9LHRoaXMuaW5pdGlhbENvbmZpZykpfSk7dGhpcy5wYWxldHRlLnB1cmdlTGlzdGVuZXJzKCk7RXh0Lm1lbnUuQ29sb3JNZW51LnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO3RoaXMucmVsYXlFdmVudHModGhpcy5wYWxldHRlLFsic2VsZWN0Il0pO3RoaXMub24oInNlbGVjdCIsdGhpcy5tZW51SGlkZSx0aGlzKTtpZih0aGlzLmhhbmRsZXIpe3RoaXMub24oInNlbGVjdCIsdGhpcy5oYW5kbGVyLHRoaXMuc2NvcGV8fHRoaXMpfX0sbWVudUhpZGU6ZnVuY3Rpb24oKXtpZih0aGlzLmhpZGVPbkNsaWNrKXt0aGlzLmhpZGUodHJ1ZSl9fX0pO0V4dC5yZWcoImNvbG9ybWVudSIsRXh0Lm1lbnUuQ29sb3JNZW51KTtFeHQuZm9ybS5GaWVsZD1FeHQuZXh0ZW5kKEV4dC5Cb3hDb21wb25lbnQse2ludmFsaWRDbGFzczoieC1mb3JtLWludmFsaWQiLGludmFsaWRUZXh0OiJUaGUgdmFsdWUgaW4gdGhpcyBmaWVsZCBpcyBpbnZhbGlkIixmb2N1c0NsYXNzOiJ4LWZvcm0tZm9jdXMiLHZhbGlkYXRpb25FdmVudDoia2V5dXAiLHZhbGlkYXRlT25CbHVyOnRydWUsdmFsaWRhdGlvbkRlbGF5OjI1MCxkZWZhdWx0QXV0b0NyZWF0ZTp7dGFnOiJpbnB1dCIsdHlwZToidGV4dCIsc2l6ZToiMjAiLGF1dG9jb21wbGV0ZToib2ZmIn0sZmllbGRDbGFzczoieC1mb3JtLWZpZWxkIixtc2dUYXJnZXQ6InF0aXAiLG1zZ0Z4OiJub3JtYWwiLHJlYWRPbmx5OmZhbHNlLGRpc2FibGVkOmZhbHNlLHN1Ym1pdFZhbHVlOnRydWUsaXNGb3JtRmllbGQ6dHJ1ZSxtc2dEaXNwbGF5OiIiLGhhc0ZvY3VzOmZhbHNlLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5GaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiZm9jdXMiLCJibHVyIiwic3BlY2lhbGtleSIsImNoYW5nZSIsImludmFsaWQiLCJ2YWxpZCIpfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyZWQmJnRoaXMuZWwuZG9tLm5hbWU/dGhpcy5lbC5kb20ubmFtZTp0aGlzLm5hbWV8fHRoaXMuaWR8fCIifSxvblJlbmRlcjpmdW5jdGlvbihjLGEpe2lmKCF0aGlzLmVsKXt2YXIgYj10aGlzLmdldEF1dG9DcmVhdGUoKTtpZighYi5uYW1lKXtiLm5hbWU9dGhpcy5uYW1lfHx0aGlzLmlkfWlmKHRoaXMuaW5wdXRUeXBlKXtiLnR5cGU9dGhpcy5pbnB1dFR5cGV9dGhpcy5hdXRvRWw9Yn1FeHQuZm9ybS5GaWVsZC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxjLGEpO2lmKHRoaXMuc3VibWl0VmFsdWU9PT1mYWxzZSl7dGhpcy5lbC5kb20ucmVtb3ZlQXR0cmlidXRlKCJuYW1lIil9dmFyIGQ9dGhpcy5lbC5kb20udHlwZTtpZihkKXtpZihkPT0icGFzc3dvcmQiKXtkPSJ0ZXh0In10aGlzLmVsLmFkZENsYXNzKCJ4LWZvcm0tIitkKX1pZih0aGlzLnJlYWRPbmx5KXt0aGlzLnNldFJlYWRPbmx5KHRydWUpfWlmKHRoaXMudGFiSW5kZXghPT11bmRlZmluZWQpe3RoaXMuZWwuZG9tLnNldEF0dHJpYnV0ZSgidGFiSW5kZXgiLHRoaXMudGFiSW5kZXgpfXRoaXMuZWwuYWRkQ2xhc3MoW3RoaXMuZmllbGRDbGFzcyx0aGlzLmNsc10pfSxnZXRJdGVtQ3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pdGVtQ3R9LGluaXRWYWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMudmFsdWUhPT11bmRlZmluZWQpe3RoaXMuc2V0VmFsdWUodGhpcy52YWx1ZSl9ZWxzZXtpZighRXh0LmlzRW1wdHkodGhpcy5lbC5kb20udmFsdWUpJiZ0aGlzLmVsLmRvbS52YWx1ZSE9dGhpcy5lbXB0eVRleHQpe3RoaXMuc2V0VmFsdWUodGhpcy5lbC5kb20udmFsdWUpfX10aGlzLm9yaWdpbmFsVmFsdWU9dGhpcy5nZXRWYWx1ZSgpfSxpc0RpcnR5OmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZHx8IXRoaXMucmVuZGVyZWQpe3JldHVybiBmYWxzZX1yZXR1cm4gU3RyaW5nKHRoaXMuZ2V0VmFsdWUoKSkhPT1TdHJpbmcodGhpcy5vcmlnaW5hbFZhbHVlKX0sc2V0UmVhZE9ubHk6ZnVuY3Rpb24oYSl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5lbC5kb20ucmVhZE9ubHk9YX10aGlzLnJlYWRPbmx5PWF9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmZvcm0uRmllbGQuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO3RoaXMuaW5pdEV2ZW50cygpO3RoaXMuaW5pdFZhbHVlKCl9LGZpcmVLZXk6ZnVuY3Rpb24oYSl7aWYoYS5pc1NwZWNpYWxLZXkoKSl7dGhpcy5maXJlRXZlbnQoInNwZWNpYWxrZXkiLHRoaXMsYSl9fSxyZXNldDpmdW5jdGlvbigpe3RoaXMuc2V0VmFsdWUodGhpcy5vcmlnaW5hbFZhbHVlKTt0aGlzLmNsZWFySW52YWxpZCgpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy5tb24odGhpcy5lbCxFeHQuRXZlbnRNYW5hZ2VyLmdldEtleUV2ZW50KCksdGhpcy5maXJlS2V5LHRoaXMpO3RoaXMubW9uKHRoaXMuZWwsImZvY3VzIix0aGlzLm9uRm9jdXMsdGhpcyk7dGhpcy5tb24odGhpcy5lbCwiYmx1ciIsdGhpcy5vbkJsdXIsdGhpcyx0aGlzLmluRWRpdG9yP3tidWZmZXI6MTB9Om51bGwpfSxwcmVGb2N1czpFeHQuZW1wdHlGbixvbkZvY3VzOmZ1bmN0aW9uKCl7dGhpcy5wcmVGb2N1cygpO2lmKHRoaXMuZm9jdXNDbGFzcyl7dGhpcy5lbC5hZGRDbGFzcyh0aGlzLmZvY3VzQ2xhc3MpfWlmKCF0aGlzLmhhc0ZvY3VzKXt0aGlzLmhhc0ZvY3VzPXRydWU7dGhpcy5zdGFydFZhbHVlPXRoaXMuZ2V0VmFsdWUoKTt0aGlzLmZpcmVFdmVudCgiZm9jdXMiLHRoaXMpfX0sYmVmb3JlQmx1cjpFeHQuZW1wdHlGbixvbkJsdXI6ZnVuY3Rpb24oKXt0aGlzLmJlZm9yZUJsdXIoKTtpZih0aGlzLmZvY3VzQ2xhc3Mpe3RoaXMuZWwucmVtb3ZlQ2xhc3ModGhpcy5mb2N1c0NsYXNzKX10aGlzLmhhc0ZvY3VzPWZhbHNlO2lmKHRoaXMudmFsaWRhdGlvbkV2ZW50IT09ZmFsc2UmJih0aGlzLnZhbGlkYXRlT25CbHVyfHx0aGlzLnZhbGlkYXRpb25FdmVudD09ImJsdXIiKSl7dGhpcy52YWxpZGF0ZSgpfXZhciBhPXRoaXMuZ2V0VmFsdWUoKTtpZihTdHJpbmcoYSkhPT1TdHJpbmcodGhpcy5zdGFydFZhbHVlKSl7dGhpcy5maXJlRXZlbnQoImNoYW5nZSIsdGhpcyxhLHRoaXMuc3RhcnRWYWx1ZSl9dGhpcy5maXJlRXZlbnQoImJsdXIiLHRoaXMpO3RoaXMucG9zdEJsdXIoKX0scG9zdEJsdXI6RXh0LmVtcHR5Rm4saXNWYWxpZDpmdW5jdGlvbihhKXtpZih0aGlzLmRpc2FibGVkKXtyZXR1cm4gdHJ1ZX12YXIgYz10aGlzLnByZXZlbnRNYXJrO3RoaXMucHJldmVudE1hcms9YT09PXRydWU7dmFyIGI9dGhpcy52YWxpZGF0ZVZhbHVlKHRoaXMucHJvY2Vzc1ZhbHVlKHRoaXMuZ2V0UmF3VmFsdWUoKSksYSk7dGhpcy5wcmV2ZW50TWFyaz1jO3JldHVybiBifSx2YWxpZGF0ZTpmdW5jdGlvbigpe2lmKHRoaXMuZGlzYWJsZWR8fHRoaXMudmFsaWRhdGVWYWx1ZSh0aGlzLnByb2Nlc3NWYWx1ZSh0aGlzLmdldFJhd1ZhbHVlKCkpKSl7dGhpcy5jbGVhckludmFsaWQoKTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9LHByb2Nlc3NWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gYX0sdmFsaWRhdGVWYWx1ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldEVycm9ycyhiKVswXTtpZihhPT11bmRlZmluZWQpe3JldHVybiB0cnVlfWVsc2V7dGhpcy5tYXJrSW52YWxpZChhKTtyZXR1cm4gZmFsc2V9fSxnZXRFcnJvcnM6ZnVuY3Rpb24oKXtyZXR1cm5bXX0sZ2V0QWN0aXZlRXJyb3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hY3RpdmVFcnJvcnx8IiJ9LG1hcmtJbnZhbGlkOmZ1bmN0aW9uKGMpe2lmKHRoaXMucmVuZGVyZWQmJiF0aGlzLnByZXZlbnRNYXJrKXtjPWN8fHRoaXMuaW52YWxpZFRleHQ7dmFyIGE9dGhpcy5nZXRNZXNzYWdlSGFuZGxlcigpO2lmKGEpe2EubWFyayh0aGlzLGMpfWVsc2V7aWYodGhpcy5tc2dUYXJnZXQpe3RoaXMuZWwuYWRkQ2xhc3ModGhpcy5pbnZhbGlkQ2xhc3MpO3ZhciBiPUV4dC5nZXREb20odGhpcy5tc2dUYXJnZXQpO2lmKGIpe2IuaW5uZXJIVE1MPWM7Yi5zdHlsZS5kaXNwbGF5PXRoaXMubXNnRGlzcGxheX19fX10aGlzLnNldEFjdGl2ZUVycm9yKGMpfSxjbGVhckludmFsaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkJiYhdGhpcy5wcmV2ZW50TWFyayl7dGhpcy5lbC5yZW1vdmVDbGFzcyh0aGlzLmludmFsaWRDbGFzcyk7dmFyIGE9dGhpcy5nZXRNZXNzYWdlSGFuZGxlcigpO2lmKGEpe2EuY2xlYXIodGhpcyl9ZWxzZXtpZih0aGlzLm1zZ1RhcmdldCl7dGhpcy5lbC5yZW1vdmVDbGFzcyh0aGlzLmludmFsaWRDbGFzcyk7dmFyIGI9RXh0LmdldERvbSh0aGlzLm1zZ1RhcmdldCk7aWYoYil7Yi5pbm5lckhUTUw9IiI7Yi5zdHlsZS5kaXNwbGF5PSJub25lIn19fX10aGlzLnVuc2V0QWN0aXZlRXJyb3IoKX0sc2V0QWN0aXZlRXJyb3I6ZnVuY3Rpb24oYixhKXt0aGlzLmFjdGl2ZUVycm9yPWI7aWYoYSE9PXRydWUpe3RoaXMuZmlyZUV2ZW50KCJpbnZhbGlkIix0aGlzLGIpfX0sdW5zZXRBY3RpdmVFcnJvcjpmdW5jdGlvbihhKXtkZWxldGUgdGhpcy5hY3RpdmVFcnJvcjtpZihhIT09dHJ1ZSl7dGhpcy5maXJlRXZlbnQoInZhbGlkIix0aGlzKX19LGdldE1lc3NhZ2VIYW5kbGVyOmZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5mb3JtLk1lc3NhZ2VUYXJnZXRzW3RoaXMubXNnVGFyZ2V0XX0sZ2V0RXJyb3JDdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsLmZpbmRQYXJlbnQoIi54LWZvcm0tZWxlbWVudCIsNSx0cnVlKXx8dGhpcy5lbC5maW5kUGFyZW50KCIueC1mb3JtLWZpZWxkLXdyYXAiLDUsdHJ1ZSl9LGFsaWduRXJyb3JFbDpmdW5jdGlvbigpe3RoaXMuZXJyb3JFbC5zZXRXaWR0aCh0aGlzLmdldEVycm9yQ3QoKS5nZXRXaWR0aCh0cnVlKS0yMCl9LGFsaWduRXJyb3JJY29uOmZ1bmN0aW9uKCl7dGhpcy5lcnJvckljb24uYWxpZ25Ubyh0aGlzLmVsLCJ0bC10ciIsWzIsMF0pfSxnZXRSYXdWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVuZGVyZWQ/dGhpcy5lbC5nZXRWYWx1ZSgpOkV4dC52YWx1ZSh0aGlzLnZhbHVlLCIiKTtpZihhPT09dGhpcy5lbXB0eVRleHQpe2E9IiJ9cmV0dXJuIGF9LGdldFZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMucmVuZGVyZWQpe3JldHVybiB0aGlzLnZhbHVlfXZhciBhPXRoaXMuZWwuZ2V0VmFsdWUoKTtpZihhPT09dGhpcy5lbXB0eVRleHR8fGE9PT11bmRlZmluZWQpe2E9IiJ9cmV0dXJuIGF9LHNldFJhd1ZhbHVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbmRlcmVkPyh0aGlzLmVsLmRvbS52YWx1ZT0oRXh0LmlzRW1wdHkoYSk/IiI6YSkpOiIifSxzZXRWYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnZhbHVlPWE7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5lbC5kb20udmFsdWU9KEV4dC5pc0VtcHR5KGEpPyIiOmEpO3RoaXMudmFsaWRhdGUoKX1yZXR1cm4gdGhpc30sYXBwZW5kOmZ1bmN0aW9uKGEpe3RoaXMuc2V0VmFsdWUoW3RoaXMuZ2V0VmFsdWUoKSxhXS5qb2luKCIiKSl9fSk7RXh0LmZvcm0uTWVzc2FnZVRhcmdldHM9e3F0aXA6e21hcms6ZnVuY3Rpb24oYSxiKXthLmVsLmFkZENsYXNzKGEuaW52YWxpZENsYXNzKTthLmVsLmRvbS5xdGlwPWI7YS5lbC5kb20ucWNsYXNzPSJ4LWZvcm0taW52YWxpZC10aXAiO2lmKEV4dC5RdWlja1RpcHMpe0V4dC5RdWlja1RpcHMuZW5hYmxlKCl9fSxjbGVhcjpmdW5jdGlvbihhKXthLmVsLnJlbW92ZUNsYXNzKGEuaW52YWxpZENsYXNzKTthLmVsLmRvbS5xdGlwPSIifX0sdGl0bGU6e21hcms6ZnVuY3Rpb24oYSxiKXthLmVsLmFkZENsYXNzKGEuaW52YWxpZENsYXNzKTthLmVsLmRvbS50aXRsZT1ifSxjbGVhcjpmdW5jdGlvbihhKXthLmVsLmRvbS50aXRsZT0iIn19LHVuZGVyOnttYXJrOmZ1bmN0aW9uKGIsYyl7Yi5lbC5hZGRDbGFzcyhiLmludmFsaWRDbGFzcyk7aWYoIWIuZXJyb3JFbCl7dmFyIGE9Yi5nZXRFcnJvckN0KCk7aWYoIWEpe2IuZWwuZG9tLnRpdGxlPWM7cmV0dXJufWIuZXJyb3JFbD1hLmNyZWF0ZUNoaWxkKHtjbHM6IngtZm9ybS1pbnZhbGlkLW1zZyJ9KTtiLm9uKCJyZXNpemUiLGIuYWxpZ25FcnJvckVsLGIpO2Iub24oImRlc3Ryb3kiLGZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5lcnJvckVsKX0sYil9Yi5hbGlnbkVycm9yRWwoKTtiLmVycm9yRWwudXBkYXRlKGMpO0V4dC5mb3JtLkZpZWxkLm1zZ0Z4W2IubXNnRnhdLnNob3coYi5lcnJvckVsLGIpfSxjbGVhcjpmdW5jdGlvbihhKXthLmVsLnJlbW92ZUNsYXNzKGEuaW52YWxpZENsYXNzKTtpZihhLmVycm9yRWwpe0V4dC5mb3JtLkZpZWxkLm1zZ0Z4W2EubXNnRnhdLmhpZGUoYS5lcnJvckVsLGEpfWVsc2V7YS5lbC5kb20udGl0bGU9IiJ9fX0sc2lkZTp7bWFyazpmdW5jdGlvbihiLGMpe2IuZWwuYWRkQ2xhc3MoYi5pbnZhbGlkQ2xhc3MpO2lmKCFiLmVycm9ySWNvbil7dmFyIGE9Yi5nZXRFcnJvckN0KCk7aWYoIWEpe2IuZWwuZG9tLnRpdGxlPWM7cmV0dXJufWIuZXJyb3JJY29uPWEuY3JlYXRlQ2hpbGQoe2NsczoieC1mb3JtLWludmFsaWQtaWNvbiJ9KTtpZihiLm93bmVyQ3Qpe2Iub3duZXJDdC5vbigiYWZ0ZXJsYXlvdXQiLGIuYWxpZ25FcnJvckljb24sYik7Yi5vd25lckN0Lm9uKCJleHBhbmQiLGIuYWxpZ25FcnJvckljb24sYil9Yi5vbigicmVzaXplIixiLmFsaWduRXJyb3JJY29uLGIpO2Iub24oImRlc3Ryb3kiLGZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5lcnJvckljb24pfSxiKX1iLmFsaWduRXJyb3JJY29uKCk7Yi5lcnJvckljb24uZG9tLnF0aXA9YztiLmVycm9ySWNvbi5kb20ucWNsYXNzPSJ4LWZvcm0taW52YWxpZC10aXAiO2IuZXJyb3JJY29uLnNob3coKX0sY2xlYXI6ZnVuY3Rpb24oYSl7YS5lbC5yZW1vdmVDbGFzcyhhLmludmFsaWRDbGFzcyk7aWYoYS5lcnJvckljb24pe2EuZXJyb3JJY29uLmRvbS5xdGlwPSIiO2EuZXJyb3JJY29uLmhpZGUoKX1lbHNle2EuZWwuZG9tLnRpdGxlPSIifX19fTtFeHQuZm9ybS5GaWVsZC5tc2dGeD17bm9ybWFsOntzaG93OmZ1bmN0aW9uKGEsYil7YS5zZXREaXNwbGF5ZWQoImJsb2NrIil9LGhpZGU6ZnVuY3Rpb24oYSxiKXthLnNldERpc3BsYXllZChmYWxzZSkudXBkYXRlKCIiKX19LHNsaWRlOntzaG93OmZ1bmN0aW9uKGEsYil7YS5zbGlkZUluKCJ0Iix7c3RvcEZ4OnRydWV9KX0saGlkZTpmdW5jdGlvbihhLGIpe2Euc2xpZGVPdXQoInQiLHtzdG9wRng6dHJ1ZSx1c2VEaXNwbGF5OnRydWV9KX19LHNsaWRlUmlnaHQ6e3Nob3c6ZnVuY3Rpb24oYSxiKXthLmZpeERpc3BsYXkoKTthLmFsaWduVG8oYi5lbCwidGwtdHIiKTthLnNsaWRlSW4oImwiLHtzdG9wRng6dHJ1ZX0pfSxoaWRlOmZ1bmN0aW9uKGEsYil7YS5zbGlkZU91dCgibCIse3N0b3BGeDp0cnVlLHVzZURpc3BsYXk6dHJ1ZX0pfX19O0V4dC5yZWcoImZpZWxkIixFeHQuZm9ybS5GaWVsZCk7RXh0LmZvcm0uVGV4dEZpZWxkPUV4dC5leHRlbmQoRXh0LmZvcm0uRmllbGQse2dyb3c6ZmFsc2UsZ3Jvd01pbjozMCxncm93TWF4OjgwMCx2dHlwZTpudWxsLG1hc2tSZTpudWxsLGRpc2FibGVLZXlGaWx0ZXI6ZmFsc2UsYWxsb3dCbGFuazp0cnVlLG1pbkxlbmd0aDowLG1heExlbmd0aDpOdW1iZXIuTUFYX1ZBTFVFLG1pbkxlbmd0aFRleHQ6IlRoZSBtaW5pbXVtIGxlbmd0aCBmb3IgdGhpcyBmaWVsZCBpcyB7MH0iLG1heExlbmd0aFRleHQ6IlRoZSBtYXhpbXVtIGxlbmd0aCBmb3IgdGhpcyBmaWVsZCBpcyB7MH0iLHNlbGVjdE9uRm9jdXM6ZmFsc2UsYmxhbmtUZXh0OiJUaGlzIGZpZWxkIGlzIHJlcXVpcmVkIix2YWxpZGF0b3I6bnVsbCxyZWdleDpudWxsLHJlZ2V4VGV4dDoiIixlbXB0eVRleHQ6bnVsbCxlbXB0eUNsYXNzOiJ4LWZvcm0tZW1wdHktZmllbGQiLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5UZXh0RmllbGQuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoImF1dG9zaXplIiwia2V5ZG93biIsImtleXVwIiwia2V5cHJlc3MiKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5mb3JtLlRleHRGaWVsZC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTtpZih0aGlzLnZhbGlkYXRpb25FdmVudD09ImtleXVwIil7dGhpcy52YWxpZGF0aW9uVGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2sodGhpcy52YWxpZGF0ZSx0aGlzKTt0aGlzLm1vbih0aGlzLmVsLCJrZXl1cCIsdGhpcy5maWx0ZXJWYWxpZGF0aW9uLHRoaXMpfWVsc2V7aWYodGhpcy52YWxpZGF0aW9uRXZlbnQhPT1mYWxzZSYmdGhpcy52YWxpZGF0aW9uRXZlbnQhPSJibHVyIil7dGhpcy5tb24odGhpcy5lbCx0aGlzLnZhbGlkYXRpb25FdmVudCx0aGlzLnZhbGlkYXRlLHRoaXMse2J1ZmZlcjp0aGlzLnZhbGlkYXRpb25EZWxheX0pfX1pZih0aGlzLnNlbGVjdE9uRm9jdXN8fHRoaXMuZW1wdHlUZXh0KXt0aGlzLm1vbih0aGlzLmVsLCJtb3VzZWRvd24iLHRoaXMub25Nb3VzZURvd24sdGhpcyk7aWYodGhpcy5lbXB0eVRleHQpe3RoaXMuYXBwbHlFbXB0eVRleHQoKX19aWYodGhpcy5tYXNrUmV8fCh0aGlzLnZ0eXBlJiZ0aGlzLmRpc2FibGVLZXlGaWx0ZXIhPT10cnVlJiYodGhpcy5tYXNrUmU9RXh0LmZvcm0uVlR5cGVzW3RoaXMudnR5cGUrIk1hc2siXSkpKXt0aGlzLm1vbih0aGlzLmVsLCJrZXlwcmVzcyIsdGhpcy5maWx0ZXJLZXlzLHRoaXMpfWlmKHRoaXMuZ3Jvdyl7dGhpcy5tb24odGhpcy5lbCwia2V5dXAiLHRoaXMub25LZXlVcEJ1ZmZlcmVkLHRoaXMse2J1ZmZlcjo1MH0pO3RoaXMubW9uKHRoaXMuZWwsImNsaWNrIix0aGlzLmF1dG9TaXplLHRoaXMpfWlmKHRoaXMuZW5hYmxlS2V5RXZlbnRzKXt0aGlzLm1vbih0aGlzLmVsLHtzY29wZTp0aGlzLGtleXVwOnRoaXMub25LZXlVcCxrZXlkb3duOnRoaXMub25LZXlEb3duLGtleXByZXNzOnRoaXMub25LZXlQcmVzc30pfX0sb25Nb3VzZURvd246ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaGFzRm9jdXMpe3RoaXMubW9uKHRoaXMuZWwsIm1vdXNldXAiLEV4dC5lbXB0eUZuLHRoaXMse3NpbmdsZTp0cnVlLHByZXZlbnREZWZhdWx0OnRydWV9KX19LHByb2Nlc3NWYWx1ZTpmdW5jdGlvbihhKXtpZih0aGlzLnN0cmlwQ2hhcnNSZSl7dmFyIGI9YS5yZXBsYWNlKHRoaXMuc3RyaXBDaGFyc1JlLCIiKTtpZihiIT09YSl7dGhpcy5zZXRSYXdWYWx1ZShiKTtyZXR1cm4gYn19cmV0dXJuIGF9LGZpbHRlclZhbGlkYXRpb246ZnVuY3Rpb24oYSl7aWYoIWEuaXNOYXZLZXlQcmVzcygpKXt0aGlzLnZhbGlkYXRpb25UYXNrLmRlbGF5KHRoaXMudmFsaWRhdGlvbkRlbGF5KX19LG9uRGlzYWJsZTpmdW5jdGlvbigpe0V4dC5mb3JtLlRleHRGaWVsZC5zdXBlcmNsYXNzLm9uRGlzYWJsZS5jYWxsKHRoaXMpO2lmKEV4dC5pc0lFKXt0aGlzLmVsLmRvbS51bnNlbGVjdGFibGU9Im9uIn19LG9uRW5hYmxlOmZ1bmN0aW9uKCl7RXh0LmZvcm0uVGV4dEZpZWxkLnN1cGVyY2xhc3Mub25FbmFibGUuY2FsbCh0aGlzKTtpZihFeHQuaXNJRSl7dGhpcy5lbC5kb20udW5zZWxlY3RhYmxlPSIifX0sb25LZXlVcEJ1ZmZlcmVkOmZ1bmN0aW9uKGEpe2lmKHRoaXMuZG9BdXRvU2l6ZShhKSl7dGhpcy5hdXRvU2l6ZSgpfX0sZG9BdXRvU2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4gIWEuaXNOYXZLZXlQcmVzcygpfSxvbktleVVwOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJrZXl1cCIsdGhpcyxhKX0sb25LZXlEb3duOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJrZXlkb3duIix0aGlzLGEpfSxvbktleVByZXNzOmZ1bmN0aW9uKGEpe3RoaXMuZmlyZUV2ZW50KCJrZXlwcmVzcyIsdGhpcyxhKX0scmVzZXQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5UZXh0RmllbGQuc3VwZXJjbGFzcy5yZXNldC5jYWxsKHRoaXMpO3RoaXMuYXBwbHlFbXB0eVRleHQoKX0sYXBwbHlFbXB0eVRleHQ6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkJiZ0aGlzLmVtcHR5VGV4dCYmdGhpcy5nZXRSYXdWYWx1ZSgpLmxlbmd0aDwxJiYhdGhpcy5oYXNGb2N1cyl7dGhpcy5zZXRSYXdWYWx1ZSh0aGlzLmVtcHR5VGV4dCk7dGhpcy5lbC5hZGRDbGFzcyh0aGlzLmVtcHR5Q2xhc3MpfX0scHJlRm9jdXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsLGI7aWYodGhpcy5lbXB0eVRleHQpe2lmKGEuZG9tLnZhbHVlPT10aGlzLmVtcHR5VGV4dCl7dGhpcy5zZXRSYXdWYWx1ZSgiIik7Yj10cnVlfWEucmVtb3ZlQ2xhc3ModGhpcy5lbXB0eUNsYXNzKX1pZih0aGlzLnNlbGVjdE9uRm9jdXN8fGIpe2EuZG9tLnNlbGVjdCgpfX0scG9zdEJsdXI6ZnVuY3Rpb24oKXt0aGlzLmFwcGx5RW1wdHlUZXh0KCl9LGZpbHRlcktleXM6ZnVuY3Rpb24oYil7aWYoYi5jdHJsS2V5KXtyZXR1cm59dmFyIGE9Yi5nZXRLZXkoKTtpZihFeHQuaXNHZWNrbyYmKGIuaXNOYXZLZXlQcmVzcygpfHxhPT1iLkJBQ0tTUEFDRXx8KGE9PWIuREVMRVRFJiZiLmJ1dHRvbj09LTEpKSl7cmV0dXJufXZhciBjPVN0cmluZy5mcm9tQ2hhckNvZGUoYi5nZXRDaGFyQ29kZSgpKTtpZighRXh0LmlzR2Vja28mJmIuaXNTcGVjaWFsS2V5KCkmJiFjKXtyZXR1cm59aWYoIXRoaXMubWFza1JlLnRlc3QoYykpe2Iuc3RvcEV2ZW50KCl9fSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtpZih0aGlzLmVtcHR5VGV4dCYmdGhpcy5lbCYmIUV4dC5pc0VtcHR5KGEpKXt0aGlzLmVsLnJlbW92ZUNsYXNzKHRoaXMuZW1wdHlDbGFzcyl9RXh0LmZvcm0uVGV4dEZpZWxkLnN1cGVyY2xhc3Muc2V0VmFsdWUuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuYXBwbHlFbXB0eVRleHQoKTt0aGlzLmF1dG9TaXplKCk7cmV0dXJuIHRoaXN9LGdldEVycm9yczpmdW5jdGlvbihhKXt2YXIgZD1FeHQuZm9ybS5UZXh0RmllbGQuc3VwZXJjbGFzcy5nZXRFcnJvcnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2E9RXh0LmlzRGVmaW5lZChhKT9hOnRoaXMucHJvY2Vzc1ZhbHVlKHRoaXMuZ2V0UmF3VmFsdWUoKSk7aWYoRXh0LmlzRnVuY3Rpb24odGhpcy52YWxpZGF0b3IpKXt2YXIgYz10aGlzLnZhbGlkYXRvcihhKTtpZihjIT09dHJ1ZSl7ZC5wdXNoKGMpfX1pZihhLmxlbmd0aDwxfHxhPT09dGhpcy5lbXB0eVRleHQpe2lmKHRoaXMuYWxsb3dCbGFuayl7cmV0dXJuIGR9ZWxzZXtkLnB1c2godGhpcy5ibGFua1RleHQpfX1pZighdGhpcy5hbGxvd0JsYW5rJiYoYS5sZW5ndGg8MXx8YT09PXRoaXMuZW1wdHlUZXh0KSl7ZC5wdXNoKHRoaXMuYmxhbmtUZXh0KX1pZihhLmxlbmd0aDx0aGlzLm1pbkxlbmd0aCl7ZC5wdXNoKFN0cmluZy5mb3JtYXQodGhpcy5taW5MZW5ndGhUZXh0LHRoaXMubWluTGVuZ3RoKSl9aWYoYS5sZW5ndGg+dGhpcy5tYXhMZW5ndGgpe2QucHVzaChTdHJpbmcuZm9ybWF0KHRoaXMubWF4TGVuZ3RoVGV4dCx0aGlzLm1heExlbmd0aCkpfWlmKHRoaXMudnR5cGUpe3ZhciBiPUV4dC5mb3JtLlZUeXBlcztpZighYlt0aGlzLnZ0eXBlXShhLHRoaXMpKXtkLnB1c2godGhpcy52dHlwZVRleHR8fGJbdGhpcy52dHlwZSsiVGV4dCJdKX19aWYodGhpcy5yZWdleCYmIXRoaXMucmVnZXgudGVzdChhKSl7ZC5wdXNoKHRoaXMucmVnZXhUZXh0KX1yZXR1cm4gZH0sc2VsZWN0VGV4dDpmdW5jdGlvbihoLGEpe3ZhciBjPXRoaXMuZ2V0UmF3VmFsdWUoKTt2YXIgZT1mYWxzZTtpZihjLmxlbmd0aD4wKXtoPWg9PT11bmRlZmluZWQ/MDpoO2E9YT09PXVuZGVmaW5lZD9jLmxlbmd0aDphO3ZhciBnPXRoaXMuZWwuZG9tO2lmKGcuc2V0U2VsZWN0aW9uUmFuZ2Upe2cuc2V0U2VsZWN0aW9uUmFuZ2UoaCxhKX1lbHNle2lmKGcuY3JlYXRlVGV4dFJhbmdlKXt2YXIgYj1nLmNyZWF0ZVRleHRSYW5nZSgpO2IubW92ZVN0YXJ0KCJjaGFyYWN0ZXIiLGgpO2IubW92ZUVuZCgiY2hhcmFjdGVyIixhLWMubGVuZ3RoKTtiLnNlbGVjdCgpfX1lPUV4dC5pc0dlY2tvfHxFeHQuaXNPcGVyYX1lbHNle2U9dHJ1ZX1pZihlKXt0aGlzLmZvY3VzKCl9fSxhdXRvU2l6ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmdyb3d8fCF0aGlzLnJlbmRlcmVkKXtyZXR1cm59aWYoIXRoaXMubWV0cmljcyl7dGhpcy5tZXRyaWNzPUV4dC51dGlsLlRleHRNZXRyaWNzLmNyZWF0ZUluc3RhbmNlKHRoaXMuZWwpfXZhciBjPXRoaXMuZWw7dmFyIGI9Yy5kb20udmFsdWU7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShiKSk7Yj1lLmlubmVySFRNTDtFeHQucmVtb3ZlTm9kZShlKTtlPW51bGw7Yis9IiYjMTYwOyI7dmFyIGE9TWF0aC5taW4odGhpcy5ncm93TWF4LE1hdGgubWF4KHRoaXMubWV0cmljcy5nZXRXaWR0aChiKSsxMCx0aGlzLmdyb3dNaW4pKTt0aGlzLmVsLnNldFdpZHRoKGEpO3RoaXMuZmlyZUV2ZW50KCJhdXRvc2l6ZSIsdGhpcyxhKX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy52YWxpZGF0aW9uVGFzayl7dGhpcy52YWxpZGF0aW9uVGFzay5jYW5jZWwoKTt0aGlzLnZhbGlkYXRpb25UYXNrPW51bGx9RXh0LmZvcm0uVGV4dEZpZWxkLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9fSk7RXh0LnJlZygidGV4dGZpZWxkIixFeHQuZm9ybS5UZXh0RmllbGQpO0V4dC5mb3JtLlRyaWdnZXJGaWVsZD1FeHQuZXh0ZW5kKEV4dC5mb3JtLlRleHRGaWVsZCx7ZGVmYXVsdEF1dG9DcmVhdGU6e3RhZzoiaW5wdXQiLHR5cGU6InRleHQiLHNpemU6IjE2IixhdXRvY29tcGxldGU6Im9mZiJ9LGhpZGVUcmlnZ2VyOmZhbHNlLGVkaXRhYmxlOnRydWUscmVhZE9ubHk6ZmFsc2Usd3JhcEZvY3VzQ2xhc3M6IngtdHJpZ2dlci13cmFwLWZvY3VzIixhdXRvU2l6ZTpFeHQuZW1wdHlGbixtb25pdG9yVGFiOnRydWUsZGVmZXJIZWlnaHQ6dHJ1ZSxtaW1pY2luZzpmYWxzZSxhY3Rpb25Nb2RlOiJ3cmFwIixkZWZhdWx0VHJpZ2dlcldpZHRoOjE3LG9uUmVzaXplOmZ1bmN0aW9uKGEsYyl7RXh0LmZvcm0uVHJpZ2dlckZpZWxkLnN1cGVyY2xhc3Mub25SZXNpemUuY2FsbCh0aGlzLGEsYyk7dmFyIGI9dGhpcy5nZXRUcmlnZ2VyV2lkdGgoKTtpZihFeHQuaXNOdW1iZXIoYSkpe3RoaXMuZWwuc2V0V2lkdGgoYS1iKX10aGlzLndyYXAuc2V0V2lkdGgodGhpcy5lbC5nZXRXaWR0aCgpK2IpfSxnZXRUcmlnZ2VyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyaWdnZXIuZ2V0V2lkdGgoKTtpZighdGhpcy5oaWRlVHJpZ2dlciYmIXRoaXMucmVhZE9ubHkmJmE9PT0wKXthPXRoaXMuZGVmYXVsdFRyaWdnZXJXaWR0aH1yZXR1cm4gYX0sYWxpZ25FcnJvckljb246ZnVuY3Rpb24oKXtpZih0aGlzLndyYXApe3RoaXMuZXJyb3JJY29uLmFsaWduVG8odGhpcy53cmFwLCJ0bC10ciIsWzIsMF0pfX0sb25SZW5kZXI6ZnVuY3Rpb24oYixhKXt0aGlzLmRvYz1FeHQuaXNJRT9FeHQuZ2V0Qm9keSgpOkV4dC5nZXREb2MoKTtFeHQuZm9ybS5UcmlnZ2VyRmllbGQuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTt0aGlzLndyYXA9dGhpcy5lbC53cmFwKHtjbHM6IngtZm9ybS1maWVsZC13cmFwIHgtZm9ybS1maWVsZC10cmlnZ2VyLXdyYXAifSk7dGhpcy50cmlnZ2VyPXRoaXMud3JhcC5jcmVhdGVDaGlsZCh0aGlzLnRyaWdnZXJDb25maWd8fHt0YWc6ImltZyIsc3JjOkV4dC5CTEFOS19JTUFHRV9VUkwsYWx0OiIiLGNsczoieC1mb3JtLXRyaWdnZXIgIit0aGlzLnRyaWdnZXJDbGFzc30pO3RoaXMuaW5pdFRyaWdnZXIoKTtpZighdGhpcy53aWR0aCl7dGhpcy53cmFwLnNldFdpZHRoKHRoaXMuZWwuZ2V0V2lkdGgoKSt0aGlzLnRyaWdnZXIuZ2V0V2lkdGgoKSl9dGhpcy5yZXNpemVFbD10aGlzLnBvc2l0aW9uRWw9dGhpcy53cmFwfSxnZXRXaWR0aDpmdW5jdGlvbigpe3JldHVybih0aGlzLmVsLmdldFdpZHRoKCkrdGhpcy50cmlnZ2VyLmdldFdpZHRoKCkpfSx1cGRhdGVFZGl0U3RhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXtpZih0aGlzLnJlYWRPbmx5KXt0aGlzLmVsLmRvbS5yZWFkT25seT10cnVlO3RoaXMuZWwuYWRkQ2xhc3MoIngtdHJpZ2dlci1ub2VkaXQiKTt0aGlzLm11bih0aGlzLmVsLCJjbGljayIsdGhpcy5vblRyaWdnZXJDbGljayx0aGlzKTt0aGlzLnRyaWdnZXIuc2V0RGlzcGxheWVkKGZhbHNlKX1lbHNle2lmKCF0aGlzLmVkaXRhYmxlKXt0aGlzLmVsLmRvbS5yZWFkT25seT10cnVlO3RoaXMuZWwuYWRkQ2xhc3MoIngtdHJpZ2dlci1ub2VkaXQiKTt0aGlzLm1vbih0aGlzLmVsLCJjbGljayIsdGhpcy5vblRyaWdnZXJDbGljayx0aGlzKX1lbHNle3RoaXMuZWwuZG9tLnJlYWRPbmx5PWZhbHNlO3RoaXMuZWwucmVtb3ZlQ2xhc3MoIngtdHJpZ2dlci1ub2VkaXQiKTt0aGlzLm11bih0aGlzLmVsLCJjbGljayIsdGhpcy5vblRyaWdnZXJDbGljayx0aGlzKX10aGlzLnRyaWdnZXIuc2V0RGlzcGxheWVkKCF0aGlzLmhpZGVUcmlnZ2VyKX10aGlzLm9uUmVzaXplKHRoaXMud2lkdGh8fHRoaXMud3JhcC5nZXRXaWR0aCgpKX19LHNldEhpZGVUcmlnZ2VyOmZ1bmN0aW9uKGEpe2lmKGEhPXRoaXMuaGlkZVRyaWdnZXIpe3RoaXMuaGlkZVRyaWdnZXI9YTt0aGlzLnVwZGF0ZUVkaXRTdGF0ZSgpfX0sc2V0RWRpdGFibGU6ZnVuY3Rpb24oYSl7aWYoYSE9dGhpcy5lZGl0YWJsZSl7dGhpcy5lZGl0YWJsZT1hO3RoaXMudXBkYXRlRWRpdFN0YXRlKCl9fSxzZXRSZWFkT25seTpmdW5jdGlvbihhKXtpZihhIT10aGlzLnJlYWRPbmx5KXt0aGlzLnJlYWRPbmx5PWE7dGhpcy51cGRhdGVFZGl0U3RhdGUoKX19LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmZvcm0uVHJpZ2dlckZpZWxkLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuY2FsbCh0aGlzKTt0aGlzLnVwZGF0ZUVkaXRTdGF0ZSgpfSxpbml0VHJpZ2dlcjpmdW5jdGlvbigpe3RoaXMubW9uKHRoaXMudHJpZ2dlciwiY2xpY2siLHRoaXMub25UcmlnZ2VyQ2xpY2ssdGhpcyx7cHJldmVudERlZmF1bHQ6dHJ1ZX0pO3RoaXMudHJpZ2dlci5hZGRDbGFzc09uT3ZlcigieC1mb3JtLXRyaWdnZXItb3ZlciIpO3RoaXMudHJpZ2dlci5hZGRDbGFzc09uQ2xpY2soIngtZm9ybS10cmlnZ2VyLWNsaWNrIil9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMudHJpZ2dlcix0aGlzLndyYXApO2lmKHRoaXMubWltaWNpbmcpe3RoaXMuZG9jLnVuKCJtb3VzZWRvd24iLHRoaXMubWltaWNCbHVyLHRoaXMpfWRlbGV0ZSB0aGlzLmRvYztFeHQuZm9ybS5UcmlnZ2VyRmllbGQuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0sb25Gb2N1czpmdW5jdGlvbigpe0V4dC5mb3JtLlRyaWdnZXJGaWVsZC5zdXBlcmNsYXNzLm9uRm9jdXMuY2FsbCh0aGlzKTtpZighdGhpcy5taW1pY2luZyl7dGhpcy53cmFwLmFkZENsYXNzKHRoaXMud3JhcEZvY3VzQ2xhc3MpO3RoaXMubWltaWNpbmc9dHJ1ZTt0aGlzLmRvYy5vbigibW91c2Vkb3duIix0aGlzLm1pbWljQmx1cix0aGlzLHtkZWxheToxMH0pO2lmKHRoaXMubW9uaXRvclRhYil7dGhpcy5vbigic3BlY2lhbGtleSIsdGhpcy5jaGVja1RhYix0aGlzKX19fSxjaGVja1RhYjpmdW5jdGlvbihhLGIpe2lmKGIuZ2V0S2V5KCk9PWIuVEFCKXt0aGlzLnRyaWdnZXJCbHVyKCl9fSxvbkJsdXI6RXh0LmVtcHR5Rm4sbWltaWNCbHVyOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmlzRGVzdHJveWVkJiYhdGhpcy53cmFwLmNvbnRhaW5zKGEudGFyZ2V0KSYmdGhpcy52YWxpZGF0ZUJsdXIoYSkpe3RoaXMudHJpZ2dlckJsdXIoKX19LHRyaWdnZXJCbHVyOmZ1bmN0aW9uKCl7dGhpcy5taW1pY2luZz1mYWxzZTt0aGlzLmRvYy51bigibW91c2Vkb3duIix0aGlzLm1pbWljQmx1cix0aGlzKTtpZih0aGlzLm1vbml0b3JUYWImJnRoaXMuZWwpe3RoaXMudW4oInNwZWNpYWxrZXkiLHRoaXMuY2hlY2tUYWIsdGhpcyl9RXh0LmZvcm0uVHJpZ2dlckZpZWxkLnN1cGVyY2xhc3Mub25CbHVyLmNhbGwodGhpcyk7aWYodGhpcy53cmFwKXt0aGlzLndyYXAucmVtb3ZlQ2xhc3ModGhpcy53cmFwRm9jdXNDbGFzcyl9fSxiZWZvcmVCbHVyOkV4dC5lbXB0eUZuLHZhbGlkYXRlQmx1cjpmdW5jdGlvbihhKXtyZXR1cm4gdHJ1ZX0sb25UcmlnZ2VyQ2xpY2s6RXh0LmVtcHR5Rm59KTtFeHQuZm9ybS5Ud2luVHJpZ2dlckZpZWxkPUV4dC5leHRlbmQoRXh0LmZvcm0uVHJpZ2dlckZpZWxkLHtpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LmZvcm0uVHdpblRyaWdnZXJGaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLnRyaWdnZXJDb25maWc9e3RhZzoic3BhbiIsY2xzOiJ4LWZvcm0tdHdpbi10cmlnZ2VycyIsY246W3t0YWc6ImltZyIsc3JjOkV4dC5CTEFOS19JTUFHRV9VUkwsYWx0OiIiLGNsczoieC1mb3JtLXRyaWdnZXIgIit0aGlzLnRyaWdnZXIxQ2xhc3N9LHt0YWc6ImltZyIsc3JjOkV4dC5CTEFOS19JTUFHRV9VUkwsYWx0OiIiLGNsczoieC1mb3JtLXRyaWdnZXIgIit0aGlzLnRyaWdnZXIyQ2xhc3N9XX19LGdldFRyaWdnZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudHJpZ2dlcnNbYV19LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmZvcm0uVHdpblRyaWdnZXJGaWVsZC5zdXBlcmNsYXNzLmFmdGVyUmVuZGVyLmNhbGwodGhpcyk7dmFyIGM9dGhpcy50cmlnZ2VycyxiPTAsYT1jLmxlbmd0aDtmb3IoO2I8YTsrK2Ipe2lmKHRoaXNbImhpZGVUcmlnZ2VyIisoYisxKV0pe2NbYl0uaGlkZSgpfX19LGluaXRUcmlnZ2VyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50cmlnZ2VyLnNlbGVjdCgiLngtZm9ybS10cmlnZ2VyIix0cnVlKSxiPXRoaXM7YS5lYWNoKGZ1bmN0aW9uKGQsZyxjKXt2YXIgZT0iVHJpZ2dlciIrKGMrMSk7ZC5oaWRlPWZ1bmN0aW9uKCl7dmFyIGg9Yi53cmFwLmdldFdpZHRoKCk7dGhpcy5kb20uc3R5bGUuZGlzcGxheT0ibm9uZSI7Yi5lbC5zZXRXaWR0aChoLWIudHJpZ2dlci5nZXRXaWR0aCgpKTtiWyJoaWRkZW4iK2VdPXRydWV9O2Quc2hvdz1mdW5jdGlvbigpe3ZhciBoPWIud3JhcC5nZXRXaWR0aCgpO3RoaXMuZG9tLnN0eWxlLmRpc3BsYXk9IiI7Yi5lbC5zZXRXaWR0aChoLWIudHJpZ2dlci5nZXRXaWR0aCgpKTtiWyJoaWRkZW4iK2VdPWZhbHNlfTt0aGlzLm1vbihkLCJjbGljayIsdGhpc1sib24iK2UrIkNsaWNrIl0sdGhpcyx7cHJldmVudERlZmF1bHQ6dHJ1ZX0pO2QuYWRkQ2xhc3NPbk92ZXIoIngtZm9ybS10cmlnZ2VyLW92ZXIiKTtkLmFkZENsYXNzT25DbGljaygieC1mb3JtLXRyaWdnZXItY2xpY2siKX0sdGhpcyk7dGhpcy50cmlnZ2Vycz1hLmVsZW1lbnRzfSxnZXRUcmlnZ2VyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgYT0wO0V4dC5lYWNoKHRoaXMudHJpZ2dlcnMsZnVuY3Rpb24oZCxjKXt2YXIgZT0iVHJpZ2dlciIrKGMrMSksYj1kLmdldFdpZHRoKCk7aWYoYj09PTAmJiF0aGlzWyJoaWRkZW4iK2VdKXthKz10aGlzLmRlZmF1bHRUcmlnZ2VyV2lkdGh9ZWxzZXthKz1ifX0sdGhpcyk7cmV0dXJuIGF9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMudHJpZ2dlcnMpO0V4dC5mb3JtLlR3aW5UcmlnZ2VyRmllbGQuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0sb25UcmlnZ2VyMUNsaWNrOkV4dC5lbXB0eUZuLG9uVHJpZ2dlcjJDbGljazpFeHQuZW1wdHlGbn0pO0V4dC5yZWcoInRyaWdnZXIiLEV4dC5mb3JtLlRyaWdnZXJGaWVsZCk7RXh0LmZvcm0uVGV4dEFyZWE9RXh0LmV4dGVuZChFeHQuZm9ybS5UZXh0RmllbGQse2dyb3dNaW46NjAsZ3Jvd01heDoxMDAwLGdyb3dBcHBlbmQ6IiYjMTYwO1xuJiMxNjA7IixlbnRlcklzU3BlY2lhbDpmYWxzZSxwcmV2ZW50U2Nyb2xsYmFyczpmYWxzZSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe2lmKCF0aGlzLmVsKXt0aGlzLmRlZmF1bHRBdXRvQ3JlYXRlPXt0YWc6InRleHRhcmVhIixzdHlsZToid2lkdGg6MTAwcHg7aGVpZ2h0OjYwcHg7IixhdXRvY29tcGxldGU6Im9mZiJ9fUV4dC5mb3JtLlRleHRBcmVhLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLGIsYSk7aWYodGhpcy5ncm93KXt0aGlzLnRleHRTaXplRWw9RXh0LkRvbUhlbHBlci5hcHBlbmQoZG9jdW1lbnQuYm9keSx7dGFnOiJwcmUiLGNsczoieC1mb3JtLWdyb3ctc2l6ZXIifSk7aWYodGhpcy5wcmV2ZW50U2Nyb2xsYmFycyl7dGhpcy5lbC5zZXRTdHlsZSgib3ZlcmZsb3ciLCJoaWRkZW4iKX10aGlzLmVsLnNldEhlaWdodCh0aGlzLmdyb3dNaW4pfX0sb25EZXN0cm95OmZ1bmN0aW9uKCl7RXh0LnJlbW92ZU5vZGUodGhpcy50ZXh0U2l6ZUVsKTtFeHQuZm9ybS5UZXh0QXJlYS5zdXBlcmNsYXNzLm9uRGVzdHJveS5jYWxsKHRoaXMpfSxmaXJlS2V5OmZ1bmN0aW9uKGEpe2lmKGEuaXNTcGVjaWFsS2V5KCkmJih0aGlzLmVudGVySXNTcGVjaWFsfHwoYS5nZXRLZXkoKSE9YS5FTlRFUnx8YS5oYXNNb2RpZmllcigpKSkpe3RoaXMuZmlyZUV2ZW50KCJzcGVjaWFsa2V5Iix0aGlzLGEpfX0sZG9BdXRvU2l6ZTpmdW5jdGlvbihhKXtyZXR1cm4gIWEuaXNOYXZLZXlQcmVzcygpfHxhLmdldEtleSgpPT1hLkVOVEVSfSxmaWx0ZXJWYWxpZGF0aW9uOmZ1bmN0aW9uKGEpe2lmKCFhLmlzTmF2S2V5UHJlc3MoKXx8KCF0aGlzLmVudGVySXNTcGVjaWFsJiZhLmtleUNvZGU9PWEuRU5URVIpKXt0aGlzLnZhbGlkYXRpb25UYXNrLmRlbGF5KHRoaXMudmFsaWRhdGlvbkRlbGF5KX19LGF1dG9TaXplOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ3Jvd3x8IXRoaXMudGV4dFNpemVFbCl7cmV0dXJufXZhciBjPXRoaXMuZWwsYT1FeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShjLmRvbS52YWx1ZSksZD10aGlzLnRleHRTaXplRWwsYjtFeHQuZmx5KGQpLnNldFdpZHRoKHRoaXMuZWwuZ2V0V2lkdGgoKSk7aWYoYS5sZW5ndGg8MSl7YT0iJiMxNjA7JiMxNjA7In1lbHNle2ErPXRoaXMuZ3Jvd0FwcGVuZDtpZihFeHQuaXNJRSl7YT1hLnJlcGxhY2UoL1xuL2csIiYjMTYwOzxiciAvPiIpfX1kLmlubmVySFRNTD1hO2I9TWF0aC5taW4odGhpcy5ncm93TWF4LE1hdGgubWF4KGQub2Zmc2V0SGVpZ2h0LHRoaXMuZ3Jvd01pbikpO2lmKGIhPXRoaXMubGFzdEhlaWdodCl7dGhpcy5sYXN0SGVpZ2h0PWI7dGhpcy5lbC5zZXRIZWlnaHQoYik7dGhpcy5maXJlRXZlbnQoImF1dG9zaXplIix0aGlzLGIpfX19KTtFeHQucmVnKCJ0ZXh0YXJlYSIsRXh0LmZvcm0uVGV4dEFyZWEpO0V4dC5mb3JtLk51bWJlckZpZWxkPUV4dC5leHRlbmQoRXh0LmZvcm0uVGV4dEZpZWxkLHtmaWVsZENsYXNzOiJ4LWZvcm0tZmllbGQgeC1mb3JtLW51bS1maWVsZCIsYWxsb3dEZWNpbWFsczp0cnVlLGRlY2ltYWxTZXBhcmF0b3I6Ii4iLGRlY2ltYWxQcmVjaXNpb246MixhbGxvd05lZ2F0aXZlOnRydWUsbWluVmFsdWU6TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLG1heFZhbHVlOk51bWJlci5NQVhfVkFMVUUsbWluVGV4dDoiVGhlIG1pbmltdW0gdmFsdWUgZm9yIHRoaXMgZmllbGQgaXMgezB9IixtYXhUZXh0OiJUaGUgbWF4aW11bSB2YWx1ZSBmb3IgdGhpcyBmaWVsZCBpcyB7MH0iLG5hblRleHQ6InswfSBpcyBub3QgYSB2YWxpZCBudW1iZXIiLGJhc2VDaGFyczoiMDEyMzQ1Njc4OSIsYXV0b1N0cmlwQ2hhcnM6ZmFsc2UsaW5pdEV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYmFzZUNoYXJzKyIiO2lmKHRoaXMuYWxsb3dEZWNpbWFscyl7YSs9dGhpcy5kZWNpbWFsU2VwYXJhdG9yfWlmKHRoaXMuYWxsb3dOZWdhdGl2ZSl7YSs9Ii0ifWE9RXh0LmVzY2FwZVJlKGEpO3RoaXMubWFza1JlPW5ldyBSZWdFeHAoIlsiK2ErIl0iKTtpZih0aGlzLmF1dG9TdHJpcENoYXJzKXt0aGlzLnN0cmlwQ2hhcnNSZT1uZXcgUmVnRXhwKCJbXiIrYSsiXSIsImdpIil9RXh0LmZvcm0uTnVtYmVyRmllbGQuc3VwZXJjbGFzcy5pbml0RXZlbnRzLmNhbGwodGhpcyl9LGdldEVycm9yczpmdW5jdGlvbihiKXt2YXIgYz1FeHQuZm9ybS5OdW1iZXJGaWVsZC5zdXBlcmNsYXNzLmdldEVycm9ycy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Yj1FeHQuaXNEZWZpbmVkKGIpP2I6dGhpcy5wcm9jZXNzVmFsdWUodGhpcy5nZXRSYXdWYWx1ZSgpKTtpZihiLmxlbmd0aDwxKXtyZXR1cm4gY31iPVN0cmluZyhiKS5yZXBsYWNlKHRoaXMuZGVjaW1hbFNlcGFyYXRvciwiLiIpO2lmKGlzTmFOKGIpKXtjLnB1c2goU3RyaW5nLmZvcm1hdCh0aGlzLm5hblRleHQsYikpfXZhciBhPXRoaXMucGFyc2VWYWx1ZShiKTtpZihhPHRoaXMubWluVmFsdWUpe2MucHVzaChTdHJpbmcuZm9ybWF0KHRoaXMubWluVGV4dCx0aGlzLm1pblZhbHVlKSl9aWYoYT50aGlzLm1heFZhbHVlKXtjLnB1c2goU3RyaW5nLmZvcm1hdCh0aGlzLm1heFRleHQsdGhpcy5tYXhWYWx1ZSkpfXJldHVybiBjfSxnZXRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZpeFByZWNpc2lvbih0aGlzLnBhcnNlVmFsdWUoRXh0LmZvcm0uTnVtYmVyRmllbGQuc3VwZXJjbGFzcy5nZXRWYWx1ZS5jYWxsKHRoaXMpKSl9LHNldFZhbHVlOmZ1bmN0aW9uKGEpe2E9RXh0LmlzTnVtYmVyKGEpP2E6cGFyc2VGbG9hdChTdHJpbmcoYSkucmVwbGFjZSh0aGlzLmRlY2ltYWxTZXBhcmF0b3IsIi4iKSk7YT10aGlzLmZpeFByZWNpc2lvbihhKTthPWlzTmFOKGEpPyIiOlN0cmluZyhhKS5yZXBsYWNlKCIuIix0aGlzLmRlY2ltYWxTZXBhcmF0b3IpO3JldHVybiBFeHQuZm9ybS5OdW1iZXJGaWVsZC5zdXBlcmNsYXNzLnNldFZhbHVlLmNhbGwodGhpcyxhKX0sc2V0TWluVmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5taW5WYWx1ZT1FeHQubnVtKGEsTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKX0sc2V0TWF4VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5tYXhWYWx1ZT1FeHQubnVtKGEsTnVtYmVyLk1BWF9WQUxVRSl9LHBhcnNlVmFsdWU6ZnVuY3Rpb24oYSl7YT1wYXJzZUZsb2F0KFN0cmluZyhhKS5yZXBsYWNlKHRoaXMuZGVjaW1hbFNlcGFyYXRvciwiLiIpKTtyZXR1cm4gaXNOYU4oYSk/IiI6YX0sZml4UHJlY2lzaW9uOmZ1bmN0aW9uKGIpe3ZhciBhPWlzTmFOKGIpO2lmKCF0aGlzLmFsbG93RGVjaW1hbHN8fHRoaXMuZGVjaW1hbFByZWNpc2lvbj09LTF8fGF8fCFiKXtyZXR1cm4gYT8iIjpifXJldHVybiBwYXJzZUZsb2F0KHBhcnNlRmxvYXQoYikudG9GaXhlZCh0aGlzLmRlY2ltYWxQcmVjaXNpb24pKX0sYmVmb3JlQmx1cjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFyc2VWYWx1ZSh0aGlzLmdldFJhd1ZhbHVlKCkpO2lmKCFFeHQuaXNFbXB0eShhKSl7dGhpcy5zZXRWYWx1ZShhKX19fSk7RXh0LnJlZygibnVtYmVyZmllbGQiLEV4dC5mb3JtLk51bWJlckZpZWxkKTtFeHQuZm9ybS5EYXRlRmllbGQ9RXh0LmV4dGVuZChFeHQuZm9ybS5UcmlnZ2VyRmllbGQse2Zvcm1hdDoibS9kL1kiLGFsdEZvcm1hdHM6Im0vZC9ZfG4vai9ZfG4vai95fG0vai95fG4vZC95fG0vai9ZfG4vZC9ZfG0tZC15fG0tZC1ZfG0vZHxtLWR8bWR8bWR5fG1kWXxkfFktbS1kfG4tanxuL2oiLGRpc2FibGVkRGF5c1RleHQ6IkRpc2FibGVkIixkaXNhYmxlZERhdGVzVGV4dDoiRGlzYWJsZWQiLG1pblRleHQ6IlRoZSBkYXRlIGluIHRoaXMgZmllbGQgbXVzdCBiZSBlcXVhbCB0byBvciBhZnRlciB7MH0iLG1heFRleHQ6IlRoZSBkYXRlIGluIHRoaXMgZmllbGQgbXVzdCBiZSBlcXVhbCB0byBvciBiZWZvcmUgezB9IixpbnZhbGlkVGV4dDoiezB9IGlzIG5vdCBhIHZhbGlkIGRhdGUgLSBpdCBtdXN0IGJlIGluIHRoZSBmb3JtYXQgezF9Iix0cmlnZ2VyQ2xhc3M6IngtZm9ybS1kYXRlLXRyaWdnZXIiLHNob3dUb2RheTp0cnVlLHN0YXJ0RGF5OjAsZGVmYXVsdEF1dG9DcmVhdGU6e3RhZzoiaW5wdXQiLHR5cGU6InRleHQiLHNpemU6IjEwIixhdXRvY29tcGxldGU6Im9mZiJ9LGluaXRUaW1lOiIxMiIsaW5pdFRpbWVGb3JtYXQ6IkgiLHNhZmVQYXJzZTpmdW5jdGlvbihiLGMpe2lmKERhdGUuZm9ybWF0Q29udGFpbnNIb3VySW5mbyhjKSl7cmV0dXJuIERhdGUucGFyc2VEYXRlKGIsYyl9ZWxzZXt2YXIgYT1EYXRlLnBhcnNlRGF0ZShiKyIgIit0aGlzLmluaXRUaW1lLGMrIiAiK3RoaXMuaW5pdFRpbWVGb3JtYXQpO2lmKGEpe3JldHVybiBhLmNsZWFyVGltZSgpfX19LGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5EYXRlRmllbGQuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoInNlbGVjdCIpO2lmKEV4dC5pc1N0cmluZyh0aGlzLm1pblZhbHVlKSl7dGhpcy5taW5WYWx1ZT10aGlzLnBhcnNlRGF0ZSh0aGlzLm1pblZhbHVlKX1pZihFeHQuaXNTdHJpbmcodGhpcy5tYXhWYWx1ZSkpe3RoaXMubWF4VmFsdWU9dGhpcy5wYXJzZURhdGUodGhpcy5tYXhWYWx1ZSl9dGhpcy5kaXNhYmxlZERhdGVzUkU9bnVsbDt0aGlzLmluaXREaXNhYmxlZERheXMoKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5mb3JtLkRhdGVGaWVsZC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTt0aGlzLmtleU5hdj1uZXcgRXh0LktleU5hdih0aGlzLmVsLHtkb3duOmZ1bmN0aW9uKGEpe3RoaXMub25UcmlnZ2VyQ2xpY2soKX0sc2NvcGU6dGhpcyxmb3JjZUtleURvd246dHJ1ZX0pfSxpbml0RGlzYWJsZWREYXlzOmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZERhdGVzKXt2YXIgYj10aGlzLmRpc2FibGVkRGF0ZXMsYT1iLmxlbmd0aC0xLGM9Iig/OiI7RXh0LmVhY2goYixmdW5jdGlvbihnLGUpe2MrPUV4dC5pc0RhdGUoZyk/Il4iK0V4dC5lc2NhcGVSZShnLmRhdGVGb3JtYXQodGhpcy5mb3JtYXQpKSsiJCI6YltlXTtpZihlIT1hKXtjKz0ifCJ9fSx0aGlzKTt0aGlzLmRpc2FibGVkRGF0ZXNSRT1uZXcgUmVnRXhwKGMrIikiKX19LHNldERpc2FibGVkRGF0ZXM6ZnVuY3Rpb24oYSl7dGhpcy5kaXNhYmxlZERhdGVzPWE7dGhpcy5pbml0RGlzYWJsZWREYXlzKCk7aWYodGhpcy5tZW51KXt0aGlzLm1lbnUucGlja2VyLnNldERpc2FibGVkRGF0ZXModGhpcy5kaXNhYmxlZERhdGVzUkUpfX0sc2V0RGlzYWJsZWREYXlzOmZ1bmN0aW9uKGEpe3RoaXMuZGlzYWJsZWREYXlzPWE7aWYodGhpcy5tZW51KXt0aGlzLm1lbnUucGlja2VyLnNldERpc2FibGVkRGF5cyhhKX19LHNldE1pblZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMubWluVmFsdWU9KEV4dC5pc1N0cmluZyhhKT90aGlzLnBhcnNlRGF0ZShhKTphKTtpZih0aGlzLm1lbnUpe3RoaXMubWVudS5waWNrZXIuc2V0TWluRGF0ZSh0aGlzLm1pblZhbHVlKX19LHNldE1heFZhbHVlOmZ1bmN0aW9uKGEpe3RoaXMubWF4VmFsdWU9KEV4dC5pc1N0cmluZyhhKT90aGlzLnBhcnNlRGF0ZShhKTphKTtpZih0aGlzLm1lbnUpe3RoaXMubWVudS5waWNrZXIuc2V0TWF4RGF0ZSh0aGlzLm1heFZhbHVlKX19LGdldEVycm9yczpmdW5jdGlvbihlKXt2YXIgaD1FeHQuZm9ybS5EYXRlRmllbGQuc3VwZXJjbGFzcy5nZXRFcnJvcnMuYXBwbHkodGhpcyxhcmd1bWVudHMpO2U9dGhpcy5mb3JtYXREYXRlKGV8fHRoaXMucHJvY2Vzc1ZhbHVlKHRoaXMuZ2V0UmF3VmFsdWUoKSkpO2lmKGUubGVuZ3RoPDEpe3JldHVybiBofXZhciBjPWU7ZT10aGlzLnBhcnNlRGF0ZShlKTtpZighZSl7aC5wdXNoKFN0cmluZy5mb3JtYXQodGhpcy5pbnZhbGlkVGV4dCxjLHRoaXMuZm9ybWF0KSk7cmV0dXJuIGh9dmFyIGc9ZS5nZXRUaW1lKCk7aWYodGhpcy5taW5WYWx1ZSYmZzx0aGlzLm1pblZhbHVlLmNsZWFyVGltZSgpLmdldFRpbWUoKSl7aC5wdXNoKFN0cmluZy5mb3JtYXQodGhpcy5taW5UZXh0LHRoaXMuZm9ybWF0RGF0ZSh0aGlzLm1pblZhbHVlKSkpfWlmKHRoaXMubWF4VmFsdWUmJmc+dGhpcy5tYXhWYWx1ZS5jbGVhclRpbWUoKS5nZXRUaW1lKCkpe2gucHVzaChTdHJpbmcuZm9ybWF0KHRoaXMubWF4VGV4dCx0aGlzLmZvcm1hdERhdGUodGhpcy5tYXhWYWx1ZSkpKX1pZih0aGlzLmRpc2FibGVkRGF5cyl7dmFyIGE9ZS5nZXREYXkoKTtmb3IodmFyIGI9MDtiPHRoaXMuZGlzYWJsZWREYXlzLmxlbmd0aDtiKyspe2lmKGE9PT10aGlzLmRpc2FibGVkRGF5c1tiXSl7aC5wdXNoKHRoaXMuZGlzYWJsZWREYXlzVGV4dCk7YnJlYWt9fX12YXIgZD10aGlzLmZvcm1hdERhdGUoZSk7aWYodGhpcy5kaXNhYmxlZERhdGVzUkUmJnRoaXMuZGlzYWJsZWREYXRlc1JFLnRlc3QoZCkpe2gucHVzaChTdHJpbmcuZm9ybWF0KHRoaXMuZGlzYWJsZWREYXRlc1RleHQsZCkpfXJldHVybiBofSx2YWxpZGF0ZUJsdXI6ZnVuY3Rpb24oKXtyZXR1cm4gIXRoaXMubWVudXx8IXRoaXMubWVudS5pc1Zpc2libGUoKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJzZURhdGUoRXh0LmZvcm0uRGF0ZUZpZWxkLnN1cGVyY2xhc3MuZ2V0VmFsdWUuY2FsbCh0aGlzKSl8fCIifSxzZXRWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmZvcm0uRGF0ZUZpZWxkLnN1cGVyY2xhc3Muc2V0VmFsdWUuY2FsbCh0aGlzLHRoaXMuZm9ybWF0RGF0ZSh0aGlzLnBhcnNlRGF0ZShhKSkpfSxwYXJzZURhdGU6ZnVuY3Rpb24oZyl7aWYoIWd8fEV4dC5pc0RhdGUoZykpe3JldHVybiBnfXZhciBiPXRoaXMuc2FmZVBhcnNlKGcsdGhpcy5mb3JtYXQpLGM9dGhpcy5hbHRGb3JtYXRzLGU9dGhpcy5hbHRGb3JtYXRzQXJyYXk7aWYoIWImJmMpe2U9ZXx8Yy5zcGxpdCgifCIpO2Zvcih2YXIgZD0wLGE9ZS5sZW5ndGg7ZDxhJiYhYjtkKyspe2I9dGhpcy5zYWZlUGFyc2UoZyxlW2RdKX19cmV0dXJuIGJ9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMubWVudSx0aGlzLmtleU5hdik7RXh0LmZvcm0uRGF0ZUZpZWxkLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9LGZvcm1hdERhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5pc0RhdGUoYSk/YS5kYXRlRm9ybWF0KHRoaXMuZm9ybWF0KTphfSxvblRyaWdnZXJDbGljazpmdW5jdGlvbigpe2lmKHRoaXMuZGlzYWJsZWQpe3JldHVybn1pZih0aGlzLm1lbnU9PW51bGwpe3RoaXMubWVudT1uZXcgRXh0Lm1lbnUuRGF0ZU1lbnUoe2hpZGVPbkNsaWNrOmZhbHNlLGZvY3VzT25TZWxlY3Q6ZmFsc2V9KX10aGlzLm9uRm9jdXMoKTtFeHQuYXBwbHkodGhpcy5tZW51LnBpY2tlcix7bWluRGF0ZTp0aGlzLm1pblZhbHVlLG1heERhdGU6dGhpcy5tYXhWYWx1ZSxkaXNhYmxlZERhdGVzUkU6dGhpcy5kaXNhYmxlZERhdGVzUkUsZGlzYWJsZWREYXRlc1RleHQ6dGhpcy5kaXNhYmxlZERhdGVzVGV4dCxkaXNhYmxlZERheXM6dGhpcy5kaXNhYmxlZERheXMsZGlzYWJsZWREYXlzVGV4dDp0aGlzLmRpc2FibGVkRGF5c1RleHQsZm9ybWF0OnRoaXMuZm9ybWF0LHNob3dUb2RheTp0aGlzLnNob3dUb2RheSxzdGFydERheTp0aGlzLnN0YXJ0RGF5LG1pblRleHQ6U3RyaW5nLmZvcm1hdCh0aGlzLm1pblRleHQsdGhpcy5mb3JtYXREYXRlKHRoaXMubWluVmFsdWUpKSxtYXhUZXh0OlN0cmluZy5mb3JtYXQodGhpcy5tYXhUZXh0LHRoaXMuZm9ybWF0RGF0ZSh0aGlzLm1heFZhbHVlKSl9KTt0aGlzLm1lbnUucGlja2VyLnNldFZhbHVlKHRoaXMuZ2V0VmFsdWUoKXx8bmV3IERhdGUoKSk7dGhpcy5tZW51LnNob3codGhpcy5lbCwidGwtYmw/Iik7dGhpcy5tZW51RXZlbnRzKCJvbiIpfSxtZW51RXZlbnRzOmZ1bmN0aW9uKGEpe3RoaXMubWVudVthXSgic2VsZWN0Iix0aGlzLm9uU2VsZWN0LHRoaXMpO3RoaXMubWVudVthXSgiaGlkZSIsdGhpcy5vbk1lbnVIaWRlLHRoaXMpO3RoaXMubWVudVthXSgic2hvdyIsdGhpcy5vbkZvY3VzLHRoaXMpfSxvblNlbGVjdDpmdW5jdGlvbihhLGIpe3RoaXMuc2V0VmFsdWUoYik7dGhpcy5maXJlRXZlbnQoInNlbGVjdCIsdGhpcyxiKTt0aGlzLm1lbnUuaGlkZSgpfSxvbk1lbnVIaWRlOmZ1bmN0aW9uKCl7dGhpcy5mb2N1cyhmYWxzZSw2MCk7dGhpcy5tZW51RXZlbnRzKCJ1biIpfSxiZWZvcmVCbHVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYXJzZURhdGUodGhpcy5nZXRSYXdWYWx1ZSgpKTtpZihhKXt0aGlzLnNldFZhbHVlKGEpfX19KTtFeHQucmVnKCJkYXRlZmllbGQiLEV4dC5mb3JtLkRhdGVGaWVsZCk7RXh0LmZvcm0uRGlzcGxheUZpZWxkPUV4dC5leHRlbmQoRXh0LmZvcm0uRmllbGQse3ZhbGlkYXRpb25FdmVudDpmYWxzZSx2YWxpZGF0ZU9uQmx1cjpmYWxzZSxkZWZhdWx0QXV0b0NyZWF0ZTp7dGFnOiJkaXYifSxmaWVsZENsYXNzOiJ4LWZvcm0tZGlzcGxheS1maWVsZCIsaHRtbEVuY29kZTpmYWxzZSxpbml0RXZlbnRzOkV4dC5lbXB0eUZuLGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX0sdmFsaWRhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZX0sZ2V0UmF3VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlbmRlcmVkP3RoaXMuZWwuZG9tLmlubmVySFRNTDpFeHQudmFsdWUodGhpcy52YWx1ZSwiIik7aWYoYT09PXRoaXMuZW1wdHlUZXh0KXthPSIifWlmKHRoaXMuaHRtbEVuY29kZSl7YT1FeHQudXRpbC5Gb3JtYXQuaHRtbERlY29kZShhKX1yZXR1cm4gYX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRSYXdWYWx1ZSgpfSxnZXROYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX0sc2V0UmF3VmFsdWU6ZnVuY3Rpb24oYSl7aWYodGhpcy5odG1sRW5jb2RlKXthPUV4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKGEpfXJldHVybiB0aGlzLnJlbmRlcmVkPyh0aGlzLmVsLmRvbS5pbm5lckhUTUw9KEV4dC5pc0VtcHR5KGEpPyIiOmEpKToodGhpcy52YWx1ZT1hKX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5zZXRSYXdWYWx1ZShhKTtyZXR1cm4gdGhpc319KTtFeHQucmVnKCJkaXNwbGF5ZmllbGQiLEV4dC5mb3JtLkRpc3BsYXlGaWVsZCk7RXh0LmZvcm0uQ29tYm9Cb3g9RXh0LmV4dGVuZChFeHQuZm9ybS5UcmlnZ2VyRmllbGQse2RlZmF1bHRBdXRvQ3JlYXRlOnt0YWc6ImlucHV0Iix0eXBlOiJ0ZXh0IixzaXplOiIyNCIsYXV0b2NvbXBsZXRlOiJvZmYifSxsaXN0Q2xhc3M6IiIsc2VsZWN0ZWRDbGFzczoieC1jb21iby1zZWxlY3RlZCIsbGlzdEVtcHR5VGV4dDoiIix0cmlnZ2VyQ2xhc3M6IngtZm9ybS1hcnJvdy10cmlnZ2VyIixzaGFkb3c6InNpZGVzIixsaXN0QWxpZ246InRsLWJsPyIsbWF4SGVpZ2h0OjMwMCxtaW5IZWlnaHQ6OTAsdHJpZ2dlckFjdGlvbjoicXVlcnkiLG1pbkNoYXJzOjQsYXV0b1NlbGVjdDp0cnVlLHR5cGVBaGVhZDpmYWxzZSxxdWVyeURlbGF5OjUwMCxwYWdlU2l6ZTowLHNlbGVjdE9uRm9jdXM6ZmFsc2UscXVlcnlQYXJhbToicXVlcnkiLGxvYWRpbmdUZXh0OiJMb2FkaW5nLi4uIixyZXNpemFibGU6ZmFsc2UsaGFuZGxlSGVpZ2h0OjgsYWxsUXVlcnk6IiIsbW9kZToicmVtb3RlIixtaW5MaXN0V2lkdGg6NzAsZm9yY2VTZWxlY3Rpb246ZmFsc2UsdHlwZUFoZWFkRGVsYXk6MjUwLGxhenlJbml0OnRydWUsY2xlYXJGaWx0ZXJPblJlc2V0OnRydWUsc3VibWl0VmFsdWU6dW5kZWZpbmVkLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuZm9ybS5Db21ib0JveC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50cygiZXhwYW5kIiwiY29sbGFwc2UiLCJiZWZvcmVzZWxlY3QiLCJzZWxlY3QiLCJiZWZvcmVxdWVyeSIpO2lmKHRoaXMudHJhbnNmb3JtKXt2YXIgYz1FeHQuZ2V0RG9tKHRoaXMudHJhbnNmb3JtKTtpZighdGhpcy5oaWRkZW5OYW1lKXt0aGlzLmhpZGRlbk5hbWU9Yy5uYW1lfWlmKCF0aGlzLnN0b3JlKXt0aGlzLm1vZGU9ImxvY2FsIjt2YXIgaj1bXSxlPWMub3B0aW9ucztmb3IodmFyIGI9MCxhPWUubGVuZ3RoO2I8YTtiKyspe3ZhciBoPWVbYl0sZz0oaC5oYXNBdHRyaWJ1dGU/aC5oYXNBdHRyaWJ1dGUoInZhbHVlIik6aC5nZXRBdHRyaWJ1dGVOb2RlKCJ2YWx1ZSIpLnNwZWNpZmllZCk/aC52YWx1ZTpoLnRleHQ7aWYoaC5zZWxlY3RlZCYmRXh0LmlzRW1wdHkodGhpcy52YWx1ZSx0cnVlKSl7dGhpcy52YWx1ZT1nfWoucHVzaChbZyxoLnRleHRdKX10aGlzLnN0b3JlPW5ldyBFeHQuZGF0YS5BcnJheVN0b3JlKHtpZEluZGV4OjAsZmllbGRzOlsidmFsdWUiLCJ0ZXh0Il0sZGF0YTpqLGF1dG9EZXN0cm95OnRydWV9KTt0aGlzLnZhbHVlRmllbGQ9InZhbHVlIjt0aGlzLmRpc3BsYXlGaWVsZD0idGV4dCJ9Yy5uYW1lPUV4dC5pZCgpO2lmKCF0aGlzLmxhenlSZW5kZXIpe3RoaXMudGFyZ2V0PXRydWU7dGhpcy5lbD1FeHQuRG9tSGVscGVyLmluc2VydEJlZm9yZShjLHRoaXMuYXV0b0NyZWF0ZXx8dGhpcy5kZWZhdWx0QXV0b0NyZWF0ZSk7dGhpcy5yZW5kZXIodGhpcy5lbC5wYXJlbnROb2RlLGMpfUV4dC5yZW1vdmVOb2RlKGMpfWVsc2V7aWYodGhpcy5zdG9yZSl7dGhpcy5zdG9yZT1FeHQuU3RvcmVNZ3IubG9va3VwKHRoaXMuc3RvcmUpO2lmKHRoaXMuc3RvcmUuYXV0b0NyZWF0ZWQpe3RoaXMuZGlzcGxheUZpZWxkPXRoaXMudmFsdWVGaWVsZD0iZmllbGQxIjtpZighdGhpcy5zdG9yZS5leHBhbmREYXRhKXt0aGlzLmRpc3BsYXlGaWVsZD0iZmllbGQyIn10aGlzLm1vZGU9ImxvY2FsIn19fXRoaXMuc2VsZWN0ZWRJbmRleD0tMTtpZih0aGlzLm1vZGU9PSJsb2NhbCIpe2lmKCFFeHQuaXNEZWZpbmVkKHRoaXMuaW5pdGlhbENvbmZpZy5xdWVyeURlbGF5KSl7dGhpcy5xdWVyeURlbGF5PTEwfWlmKCFFeHQuaXNEZWZpbmVkKHRoaXMuaW5pdGlhbENvbmZpZy5taW5DaGFycykpe3RoaXMubWluQ2hhcnM9MH19fSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe2lmKHRoaXMuaGlkZGVuTmFtZSYmIUV4dC5pc0RlZmluZWQodGhpcy5zdWJtaXRWYWx1ZSkpe3RoaXMuc3VibWl0VmFsdWU9ZmFsc2V9RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTtpZih0aGlzLmhpZGRlbk5hbWUpe3RoaXMuaGlkZGVuRmllbGQ9dGhpcy5lbC5pbnNlcnRTaWJsaW5nKHt0YWc6ImlucHV0Iix0eXBlOiJoaWRkZW4iLG5hbWU6dGhpcy5oaWRkZW5OYW1lLGlkOih0aGlzLmhpZGRlbklkfHxFeHQuaWQoKSl9LCJiZWZvcmUiLHRydWUpfWlmKEV4dC5pc0dlY2tvKXt0aGlzLmVsLmRvbS5zZXRBdHRyaWJ1dGUoImF1dG9jb21wbGV0ZSIsIm9mZiIpfWlmKCF0aGlzLmxhenlJbml0KXt0aGlzLmluaXRMaXN0KCl9ZWxzZXt0aGlzLm9uKCJmb2N1cyIsdGhpcy5pbml0TGlzdCx0aGlzLHtzaW5nbGU6dHJ1ZX0pfX0saW5pdFZhbHVlOmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5pbml0VmFsdWUuY2FsbCh0aGlzKTtpZih0aGlzLmhpZGRlbkZpZWxkKXt0aGlzLmhpZGRlbkZpZWxkLnZhbHVlPUV4dC52YWx1ZShFeHQuaXNEZWZpbmVkKHRoaXMuaGlkZGVuVmFsdWUpP3RoaXMuaGlkZGVuVmFsdWU6dGhpcy52YWx1ZSwiIil9fSxnZXRQYXJlbnRaSW5kZXg6ZnVuY3Rpb24oKXt2YXIgYTtpZih0aGlzLm93bmVyQ3Qpe3RoaXMuZmluZFBhcmVudEJ5KGZ1bmN0aW9uKGIpe2E9cGFyc2VJbnQoYi5nZXRQb3NpdGlvbkVsKCkuZ2V0U3R5bGUoInotaW5kZXgiKSwxMCk7cmV0dXJuICEhYX0pfXJldHVybiBhfSxnZXRaSW5kZXg6ZnVuY3Rpb24oYil7Yj1ifHxFeHQuZ2V0RG9tKHRoaXMuZ2V0TGlzdFBhcmVudCgpfHxFeHQuZ2V0Qm9keSgpKTt2YXIgYT1wYXJzZUludChFeHQuZmx5KGIpLmdldFN0eWxlKCJ6LWluZGV4IiksMTApO2lmKCFhKXthPXRoaXMuZ2V0UGFyZW50WkluZGV4KCl9cmV0dXJuKGF8fDEyMDAwKSs1fSxpbml0TGlzdDpmdW5jdGlvbigpe2lmKCF0aGlzLmxpc3Qpe3ZhciBhPSJ4LWNvbWJvLWxpc3QiLGM9RXh0LmdldERvbSh0aGlzLmdldExpc3RQYXJlbnQoKXx8RXh0LmdldEJvZHkoKSk7dGhpcy5saXN0PW5ldyBFeHQuTGF5ZXIoe3BhcmVudEVsOmMsc2hhZG93OnRoaXMuc2hhZG93LGNsczpbYSx0aGlzLmxpc3RDbGFzc10uam9pbigiICIpLGNvbnN0cmFpbjpmYWxzZSx6aW5kZXg6dGhpcy5nZXRaSW5kZXgoYyl9KTt2YXIgYj10aGlzLmxpc3RXaWR0aHx8TWF0aC5tYXgodGhpcy53cmFwLmdldFdpZHRoKCksdGhpcy5taW5MaXN0V2lkdGgpO3RoaXMubGlzdC5zZXRTaXplKGIsMCk7dGhpcy5saXN0LnN3YWxsb3dFdmVudCgibW91c2V3aGVlbCIpO3RoaXMuYXNzZXRIZWlnaHQ9MDtpZih0aGlzLnN5bmNGb250IT09ZmFsc2Upe3RoaXMubGlzdC5zZXRTdHlsZSgiZm9udC1zaXplIix0aGlzLmVsLmdldFN0eWxlKCJmb250LXNpemUiKSl9aWYodGhpcy50aXRsZSl7dGhpcy5oZWFkZXI9dGhpcy5saXN0LmNyZWF0ZUNoaWxkKHtjbHM6YSsiLWhkIixodG1sOnRoaXMudGl0bGV9KTt0aGlzLmFzc2V0SGVpZ2h0Kz10aGlzLmhlYWRlci5nZXRIZWlnaHQoKX10aGlzLmlubmVyTGlzdD10aGlzLmxpc3QuY3JlYXRlQ2hpbGQoe2NsczphKyItaW5uZXIifSk7dGhpcy5tb24odGhpcy5pbm5lckxpc3QsIm1vdXNlb3ZlciIsdGhpcy5vblZpZXdPdmVyLHRoaXMpO3RoaXMubW9uKHRoaXMuaW5uZXJMaXN0LCJtb3VzZW1vdmUiLHRoaXMub25WaWV3TW92ZSx0aGlzKTt0aGlzLmlubmVyTGlzdC5zZXRXaWR0aChiLXRoaXMubGlzdC5nZXRGcmFtZVdpZHRoKCJsciIpKTtpZih0aGlzLnBhZ2VTaXplKXt0aGlzLmZvb3Rlcj10aGlzLmxpc3QuY3JlYXRlQ2hpbGQoe2NsczphKyItZnQifSk7dGhpcy5wYWdlVGI9bmV3IEV4dC5QYWdpbmdUb29sYmFyKHtzdG9yZTp0aGlzLnN0b3JlLHBhZ2VTaXplOnRoaXMucGFnZVNpemUscmVuZGVyVG86dGhpcy5mb290ZXJ9KTt0aGlzLmFzc2V0SGVpZ2h0Kz10aGlzLmZvb3Rlci5nZXRIZWlnaHQoKX1pZighdGhpcy50cGwpe3RoaXMudHBsPSc8dHBsIGZvcj0iLiI+PGRpdiBjbGFzcz0iJythKyctaXRlbSI+eycrdGhpcy5kaXNwbGF5RmllbGQrIn08L2Rpdj48L3RwbD4ifXRoaXMudmlldz1uZXcgRXh0LkRhdGFWaWV3KHthcHBseVRvOnRoaXMuaW5uZXJMaXN0LHRwbDp0aGlzLnRwbCxzaW5nbGVTZWxlY3Q6dHJ1ZSxzZWxlY3RlZENsYXNzOnRoaXMuc2VsZWN0ZWRDbGFzcyxpdGVtU2VsZWN0b3I6dGhpcy5pdGVtU2VsZWN0b3J8fCIuIithKyItaXRlbSIsZW1wdHlUZXh0OnRoaXMubGlzdEVtcHR5VGV4dCxkZWZlckVtcHR5VGV4dDpmYWxzZX0pO3RoaXMubW9uKHRoaXMudmlldyx7Y29udGFpbmVyY2xpY2s6dGhpcy5vblZpZXdDbGljayxjbGljazp0aGlzLm9uVmlld0NsaWNrLHNjb3BlOnRoaXN9KTt0aGlzLmJpbmRTdG9yZSh0aGlzLnN0b3JlLHRydWUpO2lmKHRoaXMucmVzaXphYmxlKXt0aGlzLnJlc2l6ZXI9bmV3IEV4dC5SZXNpemFibGUodGhpcy5saXN0LHtwaW5uZWQ6dHJ1ZSxoYW5kbGVzOiJzZSJ9KTt0aGlzLm1vbih0aGlzLnJlc2l6ZXIsInJlc2l6ZSIsZnVuY3Rpb24oZyxkLGUpe3RoaXMubWF4SGVpZ2h0PWUtdGhpcy5oYW5kbGVIZWlnaHQtdGhpcy5saXN0LmdldEZyYW1lV2lkdGgoInRiIiktdGhpcy5hc3NldEhlaWdodDt0aGlzLmxpc3RXaWR0aD1kO3RoaXMuaW5uZXJMaXN0LnNldFdpZHRoKGQtdGhpcy5saXN0LmdldEZyYW1lV2lkdGgoImxyIikpO3RoaXMucmVzdHJpY3RIZWlnaHQoKX0sdGhpcyk7dGhpc1t0aGlzLnBhZ2VTaXplPyJmb290ZXIiOiJpbm5lckxpc3QiXS5zZXRTdHlsZSgibWFyZ2luLWJvdHRvbSIsdGhpcy5oYW5kbGVIZWlnaHQrInB4Iil9fX0sZ2V0TGlzdFBhcmVudDpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5ib2R5fSxnZXRTdG9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnN0b3JlfSxiaW5kU3RvcmU6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnN0b3JlJiYhYil7aWYodGhpcy5zdG9yZSE9PWEmJnRoaXMuc3RvcmUuYXV0b0Rlc3Ryb3kpe3RoaXMuc3RvcmUuZGVzdHJveSgpfWVsc2V7dGhpcy5zdG9yZS51bigiYmVmb3JlbG9hZCIsdGhpcy5vbkJlZm9yZUxvYWQsdGhpcyk7dGhpcy5zdG9yZS51bigibG9hZCIsdGhpcy5vbkxvYWQsdGhpcyk7dGhpcy5zdG9yZS51bigiZXhjZXB0aW9uIix0aGlzLmNvbGxhcHNlLHRoaXMpfWlmKCFhKXt0aGlzLnN0b3JlPW51bGw7aWYodGhpcy52aWV3KXt0aGlzLnZpZXcuYmluZFN0b3JlKG51bGwpfWlmKHRoaXMucGFnZVRiKXt0aGlzLnBhZ2VUYi5iaW5kU3RvcmUobnVsbCl9fX1pZihhKXtpZighYil7dGhpcy5sYXN0UXVlcnk9bnVsbDtpZih0aGlzLnBhZ2VUYil7dGhpcy5wYWdlVGIuYmluZFN0b3JlKGEpfX10aGlzLnN0b3JlPUV4dC5TdG9yZU1nci5sb29rdXAoYSk7dGhpcy5zdG9yZS5vbih7c2NvcGU6dGhpcyxiZWZvcmVsb2FkOnRoaXMub25CZWZvcmVMb2FkLGxvYWQ6dGhpcy5vbkxvYWQsZXhjZXB0aW9uOnRoaXMuY29sbGFwc2V9KTtpZih0aGlzLnZpZXcpe3RoaXMudmlldy5iaW5kU3RvcmUoYSl9fX0scmVzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmNsZWFyRmlsdGVyT25SZXNldCYmdGhpcy5tb2RlPT0ibG9jYWwiKXt0aGlzLnN0b3JlLmNsZWFyRmlsdGVyKCl9RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5yZXNldC5jYWxsKHRoaXMpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5pbml0RXZlbnRzLmNhbGwodGhpcyk7dGhpcy5rZXlOYXY9bmV3IEV4dC5LZXlOYXYodGhpcy5lbCx7dXA6ZnVuY3Rpb24oYSl7dGhpcy5pbktleU1vZGU9dHJ1ZTt0aGlzLnNlbGVjdFByZXYoKX0sZG93bjpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V4cGFuZGVkKCkpe3RoaXMub25UcmlnZ2VyQ2xpY2soKX1lbHNle3RoaXMuaW5LZXlNb2RlPXRydWU7dGhpcy5zZWxlY3ROZXh0KCl9fSxlbnRlcjpmdW5jdGlvbihhKXt0aGlzLm9uVmlld0NsaWNrKCl9LGVzYzpmdW5jdGlvbihhKXt0aGlzLmNvbGxhcHNlKCl9LHRhYjpmdW5jdGlvbihhKXtpZih0aGlzLmZvcmNlU2VsZWN0aW9uPT09dHJ1ZSl7dGhpcy5jb2xsYXBzZSgpfWVsc2V7dGhpcy5vblZpZXdDbGljayhmYWxzZSl9cmV0dXJuIHRydWV9LHNjb3BlOnRoaXMsZG9SZWxheTpmdW5jdGlvbihjLGIsYSl7aWYoYT09ImRvd24ifHx0aGlzLnNjb3BlLmlzRXhwYW5kZWQoKSl7dmFyIGQ9RXh0LktleU5hdi5wcm90b3R5cGUuZG9SZWxheS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIUV4dC5pc0lFJiZFeHQuRXZlbnRNYW5hZ2VyLnVzZUtleWRvd24pe3RoaXMuc2NvcGUuZmlyZUtleShjKX1yZXR1cm4gZH1yZXR1cm4gdHJ1ZX0sZm9yY2VLZXlEb3duOnRydWUsZGVmYXVsdEV2ZW50QWN0aW9uOiJzdG9wRXZlbnQifSk7dGhpcy5xdWVyeURlbGF5PU1hdGgubWF4KHRoaXMucXVlcnlEZWxheXx8MTAsdGhpcy5tb2RlPT0ibG9jYWwiPzEwOjI1MCk7dGhpcy5kcVRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKHRoaXMuaW5pdFF1ZXJ5LHRoaXMpO2lmKHRoaXMudHlwZUFoZWFkKXt0aGlzLnRhVGFzaz1uZXcgRXh0LnV0aWwuRGVsYXllZFRhc2sodGhpcy5vblR5cGVBaGVhZCx0aGlzKX1pZighdGhpcy5lbmFibGVLZXlFdmVudHMpe3RoaXMubW9uKHRoaXMuZWwsImtleXVwIix0aGlzLm9uS2V5VXAsdGhpcyl9fSxvbkRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLmRxVGFzayl7dGhpcy5kcVRhc2suY2FuY2VsKCk7dGhpcy5kcVRhc2s9bnVsbH10aGlzLmJpbmRTdG9yZShudWxsKTtFeHQuZGVzdHJveSh0aGlzLnJlc2l6ZXIsdGhpcy52aWV3LHRoaXMucGFnZVRiLHRoaXMubGlzdCk7RXh0LmRlc3Ryb3lNZW1iZXJzKHRoaXMsImhpZGRlbkZpZWxkIik7RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0sZmlyZUtleTpmdW5jdGlvbihhKXtpZighdGhpcy5pc0V4cGFuZGVkKCkpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3MuZmlyZUtleS5jYWxsKHRoaXMsYSl9fSxvblJlc2l6ZTpmdW5jdGlvbihhLGIpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3Mub25SZXNpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKCFpc05hTihhKSYmdGhpcy5pc1Zpc2libGUoKSYmdGhpcy5saXN0KXt0aGlzLmRvUmVzaXplKGEpfWVsc2V7dGhpcy5idWZmZXJTaXplPWF9fSxkb1Jlc2l6ZTpmdW5jdGlvbihhKXtpZighRXh0LmlzRGVmaW5lZCh0aGlzLmxpc3RXaWR0aCkpe3ZhciBiPU1hdGgubWF4KGEsdGhpcy5taW5MaXN0V2lkdGgpO3RoaXMubGlzdC5zZXRXaWR0aChiKTt0aGlzLmlubmVyTGlzdC5zZXRXaWR0aChiLXRoaXMubGlzdC5nZXRGcmFtZVdpZHRoKCJsciIpKX19LG9uRW5hYmxlOmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5vbkVuYWJsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5oaWRkZW5GaWVsZCl7dGhpcy5oaWRkZW5GaWVsZC5kaXNhYmxlZD1mYWxzZX19LG9uRGlzYWJsZTpmdW5jdGlvbigpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3Mub25EaXNhYmxlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih0aGlzLmhpZGRlbkZpZWxkKXt0aGlzLmhpZGRlbkZpZWxkLmRpc2FibGVkPXRydWV9fSxvbkJlZm9yZUxvYWQ6ZnVuY3Rpb24oKXtpZighdGhpcy5oYXNGb2N1cyl7cmV0dXJufXRoaXMuaW5uZXJMaXN0LnVwZGF0ZSh0aGlzLmxvYWRpbmdUZXh0Pyc8ZGl2IGNsYXNzPSJsb2FkaW5nLWluZGljYXRvciI+Jyt0aGlzLmxvYWRpbmdUZXh0KyI8L2Rpdj4iOiIiKTt0aGlzLnJlc3RyaWN0SGVpZ2h0KCk7dGhpcy5zZWxlY3RlZEluZGV4PS0xfSxvbkxvYWQ6ZnVuY3Rpb24oKXtpZighdGhpcy5oYXNGb2N1cyl7cmV0dXJufWlmKHRoaXMuc3RvcmUuZ2V0Q291bnQoKT4wfHx0aGlzLmxpc3RFbXB0eVRleHQpe3RoaXMuZXhwYW5kKCk7dGhpcy5yZXN0cmljdEhlaWdodCgpO2lmKHRoaXMubGFzdFF1ZXJ5PT10aGlzLmFsbFF1ZXJ5KXtpZih0aGlzLmVkaXRhYmxlKXt0aGlzLmVsLmRvbS5zZWxlY3QoKX1pZih0aGlzLmF1dG9TZWxlY3QhPT1mYWxzZSYmIXRoaXMuc2VsZWN0QnlWYWx1ZSh0aGlzLnZhbHVlLHRydWUpKXt0aGlzLnNlbGVjdCgwLHRydWUpfX1lbHNle2lmKHRoaXMuYXV0b1NlbGVjdCE9PWZhbHNlKXt0aGlzLnNlbGVjdE5leHQoKX1pZih0aGlzLnR5cGVBaGVhZCYmdGhpcy5sYXN0S2V5IT1FeHQuRXZlbnRPYmplY3QuQkFDS1NQQUNFJiZ0aGlzLmxhc3RLZXkhPUV4dC5FdmVudE9iamVjdC5ERUxFVEUpe3RoaXMudGFUYXNrLmRlbGF5KHRoaXMudHlwZUFoZWFkRGVsYXkpfX19ZWxzZXt0aGlzLmNvbGxhcHNlKCl9fSxvblR5cGVBaGVhZDpmdW5jdGlvbigpe2lmKHRoaXMuc3RvcmUuZ2V0Q291bnQoKT4wKXt2YXIgYj10aGlzLnN0b3JlLmdldEF0KDApO3ZhciBjPWIuZGF0YVt0aGlzLmRpc3BsYXlGaWVsZF07dmFyIGE9Yy5sZW5ndGg7dmFyIGQ9dGhpcy5nZXRSYXdWYWx1ZSgpLmxlbmd0aDtpZihkIT1hKXt0aGlzLnNldFJhd1ZhbHVlKGMpO3RoaXMuc2VsZWN0VGV4dChkLGMubGVuZ3RoKX19fSxhc3NlcnRWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0UmF3VmFsdWUoKSxhO2lmKHRoaXMudmFsdWVGaWVsZCYmRXh0LmlzRGVmaW5lZCh0aGlzLnZhbHVlKSl7YT10aGlzLmZpbmRSZWNvcmQodGhpcy52YWx1ZUZpZWxkLHRoaXMudmFsdWUpfWlmKCFhfHxhLmdldCh0aGlzLmRpc3BsYXlGaWVsZCkhPWIpe2E9dGhpcy5maW5kUmVjb3JkKHRoaXMuZGlzcGxheUZpZWxkLGIpfWlmKCFhJiZ0aGlzLmZvcmNlU2VsZWN0aW9uKXtpZihiLmxlbmd0aD4wJiZiIT10aGlzLmVtcHR5VGV4dCl7dGhpcy5lbC5kb20udmFsdWU9RXh0LnZhbHVlKHRoaXMubGFzdFNlbGVjdGlvblRleHQsIiIpO3RoaXMuYXBwbHlFbXB0eVRleHQoKX1lbHNle3RoaXMuY2xlYXJWYWx1ZSgpfX1lbHNle2lmKGEmJnRoaXMudmFsdWVGaWVsZCl7aWYodGhpcy52YWx1ZT09Yil7cmV0dXJufWI9YS5nZXQodGhpcy52YWx1ZUZpZWxkfHx0aGlzLmRpc3BsYXlGaWVsZCl9dGhpcy5zZXRWYWx1ZShiKX19LG9uU2VsZWN0OmZ1bmN0aW9uKGEsYil7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZXNlbGVjdCIsdGhpcyxhLGIpIT09ZmFsc2Upe3RoaXMuc2V0VmFsdWUoYS5kYXRhW3RoaXMudmFsdWVGaWVsZHx8dGhpcy5kaXNwbGF5RmllbGRdKTt0aGlzLmNvbGxhcHNlKCk7dGhpcy5maXJlRXZlbnQoInNlbGVjdCIsdGhpcyxhLGIpfX0sZ2V0TmFtZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaGlkZGVuRmllbGQ7cmV0dXJuIGEmJmEubmFtZT9hLm5hbWU6dGhpcy5oaWRkZW5OYW1lfHxFeHQuZm9ybS5Db21ib0JveC5zdXBlcmNsYXNzLmdldE5hbWUuY2FsbCh0aGlzKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnZhbHVlRmllbGQpe3JldHVybiBFeHQuaXNEZWZpbmVkKHRoaXMudmFsdWUpP3RoaXMudmFsdWU6IiJ9ZWxzZXtyZXR1cm4gRXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5nZXRWYWx1ZS5jYWxsKHRoaXMpfX0sY2xlYXJWYWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaGlkZGVuRmllbGQpe3RoaXMuaGlkZGVuRmllbGQudmFsdWU9IiJ9dGhpcy5zZXRSYXdWYWx1ZSgiIik7dGhpcy5sYXN0U2VsZWN0aW9uVGV4dD0iIjt0aGlzLmFwcGx5RW1wdHlUZXh0KCk7dGhpcy52YWx1ZT0iIn0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGM9YTtpZih0aGlzLnZhbHVlRmllbGQpe3ZhciBiPXRoaXMuZmluZFJlY29yZCh0aGlzLnZhbHVlRmllbGQsYSk7aWYoYil7Yz1iLmRhdGFbdGhpcy5kaXNwbGF5RmllbGRdfWVsc2V7aWYoRXh0LmlzRGVmaW5lZCh0aGlzLnZhbHVlTm90Rm91bmRUZXh0KSl7Yz10aGlzLnZhbHVlTm90Rm91bmRUZXh0fX19dGhpcy5sYXN0U2VsZWN0aW9uVGV4dD1jO2lmKHRoaXMuaGlkZGVuRmllbGQpe3RoaXMuaGlkZGVuRmllbGQudmFsdWU9RXh0LnZhbHVlKGEsIiIpfUV4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3Muc2V0VmFsdWUuY2FsbCh0aGlzLGMpO3RoaXMudmFsdWU9YTtyZXR1cm4gdGhpc30sZmluZFJlY29yZDpmdW5jdGlvbihjLGIpe3ZhciBhO2lmKHRoaXMuc3RvcmUuZ2V0Q291bnQoKT4wKXt0aGlzLnN0b3JlLmVhY2goZnVuY3Rpb24oZCl7aWYoZC5kYXRhW2NdPT1iKXthPWQ7cmV0dXJuIGZhbHNlfX0pfXJldHVybiBhfSxvblZpZXdNb3ZlOmZ1bmN0aW9uKGIsYSl7dGhpcy5pbktleU1vZGU9ZmFsc2V9LG9uVmlld092ZXI6ZnVuY3Rpb24oZCxiKXtpZih0aGlzLmluS2V5TW9kZSl7cmV0dXJufXZhciBjPXRoaXMudmlldy5maW5kSXRlbUZyb21DaGlsZChiKTtpZihjKXt2YXIgYT10aGlzLnZpZXcuaW5kZXhPZihjKTt0aGlzLnNlbGVjdChhLGZhbHNlKX19LG9uVmlld0NsaWNrOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMudmlldy5nZXRTZWxlY3RlZEluZGV4ZXMoKVswXSxjPXRoaXMuc3RvcmUsZD1jLmdldEF0KGEpO2lmKGQpe3RoaXMub25TZWxlY3QoZCxhKX1lbHNle3RoaXMuY29sbGFwc2UoKX1pZihiIT09ZmFsc2Upe3RoaXMuZWwuZm9jdXMoKX19LHJlc3RyaWN0SGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5pbm5lckxpc3QuZG9tLnN0eWxlLmhlaWdodD0iIjt2YXIgYj10aGlzLmlubmVyTGlzdC5kb20sZT10aGlzLmxpc3QuZ2V0RnJhbWVXaWR0aCgidGIiKSsodGhpcy5yZXNpemFibGU/dGhpcy5oYW5kbGVIZWlnaHQ6MCkrdGhpcy5hc3NldEhlaWdodCxjPU1hdGgubWF4KGIuY2xpZW50SGVpZ2h0LGIub2Zmc2V0SGVpZ2h0LGIuc2Nyb2xsSGVpZ2h0KSxhPXRoaXMuZ2V0UG9zaXRpb24oKVsxXS1FeHQuZ2V0Qm9keSgpLmdldFNjcm9sbCgpLnRvcCxnPUV4dC5saWIuRG9tLmdldFZpZXdIZWlnaHQoKS1hLXRoaXMuZ2V0U2l6ZSgpLmhlaWdodCxkPU1hdGgubWF4KGEsZyx0aGlzLm1pbkhlaWdodHx8MCktdGhpcy5saXN0LnNoYWRvd09mZnNldC1lLTU7Yz1NYXRoLm1pbihjLGQsdGhpcy5tYXhIZWlnaHQpO3RoaXMuaW5uZXJMaXN0LnNldEhlaWdodChjKTt0aGlzLmxpc3QuYmVnaW5VcGRhdGUoKTt0aGlzLmxpc3Quc2V0SGVpZ2h0KGMrZSk7dGhpcy5saXN0LmFsaWduVG8uYXBwbHkodGhpcy5saXN0LFt0aGlzLmVsXS5jb25jYXQodGhpcy5saXN0QWxpZ24pKTt0aGlzLmxpc3QuZW5kVXBkYXRlKCl9LGlzRXhwYW5kZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5saXN0JiZ0aGlzLmxpc3QuaXNWaXNpYmxlKCl9LHNlbGVjdEJ5VmFsdWU6ZnVuY3Rpb24oYSxjKXtpZighRXh0LmlzRW1wdHkoYSx0cnVlKSl7dmFyIGI9dGhpcy5maW5kUmVjb3JkKHRoaXMudmFsdWVGaWVsZHx8dGhpcy5kaXNwbGF5RmllbGQsYSk7aWYoYil7dGhpcy5zZWxlY3QodGhpcy5zdG9yZS5pbmRleE9mKGIpLGMpO3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9LHNlbGVjdDpmdW5jdGlvbihhLGMpe3RoaXMuc2VsZWN0ZWRJbmRleD1hO3RoaXMudmlldy5zZWxlY3QoYSk7aWYoYyE9PWZhbHNlKXt2YXIgYj10aGlzLnZpZXcuZ2V0Tm9kZShhKTtpZihiKXt0aGlzLmlubmVyTGlzdC5zY3JvbGxDaGlsZEludG9WaWV3KGIsZmFsc2UpfX19LHNlbGVjdE5leHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnN0b3JlLmdldENvdW50KCk7aWYoYT4wKXtpZih0aGlzLnNlbGVjdGVkSW5kZXg9PS0xKXt0aGlzLnNlbGVjdCgwKX1lbHNle2lmKHRoaXMuc2VsZWN0ZWRJbmRleDxhLTEpe3RoaXMuc2VsZWN0KHRoaXMuc2VsZWN0ZWRJbmRleCsxKX19fX0sc2VsZWN0UHJldjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RvcmUuZ2V0Q291bnQoKTtpZihhPjApe2lmKHRoaXMuc2VsZWN0ZWRJbmRleD09LTEpe3RoaXMuc2VsZWN0KDApfWVsc2V7aWYodGhpcy5zZWxlY3RlZEluZGV4IT09MCl7dGhpcy5zZWxlY3QodGhpcy5zZWxlY3RlZEluZGV4LTEpfX19fSxvbktleVVwOmZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0S2V5KCk7aWYodGhpcy5lZGl0YWJsZSE9PWZhbHNlJiZ0aGlzLnJlYWRPbmx5IT09dHJ1ZSYmKGE9PWIuQkFDS1NQQUNFfHwhYi5pc1NwZWNpYWxLZXkoKSkpe3RoaXMubGFzdEtleT1hO3RoaXMuZHFUYXNrLmRlbGF5KHRoaXMucXVlcnlEZWxheSl9RXh0LmZvcm0uQ29tYm9Cb3guc3VwZXJjbGFzcy5vbktleVVwLmNhbGwodGhpcyxiKX0sdmFsaWRhdGVCbHVyOmZ1bmN0aW9uKCl7cmV0dXJuICF0aGlzLmxpc3R8fCF0aGlzLmxpc3QuaXNWaXNpYmxlKCl9LGluaXRRdWVyeTpmdW5jdGlvbigpe3RoaXMuZG9RdWVyeSh0aGlzLmdldFJhd1ZhbHVlKCkpfSxiZWZvcmVCbHVyOmZ1bmN0aW9uKCl7dGhpcy5hc3NlcnRWYWx1ZSgpfSxwb3N0Qmx1cjpmdW5jdGlvbigpe0V4dC5mb3JtLkNvbWJvQm94LnN1cGVyY2xhc3MucG9zdEJsdXIuY2FsbCh0aGlzKTt0aGlzLmNvbGxhcHNlKCk7dGhpcy5pbktleU1vZGU9ZmFsc2V9LGRvUXVlcnk6ZnVuY3Rpb24oYyxiKXtjPUV4dC5pc0VtcHR5KGMpPyIiOmM7dmFyIGE9e3F1ZXJ5OmMsZm9yY2VBbGw6Yixjb21ibzp0aGlzLGNhbmNlbDpmYWxzZX07aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZXF1ZXJ5IixhKT09PWZhbHNlfHxhLmNhbmNlbCl7cmV0dXJuIGZhbHNlfWM9YS5xdWVyeTtiPWEuZm9yY2VBbGw7aWYoYj09PXRydWV8fChjLmxlbmd0aD49dGhpcy5taW5DaGFycykpe2lmKHRoaXMubGFzdFF1ZXJ5IT09Yyl7dGhpcy5sYXN0UXVlcnk9YztpZih0aGlzLm1vZGU9PSJsb2NhbCIpe3RoaXMuc2VsZWN0ZWRJbmRleD0tMTtpZihiKXt0aGlzLnN0b3JlLmNsZWFyRmlsdGVyKCl9ZWxzZXt0aGlzLnN0b3JlLmZpbHRlcih0aGlzLmRpc3BsYXlGaWVsZCxjKX10aGlzLm9uTG9hZCgpfWVsc2V7dGhpcy5zdG9yZS5iYXNlUGFyYW1zW3RoaXMucXVlcnlQYXJhbV09Yzt0aGlzLnN0b3JlLmxvYWQoe3BhcmFtczp0aGlzLmdldFBhcmFtcyhjKX0pO3RoaXMuZXhwYW5kKCl9fWVsc2V7dGhpcy5zZWxlY3RlZEluZGV4PS0xO3RoaXMub25Mb2FkKCl9fX0sZ2V0UGFyYW1zOmZ1bmN0aW9uKGEpe3ZhciBiPXt9LGM9dGhpcy5zdG9yZS5wYXJhbU5hbWVzO2lmKHRoaXMucGFnZVNpemUpe2JbYy5zdGFydF09MDtiW2MubGltaXRdPXRoaXMucGFnZVNpemV9cmV0dXJuIGJ9LGNvbGxhcHNlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuaXNFeHBhbmRlZCgpKXtyZXR1cm59dGhpcy5saXN0LmhpZGUoKTtFeHQuZ2V0RG9jKCkudW4oIm1vdXNld2hlZWwiLHRoaXMuY29sbGFwc2VJZix0aGlzKTtFeHQuZ2V0RG9jKCkudW4oIm1vdXNlZG93biIsdGhpcy5jb2xsYXBzZUlmLHRoaXMpO3RoaXMuZmlyZUV2ZW50KCJjb2xsYXBzZSIsdGhpcyl9LGNvbGxhcHNlSWY6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuaXNEZXN0cm95ZWQmJiFhLndpdGhpbih0aGlzLndyYXApJiYhYS53aXRoaW4odGhpcy5saXN0KSl7dGhpcy5jb2xsYXBzZSgpfX0sZXhwYW5kOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0V4cGFuZGVkKCl8fCF0aGlzLmhhc0ZvY3VzKXtyZXR1cm59aWYodGhpcy50aXRsZXx8dGhpcy5wYWdlU2l6ZSl7dGhpcy5hc3NldEhlaWdodD0wO2lmKHRoaXMudGl0bGUpe3RoaXMuYXNzZXRIZWlnaHQrPXRoaXMuaGVhZGVyLmdldEhlaWdodCgpfWlmKHRoaXMucGFnZVNpemUpe3RoaXMuYXNzZXRIZWlnaHQrPXRoaXMuZm9vdGVyLmdldEhlaWdodCgpfX1pZih0aGlzLmJ1ZmZlclNpemUpe3RoaXMuZG9SZXNpemUodGhpcy5idWZmZXJTaXplKTtkZWxldGUgdGhpcy5idWZmZXJTaXplfXRoaXMubGlzdC5hbGlnblRvLmFwcGx5KHRoaXMubGlzdCxbdGhpcy5lbF0uY29uY2F0KHRoaXMubGlzdEFsaWduKSk7dGhpcy5saXN0LnNldFpJbmRleCh0aGlzLmdldFpJbmRleCgpKTt0aGlzLmxpc3Quc2hvdygpO2lmKEV4dC5pc0dlY2tvMil7dGhpcy5pbm5lckxpc3Quc2V0T3ZlcmZsb3coImF1dG8iKX10aGlzLm1vbihFeHQuZ2V0RG9jKCkse3Njb3BlOnRoaXMsbW91c2V3aGVlbDp0aGlzLmNvbGxhcHNlSWYsbW91c2Vkb3duOnRoaXMuY29sbGFwc2VJZn0pO3RoaXMuZmlyZUV2ZW50KCJleHBhbmQiLHRoaXMpfSxvblRyaWdnZXJDbGljazpmdW5jdGlvbigpe2lmKHRoaXMucmVhZE9ubHl8fHRoaXMuZGlzYWJsZWQpe3JldHVybn1pZih0aGlzLmlzRXhwYW5kZWQoKSl7dGhpcy5jb2xsYXBzZSgpO3RoaXMuZWwuZm9jdXMoKX1lbHNle3RoaXMub25Gb2N1cyh7fSk7aWYodGhpcy50cmlnZ2VyQWN0aW9uPT0iYWxsIil7dGhpcy5kb1F1ZXJ5KHRoaXMuYWxsUXVlcnksdHJ1ZSl9ZWxzZXt0aGlzLmRvUXVlcnkodGhpcy5nZXRSYXdWYWx1ZSgpKX10aGlzLmVsLmZvY3VzKCl9fX0pO0V4dC5yZWcoImNvbWJvIixFeHQuZm9ybS5Db21ib0JveCk7RXh0LmZvcm0uQ2hlY2tib3g9RXh0LmV4dGVuZChFeHQuZm9ybS5GaWVsZCx7Zm9jdXNDbGFzczp1bmRlZmluZWQsZmllbGRDbGFzczoieC1mb3JtLWZpZWxkIixjaGVja2VkOmZhbHNlLGJveExhYmVsOiImIzE2MDsiLGRlZmF1bHRBdXRvQ3JlYXRlOnt0YWc6ImlucHV0Iix0eXBlOiJjaGVja2JveCIsYXV0b2NvbXBsZXRlOiJvZmYifSxhY3Rpb25Nb2RlOiJ3cmFwIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ2hlY2tib3guc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5hZGRFdmVudHMoImNoZWNrIil9LG9uUmVzaXplOmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ2hlY2tib3guc3VwZXJjbGFzcy5vblJlc2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMuYm94TGFiZWwmJiF0aGlzLmZpZWxkTGFiZWwpe3RoaXMuZWwuYWxpZ25Ubyh0aGlzLndyYXAsImMtYyIpfX0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5mb3JtLkNoZWNrYm94LnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO3RoaXMubW9uKHRoaXMuZWwse3Njb3BlOnRoaXMsY2xpY2s6dGhpcy5vbkNsaWNrLGNoYW5nZTp0aGlzLm9uQ2xpY2t9KX0sbWFya0ludmFsaWQ6RXh0LmVtcHR5Rm4sY2xlYXJJbnZhbGlkOkV4dC5lbXB0eUZuLG9uUmVuZGVyOmZ1bmN0aW9uKGIsYSl7RXh0LmZvcm0uQ2hlY2tib3guc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTtpZih0aGlzLmlucHV0VmFsdWUhPT11bmRlZmluZWQpe3RoaXMuZWwuZG9tLnZhbHVlPXRoaXMuaW5wdXRWYWx1ZX10aGlzLndyYXA9dGhpcy5lbC53cmFwKHtjbHM6IngtZm9ybS1jaGVjay13cmFwIn0pO2lmKHRoaXMuYm94TGFiZWwpe3RoaXMud3JhcC5jcmVhdGVDaGlsZCh7dGFnOiJsYWJlbCIsaHRtbEZvcjp0aGlzLmVsLmlkLGNsczoieC1mb3JtLWNiLWxhYmVsIixodG1sOnRoaXMuYm94TGFiZWx9KX1pZih0aGlzLmNoZWNrZWQpe3RoaXMuc2V0VmFsdWUodHJ1ZSl9ZWxzZXt0aGlzLmNoZWNrZWQ9dGhpcy5lbC5kb20uY2hlY2tlZH1pZihFeHQuaXNJRSYmIUV4dC5pc1N0cmljdCl7dGhpcy53cmFwLnJlcGFpbnQoKX10aGlzLnJlc2l6ZUVsPXRoaXMucG9zaXRpb25FbD10aGlzLndyYXB9LG9uRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMud3JhcCk7RXh0LmZvcm0uQ2hlY2tib3guc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX0saW5pdFZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5vcmlnaW5hbFZhbHVlPXRoaXMuZ2V0VmFsdWUoKX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXtyZXR1cm4gdGhpcy5lbC5kb20uY2hlY2tlZH1yZXR1cm4gdGhpcy5jaGVja2VkfSxvbkNsaWNrOmZ1bmN0aW9uKCl7aWYodGhpcy5lbC5kb20uY2hlY2tlZCE9dGhpcy5jaGVja2VkKXt0aGlzLnNldFZhbHVlKHRoaXMuZWwuZG9tLmNoZWNrZWQpfX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5jaGVja2VkLGI9dGhpcy5pbnB1dFZhbHVlO2lmKGE9PT1mYWxzZSl7dGhpcy5jaGVja2VkPWZhbHNlfWVsc2V7dGhpcy5jaGVja2VkPShhPT09dHJ1ZXx8YT09PSJ0cnVlInx8YT09IjEifHwoYj9hPT1iOlN0cmluZyhhKS50b0xvd2VyQ2FzZSgpPT0ib24iKSl9aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5lbC5kb20uY2hlY2tlZD10aGlzLmNoZWNrZWQ7dGhpcy5lbC5kb20uZGVmYXVsdENoZWNrZWQ9dGhpcy5jaGVja2VkfWlmKGMhPXRoaXMuY2hlY2tlZCl7dGhpcy5maXJlRXZlbnQoImNoZWNrIix0aGlzLHRoaXMuY2hlY2tlZCk7aWYodGhpcy5oYW5kbGVyKXt0aGlzLmhhbmRsZXIuY2FsbCh0aGlzLnNjb3BlfHx0aGlzLHRoaXMsdGhpcy5jaGVja2VkKX19cmV0dXJuIHRoaXN9fSk7RXh0LnJlZygiY2hlY2tib3giLEV4dC5mb3JtLkNoZWNrYm94KTtFeHQuZm9ybS5DaGVja2JveEdyb3VwPUV4dC5leHRlbmQoRXh0LmZvcm0uRmllbGQse2NvbHVtbnM6ImF1dG8iLHZlcnRpY2FsOmZhbHNlLGFsbG93Qmxhbms6dHJ1ZSxibGFua1RleHQ6IllvdSBtdXN0IHNlbGVjdCBhdCBsZWFzdCBvbmUgaXRlbSBpbiB0aGlzIGdyb3VwIixkZWZhdWx0VHlwZToiY2hlY2tib3giLGdyb3VwQ2xzOiJ4LWZvcm0tY2hlY2stZ3JvdXAiLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50cygiY2hhbmdlIik7dGhpcy5vbigiY2hhbmdlIix0aGlzLnZhbGlkYXRlLHRoaXMpO0V4dC5mb3JtLkNoZWNrYm94R3JvdXAuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyl9LG9uUmVuZGVyOmZ1bmN0aW9uKGosZyl7aWYoIXRoaXMuZWwpe3ZhciBwPXthdXRvRWw6e2lkOnRoaXMuaWR9LGNsczp0aGlzLmdyb3VwQ2xzLGxheW91dDoiY29sdW1uIixyZW5kZXJUbzpqLGJ1ZmZlclJlc2l6ZTpmYWxzZX07dmFyIGE9e3h0eXBlOiJjb250YWluZXIiLGRlZmF1bHRUeXBlOnRoaXMuZGVmYXVsdFR5cGUsbGF5b3V0OiJmb3JtIixkZWZhdWx0czp7aGlkZUxhYmVsOnRydWUsYW5jaG9yOiIxMDAlIn19O2lmKHRoaXMuaXRlbXNbMF0uaXRlbXMpe0V4dC5hcHBseShwLHtsYXlvdXRDb25maWc6e2NvbHVtbnM6dGhpcy5pdGVtcy5sZW5ndGh9LGRlZmF1bHRzOnRoaXMuZGVmYXVsdHMsaXRlbXM6dGhpcy5pdGVtc30pO2Zvcih2YXIgZT0wLG09dGhpcy5pdGVtcy5sZW5ndGg7ZTxtO2UrKyl7RXh0LmFwcGx5SWYodGhpcy5pdGVtc1tlXSxhKX19ZWxzZXt2YXIgZCxuPVtdO2lmKHR5cGVvZiB0aGlzLmNvbHVtbnM9PSJzdHJpbmciKXt0aGlzLmNvbHVtbnM9dGhpcy5pdGVtcy5sZW5ndGh9aWYoIUV4dC5pc0FycmF5KHRoaXMuY29sdW1ucykpe3ZhciBrPVtdO2Zvcih2YXIgZT0wO2U8dGhpcy5jb2x1bW5zO2UrKyl7ay5wdXNoKCgxMDAvdGhpcy5jb2x1bW5zKSowLjAxKX10aGlzLmNvbHVtbnM9a31kPXRoaXMuY29sdW1ucy5sZW5ndGg7Zm9yKHZhciBlPTA7ZTxkO2UrKyl7dmFyIGI9RXh0LmFwcGx5KHtpdGVtczpbXX0sYSk7Ylt0aGlzLmNvbHVtbnNbZV08PTE/ImNvbHVtbldpZHRoIjoid2lkdGgiXT10aGlzLmNvbHVtbnNbZV07aWYodGhpcy5kZWZhdWx0cyl7Yi5kZWZhdWx0cz1FeHQuYXBwbHkoYi5kZWZhdWx0c3x8e30sdGhpcy5kZWZhdWx0cyl9bi5wdXNoKGIpfWlmKHRoaXMudmVydGljYWwpe3ZhciByPU1hdGguY2VpbCh0aGlzLml0ZW1zLmxlbmd0aC9kKSxvPTA7Zm9yKHZhciBlPTAsbT10aGlzLml0ZW1zLmxlbmd0aDtlPG07ZSsrKXtpZihlPjAmJmUlcj09MCl7bysrfWlmKHRoaXMuaXRlbXNbZV0uZmllbGRMYWJlbCl7dGhpcy5pdGVtc1tlXS5oaWRlTGFiZWw9ZmFsc2V9bltvXS5pdGVtcy5wdXNoKHRoaXMuaXRlbXNbZV0pfX1lbHNle2Zvcih2YXIgZT0wLG09dGhpcy5pdGVtcy5sZW5ndGg7ZTxtO2UrKyl7dmFyIHE9ZSVkO2lmKHRoaXMuaXRlbXNbZV0uZmllbGRMYWJlbCl7dGhpcy5pdGVtc1tlXS5oaWRlTGFiZWw9ZmFsc2V9bltxXS5pdGVtcy5wdXNoKHRoaXMuaXRlbXNbZV0pfX1FeHQuYXBwbHkocCx7bGF5b3V0Q29uZmlnOntjb2x1bW5zOmR9LGl0ZW1zOm59KX10aGlzLnBhbmVsPW5ldyBFeHQuQ29udGFpbmVyKHApO3RoaXMucGFuZWwub3duZXJDdD10aGlzO3RoaXMuZWw9dGhpcy5wYW5lbC5nZXRFbCgpO2lmKHRoaXMuZm9ySWQmJnRoaXMuaXRlbUNscyl7dmFyIGM9dGhpcy5lbC51cCh0aGlzLml0ZW1DbHMpLmNoaWxkKCJsYWJlbCIsdHJ1ZSk7aWYoYyl7Yy5zZXRBdHRyaWJ1dGUoImh0bWxGb3IiLHRoaXMuZm9ySWQpfX12YXIgaD10aGlzLnBhbmVsLmZpbmRCeShmdW5jdGlvbihpKXtyZXR1cm4gaS5pc0Zvcm1GaWVsZH0sdGhpcyk7dGhpcy5pdGVtcz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKCk7dGhpcy5pdGVtcy5hZGRBbGwoaCl9RXh0LmZvcm0uQ2hlY2tib3hHcm91cC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxqLGcpfSxpbml0VmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnZhbHVlKXt0aGlzLnNldFZhbHVlLmFwcGx5KHRoaXMsdGhpcy5idWZmZXJlZD90aGlzLnZhbHVlOlt0aGlzLnZhbHVlXSk7ZGVsZXRlIHRoaXMuYnVmZmVyZWQ7ZGVsZXRlIHRoaXMudmFsdWV9fSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe0V4dC5mb3JtLkNoZWNrYm94R3JvdXAuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO3RoaXMuZWFjaEl0ZW0oZnVuY3Rpb24oYSl7YS5vbigiY2hlY2siLHRoaXMuZmlyZUNoZWNrZWQsdGhpcyk7YS5pbkdyb3VwPXRydWV9KX0sZG9MYXlvdXQ6ZnVuY3Rpb24oKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLnBhbmVsLmZvcmNlTGF5b3V0PXRoaXMub3duZXJDdC5mb3JjZUxheW91dDt0aGlzLnBhbmVsLmRvTGF5b3V0KCl9fSxmaXJlQ2hlY2tlZDpmdW5jdGlvbigpe3ZhciBhPVtdO3RoaXMuZWFjaEl0ZW0oZnVuY3Rpb24oYil7aWYoYi5jaGVja2VkKXthLnB1c2goYil9fSk7dGhpcy5maXJlRXZlbnQoImNoYW5nZSIsdGhpcyxhKX0sZ2V0RXJyb3JzOmZ1bmN0aW9uKCl7dmFyIGI9RXh0LmZvcm0uQ2hlY2tib3hHcm91cC5zdXBlcmNsYXNzLmdldEVycm9ycy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoIXRoaXMuYWxsb3dCbGFuayl7dmFyIGE9dHJ1ZTt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGMpe2lmKGMuY2hlY2tlZCl7cmV0dXJuKGE9ZmFsc2UpfX0pO2lmKGEpe2IucHVzaCh0aGlzLmJsYW5rVGV4dCl9fXJldHVybiBifSxpc0RpcnR5OmZ1bmN0aW9uKCl7aWYodGhpcy5kaXNhYmxlZHx8IXRoaXMucmVuZGVyZWQpe3JldHVybiBmYWxzZX12YXIgYT1mYWxzZTt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGIpe2lmKGIuaXNEaXJ0eSgpKXthPXRydWU7cmV0dXJuIGZhbHNlfX0pO3JldHVybiBhfSxzZXRSZWFkT25seTpmdW5jdGlvbihhKXtpZih0aGlzLnJlbmRlcmVkKXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGIpe2Iuc2V0UmVhZE9ubHkoYSl9KX10aGlzLnJlYWRPbmx5PWF9LG9uRGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZWFjaEl0ZW0oZnVuY3Rpb24oYSl7YS5kaXNhYmxlKCl9KX0sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGEpe2EuZW5hYmxlKCl9KX0sb25SZXNpemU6ZnVuY3Rpb24oYSxiKXt0aGlzLnBhbmVsLnNldFNpemUoYSxiKTt0aGlzLnBhbmVsLmRvTGF5b3V0KCl9LHJlc2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbFZhbHVlKXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGEpe2lmKGEuc2V0VmFsdWUpe2Euc2V0VmFsdWUoZmFsc2UpO2Eub3JpZ2luYWxWYWx1ZT1hLmdldFZhbHVlKCl9fSk7dGhpcy5yZXNldE9yaWdpbmFsPXRydWU7dGhpcy5zZXRWYWx1ZSh0aGlzLm9yaWdpbmFsVmFsdWUpO2RlbGV0ZSB0aGlzLnJlc2V0T3JpZ2luYWx9ZWxzZXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGEpe2lmKGEucmVzZXQpe2EucmVzZXQoKX19KX0oZnVuY3Rpb24oKXt0aGlzLmNsZWFySW52YWxpZCgpfSkuZGVmZXIoNTAsdGhpcyl9LHNldFZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5vblNldFZhbHVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lbHNle3RoaXMuYnVmZmVyZWQ9dHJ1ZTt0aGlzLnZhbHVlPWFyZ3VtZW50c31yZXR1cm4gdGhpc30sb25TZXRWYWx1ZTpmdW5jdGlvbihkLGMpe2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2lmKEV4dC5pc0FycmF5KGQpKXtFeHQuZWFjaChkLGZ1bmN0aW9uKGgsZSl7aWYoRXh0LmlzT2JqZWN0KGgpJiZoLnNldFZhbHVlKXtoLnNldFZhbHVlKHRydWUpO2lmKHRoaXMucmVzZXRPcmlnaW5hbD09PXRydWUpe2gub3JpZ2luYWxWYWx1ZT1oLmdldFZhbHVlKCl9fWVsc2V7dmFyIGc9dGhpcy5pdGVtcy5pdGVtQXQoZSk7aWYoZyl7Zy5zZXRWYWx1ZShoKX19fSx0aGlzKX1lbHNle2lmKEV4dC5pc09iamVjdChkKSl7Zm9yKHZhciBhIGluIGQpe3ZhciBiPXRoaXMuZ2V0Qm94KGEpO2lmKGIpe2Iuc2V0VmFsdWUoZFthXSl9fX1lbHNle3RoaXMuc2V0VmFsdWVGb3JJdGVtKGQpfX19ZWxzZXt2YXIgYj10aGlzLmdldEJveChkKTtpZihiKXtiLnNldFZhbHVlKGMpfX19LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXtFeHQuZGVzdHJveSh0aGlzLnBhbmVsKTtpZighdGhpcy5yZW5kZXJlZCl7RXh0LmRlc3Ryb3kodGhpcy5pdGVtcyl9RXh0LmZvcm0uQ2hlY2tib3hHcm91cC5zdXBlcmNsYXNzLmJlZm9yZURlc3Ryb3kuY2FsbCh0aGlzKX0sc2V0VmFsdWVGb3JJdGVtOmZ1bmN0aW9uKGEpe2E9U3RyaW5nKGEpLnNwbGl0KCIsIik7dGhpcy5lYWNoSXRlbShmdW5jdGlvbihiKXtpZihhLmluZGV4T2YoYi5pbnB1dFZhbHVlKT4tMSl7Yi5zZXRWYWx1ZSh0cnVlKX19KX0sZ2V0Qm94OmZ1bmN0aW9uKGIpe3ZhciBhPW51bGw7dGhpcy5lYWNoSXRlbShmdW5jdGlvbihjKXtpZihiPT1jfHxjLmRhdGFJbmRleD09Ynx8Yy5pZD09Ynx8Yy5nZXROYW1lKCk9PWIpe2E9YztyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIGF9LGdldFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9W107dGhpcy5lYWNoSXRlbShmdW5jdGlvbihiKXtpZihiLmNoZWNrZWQpe2EucHVzaChiKX19KTtyZXR1cm4gYX0sZWFjaEl0ZW06ZnVuY3Rpb24oYixhKXtpZih0aGlzLml0ZW1zJiZ0aGlzLml0ZW1zLmVhY2gpe3RoaXMuaXRlbXMuZWFjaChiLGF8fHRoaXMpfX0sZ2V0UmF3VmFsdWU6RXh0LmVtcHR5Rm4sc2V0UmF3VmFsdWU6RXh0LmVtcHR5Rm59KTtFeHQucmVnKCJjaGVja2JveGdyb3VwIixFeHQuZm9ybS5DaGVja2JveEdyb3VwKTtFeHQuZm9ybS5Db21wb3NpdGVGaWVsZD1FeHQuZXh0ZW5kKEV4dC5mb3JtLkZpZWxkLHtkZWZhdWx0TWFyZ2luczoiMCA1IDAgMCIsc2tpcExhc3RJdGVtTWFyZ2luOnRydWUsaXNDb21wb3NpdGU6dHJ1ZSxjb21iaW5lRXJyb3JzOnRydWUsbGFiZWxDb25uZWN0b3I6IiwgIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dmFyIGc9W10sYj10aGlzLml0ZW1zLGU7Zm9yKHZhciBkPTAsYz1iLmxlbmd0aDtkPGM7ZCsrKXtlPWJbZF07aWYoIUV4dC5pc0VtcHR5KGUucmVmKSl7ZS5yZWY9Ii4uLyIrZS5yZWZ9Zy5wdXNoKGUuZmllbGRMYWJlbCk7RXh0LmFwcGx5SWYoZSx0aGlzLmRlZmF1bHRzKTtpZighKGQ9PWMtMSYmdGhpcy5za2lwTGFzdEl0ZW1NYXJnaW4pKXtFeHQuYXBwbHlJZihlLHttYXJnaW5zOnRoaXMuZGVmYXVsdE1hcmdpbnN9KX19dGhpcy5maWVsZExhYmVsPXRoaXMuZmllbGRMYWJlbHx8dGhpcy5idWlsZExhYmVsKGcpO3RoaXMuZmllbGRFcnJvcnM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbih0cnVlLGZ1bmN0aW9uKGgpe3JldHVybiBoLmZpZWxkfSk7dGhpcy5maWVsZEVycm9ycy5vbih7c2NvcGU6dGhpcyxhZGQ6dGhpcy51cGRhdGVJbnZhbGlkTWFyayxyZW1vdmU6dGhpcy51cGRhdGVJbnZhbGlkTWFyayxyZXBsYWNlOnRoaXMudXBkYXRlSW52YWxpZE1hcmt9KTtFeHQuZm9ybS5Db21wb3NpdGVGaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3RoaXMuaW5uZXJDdD1uZXcgRXh0LkNvbnRhaW5lcih7bGF5b3V0OiJoYm94IixpdGVtczp0aGlzLml0ZW1zLGNsczoieC1mb3JtLWNvbXBvc2l0ZSIsZGVmYXVsdE1hcmdpbnM6IjAgMyAwIDAiLG93bmVyQ3Q6dGhpc30pO3RoaXMuaW5uZXJDdC5vd25lckN0PXVuZGVmaW5lZDt2YXIgYT10aGlzLmlubmVyQ3QuZmluZEJ5KGZ1bmN0aW9uKGgpe3JldHVybiBoLmlzRm9ybUZpZWxkfSx0aGlzKTt0aGlzLml0ZW1zPW5ldyBFeHQudXRpbC5NaXhlZENvbGxlY3Rpb24oKTt0aGlzLml0ZW1zLmFkZEFsbChhKX0sb25SZW5kZXI6ZnVuY3Rpb24oYyxhKXtpZighdGhpcy5lbCl7dmFyIGQ9dGhpcy5pbm5lckN0O2QucmVuZGVyKGMpO3RoaXMuZWw9ZC5nZXRFbCgpO2lmKHRoaXMuY29tYmluZUVycm9ycyl7dGhpcy5lYWNoSXRlbShmdW5jdGlvbihlKXtFeHQuYXBwbHkoZSx7bWFya0ludmFsaWQ6dGhpcy5vbkZpZWxkTWFya0ludmFsaWQuY3JlYXRlRGVsZWdhdGUodGhpcyxbZV0sMCksY2xlYXJJbnZhbGlkOnRoaXMub25GaWVsZENsZWFySW52YWxpZC5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFtlXSwwKX0pfSl9dmFyIGI9dGhpcy5lbC5wYXJlbnQoKS5wYXJlbnQoKS5jaGlsZCgibGFiZWwiLHRydWUpO2lmKGIpe2Iuc2V0QXR0cmlidXRlKCJmb3IiLHRoaXMuaXRlbXMuaXRlbXNbMF0uaWQpfX1FeHQuZm9ybS5Db21wb3NpdGVGaWVsZC5zdXBlcmNsYXNzLm9uUmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sb25GaWVsZE1hcmtJbnZhbGlkOmZ1bmN0aW9uKGQsYyl7dmFyIGI9ZC5nZXROYW1lKCksYT17ZmllbGQ6YixlcnJvck5hbWU6ZC5maWVsZExhYmVsfHxiLGVycm9yOmN9O3RoaXMuZmllbGRFcnJvcnMucmVwbGFjZShiLGEpO2lmKCFkLnByZXZlbnRNYXJrKXtkLmVsLmFkZENsYXNzKGQuaW52YWxpZENsYXNzKX19LG9uRmllbGRDbGVhckludmFsaWQ6ZnVuY3Rpb24oYSl7dGhpcy5maWVsZEVycm9ycy5yZW1vdmVLZXkoYS5nZXROYW1lKCkpO2EuZWwucmVtb3ZlQ2xhc3MoYS5pbnZhbGlkQ2xhc3MpfSx1cGRhdGVJbnZhbGlkTWFyazpmdW5jdGlvbigpe3ZhciBhPUV4dC5pc0lFNiYmRXh0LmlzU3RyaWN0O2lmKHRoaXMuZmllbGRFcnJvcnMubGVuZ3RoPT0wKXt0aGlzLmNsZWFySW52YWxpZCgpO2lmKGEpe3RoaXMuY2xlYXJJbnZhbGlkLmRlZmVyKDUwLHRoaXMpfX1lbHNle3ZhciBiPXRoaXMuYnVpbGRDb21iaW5lZEVycm9yTWVzc2FnZSh0aGlzLmZpZWxkRXJyb3JzLml0ZW1zKTt0aGlzLnNvcnRFcnJvcnMoKTt0aGlzLm1hcmtJbnZhbGlkKGIpO2lmKGEpe3RoaXMubWFya0ludmFsaWQoYil9fX0sdmFsaWRhdGVWYWx1ZTpmdW5jdGlvbihjLGEpe3ZhciBiPXRydWU7dGhpcy5lYWNoSXRlbShmdW5jdGlvbihkKXtpZighZC5pc1ZhbGlkKGEpKXtiPWZhbHNlfX0pO3JldHVybiBifSxidWlsZENvbWJpbmVkRXJyb3JNZXNzYWdlOmZ1bmN0aW9uKGUpe3ZhciBkPVtdLGI7Zm9yKHZhciBjPTAsYT1lLmxlbmd0aDtjPGE7YysrKXtiPWVbY107ZC5wdXNoKFN0cmluZy5mb3JtYXQoInswfTogezF9IixiLmVycm9yTmFtZSxiLmVycm9yKSl9cmV0dXJuIGQuam9pbigiPGJyIC8+Iil9LHNvcnRFcnJvcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLml0ZW1zO3RoaXMuZmllbGRFcnJvcnMuc29ydCgiQVNDIixmdW5jdGlvbihnLGQpe3ZhciBjPWZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihpKXtyZXR1cm4gaS5nZXROYW1lKCk9PWJ9fTt2YXIgaD1hLmZpbmRJbmRleEJ5KGMoZy5maWVsZCkpLGU9YS5maW5kSW5kZXhCeShjKGQuZmllbGQpKTtyZXR1cm4gaDxlPy0xOjF9KX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGEpe2EucmVzZXQoKX0pOyhmdW5jdGlvbigpe3RoaXMuY2xlYXJJbnZhbGlkKCl9KS5kZWZlcig1MCx0aGlzKX0sY2xlYXJJbnZhbGlkQ2hpbGRyZW46ZnVuY3Rpb24oKXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGEpe2EuY2xlYXJJbnZhbGlkKCl9KX0sYnVpbGRMYWJlbDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmNsZWFuKGEpLmpvaW4odGhpcy5sYWJlbENvbm5lY3Rvcil9LGlzRGlydHk6ZnVuY3Rpb24oKXtpZih0aGlzLmRpc2FibGVkfHwhdGhpcy5yZW5kZXJlZCl7cmV0dXJuIGZhbHNlfXZhciBhPWZhbHNlO3RoaXMuZWFjaEl0ZW0oZnVuY3Rpb24oYil7aWYoYi5pc0RpcnR5KCkpe2E9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIGF9LGVhY2hJdGVtOmZ1bmN0aW9uKGIsYSl7aWYodGhpcy5pdGVtcyYmdGhpcy5pdGVtcy5lYWNoKXt0aGlzLml0ZW1zLmVhY2goYixhfHx0aGlzKX19LG9uUmVzaXplOmZ1bmN0aW9uKGUsYyxhLGQpe3ZhciBiPXRoaXMuaW5uZXJDdDtpZih0aGlzLnJlbmRlcmVkJiZiLnJlbmRlcmVkKXtiLnNldFNpemUoZSxjKX1FeHQuZm9ybS5Db21wb3NpdGVGaWVsZC5zdXBlcmNsYXNzLm9uUmVzaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZG9MYXlvdXQ6ZnVuY3Rpb24oYyxiKXtpZih0aGlzLnJlbmRlcmVkKXt2YXIgYT10aGlzLmlubmVyQ3Q7YS5mb3JjZUxheW91dD10aGlzLm93bmVyQ3QuZm9yY2VMYXlvdXQ7YS5kb0xheW91dChjLGIpfX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMuaW5uZXJDdCk7RXh0LmZvcm0uQ29tcG9zaXRlRmllbGQuc3VwZXJjbGFzcy5iZWZvcmVEZXN0cm95LmNhbGwodGhpcyl9LHNldFJlYWRPbmx5OmZ1bmN0aW9uKGEpe2lmKGE9PXVuZGVmaW5lZCl7YT10cnVlfWE9ISFhO2lmKHRoaXMucmVuZGVyZWQpe3RoaXMuZWFjaEl0ZW0oZnVuY3Rpb24oYil7Yi5zZXRSZWFkT25seShhKX0pfXRoaXMucmVhZE9ubHk9YX0sb25TaG93OmZ1bmN0aW9uKCl7RXh0LmZvcm0uQ29tcG9zaXRlRmllbGQuc3VwZXJjbGFzcy5vblNob3cuY2FsbCh0aGlzKTt0aGlzLmRvTGF5b3V0KCl9LG9uRGlzYWJsZTpmdW5jdGlvbigpe3RoaXMuZWFjaEl0ZW0oZnVuY3Rpb24oYSl7YS5kaXNhYmxlKCl9KX0sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGEpe2EuZW5hYmxlKCl9KX19KTtFeHQucmVnKCJjb21wb3NpdGVmaWVsZCIsRXh0LmZvcm0uQ29tcG9zaXRlRmllbGQpO0V4dC5mb3JtLlJhZGlvPUV4dC5leHRlbmQoRXh0LmZvcm0uQ2hlY2tib3gse2lucHV0VHlwZToicmFkaW8iLG1hcmtJbnZhbGlkOkV4dC5lbXB0eUZuLGNsZWFySW52YWxpZDpFeHQuZW1wdHlGbixnZXRHcm91cFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbC51cCgiZm9ybSIpfHxFeHQuZ2V0Qm9keSgpO3ZhciBiPWEuY2hpbGQoJ2lucHV0W25hbWU9IicrdGhpcy5lbC5kb20ubmFtZSsnIl06Y2hlY2tlZCcsdHJ1ZSk7cmV0dXJuIGI/Yi52YWx1ZTpudWxsfSxzZXRWYWx1ZTpmdW5jdGlvbihiKXt2YXIgYSxkLGM7aWYodHlwZW9mIGI9PSJib29sZWFuIil7RXh0LmZvcm0uUmFkaW8uc3VwZXJjbGFzcy5zZXRWYWx1ZS5jYWxsKHRoaXMsYil9ZWxzZXtpZih0aGlzLnJlbmRlcmVkKXthPXRoaXMuZ2V0Q2hlY2tFbCgpO2M9YS5jaGlsZCgnaW5wdXRbbmFtZT0iJyt0aGlzLmVsLmRvbS5uYW1lKyciXVt2YWx1ZT0iJytiKyciXScsdHJ1ZSk7aWYoYyl7RXh0LmdldENtcChjLmlkKS5zZXRWYWx1ZSh0cnVlKX19fWlmKHRoaXMucmVuZGVyZWQmJnRoaXMuY2hlY2tlZCl7YT1hfHx0aGlzLmdldENoZWNrRWwoKTtkPXRoaXMuZ2V0Q2hlY2tFbCgpLnNlbGVjdCgnaW5wdXRbbmFtZT0iJyt0aGlzLmVsLmRvbS5uYW1lKyciXScpO2QuZWFjaChmdW5jdGlvbihlKXtpZihlLmRvbS5pZCE9dGhpcy5pZCl7RXh0LmdldENtcChlLmRvbS5pZCkuc2V0VmFsdWUoZmFsc2UpfX0sdGhpcyl9cmV0dXJuIHRoaXN9LGdldENoZWNrRWw6ZnVuY3Rpb24oKXtpZih0aGlzLmluR3JvdXApe3JldHVybiB0aGlzLmVsLnVwKCIueC1mb3JtLXJhZGlvLWdyb3VwIil9cmV0dXJuIHRoaXMuZWwudXAoImZvcm0iKXx8RXh0LmdldEJvZHkoKX19KTtFeHQucmVnKCJyYWRpbyIsRXh0LmZvcm0uUmFkaW8pO0V4dC5mb3JtLlJhZGlvR3JvdXA9RXh0LmV4dGVuZChFeHQuZm9ybS5DaGVja2JveEdyb3VwLHthbGxvd0JsYW5rOnRydWUsYmxhbmtUZXh0OiJZb3UgbXVzdCBzZWxlY3Qgb25lIGl0ZW0gaW4gdGhpcyBncm91cCIsZGVmYXVsdFR5cGU6InJhZGlvIixncm91cENsczoieC1mb3JtLXJhZGlvLWdyb3VwIixnZXRWYWx1ZTpmdW5jdGlvbigpe3ZhciBhPW51bGw7dGhpcy5lYWNoSXRlbShmdW5jdGlvbihiKXtpZihiLmNoZWNrZWQpe2E9YjtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIGF9LG9uU2V0VmFsdWU6ZnVuY3Rpb24oYyxiKXtpZihhcmd1bWVudHMubGVuZ3RoPjEpe3ZhciBhPXRoaXMuZ2V0Qm94KGMpO2lmKGEpe2Euc2V0VmFsdWUoYik7aWYoYS5jaGVja2VkKXt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGQpe2lmKGQhPT1hKXtkLnNldFZhbHVlKGZhbHNlKX19KX19fWVsc2V7dGhpcy5zZXRWYWx1ZUZvckl0ZW0oYyl9fSxzZXRWYWx1ZUZvckl0ZW06ZnVuY3Rpb24oYSl7YT1TdHJpbmcoYSkuc3BsaXQoIiwiKVswXTt0aGlzLmVhY2hJdGVtKGZ1bmN0aW9uKGIpe2Iuc2V0VmFsdWUoYT09Yi5pbnB1dFZhbHVlKX0pfSxmaXJlQ2hlY2tlZDpmdW5jdGlvbigpe2lmKCF0aGlzLmNoZWNrVGFzayl7dGhpcy5jaGVja1Rhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKHRoaXMuYnVmZmVyQ2hlY2tlZCx0aGlzKX10aGlzLmNoZWNrVGFzay5kZWxheSgxMCl9LGJ1ZmZlckNoZWNrZWQ6ZnVuY3Rpb24oKXt2YXIgYT1udWxsO3RoaXMuZWFjaEl0ZW0oZnVuY3Rpb24oYil7aWYoYi5jaGVja2VkKXthPWI7cmV0dXJuIGZhbHNlfX0pO3RoaXMuZmlyZUV2ZW50KCJjaGFuZ2UiLHRoaXMsYSl9LG9uRGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuY2hlY2tUYXNrKXt0aGlzLmNoZWNrVGFzay5jYW5jZWwoKTt0aGlzLmNoZWNrVGFzaz1udWxsfUV4dC5mb3JtLlJhZGlvR3JvdXAuc3VwZXJjbGFzcy5vbkRlc3Ryb3kuY2FsbCh0aGlzKX19KTtFeHQucmVnKCJyYWRpb2dyb3VwIixFeHQuZm9ybS5SYWRpb0dyb3VwKTtFeHQuZm9ybS5IaWRkZW49RXh0LmV4dGVuZChFeHQuZm9ybS5GaWVsZCx7aW5wdXRUeXBlOiJoaWRkZW4iLHNob3VsZExheW91dDpmYWxzZSxvblJlbmRlcjpmdW5jdGlvbigpe0V4dC5mb3JtLkhpZGRlbi5zdXBlcmNsYXNzLm9uUmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0saW5pdEV2ZW50czpmdW5jdGlvbigpe3RoaXMub3JpZ2luYWxWYWx1ZT10aGlzLmdldFZhbHVlKCl9LHNldFNpemU6RXh0LmVtcHR5Rm4sc2V0V2lkdGg6RXh0LmVtcHR5Rm4sc2V0SGVpZ2h0OkV4dC5lbXB0eUZuLHNldFBvc2l0aW9uOkV4dC5lbXB0eUZuLHNldFBhZ2VQb3NpdGlvbjpFeHQuZW1wdHlGbixtYXJrSW52YWxpZDpFeHQuZW1wdHlGbixjbGVhckludmFsaWQ6RXh0LmVtcHR5Rm59KTtFeHQucmVnKCJoaWRkZW4iLEV4dC5mb3JtLkhpZGRlbik7RXh0LmZvcm0uQmFzaWNGb3JtPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXtFeHQuYXBwbHkodGhpcyxhKTtpZihFeHQuaXNTdHJpbmcodGhpcy5wYXJhbU9yZGVyKSl7dGhpcy5wYXJhbU9yZGVyPXRoaXMucGFyYW1PcmRlci5zcGxpdCgvW1xzLHxdLyl9dGhpcy5pdGVtcz1uZXcgRXh0LnV0aWwuTWl4ZWRDb2xsZWN0aW9uKGZhbHNlLGZ1bmN0aW9uKGMpe3JldHVybiBjLmdldEl0ZW1JZCgpfSk7dGhpcy5hZGRFdmVudHMoImJlZm9yZWFjdGlvbiIsImFjdGlvbmZhaWxlZCIsImFjdGlvbmNvbXBsZXRlIik7aWYoYil7dGhpcy5pbml0RWwoYil9RXh0LmZvcm0uQmFzaWNGb3JtLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0sdGltZW91dDozMCxwYXJhbU9yZGVyOnVuZGVmaW5lZCxwYXJhbXNBc0hhc2g6ZmFsc2Usd2FpdFRpdGxlOiJQbGVhc2UgV2FpdC4uLiIsYWN0aXZlQWN0aW9uOm51bGwsdHJhY2tSZXNldE9uTG9hZDpmYWxzZSxpbml0RWw6ZnVuY3Rpb24oYSl7dGhpcy5lbD1FeHQuZ2V0KGEpO3RoaXMuaWQ9dGhpcy5lbC5pZHx8RXh0LmlkKCk7aWYoIXRoaXMuc3RhbmRhcmRTdWJtaXQpe3RoaXMuZWwub24oInN1Ym1pdCIsdGhpcy5vblN1Ym1pdCx0aGlzKX10aGlzLmVsLmFkZENsYXNzKCJ4LWZvcm0iKX0sZ2V0RWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbH0sb25TdWJtaXQ6ZnVuY3Rpb24oYSl7YS5zdG9wRXZlbnQoKX0sZGVzdHJveTpmdW5jdGlvbihhKXtpZihhIT09dHJ1ZSl7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKGIpe0V4dC5kZXN0cm95KGIpfSk7RXh0LmRlc3Ryb3kodGhpcy5lbCl9dGhpcy5pdGVtcy5jbGVhcigpO3RoaXMucHVyZ2VMaXN0ZW5lcnMoKX0saXNWYWxpZDpmdW5jdGlvbigpe3ZhciBhPXRydWU7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKGIpe2lmKCFiLnZhbGlkYXRlKCkpe2E9ZmFsc2V9fSk7cmV0dXJuIGF9LGlzRGlydHk6ZnVuY3Rpb24oKXt2YXIgYT1mYWxzZTt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oYil7aWYoYi5pc0RpcnR5KCkpe2E9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7cmV0dXJuIGF9LGRvQWN0aW9uOmZ1bmN0aW9uKGIsYSl7aWYoRXh0LmlzU3RyaW5nKGIpKXtiPW5ldyBFeHQuZm9ybS5BY3Rpb24uQUNUSU9OX1RZUEVTW2JdKHRoaXMsYSl9aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZWFjdGlvbiIsdGhpcyxiKSE9PWZhbHNlKXt0aGlzLmJlZm9yZUFjdGlvbihiKTtiLnJ1bi5kZWZlcigxMDAsYil9cmV0dXJuIHRoaXN9LHN1Ym1pdDpmdW5jdGlvbihiKXtiPWJ8fHt9O2lmKHRoaXMuc3RhbmRhcmRTdWJtaXQpe3ZhciBhPWIuY2xpZW50VmFsaWRhdGlvbj09PWZhbHNlfHx0aGlzLmlzVmFsaWQoKTtpZihhKXt2YXIgYz10aGlzLmVsLmRvbTtpZih0aGlzLnVybCYmRXh0LmlzRW1wdHkoYy5hY3Rpb24pKXtjLmFjdGlvbj10aGlzLnVybH1jLnN1Ym1pdCgpfXJldHVybiBhfXZhciBkPVN0cmluZy5mb3JtYXQoInswfXN1Ym1pdCIsdGhpcy5hcGk/ImRpcmVjdCI6IiIpO3RoaXMuZG9BY3Rpb24oZCxiKTtyZXR1cm4gdGhpc30sbG9hZDpmdW5jdGlvbihhKXt2YXIgYj1TdHJpbmcuZm9ybWF0KCJ7MH1sb2FkIix0aGlzLmFwaT8iZGlyZWN0IjoiIik7dGhpcy5kb0FjdGlvbihiLGEpO3JldHVybiB0aGlzfSx1cGRhdGVSZWNvcmQ6ZnVuY3Rpb24oYil7Yi5iZWdpbkVkaXQoKTt2YXIgYT1iLmZpZWxkcyxkLGM7YS5lYWNoKGZ1bmN0aW9uKGUpe2Q9dGhpcy5maW5kRmllbGQoZS5uYW1lKTtpZihkKXtjPWQuZ2V0VmFsdWUoKTtpZihFeHQudHlwZShjKSE9PWZhbHNlJiZjLmdldEdyb3VwVmFsdWUpe2M9Yy5nZXRHcm91cFZhbHVlKCl9ZWxzZXtpZihkLmVhY2hJdGVtKXtjPVtdO2QuZWFjaEl0ZW0oZnVuY3Rpb24oZyl7Yy5wdXNoKGcuZ2V0VmFsdWUoKSl9KX19Yi5zZXQoZS5uYW1lLGMpfX0sdGhpcyk7Yi5lbmRFZGl0KCk7cmV0dXJuIHRoaXN9LGxvYWRSZWNvcmQ6ZnVuY3Rpb24oYSl7dGhpcy5zZXRWYWx1ZXMoYS5kYXRhKTtyZXR1cm4gdGhpc30sYmVmb3JlQWN0aW9uOmZ1bmN0aW9uKGEpe3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihjKXtpZihjLmlzRm9ybUZpZWxkJiZjLnN5bmNWYWx1ZSl7Yy5zeW5jVmFsdWUoKX19KTt2YXIgYj1hLm9wdGlvbnM7aWYoYi53YWl0TXNnKXtpZih0aGlzLndhaXRNc2dUYXJnZXQ9PT10cnVlKXt0aGlzLmVsLm1hc2soYi53YWl0TXNnLCJ4LW1hc2stbG9hZGluZyIpfWVsc2V7aWYodGhpcy53YWl0TXNnVGFyZ2V0KXt0aGlzLndhaXRNc2dUYXJnZXQ9RXh0LmdldCh0aGlzLndhaXRNc2dUYXJnZXQpO3RoaXMud2FpdE1zZ1RhcmdldC5tYXNrKGIud2FpdE1zZywieC1tYXNrLWxvYWRpbmciKX1lbHNle0V4dC5NZXNzYWdlQm94LndhaXQoYi53YWl0TXNnLGIud2FpdFRpdGxlfHx0aGlzLndhaXRUaXRsZSl9fX19LGFmdGVyQWN0aW9uOmZ1bmN0aW9uKGEsYyl7dGhpcy5hY3RpdmVBY3Rpb249bnVsbDt2YXIgYj1hLm9wdGlvbnM7aWYoYi53YWl0TXNnKXtpZih0aGlzLndhaXRNc2dUYXJnZXQ9PT10cnVlKXt0aGlzLmVsLnVubWFzaygpfWVsc2V7aWYodGhpcy53YWl0TXNnVGFyZ2V0KXt0aGlzLndhaXRNc2dUYXJnZXQudW5tYXNrKCl9ZWxzZXtFeHQuTWVzc2FnZUJveC51cGRhdGVQcm9ncmVzcygxKTtFeHQuTWVzc2FnZUJveC5oaWRlKCl9fX1pZihjKXtpZihiLnJlc2V0KXt0aGlzLnJlc2V0KCl9RXh0LmNhbGxiYWNrKGIuc3VjY2VzcyxiLnNjb3BlLFt0aGlzLGFdKTt0aGlzLmZpcmVFdmVudCgiYWN0aW9uY29tcGxldGUiLHRoaXMsYSl9ZWxzZXtFeHQuY2FsbGJhY2soYi5mYWlsdXJlLGIuc2NvcGUsW3RoaXMsYV0pO3RoaXMuZmlyZUV2ZW50KCJhY3Rpb25mYWlsZWQiLHRoaXMsYSl9fSxmaW5kRmllbGQ6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy5pdGVtcy5nZXQoYyk7aWYoIUV4dC5pc09iamVjdChiKSl7dmFyIGE9ZnVuY3Rpb24oZCl7aWYoZC5pc0Zvcm1GaWVsZCl7aWYoZC5kYXRhSW5kZXg9PWN8fGQuaWQ9PWN8fGQuZ2V0TmFtZSgpPT1jKXtiPWQ7cmV0dXJuIGZhbHNlfWVsc2V7aWYoZC5pc0NvbXBvc2l0ZSl7cmV0dXJuIGQuaXRlbXMuZWFjaChhKX1lbHNle2lmKGQgaW5zdGFuY2VvZiBFeHQuZm9ybS5DaGVja2JveEdyb3VwJiZkLnJlbmRlcmVkKXtyZXR1cm4gZC5lYWNoSXRlbShhKX19fX19O3RoaXMuaXRlbXMuZWFjaChhKX1yZXR1cm4gYnx8bnVsbH0sbWFya0ludmFsaWQ6ZnVuY3Rpb24oaCl7aWYoRXh0LmlzQXJyYXkoaCkpe2Zvcih2YXIgYz0wLGE9aC5sZW5ndGg7YzxhO2MrKyl7dmFyIGI9aFtjXTt2YXIgZD10aGlzLmZpbmRGaWVsZChiLmlkKTtpZihkKXtkLm1hcmtJbnZhbGlkKGIubXNnKX19fWVsc2V7dmFyIGUsZztmb3IoZyBpbiBoKXtpZighRXh0LmlzRnVuY3Rpb24oaFtnXSkmJihlPXRoaXMuZmluZEZpZWxkKGcpKSl7ZS5tYXJrSW52YWxpZChoW2ddKX19fXJldHVybiB0aGlzfSxzZXRWYWx1ZXM6ZnVuY3Rpb24oYyl7aWYoRXh0LmlzQXJyYXkoYykpe2Zvcih2YXIgZD0wLGE9Yy5sZW5ndGg7ZDxhO2QrKyl7dmFyIGI9Y1tkXTt2YXIgZT10aGlzLmZpbmRGaWVsZChiLmlkKTtpZihlKXtlLnNldFZhbHVlKGIudmFsdWUpO2lmKHRoaXMudHJhY2tSZXNldE9uTG9hZCl7ZS5vcmlnaW5hbFZhbHVlPWUuZ2V0VmFsdWUoKX19fX1lbHNle3ZhciBnLGg7Zm9yKGggaW4gYyl7aWYoIUV4dC5pc0Z1bmN0aW9uKGNbaF0pJiYoZz10aGlzLmZpbmRGaWVsZChoKSkpe2cuc2V0VmFsdWUoY1toXSk7aWYodGhpcy50cmFja1Jlc2V0T25Mb2FkKXtnLm9yaWdpbmFsVmFsdWU9Zy5nZXRWYWx1ZSgpfX19fXJldHVybiB0aGlzfSxnZXRWYWx1ZXM6ZnVuY3Rpb24oYil7dmFyIGE9RXh0LmxpYi5BamF4LnNlcmlhbGl6ZUZvcm0odGhpcy5lbC5kb20pO2lmKGI9PT10cnVlKXtyZXR1cm4gYX1yZXR1cm4gRXh0LnVybERlY29kZShhKX0sZ2V0RmllbGRWYWx1ZXM6ZnVuY3Rpb24oYSl7dmFyIGQ9e30sZSxiLGM7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKGcpe2lmKCFnLmRpc2FibGVkJiYoYSE9PXRydWV8fGcuaXNEaXJ0eSgpKSl7ZT1nLmdldE5hbWUoKTtiPWRbZV07Yz1nLmdldFZhbHVlKCk7aWYoRXh0LmlzRGVmaW5lZChiKSl7aWYoRXh0LmlzQXJyYXkoYikpe2RbZV0ucHVzaChjKX1lbHNle2RbZV09W2IsY119fWVsc2V7ZFtlXT1jfX19KTtyZXR1cm4gZH0sY2xlYXJJbnZhbGlkOmZ1bmN0aW9uKCl7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKGEpe2EuY2xlYXJJbnZhbGlkKCl9KTtyZXR1cm4gdGhpc30scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oYSl7YS5yZXNldCgpfSk7cmV0dXJuIHRoaXN9LGFkZDpmdW5jdGlvbigpe3RoaXMuaXRlbXMuYWRkQWxsKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywwKSk7cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbihhKXt0aGlzLml0ZW1zLnJlbW92ZShhKTtyZXR1cm4gdGhpc30sY2xlYW5EZXN0cm95ZWQ6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmZpbHRlckJ5KGZ1bmN0aW9uKGEpe3JldHVybiAhIWEuaXNEZXN0cm95ZWR9KS5lYWNoKHRoaXMucmVtb3ZlLHRoaXMpfSxyZW5kZXI6ZnVuY3Rpb24oKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oYSl7aWYoYS5pc0Zvcm1GaWVsZCYmIWEucmVuZGVyZWQmJmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEuaWQpKXthLmFwcGx5VG9NYXJrdXAoYS5pZCl9fSk7cmV0dXJuIHRoaXN9LGFwcGx5VG9GaWVsZHM6ZnVuY3Rpb24oYSl7dGhpcy5pdGVtcy5lYWNoKGZ1bmN0aW9uKGIpe0V4dC5hcHBseShiLGEpfSk7cmV0dXJuIHRoaXN9LGFwcGx5SWZUb0ZpZWxkczpmdW5jdGlvbihhKXt0aGlzLml0ZW1zLmVhY2goZnVuY3Rpb24oYil7RXh0LmFwcGx5SWYoYixhKX0pO3JldHVybiB0aGlzfSxjYWxsRmllbGRNZXRob2Q6ZnVuY3Rpb24oYixhKXthPWF8fFtdO3RoaXMuaXRlbXMuZWFjaChmdW5jdGlvbihjKXtpZihFeHQuaXNGdW5jdGlvbihjW2JdKSl7Y1tiXS5hcHBseShjLGEpfX0pO3JldHVybiB0aGlzfX0pO0V4dC5CYXNpY0Zvcm09RXh0LmZvcm0uQmFzaWNGb3JtO0V4dC5Gb3JtUGFuZWw9RXh0LmV4dGVuZChFeHQuUGFuZWwse21pbkJ1dHRvbldpZHRoOjc1LGxhYmVsQWxpZ246ImxlZnQiLG1vbml0b3JWYWxpZDpmYWxzZSxtb25pdG9yUG9sbDoyMDAsbGF5b3V0OiJmb3JtIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5mb3JtPXRoaXMuY3JlYXRlRm9ybSgpO0V4dC5Gb3JtUGFuZWwuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyk7dGhpcy5ib2R5Q2ZnPXt0YWc6ImZvcm0iLGNsczp0aGlzLmJhc2VDbHMrIi1ib2R5IixtZXRob2Q6dGhpcy5tZXRob2R8fCJQT1NUIixpZDp0aGlzLmZvcm1JZHx8RXh0LmlkKCl9O2lmKHRoaXMuZmlsZVVwbG9hZCl7dGhpcy5ib2R5Q2ZnLmVuY3R5cGU9Im11bHRpcGFydC9mb3JtLWRhdGEifXRoaXMuaW5pdEl0ZW1zKCk7dGhpcy5hZGRFdmVudHMoImNsaWVudHZhbGlkYXRpb24iKTt0aGlzLnJlbGF5RXZlbnRzKHRoaXMuZm9ybSxbImJlZm9yZWFjdGlvbiIsImFjdGlvbmZhaWxlZCIsImFjdGlvbmNvbXBsZXRlIl0pfSxjcmVhdGVGb3JtOmZ1bmN0aW9uKCl7dmFyIGE9RXh0LmFwcGx5SWYoe2xpc3RlbmVyczp7fX0sdGhpcy5pbml0aWFsQ29uZmlnKTtyZXR1cm4gbmV3IEV4dC5mb3JtLkJhc2ljRm9ybShudWxsLGEpfSxpbml0RmllbGRzOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5mb3JtO3ZhciBhPXRoaXM7dmFyIGI9ZnVuY3Rpb24oZCl7aWYoYS5pc0ZpZWxkKGQpKXtjLmFkZChkKX1lbHNle2lmKGQuZmluZEJ5JiZkIT1hKXthLmFwcGx5U2V0dGluZ3MoZCk7aWYoZC5pdGVtcyYmZC5pdGVtcy5lYWNoKXtkLml0ZW1zLmVhY2goYix0aGlzKX19fX07dGhpcy5pdGVtcy5lYWNoKGIsdGhpcyl9LGFwcGx5U2V0dGluZ3M6ZnVuY3Rpb24oYil7dmFyIGE9Yi5vd25lckN0O0V4dC5hcHBseUlmKGIse2xhYmVsQWxpZ246YS5sYWJlbEFsaWduLGxhYmVsV2lkdGg6YS5sYWJlbFdpZHRoLGl0ZW1DbHM6YS5pdGVtQ2xzfSl9LGdldExheW91dFRhcmdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmZvcm0uZWx9LGdldEZvcm06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mb3JtfSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe3RoaXMuaW5pdEZpZWxkcygpO0V4dC5Gb3JtUGFuZWwuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTt0aGlzLmZvcm0uaW5pdEVsKHRoaXMuYm9keSl9LGJlZm9yZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnN0b3BNb25pdG9yaW5nKCk7dGhpcy5mb3JtLmRlc3Ryb3kodHJ1ZSk7RXh0LkZvcm1QYW5lbC5zdXBlcmNsYXNzLmJlZm9yZURlc3Ryb3kuY2FsbCh0aGlzKX0saXNGaWVsZDpmdW5jdGlvbihhKXtyZXR1cm4gISFhLnNldFZhbHVlJiYhIWEuZ2V0VmFsdWUmJiEhYS5tYXJrSW52YWxpZCYmISFhLmNsZWFySW52YWxpZH0saW5pdEV2ZW50czpmdW5jdGlvbigpe0V4dC5Gb3JtUGFuZWwuc3VwZXJjbGFzcy5pbml0RXZlbnRzLmNhbGwodGhpcyk7dGhpcy5vbih7c2NvcGU6dGhpcyxhZGQ6dGhpcy5vbkFkZEV2ZW50LHJlbW92ZTp0aGlzLm9uUmVtb3ZlRXZlbnR9KTtpZih0aGlzLm1vbml0b3JWYWxpZCl7dGhpcy5zdGFydE1vbml0b3JpbmcoKX19LG9uQWRkOmZ1bmN0aW9uKGEpe0V4dC5Gb3JtUGFuZWwuc3VwZXJjbGFzcy5vbkFkZC5jYWxsKHRoaXMsYSk7dGhpcy5wcm9jZXNzQWRkKGEpfSxvbkFkZEV2ZW50OmZ1bmN0aW9uKGEsYil7aWYoYSE9PXRoaXMpe3RoaXMucHJvY2Vzc0FkZChiKX19LHByb2Nlc3NBZGQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc0ZpZWxkKGEpKXt0aGlzLmZvcm0uYWRkKGEpfWVsc2V7aWYoYS5maW5kQnkpe3RoaXMuYXBwbHlTZXR0aW5ncyhhKTt0aGlzLmZvcm0uYWRkLmFwcGx5KHRoaXMuZm9ybSxhLmZpbmRCeSh0aGlzLmlzRmllbGQpKX19fSxvblJlbW92ZTpmdW5jdGlvbihhKXtFeHQuRm9ybVBhbmVsLnN1cGVyY2xhc3Mub25SZW1vdmUuY2FsbCh0aGlzLGEpO3RoaXMucHJvY2Vzc1JlbW92ZShhKX0sb25SZW1vdmVFdmVudDpmdW5jdGlvbihhLGIpe2lmKGEhPT10aGlzKXt0aGlzLnByb2Nlc3NSZW1vdmUoYil9fSxwcm9jZXNzUmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLmRlc3Ryb3lpbmcpe2lmKHRoaXMuaXNGaWVsZChhKSl7dGhpcy5mb3JtLnJlbW92ZShhKX1lbHNle2lmKGEuZmluZEJ5KXtFeHQuZWFjaChhLmZpbmRCeSh0aGlzLmlzRmllbGQpLHRoaXMuZm9ybS5yZW1vdmUsdGhpcy5mb3JtKTt0aGlzLmZvcm0uY2xlYW5EZXN0cm95ZWQoKX19fX0sc3RhcnRNb25pdG9yaW5nOmZ1bmN0aW9uKCl7aWYoIXRoaXMudmFsaWRUYXNrKXt0aGlzLnZhbGlkVGFzaz1uZXcgRXh0LnV0aWwuVGFza1J1bm5lcigpO3RoaXMudmFsaWRUYXNrLnN0YXJ0KHtydW46dGhpcy5iaW5kSGFuZGxlcixpbnRlcnZhbDp0aGlzLm1vbml0b3JQb2xsfHwyMDAsc2NvcGU6dGhpc30pfX0sc3RvcE1vbml0b3Jpbmc6ZnVuY3Rpb24oKXtpZih0aGlzLnZhbGlkVGFzayl7dGhpcy52YWxpZFRhc2suc3RvcEFsbCgpO3RoaXMudmFsaWRUYXNrPW51bGx9fSxsb2FkOmZ1bmN0aW9uKCl7dGhpcy5mb3JtLmxvYWQuYXBwbHkodGhpcy5mb3JtLGFyZ3VtZW50cyl9LG9uRGlzYWJsZTpmdW5jdGlvbigpe0V4dC5Gb3JtUGFuZWwuc3VwZXJjbGFzcy5vbkRpc2FibGUuY2FsbCh0aGlzKTtpZih0aGlzLmZvcm0pe3RoaXMuZm9ybS5pdGVtcy5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlKCl9KX19LG9uRW5hYmxlOmZ1bmN0aW9uKCl7RXh0LkZvcm1QYW5lbC5zdXBlcmNsYXNzLm9uRW5hYmxlLmNhbGwodGhpcyk7aWYodGhpcy5mb3JtKXt0aGlzLmZvcm0uaXRlbXMuZWFjaChmdW5jdGlvbigpe3RoaXMuZW5hYmxlKCl9KX19LGJpbmRIYW5kbGVyOmZ1bmN0aW9uKCl7dmFyIGU9dHJ1ZTt0aGlzLmZvcm0uaXRlbXMuZWFjaChmdW5jdGlvbihnKXtpZighZy5pc1ZhbGlkKHRydWUpKXtlPWZhbHNlO3JldHVybiBmYWxzZX19KTtpZih0aGlzLmZiYXIpe3ZhciBiPXRoaXMuZmJhci5pdGVtcy5pdGVtcztmb3IodmFyIGQ9MCxhPWIubGVuZ3RoO2Q8YTtkKyspe3ZhciBjPWJbZF07aWYoYy5mb3JtQmluZD09PXRydWUmJmMuZGlzYWJsZWQ9PT1lKXtjLnNldERpc2FibGVkKCFlKX19fXRoaXMuZmlyZUV2ZW50KCJjbGllbnR2YWxpZGF0aW9uIix0aGlzLGUpfX0pO0V4dC5yZWcoImZvcm0iLEV4dC5Gb3JtUGFuZWwpO0V4dC5mb3JtLkZvcm1QYW5lbD1FeHQuRm9ybVBhbmVsO0V4dC5mb3JtLkZpZWxkU2V0PUV4dC5leHRlbmQoRXh0LlBhbmVsLHtiYXNlQ2xzOiJ4LWZpZWxkc2V0IixsYXlvdXQ6ImZvcm0iLGFuaW1Db2xsYXBzZTpmYWxzZSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe2lmKCF0aGlzLmVsKXt0aGlzLmVsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dGhpcy5lbC5pZD10aGlzLmlkO2lmKHRoaXMudGl0bGV8fHRoaXMuaGVhZGVyfHx0aGlzLmNoZWNrYm94VG9nZ2xlKXt0aGlzLmVsLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxlZ2VuZCIpKS5jbGFzc05hbWU9dGhpcy5iYXNlQ2xzKyItaGVhZGVyIn19RXh0LmZvcm0uRmllbGRTZXQuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTtpZih0aGlzLmNoZWNrYm94VG9nZ2xlKXt2YXIgYz10eXBlb2YgdGhpcy5jaGVja2JveFRvZ2dsZT09Im9iamVjdCI/dGhpcy5jaGVja2JveFRvZ2dsZTp7dGFnOiJpbnB1dCIsdHlwZToiY2hlY2tib3giLG5hbWU6dGhpcy5jaGVja2JveE5hbWV8fHRoaXMuaWQrIi1jaGVja2JveCJ9O3RoaXMuY2hlY2tib3g9dGhpcy5oZWFkZXIuaW5zZXJ0Rmlyc3QoYyk7dGhpcy5jaGVja2JveC5kb20uY2hlY2tlZD0hdGhpcy5jb2xsYXBzZWQ7dGhpcy5tb24odGhpcy5jaGVja2JveCwiY2xpY2siLHRoaXMub25DaGVja0NsaWNrLHRoaXMpfX0sb25Db2xsYXBzZTpmdW5jdGlvbihhLGIpe2lmKHRoaXMuY2hlY2tib3gpe3RoaXMuY2hlY2tib3guZG9tLmNoZWNrZWQ9ZmFsc2V9RXh0LmZvcm0uRmllbGRTZXQuc3VwZXJjbGFzcy5vbkNvbGxhcHNlLmNhbGwodGhpcyxhLGIpfSxvbkV4cGFuZDpmdW5jdGlvbihhLGIpe2lmKHRoaXMuY2hlY2tib3gpe3RoaXMuY2hlY2tib3guZG9tLmNoZWNrZWQ9dHJ1ZX1FeHQuZm9ybS5GaWVsZFNldC5zdXBlcmNsYXNzLm9uRXhwYW5kLmNhbGwodGhpcyxhLGIpfSxvbkNoZWNrQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzW3RoaXMuY2hlY2tib3guZG9tLmNoZWNrZWQ/ImV4cGFuZCI6ImNvbGxhcHNlIl0oKX19KTtFeHQucmVnKCJmaWVsZHNldCIsRXh0LmZvcm0uRmllbGRTZXQpO0V4dC5mb3JtLkh0bWxFZGl0b3I9RXh0LmV4dGVuZChFeHQuZm9ybS5GaWVsZCx7ZW5hYmxlRm9ybWF0OnRydWUsZW5hYmxlRm9udFNpemU6dHJ1ZSxlbmFibGVDb2xvcnM6dHJ1ZSxlbmFibGVBbGlnbm1lbnRzOnRydWUsZW5hYmxlTGlzdHM6dHJ1ZSxlbmFibGVTb3VyY2VFZGl0OnRydWUsZW5hYmxlTGlua3M6dHJ1ZSxlbmFibGVGb250OnRydWUsY3JlYXRlTGlua1RleHQ6IlBsZWFzZSBlbnRlciB0aGUgVVJMIGZvciB0aGUgbGluazoiLGRlZmF1bHRMaW5rVmFsdWU6Imh0dHA6Ly8iLGZvbnRGYW1pbGllczpbIkFyaWFsIiwiQ291cmllciBOZXciLCJUYWhvbWEiLCJUaW1lcyBOZXcgUm9tYW4iLCJWZXJkYW5hIl0sZGVmYXVsdEZvbnQ6InRhaG9tYSIsZGVmYXVsdFZhbHVlOihFeHQuaXNPcGVyYXx8RXh0LmlzSUU2KT8iJiMxNjA7IjoiJiM4MjAzOyIsYWN0aW9uTW9kZToid3JhcCIsdmFsaWRhdGlvbkV2ZW50OmZhbHNlLGRlZmVySGVpZ2h0OnRydWUsaW5pdGlhbGl6ZWQ6ZmFsc2UsYWN0aXZhdGVkOmZhbHNlLHNvdXJjZUVkaXRNb2RlOmZhbHNlLG9uRm9jdXM6RXh0LmVtcHR5Rm4saWZyYW1lUGFkOjMsaGlkZU1vZGU6Im9mZnNldHMiLGRlZmF1bHRBdXRvQ3JlYXRlOnt0YWc6InRleHRhcmVhIixzdHlsZToid2lkdGg6NTAwcHg7aGVpZ2h0OjMwMHB4OyIsYXV0b2NvbXBsZXRlOiJvZmYifSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudHMoImluaXRpYWxpemUiLCJhY3RpdmF0ZSIsImJlZm9yZXN5bmMiLCJiZWZvcmVwdXNoIiwic3luYyIsInB1c2giLCJlZGl0bW9kZWNoYW5nZSIpO0V4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmNhbGwodGhpcyl9LGNyZWF0ZUZvbnRPcHRpb25zOmZ1bmN0aW9uKCl7dmFyIGQ9W10sYj10aGlzLmZvbnRGYW1pbGllcyxjLGc7Zm9yKHZhciBlPTAsYT1iLmxlbmd0aDtlPGE7ZSsrKXtjPWJbZV07Zz1jLnRvTG93ZXJDYXNlKCk7ZC5wdXNoKCc8b3B0aW9uIHZhbHVlPSInLGcsJyIgc3R5bGU9ImZvbnQtZmFtaWx5OicsYywnOyInLCh0aGlzLmRlZmF1bHRGb250PT1nPycgc2VsZWN0ZWQ9InRydWUiPic6Ij4iKSxjLCI8L29wdGlvbj4iKX1yZXR1cm4gZC5qb2luKCIiKX0sY3JlYXRlVG9vbGJhcjpmdW5jdGlvbihlKXt2YXIgYz1bXTt2YXIgYT1FeHQuUXVpY2tUaXBzJiZFeHQuUXVpY2tUaXBzLmlzRW5hYmxlZCgpO2Z1bmN0aW9uIGQoaixoLGkpe3JldHVybntpdGVtSWQ6aixjbHM6IngtYnRuLWljb24iLGljb25DbHM6IngtZWRpdC0iK2osZW5hYmxlVG9nZ2xlOmghPT1mYWxzZSxzY29wZTplLGhhbmRsZXI6aXx8ZS5yZWxheUJ0bkNtZCxjbGlja0V2ZW50OiJtb3VzZWRvd24iLHRvb2x0aXA6YT9lLmJ1dHRvblRpcHNbal18fHVuZGVmaW5lZDp1bmRlZmluZWQsb3ZlcmZsb3dUZXh0OmUuYnV0dG9uVGlwc1tqXS50aXRsZXx8dW5kZWZpbmVkLHRhYkluZGV4Oi0xfX1pZih0aGlzLmVuYWJsZUZvbnQmJiFFeHQuaXNTYWZhcmkyKXt2YXIgZz1uZXcgRXh0LlRvb2xiYXIuSXRlbSh7YXV0b0VsOnt0YWc6InNlbGVjdCIsY2xzOiJ4LWZvbnQtc2VsZWN0IixodG1sOnRoaXMuY3JlYXRlRm9udE9wdGlvbnMoKX19KTtjLnB1c2goZywiLSIpfWlmKHRoaXMuZW5hYmxlRm9ybWF0KXtjLnB1c2goZCgiYm9sZCIpLGQoIml0YWxpYyIpLGQoInVuZGVybGluZSIpKX1pZih0aGlzLmVuYWJsZUZvbnRTaXplKXtjLnB1c2goIi0iLGQoImluY3JlYXNlZm9udHNpemUiLGZhbHNlLHRoaXMuYWRqdXN0Rm9udCksZCgiZGVjcmVhc2Vmb250c2l6ZSIsZmFsc2UsdGhpcy5hZGp1c3RGb250KSl9aWYodGhpcy5lbmFibGVDb2xvcnMpe2MucHVzaCgiLSIse2l0ZW1JZDoiZm9yZWNvbG9yIixjbHM6IngtYnRuLWljb24iLGljb25DbHM6IngtZWRpdC1mb3JlY29sb3IiLGNsaWNrRXZlbnQ6Im1vdXNlZG93biIsdG9vbHRpcDphP2UuYnV0dG9uVGlwcy5mb3JlY29sb3J8fHVuZGVmaW5lZDp1bmRlZmluZWQsdGFiSW5kZXg6LTEsbWVudTpuZXcgRXh0Lm1lbnUuQ29sb3JNZW51KHthbGxvd1Jlc2VsZWN0OnRydWUsZm9jdXM6RXh0LmVtcHR5Rm4sdmFsdWU6IjAwMDAwMCIscGxhaW46dHJ1ZSxsaXN0ZW5lcnM6e3Njb3BlOnRoaXMsc2VsZWN0OmZ1bmN0aW9uKGksaCl7dGhpcy5leGVjQ21kKCJmb3JlY29sb3IiLEV4dC5pc1dlYktpdHx8RXh0LmlzSUU/IiMiK2g6aCk7dGhpcy5kZWZlckZvY3VzKCl9fSxjbGlja0V2ZW50OiJtb3VzZWRvd24ifSl9LHtpdGVtSWQ6ImJhY2tjb2xvciIsY2xzOiJ4LWJ0bi1pY29uIixpY29uQ2xzOiJ4LWVkaXQtYmFja2NvbG9yIixjbGlja0V2ZW50OiJtb3VzZWRvd24iLHRvb2x0aXA6YT9lLmJ1dHRvblRpcHMuYmFja2NvbG9yfHx1bmRlZmluZWQ6dW5kZWZpbmVkLHRhYkluZGV4Oi0xLG1lbnU6bmV3IEV4dC5tZW51LkNvbG9yTWVudSh7Zm9jdXM6RXh0LmVtcHR5Rm4sdmFsdWU6IkZGRkZGRiIscGxhaW46dHJ1ZSxhbGxvd1Jlc2VsZWN0OnRydWUsbGlzdGVuZXJzOntzY29wZTp0aGlzLHNlbGVjdDpmdW5jdGlvbihpLGgpe2lmKEV4dC5pc0dlY2tvKXt0aGlzLmV4ZWNDbWQoInVzZUNTUyIsZmFsc2UpO3RoaXMuZXhlY0NtZCgiaGlsaXRlY29sb3IiLGgpO3RoaXMuZXhlY0NtZCgidXNlQ1NTIix0cnVlKTt0aGlzLmRlZmVyRm9jdXMoKX1lbHNle3RoaXMuZXhlY0NtZChFeHQuaXNPcGVyYT8iaGlsaXRlY29sb3IiOiJiYWNrY29sb3IiLEV4dC5pc1dlYktpdHx8RXh0LmlzSUU/IiMiK2g6aCk7dGhpcy5kZWZlckZvY3VzKCl9fX0sY2xpY2tFdmVudDoibW91c2Vkb3duIn0pfSl9aWYodGhpcy5lbmFibGVBbGlnbm1lbnRzKXtjLnB1c2goIi0iLGQoImp1c3RpZnlsZWZ0IiksZCgianVzdGlmeWNlbnRlciIpLGQoImp1c3RpZnlyaWdodCIpKX1pZighRXh0LmlzU2FmYXJpMil7aWYodGhpcy5lbmFibGVMaW5rcyl7Yy5wdXNoKCItIixkKCJjcmVhdGVsaW5rIixmYWxzZSx0aGlzLmNyZWF0ZUxpbmspKX1pZih0aGlzLmVuYWJsZUxpc3RzKXtjLnB1c2goIi0iLGQoImluc2VydG9yZGVyZWRsaXN0IiksZCgiaW5zZXJ0dW5vcmRlcmVkbGlzdCIpKX1pZih0aGlzLmVuYWJsZVNvdXJjZUVkaXQpe2MucHVzaCgiLSIsZCgic291cmNlZWRpdCIsdHJ1ZSxmdW5jdGlvbihoKXt0aGlzLnRvZ2dsZVNvdXJjZUVkaXQoIXRoaXMuc291cmNlRWRpdE1vZGUpfSkpfX12YXIgYj1uZXcgRXh0LlRvb2xiYXIoe3JlbmRlclRvOnRoaXMud3JhcC5kb20uZmlyc3RDaGlsZCxpdGVtczpjfSk7aWYoZyl7dGhpcy5mb250U2VsZWN0PWcuZWw7dGhpcy5tb24odGhpcy5mb250U2VsZWN0LCJjaGFuZ2UiLGZ1bmN0aW9uKCl7dmFyIGg9dGhpcy5mb250U2VsZWN0LmRvbS52YWx1ZTt0aGlzLnJlbGF5Q21kKCJmb250bmFtZSIsaCk7dGhpcy5kZWZlckZvY3VzKCl9LHRoaXMpfXRoaXMubW9uKGIuZWwsImNsaWNrIixmdW5jdGlvbihoKXtoLnByZXZlbnREZWZhdWx0KCl9KTt0aGlzLnRiPWI7dGhpcy50Yi5kb0xheW91dCgpfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLndyYXAubWFzaygpO0V4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5vbkRpc2FibGUuY2FsbCh0aGlzKX0sb25FbmFibGU6ZnVuY3Rpb24oKXt0aGlzLndyYXAudW5tYXNrKCk7RXh0LmZvcm0uSHRtbEVkaXRvci5zdXBlcmNsYXNzLm9uRW5hYmxlLmNhbGwodGhpcyl9LHNldFJlYWRPbmx5OmZ1bmN0aW9uKGIpe0V4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5zZXRSZWFkT25seS5jYWxsKHRoaXMsYik7aWYodGhpcy5pbml0aWFsaXplZCl7aWYoRXh0LmlzSUUpe3RoaXMuZ2V0RWRpdG9yQm9keSgpLmNvbnRlbnRFZGl0YWJsZT0hYn1lbHNle3RoaXMuc2V0RGVzaWduTW9kZSghYil9dmFyIGE9dGhpcy5nZXRFZGl0b3JCb2R5KCk7aWYoYSl7YS5zdHlsZS5jdXJzb3I9dGhpcy5yZWFkT25seT8iZGVmYXVsdCI6InRleHQifXRoaXMuZGlzYWJsZUl0ZW1zKGIpfX0sZ2V0RG9jTWFya3VwOmZ1bmN0aW9uKCl7dmFyIGE9RXh0LmZseSh0aGlzLmlmcmFtZSkuZ2V0SGVpZ2h0KCktdGhpcy5pZnJhbWVQYWQqMjtyZXR1cm4gU3RyaW5nLmZvcm1hdCgnPGh0bWw+PGhlYWQ+PHN0eWxlIHR5cGU9InRleHQvY3NzIj5ib2R5e2JvcmRlcjogMDsgbWFyZ2luOiAwOyBwYWRkaW5nOiB7MH1weDsgaGVpZ2h0OiB7MX1weDsgY3Vyc29yOiB0ZXh0fTwvc3R5bGU+PC9oZWFkPjxib2R5PjwvYm9keT48L2h0bWw+Jyx0aGlzLmlmcmFtZVBhZCxhKX0sZ2V0RWRpdG9yQm9keTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0RG9jKCk7cmV0dXJuIGEuYm9keXx8YS5kb2N1bWVudEVsZW1lbnR9LGdldERvYzpmdW5jdGlvbigpe3JldHVybiBFeHQuaXNJRT90aGlzLmdldFdpbigpLmRvY3VtZW50Oih0aGlzLmlmcmFtZS5jb250ZW50RG9jdW1lbnR8fHRoaXMuZ2V0V2luKCkuZG9jdW1lbnQpfSxnZXRXaW46ZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmlzSUU/dGhpcy5pZnJhbWUuY29udGVudFdpbmRvdzp3aW5kb3cuZnJhbWVzW3RoaXMuaWZyYW1lLm5hbWVdfSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe0V4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5vblJlbmRlci5jYWxsKHRoaXMsYixhKTt0aGlzLmVsLmRvbS5zdHlsZS5ib3JkZXI9IjAgbm9uZSI7dGhpcy5lbC5kb20uc2V0QXR0cmlidXRlKCJ0YWJJbmRleCIsLTEpO3RoaXMuZWwuYWRkQ2xhc3MoIngtaGlkZGVuIik7aWYoRXh0LmlzSUUpe3RoaXMuZWwuYXBwbHlTdHlsZXMoIm1hcmdpbi10b3A6LTFweDttYXJnaW4tYm90dG9tOi0xcHg7Iil9dGhpcy53cmFwPXRoaXMuZWwud3JhcCh7Y2xzOiJ4LWh0bWwtZWRpdG9yLXdyYXAiLGNuOntjbHM6IngtaHRtbC1lZGl0b3ItdGIifX0pO3RoaXMuY3JlYXRlVG9vbGJhcih0aGlzKTt0aGlzLmRpc2FibGVJdGVtcyh0cnVlKTt0aGlzLnRiLmRvTGF5b3V0KCk7dGhpcy5jcmVhdGVJRnJhbWUoKTtpZighdGhpcy53aWR0aCl7dmFyIGM9dGhpcy5lbC5nZXRTaXplKCk7dGhpcy5zZXRTaXplKGMud2lkdGgsdGhpcy5oZWlnaHR8fGMuaGVpZ2h0KX10aGlzLnJlc2l6ZUVsPXRoaXMucG9zaXRpb25FbD10aGlzLndyYXB9LGNyZWF0ZUlGcmFtZTpmdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO2EubmFtZT1FeHQuaWQoKTthLmZyYW1lQm9yZGVyPSIwIjthLnN0eWxlLm92ZXJmbG93PSJhdXRvIjthLnNyYz1FeHQuU1NMX1NFQ1VSRV9VUkw7dGhpcy53cmFwLmRvbS5hcHBlbmRDaGlsZChhKTt0aGlzLmlmcmFtZT1hO3RoaXMubW9uaXRvclRhc2s9RXh0LlRhc2tNZ3Iuc3RhcnQoe3J1bjp0aGlzLmNoZWNrRGVzaWduTW9kZSxzY29wZTp0aGlzLGludGVydmFsOjEwMH0pfSxpbml0RnJhbWU6ZnVuY3Rpb24oKXtFeHQuVGFza01nci5zdG9wKHRoaXMubW9uaXRvclRhc2spO3ZhciBiPXRoaXMuZ2V0RG9jKCk7dGhpcy53aW49dGhpcy5nZXRXaW4oKTtiLm9wZW4oKTtiLndyaXRlKHRoaXMuZ2V0RG9jTWFya3VwKCkpO2IuY2xvc2UoKTt2YXIgYT17cnVuOmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5nZXREb2MoKTtpZihjLmJvZHl8fGMucmVhZHlTdGF0ZT09ImNvbXBsZXRlIil7RXh0LlRhc2tNZ3Iuc3RvcChhKTt0aGlzLnNldERlc2lnbk1vZGUodHJ1ZSk7dGhpcy5pbml0RWRpdG9yLmRlZmVyKDEwLHRoaXMpfX0saW50ZXJ2YWw6MTAsZHVyYXRpb246MTAwMDAsc2NvcGU6dGhpc307RXh0LlRhc2tNZ3Iuc3RhcnQoYSl9LGNoZWNrRGVzaWduTW9kZTpmdW5jdGlvbigpe2lmKHRoaXMud3JhcCYmdGhpcy53cmFwLmRvbS5vZmZzZXRXaWR0aCl7dmFyIGE9dGhpcy5nZXREb2MoKTtpZighYSl7cmV0dXJufWlmKCFhLmVkaXRvckluaXRpYWxpemVkfHx0aGlzLmdldERlc2lnbk1vZGUoKSE9Im9uIil7dGhpcy5pbml0RnJhbWUoKX19fSxzZXREZXNpZ25Nb2RlOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0RG9jKCk7aWYoYSl7aWYodGhpcy5yZWFkT25seSl7Yj1mYWxzZX1hLmRlc2lnbk1vZGU9KC9vbnx0cnVlL2kpLnRlc3QoU3RyaW5nKGIpLnRvTG93ZXJDYXNlKCkpPyJvbiI6Im9mZiJ9fSxnZXREZXNpZ25Nb2RlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXREb2MoKTtpZighYSl7cmV0dXJuIiJ9cmV0dXJuIFN0cmluZyhhLmRlc2lnbk1vZGUpLnRvTG93ZXJDYXNlKCl9LGRpc2FibGVJdGVtczpmdW5jdGlvbihhKXtpZih0aGlzLmZvbnRTZWxlY3Qpe3RoaXMuZm9udFNlbGVjdC5kb20uZGlzYWJsZWQ9YX10aGlzLnRiLml0ZW1zLmVhY2goZnVuY3Rpb24oYil7aWYoYi5nZXRJdGVtSWQoKSE9InNvdXJjZWVkaXQiKXtiLnNldERpc2FibGVkKGEpfX0pfSxvblJlc2l6ZTpmdW5jdGlvbihiLGMpe0V4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5vblJlc2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5lbCYmdGhpcy5pZnJhbWUpe2lmKEV4dC5pc051bWJlcihiKSl7dmFyIGU9Yi10aGlzLndyYXAuZ2V0RnJhbWVXaWR0aCgibHIiKTt0aGlzLmVsLnNldFdpZHRoKGUpO3RoaXMudGIuc2V0V2lkdGgoZSk7dGhpcy5pZnJhbWUuc3R5bGUud2lkdGg9TWF0aC5tYXgoZSwwKSsicHgifWlmKEV4dC5pc051bWJlcihjKSl7dmFyIGE9Yy10aGlzLndyYXAuZ2V0RnJhbWVXaWR0aCgidGIiKS10aGlzLnRiLmVsLmdldEhlaWdodCgpO3RoaXMuZWwuc2V0SGVpZ2h0KGEpO3RoaXMuaWZyYW1lLnN0eWxlLmhlaWdodD1NYXRoLm1heChhLDApKyJweCI7dmFyIGQ9dGhpcy5nZXRFZGl0b3JCb2R5KCk7aWYoZCl7ZC5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgoKGEtKHRoaXMuaWZyYW1lUGFkKjIpKSwwKSsicHgifX19fSx0b2dnbGVTb3VyY2VFZGl0OmZ1bmN0aW9uKGIpe3ZhciBkLGE7aWYoYj09PXVuZGVmaW5lZCl7Yj0hdGhpcy5zb3VyY2VFZGl0TW9kZX10aGlzLnNvdXJjZUVkaXRNb2RlPWI9PT10cnVlO3ZhciBjPXRoaXMudGIuZ2V0Q29tcG9uZW50KCJzb3VyY2VlZGl0Iik7aWYoYy5wcmVzc2VkIT09dGhpcy5zb3VyY2VFZGl0TW9kZSl7Yy50b2dnbGUodGhpcy5zb3VyY2VFZGl0TW9kZSk7aWYoIWMueHRiSGlkZGVuKXtyZXR1cm59fWlmKHRoaXMuc291cmNlRWRpdE1vZGUpe3RoaXMucHJldmlvdXNTaXplPXRoaXMuZ2V0U2l6ZSgpO2Q9RXh0LmdldCh0aGlzLmlmcmFtZSkuZ2V0SGVpZ2h0KCk7dGhpcy5kaXNhYmxlSXRlbXModHJ1ZSk7dGhpcy5zeW5jVmFsdWUoKTt0aGlzLmlmcmFtZS5jbGFzc05hbWU9IngtaGlkZGVuIjt0aGlzLmVsLnJlbW92ZUNsYXNzKCJ4LWhpZGRlbiIpO3RoaXMuZWwuZG9tLnJlbW92ZUF0dHJpYnV0ZSgidGFiSW5kZXgiKTt0aGlzLmVsLmZvY3VzKCk7dGhpcy5lbC5kb20uc3R5bGUuaGVpZ2h0PWQrInB4In1lbHNle2E9cGFyc2VJbnQodGhpcy5lbC5kb20uc3R5bGUuaGVpZ2h0LDEwKTtpZih0aGlzLmluaXRpYWxpemVkKXt0aGlzLmRpc2FibGVJdGVtcyh0aGlzLnJlYWRPbmx5KX10aGlzLnB1c2hWYWx1ZSgpO3RoaXMuaWZyYW1lLmNsYXNzTmFtZT0iIjt0aGlzLmVsLmFkZENsYXNzKCJ4LWhpZGRlbiIpO3RoaXMuZWwuZG9tLnNldEF0dHJpYnV0ZSgidGFiSW5kZXgiLC0xKTt0aGlzLmRlZmVyRm9jdXMoKTt0aGlzLnNldFNpemUodGhpcy5wcmV2aW91c1NpemUpO2RlbGV0ZSB0aGlzLnByZXZpb3VzU2l6ZTt0aGlzLmlmcmFtZS5zdHlsZS5oZWlnaHQ9YSsicHgifXRoaXMuZmlyZUV2ZW50KCJlZGl0bW9kZWNoYW5nZSIsdGhpcyx0aGlzLnNvdXJjZUVkaXRNb2RlKX0sY3JlYXRlTGluazpmdW5jdGlvbigpe3ZhciBhPXByb21wdCh0aGlzLmNyZWF0ZUxpbmtUZXh0LHRoaXMuZGVmYXVsdExpbmtWYWx1ZSk7aWYoYSYmYSE9Imh0dHA6Ly8iKXt0aGlzLnJlbGF5Q21kKCJjcmVhdGVsaW5rIixhKX19LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLm9yaWdpbmFsVmFsdWU9dGhpcy5nZXRWYWx1ZSgpfSxtYXJrSW52YWxpZDpFeHQuZW1wdHlGbixjbGVhckludmFsaWQ6RXh0LmVtcHR5Rm4sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7RXh0LmZvcm0uSHRtbEVkaXRvci5zdXBlcmNsYXNzLnNldFZhbHVlLmNhbGwodGhpcyxhKTt0aGlzLnB1c2hWYWx1ZSgpO3JldHVybiB0aGlzfSxjbGVhbkh0bWw6ZnVuY3Rpb24oYSl7YT1TdHJpbmcoYSk7aWYoRXh0LmlzV2ViS2l0KXthPWEucmVwbGFjZSgvXHNjbGFzcz0iKD86QXBwbGUtc3R5bGUtc3BhbnxraHRtbC1ibG9jay1wbGFjZWhvbGRlcikiL2dpLCIiKX1pZihhLmNoYXJDb2RlQXQoMCk9PXRoaXMuZGVmYXVsdFZhbHVlLnJlcGxhY2UoL1xEL2csIiIpKXthPWEuc3Vic3RyaW5nKDEpfXJldHVybiBhfSxzeW5jVmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLmluaXRpYWxpemVkKXt2YXIgZD10aGlzLmdldEVkaXRvckJvZHkoKTt2YXIgYz1kLmlubmVySFRNTDtpZihFeHQuaXNXZWJLaXQpe3ZhciBiPWQuZ2V0QXR0cmlidXRlKCJzdHlsZSIpO3ZhciBhPWIubWF0Y2goL3RleHQtYWxpZ246KC4qPyk7L2kpO2lmKGEmJmFbMV0pe2M9JzxkaXYgc3R5bGU9IicrYVswXSsnIj4nK2MrIjwvZGl2PiJ9fWM9dGhpcy5jbGVhbkh0bWwoYyk7aWYodGhpcy5maXJlRXZlbnQoImJlZm9yZXN5bmMiLHRoaXMsYykhPT1mYWxzZSl7dGhpcy5lbC5kb20udmFsdWU9Yzt0aGlzLmZpcmVFdmVudCgic3luYyIsdGhpcyxjKX19fSxnZXRWYWx1ZTpmdW5jdGlvbigpe3RoaXNbdGhpcy5zb3VyY2VFZGl0TW9kZT8icHVzaFZhbHVlIjoic3luY1ZhbHVlIl0oKTtyZXR1cm4gRXh0LmZvcm0uSHRtbEVkaXRvci5zdXBlcmNsYXNzLmdldFZhbHVlLmNhbGwodGhpcyl9LHB1c2hWYWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaW5pdGlhbGl6ZWQpe3ZhciBhPXRoaXMuZWwuZG9tLnZhbHVlO2lmKCF0aGlzLmFjdGl2YXRlZCYmYS5sZW5ndGg8MSl7YT10aGlzLmRlZmF1bHRWYWx1ZX1pZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlcHVzaCIsdGhpcyxhKSE9PWZhbHNlKXt0aGlzLmdldEVkaXRvckJvZHkoKS5pbm5lckhUTUw9YTtpZihFeHQuaXNHZWNrbyl7dGhpcy5zZXREZXNpZ25Nb2RlKGZhbHNlKTt0aGlzLnNldERlc2lnbk1vZGUodHJ1ZSl9dGhpcy5maXJlRXZlbnQoInB1c2giLHRoaXMsYSl9fX0sZGVmZXJGb2N1czpmdW5jdGlvbigpe3RoaXMuZm9jdXMuZGVmZXIoMTAsdGhpcyl9LGZvY3VzOmZ1bmN0aW9uKCl7aWYodGhpcy53aW4mJiF0aGlzLnNvdXJjZUVkaXRNb2RlKXt0aGlzLndpbi5mb2N1cygpfWVsc2V7dGhpcy5lbC5mb2N1cygpfX0saW5pdEVkaXRvcjpmdW5jdGlvbigpe3RyeXt2YXIgYz10aGlzLmdldEVkaXRvckJvZHkoKSxhPXRoaXMuZWwuZ2V0U3R5bGVzKCJmb250LXNpemUiLCJmb250LWZhbWlseSIsImJhY2tncm91bmQtaW1hZ2UiLCJiYWNrZ3JvdW5kLXJlcGVhdCIsImJhY2tncm91bmQtY29sb3IiLCJjb2xvciIpLGcsYjthWyJiYWNrZ3JvdW5kLWF0dGFjaG1lbnQiXT0iZml4ZWQiO2MuYmdQcm9wZXJ0aWVzPSJmaXhlZCI7RXh0LkRvbUhlbHBlci5hcHBseVN0eWxlcyhjLGEpO2c9dGhpcy5nZXREb2MoKTtpZihnKXt0cnl7RXh0LkV2ZW50TWFuYWdlci5yZW1vdmVBbGwoZyl9Y2F0Y2goZCl7fX1iPXRoaXMub25FZGl0b3JFdmVudC5jcmVhdGVEZWxlZ2F0ZSh0aGlzKTtFeHQuRXZlbnRNYW5hZ2VyLm9uKGcse21vdXNlZG93bjpiLGRibGNsaWNrOmIsY2xpY2s6YixrZXl1cDpiLGJ1ZmZlcjoxMDB9KTtpZihFeHQuaXNHZWNrbyl7RXh0LkV2ZW50TWFuYWdlci5vbihnLCJrZXlwcmVzcyIsdGhpcy5hcHBseUNvbW1hbmQsdGhpcyl9aWYoRXh0LmlzSUV8fEV4dC5pc1dlYktpdHx8RXh0LmlzT3BlcmEpe0V4dC5FdmVudE1hbmFnZXIub24oZywia2V5ZG93biIsdGhpcy5maXhLZXlzLHRoaXMpfWcuZWRpdG9ySW5pdGlhbGl6ZWQ9dHJ1ZTt0aGlzLmluaXRpYWxpemVkPXRydWU7dGhpcy5wdXNoVmFsdWUoKTt0aGlzLnNldFJlYWRPbmx5KHRoaXMucmVhZE9ubHkpO3RoaXMuZmlyZUV2ZW50KCJpbml0aWFsaXplIix0aGlzKX1jYXRjaChkKXt9fSxiZWZvcmVEZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5tb25pdG9yVGFzayl7RXh0LlRhc2tNZ3Iuc3RvcCh0aGlzLm1vbml0b3JUYXNrKX1pZih0aGlzLnJlbmRlcmVkKXtFeHQuZGVzdHJveSh0aGlzLnRiKTt2YXIgYj10aGlzLmdldERvYygpO2lmKGIpe3RyeXtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZUFsbChiKTtmb3IodmFyIGMgaW4gYil7ZGVsZXRlIGJbY119fWNhdGNoKGEpe319aWYodGhpcy53cmFwKXt0aGlzLndyYXAuZG9tLmlubmVySFRNTD0iIjt0aGlzLndyYXAucmVtb3ZlKCl9fUV4dC5mb3JtLkh0bWxFZGl0b3Iuc3VwZXJjbGFzcy5iZWZvcmVEZXN0cm95LmNhbGwodGhpcyl9LG9uRmlyc3RGb2N1czpmdW5jdGlvbigpe3RoaXMuYWN0aXZhdGVkPXRydWU7dGhpcy5kaXNhYmxlSXRlbXModGhpcy5yZWFkT25seSk7aWYoRXh0LmlzR2Vja28pe3RoaXMud2luLmZvY3VzKCk7dmFyIGE9dGhpcy53aW4uZ2V0U2VsZWN0aW9uKCk7aWYoIWEuZm9jdXNOb2RlfHxhLmZvY3VzTm9kZS5ub2RlVHlwZSE9Myl7dmFyIGI9YS5nZXRSYW5nZUF0KDApO2Iuc2VsZWN0Tm9kZUNvbnRlbnRzKHRoaXMuZ2V0RWRpdG9yQm9keSgpKTtiLmNvbGxhcHNlKHRydWUpO3RoaXMuZGVmZXJGb2N1cygpfXRyeXt0aGlzLmV4ZWNDbWQoInVzZUNTUyIsdHJ1ZSk7dGhpcy5leGVjQ21kKCJzdHlsZVdpdGhDU1MiLGZhbHNlKX1jYXRjaChjKXt9fXRoaXMuZmlyZUV2ZW50KCJhY3RpdmF0ZSIsdGhpcyl9LGFkanVzdEZvbnQ6ZnVuY3Rpb24oYil7dmFyIGQ9Yi5nZXRJdGVtSWQoKT09ImluY3JlYXNlZm9udHNpemUiPzE6LTEsYz10aGlzLmdldERvYygpLGE9cGFyc2VJbnQoYy5xdWVyeUNvbW1hbmRWYWx1ZSgiRm9udFNpemUiKXx8MiwxMCk7aWYoKEV4dC5pc1NhZmFyaSYmIUV4dC5pc1NhZmFyaTIpfHxFeHQuaXNDaHJvbWV8fEV4dC5pc0Fpcil7aWYoYTw9MTApe2E9MStkfWVsc2V7aWYoYTw9MTMpe2E9MitkfWVsc2V7aWYoYTw9MTYpe2E9MytkfWVsc2V7aWYoYTw9MTgpe2E9NCtkfWVsc2V7aWYoYTw9MjQpe2E9NStkfWVsc2V7YT02K2R9fX19fWE9YS5jb25zdHJhaW4oMSw2KX1lbHNle2lmKEV4dC5pc1NhZmFyaSl7ZCo9Mn1hPU1hdGgubWF4KDEsYStkKSsoRXh0LmlzU2FmYXJpPyJweCI6MCl9dGhpcy5leGVjQ21kKCJGb250U2l6ZSIsYSl9LG9uRWRpdG9yRXZlbnQ6ZnVuY3Rpb24oYSl7dGhpcy51cGRhdGVUb29sYmFyKCl9LHVwZGF0ZVRvb2xiYXI6ZnVuY3Rpb24oKXtpZih0aGlzLnJlYWRPbmx5KXtyZXR1cm59aWYoIXRoaXMuYWN0aXZhdGVkKXt0aGlzLm9uRmlyc3RGb2N1cygpO3JldHVybn12YXIgYj10aGlzLnRiLml0ZW1zLm1hcCxjPXRoaXMuZ2V0RG9jKCk7aWYodGhpcy5lbmFibGVGb250JiYhRXh0LmlzU2FmYXJpMil7dmFyIGE9KGMucXVlcnlDb21tYW5kVmFsdWUoIkZvbnROYW1lIil8fHRoaXMuZGVmYXVsdEZvbnQpLnRvTG93ZXJDYXNlKCk7aWYoYSE9dGhpcy5mb250U2VsZWN0LmRvbS52YWx1ZSl7dGhpcy5mb250U2VsZWN0LmRvbS52YWx1ZT1hfX1pZih0aGlzLmVuYWJsZUZvcm1hdCl7Yi5ib2xkLnRvZ2dsZShjLnF1ZXJ5Q29tbWFuZFN0YXRlKCJib2xkIikpO2IuaXRhbGljLnRvZ2dsZShjLnF1ZXJ5Q29tbWFuZFN0YXRlKCJpdGFsaWMiKSk7Yi51bmRlcmxpbmUudG9nZ2xlKGMucXVlcnlDb21tYW5kU3RhdGUoInVuZGVybGluZSIpKX1pZih0aGlzLmVuYWJsZUFsaWdubWVudHMpe2IuanVzdGlmeWxlZnQudG9nZ2xlKGMucXVlcnlDb21tYW5kU3RhdGUoImp1c3RpZnlsZWZ0IikpO2IuanVzdGlmeWNlbnRlci50b2dnbGUoYy5xdWVyeUNvbW1hbmRTdGF0ZSgianVzdGlmeWNlbnRlciIpKTtiLmp1c3RpZnlyaWdodC50b2dnbGUoYy5xdWVyeUNvbW1hbmRTdGF0ZSgianVzdGlmeXJpZ2h0IikpfWlmKCFFeHQuaXNTYWZhcmkyJiZ0aGlzLmVuYWJsZUxpc3RzKXtiLmluc2VydG9yZGVyZWRsaXN0LnRvZ2dsZShjLnF1ZXJ5Q29tbWFuZFN0YXRlKCJpbnNlcnRvcmRlcmVkbGlzdCIpKTtiLmluc2VydHVub3JkZXJlZGxpc3QudG9nZ2xlKGMucXVlcnlDb21tYW5kU3RhdGUoImluc2VydHVub3JkZXJlZGxpc3QiKSl9RXh0Lm1lbnUuTWVudU1nci5oaWRlQWxsKCk7dGhpcy5zeW5jVmFsdWUoKX0scmVsYXlCdG5DbWQ6ZnVuY3Rpb24oYSl7dGhpcy5yZWxheUNtZChhLmdldEl0ZW1JZCgpKX0scmVsYXlDbWQ6ZnVuY3Rpb24oYixhKXsoZnVuY3Rpb24oKXt0aGlzLmZvY3VzKCk7dGhpcy5leGVjQ21kKGIsYSk7dGhpcy51cGRhdGVUb29sYmFyKCl9KS5kZWZlcigxMCx0aGlzKX0sZXhlY0NtZDpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXMuZ2V0RG9jKCk7Yy5leGVjQ29tbWFuZChiLGZhbHNlLGE9PT11bmRlZmluZWQ/bnVsbDphKTt0aGlzLnN5bmNWYWx1ZSgpfSxhcHBseUNvbW1hbmQ6ZnVuY3Rpb24oYil7aWYoYi5jdHJsS2V5KXt2YXIgZD1iLmdldENoYXJDb2RlKCksYTtpZihkPjApe2Q9U3RyaW5nLmZyb21DaGFyQ29kZShkKTtzd2l0Y2goZCl7Y2FzZSJiIjphPSJib2xkIjticmVhaztjYXNlImkiOmE9Iml0YWxpYyI7YnJlYWs7Y2FzZSJ1IjphPSJ1bmRlcmxpbmUiO2JyZWFrfWlmKGEpe3RoaXMud2luLmZvY3VzKCk7dGhpcy5leGVjQ21kKGEpO3RoaXMuZGVmZXJGb2N1cygpO2IucHJldmVudERlZmF1bHQoKX19fX0saW5zZXJ0QXRDdXJzb3I6ZnVuY3Rpb24oYyl7aWYoIXRoaXMuYWN0aXZhdGVkKXtyZXR1cm59aWYoRXh0LmlzSUUpe3RoaXMud2luLmZvY3VzKCk7dmFyIGI9dGhpcy5nZXREb2MoKSxhPWIuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7aWYoYSl7YS5wYXN0ZUhUTUwoYyk7dGhpcy5zeW5jVmFsdWUoKTt0aGlzLmRlZmVyRm9jdXMoKX19ZWxzZXt0aGlzLndpbi5mb2N1cygpO3RoaXMuZXhlY0NtZCgiSW5zZXJ0SFRNTCIsYyk7dGhpcy5kZWZlckZvY3VzKCl9fSxmaXhLZXlzOmZ1bmN0aW9uKCl7aWYoRXh0LmlzSUUpe3JldHVybiBmdW5jdGlvbihnKXt2YXIgYT1nLmdldEtleSgpLGQ9dGhpcy5nZXREb2MoKSxiO2lmKGE9PWcuVEFCKXtnLnN0b3BFdmVudCgpO2I9ZC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtpZihiKXtiLmNvbGxhcHNlKHRydWUpO2IucGFzdGVIVE1MKCImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiKTt0aGlzLmRlZmVyRm9jdXMoKX19ZWxzZXtpZihhPT1nLkVOVEVSKXtiPWQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7aWYoYil7dmFyIGM9Yi5wYXJlbnRFbGVtZW50KCk7aWYoIWN8fGMudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0ibGkiKXtnLnN0b3BFdmVudCgpO2IucGFzdGVIVE1MKCI8YnIgLz4iKTtiLmNvbGxhcHNlKGZhbHNlKTtiLnNlbGVjdCgpfX19fX19ZWxzZXtpZihFeHQuaXNPcGVyYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBhPWIuZ2V0S2V5KCk7aWYoYT09Yi5UQUIpe2Iuc3RvcEV2ZW50KCk7dGhpcy53aW4uZm9jdXMoKTt0aGlzLmV4ZWNDbWQoIkluc2VydEhUTUwiLCImbmJzcDsmbmJzcDsmbmJzcDsmbmJzcDsiKTt0aGlzLmRlZmVyRm9jdXMoKX19fWVsc2V7aWYoRXh0LmlzV2ViS2l0KXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGE9Yi5nZXRLZXkoKTtpZihhPT1iLlRBQil7Yi5zdG9wRXZlbnQoKTt0aGlzLmV4ZWNDbWQoIkluc2VydFRleHQiLCJcdCIpO3RoaXMuZGVmZXJGb2N1cygpfWVsc2V7aWYoYT09Yi5FTlRFUil7Yi5zdG9wRXZlbnQoKTt0aGlzLmV4ZWNDbWQoIkluc2VydEh0bWwiLCI8YnIgLz48YnIgLz4iKTt0aGlzLmRlZmVyRm9jdXMoKX19fX19fX0oKSxnZXRUb29sYmFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGJ9LGJ1dHRvblRpcHM6e2JvbGQ6e3RpdGxlOiJCb2xkIChDdHJsK0IpIix0ZXh0OiJNYWtlIHRoZSBzZWxlY3RlZCB0ZXh0IGJvbGQuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0saXRhbGljOnt0aXRsZToiSXRhbGljIChDdHJsK0kpIix0ZXh0OiJNYWtlIHRoZSBzZWxlY3RlZCB0ZXh0IGl0YWxpYy4iLGNsczoieC1odG1sLWVkaXRvci10aXAifSx1bmRlcmxpbmU6e3RpdGxlOiJVbmRlcmxpbmUgKEN0cmwrVSkiLHRleHQ6IlVuZGVybGluZSB0aGUgc2VsZWN0ZWQgdGV4dC4iLGNsczoieC1odG1sLWVkaXRvci10aXAifSxpbmNyZWFzZWZvbnRzaXplOnt0aXRsZToiR3JvdyBUZXh0Iix0ZXh0OiJJbmNyZWFzZSB0aGUgZm9udCBzaXplLiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGRlY3JlYXNlZm9udHNpemU6e3RpdGxlOiJTaHJpbmsgVGV4dCIsdGV4dDoiRGVjcmVhc2UgdGhlIGZvbnQgc2l6ZS4iLGNsczoieC1odG1sLWVkaXRvci10aXAifSxiYWNrY29sb3I6e3RpdGxlOiJUZXh0IEhpZ2hsaWdodCBDb2xvciIsdGV4dDoiQ2hhbmdlIHRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBzZWxlY3RlZCB0ZXh0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGZvcmVjb2xvcjp7dGl0bGU6IkZvbnQgQ29sb3IiLHRleHQ6IkNoYW5nZSB0aGUgY29sb3Igb2YgdGhlIHNlbGVjdGVkIHRleHQuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0sanVzdGlmeWxlZnQ6e3RpdGxlOiJBbGlnbiBUZXh0IExlZnQiLHRleHQ6IkFsaWduIHRleHQgdG8gdGhlIGxlZnQuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0sanVzdGlmeWNlbnRlcjp7dGl0bGU6IkNlbnRlciBUZXh0Iix0ZXh0OiJDZW50ZXIgdGV4dCBpbiB0aGUgZWRpdG9yLiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGp1c3RpZnlyaWdodDp7dGl0bGU6IkFsaWduIFRleHQgUmlnaHQiLHRleHQ6IkFsaWduIHRleHQgdG8gdGhlIHJpZ2h0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGluc2VydHVub3JkZXJlZGxpc3Q6e3RpdGxlOiJCdWxsZXQgTGlzdCIsdGV4dDoiU3RhcnQgYSBidWxsZXRlZCBsaXN0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGluc2VydG9yZGVyZWRsaXN0Ont0aXRsZToiTnVtYmVyZWQgTGlzdCIsdGV4dDoiU3RhcnQgYSBudW1iZXJlZCBsaXN0LiIsY2xzOiJ4LWh0bWwtZWRpdG9yLXRpcCJ9LGNyZWF0ZWxpbms6e3RpdGxlOiJIeXBlcmxpbmsiLHRleHQ6Ik1ha2UgdGhlIHNlbGVjdGVkIHRleHQgYSBoeXBlcmxpbmsuIixjbHM6IngtaHRtbC1lZGl0b3ItdGlwIn0sc291cmNlZWRpdDp7dGl0bGU6IlNvdXJjZSBFZGl0Iix0ZXh0OiJTd2l0Y2ggdG8gc291cmNlIGVkaXRpbmcgbW9kZS4iLGNsczoieC1odG1sLWVkaXRvci10aXAifX19KTtFeHQucmVnKCJodG1sZWRpdG9yIixFeHQuZm9ybS5IdG1sRWRpdG9yKTtFeHQuZm9ybS5UaW1lRmllbGQ9RXh0LmV4dGVuZChFeHQuZm9ybS5Db21ib0JveCx7bWluVmFsdWU6dW5kZWZpbmVkLG1heFZhbHVlOnVuZGVmaW5lZCxtaW5UZXh0OiJUaGUgdGltZSBpbiB0aGlzIGZpZWxkIG11c3QgYmUgZXF1YWwgdG8gb3IgYWZ0ZXIgezB9IixtYXhUZXh0OiJUaGUgdGltZSBpbiB0aGlzIGZpZWxkIG11c3QgYmUgZXF1YWwgdG8gb3IgYmVmb3JlIHswfSIsaW52YWxpZFRleHQ6InswfSBpcyBub3QgYSB2YWxpZCB0aW1lIixmb3JtYXQ6Imc6aSBBIixhbHRGb3JtYXRzOiJnOmlhfGc6aUF8ZzppIGF8ZzppIEF8aDppfGc6aXxIOml8Z2F8aGF8Z0F8aCBhfGcgYXxnIEF8Z2l8aGl8Z2lhfGhpYXxnfEh8Z2kgYXxoaSBhfGdpQXxoaUF8Z2kgQXxoaSBBIixpbmNyZW1lbnQ6MTUsbW9kZToibG9jYWwiLHRyaWdnZXJBY3Rpb246ImFsbCIsdHlwZUFoZWFkOmZhbHNlLGluaXREYXRlOiIxLzEvMjAwOCIsaW5pdERhdGVGb3JtYXQ6Imovbi9ZIixpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7aWYoRXh0LmlzRGVmaW5lZCh0aGlzLm1pblZhbHVlKSl7dGhpcy5zZXRNaW5WYWx1ZSh0aGlzLm1pblZhbHVlLHRydWUpfWlmKEV4dC5pc0RlZmluZWQodGhpcy5tYXhWYWx1ZSkpe3RoaXMuc2V0TWF4VmFsdWUodGhpcy5tYXhWYWx1ZSx0cnVlKX1pZighdGhpcy5zdG9yZSl7dGhpcy5nZW5lcmF0ZVN0b3JlKHRydWUpfUV4dC5mb3JtLlRpbWVGaWVsZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKX0sc2V0TWluVmFsdWU6ZnVuY3Rpb24oYixhKXt0aGlzLnNldExpbWl0KGIsdHJ1ZSxhKTtyZXR1cm4gdGhpc30sc2V0TWF4VmFsdWU6ZnVuY3Rpb24oYixhKXt0aGlzLnNldExpbWl0KGIsZmFsc2UsYSk7cmV0dXJuIHRoaXN9LGdlbmVyYXRlU3RvcmU6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5taW5WYWx1ZXx8bmV3IERhdGUodGhpcy5pbml0RGF0ZSkuY2xlYXJUaW1lKCksYT10aGlzLm1heFZhbHVlfHxuZXcgRGF0ZSh0aGlzLmluaXREYXRlKS5jbGVhclRpbWUoKS5hZGQoIm1pIiwoMjQqNjApLTEpLGQ9W107d2hpbGUoYzw9YSl7ZC5wdXNoKGMuZGF0ZUZvcm1hdCh0aGlzLmZvcm1hdCkpO2M9Yy5hZGQoIm1pIix0aGlzLmluY3JlbWVudCl9dGhpcy5iaW5kU3RvcmUoZCxiKX0sc2V0TGltaXQ6ZnVuY3Rpb24oYixnLGEpe3ZhciBlO2lmKEV4dC5pc1N0cmluZyhiKSl7ZT10aGlzLnBhcnNlRGF0ZShiKX1lbHNle2lmKEV4dC5pc0RhdGUoYikpe2U9Yn19aWYoZSl7dmFyIGM9bmV3IERhdGUodGhpcy5pbml0RGF0ZSkuY2xlYXJUaW1lKCk7Yy5zZXRIb3VycyhlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksZS5nZXRNaWxsaXNlY29uZHMoKSk7dGhpc1tnPyJtaW5WYWx1ZSI6Im1heFZhbHVlIl09YztpZighYSl7dGhpcy5nZW5lcmF0ZVN0b3JlKCl9fX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXt2YXIgYT1FeHQuZm9ybS5UaW1lRmllbGQuc3VwZXJjbGFzcy5nZXRWYWx1ZS5jYWxsKHRoaXMpO3JldHVybiB0aGlzLmZvcm1hdERhdGUodGhpcy5wYXJzZURhdGUoYSkpfHwiIn0sc2V0VmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIEV4dC5mb3JtLlRpbWVGaWVsZC5zdXBlcmNsYXNzLnNldFZhbHVlLmNhbGwodGhpcyx0aGlzLmZvcm1hdERhdGUodGhpcy5wYXJzZURhdGUoYSkpKX0sdmFsaWRhdGVWYWx1ZTpFeHQuZm9ybS5EYXRlRmllbGQucHJvdG90eXBlLnZhbGlkYXRlVmFsdWUsZm9ybWF0RGF0ZTpFeHQuZm9ybS5EYXRlRmllbGQucHJvdG90eXBlLmZvcm1hdERhdGUscGFyc2VEYXRlOmZ1bmN0aW9uKGgpe2lmKCFofHxFeHQuaXNEYXRlKGgpKXtyZXR1cm4gaH12YXIgaj10aGlzLmluaXREYXRlKyIgIixnPXRoaXMuaW5pdERhdGVGb3JtYXQrIiAiLGI9RGF0ZS5wYXJzZURhdGUoaitoLGcrdGhpcy5mb3JtYXQpLGM9dGhpcy5hbHRGb3JtYXRzO2lmKCFiJiZjKXtpZighdGhpcy5hbHRGb3JtYXRzQXJyYXkpe3RoaXMuYWx0Rm9ybWF0c0FycmF5PWMuc3BsaXQoInwiKX1mb3IodmFyIGU9MCxkPXRoaXMuYWx0Rm9ybWF0c0FycmF5LGE9ZC5sZW5ndGg7ZTxhJiYhYjtlKyspe2I9RGF0ZS5wYXJzZURhdGUoaitoLGcrZFtlXSl9fXJldHVybiBifX0pO0V4dC5yZWcoInRpbWVmaWVsZCIsRXh0LmZvcm0uVGltZUZpZWxkKTtFeHQuZm9ybS5TbGlkZXJGaWVsZD1FeHQuZXh0ZW5kKEV4dC5mb3JtLkZpZWxkLHt1c2VUaXBzOnRydWUsdGlwVGV4dDpudWxsLGFjdGlvbk1vZGU6IndyYXAiLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXt2YXIgYj1FeHQuY29weVRvKHtpZDp0aGlzLmlkKyItc2xpZGVyIn0sdGhpcy5pbml0aWFsQ29uZmlnLFsidmVydGljYWwiLCJtaW5WYWx1ZSIsIm1heFZhbHVlIiwiZGVjaW1hbFByZWNpc2lvbiIsImtleUluY3JlbWVudCIsImluY3JlbWVudCIsImNsaWNrVG9DaGFuZ2UiLCJhbmltYXRlIl0pO2lmKHRoaXMudXNlVGlwcyl7dmFyIGE9dGhpcy50aXBUZXh0P3tnZXRUZXh0OnRoaXMudGlwVGV4dH06e307Yi5wbHVnaW5zPVtuZXcgRXh0LnNsaWRlci5UaXAoYSldfXRoaXMuc2xpZGVyPW5ldyBFeHQuU2xpZGVyKGIpO0V4dC5mb3JtLlNsaWRlckZpZWxkLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpfSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe3RoaXMuYXV0b0NyZWF0ZT17aWQ6dGhpcy5pZCxuYW1lOnRoaXMubmFtZSx0eXBlOiJoaWRkZW4iLHRhZzoiaW5wdXQifTtFeHQuZm9ybS5TbGlkZXJGaWVsZC5zdXBlcmNsYXNzLm9uUmVuZGVyLmNhbGwodGhpcyxiLGEpO3RoaXMud3JhcD10aGlzLmVsLndyYXAoe2NsczoieC1mb3JtLWZpZWxkLXdyYXAifSk7dGhpcy5yZXNpemVFbD10aGlzLnBvc2l0aW9uRWw9dGhpcy53cmFwO3RoaXMuc2xpZGVyLnJlbmRlcih0aGlzLndyYXApfSxvblJlc2l6ZTpmdW5jdGlvbihiLGMsZCxhKXtFeHQuZm9ybS5TbGlkZXJGaWVsZC5zdXBlcmNsYXNzLm9uUmVzaXplLmNhbGwodGhpcyxiLGMsZCxhKTt0aGlzLnNsaWRlci5zZXRTaXplKGIsYyl9LGluaXRFdmVudHM6ZnVuY3Rpb24oKXtFeHQuZm9ybS5TbGlkZXJGaWVsZC5zdXBlcmNsYXNzLmluaXRFdmVudHMuY2FsbCh0aGlzKTt0aGlzLnNsaWRlci5vbigiY2hhbmdlIix0aGlzLm9uQ2hhbmdlLHRoaXMpfSxvbkNoYW5nZTpmdW5jdGlvbihiLGEpe3RoaXMuc2V0VmFsdWUoYSx1bmRlZmluZWQsdHJ1ZSl9LG9uRW5hYmxlOmZ1bmN0aW9uKCl7RXh0LmZvcm0uU2xpZGVyRmllbGQuc3VwZXJjbGFzcy5vbkVuYWJsZS5jYWxsKHRoaXMpO3RoaXMuc2xpZGVyLmVuYWJsZSgpfSxvbkRpc2FibGU6ZnVuY3Rpb24oKXtFeHQuZm9ybS5TbGlkZXJGaWVsZC5zdXBlcmNsYXNzLm9uRGlzYWJsZS5jYWxsKHRoaXMpO3RoaXMuc2xpZGVyLmRpc2FibGUoKX0sYmVmb3JlRGVzdHJveTpmdW5jdGlvbigpe0V4dC5kZXN0cm95KHRoaXMuc2xpZGVyKTtFeHQuZm9ybS5TbGlkZXJGaWVsZC5zdXBlcmNsYXNzLmJlZm9yZURlc3Ryb3kuY2FsbCh0aGlzKX0sYWxpZ25FcnJvckljb246ZnVuY3Rpb24oKXt0aGlzLmVycm9ySWNvbi5hbGlnblRvKHRoaXMuc2xpZGVyLmVsLCJ0bC10ciIsWzIsMF0pfSxzZXRNaW5WYWx1ZTpmdW5jdGlvbihhKXt0aGlzLnNsaWRlci5zZXRNaW5WYWx1ZShhKTtyZXR1cm4gdGhpc30sc2V0TWF4VmFsdWU6ZnVuY3Rpb24oYSl7dGhpcy5zbGlkZXIuc2V0TWF4VmFsdWUoYSk7cmV0dXJuIHRoaXN9LHNldFZhbHVlOmZ1bmN0aW9uKGMsYixhKXtpZighYSl7dGhpcy5zbGlkZXIuc2V0VmFsdWUoYyxiKX1yZXR1cm4gRXh0LmZvcm0uU2xpZGVyRmllbGQuc3VwZXJjbGFzcy5zZXRWYWx1ZS5jYWxsKHRoaXMsdGhpcy5zbGlkZXIuZ2V0VmFsdWUoKSl9LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGVyLmdldFZhbHVlKCl9fSk7RXh0LnJlZygic2xpZGVyZmllbGQiLEV4dC5mb3JtLlNsaWRlckZpZWxkKTtFeHQuZm9ybS5MYWJlbD1FeHQuZXh0ZW5kKEV4dC5Cb3hDb21wb25lbnQse29uUmVuZGVyOmZ1bmN0aW9uKGIsYSl7aWYoIXRoaXMuZWwpe3RoaXMuZWw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgibGFiZWwiKTt0aGlzLmVsLmlkPXRoaXMuZ2V0SWQoKTt0aGlzLmVsLmlubmVySFRNTD10aGlzLnRleHQ/RXh0LnV0aWwuRm9ybWF0Lmh0bWxFbmNvZGUodGhpcy50ZXh0KToodGhpcy5odG1sfHwiIik7aWYodGhpcy5mb3JJZCl7dGhpcy5lbC5zZXRBdHRyaWJ1dGUoImZvciIsdGhpcy5mb3JJZCl9fUV4dC5mb3JtLkxhYmVsLnN1cGVyY2xhc3Mub25SZW5kZXIuY2FsbCh0aGlzLGIsYSl9LHNldFRleHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iPT09ZmFsc2U7dGhpc1shYz8idGV4dCI6Imh0bWwiXT1hO2RlbGV0ZSB0aGlzW2M/InRleHQiOiJodG1sIl07aWYodGhpcy5yZW5kZXJlZCl7dGhpcy5lbC5kb20uaW5uZXJIVE1MPWIhPT1mYWxzZT9FeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShhKTphfXJldHVybiB0aGlzfX0pO0V4dC5yZWcoImxhYmVsIixFeHQuZm9ybS5MYWJlbCk7RXh0LmZvcm0uQWN0aW9uPWZ1bmN0aW9uKGIsYSl7dGhpcy5mb3JtPWI7dGhpcy5vcHRpb25zPWF8fHt9fTtFeHQuZm9ybS5BY3Rpb24uQ0xJRU5UX0lOVkFMSUQ9ImNsaWVudCI7RXh0LmZvcm0uQWN0aW9uLlNFUlZFUl9JTlZBTElEPSJzZXJ2ZXIiO0V4dC5mb3JtLkFjdGlvbi5DT05ORUNUX0ZBSUxVUkU9ImNvbm5lY3QiO0V4dC5mb3JtLkFjdGlvbi5MT0FEX0ZBSUxVUkU9ImxvYWQiO0V4dC5mb3JtLkFjdGlvbi5wcm90b3R5cGU9e3R5cGU6ImRlZmF1bHQiLHJ1bjpmdW5jdGlvbihhKXt9LHN1Y2Nlc3M6ZnVuY3Rpb24oYSl7fSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihhKXt9LGZhaWx1cmU6ZnVuY3Rpb24oYSl7dGhpcy5yZXNwb25zZT1hO3RoaXMuZmFpbHVyZVR5cGU9RXh0LmZvcm0uQWN0aW9uLkNPTk5FQ1RfRkFJTFVSRTt0aGlzLmZvcm0uYWZ0ZXJBY3Rpb24odGhpcyxmYWxzZSl9LHByb2Nlc3NSZXNwb25zZTpmdW5jdGlvbihhKXt0aGlzLnJlc3BvbnNlPWE7aWYoIWEucmVzcG9uc2VUZXh0JiYhYS5yZXNwb25zZVhNTCl7cmV0dXJuIHRydWV9dGhpcy5yZXN1bHQ9dGhpcy5oYW5kbGVSZXNwb25zZShhKTtyZXR1cm4gdGhpcy5yZXN1bHR9LGRlY29kZVJlc3BvbnNlOmZ1bmN0aW9uKGEpe3RyeXtyZXR1cm4gRXh0LmRlY29kZShhLnJlc3BvbnNlVGV4dCl9Y2F0Y2goYil7cmV0dXJuIGZhbHNlfX0sZ2V0VXJsOmZ1bmN0aW9uKGMpe3ZhciBhPXRoaXMub3B0aW9ucy51cmx8fHRoaXMuZm9ybS51cmx8fHRoaXMuZm9ybS5lbC5kb20uYWN0aW9uO2lmKGMpe3ZhciBiPXRoaXMuZ2V0UGFyYW1zKCk7aWYoYil7YT1FeHQudXJsQXBwZW5kKGEsYil9fXJldHVybiBhfSxnZXRNZXRob2Q6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5vcHRpb25zLm1ldGhvZHx8dGhpcy5mb3JtLm1ldGhvZHx8dGhpcy5mb3JtLmVsLmRvbS5tZXRob2R8fCJQT1NUIikudG9VcHBlckNhc2UoKX0sZ2V0UGFyYW1zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5mb3JtLmJhc2VQYXJhbXM7dmFyIGI9dGhpcy5vcHRpb25zLnBhcmFtcztpZihiKXtpZih0eXBlb2YgYj09Im9iamVjdCIpe2I9RXh0LnVybEVuY29kZShFeHQuYXBwbHlJZihiLGEpKX1lbHNle2lmKHR5cGVvZiBiPT0ic3RyaW5nIiYmYSl7Yis9IiYiK0V4dC51cmxFbmNvZGUoYSl9fX1lbHNle2lmKGEpe2I9RXh0LnVybEVuY29kZShhKX19cmV0dXJuIGJ9LGNyZWF0ZUNhbGxiYWNrOmZ1bmN0aW9uKGEpe3ZhciBhPWF8fHt9O3JldHVybntzdWNjZXNzOnRoaXMuc3VjY2VzcyxmYWlsdXJlOnRoaXMuZmFpbHVyZSxzY29wZTp0aGlzLHRpbWVvdXQ6KGEudGltZW91dCoxMDAwKXx8KHRoaXMuZm9ybS50aW1lb3V0KjEwMDApLHVwbG9hZDp0aGlzLmZvcm0uZmlsZVVwbG9hZD90aGlzLnN1Y2Nlc3M6dW5kZWZpbmVkfX19O0V4dC5mb3JtLkFjdGlvbi5TdWJtaXQ9ZnVuY3Rpb24oYixhKXtFeHQuZm9ybS5BY3Rpb24uU3VibWl0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGIsYSl9O0V4dC5leHRlbmQoRXh0LmZvcm0uQWN0aW9uLlN1Ym1pdCxFeHQuZm9ybS5BY3Rpb24se3R5cGU6InN1Ym1pdCIscnVuOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcHRpb25zLGc9dGhpcy5nZXRNZXRob2QoKSxkPWc9PSJHRVQiO2lmKGUuY2xpZW50VmFsaWRhdGlvbj09PWZhbHNlfHx0aGlzLmZvcm0uaXNWYWxpZCgpKXtpZihlLnN1Ym1pdEVtcHR5VGV4dD09PWZhbHNlKXt2YXIgYT10aGlzLmZvcm0uaXRlbXMsYz1bXSxiPWZ1bmN0aW9uKGgpe2lmKGguZWwuZ2V0VmFsdWUoKT09aC5lbXB0eVRleHQpe2MucHVzaChoKTtoLmVsLmRvbS52YWx1ZT0iIn1pZihoLmlzQ29tcG9zaXRlJiZoLnJlbmRlcmVkKXtoLml0ZW1zLmVhY2goYil9fTthLmVhY2goYil9RXh0LkFqYXgucmVxdWVzdChFeHQuYXBwbHkodGhpcy5jcmVhdGVDYWxsYmFjayhlKSx7Zm9ybTp0aGlzLmZvcm0uZWwuZG9tLHVybDp0aGlzLmdldFVybChkKSxtZXRob2Q6ZyxoZWFkZXJzOmUuaGVhZGVycyxwYXJhbXM6IWQ/dGhpcy5nZXRQYXJhbXMoKTpudWxsLGlzVXBsb2FkOnRoaXMuZm9ybS5maWxlVXBsb2FkfSkpO2lmKGUuc3VibWl0RW1wdHlUZXh0PT09ZmFsc2Upe0V4dC5lYWNoKGMsZnVuY3Rpb24oaCl7aWYoaC5hcHBseUVtcHR5VGV4dCl7aC5hcHBseUVtcHR5VGV4dCgpfX0pfX1lbHNle2lmKGUuY2xpZW50VmFsaWRhdGlvbiE9PWZhbHNlKXt0aGlzLmZhaWx1cmVUeXBlPUV4dC5mb3JtLkFjdGlvbi5DTElFTlRfSU5WQUxJRDt0aGlzLmZvcm0uYWZ0ZXJBY3Rpb24odGhpcyxmYWxzZSl9fX0sc3VjY2VzczpmdW5jdGlvbihiKXt2YXIgYT10aGlzLnByb2Nlc3NSZXNwb25zZShiKTtpZihhPT09dHJ1ZXx8YS5zdWNjZXNzKXt0aGlzLmZvcm0uYWZ0ZXJBY3Rpb24odGhpcyx0cnVlKTtyZXR1cm59aWYoYS5lcnJvcnMpe3RoaXMuZm9ybS5tYXJrSW52YWxpZChhLmVycm9ycyl9dGhpcy5mYWlsdXJlVHlwZT1FeHQuZm9ybS5BY3Rpb24uU0VSVkVSX0lOVkFMSUQ7dGhpcy5mb3JtLmFmdGVyQWN0aW9uKHRoaXMsZmFsc2UpfSxoYW5kbGVSZXNwb25zZTpmdW5jdGlvbihjKXtpZih0aGlzLmZvcm0uZXJyb3JSZWFkZXIpe3ZhciBiPXRoaXMuZm9ybS5lcnJvclJlYWRlci5yZWFkKGMpO3ZhciBnPVtdO2lmKGIucmVjb3Jkcyl7Zm9yKHZhciBkPTAsYT1iLnJlY29yZHMubGVuZ3RoO2Q8YTtkKyspe3ZhciBlPWIucmVjb3Jkc1tkXTtnW2RdPWUuZGF0YX19aWYoZy5sZW5ndGg8MSl7Zz1udWxsfXJldHVybntzdWNjZXNzOmIuc3VjY2VzcyxlcnJvcnM6Z319cmV0dXJuIHRoaXMuZGVjb2RlUmVzcG9uc2UoYyl9fSk7RXh0LmZvcm0uQWN0aW9uLkxvYWQ9ZnVuY3Rpb24oYixhKXtFeHQuZm9ybS5BY3Rpb24uTG9hZC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxiLGEpO3RoaXMucmVhZGVyPXRoaXMuZm9ybS5yZWFkZXJ9O0V4dC5leHRlbmQoRXh0LmZvcm0uQWN0aW9uLkxvYWQsRXh0LmZvcm0uQWN0aW9uLHt0eXBlOiJsb2FkIixydW46ZnVuY3Rpb24oKXtFeHQuQWpheC5yZXF1ZXN0KEV4dC5hcHBseSh0aGlzLmNyZWF0ZUNhbGxiYWNrKHRoaXMub3B0aW9ucykse21ldGhvZDp0aGlzLmdldE1ldGhvZCgpLHVybDp0aGlzLmdldFVybChmYWxzZSksaGVhZGVyczp0aGlzLm9wdGlvbnMuaGVhZGVycyxwYXJhbXM6dGhpcy5nZXRQYXJhbXMoKX0pKX0sc3VjY2VzczpmdW5jdGlvbihiKXt2YXIgYT10aGlzLnByb2Nlc3NSZXNwb25zZShiKTtpZihhPT09dHJ1ZXx8IWEuc3VjY2Vzc3x8IWEuZGF0YSl7dGhpcy5mYWlsdXJlVHlwZT1FeHQuZm9ybS5BY3Rpb24uTE9BRF9GQUlMVVJFO3RoaXMuZm9ybS5hZnRlckFjdGlvbih0aGlzLGZhbHNlKTtyZXR1cm59dGhpcy5mb3JtLmNsZWFySW52YWxpZCgpO3RoaXMuZm9ybS5zZXRWYWx1ZXMoYS5kYXRhKTt0aGlzLmZvcm0uYWZ0ZXJBY3Rpb24odGhpcyx0cnVlKX0saGFuZGxlUmVzcG9uc2U6ZnVuY3Rpb24oYil7aWYodGhpcy5mb3JtLnJlYWRlcil7dmFyIGE9dGhpcy5mb3JtLnJlYWRlci5yZWFkKGIpO3ZhciBjPWEucmVjb3JkcyYmYS5yZWNvcmRzWzBdP2EucmVjb3Jkc1swXS5kYXRhOm51bGw7cmV0dXJue3N1Y2Nlc3M6YS5zdWNjZXNzLGRhdGE6Y319cmV0dXJuIHRoaXMuZGVjb2RlUmVzcG9uc2UoYil9fSk7RXh0LmZvcm0uQWN0aW9uLkRpcmVjdExvYWQ9RXh0LmV4dGVuZChFeHQuZm9ybS5BY3Rpb24uTG9hZCx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXtFeHQuZm9ybS5BY3Rpb24uRGlyZWN0TG9hZC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxiLGEpfSx0eXBlOiJkaXJlY3Rsb2FkIixydW46ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFBhcmFtcygpO2EucHVzaCh0aGlzLnN1Y2Nlc3MsdGhpcyk7dGhpcy5mb3JtLmFwaS5sb2FkLmFwcGx5KHdpbmRvdyxhKX0sZ2V0UGFyYW1zOmZ1bmN0aW9uKCl7dmFyIGM9W10saD17fTt2YXIgZT10aGlzLmZvcm0uYmFzZVBhcmFtczt2YXIgZz10aGlzLm9wdGlvbnMucGFyYW1zO0V4dC5hcHBseShoLGcsZSk7dmFyIGI9dGhpcy5mb3JtLnBhcmFtT3JkZXI7aWYoYil7Zm9yKHZhciBkPTAsYT1iLmxlbmd0aDtkPGE7ZCsrKXtjLnB1c2goaFtiW2RdXSl9fWVsc2V7aWYodGhpcy5mb3JtLnBhcmFtc0FzSGFzaCl7Yy5wdXNoKGgpfX1yZXR1cm4gY30scHJvY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKGEpe3RoaXMucmVzdWx0PWE7cmV0dXJuIGF9LHN1Y2Nlc3M6ZnVuY3Rpb24oYSxiKXtpZihiLnR5cGU9PUV4dC5EaXJlY3QuZXhjZXB0aW9ucy5TRVJWRVIpe2E9e319RXh0LmZvcm0uQWN0aW9uLkRpcmVjdExvYWQuc3VwZXJjbGFzcy5zdWNjZXNzLmNhbGwodGhpcyxhKX19KTtFeHQuZm9ybS5BY3Rpb24uRGlyZWN0U3VibWl0PUV4dC5leHRlbmQoRXh0LmZvcm0uQWN0aW9uLlN1Ym1pdCx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYixhKXtFeHQuZm9ybS5BY3Rpb24uRGlyZWN0U3VibWl0LnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGIsYSl9LHR5cGU6ImRpcmVjdHN1Ym1pdCIscnVuOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zO2lmKGEuY2xpZW50VmFsaWRhdGlvbj09PWZhbHNlfHx0aGlzLmZvcm0uaXNWYWxpZCgpKXt0aGlzLnN1Y2Nlc3MucGFyYW1zPXRoaXMuZ2V0UGFyYW1zKCk7dGhpcy5mb3JtLmFwaS5zdWJtaXQodGhpcy5mb3JtLmVsLmRvbSx0aGlzLnN1Y2Nlc3MsdGhpcyl9ZWxzZXtpZihhLmNsaWVudFZhbGlkYXRpb24hPT1mYWxzZSl7dGhpcy5mYWlsdXJlVHlwZT1FeHQuZm9ybS5BY3Rpb24uQ0xJRU5UX0lOVkFMSUQ7dGhpcy5mb3JtLmFmdGVyQWN0aW9uKHRoaXMsZmFsc2UpfX19LGdldFBhcmFtczpmdW5jdGlvbigpe3ZhciBjPXt9O3ZhciBhPXRoaXMuZm9ybS5iYXNlUGFyYW1zO3ZhciBiPXRoaXMub3B0aW9ucy5wYXJhbXM7RXh0LmFwcGx5KGMsYixhKTtyZXR1cm4gY30scHJvY2Vzc1Jlc3BvbnNlOmZ1bmN0aW9uKGEpe3RoaXMucmVzdWx0PWE7cmV0dXJuIGF9LHN1Y2Nlc3M6ZnVuY3Rpb24oYSxiKXtpZihiLnR5cGU9PUV4dC5EaXJlY3QuZXhjZXB0aW9ucy5TRVJWRVIpe2E9e319RXh0LmZvcm0uQWN0aW9uLkRpcmVjdFN1Ym1pdC5zdXBlcmNsYXNzLnN1Y2Nlc3MuY2FsbCh0aGlzLGEpfX0pO0V4dC5mb3JtLkFjdGlvbi5BQ1RJT05fVFlQRVM9e2xvYWQ6RXh0LmZvcm0uQWN0aW9uLkxvYWQsc3VibWl0OkV4dC5mb3JtLkFjdGlvbi5TdWJtaXQsZGlyZWN0bG9hZDpFeHQuZm9ybS5BY3Rpb24uRGlyZWN0TG9hZCxkaXJlY3RzdWJtaXQ6RXh0LmZvcm0uQWN0aW9uLkRpcmVjdFN1Ym1pdH07RXh0LmZvcm0uVlR5cGVzPWZ1bmN0aW9uKCl7dmFyIGM9L15bYS16QS1aX10rJC8sZD0vXlthLXpBLVowLTlfXSskLyxiPS9eKFx3KykoW1wtKy5cJ11bXHddKykqQChcd1tcLVx3XSpcLil7MSw1fShbQS1aYS16XSl7Miw2fSQvLGE9LygoKF5odHRwcz8pfCheZnRwKSk6XC9cLyhbXC1cd10rXC4pK1x3ezIsM30oXC9bJVwtXHddKyhcLlx3ezIsfSk/KSooKFtcd1wtXC5cP1xcXC8rQCYjO2B+PSUhXSopKFwuXHd7Mix9KT8pKlwvPykvaTtyZXR1cm57ZW1haWw6ZnVuY3Rpb24oZSl7cmV0dXJuIGIudGVzdChlKX0sZW1haWxUZXh0OidUaGlzIGZpZWxkIHNob3VsZCBiZSBhbiBlLW1haWwgYWRkcmVzcyBpbiB0aGUgZm9ybWF0ICJ1c2VyQGV4YW1wbGUuY29tIicsZW1haWxNYXNrOi9bYS16MC05X1wuXC1cK1wnQF0vaSx1cmw6ZnVuY3Rpb24oZSl7cmV0dXJuIGEudGVzdChlKX0sdXJsVGV4dDonVGhpcyBmaWVsZCBzaG91bGQgYmUgYSBVUkwgaW4gdGhlIGZvcm1hdCAiaHR0cDovL3d3dy5leGFtcGxlLmNvbSInLGFscGhhOmZ1bmN0aW9uKGUpe3JldHVybiBjLnRlc3QoZSl9LGFscGhhVGV4dDoiVGhpcyBmaWVsZCBzaG91bGQgb25seSBjb250YWluIGxldHRlcnMgYW5kIF8iLGFscGhhTWFzazovW2Etel9dL2ksYWxwaGFudW06ZnVuY3Rpb24oZSl7cmV0dXJuIGQudGVzdChlKX0sYWxwaGFudW1UZXh0OiJUaGlzIGZpZWxkIHNob3VsZCBvbmx5IGNvbnRhaW4gbGV0dGVycywgbnVtYmVycyBhbmQgXyIsYWxwaGFudW1NYXNrOi9bYS16MC05X10vaX19KCk7RXh0LmdyaWQuR3JpZFBhbmVsPUV4dC5leHRlbmQoRXh0LlBhbmVsLHthdXRvRXhwYW5kQ29sdW1uOmZhbHNlLGF1dG9FeHBhbmRNYXg6MTAwMCxhdXRvRXhwYW5kTWluOjUwLGNvbHVtbkxpbmVzOmZhbHNlLGRkVGV4dDoiezB9IHNlbGVjdGVkIHJvd3sxfSIsZGVmZXJSb3dSZW5kZXI6dHJ1ZSxlbmFibGVDb2x1bW5IaWRlOnRydWUsZW5hYmxlQ29sdW1uTW92ZTp0cnVlLGVuYWJsZURyYWdEcm9wOmZhbHNlLGVuYWJsZUhkTWVudTp0cnVlLGxvYWRNYXNrOmZhbHNlLG1pbkNvbHVtbldpZHRoOjI1LHN0cmlwZVJvd3M6ZmFsc2UsdHJhY2tNb3VzZU92ZXI6dHJ1ZSxzdGF0ZUV2ZW50czpbImNvbHVtbm1vdmUiLCJjb2x1bW5yZXNpemUiLCJzb3J0Y2hhbmdlIiwiZ3JvdXBjaGFuZ2UiXSx2aWV3Om51bGwsYnViYmxlRXZlbnRzOltdLHJlbmRlcmVkOmZhbHNlLHZpZXdSZWFkeTpmYWxzZSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3MuaW5pdENvbXBvbmVudC5jYWxsKHRoaXMpO2lmKHRoaXMuY29sdW1uTGluZXMpe3RoaXMuY2xzPSh0aGlzLmNsc3x8IiIpKyIgeC1ncmlkLXdpdGgtY29sLWxpbmVzIn10aGlzLmF1dG9TY3JvbGw9ZmFsc2U7dGhpcy5hdXRvV2lkdGg9ZmFsc2U7aWYoRXh0LmlzQXJyYXkodGhpcy5jb2x1bW5zKSl7dGhpcy5jb2xNb2RlbD1uZXcgRXh0LmdyaWQuQ29sdW1uTW9kZWwodGhpcy5jb2x1bW5zKTtkZWxldGUgdGhpcy5jb2x1bW5zfWlmKHRoaXMuZHMpe3RoaXMuc3RvcmU9dGhpcy5kcztkZWxldGUgdGhpcy5kc31pZih0aGlzLmNtKXt0aGlzLmNvbE1vZGVsPXRoaXMuY207ZGVsZXRlIHRoaXMuY219aWYodGhpcy5zbSl7dGhpcy5zZWxNb2RlbD10aGlzLnNtO2RlbGV0ZSB0aGlzLnNtfXRoaXMuc3RvcmU9RXh0LlN0b3JlTWdyLmxvb2t1cCh0aGlzLnN0b3JlKTt0aGlzLmFkZEV2ZW50cygiY2xpY2siLCJkYmxjbGljayIsImNvbnRleHRtZW51IiwibW91c2Vkb3duIiwibW91c2V1cCIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0Iiwia2V5cHJlc3MiLCJrZXlkb3duIiwiY2VsbG1vdXNlZG93biIsInJvd21vdXNlZG93biIsImhlYWRlcm1vdXNlZG93biIsImdyb3VwbW91c2Vkb3duIiwicm93Ym9keW1vdXNlZG93biIsImNvbnRhaW5lcm1vdXNlZG93biIsImNlbGxjbGljayIsImNlbGxkYmxjbGljayIsInJvd2NsaWNrIiwicm93ZGJsY2xpY2siLCJoZWFkZXJjbGljayIsImhlYWRlcmRibGNsaWNrIiwiZ3JvdXBjbGljayIsImdyb3VwZGJsY2xpY2siLCJjb250YWluZXJjbGljayIsImNvbnRhaW5lcmRibGNsaWNrIiwicm93Ym9keWNsaWNrIiwicm93Ym9keWRibGNsaWNrIiwicm93Y29udGV4dG1lbnUiLCJjZWxsY29udGV4dG1lbnUiLCJoZWFkZXJjb250ZXh0bWVudSIsImdyb3VwY29udGV4dG1lbnUiLCJjb250YWluZXJjb250ZXh0bWVudSIsInJvd2JvZHljb250ZXh0bWVudSIsImJvZHlzY3JvbGwiLCJjb2x1bW5yZXNpemUiLCJjb2x1bW5tb3ZlIiwic29ydGNoYW5nZSIsImdyb3VwY2hhbmdlIiwicmVjb25maWd1cmUiLCJ2aWV3cmVhZHkiKX0sb25SZW5kZXI6ZnVuY3Rpb24oZCxhKXtFeHQuZ3JpZC5HcmlkUGFuZWwuc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGU9dGhpcy5nZXRHcmlkRWwoKTt0aGlzLmVsLmFkZENsYXNzKCJ4LWdyaWQtcGFuZWwiKTt0aGlzLm1vbihlLHtzY29wZTp0aGlzLG1vdXNlZG93bjp0aGlzLm9uTW91c2VEb3duLGNsaWNrOnRoaXMub25DbGljayxkYmxjbGljazp0aGlzLm9uRGJsQ2xpY2ssY29udGV4dG1lbnU6dGhpcy5vbkNvbnRleHRNZW51fSk7dGhpcy5yZWxheUV2ZW50cyhlLFsibW91c2Vkb3duIiwibW91c2V1cCIsIm1vdXNlb3ZlciIsIm1vdXNlb3V0Iiwia2V5cHJlc3MiLCJrZXlkb3duIl0pO3ZhciBiPXRoaXMuZ2V0VmlldygpO2IuaW5pdCh0aGlzKTtiLnJlbmRlcigpO3RoaXMuZ2V0U2VsZWN0aW9uTW9kZWwoKS5pbml0KHRoaXMpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO2lmKHRoaXMubG9hZE1hc2spe3RoaXMubG9hZE1hc2s9bmV3IEV4dC5Mb2FkTWFzayh0aGlzLmJ3cmFwLEV4dC5hcHBseSh7c3RvcmU6dGhpcy5zdG9yZX0sdGhpcy5sb2FkTWFzaykpfX0saW5pdFN0YXRlRXZlbnRzOmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3MuaW5pdFN0YXRlRXZlbnRzLmNhbGwodGhpcyk7dGhpcy5tb24odGhpcy5jb2xNb2RlbCwiaGlkZGVuY2hhbmdlIix0aGlzLnNhdmVTdGF0ZSx0aGlzLHtkZWxheToxMDB9KX0sYXBwbHlTdGF0ZTpmdW5jdGlvbihhKXt2YXIgaz10aGlzLmNvbE1vZGVsLGc9YS5jb2x1bW5zLGo9dGhpcy5zdG9yZSxtLGgsbDtpZihnKXtmb3IodmFyIGQ9MCxlPWcubGVuZ3RoO2Q8ZTtkKyspe209Z1tkXTtoPWsuZ2V0Q29sdW1uQnlJZChtLmlkKTtpZihoKXtsPWsuZ2V0SW5kZXhCeUlkKG0uaWQpO2suc2V0U3RhdGUobCx7aGlkZGVuOm0uaGlkZGVuLHdpZHRoOm0ud2lkdGgsc29ydGFibGU6bS5zb3J0YWJsZX0pO2lmKGwhPWQpe2subW92ZUNvbHVtbihsLGQpfX19fWlmKGope209YS5zb3J0O2lmKG0pe2pbai5yZW1vdGVTb3J0PyJzZXREZWZhdWx0U29ydCI6InNvcnQiXShtLmZpZWxkLG0uZGlyZWN0aW9uKX1tPWEuZ3JvdXA7aWYoai5ncm91cEJ5KXtpZihtKXtqLmdyb3VwQnkobSl9ZWxzZXtqLmNsZWFyR3JvdXBpbmcoKX19fXZhciBiPUV4dC5hcHBseSh7fSxhKTtkZWxldGUgYi5jb2x1bW5zO2RlbGV0ZSBiLnNvcnQ7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3MuYXBwbHlTdGF0ZS5jYWxsKHRoaXMsYil9LGdldFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGc9e2NvbHVtbnM6W119LGI9dGhpcy5zdG9yZSxlLGE7Zm9yKHZhciBkPTAsaDsoaD10aGlzLmNvbE1vZGVsLmNvbmZpZ1tkXSk7ZCsrKXtnLmNvbHVtbnNbZF09e2lkOmguaWQsd2lkdGg6aC53aWR0aH07aWYoaC5oaWRkZW4pe2cuY29sdW1uc1tkXS5oaWRkZW49dHJ1ZX1pZihoLnNvcnRhYmxlKXtnLmNvbHVtbnNbZF0uc29ydGFibGU9dHJ1ZX19aWYoYil7ZT1iLmdldFNvcnRTdGF0ZSgpO2lmKGUpe2cuc29ydD1lfWlmKGIuZ2V0R3JvdXBTdGF0ZSl7YT1iLmdldEdyb3VwU3RhdGUoKTtpZihhKXtnLmdyb3VwPWF9fX1yZXR1cm4gZ30sYWZ0ZXJSZW5kZXI6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5HcmlkUGFuZWwuc3VwZXJjbGFzcy5hZnRlclJlbmRlci5jYWxsKHRoaXMpO3ZhciBhPXRoaXMudmlldzt0aGlzLm9uKCJib2R5cmVzaXplIixhLmxheW91dCxhKTthLmxheW91dCh0cnVlKTtpZih0aGlzLmRlZmVyUm93UmVuZGVyKXtpZighdGhpcy5kZWZlclJvd1JlbmRlclRhc2spe3RoaXMuZGVmZXJSb3dSZW5kZXJUYXNrPW5ldyBFeHQudXRpbC5EZWxheWVkVGFzayhhLmFmdGVyUmVuZGVyLHRoaXMudmlldyl9dGhpcy5kZWZlclJvd1JlbmRlclRhc2suZGVsYXkoMTApfWVsc2V7YS5hZnRlclJlbmRlcigpfXRoaXMudmlld1JlYWR5PXRydWV9LHJlY29uZmlndXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5yZW5kZXJlZDtpZihjKXtpZih0aGlzLmxvYWRNYXNrKXt0aGlzLmxvYWRNYXNrLmRlc3Ryb3koKTt0aGlzLmxvYWRNYXNrPW5ldyBFeHQuTG9hZE1hc2sodGhpcy5id3JhcCxFeHQuYXBwbHkoe30se3N0b3JlOmF9LHRoaXMuaW5pdGlhbENvbmZpZy5sb2FkTWFzaykpfX1pZih0aGlzLnZpZXcpe3RoaXMudmlldy5pbml0RGF0YShhLGIpfXRoaXMuc3RvcmU9YTt0aGlzLmNvbE1vZGVsPWI7aWYoYyl7dGhpcy52aWV3LnJlZnJlc2godHJ1ZSl9dGhpcy5maXJlRXZlbnQoInJlY29uZmlndXJlIix0aGlzLGEsYil9LG9uRGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMuZGVmZXJSb3dSZW5kZXJUYXNrJiZ0aGlzLmRlZmVyUm93UmVuZGVyVGFzay5jYW5jZWwpe3RoaXMuZGVmZXJSb3dSZW5kZXJUYXNrLmNhbmNlbCgpfWlmKHRoaXMucmVuZGVyZWQpe0V4dC5kZXN0cm95KHRoaXMudmlldyx0aGlzLmxvYWRNYXNrKX1lbHNle2lmKHRoaXMuc3RvcmUmJnRoaXMuc3RvcmUuYXV0b0Rlc3Ryb3kpe3RoaXMuc3RvcmUuZGVzdHJveSgpfX1FeHQuZGVzdHJveSh0aGlzLmNvbE1vZGVsLHRoaXMuc2VsTW9kZWwpO3RoaXMuc3RvcmU9dGhpcy5zZWxNb2RlbD10aGlzLmNvbE1vZGVsPXRoaXMudmlldz10aGlzLmxvYWRNYXNrPW51bGw7RXh0LmdyaWQuR3JpZFBhbmVsLnN1cGVyY2xhc3Mub25EZXN0cm95LmNhbGwodGhpcyl9LHByb2Nlc3NFdmVudDpmdW5jdGlvbihhLGIpe3RoaXMudmlldy5wcm9jZXNzRXZlbnQoYSxiKX0sb25DbGljazpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NFdmVudCgiY2xpY2siLGEpfSxvbk1vdXNlRG93bjpmdW5jdGlvbihhKXt0aGlzLnByb2Nlc3NFdmVudCgibW91c2Vkb3duIixhKX0sb25Db250ZXh0TWVudTpmdW5jdGlvbihiLGEpe3RoaXMucHJvY2Vzc0V2ZW50KCJjb250ZXh0bWVudSIsYil9LG9uRGJsQ2xpY2s6ZnVuY3Rpb24oYSl7dGhpcy5wcm9jZXNzRXZlbnQoImRibGNsaWNrIixhKX0sd2Fsa0NlbGxzOmZ1bmN0aW9uKGssYyxiLGUsail7dmFyIGk9dGhpcy5jb2xNb2RlbCxnPWkuZ2V0Q29sdW1uQ291bnQoKSxhPXRoaXMuc3RvcmUsaD1hLmdldENvdW50KCksZD10cnVlO2lmKGI8MCl7aWYoYzwwKXtrLS07ZD1mYWxzZX13aGlsZShrPj0wKXtpZighZCl7Yz1nLTF9ZD1mYWxzZTt3aGlsZShjPj0wKXtpZihlLmNhbGwoanx8dGhpcyxrLGMsaSk9PT10cnVlKXtyZXR1cm5bayxjXX1jLS19ay0tfX1lbHNle2lmKGM+PWcpe2srKztkPWZhbHNlfXdoaWxlKGs8aCl7aWYoIWQpe2M9MH1kPWZhbHNlO3doaWxlKGM8Zyl7aWYoZS5jYWxsKGp8fHRoaXMsayxjLGkpPT09dHJ1ZSl7cmV0dXJuW2ssY119YysrfWsrK319cmV0dXJuIG51bGx9LGdldEdyaWRFbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHl9LHN0b3BFZGl0aW5nOkV4dC5lbXB0eUZuLGdldFNlbGVjdGlvbk1vZGVsOmZ1bmN0aW9uKCl7aWYoIXRoaXMuc2VsTW9kZWwpe3RoaXMuc2VsTW9kZWw9bmV3IEV4dC5ncmlkLlJvd1NlbGVjdGlvbk1vZGVsKHRoaXMuZGlzYWJsZVNlbGVjdGlvbj97c2VsZWN0Um93OkV4dC5lbXB0eUZufTpudWxsKX1yZXR1cm4gdGhpcy5zZWxNb2RlbH0sZ2V0U3RvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdG9yZX0sZ2V0Q29sdW1uTW9kZWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xNb2RlbH0sZ2V0VmlldzpmdW5jdGlvbigpe2lmKCF0aGlzLnZpZXcpe3RoaXMudmlldz1uZXcgRXh0LmdyaWQuR3JpZFZpZXcodGhpcy52aWV3Q29uZmlnKX1yZXR1cm4gdGhpcy52aWV3fSxnZXREcmFnRHJvcFRleHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlbE1vZGVsLmdldENvdW50KCk7cmV0dXJuIFN0cmluZy5mb3JtYXQodGhpcy5kZFRleHQsYSxhPT0xPyIiOiJzIil9fSk7RXh0LnJlZygiZ3JpZCIsRXh0LmdyaWQuR3JpZFBhbmVsKTtFeHQuZ3JpZC5QaXZvdEdyaWQ9RXh0LmV4dGVuZChFeHQuZ3JpZC5HcmlkUGFuZWwse2FnZ3JlZ2F0b3I6InN1bSIscmVuZGVyZXI6dW5kZWZpbmVkLGluaXRDb21wb25lbnQ6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5QaXZvdEdyaWQuc3VwZXJjbGFzcy5pbml0Q29tcG9uZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmluaXRBeGVzKCk7dGhpcy5lbmFibGVDb2x1bW5SZXNpemU9ZmFsc2U7dGhpcy52aWV3Q29uZmlnPUV4dC5hcHBseSh0aGlzLnZpZXdDb25maWd8fHt9LHtmb3JjZUZpdDp0cnVlfSk7dGhpcy5jb2xNb2RlbD1uZXcgRXh0LmdyaWQuQ29sdW1uTW9kZWwoe30pfSxnZXRBZ2dyZWdhdG9yOmZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMuYWdncmVnYXRvcj09InN0cmluZyIpe3JldHVybiBFeHQuZ3JpZC5QaXZvdEFnZ3JlZ2F0b3JNZ3IudHlwZXNbdGhpcy5hZ2dyZWdhdG9yXX1lbHNle3JldHVybiB0aGlzLmFnZ3JlZ2F0b3J9fSxzZXRBZ2dyZWdhdG9yOmZ1bmN0aW9uKGEpe3RoaXMuYWdncmVnYXRvcj1hfSxzZXRNZWFzdXJlOmZ1bmN0aW9uKGEpe3RoaXMubWVhc3VyZT1hfSxzZXRMZWZ0QXhpczpmdW5jdGlvbihiLGEpe3RoaXMubGVmdEF4aXM9YjtpZihhKXt0aGlzLnZpZXcucmVmcmVzaCgpfX0sc2V0VG9wQXhpczpmdW5jdGlvbihiLGEpe3RoaXMudG9wQXhpcz1iO2lmKGEpe3RoaXMudmlldy5yZWZyZXNoKCl9fSxpbml0QXhlczpmdW5jdGlvbigpe3ZhciBhPUV4dC5ncmlkLlBpdm90QXhpcztpZighKHRoaXMubGVmdEF4aXMgaW5zdGFuY2VvZiBhKSl7dGhpcy5zZXRMZWZ0QXhpcyhuZXcgYSh7b3JpZW50YXRpb246InZlcnRpY2FsIixkaW1lbnNpb25zOnRoaXMubGVmdEF4aXN8fFtdLHN0b3JlOnRoaXMuc3RvcmV9KSl9aWYoISh0aGlzLnRvcEF4aXMgaW5zdGFuY2VvZiBhKSl7dGhpcy5zZXRUb3BBeGlzKG5ldyBhKHtvcmllbnRhdGlvbjoiaG9yaXpvbnRhbCIsZGltZW5zaW9uczp0aGlzLnRvcEF4aXN8fFtdLHN0b3JlOnRoaXMuc3RvcmV9KSl9fSxleHRyYWN0RGF0YTpmdW5jdGlvbigpe3ZhciBjPXRoaXMuc3RvcmUuZGF0YS5pdGVtcyxzPWMubGVuZ3RoLHE9W10saCxnLGUsZDtpZihzPT0wKXtyZXR1cm5bXX12YXIgbD10aGlzLmxlZnRBeGlzLmdldFR1cGxlcygpLG89bC5sZW5ndGgsbT10aGlzLnRvcEF4aXMuZ2V0VHVwbGVzKCksYT1tLmxlbmd0aCxiPXRoaXMuZ2V0QWdncmVnYXRvcigpO2ZvcihnPTA7ZzxzO2crKyl7aD1jW2ddO2ZvcihlPTA7ZTxvO2UrKyl7cVtlXT1xW2VdfHxbXTtpZihsW2VdLm1hdGNoZXIoaCk9PT10cnVlKXtmb3IoZD0wO2Q8YTtkKyspe3FbZV1bZF09cVtlXVtkXXx8W107aWYobVtkXS5tYXRjaGVyKGgpKXtxW2VdW2RdLnB1c2goaCl9fX19fXZhciBuPXEubGVuZ3RoLHAscjtmb3IoZz0wO2c8bjtnKyspe3I9cVtnXTtwPXIubGVuZ3RoO2ZvcihlPTA7ZTxwO2UrKyl7cVtnXVtlXT1iKHFbZ11bZV0sdGhpcy5tZWFzdXJlKX19cmV0dXJuIHF9LGdldFZpZXc6ZnVuY3Rpb24oKXtpZighdGhpcy52aWV3KXt0aGlzLnZpZXc9bmV3IEV4dC5ncmlkLlBpdm90R3JpZFZpZXcodGhpcy52aWV3Q29uZmlnKX1yZXR1cm4gdGhpcy52aWV3fX0pO0V4dC5yZWcoInBpdm90Z3JpZCIsRXh0LmdyaWQuUGl2b3RHcmlkKTtFeHQuZ3JpZC5QaXZvdEFnZ3JlZ2F0b3JNZ3I9bmV3IEV4dC5BYnN0cmFjdE1hbmFnZXIoKTtFeHQuZ3JpZC5QaXZvdEFnZ3JlZ2F0b3JNZ3IucmVnaXN0ZXJUeXBlKCJzdW0iLGZ1bmN0aW9uKGEsYyl7dmFyIGU9YS5sZW5ndGgsZD0wLGI7Zm9yKGI9MDtiPGU7YisrKXtkKz1hW2JdLmdldChjKX1yZXR1cm4gZH0pO0V4dC5ncmlkLlBpdm90QWdncmVnYXRvck1nci5yZWdpc3RlclR5cGUoImF2ZyIsZnVuY3Rpb24oYSxjKXt2YXIgZT1hLmxlbmd0aCxkPTAsYjtmb3IoYj0wO2I8ZTtiKyspe2QrPWFbYl0uZ2V0KGMpfXJldHVybihkL2UpfHwibi9hIn0pO0V4dC5ncmlkLlBpdm90QWdncmVnYXRvck1nci5yZWdpc3RlclR5cGUoIm1pbiIsZnVuY3Rpb24oYSxjKXt2YXIgZT1bXSxkPWEubGVuZ3RoLGI7Zm9yKGI9MDtiPGQ7YisrKXtlLnB1c2goYVtiXS5nZXQoYykpfXJldHVybiBNYXRoLm1pbi5hcHBseSh0aGlzLGUpfHwibi9hIn0pO0V4dC5ncmlkLlBpdm90QWdncmVnYXRvck1nci5yZWdpc3RlclR5cGUoIm1heCIsZnVuY3Rpb24oYSxjKXt2YXIgZT1bXSxkPWEubGVuZ3RoLGI7Zm9yKGI9MDtiPGQ7YisrKXtlLnB1c2goYVtiXS5nZXQoYykpfXJldHVybiBNYXRoLm1heC5hcHBseSh0aGlzLGUpfHwibi9hIn0pO0V4dC5ncmlkLlBpdm90QWdncmVnYXRvck1nci5yZWdpc3RlclR5cGUoImNvdW50IixmdW5jdGlvbihhLGIpe3JldHVybiBhLmxlbmd0aH0pO0V4dC5ncmlkLkdyaWRWaWV3PUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7ZGVmZXJFbXB0eVRleHQ6dHJ1ZSxzY3JvbGxPZmZzZXQ6dW5kZWZpbmVkLGF1dG9GaWxsOmZhbHNlLGZvcmNlRml0OmZhbHNlLHNvcnRDbGFzc2VzOlsic29ydC1hc2MiLCJzb3J0LWRlc2MiXSxzb3J0QXNjVGV4dDoiU29ydCBBc2NlbmRpbmciLHNvcnREZXNjVGV4dDoiU29ydCBEZXNjZW5kaW5nIixjb2x1bW5zVGV4dDoiQ29sdW1ucyIsc2VsZWN0ZWRSb3dDbGFzczoieC1ncmlkMy1yb3ctc2VsZWN0ZWQiLGJvcmRlcldpZHRoOjIsdGRDbGFzczoieC1ncmlkMy1jZWxsIixoZENsczoieC1ncmlkMy1oZCIsbWFya0RpcnR5OnRydWUsY2VsbFNlbGVjdG9yRGVwdGg6NCxyb3dTZWxlY3RvckRlcHRoOjEwLHJvd0JvZHlTZWxlY3RvckRlcHRoOjEwLGNlbGxTZWxlY3RvcjoidGQueC1ncmlkMy1jZWxsIixyb3dTZWxlY3RvcjoiZGl2LngtZ3JpZDMtcm93Iixyb3dCb2R5U2VsZWN0b3I6ImRpdi54LWdyaWQzLXJvdy1ib2R5IixmaXJzdFJvd0NsczoieC1ncmlkMy1yb3ctZmlyc3QiLGxhc3RSb3dDbHM6IngtZ3JpZDMtcm93LWxhc3QiLHJvd0Nsc1JlOi8oPzpefFxzKyl4LWdyaWQzLXJvdy0oZmlyc3R8bGFzdHxhbHQpKD86XHMrfCQpL2csaGVhZGVyTWVudU9wZW5DbHM6IngtZ3JpZDMtaGQtbWVudS1vcGVuIixyb3dPdmVyQ2xzOiJ4LWdyaWQzLXJvdy1vdmVyIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLmFkZEV2ZW50cygiYmVmb3Jlcm93cmVtb3ZlZCIsImJlZm9yZXJvd3NpbnNlcnRlZCIsImJlZm9yZXJlZnJlc2giLCJyb3dyZW1vdmVkIiwicm93c2luc2VydGVkIiwicm93dXBkYXRlZCIsInJlZnJlc2giKTtFeHQuZ3JpZC5HcmlkVmlldy5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9LG1hc3RlclRwbDpuZXcgRXh0LlRlbXBsYXRlKCc8ZGl2IGNsYXNzPSJ4LWdyaWQzIiBoaWRlZm9jdXM9InRydWUiPicsJzxkaXYgY2xhc3M9IngtZ3JpZDMtdmlld3BvcnQiPicsJzxkaXYgY2xhc3M9IngtZ3JpZDMtaGVhZGVyIj4nLCc8ZGl2IGNsYXNzPSJ4LWdyaWQzLWhlYWRlci1pbm5lciI+JywnPGRpdiBjbGFzcz0ieC1ncmlkMy1oZWFkZXItb2Zmc2V0IiBzdHlsZT0ie29zdHlsZX0iPntoZWFkZXJ9PC9kaXY+JywiPC9kaXY+IiwnPGRpdiBjbGFzcz0ieC1jbGVhciI+PC9kaXY+JywiPC9kaXY+IiwnPGRpdiBjbGFzcz0ieC1ncmlkMy1zY3JvbGxlciI+JywnPGRpdiBjbGFzcz0ieC1ncmlkMy1ib2R5IiBzdHlsZT0ie2JzdHlsZX0iPntib2R5fTwvZGl2PicsJzxhIGhyZWY9IiMiIGNsYXNzPSJ4LWdyaWQzLWZvY3VzIiB0YWJJbmRleD0iLTEiPjwvYT4nLCI8L2Rpdj4iLCI8L2Rpdj4iLCc8ZGl2IGNsYXNzPSJ4LWdyaWQzLXJlc2l6ZS1tYXJrZXIiPiYjMTYwOzwvZGl2PicsJzxkaXYgY2xhc3M9IngtZ3JpZDMtcmVzaXplLXByb3h5Ij4mIzE2MDs8L2Rpdj4nLCI8L2Rpdj4iKSxoZWFkZXJUcGw6bmV3IEV4dC5UZW1wbGF0ZSgnPHRhYmxlIGJvcmRlcj0iMCIgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiBzdHlsZT0ie3RzdHlsZX0iPicsIjx0aGVhZD4iLCc8dHIgY2xhc3M9IngtZ3JpZDMtaGQtcm93Ij57Y2VsbHN9PC90cj4nLCI8L3RoZWFkPiIsIjwvdGFibGU+IiksYm9keVRwbDpuZXcgRXh0LlRlbXBsYXRlKCJ7cm93c30iKSxjZWxsVHBsOm5ldyBFeHQuVGVtcGxhdGUoJzx0ZCBjbGFzcz0ieC1ncmlkMy1jb2wgeC1ncmlkMy1jZWxsIHgtZ3JpZDMtdGQte2lkfSB7Y3NzfSIgc3R5bGU9IntzdHlsZX0iIHRhYkluZGV4PSIwIiB7Y2VsbEF0dHJ9PicsJzxkaXYgY2xhc3M9IngtZ3JpZDMtY2VsbC1pbm5lciB4LWdyaWQzLWNvbC17aWR9IiB1bnNlbGVjdGFibGU9Im9uIiB7YXR0cn0+e3ZhbHVlfTwvZGl2PicsIjwvdGQ+IiksaW5pdFRlbXBsYXRlczpmdW5jdGlvbigpe3ZhciBjPXRoaXMudGVtcGxhdGVzfHx7fSxkLGIsZz1uZXcgRXh0LlRlbXBsYXRlKCc8dGQgY2xhc3M9IngtZ3JpZDMtaGQgeC1ncmlkMy1jZWxsIHgtZ3JpZDMtdGQte2lkfSB7Y3NzfSIgc3R5bGU9IntzdHlsZX0iPicsJzxkaXYge3Rvb2x0aXB9IHthdHRyfSBjbGFzcz0ieC1ncmlkMy1oZC1pbm5lciB4LWdyaWQzLWhkLXtpZH0iIHVuc2VsZWN0YWJsZT0ib24iIHN0eWxlPSJ7aXN0eWxlfSI+Jyx0aGlzLmdyaWQuZW5hYmxlSGRNZW51Pyc8YSBjbGFzcz0ieC1ncmlkMy1oZC1idG4iIGhyZWY9IiMiPjwvYT4nOiIiLCJ7dmFsdWV9IiwnPGltZyBhbHQ9IiIgY2xhc3M9IngtZ3JpZDMtc29ydC1pY29uIiBzcmM9IicsRXh0LkJMQU5LX0lNQUdFX1VSTCwnIiAvPicsIjwvZGl2PiIsIjwvdGQ+IiksYT1bJzx0ciBjbGFzcz0ieC1ncmlkMy1yb3ctYm9keS10ciIgc3R5bGU9Intib2R5U3R5bGV9Ij4nLCc8dGQgY29sc3Bhbj0ie2NvbHN9IiBjbGFzcz0ieC1ncmlkMy1ib2R5LWNlbGwiIHRhYkluZGV4PSIwIiBoaWRlZm9jdXM9Im9uIj4nLCc8ZGl2IGNsYXNzPSJ4LWdyaWQzLXJvdy1ib2R5Ij57Ym9keX08L2Rpdj4nLCI8L3RkPiIsIjwvdHI+Il0uam9pbigiIiksZT1bJzx0YWJsZSBjbGFzcz0ieC1ncmlkMy1yb3ctdGFibGUiIGJvcmRlcj0iMCIgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiBzdHlsZT0ie3RzdHlsZX0iPicsIjx0Ym9keT4iLCI8dHI+e2NlbGxzfTwvdHI+Iix0aGlzLmVuYWJsZVJvd0JvZHk/YToiIiwiPC90Ym9keT4iLCI8L3RhYmxlPiJdLmpvaW4oIiIpO0V4dC5hcHBseUlmKGMse2hjZWxsOmcsY2VsbDp0aGlzLmNlbGxUcGwsYm9keTp0aGlzLmJvZHlUcGwsaGVhZGVyOnRoaXMuaGVhZGVyVHBsLG1hc3Rlcjp0aGlzLm1hc3RlclRwbCxyb3c6bmV3IEV4dC5UZW1wbGF0ZSgnPGRpdiBjbGFzcz0ieC1ncmlkMy1yb3cge2FsdH0iIHN0eWxlPSJ7dHN0eWxlfSI+JytlKyI8L2Rpdj4iKSxyb3dJbm5lcjpuZXcgRXh0LlRlbXBsYXRlKGUpfSk7Zm9yKGIgaW4gYyl7ZD1jW2JdO2lmKGQmJkV4dC5pc0Z1bmN0aW9uKGQuY29tcGlsZSkmJiFkLmNvbXBpbGVkKXtkLmRpc2FibGVGb3JtYXRzPXRydWU7ZC5jb21waWxlKCl9fXRoaXMudGVtcGxhdGVzPWM7dGhpcy5jb2xSZT1uZXcgUmVnRXhwKCJ4LWdyaWQzLXRkLShbXlxcc10rKSIsIiIpfSxmbHk6ZnVuY3Rpb24oYSl7aWYoIXRoaXMuX2ZseXdlaWdodCl7dGhpcy5fZmx5d2VpZ2h0PW5ldyBFeHQuRWxlbWVudC5GbHl3ZWlnaHQoZG9jdW1lbnQuYm9keSl9dGhpcy5fZmx5d2VpZ2h0LmRvbT1hO3JldHVybiB0aGlzLl9mbHl3ZWlnaHR9LGdldEVkaXRvclBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNjcm9sbGVyLmRvbX0saW5pdEVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGI9RXh0LkVsZW1lbnQsZD1FeHQuZ2V0KHRoaXMuZ3JpZC5nZXRHcmlkRWwoKS5kb20uZmlyc3RDaGlsZCksZT1uZXcgYihkLmNoaWxkKCJkaXYueC1ncmlkMy12aWV3cG9ydCIpKSxjPW5ldyBiKGUuY2hpbGQoImRpdi54LWdyaWQzLWhlYWRlciIpKSxhPW5ldyBiKGUuY2hpbGQoImRpdi54LWdyaWQzLXNjcm9sbGVyIikpO2lmKHRoaXMuZ3JpZC5oaWRlSGVhZGVycyl7Yy5zZXREaXNwbGF5ZWQoZmFsc2UpfWlmKHRoaXMuZm9yY2VGaXQpe2Euc2V0U3R5bGUoIm92ZXJmbG93LXgiLCJoaWRkZW4iKX1FeHQuYXBwbHkodGhpcyx7ZWw6ZCxtYWluV3JhcDplLHNjcm9sbGVyOmEsbWFpbkhkOmMsaW5uZXJIZDpjLmNoaWxkKCJkaXYueC1ncmlkMy1oZWFkZXItaW5uZXIiKS5kb20sbWFpbkJvZHk6bmV3IGIoYi5mbHkoYSkuY2hpbGQoImRpdi54LWdyaWQzLWJvZHkiKSksZm9jdXNFbDpuZXcgYihiLmZseShhKS5jaGlsZCgiYSIpKSxyZXNpemVNYXJrZXI6bmV3IGIoZC5jaGlsZCgiZGl2LngtZ3JpZDMtcmVzaXplLW1hcmtlciIpKSxyZXNpemVQcm94eTpuZXcgYihkLmNoaWxkKCJkaXYueC1ncmlkMy1yZXNpemUtcHJveHkiKSl9KTt0aGlzLmZvY3VzRWwuc3dhbGxvd0V2ZW50KCJjbGljayIsdHJ1ZSl9LGdldFJvd3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNSb3dzKCk/dGhpcy5tYWluQm9keS5kb20uY2hpbGROb2RlczpbXX0sZmluZENlbGw6ZnVuY3Rpb24oYSl7aWYoIWEpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5mbHkoYSkuZmluZFBhcmVudCh0aGlzLmNlbGxTZWxlY3Rvcix0aGlzLmNlbGxTZWxlY3RvckRlcHRoKX0sZmluZENlbGxJbmRleDpmdW5jdGlvbihkLGMpe3ZhciBiPXRoaXMuZmluZENlbGwoZCksYTtpZihiKXthPXRoaXMuZmx5KGIpLmhhc0NsYXNzKGMpO2lmKCFjfHxhKXtyZXR1cm4gdGhpcy5nZXRDZWxsSW5kZXgoYil9fXJldHVybiBmYWxzZX0sZ2V0Q2VsbEluZGV4OmZ1bmN0aW9uKGIpe2lmKGIpe3ZhciBhPWIuY2xhc3NOYW1lLm1hdGNoKHRoaXMuY29sUmUpO2lmKGEmJmFbMV0pe3JldHVybiB0aGlzLmNtLmdldEluZGV4QnlJZChhWzFdKX19cmV0dXJuIGZhbHNlfSxmaW5kSGVhZGVyQ2VsbDpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmZpbmRDZWxsKGIpO3JldHVybiBhJiZ0aGlzLmZseShhKS5oYXNDbGFzcyh0aGlzLmhkQ2xzKT9hOm51bGx9LGZpbmRIZWFkZXJJbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5maW5kQ2VsbEluZGV4KGEsdGhpcy5oZENscyl9LGZpbmRSb3c6ZnVuY3Rpb24oYSl7aWYoIWEpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5mbHkoYSkuZmluZFBhcmVudCh0aGlzLnJvd1NlbGVjdG9yLHRoaXMucm93U2VsZWN0b3JEZXB0aCl9LGZpbmRSb3dJbmRleDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmZpbmRSb3coYSk7cmV0dXJuIGI/Yi5yb3dJbmRleDpmYWxzZX0sZmluZFJvd0JvZHk6ZnVuY3Rpb24oYSl7aWYoIWEpe3JldHVybiBmYWxzZX1yZXR1cm4gdGhpcy5mbHkoYSkuZmluZFBhcmVudCh0aGlzLnJvd0JvZHlTZWxlY3Rvcix0aGlzLnJvd0JvZHlTZWxlY3RvckRlcHRoKX0sZ2V0Um93OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFJvd3MoKVthXX0sZ2V0Q2VsbDpmdW5jdGlvbihiLGEpe3JldHVybiBFeHQuZmx5KHRoaXMuZ2V0Um93KGIpKS5xdWVyeSh0aGlzLmNlbGxTZWxlY3RvcilbYV19LGdldEhlYWRlckNlbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubWFpbkhkLmRvbS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKVthXX0sYWRkUm93Q2xhc3M6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLmdldFJvdyhiKTtpZihjKXt0aGlzLmZseShjKS5hZGRDbGFzcyhhKX19LHJlbW92ZVJvd0NsYXNzOmZ1bmN0aW9uKGMsYSl7dmFyIGI9dGhpcy5nZXRSb3coYyk7aWYoYil7dGhpcy5mbHkoYikucmVtb3ZlQ2xhc3MoYSl9fSxyZW1vdmVSb3c6ZnVuY3Rpb24oYSl7RXh0LnJlbW92ZU5vZGUodGhpcy5nZXRSb3coYSkpO3RoaXMuc3luY0ZvY3VzRWwoYSl9LHJlbW92ZVJvd3M6ZnVuY3Rpb24oYyxhKXt2YXIgYj10aGlzLm1haW5Cb2R5LmRvbSxkO2ZvcihkPWM7ZDw9YTtkKyspe0V4dC5yZW1vdmVOb2RlKGIuY2hpbGROb2Rlc1tjXSl9dGhpcy5zeW5jRm9jdXNFbChjKX0sZ2V0U2Nyb2xsU3RhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNjcm9sbGVyLmRvbTtyZXR1cm57bGVmdDphLnNjcm9sbExlZnQsdG9wOmEuc2Nyb2xsVG9wfX0scmVzdG9yZVNjcm9sbDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNjcm9sbGVyLmRvbTtiLnNjcm9sbExlZnQ9YS5sZWZ0O2Iuc2Nyb2xsVG9wPWEudG9wfSxzY3JvbGxUb1RvcDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2Nyb2xsZXIuZG9tO2Euc2Nyb2xsVG9wPTA7YS5zY3JvbGxMZWZ0PTB9LHN5bmNTY3JvbGw6ZnVuY3Rpb24oKXt0aGlzLnN5bmNIZWFkZXJTY3JvbGwoKTt2YXIgYT10aGlzLnNjcm9sbGVyLmRvbTt0aGlzLmdyaWQuZmlyZUV2ZW50KCJib2R5c2Nyb2xsIixhLnNjcm9sbExlZnQsYS5zY3JvbGxUb3ApfSxzeW5jSGVhZGVyU2Nyb2xsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pbm5lckhkLGI9dGhpcy5zY3JvbGxlci5kb20uc2Nyb2xsTGVmdDthLnNjcm9sbExlZnQ9YjthLnNjcm9sbExlZnQ9Yn0sdXBkYXRlU29ydEljb246ZnVuY3Rpb24oZCxjKXt2YXIgYT10aGlzLnNvcnRDbGFzc2VzLGI9YVtjPT0iREVTQyI/MTowXSxlPXRoaXMubWFpbkhkLnNlbGVjdCgidGQiKS5yZW1vdmVDbGFzcyhhKTtlLml0ZW0oZCkuYWRkQ2xhc3MoYil9LHVwZGF0ZUFsbENvbHVtbldpZHRoczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0VG90YWxXaWR0aCgpLGs9dGhpcy5jbS5nZXRDb2x1bW5Db3VudCgpLG09dGhpcy5nZXRSb3dzKCksZz1tLmxlbmd0aCxiPVtdLGwsYSxoLGQsYztmb3IoZD0wO2Q8aztkKyspe2JbZF09dGhpcy5nZXRDb2x1bW5XaWR0aChkKTt0aGlzLmdldEhlYWRlckNlbGwoZCkuc3R5bGUud2lkdGg9YltkXX10aGlzLnVwZGF0ZUhlYWRlcldpZHRoKCk7Zm9yKGQ9MDtkPGc7ZCsrKXtsPW1bZF07bC5zdHlsZS53aWR0aD1lO2E9bC5maXJzdENoaWxkO2lmKGEpe2Euc3R5bGUud2lkdGg9ZTtoPWEucm93c1swXTtmb3IoYz0wO2M8aztjKyspe2guY2hpbGROb2Rlc1tjXS5zdHlsZS53aWR0aD1iW2NdfX19dGhpcy5vbkFsbENvbHVtbldpZHRoc1VwZGF0ZWQoYixlKX0sdXBkYXRlQ29sdW1uV2lkdGg6ZnVuY3Rpb24oZCxiKXt2YXIgYz10aGlzLmdldENvbHVtbldpZHRoKGQpLGo9dGhpcy5nZXRUb3RhbFdpZHRoKCksaD10aGlzLmdldEhlYWRlckNlbGwoZCksYT10aGlzLmdldFJvd3MoKSxlPWEubGVuZ3RoLGwsZyxrO3RoaXMudXBkYXRlSGVhZGVyV2lkdGgoKTtoLnN0eWxlLndpZHRoPWM7Zm9yKGc9MDtnPGU7ZysrKXtsPWFbZ107az1sLmZpcnN0Q2hpbGQ7bC5zdHlsZS53aWR0aD1qO2lmKGspe2suc3R5bGUud2lkdGg9ajtrLnJvd3NbMF0uY2hpbGROb2Rlc1tkXS5zdHlsZS53aWR0aD1jfX10aGlzLm9uQ29sdW1uV2lkdGhVcGRhdGVkKGQsYyxqKX0sdXBkYXRlQ29sdW1uSGlkZGVuOmZ1bmN0aW9uKGIsail7dmFyIGg9dGhpcy5nZXRUb3RhbFdpZHRoKCksaz1qPyJub25lIjoiIixnPXRoaXMuZ2V0SGVhZGVyQ2VsbChiKSxhPXRoaXMuZ2V0Um93cygpLGQ9YS5sZW5ndGgsbCxjLGU7dGhpcy51cGRhdGVIZWFkZXJXaWR0aCgpO2cuc3R5bGUuZGlzcGxheT1rO2ZvcihlPTA7ZTxkO2UrKyl7bD1hW2VdO2wuc3R5bGUud2lkdGg9aDtjPWwuZmlyc3RDaGlsZDtpZihjKXtjLnN0eWxlLndpZHRoPWg7Yy5yb3dzWzBdLmNoaWxkTm9kZXNbYl0uc3R5bGUuZGlzcGxheT1rfX10aGlzLm9uQ29sdW1uSGlkZGVuVXBkYXRlZChiLGosaCk7ZGVsZXRlIHRoaXMubGFzdFZpZXdXaWR0aDt0aGlzLmxheW91dCgpfSxkb1JlbmRlcjpmdW5jdGlvbihkLHYsbSxhLHIsdCl7dmFyIGg9dGhpcy50ZW1wbGF0ZXMsYz1oLmNlbGwseT1oLnJvdyxvPXItMSxiPSJ3aWR0aDoiK3RoaXMuZ2V0VG90YWxXaWR0aCgpKyI7IixrPVtdLGw9W10sbj17dHN0eWxlOmJ9LHE9e30sdz12Lmxlbmd0aCx4LGcsZSx1LHMscDtmb3Iocz0wO3M8dztzKyspe2U9dltzXTtsPVtdO3A9cythO2Zvcih1PTA7dTxyO3UrKyl7Zz1kW3VdO3EuaWQ9Zy5pZDtxLmNzcz11PT09MD8ieC1ncmlkMy1jZWxsLWZpcnN0ICI6KHU9PW8/IngtZ3JpZDMtY2VsbC1sYXN0ICI6IiIpO3EuYXR0cj1xLmNlbGxBdHRyPSIiO3Euc3R5bGU9Zy5zdHlsZTtxLnZhbHVlPWcucmVuZGVyZXIuY2FsbChnLnNjb3BlLGUuZGF0YVtnLm5hbWVdLHEsZSxwLHUsbSk7aWYoRXh0LmlzRW1wdHkocS52YWx1ZSkpe3EudmFsdWU9IiYjMTYwOyJ9aWYodGhpcy5tYXJrRGlydHkmJmUuZGlydHkmJnR5cGVvZiBlLm1vZGlmaWVkW2cubmFtZV0hPSJ1bmRlZmluZWQiKXtxLmNzcys9IiB4LWdyaWQzLWRpcnR5LWNlbGwifWxbbC5sZW5ndGhdPWMuYXBwbHkocSl9eD1bXTtpZih0JiYoKHArMSklMj09PTApKXt4WzBdPSJ4LWdyaWQzLXJvdy1hbHQifWlmKGUuZGlydHkpe3hbMV09IiB4LWdyaWQzLWRpcnR5LXJvdyJ9bi5jb2xzPXI7aWYodGhpcy5nZXRSb3dDbGFzcyl7eFsyXT10aGlzLmdldFJvd0NsYXNzKGUscCxuLG0pfW4uYWx0PXguam9pbigiICIpO24uY2VsbHM9bC5qb2luKCIiKTtrW2subGVuZ3RoXT15LmFwcGx5KG4pfXJldHVybiBrLmpvaW4oIiIpfSxwcm9jZXNzUm93czpmdW5jdGlvbihhLGcpe2lmKCF0aGlzLmRzfHx0aGlzLmRzLmdldENvdW50KCk8MSl7cmV0dXJufXZhciBkPXRoaXMuZ2V0Um93cygpLGM9ZC5sZW5ndGgsZSxiO2c9Z3x8IXRoaXMuZ3JpZC5zdHJpcGVSb3dzO2E9YXx8MDtmb3IoYj0wO2I8YztiKyspe2U9ZFtiXTtpZihlKXtlLnJvd0luZGV4PWI7aWYoIWcpe2UuY2xhc3NOYW1lPWUuY2xhc3NOYW1lLnJlcGxhY2UodGhpcy5yb3dDbHNSZSwiICIpO2lmKChiKzEpJTI9PT0wKXtlLmNsYXNzTmFtZSs9IiB4LWdyaWQzLXJvdy1hbHQifX19fWlmKGE9PT0wKXtFeHQuZmx5KGRbMF0pLmFkZENsYXNzKHRoaXMuZmlyc3RSb3dDbHMpfUV4dC5mbHkoZFtjLTFdKS5hZGRDbGFzcyh0aGlzLmxhc3RSb3dDbHMpfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLmRzfHwhdGhpcy5jbSl7cmV0dXJufXRoaXMubWFpbkJvZHkuZG9tLmlubmVySFRNTD10aGlzLnJlbmRlckJvZHkoKXx8IiYjMTYwOyI7dGhpcy5wcm9jZXNzUm93cygwLHRydWUpO2lmKHRoaXMuZGVmZXJFbXB0eVRleHQhPT10cnVlKXt0aGlzLmFwcGx5RW1wdHlUZXh0KCl9dGhpcy5ncmlkLmZpcmVFdmVudCgidmlld3JlYWR5Iix0aGlzLmdyaWQpfSxhZnRlclJlbmRlclVJOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ncmlkO3RoaXMuaW5pdEVsZW1lbnRzKCk7RXh0LmZseSh0aGlzLmlubmVySGQpLm9uKCJjbGljayIsdGhpcy5oYW5kbGVIZERvd24sdGhpcyk7dGhpcy5tYWluSGQub24oe3Njb3BlOnRoaXMsbW91c2VvdmVyOnRoaXMuaGFuZGxlSGRPdmVyLG1vdXNlb3V0OnRoaXMuaGFuZGxlSGRPdXQsbW91c2Vtb3ZlOnRoaXMuaGFuZGxlSGRNb3ZlfSk7dGhpcy5zY3JvbGxlci5vbigic2Nyb2xsIix0aGlzLnN5bmNTY3JvbGwsdGhpcyk7aWYoYS5lbmFibGVDb2x1bW5SZXNpemUhPT1mYWxzZSl7dGhpcy5zcGxpdFpvbmU9bmV3IEV4dC5ncmlkLkdyaWRWaWV3LlNwbGl0RHJhZ1pvbmUoYSx0aGlzLm1haW5IZC5kb20pfWlmKGEuZW5hYmxlQ29sdW1uTW92ZSl7dGhpcy5jb2x1bW5EcmFnPW5ldyBFeHQuZ3JpZC5HcmlkVmlldy5Db2x1bW5EcmFnWm9uZShhLHRoaXMuaW5uZXJIZCk7dGhpcy5jb2x1bW5Ecm9wPW5ldyBFeHQuZ3JpZC5IZWFkZXJEcm9wWm9uZShhLHRoaXMubWFpbkhkLmRvbSl9aWYoYS5lbmFibGVIZE1lbnUhPT1mYWxzZSl7dGhpcy5obWVudT1uZXcgRXh0Lm1lbnUuTWVudSh7aWQ6YS5pZCsiLWhjdHgifSk7dGhpcy5obWVudS5hZGQoe2l0ZW1JZDoiYXNjIix0ZXh0OnRoaXMuc29ydEFzY1RleHQsY2xzOiJ4Zy1obWVudS1zb3J0LWFzYyJ9LHtpdGVtSWQ6ImRlc2MiLHRleHQ6dGhpcy5zb3J0RGVzY1RleHQsY2xzOiJ4Zy1obWVudS1zb3J0LWRlc2MifSk7aWYoYS5lbmFibGVDb2x1bW5IaWRlIT09ZmFsc2Upe3RoaXMuY29sTWVudT1uZXcgRXh0Lm1lbnUuTWVudSh7aWQ6YS5pZCsiLWhjb2xzLW1lbnUifSk7dGhpcy5jb2xNZW51Lm9uKHtzY29wZTp0aGlzLGJlZm9yZXNob3c6dGhpcy5iZWZvcmVDb2xNZW51U2hvdyxpdGVtY2xpY2s6dGhpcy5oYW5kbGVIZE1lbnVDbGlja30pO3RoaXMuaG1lbnUuYWRkKCItIix7aXRlbUlkOiJjb2x1bW5zIixoaWRlT25DbGljazpmYWxzZSx0ZXh0OnRoaXMuY29sdW1uc1RleHQsbWVudTp0aGlzLmNvbE1lbnUsaWNvbkNsczoieC1jb2xzLWljb24ifSl9dGhpcy5obWVudS5vbigiaXRlbWNsaWNrIix0aGlzLmhhbmRsZUhkTWVudUNsaWNrLHRoaXMpfWlmKGEudHJhY2tNb3VzZU92ZXIpe3RoaXMubWFpbkJvZHkub24oe3Njb3BlOnRoaXMsbW91c2VvdmVyOnRoaXMub25Sb3dPdmVyLG1vdXNlb3V0OnRoaXMub25Sb3dPdXR9KX1pZihhLmVuYWJsZURyYWdEcm9wfHxhLmVuYWJsZURyYWcpe3RoaXMuZHJhZ1pvbmU9bmV3IEV4dC5ncmlkLkdyaWREcmFnWm9uZShhLHtkZEdyb3VwOmEuZGRHcm91cHx8IkdyaWRERCJ9KX10aGlzLnVwZGF0ZUhlYWRlclNvcnRTdGF0ZSgpfSxyZW5kZXJVSTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudGVtcGxhdGVzO3JldHVybiBhLm1hc3Rlci5hcHBseSh7Ym9keTphLmJvZHkuYXBwbHkoe3Jvd3M6IiYjMTYwOyJ9KSxoZWFkZXI6dGhpcy5yZW5kZXJIZWFkZXJzKCksb3N0eWxlOiJ3aWR0aDoiK3RoaXMuZ2V0T2Zmc2V0V2lkdGgoKSsiOyIsYnN0eWxlOiJ3aWR0aDoiK3RoaXMuZ2V0VG90YWxXaWR0aCgpKyI7In0pfSxwcm9jZXNzRXZlbnQ6ZnVuY3Rpb24oYixoKXt2YXIgaT1oLmdldFRhcmdldCgpLGE9dGhpcy5ncmlkLGQ9dGhpcy5maW5kSGVhZGVySW5kZXgoaSksayxqLGMsZzthLmZpcmVFdmVudChiLGgpO2lmKGQhPT1mYWxzZSl7YS5maXJlRXZlbnQoImhlYWRlciIrYixhLGQsaCl9ZWxzZXtrPXRoaXMuZmluZFJvd0luZGV4KGkpO2lmKGshPT1mYWxzZSl7aj10aGlzLmZpbmRDZWxsSW5kZXgoaSk7aWYoaiE9PWZhbHNlKXtjPWEuY29sTW9kZWwuZ2V0Q29sdW1uQXQoaik7aWYoYS5maXJlRXZlbnQoImNlbGwiK2IsYSxrLGosaCkhPT1mYWxzZSl7aWYoIWN8fChjLnByb2Nlc3NFdmVudCYmKGMucHJvY2Vzc0V2ZW50KGIsaCxhLGssaikhPT1mYWxzZSkpKXthLmZpcmVFdmVudCgicm93IitiLGEsayxoKX19fWVsc2V7aWYoYS5maXJlRXZlbnQoInJvdyIrYixhLGssaCkhPT1mYWxzZSl7KGc9dGhpcy5maW5kUm93Qm9keShpKSkmJmEuZmlyZUV2ZW50KCJyb3dib2R5IitiLGEsayxoKX19fWVsc2V7YS5maXJlRXZlbnQoImNvbnRhaW5lciIrYixhLGgpfX19LGxheW91dDpmdW5jdGlvbihqKXtpZighdGhpcy5tYWluQm9keSl7cmV0dXJufXZhciBhPXRoaXMuZ3JpZCxkPWEuZ2V0R3JpZEVsKCksYz1kLmdldFNpemUodHJ1ZSksaT1jLndpZHRoLGI9Yy5oZWlnaHQsaD10aGlzLnNjcm9sbGVyLGcsZSxrO2lmKGk8MjB8fGI8MjApe3JldHVybn1pZihhLmF1dG9IZWlnaHQpe2c9aC5kb20uc3R5bGU7Zy5vdmVyZmxvdz0idmlzaWJsZSI7aWYoRXh0LmlzV2ViS2l0KXtnLnBvc2l0aW9uPSJzdGF0aWMifX1lbHNle3RoaXMuZWwuc2V0U2l6ZShpLGIpO2U9dGhpcy5tYWluSGQuZ2V0SGVpZ2h0KCk7az1iLWU7aC5zZXRTaXplKGksayk7aWYodGhpcy5pbm5lckhkKXt0aGlzLmlubmVySGQuc3R5bGUud2lkdGg9KGkpKyJweCJ9fWlmKHRoaXMuZm9yY2VGaXR8fChqPT09dHJ1ZSYmdGhpcy5hdXRvRmlsbCkpe2lmKHRoaXMubGFzdFZpZXdXaWR0aCE9aSl7dGhpcy5maXRDb2x1bW5zKGZhbHNlLGZhbHNlKTt0aGlzLmxhc3RWaWV3V2lkdGg9aX19ZWxzZXt0aGlzLmF1dG9FeHBhbmQoKTt0aGlzLnN5bmNIZWFkZXJTY3JvbGwoKX10aGlzLm9uTGF5b3V0KGksayl9LG9uTGF5b3V0OmZ1bmN0aW9uKGEsYil7fSxvbkNvbHVtbldpZHRoVXBkYXRlZDpmdW5jdGlvbihjLGEsYil7fSxvbkFsbENvbHVtbldpZHRoc1VwZGF0ZWQ6ZnVuY3Rpb24oYSxiKXt9LG9uQ29sdW1uSGlkZGVuVXBkYXRlZDpmdW5jdGlvbihiLGMsYSl7fSx1cGRhdGVDb2x1bW5UZXh0OmZ1bmN0aW9uKGEsYil7fSxhZnRlck1vdmU6ZnVuY3Rpb24oYSl7fSxpbml0OmZ1bmN0aW9uKGEpe3RoaXMuZ3JpZD1hO3RoaXMuaW5pdFRlbXBsYXRlcygpO3RoaXMuaW5pdERhdGEoYS5zdG9yZSxhLmNvbE1vZGVsKTt0aGlzLmluaXRVSShhKX0sZ2V0Q29sdW1uSWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY20uZ2V0Q29sdW1uSWQoYSl9LGdldE9mZnNldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuY20uZ2V0VG90YWxXaWR0aCgpK3RoaXMuZ2V0U2Nyb2xsT2Zmc2V0KCkpKyJweCJ9LGdldFNjcm9sbE9mZnNldDpmdW5jdGlvbigpe3JldHVybiBFeHQubnVtKHRoaXMuc2Nyb2xsT2Zmc2V0LEV4dC5nZXRTY3JvbGxCYXJXaWR0aCgpKX0scmVuZGVySGVhZGVyczpmdW5jdGlvbigpe3ZhciBlPXRoaXMuY20sZz10aGlzLnRlbXBsYXRlcyxhPWcuaGNlbGwsZD17fSxoPWUuZ2V0Q29sdW1uQ291bnQoKSxqPWgtMSxrPVtdLGMsYjtmb3IoYz0wO2M8aDtjKyspe2lmKGM9PTApe2I9IngtZ3JpZDMtY2VsbC1maXJzdCAifWVsc2V7Yj1jPT1qPyJ4LWdyaWQzLWNlbGwtbGFzdCAiOiIifWQ9e2lkOmUuZ2V0Q29sdW1uSWQoYyksdmFsdWU6ZS5nZXRDb2x1bW5IZWFkZXIoYyl8fCIiLHN0eWxlOnRoaXMuZ2V0Q29sdW1uU3R5bGUoYyx0cnVlKSxjc3M6Yix0b29sdGlwOnRoaXMuZ2V0Q29sdW1uVG9vbHRpcChjKX07aWYoZS5jb25maWdbY10uYWxpZ249PSJyaWdodCIpe2QuaXN0eWxlPSJwYWRkaW5nLXJpZ2h0OiAxNnB4OyJ9ZWxzZXtkZWxldGUgZC5pc3R5bGV9a1tjXT1hLmFwcGx5KGQpfXJldHVybiBnLmhlYWRlci5hcHBseSh7Y2VsbHM6ay5qb2luKCIiKSx0c3R5bGU6U3RyaW5nLmZvcm1hdCgid2lkdGg6IHswfTsiLHRoaXMuZ2V0VG90YWxXaWR0aCgpKX0pfSxnZXRDb2x1bW5Ub29sdGlwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY20uZ2V0Q29sdW1uVG9vbHRpcChhKTtpZihiKXtpZihFeHQuUXVpY2tUaXBzLmlzRW5hYmxlZCgpKXtyZXR1cm4nZXh0OnF0aXA9IicrYisnIid9ZWxzZXtyZXR1cm4ndGl0bGU9IicrYisnIid9fXJldHVybiIifSxiZWZvcmVVcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLmdyaWQuc3RvcEVkaXRpbmcodHJ1ZSl9LHVwZGF0ZUhlYWRlcnM6ZnVuY3Rpb24oKXt0aGlzLmlubmVySGQuZmlyc3RDaGlsZC5pbm5lckhUTUw9dGhpcy5yZW5kZXJIZWFkZXJzKCk7dGhpcy51cGRhdGVIZWFkZXJXaWR0aChmYWxzZSl9LHVwZGF0ZUhlYWRlcldpZHRoOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMuaW5uZXJIZC5maXJzdENoaWxkLGE9dGhpcy5nZXRUb3RhbFdpZHRoKCk7Yi5zdHlsZS53aWR0aD10aGlzLmdldE9mZnNldFdpZHRoKCk7Yi5maXJzdENoaWxkLnN0eWxlLndpZHRoPWE7aWYoYyE9PWZhbHNlKXt0aGlzLm1haW5Cb2R5LmRvbS5zdHlsZS53aWR0aD1hfX0sZm9jdXNSb3c6ZnVuY3Rpb24oYSl7dGhpcy5mb2N1c0NlbGwoYSwwLGZhbHNlKX0sZm9jdXNDZWxsOmZ1bmN0aW9uKGQsYixjKXt0aGlzLnN5bmNGb2N1c0VsKHRoaXMuZW5zdXJlVmlzaWJsZShkLGIsYykpO3ZhciBhPXRoaXMuZm9jdXNFbDtpZihFeHQuaXNHZWNrbyl7YS5mb2N1cygpfWVsc2V7YS5mb2N1cy5kZWZlcigxLGEpfX0scmVzb2x2ZUNlbGw6ZnVuY3Rpb24oaCxkLGcpe2lmKCFFeHQuaXNOdW1iZXIoaCkpe2g9aC5yb3dJbmRleH1pZighdGhpcy5kcyl7cmV0dXJuIG51bGx9aWYoaDwwfHxoPj10aGlzLmRzLmdldENvdW50KCkpe3JldHVybiBudWxsfWQ9KGQhPT11bmRlZmluZWQ/ZDowKTt2YXIgYz10aGlzLmdldFJvdyhoKSxiPXRoaXMuY20sZT1iLmdldENvbHVtbkNvdW50KCksYTtpZighKGc9PT1mYWxzZSYmZD09PTApKXt3aGlsZShkPGUmJmIuaXNIaWRkZW4oZCkpe2QrK31hPXRoaXMuZ2V0Q2VsbChoLGQpfXJldHVybntyb3c6YyxjZWxsOmF9fSxnZXRSZXNvbHZlZFhZOmZ1bmN0aW9uKGIpe2lmKCFiKXtyZXR1cm4gbnVsbH12YXIgYT1iLmNlbGwsYz1iLnJvdztpZihhKXtyZXR1cm4gRXh0LmZseShhKS5nZXRYWSgpfWVsc2V7cmV0dXJuW3RoaXMuZWwuZ2V0WCgpLEV4dC5mbHkoYykuZ2V0WSgpXX19LHN5bmNGb2N1c0VsOmZ1bmN0aW9uKGQsYSxjKXt2YXIgYj1kO2lmKCFFeHQuaXNBcnJheShiKSl7ZD1NYXRoLm1pbihkLE1hdGgubWF4KDAsdGhpcy5nZXRSb3dzKCkubGVuZ3RoLTEpKTtpZihpc05hTihkKSl7cmV0dXJufWI9dGhpcy5nZXRSZXNvbHZlZFhZKHRoaXMucmVzb2x2ZUNlbGwoZCxhLGMpKX10aGlzLmZvY3VzRWwuc2V0WFkoYnx8dGhpcy5zY3JvbGxlci5nZXRYWSgpKX0sZW5zdXJlVmlzaWJsZTpmdW5jdGlvbih0LGcsZSl7dmFyIHI9dGhpcy5yZXNvbHZlQ2VsbCh0LGcsZSk7aWYoIXJ8fCFyLnJvdyl7cmV0dXJuIG51bGx9dmFyIGs9ci5yb3csaD1yLmNlbGwsbj10aGlzLnNjcm9sbGVyLmRvbSxkPWsscz0wLG89dGhpcy5lbC5kb207d2hpbGUoZCYmZCE9byl7cys9ZC5vZmZzZXRUb3A7ZD1kLm9mZnNldFBhcmVudH1zLT10aGlzLm1haW5IZC5kb20ub2Zmc2V0SGVpZ2h0O289cGFyc2VJbnQobi5zY3JvbGxUb3AsMTApO3ZhciBxPXMray5vZmZzZXRIZWlnaHQsYT1uLmNsaWVudEhlaWdodCxtPW8rYTtpZihzPG8pe24uc2Nyb2xsVG9wPXN9ZWxzZXtpZihxPm0pe24uc2Nyb2xsVG9wPXEtYX19aWYoZSE9PWZhbHNlKXt2YXIgbD1wYXJzZUludChoLm9mZnNldExlZnQsMTApLGo9bCtoLm9mZnNldFdpZHRoLGk9cGFyc2VJbnQobi5zY3JvbGxMZWZ0LDEwKSxiPWkrbi5jbGllbnRXaWR0aDtpZihsPGkpe24uc2Nyb2xsTGVmdD1sfWVsc2V7aWYoaj5iKXtuLnNjcm9sbExlZnQ9ai1uLmNsaWVudFdpZHRofX19cmV0dXJuIHRoaXMuZ2V0UmVzb2x2ZWRYWShyKX0saW5zZXJ0Um93czpmdW5jdGlvbihhLGksZSxoKXt2YXIgZD1hLmdldENvdW50KCktMTtpZighaCYmaT09PTAmJmU+PWQpe3RoaXMuZmlyZUV2ZW50KCJiZWZvcmVyb3dzaW5zZXJ0ZWQiLHRoaXMsaSxlKTt0aGlzLnJlZnJlc2goKTt0aGlzLmZpcmVFdmVudCgicm93c2luc2VydGVkIix0aGlzLGksZSl9ZWxzZXtpZighaCl7dGhpcy5maXJlRXZlbnQoImJlZm9yZXJvd3NpbnNlcnRlZCIsdGhpcyxpLGUpfXZhciBiPXRoaXMucmVuZGVyUm93cyhpLGUpLGc9dGhpcy5nZXRSb3coaSk7aWYoZyl7aWYoaT09PTApe0V4dC5mbHkodGhpcy5nZXRSb3coMCkpLnJlbW92ZUNsYXNzKHRoaXMuZmlyc3RSb3dDbHMpfUV4dC5Eb21IZWxwZXIuaW5zZXJ0SHRtbCgiYmVmb3JlQmVnaW4iLGcsYil9ZWxzZXt2YXIgYz10aGlzLmdldFJvdyhkLTEpO2lmKGMpe0V4dC5mbHkoYykucmVtb3ZlQ2xhc3ModGhpcy5sYXN0Um93Q2xzKX1FeHQuRG9tSGVscGVyLmluc2VydEh0bWwoImJlZm9yZUVuZCIsdGhpcy5tYWluQm9keS5kb20sYil9aWYoIWgpe3RoaXMucHJvY2Vzc1Jvd3MoaSk7dGhpcy5maXJlRXZlbnQoInJvd3NpbnNlcnRlZCIsdGhpcyxpLGUpfWVsc2V7aWYoaT09PTB8fGk+PWQpe0V4dC5mbHkodGhpcy5nZXRSb3coaSkpLmFkZENsYXNzKGk9PT0wP3RoaXMuZmlyc3RSb3dDbHM6dGhpcy5sYXN0Um93Q2xzKX19fXRoaXMuc3luY0ZvY3VzRWwoaSl9LGRlbGV0ZVJvd3M6ZnVuY3Rpb24oYSxjLGIpe2lmKGEuZ2V0Um93Q291bnQoKTwxKXt0aGlzLnJlZnJlc2goKX1lbHNle3RoaXMuZmlyZUV2ZW50KCJiZWZvcmVyb3dzZGVsZXRlZCIsdGhpcyxjLGIpO3RoaXMucmVtb3ZlUm93cyhjLGIpO3RoaXMucHJvY2Vzc1Jvd3MoYyk7dGhpcy5maXJlRXZlbnQoInJvd3NkZWxldGVkIix0aGlzLGMsYil9fSxnZXRDb2x1bW5TdHlsZTpmdW5jdGlvbihiLGQpe3ZhciBhPXRoaXMuY20sZz1hLmNvbmZpZyxjPWQ/IiI6Z1tiXS5jc3N8fCIiLGU9Z1tiXS5hbGlnbjtjKz1TdHJpbmcuZm9ybWF0KCJ3aWR0aDogezB9OyIsdGhpcy5nZXRDb2x1bW5XaWR0aChiKSk7aWYoYS5pc0hpZGRlbihiKSl7Yys9ImRpc3BsYXk6IG5vbmU7ICJ9aWYoZSl7Yys9U3RyaW5nLmZvcm1hdCgidGV4dC1hbGlnbjogezB9OyIsZSl9cmV0dXJuIGN9LGdldENvbHVtbldpZHRoOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuY20uZ2V0Q29sdW1uV2lkdGgoYiksYT10aGlzLmJvcmRlcldpZHRoO2lmKEV4dC5pc051bWJlcihjKSl7aWYoRXh0LmlzQm9yZGVyQm94fHwoRXh0LmlzV2ViS2l0JiYhRXh0LmlzU2FmYXJpMikpe3JldHVybiBjKyJweCJ9ZWxzZXtyZXR1cm4gTWF0aC5tYXgoYy1hLDApKyJweCJ9fWVsc2V7cmV0dXJuIGN9fSxnZXRUb3RhbFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY20uZ2V0VG90YWxXaWR0aCgpKyJweCJ9LGZpdENvbHVtbnM6ZnVuY3Rpb24oZyxqLGgpe3ZhciBhPXRoaXMuZ3JpZCxsPXRoaXMuY20scz1sLmdldFRvdGFsV2lkdGgoZmFsc2UpLHE9dGhpcy5nZXRHcmlkSW5uZXJXaWR0aCgpLHI9cS1zLGM9W10sbz0wLG49MCx1LGQscDtpZihxPDIwfHxyPT09MCl7cmV0dXJuIGZhbHNlfXZhciBlPWwuZ2V0Q29sdW1uQ291bnQodHJ1ZSksbT1sLmdldENvbHVtbkNvdW50KGZhbHNlKSxiPWUtKEV4dC5pc051bWJlcihoKT8xOjApO2lmKGI9PT0wKXtiPTE7aD11bmRlZmluZWR9Zm9yKHA9MDtwPG07cCsrKXtpZighbC5pc0ZpeGVkKHApJiZwIT09aCl7dT1sLmdldENvbHVtbldpZHRoKHApO2MucHVzaChwLHUpO2lmKCFsLmlzSGlkZGVuKHApKXtvPXA7bis9dX19fWQ9KHEtbC5nZXRUb3RhbFdpZHRoKCkpL247d2hpbGUoYy5sZW5ndGgpe3U9Yy5wb3AoKTtwPWMucG9wKCk7bC5zZXRDb2x1bW5XaWR0aChwLE1hdGgubWF4KGEubWluQ29sdW1uV2lkdGgsTWF0aC5mbG9vcih1K3UqZCkpLHRydWUpfXM9bC5nZXRUb3RhbFdpZHRoKGZhbHNlKTtpZihzPnEpe3ZhciB0PShiPT1lKT9vOmgsaz1NYXRoLm1heCgxLGwuZ2V0Q29sdW1uV2lkdGgodCktKHMtcSkpO2wuc2V0Q29sdW1uV2lkdGgodCxrLHRydWUpfWlmKGchPT10cnVlKXt0aGlzLnVwZGF0ZUFsbENvbHVtbldpZHRocygpfXJldHVybiB0cnVlfSxhdXRvRXhwYW5kOmZ1bmN0aW9uKGspe3ZhciBhPXRoaXMuZ3JpZCxpPXRoaXMuY20sZT10aGlzLmdldEdyaWRJbm5lcldpZHRoKCksYz1pLmdldFRvdGFsV2lkdGgoZmFsc2UpLGc9YS5hdXRvRXhwYW5kQ29sdW1uO2lmKCF0aGlzLnVzZXJSZXNpemVkJiZnKXtpZihlIT1jKXt2YXIgaj1pLmdldEluZGV4QnlJZChnKSxiPWkuZ2V0Q29sdW1uV2lkdGgoaiksaD1lLWMrYixkPU1hdGgubWluKE1hdGgubWF4KGgsYS5hdXRvRXhwYW5kTWluKSxhLmF1dG9FeHBhbmRNYXgpO2lmKGIhPWQpe2kuc2V0Q29sdW1uV2lkdGgoaixkLHRydWUpO2lmKGshPT10cnVlKXt0aGlzLnVwZGF0ZUNvbHVtbldpZHRoKGosZCl9fX19fSxnZXRHcmlkSW5uZXJXaWR0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyaWQuZ2V0R3JpZEVsKCkuZ2V0V2lkdGgodHJ1ZSktdGhpcy5nZXRTY3JvbGxPZmZzZXQoKX0sZ2V0Q29sdW1uRGF0YTpmdW5jdGlvbigpe3ZhciBlPVtdLGM9dGhpcy5jbSxnPWMuZ2V0Q29sdW1uQ291bnQoKSxhPXRoaXMuZHMuZmllbGRzLGQsYjtmb3IoZD0wO2Q8ZztkKyspe2I9Yy5nZXREYXRhSW5kZXgoZCk7ZVtkXT17bmFtZTpFeHQuaXNEZWZpbmVkKGIpP2I6KGEuZ2V0KGQpP2EuZ2V0KGQpLm5hbWU6dW5kZWZpbmVkKSxyZW5kZXJlcjpjLmdldFJlbmRlcmVyKGQpLHNjb3BlOmMuZ2V0UmVuZGVyZXJTY29wZShkKSxpZDpjLmdldENvbHVtbklkKGQpLHN0eWxlOnRoaXMuZ2V0Q29sdW1uU3R5bGUoZCl9fXJldHVybiBlfSxyZW5kZXJSb3dzOmZ1bmN0aW9uKGksYyl7dmFyIGE9dGhpcy5ncmlkLGc9YS5zdG9yZSxqPWEuc3RyaXBlUm93cyxlPWEuY29sTW9kZWwsaD1lLmdldENvbHVtbkNvdW50KCksZD1nLmdldENvdW50KCksYjtpZihkPDEpe3JldHVybiIifWk9aXx8MDtjPUV4dC5pc0RlZmluZWQoYyk/YzpkLTE7Yj1nLmdldFJhbmdlKGksYyk7cmV0dXJuIHRoaXMuZG9SZW5kZXIodGhpcy5nZXRDb2x1bW5EYXRhKCksYixnLGksaCxqKX0scmVuZGVyQm9keTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVuZGVyUm93cygpfHwiJiMxNjA7IjtyZXR1cm4gdGhpcy50ZW1wbGF0ZXMuYm9keS5hcHBseSh7cm93czphfSl9LHJlZnJlc2hSb3c6ZnVuY3Rpb24oZyl7dmFyIGw9dGhpcy5kcyxtPXRoaXMuY20uZ2V0Q29sdW1uQ291bnQoKSxjPXRoaXMuZ2V0Q29sdW1uRGF0YSgpLG49bS0xLHA9WyJ4LWdyaWQzLXJvdyJdLGU9e3RzdHlsZTpTdHJpbmcuZm9ybWF0KCJ3aWR0aDogezB9OyIsdGhpcy5nZXRUb3RhbFdpZHRoKCkpfSxhPVtdLGs9dGhpcy50ZW1wbGF0ZXMuY2VsbCxqLHEsYixvLGgsZDtpZihFeHQuaXNOdW1iZXIoZykpe2o9ZztnPWwuZ2V0QXQoail9ZWxzZXtqPWwuaW5kZXhPZihnKX1pZighZ3x8ajwwKXtyZXR1cm59Zm9yKGQ9MDtkPG07ZCsrKXtiPWNbZF07aWYoZD09MCl7aD0ieC1ncmlkMy1jZWxsLWZpcnN0In1lbHNle2g9KGQ9PW4pPyJ4LWdyaWQzLWNlbGwtbGFzdCAiOiIifW89e2lkOmIuaWQsc3R5bGU6Yi5zdHlsZSxjc3M6aCxhdHRyOiIiLGNlbGxBdHRyOiIifTtvLnZhbHVlPWIucmVuZGVyZXIuY2FsbChiLnNjb3BlLGcuZGF0YVtiLm5hbWVdLG8sZyxqLGQsbCk7aWYoRXh0LmlzRW1wdHkoby52YWx1ZSkpe28udmFsdWU9IiYjMTYwOyJ9aWYodGhpcy5tYXJrRGlydHkmJmcuZGlydHkmJnR5cGVvZiBnLm1vZGlmaWVkW2IubmFtZV0hPSJ1bmRlZmluZWQiKXtvLmNzcys9IiB4LWdyaWQzLWRpcnR5LWNlbGwifWFbZF09ay5hcHBseShvKX1xPXRoaXMuZ2V0Um93KGopO3EuY2xhc3NOYW1lPSIiO2lmKHRoaXMuZ3JpZC5zdHJpcGVSb3dzJiYoKGorMSklMj09PTApKXtwLnB1c2goIngtZ3JpZDMtcm93LWFsdCIpfWlmKHRoaXMuZ2V0Um93Q2xhc3Mpe2UuY29scz1tO3AucHVzaCh0aGlzLmdldFJvd0NsYXNzKGcsaixlLGwpKX10aGlzLmZseShxKS5hZGRDbGFzcyhwKS5zZXRTdHlsZShlLnRzdHlsZSk7ZS5jZWxscz1hLmpvaW4oIiIpO3EuaW5uZXJIVE1MPXRoaXMudGVtcGxhdGVzLnJvd0lubmVyLmFwcGx5KGUpO3RoaXMuZmlyZUV2ZW50KCJyb3d1cGRhdGVkIix0aGlzLGosZyl9LHJlZnJlc2g6ZnVuY3Rpb24oYil7dGhpcy5maXJlRXZlbnQoImJlZm9yZXJlZnJlc2giLHRoaXMpO3RoaXMuZ3JpZC5zdG9wRWRpdGluZyh0cnVlKTt2YXIgYT10aGlzLnJlbmRlckJvZHkoKTt0aGlzLm1haW5Cb2R5LnVwZGF0ZShhKS5zZXRXaWR0aCh0aGlzLmdldFRvdGFsV2lkdGgoKSk7aWYoYj09PXRydWUpe3RoaXMudXBkYXRlSGVhZGVycygpO3RoaXMudXBkYXRlSGVhZGVyU29ydFN0YXRlKCl9dGhpcy5wcm9jZXNzUm93cygwLHRydWUpO3RoaXMubGF5b3V0KCk7dGhpcy5hcHBseUVtcHR5VGV4dCgpO3RoaXMuZmlyZUV2ZW50KCJyZWZyZXNoIix0aGlzKX0sYXBwbHlFbXB0eVRleHQ6ZnVuY3Rpb24oKXtpZih0aGlzLmVtcHR5VGV4dCYmIXRoaXMuaGFzUm93cygpKXt0aGlzLm1haW5Cb2R5LnVwZGF0ZSgnPGRpdiBjbGFzcz0ieC1ncmlkLWVtcHR5Ij4nK3RoaXMuZW1wdHlUZXh0KyI8L2Rpdj4iKX19LHVwZGF0ZUhlYWRlclNvcnRTdGF0ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuZHMuZ2V0U29ydFN0YXRlKCk7aWYoIWIpe3JldHVybn1pZighdGhpcy5zb3J0U3RhdGV8fCh0aGlzLnNvcnRTdGF0ZS5maWVsZCE9Yi5maWVsZHx8dGhpcy5zb3J0U3RhdGUuZGlyZWN0aW9uIT1iLmRpcmVjdGlvbikpe3RoaXMuZ3JpZC5maXJlRXZlbnQoInNvcnRjaGFuZ2UiLHRoaXMuZ3JpZCxiKX10aGlzLnNvcnRTdGF0ZT1iO3ZhciBjPXRoaXMuY20uZmluZENvbHVtbkluZGV4KGIuZmllbGQpO2lmKGMhPS0xKXt2YXIgYT1iLmRpcmVjdGlvbjt0aGlzLnVwZGF0ZVNvcnRJY29uKGMsYSl9fSxjbGVhckhlYWRlclNvcnRTdGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLnNvcnRTdGF0ZSl7cmV0dXJufXRoaXMuZ3JpZC5maXJlRXZlbnQoInNvcnRjaGFuZ2UiLHRoaXMuZ3JpZCxudWxsKTt0aGlzLm1haW5IZC5zZWxlY3QoInRkIikucmVtb3ZlQ2xhc3ModGhpcy5zb3J0Q2xhc3Nlcyk7ZGVsZXRlIHRoaXMuc29ydFN0YXRlfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGo9dGhpcyxhPWouZ3JpZCxkPWEuZ2V0R3JpZEVsKCksaT1qLmRyYWdab25lLGc9ai5zcGxpdFpvbmUsaD1qLmNvbHVtbkRyYWcsZT1qLmNvbHVtbkRyb3Asaz1qLnNjcm9sbFRvVG9wVGFzayxjLGI7aWYoayYmay5jYW5jZWwpe2suY2FuY2VsKCl9RXh0LmRlc3Ryb3lNZW1iZXJzKGosImNvbE1lbnUiLCJobWVudSIpO2ouaW5pdERhdGEobnVsbCxudWxsKTtqLnB1cmdlTGlzdGVuZXJzKCk7RXh0LmZseShqLmlubmVySGQpLnVuKCJjbGljayIsai5oYW5kbGVIZERvd24saik7aWYoYS5lbmFibGVDb2x1bW5Nb3ZlKXtjPWguZHJhZ0RhdGE7Yj1oLnByb3h5O0V4dC5kZXN0cm95KGguZWwsYi5naG9zdCxiLmVsLGUuZWwsZS5wcm94eVRvcCxlLnByb3h5Qm90dG9tLGMuZGRlbCxjLmhlYWRlcik7aWYoYi5hbmltKXtFeHQuZGVzdHJveShiLmFuaW0pfWRlbGV0ZSBiLmdob3N0O2RlbGV0ZSBjLmRkZWw7ZGVsZXRlIGMuaGVhZGVyO2guZGVzdHJveSgpO2RlbGV0ZSBFeHQuZGQuRERNLmxvY2F0aW9uQ2FjaGVbaC5pZF07ZGVsZXRlIGguX2RvbVJlZjtkZWxldGUgZS5wcm94eVRvcDtkZWxldGUgZS5wcm94eUJvdHRvbTtlLmRlc3Ryb3koKTtkZWxldGUgRXh0LmRkLkRETS5sb2NhdGlvbkNhY2hlWyJncmlkSGVhZGVyIitkLmlkXTtkZWxldGUgZS5fZG9tUmVmO2RlbGV0ZSBFeHQuZGQuRERNLmlkc1tlLmRkR3JvdXBdfWlmKGcpe2cuZGVzdHJveSgpO2RlbGV0ZSBnLl9kb21SZWY7ZGVsZXRlIEV4dC5kZC5ERE0uaWRzWyJncmlkU3BsaXR0ZXJzIitkLmlkXX1FeHQuZmx5KGouaW5uZXJIZCkucmVtb3ZlQWxsTGlzdGVuZXJzKCk7RXh0LnJlbW92ZU5vZGUoai5pbm5lckhkKTtkZWxldGUgai5pbm5lckhkO0V4dC5kZXN0cm95KGouZWwsai5tYWluV3JhcCxqLm1haW5IZCxqLnNjcm9sbGVyLGoubWFpbkJvZHksai5mb2N1c0VsLGoucmVzaXplTWFya2VyLGoucmVzaXplUHJveHksai5hY3RpdmVIZEJ0bixqLl9mbHl3ZWlnaHQsaSxnKTtkZWxldGUgYS5jb250YWluZXI7aWYoaSl7aS5kZXN0cm95KCl9RXh0LmRkLkRETS5jdXJyZW50VGFyZ2V0PW51bGw7ZGVsZXRlIEV4dC5kZC5ERE0ubG9jYXRpb25DYWNoZVtkLmlkXTtFeHQuRXZlbnRNYW5hZ2VyLnJlbW92ZVJlc2l6ZUxpc3RlbmVyKGoub25XaW5kb3dSZXNpemUsail9LG9uRGVueUNvbHVtbkhpZGU6ZnVuY3Rpb24oKXt9LHJlbmRlcjpmdW5jdGlvbigpe2lmKHRoaXMuYXV0b0ZpbGwpe3ZhciBhPXRoaXMuZ3JpZC5vd25lckN0O2lmKGEmJmEuZ2V0TGF5b3V0KCkpe2Eub24oImFmdGVybGF5b3V0IixmdW5jdGlvbigpe3RoaXMuZml0Q29sdW1ucyh0cnVlLHRydWUpO3RoaXMudXBkYXRlSGVhZGVycygpO3RoaXMudXBkYXRlSGVhZGVyU29ydFN0YXRlKCl9LHRoaXMse3NpbmdsZTp0cnVlfSl9fWVsc2V7aWYodGhpcy5mb3JjZUZpdCl7dGhpcy5maXRDb2x1bW5zKHRydWUsZmFsc2UpfWVsc2V7aWYodGhpcy5ncmlkLmF1dG9FeHBhbmRDb2x1bW4pe3RoaXMuYXV0b0V4cGFuZCh0cnVlKX19fXRoaXMuZ3JpZC5nZXRHcmlkRWwoKS5kb20uaW5uZXJIVE1MPXRoaXMucmVuZGVyVUkoKTt0aGlzLmFmdGVyUmVuZGVyVUkoKX0saW5pdERhdGE6ZnVuY3Rpb24oYSxlKXt2YXIgYj10aGlzO2lmKGIuZHMpe3ZhciBkPWIuZHM7ZC51bigiYWRkIixiLm9uQWRkLGIpO2QudW4oImxvYWQiLGIub25Mb2FkLGIpO2QudW4oImNsZWFyIixiLm9uQ2xlYXIsYik7ZC51bigicmVtb3ZlIixiLm9uUmVtb3ZlLGIpO2QudW4oInVwZGF0ZSIsYi5vblVwZGF0ZSxiKTtkLnVuKCJkYXRhY2hhbmdlZCIsYi5vbkRhdGFDaGFuZ2UsYik7aWYoZCE9PWEmJmQuYXV0b0Rlc3Ryb3kpe2QuZGVzdHJveSgpfX1pZihhKXthLm9uKHtzY29wZTpiLGxvYWQ6Yi5vbkxvYWQsYWRkOmIub25BZGQscmVtb3ZlOmIub25SZW1vdmUsdXBkYXRlOmIub25VcGRhdGUsY2xlYXI6Yi5vbkNsZWFyLGRhdGFjaGFuZ2VkOmIub25EYXRhQ2hhbmdlfSl9aWYoYi5jbSl7dmFyIGM9Yi5jbTtjLnVuKCJjb25maWdjaGFuZ2UiLGIub25Db2xDb25maWdDaGFuZ2UsYik7Yy51bigid2lkdGhjaGFuZ2UiLGIub25Db2xXaWR0aENoYW5nZSxiKTtjLnVuKCJoZWFkZXJjaGFuZ2UiLGIub25IZWFkZXJDaGFuZ2UsYik7Yy51bigiaGlkZGVuY2hhbmdlIixiLm9uSGlkZGVuQ2hhbmdlLGIpO2MudW4oImNvbHVtbm1vdmVkIixiLm9uQ29sdW1uTW92ZSxiKX1pZihlKXtkZWxldGUgYi5sYXN0Vmlld1dpZHRoO2Uub24oe3Njb3BlOmIsY29uZmlnY2hhbmdlOmIub25Db2xDb25maWdDaGFuZ2Usd2lkdGhjaGFuZ2U6Yi5vbkNvbFdpZHRoQ2hhbmdlLGhlYWRlcmNoYW5nZTpiLm9uSGVhZGVyQ2hhbmdlLGhpZGRlbmNoYW5nZTpiLm9uSGlkZGVuQ2hhbmdlLGNvbHVtbm1vdmVkOmIub25Db2x1bW5Nb3ZlfSl9Yi5kcz1hO2IuY209ZX0sb25EYXRhQ2hhbmdlOmZ1bmN0aW9uKCl7dGhpcy5yZWZyZXNoKHRydWUpO3RoaXMudXBkYXRlSGVhZGVyU29ydFN0YXRlKCk7dGhpcy5zeW5jRm9jdXNFbCgwKX0sb25DbGVhcjpmdW5jdGlvbigpe3RoaXMucmVmcmVzaCgpO3RoaXMuc3luY0ZvY3VzRWwoMCl9LG9uVXBkYXRlOmZ1bmN0aW9uKGIsYSl7dGhpcy5yZWZyZXNoUm93KGEpfSxvbkFkZDpmdW5jdGlvbihiLGEsYyl7dGhpcy5pbnNlcnRSb3dzKGIsYyxjKyhhLmxlbmd0aC0xKSl9LG9uUmVtb3ZlOmZ1bmN0aW9uKGIsYSxjLGQpe2lmKGQhPT10cnVlKXt0aGlzLmZpcmVFdmVudCgiYmVmb3Jlcm93cmVtb3ZlZCIsdGhpcyxjLGEpfXRoaXMucmVtb3ZlUm93KGMpO2lmKGQhPT10cnVlKXt0aGlzLnByb2Nlc3NSb3dzKGMpO3RoaXMuYXBwbHlFbXB0eVRleHQoKTt0aGlzLmZpcmVFdmVudCgicm93cmVtb3ZlZCIsdGhpcyxjLGEpfX0sb25Mb2FkOmZ1bmN0aW9uKCl7aWYoRXh0LmlzR2Vja28pe2lmKCF0aGlzLnNjcm9sbFRvVG9wVGFzayl7dGhpcy5zY3JvbGxUb1RvcFRhc2s9bmV3IEV4dC51dGlsLkRlbGF5ZWRUYXNrKHRoaXMuc2Nyb2xsVG9Ub3AsdGhpcyl9dGhpcy5zY3JvbGxUb1RvcFRhc2suZGVsYXkoMSl9ZWxzZXt0aGlzLnNjcm9sbFRvVG9wKCl9fSxvbkNvbFdpZHRoQ2hhbmdlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnVwZGF0ZUNvbHVtbldpZHRoKGIsYyl9LG9uSGVhZGVyQ2hhbmdlOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnVwZGF0ZUhlYWRlcnMoKX0sb25IaWRkZW5DaGFuZ2U6ZnVuY3Rpb24oYSxiLGMpe3RoaXMudXBkYXRlQ29sdW1uSGlkZGVuKGIsYyl9LG9uQ29sdW1uTW92ZTpmdW5jdGlvbihhLGMsYil7dGhpcy5pbmRleE1hcD1udWxsO3RoaXMucmVmcmVzaCh0cnVlKTt0aGlzLnJlc3RvcmVTY3JvbGwodGhpcy5nZXRTY3JvbGxTdGF0ZSgpKTt0aGlzLmFmdGVyTW92ZShiKTt0aGlzLmdyaWQuZmlyZUV2ZW50KCJjb2x1bW5tb3ZlIixjLGIpfSxvbkNvbENvbmZpZ0NoYW5nZTpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLmxhc3RWaWV3V2lkdGg7dGhpcy5pbmRleE1hcD1udWxsO3RoaXMucmVmcmVzaCh0cnVlKX0saW5pdFVJOmZ1bmN0aW9uKGEpe2Eub24oImhlYWRlcmNsaWNrIix0aGlzLm9uSGVhZGVyQ2xpY2ssdGhpcyl9LGluaXRFdmVudHM6RXh0LmVtcHR5Rm4sb25IZWFkZXJDbGljazpmdW5jdGlvbihiLGEpe2lmKHRoaXMuaGVhZGVyc0Rpc2FibGVkfHwhdGhpcy5jbS5pc1NvcnRhYmxlKGEpKXtyZXR1cm59Yi5zdG9wRWRpdGluZyh0cnVlKTtiLnN0b3JlLnNvcnQodGhpcy5jbS5nZXREYXRhSW5kZXgoYSkpfSxvblJvd092ZXI6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLmZpbmRSb3dJbmRleChhKTtpZihjIT09ZmFsc2Upe3RoaXMuYWRkUm93Q2xhc3MoYyx0aGlzLnJvd092ZXJDbHMpfX0sb25Sb3dPdXQ6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLmZpbmRSb3dJbmRleChhKTtpZihjIT09ZmFsc2UmJiFiLndpdGhpbih0aGlzLmdldFJvdyhjKSx0cnVlKSl7dGhpcy5yZW1vdmVSb3dDbGFzcyhjLHRoaXMucm93T3ZlckNscyl9fSxvblJvd1NlbGVjdDpmdW5jdGlvbihhKXt0aGlzLmFkZFJvd0NsYXNzKGEsdGhpcy5zZWxlY3RlZFJvd0NsYXNzKX0sb25Sb3dEZXNlbGVjdDpmdW5jdGlvbihhKXt0aGlzLnJlbW92ZVJvd0NsYXNzKGEsdGhpcy5zZWxlY3RlZFJvd0NsYXNzKX0sb25DZWxsU2VsZWN0OmZ1bmN0aW9uKGMsYil7dmFyIGE9dGhpcy5nZXRDZWxsKGMsYik7aWYoYSl7dGhpcy5mbHkoYSkuYWRkQ2xhc3MoIngtZ3JpZDMtY2VsbC1zZWxlY3RlZCIpfX0sb25DZWxsRGVzZWxlY3Q6ZnVuY3Rpb24oYyxiKXt2YXIgYT10aGlzLmdldENlbGwoYyxiKTtpZihhKXt0aGlzLmZseShhKS5yZW1vdmVDbGFzcygieC1ncmlkMy1jZWxsLXNlbGVjdGVkIil9fSxoYW5kbGVXaGVlbDpmdW5jdGlvbihhKXthLnN0b3BQcm9wYWdhdGlvbigpfSxvbkNvbHVtblNwbGl0dGVyTW92ZWQ6ZnVuY3Rpb24oYSxiKXt0aGlzLnVzZXJSZXNpemVkPXRydWU7dGhpcy5ncmlkLmNvbE1vZGVsLnNldENvbHVtbldpZHRoKGEsYix0cnVlKTtpZih0aGlzLmZvcmNlRml0KXt0aGlzLmZpdENvbHVtbnModHJ1ZSxmYWxzZSxhKTt0aGlzLnVwZGF0ZUFsbENvbHVtbldpZHRocygpfWVsc2V7dGhpcy51cGRhdGVDb2x1bW5XaWR0aChhLGIpO3RoaXMuc3luY0hlYWRlclNjcm9sbCgpfXRoaXMuZ3JpZC5maXJlRXZlbnQoImNvbHVtbnJlc2l6ZSIsYSxiKX0sYmVmb3JlQ29sTWVudVNob3c6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmNtLGQ9Yi5nZXRDb2x1bW5Db3VudCgpLGE9dGhpcy5jb2xNZW51LGM7YS5yZW1vdmVBbGwoKTtmb3IoYz0wO2M8ZDtjKyspe2lmKGIuY29uZmlnW2NdLmhpZGVhYmxlIT09ZmFsc2Upe2EuYWRkKG5ldyBFeHQubWVudS5DaGVja0l0ZW0oe3RleHQ6Yi5nZXRDb2x1bW5IZWFkZXIoYyksaXRlbUlkOiJjb2wtIitiLmdldENvbHVtbklkKGMpLGNoZWNrZWQ6IWIuaXNIaWRkZW4oYyksZGlzYWJsZWQ6Yi5jb25maWdbY10uaGlkZWFibGU9PT1mYWxzZSxoaWRlT25DbGljazpmYWxzZX0pKX19fSxoYW5kbGVIZE1lbnVDbGljazpmdW5jdGlvbihjKXt2YXIgYT10aGlzLmRzLGI9dGhpcy5jbS5nZXREYXRhSW5kZXgodGhpcy5oZEN0eEluZGV4KTtzd2l0Y2goYy5nZXRJdGVtSWQoKSl7Y2FzZSJhc2MiOmEuc29ydChiLCJBU0MiKTticmVhaztjYXNlImRlc2MiOmEuc29ydChiLCJERVNDIik7YnJlYWs7ZGVmYXVsdDp0aGlzLmhhbmRsZUhkTWVudUNsaWNrRGVmYXVsdChjKX1yZXR1cm4gdHJ1ZX0saGFuZGxlSGRNZW51Q2xpY2tEZWZhdWx0OmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMuY20sZD1jLmdldEl0ZW1JZCgpLGE9Yi5nZXRJbmRleEJ5SWQoZC5zdWJzdHIoNCkpO2lmKGEhPS0xKXtpZihjLmNoZWNrZWQmJmIuZ2V0Q29sdW1uc0J5KHRoaXMuaXNIaWRlYWJsZUNvbHVtbix0aGlzKS5sZW5ndGg8PTEpe3RoaXMub25EZW55Q29sdW1uSGlkZSgpO3JldHVybn1iLnNldEhpZGRlbihhLGMuY2hlY2tlZCl9fSxoYW5kbGVIZERvd246ZnVuY3Rpb24oaSxqKXtpZihFeHQuZmx5KGopLmhhc0NsYXNzKCJ4LWdyaWQzLWhkLWJ0biIpKXtpLnN0b3BFdmVudCgpO3ZhciBrPXRoaXMuY20sZz10aGlzLmZpbmRIZWFkZXJDZWxsKGopLGg9dGhpcy5nZXRDZWxsSW5kZXgoZyksZD1rLmlzU29ydGFibGUoaCksYz10aGlzLmhtZW51LGI9Yy5pdGVtcyxhPXRoaXMuaGVhZGVyTWVudU9wZW5DbHM7dGhpcy5oZEN0eEluZGV4PWg7RXh0LmZseShnKS5hZGRDbGFzcyhhKTtiLmdldCgiYXNjIikuc2V0RGlzYWJsZWQoIWQpO2IuZ2V0KCJkZXNjIikuc2V0RGlzYWJsZWQoIWQpO2Mub24oImhpZGUiLGZ1bmN0aW9uKCl7RXh0LmZseShnKS5yZW1vdmVDbGFzcyhhKX0sdGhpcyx7c2luZ2xlOnRydWV9KTtjLnNob3coaiwidGwtYmw/Iil9fSxoYW5kbGVIZE1vdmU6ZnVuY3Rpb24oayl7dmFyIGk9dGhpcy5maW5kSGVhZGVyQ2VsbCh0aGlzLmFjdGl2ZUhkUmVmKTtpZihpJiYhdGhpcy5oZWFkZXJzRGlzYWJsZWQpe3ZhciBsPXRoaXMuc3BsaXRIYW5kbGVXaWR0aHx8NSxqPXRoaXMuYWN0aXZlSGRSZWdpb24scD1pLnN0eWxlLG09dGhpcy5jbSxvPSIiLGc9ay5nZXRQYWdlWCgpO2lmKHRoaXMuZ3JpZC5lbmFibGVDb2x1bW5SZXNpemUhPT1mYWxzZSl7dmFyIGE9dGhpcy5hY3RpdmVIZEluZGV4LGI9dGhpcy5nZXRQcmV2aW91c1Zpc2libGUoYSksbj1tLmlzUmVzaXphYmxlKGEpLGM9YiYmbS5pc1Jlc2l6YWJsZShiKSxkPWctai5sZWZ0PD1sLGg9ai5yaWdodC1nPD0oIXRoaXMuYWN0aXZlSGRCdG4/bDoyKTtpZihkJiZjKXtvPUV4dC5pc0Fpcj8ibW92ZSI6RXh0LmlzV2ViS2l0PyJlLXJlc2l6ZSI6ImNvbC1yZXNpemUifWVsc2V7aWYoaCYmbil7bz1FeHQuaXNBaXI/Im1vdmUiOkV4dC5pc1dlYktpdD8idy1yZXNpemUiOiJjb2wtcmVzaXplIn19fXAuY3Vyc29yPW99fSxnZXRQcmV2aW91c1Zpc2libGU6ZnVuY3Rpb24oYSl7d2hpbGUoYT4wKXtpZighdGhpcy5jbS5pc0hpZGRlbihhLTEpKXtyZXR1cm4gYX1hLS19cmV0dXJuIHVuZGVmaW5lZH0saGFuZGxlSGRPdmVyOmZ1bmN0aW9uKGMsYil7dmFyIGQ9dGhpcy5maW5kSGVhZGVyQ2VsbChiKTtpZihkJiYhdGhpcy5oZWFkZXJzRGlzYWJsZWQpe3ZhciBhPXRoaXMuZmx5KGQpO3RoaXMuYWN0aXZlSGRSZWY9Yjt0aGlzLmFjdGl2ZUhkSW5kZXg9dGhpcy5nZXRDZWxsSW5kZXgoZCk7dGhpcy5hY3RpdmVIZFJlZ2lvbj1hLmdldFJlZ2lvbigpO2lmKCF0aGlzLmlzTWVudURpc2FibGVkKHRoaXMuYWN0aXZlSGRJbmRleCxhKSl7YS5hZGRDbGFzcygieC1ncmlkMy1oZC1vdmVyIik7dGhpcy5hY3RpdmVIZEJ0bj1hLmNoaWxkKCIueC1ncmlkMy1oZC1idG4iKTtpZih0aGlzLmFjdGl2ZUhkQnRuKXt0aGlzLmFjdGl2ZUhkQnRuLmRvbS5zdHlsZS5oZWlnaHQ9KGQuZmlyc3RDaGlsZC5vZmZzZXRIZWlnaHQtMSkrInB4In19fX0saGFuZGxlSGRPdXQ6ZnVuY3Rpb24oYixhKXt2YXIgYz10aGlzLmZpbmRIZWFkZXJDZWxsKGEpO2lmKGMmJighRXh0LmlzSUV8fCFiLndpdGhpbihjLHRydWUpKSl7dGhpcy5hY3RpdmVIZFJlZj1udWxsO3RoaXMuZmx5KGMpLnJlbW92ZUNsYXNzKCJ4LWdyaWQzLWhkLW92ZXIiKTtjLnN0eWxlLmN1cnNvcj0iIn19LGlzTWVudURpc2FibGVkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY20uaXNNZW51RGlzYWJsZWQoYSl9LGhhc1Jvd3M6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm1haW5Cb2R5LmRvbS5maXJzdENoaWxkO3JldHVybiBhJiZhLm5vZGVUeXBlPT0xJiZhLmNsYXNzTmFtZSE9IngtZ3JpZC1lbXB0eSJ9LGlzSGlkZWFibGVDb2x1bW46ZnVuY3Rpb24oYSl7cmV0dXJuICFhLmhpZGRlbn0sYmluZDpmdW5jdGlvbihhLGIpe3RoaXMuaW5pdERhdGEoYSxiKX19KTtFeHQuZ3JpZC5HcmlkVmlldy5TcGxpdERyYWdab25lPUV4dC5leHRlbmQoRXh0LmRkLkREUHJveHkse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEsYil7dGhpcy5ncmlkPWE7dGhpcy52aWV3PWEuZ2V0VmlldygpO3RoaXMubWFya2VyPXRoaXMudmlldy5yZXNpemVNYXJrZXI7dGhpcy5wcm94eT10aGlzLnZpZXcucmVzaXplUHJveHk7RXh0LmdyaWQuR3JpZFZpZXcuU3BsaXREcmFnWm9uZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxiLCJncmlkU3BsaXR0ZXJzIit0aGlzLmdyaWQuZ2V0R3JpZEVsKCkuaWQse2RyYWdFbElkOkV4dC5pZCh0aGlzLnByb3h5LmRvbSkscmVzaXplRnJhbWU6ZmFsc2V9KTt0aGlzLnNjcm9sbD1mYWxzZTt0aGlzLmh3PXRoaXMudmlldy5zcGxpdEhhbmRsZVdpZHRofHw1fSxiNFN0YXJ0RHJhZzpmdW5jdGlvbihhLGUpe3RoaXMuZHJhZ0hlYWRlcnNEaXNhYmxlZD10aGlzLnZpZXcuaGVhZGVyc0Rpc2FibGVkO3RoaXMudmlldy5oZWFkZXJzRGlzYWJsZWQ9dHJ1ZTt2YXIgZD10aGlzLnZpZXcubWFpbldyYXAuZ2V0SGVpZ2h0KCk7dGhpcy5tYXJrZXIuc2V0SGVpZ2h0KGQpO3RoaXMubWFya2VyLnNob3coKTt0aGlzLm1hcmtlci5hbGlnblRvKHRoaXMudmlldy5nZXRIZWFkZXJDZWxsKHRoaXMuY2VsbEluZGV4KSwidGwtdGwiLFstMiwwXSk7dGhpcy5wcm94eS5zZXRIZWlnaHQoZCk7dmFyIGI9dGhpcy5jbS5nZXRDb2x1bW5XaWR0aCh0aGlzLmNlbGxJbmRleCksYz1NYXRoLm1heChiLXRoaXMuZ3JpZC5taW5Db2x1bW5XaWR0aCwwKTt0aGlzLnJlc2V0Q29uc3RyYWludHMoKTt0aGlzLnNldFhDb25zdHJhaW50KGMsMTAwMCk7dGhpcy5zZXRZQ29uc3RyYWludCgwLDApO3RoaXMubWluWD1hLWM7dGhpcy5tYXhYPWErMTAwMDt0aGlzLnN0YXJ0UG9zPWE7RXh0LmRkLkREUHJveHkucHJvdG90eXBlLmI0U3RhcnREcmFnLmNhbGwodGhpcyxhLGUpfSxhbGxvd0hlYWRlckRyYWc6ZnVuY3Rpb24oYSl7cmV0dXJuIHRydWV9LGhhbmRsZU1vdXNlRG93bjpmdW5jdGlvbihhKXt2YXIgaD10aGlzLnZpZXcuZmluZEhlYWRlckNlbGwoYS5nZXRUYXJnZXQoKSk7aWYoaCYmdGhpcy5hbGxvd0hlYWRlckRyYWcoYSkpe3ZhciBrPXRoaXMudmlldy5mbHkoaCkuZ2V0WFkoKSxjPWtbMF0saT1hLmdldFhZKCksYj1pWzBdLGc9aC5vZmZzZXRXaWR0aCxkPWZhbHNlO2lmKChiLWMpPD10aGlzLmh3KXtkPS0xfWVsc2V7aWYoKGMrZyktYjw9dGhpcy5odyl7ZD0wfX1pZihkIT09ZmFsc2Upe3RoaXMuY209dGhpcy5ncmlkLmNvbE1vZGVsO3ZhciBqPXRoaXMudmlldy5nZXRDZWxsSW5kZXgoaCk7aWYoZD09LTEpe2lmKGorZDwwKXtyZXR1cm59d2hpbGUodGhpcy5jbS5pc0hpZGRlbihqK2QpKXstLWQ7aWYoaitkPDApe3JldHVybn19fXRoaXMuY2VsbEluZGV4PWorZDt0aGlzLnNwbGl0PWguZG9tO2lmKHRoaXMuY20uaXNSZXNpemFibGUodGhpcy5jZWxsSW5kZXgpJiYhdGhpcy5jbS5pc0ZpeGVkKHRoaXMuY2VsbEluZGV4KSl7RXh0LmdyaWQuR3JpZFZpZXcuU3BsaXREcmFnWm9uZS5zdXBlcmNsYXNzLmhhbmRsZU1vdXNlRG93bi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWVsc2V7aWYodGhpcy52aWV3LmNvbHVtbkRyYWcpe3RoaXMudmlldy5jb2x1bW5EcmFnLmNhbGxIYW5kbGVNb3VzZURvd24oYSl9fX19LGVuZERyYWc6ZnVuY3Rpb24oZyl7dGhpcy5tYXJrZXIuaGlkZSgpO3ZhciBhPXRoaXMudmlldyxjPU1hdGgubWF4KHRoaXMubWluWCxnLmdldFBhZ2VYKCkpLGQ9Yy10aGlzLnN0YXJ0UG9zLGI9dGhpcy5kcmFnSGVhZGVyc0Rpc2FibGVkO2Eub25Db2x1bW5TcGxpdHRlck1vdmVkKHRoaXMuY2VsbEluZGV4LHRoaXMuY20uZ2V0Q29sdW1uV2lkdGgodGhpcy5jZWxsSW5kZXgpK2QpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLmhlYWRlcnNEaXNhYmxlZD1ifSw1MCl9LGF1dG9PZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLnNldERlbHRhKDAsMCl9fSk7RXh0LmdyaWQuUGl2b3RHcmlkVmlldz1FeHQuZXh0ZW5kKEV4dC5ncmlkLkdyaWRWaWV3LHtjb2xIZWFkZXJDZWxsQ2xzOiJncmlkLWhkLWdyb3VwLWNlbGwiLHRpdGxlOiIiLGdldENvbHVtbkhlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncmlkLnRvcEF4aXMuYnVpbGRIZWFkZXJzKCl9LGdldFJvd0hlYWRlcnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncmlkLmxlZnRBeGlzLmJ1aWxkSGVhZGVycygpfSxyZW5kZXJSb3dzOmZ1bmN0aW9uKGEsdCl7dmFyIGI9dGhpcy5ncmlkLG89Yi5leHRyYWN0RGF0YSgpLHA9by5sZW5ndGgsZz10aGlzLnRlbXBsYXRlcyxzPWIucmVuZGVyZXIsaD10eXBlb2Ygcz09ImZ1bmN0aW9uIix3PXRoaXMuZ2V0Q2VsbENscyxuPXR5cGVvZiB3PT0iZnVuY3Rpb24iLGQ9Zy5jZWxsLHg9Zy5yb3csaz1bXSxxPXt9LGM9IndpZHRoOiIrdGhpcy5nZXRHcmlkSW5uZXJXaWR0aCgpKyJweDsiLGwscixlLHYsbTthPWF8fDA7dD1FeHQuaXNEZWZpbmVkKHQpP3Q6cC0xO2Zvcih2PTA7djxwO3YrKyl7bT1vW3ZdO3I9bS5sZW5ndGg7bD1bXTtmb3IodmFyIHU9MDt1PHI7dSsrKXtxLmlkPXYrIi0iK3U7cS5jc3M9dT09PTA/IngtZ3JpZDMtY2VsbC1maXJzdCAiOih1PT0oci0xKT8ieC1ncmlkMy1jZWxsLWxhc3QgIjoiIik7cS5hdHRyPXEuY2VsbEF0dHI9IiI7cS52YWx1ZT1tW3VdO2lmKEV4dC5pc0VtcHR5KHEudmFsdWUpKXtxLnZhbHVlPSImIzE2MDsifWlmKGgpe3EudmFsdWU9cyhxLnZhbHVlKX1pZihuKXtxLmNzcys9dyhxLnZhbHVlKSsiICJ9bFtsLmxlbmd0aF09ZC5hcHBseShxKX1rW2subGVuZ3RoXT14LmFwcGx5KHt0c3R5bGU6Yyxjb2xzOnIsY2VsbHM6bC5qb2luKCIiKSxhbHQ6IiJ9KX1yZXR1cm4gay5qb2luKCIiKX0sbWFzdGVyVHBsOm5ldyBFeHQuVGVtcGxhdGUoJzxkaXYgY2xhc3M9IngtZ3JpZDMgeC1waXZvdGdyaWQiIGhpZGVmb2N1cz0idHJ1ZSI+JywnPGRpdiBjbGFzcz0ieC1ncmlkMy12aWV3cG9ydCI+JywnPGRpdiBjbGFzcz0ieC1ncmlkMy1oZWFkZXIiPicsJzxkaXYgY2xhc3M9IngtZ3JpZDMtaGVhZGVyLXRpdGxlIj48c3Bhbj57dGl0bGV9PC9zcGFuPjwvZGl2PicsJzxkaXYgY2xhc3M9IngtZ3JpZDMtaGVhZGVyLWlubmVyIj4nLCc8ZGl2IGNsYXNzPSJ4LWdyaWQzLWhlYWRlci1vZmZzZXQiIHN0eWxlPSJ7b3N0eWxlfSI+PC9kaXY+JywiPC9kaXY+IiwnPGRpdiBjbGFzcz0ieC1jbGVhciI+PC9kaXY+JywiPC9kaXY+IiwnPGRpdiBjbGFzcz0ieC1ncmlkMy1zY3JvbGxlciI+JywnPGRpdiBjbGFzcz0ieC1ncmlkMy1yb3ctaGVhZGVycyI+PC9kaXY+JywnPGRpdiBjbGFzcz0ieC1ncmlkMy1ib2R5IiBzdHlsZT0ie2JzdHlsZX0iPntib2R5fTwvZGl2PicsJzxhIGhyZWY9IiMiIGNsYXNzPSJ4LWdyaWQzLWZvY3VzIiB0YWJJbmRleD0iLTEiPjwvYT4nLCI8L2Rpdj4iLCI8L2Rpdj4iLCc8ZGl2IGNsYXNzPSJ4LWdyaWQzLXJlc2l6ZS1tYXJrZXIiPiYjMTYwOzwvZGl2PicsJzxkaXYgY2xhc3M9IngtZ3JpZDMtcmVzaXplLXByb3h5Ij4mIzE2MDs8L2Rpdj4nLCI8L2Rpdj4iKSxpbml0VGVtcGxhdGVzOmZ1bmN0aW9uKCl7RXh0LmdyaWQuUGl2b3RHcmlkVmlldy5zdXBlcmNsYXNzLmluaXRUZW1wbGF0ZXMuYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBhPXRoaXMudGVtcGxhdGVzfHx7fTtpZighYS5nY2VsbCl7YS5nY2VsbD1uZXcgRXh0LlhUZW1wbGF0ZSgnPHRkIGNsYXNzPSJ4LWdyaWQzLWhkIHgtZ3JpZDMtZ2NlbGwgeC1ncmlkMy10ZC17aWR9IHV4LWdyaWQtaGQtZ3JvdXAtcm93LXtyb3d9ICcrdGhpcy5jb2xIZWFkZXJDZWxsQ2xzKyciIHN0eWxlPSJ7c3R5bGV9Ij4nLCc8ZGl2IHt0b29sdGlwfSBjbGFzcz0ieC1ncmlkMy1oZC1pbm5lciB4LWdyaWQzLWhkLXtpZH0iIHVuc2VsZWN0YWJsZT0ib24iIHN0eWxlPSJ7aXN0eWxlfSI+Jyx0aGlzLmdyaWQuZW5hYmxlSGRNZW51Pyc8YSBjbGFzcz0ieC1ncmlkMy1oZC1idG4iIGhyZWY9IiMiPjwvYT4nOiIiLCJ7dmFsdWV9IiwiPC9kaXY+IiwiPC90ZD4iKX10aGlzLnRlbXBsYXRlcz1hO3RoaXMuaHJvd1JlPW5ldyBSZWdFeHAoInV4LWdyaWQtaGQtZ3JvdXAtcm93LShcXGQrKSIsIiIpfSxpbml0RWxlbWVudHM6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5QaXZvdEdyaWRWaWV3LnN1cGVyY2xhc3MuaW5pdEVsZW1lbnRzLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLnJvd0hlYWRlcnNFbD1uZXcgRXh0LkVsZW1lbnQodGhpcy5zY3JvbGxlci5jaGlsZCgiZGl2LngtZ3JpZDMtcm93LWhlYWRlcnMiKSk7dGhpcy5oZWFkZXJUaXRsZUVsPW5ldyBFeHQuRWxlbWVudCh0aGlzLm1haW5IZC5jaGlsZCgiZGl2LngtZ3JpZDMtaGVhZGVyLXRpdGxlIikpfSxnZXRHcmlkSW5uZXJXaWR0aDpmdW5jdGlvbigpe3ZhciBhPUV4dC5ncmlkLlBpdm90R3JpZFZpZXcuc3VwZXJjbGFzcy5nZXRHcmlkSW5uZXJXaWR0aC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGEtdGhpcy5nZXRUb3RhbFJvd0hlYWRlcldpZHRoKCl9LGdldFRvdGFsUm93SGVhZGVyV2lkdGg6ZnVuY3Rpb24oKXt2YXIgZD10aGlzLmdldFJvd0hlYWRlcnMoKSxjPWQubGVuZ3RoLGI9MCxhO2ZvcihhPTA7YTxjO2ErKyl7Yis9ZFthXS53aWR0aH1yZXR1cm4gYn0sZ2V0VG90YWxDb2x1bW5IZWFkZXJIZWlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRDb2x1bW5IZWFkZXJzKCkubGVuZ3RoKjIxfSxnZXRDZWxsSW5kZXg6ZnVuY3Rpb24oYil7aWYoYil7dmFyIGE9Yi5jbGFzc05hbWUubWF0Y2godGhpcy5jb2xSZSksYztpZihhJiYoYz1hWzFdKSl7cmV0dXJuIHBhcnNlSW50KGMuc3BsaXQoIi0iKVsxXSwxMCl9fXJldHVybiBmYWxzZX0scmVuZGVyVUk6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLnRlbXBsYXRlcyxhPXRoaXMuZ2V0R3JpZElubmVyV2lkdGgoKTtyZXR1cm4gYi5tYXN0ZXIuYXBwbHkoe2JvZHk6Yi5ib2R5LmFwcGx5KHtyb3dzOiImIzE2MDsifSksb3N0eWxlOiJ3aWR0aDoiK2ErInB4Iixic3R5bGU6IndpZHRoOiIrYSsicHgifSl9LG9uTGF5b3V0OmZ1bmN0aW9uKGIsYSl7RXh0LmdyaWQuUGl2b3RHcmlkVmlldy5zdXBlcmNsYXNzLm9uTGF5b3V0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYj10aGlzLmdldEdyaWRJbm5lcldpZHRoKCk7dGhpcy5yZXNpemVDb2x1bW5IZWFkZXJzKGIpO3RoaXMucmVzaXplQWxsUm93cyhiKX0scmVmcmVzaDpmdW5jdGlvbihiKXt0aGlzLmZpcmVFdmVudCgiYmVmb3JlcmVmcmVzaCIsdGhpcyk7dGhpcy5ncmlkLnN0b3BFZGl0aW5nKHRydWUpO3ZhciBhPXRoaXMucmVuZGVyQm9keSgpO3RoaXMubWFpbkJvZHkudXBkYXRlKGEpLnNldFdpZHRoKHRoaXMuZ2V0R3JpZElubmVyV2lkdGgoKSk7aWYoYj09PXRydWUpe3RoaXMudXBkYXRlSGVhZGVycygpO3RoaXMudXBkYXRlSGVhZGVyU29ydFN0YXRlKCl9dGhpcy5wcm9jZXNzUm93cygwLHRydWUpO3RoaXMubGF5b3V0KCk7dGhpcy5hcHBseUVtcHR5VGV4dCgpO3RoaXMuZmlyZUV2ZW50KCJyZWZyZXNoIix0aGlzKX0scmVuZGVySGVhZGVyczpFeHQuZW1wdHlGbixmaXRDb2x1bW5zOkV4dC5lbXB0eUZuLHJlc2l6ZUNvbHVtbkhlYWRlcnM6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5ncmlkLnRvcEF4aXM7aWYoYS5yZW5kZXJlZCl7YS5lbC5zZXRXaWR0aChiKX19LHJlc2l6ZVJvd0hlYWRlcnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldFRvdGFsUm93SGVhZGVyV2lkdGgoKSxiPVN0cmluZy5mb3JtYXQoIm1hcmdpbi1sZWZ0OiB7MH1weDsiLGEpO3RoaXMucm93SGVhZGVyc0VsLnNldFdpZHRoKGEpO3RoaXMubWFpbkJvZHkuYXBwbHlTdHlsZXMoYik7RXh0LmZseSh0aGlzLmlubmVySGQpLmFwcGx5U3R5bGVzKGIpO3RoaXMuaGVhZGVyVGl0bGVFbC5zZXRXaWR0aChhKTt0aGlzLmhlYWRlclRpdGxlRWwuc2V0SGVpZ2h0KHRoaXMuZ2V0VG90YWxDb2x1bW5IZWFkZXJIZWlnaHQoKSl9LHJlc2l6ZUFsbFJvd3M6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcy5nZXRSb3dzKCksYz1kLmxlbmd0aCxhO2ZvcihhPTA7YTxjO2ErKyl7RXh0LmZseShkW2FdKS5zZXRXaWR0aChiKTtFeHQuZmx5KGRbYV0pLmNoaWxkKCJ0YWJsZSIpLnNldFdpZHRoKGIpfX0sdXBkYXRlSGVhZGVyczpmdW5jdGlvbigpe3RoaXMucmVuZGVyR3JvdXBSb3dIZWFkZXJzKCk7dGhpcy5yZW5kZXJHcm91cENvbHVtbkhlYWRlcnMoKX0scmVuZGVyR3JvdXBSb3dIZWFkZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ncmlkLmxlZnRBeGlzO3RoaXMucmVzaXplUm93SGVhZGVycygpO2EucmVuZGVyZWQ9ZmFsc2U7YS5yZW5kZXIodGhpcy5yb3dIZWFkZXJzRWwpO3RoaXMuc2V0VGl0bGUodGhpcy50aXRsZSl9LHNldFRpdGxlOmZ1bmN0aW9uKGEpe3RoaXMuaGVhZGVyVGl0bGVFbC5jaGlsZCgic3BhbiIpLmRvbS5pbm5lckhUTUw9YX0scmVuZGVyR3JvdXBDb2x1bW5IZWFkZXJzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5ncmlkLnRvcEF4aXM7YS5yZW5kZXJlZD1mYWxzZTthLnJlbmRlcih0aGlzLmlubmVySGQuZmlyc3RDaGlsZCl9LGlzTWVudURpc2FibGVkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRydWV9fSk7RXh0LmdyaWQuUGl2b3RBeGlzPUV4dC5leHRlbmQoRXh0LkNvbXBvbmVudCx7b3JpZW50YXRpb246Imhvcml6b250YWwiLGRlZmF1bHRIZWFkZXJXaWR0aDo4MCxwYWRkaW5nV2lkdGg6NyxzZXREaW1lbnNpb25zOmZ1bmN0aW9uKGEpe3RoaXMuZGltZW5zaW9ucz1hfSxvblJlbmRlcjpmdW5jdGlvbihiLGEpe3ZhciBjPXRoaXMub3JpZW50YXRpb249PSJob3Jpem9udGFsIj90aGlzLnJlbmRlckhvcml6b250YWxSb3dzKCk6dGhpcy5yZW5kZXJWZXJ0aWNhbFJvd3MoKTt0aGlzLmVsPUV4dC5Eb21IZWxwZXIub3ZlcndyaXRlKGIuZG9tLHt0YWc6InRhYmxlIixjbjpjfSx0cnVlKX0scmVuZGVySG9yaXpvbnRhbFJvd3M6ZnVuY3Rpb24oKXt2YXIgaz10aGlzLmJ1aWxkSGVhZGVycygpLGE9ay5sZW5ndGgsZz1bXSxjLGgsZSxkLGI7Zm9yKGQ9MDtkPGE7ZCsrKXtjPVtdO2g9a1tkXS5pdGVtcztlPWgubGVuZ3RoO2ZvcihiPTA7YjxlO2IrKyl7Yy5wdXNoKHt0YWc6InRkIixodG1sOmhbYl0uaGVhZGVyLGNvbHNwYW46aFtiXS5zcGFufSl9Z1tkXT17dGFnOiJ0ciIsY246Y319cmV0dXJuIGd9LHJlbmRlclZlcnRpY2FsUm93czpmdW5jdGlvbigpe3ZhciBiPXRoaXMuYnVpbGRIZWFkZXJzKCksaz1iLmxlbmd0aCxhPVtdLG09W10saCxjLGwsZyxlLGQ7Zm9yKGU9MDtlPGs7ZSsrKXtjPWJbZV07Zz1jLndpZHRofHw4MDtoPWMuaXRlbXMubGVuZ3RoO2ZvcihkPTA7ZDxoO2QrKyl7bD1jLml0ZW1zW2RdO2FbbC5zdGFydF09YVtsLnN0YXJ0XXx8W107YVtsLnN0YXJ0XS5wdXNoKHt0YWc6InRkIixodG1sOmwuaGVhZGVyLHJvd3NwYW46bC5zcGFuLHdpZHRoOkV4dC5pc0JvcmRlckJveD9nOmctdGhpcy5wYWRkaW5nV2lkdGh9KX19aD1hLmxlbmd0aDtmb3IoZT0wO2U8aDtlKyspe21bZV09e3RhZzoidHIiLGNuOmFbZV19fXJldHVybiBtfSxnZXRUdXBsZXM6ZnVuY3Rpb24oKXt2YXIgYj1uZXcgRXh0LmRhdGEuU3RvcmUoe30pO2IuZGF0YT10aGlzLnN0b3JlLmRhdGEuY2xvbmUoKTtiLmZpZWxkcz10aGlzLnN0b3JlLmZpZWxkczt2YXIgbD1bXSxhPXRoaXMuZGltZW5zaW9ucyxjPWEubGVuZ3RoLGo7Zm9yKGo9MDtqPGM7aisrKXtsLnB1c2goe2ZpZWxkOmFbal0uZGF0YUluZGV4LGRpcmVjdGlvbjphW2pdLmRpcmVjdGlvbnx8IkFTQyJ9KX1iLnNvcnQobCk7dmFyIGU9Yi5kYXRhLml0ZW1zLG49W10saz1bXSxvLGgsZCxnLG07Yz1lLmxlbmd0aDtmb3Ioaj0wO2o8YztqKyspe2Q9dGhpcy5nZXRSZWNvcmRJbmZvKGVbal0pO2c9ZC5kYXRhO2g9IiI7Zm9yKG0gaW4gZyl7aCs9Z1ttXSsiLS0tIn1pZihuLmluZGV4T2YoaCk9PS0xKXtuLnB1c2goaCk7ay5wdXNoKGQpfX1iLmRlc3Ryb3koKTtyZXR1cm4ga30sZ2V0UmVjb3JkSW5mbzpmdW5jdGlvbihhKXt2YXIgZT10aGlzLmRpbWVuc2lvbnMsZD1lLmxlbmd0aCxoPXt9LGosYyxiO2ZvcihiPTA7YjxkO2IrKyl7aj1lW2JdO2M9ai5kYXRhSW5kZXg7aFtjXT1hLmdldChjKX12YXIgZz1mdW5jdGlvbihpKXtyZXR1cm4gZnVuY3Rpb24oayl7Zm9yKHZhciBsIGluIGkpe2lmKGsuZ2V0KGwpIT1pW2xdKXtyZXR1cm4gZmFsc2V9fXJldHVybiB0cnVlfX07cmV0dXJue2RhdGE6aCxtYXRjaGVyOmcoaCl9fSxidWlsZEhlYWRlcnM6ZnVuY3Rpb24oKXt2YXIgbD10aGlzLmdldFR1cGxlcygpLG09bC5sZW5ndGgsYT10aGlzLmRpbWVuc2lvbnMsZSxyPWEubGVuZ3RoLGM9W10sbyxzLG4scSxwLGIsayxoLGcsZDtmb3IoZz0wO2c8cjtnKyspe2U9YVtnXTtzPVtdO3A9MDtiPTA7Zm9yKGQ9MDtkPG07ZCsrKXtvPWxbZF07az1kPT0obS0xKTtuPW8uZGF0YVtlLmRhdGFJbmRleF07aD1xIT11bmRlZmluZWQmJnEhPW47aWYoZz4wJiZkPjApe2g9aHx8by5kYXRhW2FbZy0xXS5kYXRhSW5kZXhdIT1sW2QtMV0uZGF0YVthW2ctMV0uZGF0YUluZGV4XX1pZihoKXtzLnB1c2goe2hlYWRlcjpxLHNwYW46cCxzdGFydDpifSk7Yis9cDtwPTB9aWYoayl7cy5wdXNoKHtoZWFkZXI6bixzcGFuOnArMSxzdGFydDpifSk7Yis9cDtwPTB9cT1uO3ArK31jLnB1c2goe2l0ZW1zOnMsd2lkdGg6ZS53aWR0aHx8dGhpcy5kZWZhdWx0SGVhZGVyV2lkdGh9KTtxPXVuZGVmaW5lZH1yZXR1cm4gY319KTtFeHQuZ3JpZC5IZWFkZXJEcmFnWm9uZT1FeHQuZXh0ZW5kKEV4dC5kZC5EcmFnWm9uZSx7bWF4RHJhZ1dpZHRoOjEyMCxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGMsYil7dGhpcy5ncmlkPWE7dGhpcy52aWV3PWEuZ2V0VmlldygpO3RoaXMuZGRHcm91cD0iZ3JpZEhlYWRlciIrdGhpcy5ncmlkLmdldEdyaWRFbCgpLmlkO0V4dC5ncmlkLkhlYWRlckRyYWdab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGMpO2lmKGIpe3RoaXMuc2V0SGFuZGxlRWxJZChFeHQuaWQoYykpO3RoaXMuc2V0T3V0ZXJIYW5kbGVFbElkKEV4dC5pZChiKSl9dGhpcy5zY3JvbGw9ZmFsc2V9LGdldERyYWdEYXRhOmZ1bmN0aW9uKGMpe3ZhciBhPUV4dC5saWIuRXZlbnQuZ2V0VGFyZ2V0KGMpLGI9dGhpcy52aWV3LmZpbmRIZWFkZXJDZWxsKGEpO2lmKGIpe3JldHVybntkZGVsOmIuZmlyc3RDaGlsZCxoZWFkZXI6Yn19cmV0dXJuIGZhbHNlfSxvbkluaXREcmFnOmZ1bmN0aW9uKGEpe3RoaXMuZHJhZ0hlYWRlcnNEaXNhYmxlZD10aGlzLnZpZXcuaGVhZGVyc0Rpc2FibGVkO3RoaXMudmlldy5oZWFkZXJzRGlzYWJsZWQ9dHJ1ZTt2YXIgYj10aGlzLmRyYWdEYXRhLmRkZWwuY2xvbmVOb2RlKHRydWUpO2IuaWQ9RXh0LmlkKCk7Yi5zdHlsZS53aWR0aD1NYXRoLm1pbih0aGlzLmRyYWdEYXRhLmhlYWRlci5vZmZzZXRXaWR0aCx0aGlzLm1heERyYWdXaWR0aCkrInB4Ijt0aGlzLnByb3h5LnVwZGF0ZShiKTtyZXR1cm4gdHJ1ZX0sYWZ0ZXJWYWxpZERyb3A6ZnVuY3Rpb24oKXt0aGlzLmNvbXBsZXRlRHJvcCgpfSxhZnRlckludmFsaWREcm9wOmZ1bmN0aW9uKCl7dGhpcy5jb21wbGV0ZURyb3AoKX0sY29tcGxldGVEcm9wOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52aWV3LGI9dGhpcy5kcmFnSGVhZGVyc0Rpc2FibGVkO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLmhlYWRlcnNEaXNhYmxlZD1ifSw1MCl9fSk7RXh0LmdyaWQuSGVhZGVyRHJvcFpvbmU9RXh0LmV4dGVuZChFeHQuZGQuRHJvcFpvbmUse3Byb3h5T2Zmc2V0czpbLTQsLTldLGZseTpFeHQuRWxlbWVudC5mbHksY29uc3RydWN0b3I6ZnVuY3Rpb24oYSxjLGIpe3RoaXMuZ3JpZD1hO3RoaXMudmlldz1hLmdldFZpZXcoKTt0aGlzLnByb3h5VG9wPUV4dC5Eb21IZWxwZXIuYXBwZW5kKGRvY3VtZW50LmJvZHkse2NsczoiY29sLW1vdmUtdG9wIixodG1sOiImIzE2MDsifSx0cnVlKTt0aGlzLnByb3h5Qm90dG9tPUV4dC5Eb21IZWxwZXIuYXBwZW5kKGRvY3VtZW50LmJvZHkse2NsczoiY29sLW1vdmUtYm90dG9tIixodG1sOiImIzE2MDsifSx0cnVlKTt0aGlzLnByb3h5VG9wLmhpZGU9dGhpcy5wcm94eUJvdHRvbS5oaWRlPWZ1bmN0aW9uKCl7dGhpcy5zZXRMZWZ0VG9wKC0xMDAsLTEwMCk7dGhpcy5zZXRTdHlsZSgidmlzaWJpbGl0eSIsImhpZGRlbiIpfTt0aGlzLmRkR3JvdXA9ImdyaWRIZWFkZXIiK3RoaXMuZ3JpZC5nZXRHcmlkRWwoKS5pZDtFeHQuZ3JpZC5IZWFkZXJEcm9wWm9uZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxhLmdldEdyaWRFbCgpLmRvbSl9LGdldFRhcmdldEZyb21FdmVudDpmdW5jdGlvbihjKXt2YXIgYT1FeHQubGliLkV2ZW50LmdldFRhcmdldChjKSxiPXRoaXMudmlldy5maW5kQ2VsbEluZGV4KGEpO2lmKGIhPT1mYWxzZSl7cmV0dXJuIHRoaXMudmlldy5nZXRIZWFkZXJDZWxsKGIpfX0sbmV4dFZpc2libGU6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy52aWV3LGE9dGhpcy5ncmlkLmNvbE1vZGVsO2M9Yy5uZXh0U2libGluZzt3aGlsZShjKXtpZighYS5pc0hpZGRlbihiLmdldENlbGxJbmRleChjKSkpe3JldHVybiBjfWM9Yy5uZXh0U2libGluZ31yZXR1cm4gbnVsbH0scHJldlZpc2libGU6ZnVuY3Rpb24oYyl7dmFyIGI9dGhpcy52aWV3LGE9dGhpcy5ncmlkLmNvbE1vZGVsO2M9Yy5wcmV2U2libGluZzt3aGlsZShjKXtpZighYS5pc0hpZGRlbihiLmdldENlbGxJbmRleChjKSkpe3JldHVybiBjfWM9Yy5wcmV2U2libGluZ31yZXR1cm4gbnVsbH0scG9zaXRpb25JbmRpY2F0b3I6ZnVuY3Rpb24oZCxrLGope3ZhciBhPUV4dC5saWIuRXZlbnQuZ2V0UGFnZVgoaiksZz1FeHQubGliLkRvbS5nZXRSZWdpb24oay5maXJzdENoaWxkKSxjLGksYj1nLnRvcCt0aGlzLnByb3h5T2Zmc2V0c1sxXTtpZigoZy5yaWdodC1hKTw9KGcucmlnaHQtZy5sZWZ0KS8yKXtjPWcucmlnaHQrdGhpcy52aWV3LmJvcmRlcldpZHRoO2k9ImFmdGVyIn1lbHNle2M9Zy5sZWZ0O2k9ImJlZm9yZSJ9aWYodGhpcy5ncmlkLmNvbE1vZGVsLmlzRml4ZWQodGhpcy52aWV3LmdldENlbGxJbmRleChrKSkpe3JldHVybiBmYWxzZX1jKz10aGlzLnByb3h5T2Zmc2V0c1swXTt0aGlzLnByb3h5VG9wLnNldExlZnRUb3AoYyxiKTt0aGlzLnByb3h5VG9wLnNob3coKTtpZighdGhpcy5ib3R0b21PZmZzZXQpe3RoaXMuYm90dG9tT2Zmc2V0PXRoaXMudmlldy5tYWluSGQuZ2V0SGVpZ2h0KCl9dGhpcy5wcm94eUJvdHRvbS5zZXRMZWZ0VG9wKGMsYit0aGlzLnByb3h5VG9wLmRvbS5vZmZzZXRIZWlnaHQrdGhpcy5ib3R0b21PZmZzZXQpO3RoaXMucHJveHlCb3R0b20uc2hvdygpO3JldHVybiBpfSxvbk5vZGVFbnRlcjpmdW5jdGlvbihkLGEsYyxiKXtpZihiLmhlYWRlciE9ZCl7dGhpcy5wb3NpdGlvbkluZGljYXRvcihiLmhlYWRlcixkLGMpfX0sb25Ob2RlT3ZlcjpmdW5jdGlvbihnLGIsZCxjKXt2YXIgYT1mYWxzZTtpZihjLmhlYWRlciE9Zyl7YT10aGlzLnBvc2l0aW9uSW5kaWNhdG9yKGMuaGVhZGVyLGcsZCl9aWYoIWEpe3RoaXMucHJveHlUb3AuaGlkZSgpO3RoaXMucHJveHlCb3R0b20uaGlkZSgpfXJldHVybiBhP3RoaXMuZHJvcEFsbG93ZWQ6dGhpcy5kcm9wTm90QWxsb3dlZH0sb25Ob2RlT3V0OmZ1bmN0aW9uKGQsYSxjLGIpe3RoaXMucHJveHlUb3AuaGlkZSgpO3RoaXMucHJveHlCb3R0b20uaGlkZSgpfSxvbk5vZGVEcm9wOmZ1bmN0aW9uKGIsbSxnLGMpe3ZhciBkPWMuaGVhZGVyO2lmKGQhPWIpe3ZhciBrPXRoaXMuZ3JpZC5jb2xNb2RlbCxqPUV4dC5saWIuRXZlbnQuZ2V0UGFnZVgoZyksYT1FeHQubGliLkRvbS5nZXRSZWdpb24oYi5maXJzdENoaWxkKSxvPShhLnJpZ2h0LWopPD0oKGEucmlnaHQtYS5sZWZ0KS8yKT8iYWZ0ZXIiOiJiZWZvcmUiLGk9dGhpcy52aWV3LmdldENlbGxJbmRleChkKSxsPXRoaXMudmlldy5nZXRDZWxsSW5kZXgoYik7aWYobz09ImFmdGVyIil7bCsrfWlmKGk8bCl7bC0tfWsubW92ZUNvbHVtbihpLGwpO3JldHVybiB0cnVlfXJldHVybiBmYWxzZX19KTtFeHQuZ3JpZC5HcmlkVmlldy5Db2x1bW5EcmFnWm9uZT1FeHQuZXh0ZW5kKEV4dC5ncmlkLkhlYWRlckRyYWdab25lLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhLGIpe0V4dC5ncmlkLkdyaWRWaWV3LkNvbHVtbkRyYWdab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEsYixudWxsKTt0aGlzLnByb3h5LmVsLmFkZENsYXNzKCJ4LWdyaWQzLWNvbC1kZCIpfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oYSl7fSxjYWxsSGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKGEpe0V4dC5ncmlkLkdyaWRWaWV3LkNvbHVtbkRyYWdab25lLnN1cGVyY2xhc3MuaGFuZGxlTW91c2VEb3duLmNhbGwodGhpcyxhKX19KTtFeHQuZ3JpZC5TcGxpdERyYWdab25lPUV4dC5leHRlbmQoRXh0LmRkLkREUHJveHkse2ZseTpFeHQuRWxlbWVudC5mbHksY29uc3RydWN0b3I6ZnVuY3Rpb24oYSxjLGIpe3RoaXMuZ3JpZD1hO3RoaXMudmlldz1hLmdldFZpZXcoKTt0aGlzLnByb3h5PXRoaXMudmlldy5yZXNpemVQcm94eTtFeHQuZ3JpZC5TcGxpdERyYWdab25lLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGMsImdyaWRTcGxpdHRlcnMiK3RoaXMuZ3JpZC5nZXRHcmlkRWwoKS5pZCx7ZHJhZ0VsSWQ6RXh0LmlkKHRoaXMucHJveHkuZG9tKSxyZXNpemVGcmFtZTpmYWxzZX0pO3RoaXMuc2V0SGFuZGxlRWxJZChFeHQuaWQoYykpO3RoaXMuc2V0T3V0ZXJIYW5kbGVFbElkKEV4dC5pZChiKSk7dGhpcy5zY3JvbGw9ZmFsc2V9LGI0U3RhcnREcmFnOmZ1bmN0aW9uKGEsZCl7dGhpcy52aWV3LmhlYWRlcnNEaXNhYmxlZD10cnVlO3RoaXMucHJveHkuc2V0SGVpZ2h0KHRoaXMudmlldy5tYWluV3JhcC5nZXRIZWlnaHQoKSk7dmFyIGI9dGhpcy5jbS5nZXRDb2x1bW5XaWR0aCh0aGlzLmNlbGxJbmRleCk7dmFyIGM9TWF0aC5tYXgoYi10aGlzLmdyaWQubWluQ29sdW1uV2lkdGgsMCk7dGhpcy5yZXNldENvbnN0cmFpbnRzKCk7dGhpcy5zZXRYQ29uc3RyYWludChjLDEwMDApO3RoaXMuc2V0WUNvbnN0cmFpbnQoMCwwKTt0aGlzLm1pblg9YS1jO3RoaXMubWF4WD1hKzEwMDA7dGhpcy5zdGFydFBvcz1hO0V4dC5kZC5ERFByb3h5LnByb3RvdHlwZS5iNFN0YXJ0RHJhZy5jYWxsKHRoaXMsYSxkKX0saGFuZGxlTW91c2VEb3duOmZ1bmN0aW9uKGMpe3ZhciBiPUV4dC5FdmVudE9iamVjdC5zZXRFdmVudChjKTt2YXIgYT10aGlzLmZseShiLmdldFRhcmdldCgpKTtpZihhLmhhc0NsYXNzKCJ4LWdyaWQtc3BsaXQiKSl7dGhpcy5jZWxsSW5kZXg9dGhpcy52aWV3LmdldENlbGxJbmRleChhLmRvbSk7dGhpcy5zcGxpdD1hLmRvbTt0aGlzLmNtPXRoaXMuZ3JpZC5jb2xNb2RlbDtpZih0aGlzLmNtLmlzUmVzaXphYmxlKHRoaXMuY2VsbEluZGV4KSYmIXRoaXMuY20uaXNGaXhlZCh0aGlzLmNlbGxJbmRleCkpe0V4dC5ncmlkLlNwbGl0RHJhZ1pvbmUuc3VwZXJjbGFzcy5oYW5kbGVNb3VzZURvd24uYXBwbHkodGhpcyxhcmd1bWVudHMpfX19LGVuZERyYWc6ZnVuY3Rpb24oYyl7dGhpcy52aWV3LmhlYWRlcnNEaXNhYmxlZD1mYWxzZTt2YXIgYT1NYXRoLm1heCh0aGlzLm1pblgsRXh0LmxpYi5FdmVudC5nZXRQYWdlWChjKSk7dmFyIGI9YS10aGlzLnN0YXJ0UG9zO3RoaXMudmlldy5vbkNvbHVtblNwbGl0dGVyTW92ZWQodGhpcy5jZWxsSW5kZXgsdGhpcy5jbS5nZXRDb2x1bW5XaWR0aCh0aGlzLmNlbGxJbmRleCkrYil9LGF1dG9PZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLnNldERlbHRhKDAsMCl9fSk7RXh0LmdyaWQuR3JpZERyYWdab25lPWZ1bmN0aW9uKGIsYSl7dGhpcy52aWV3PWIuZ2V0VmlldygpO0V4dC5ncmlkLkdyaWREcmFnWm9uZS5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyx0aGlzLnZpZXcubWFpbkJvZHkuZG9tLGEpO3RoaXMuc2Nyb2xsPWZhbHNlO3RoaXMuZ3JpZD1iO3RoaXMuZGRlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLmRkZWwuY2xhc3NOYW1lPSJ4LWdyaWQtZGQtd3JhcCJ9O0V4dC5leHRlbmQoRXh0LmdyaWQuR3JpZERyYWdab25lLEV4dC5kZC5EcmFnWm9uZSx7ZGRHcm91cDoiR3JpZEREIixnZXREcmFnRGF0YTpmdW5jdGlvbihiKXt2YXIgYT1FeHQubGliLkV2ZW50LmdldFRhcmdldChiKTt2YXIgZD10aGlzLnZpZXcuZmluZFJvd0luZGV4KGEpO2lmKGQhPT1mYWxzZSl7dmFyIGM9dGhpcy5ncmlkLnNlbE1vZGVsO2lmKCFjLmlzU2VsZWN0ZWQoZCl8fGIuaGFzTW9kaWZpZXIoKSl7Yy5oYW5kbGVNb3VzZURvd24odGhpcy5ncmlkLGQsYil9cmV0dXJue2dyaWQ6dGhpcy5ncmlkLGRkZWw6dGhpcy5kZGVsLHJvd0luZGV4OmQsc2VsZWN0aW9uczpjLmdldFNlbGVjdGlvbnMoKX19cmV0dXJuIGZhbHNlfSxvbkluaXREcmFnOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZHJhZ0RhdGE7dGhpcy5kZGVsLmlubmVySFRNTD10aGlzLmdyaWQuZ2V0RHJhZ0Ryb3BUZXh0KCk7dGhpcy5wcm94eS51cGRhdGUodGhpcy5kZGVsKX0sYWZ0ZXJSZXBhaXI6ZnVuY3Rpb24oKXt0aGlzLmRyYWdnaW5nPWZhbHNlfSxnZXRSZXBhaXJYWTpmdW5jdGlvbihiLGEpe3JldHVybiBmYWxzZX0sb25FbmREcmFnOmZ1bmN0aW9uKGEsYil7fSxvblZhbGlkRHJvcDpmdW5jdGlvbihhLGIsYyl7dGhpcy5oaWRlUHJveHkoKX0sYmVmb3JlSW52YWxpZERyb3A6ZnVuY3Rpb24oYSxiKXt9fSk7RXh0LmdyaWQuQ29sdW1uTW9kZWw9RXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLHtkZWZhdWx0V2lkdGg6MTAwLGRlZmF1bHRTb3J0YWJsZTpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtpZihhLmNvbHVtbnMpe0V4dC5hcHBseSh0aGlzLGEpO3RoaXMuc2V0Q29uZmlnKGEuY29sdW1ucyx0cnVlKX1lbHNle3RoaXMuc2V0Q29uZmlnKGEsdHJ1ZSl9dGhpcy5hZGRFdmVudHMoIndpZHRoY2hhbmdlIiwiaGVhZGVyY2hhbmdlIiwiaGlkZGVuY2hhbmdlIiwiY29sdW1ubW92ZWQiLCJjb25maWdjaGFuZ2UiKTtFeHQuZ3JpZC5Db2x1bW5Nb2RlbC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9LGdldENvbHVtbklkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbmZpZ1thXS5pZH0sZ2V0Q29sdW1uQXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29uZmlnW2FdfSxzZXRDb25maWc6ZnVuY3Rpb24oZCxiKXt2YXIgZSxoLGE7aWYoIWIpe2RlbGV0ZSB0aGlzLnRvdGFsV2lkdGg7Zm9yKGU9MCxhPXRoaXMuY29uZmlnLmxlbmd0aDtlPGE7ZSsrKXtoPXRoaXMuY29uZmlnW2VdO2lmKGguc2V0RWRpdG9yKXtoLnNldEVkaXRvcihudWxsKX19fXRoaXMuZGVmYXVsdHM9RXh0LmFwcGx5KHt3aWR0aDp0aGlzLmRlZmF1bHRXaWR0aCxzb3J0YWJsZTp0aGlzLmRlZmF1bHRTb3J0YWJsZX0sdGhpcy5kZWZhdWx0cyk7dGhpcy5jb25maWc9ZDt0aGlzLmxvb2t1cD17fTtmb3IoZT0wLGE9ZC5sZW5ndGg7ZTxhO2UrKyl7aD1FeHQuYXBwbHlJZihkW2VdLHRoaXMuZGVmYXVsdHMpO2lmKEV4dC5pc0VtcHR5KGguaWQpKXtoLmlkPWV9aWYoIWguaXNDb2x1bW4pe3ZhciBnPUV4dC5ncmlkLkNvbHVtbi50eXBlc1toLnh0eXBlfHwiZ3JpZGNvbHVtbiJdO2g9bmV3IGcoaCk7ZFtlXT1ofXRoaXMubG9va3VwW2guaWRdPWh9aWYoIWIpe3RoaXMuZmlyZUV2ZW50KCJjb25maWdjaGFuZ2UiLHRoaXMpfX0sZ2V0Q29sdW1uQnlJZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb29rdXBbYV19LGdldEluZGV4QnlJZDpmdW5jdGlvbihjKXtmb3IodmFyIGI9MCxhPXRoaXMuY29uZmlnLmxlbmd0aDtiPGE7YisrKXtpZih0aGlzLmNvbmZpZ1tiXS5pZD09Yyl7cmV0dXJuIGJ9fXJldHVybiAtMX0sbW92ZUNvbHVtbjpmdW5jdGlvbihlLGIpe3ZhciBhPXRoaXMuY29uZmlnLGQ9YVtlXTthLnNwbGljZShlLDEpO2Euc3BsaWNlKGIsMCxkKTt0aGlzLmRhdGFNYXA9bnVsbDt0aGlzLmZpcmVFdmVudCgiY29sdW1ubW92ZWQiLHRoaXMsZSxiKX0sZ2V0Q29sdW1uQ291bnQ6ZnVuY3Rpb24oYil7dmFyIGQ9dGhpcy5jb25maWcubGVuZ3RoLGU9MCxhO2lmKGI9PT10cnVlKXtmb3IoYT0wO2E8ZDthKyspe2lmKCF0aGlzLmlzSGlkZGVuKGEpKXtlKyt9fXJldHVybiBlfXJldHVybiBkfSxnZXRDb2x1bW5zQnk6ZnVuY3Rpb24oZyxlKXt2YXIgYj10aGlzLmNvbmZpZyxoPWIubGVuZ3RoLGE9W10sZCxqO2ZvcihkPTA7ZDxoO2QrKyl7aj1iW2RdO2lmKGcuY2FsbChlfHx0aGlzLGosZCk9PT10cnVlKXthW2EubGVuZ3RoXT1qfX1yZXR1cm4gYX0saXNTb3J0YWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gISF0aGlzLmNvbmZpZ1thXS5zb3J0YWJsZX0saXNNZW51RGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuICEhdGhpcy5jb25maWdbYV0ubWVudURpc2FibGVkfSxnZXRSZW5kZXJlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb25maWdbYV0ucmVuZGVyZXJ8fEV4dC5ncmlkLkNvbHVtbk1vZGVsLmRlZmF1bHRSZW5kZXJlcn0sZ2V0UmVuZGVyZXJTY29wZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb25maWdbYV0uc2NvcGV9LHNldFJlbmRlcmVyOmZ1bmN0aW9uKGEsYil7dGhpcy5jb25maWdbYV0ucmVuZGVyZXI9Yn0sZ2V0Q29sdW1uV2lkdGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jb25maWdbYV0ud2lkdGg7aWYodHlwZW9mIGIhPSJudW1iZXIiKXtiPXRoaXMuZGVmYXVsdFdpZHRofXJldHVybiBifSxzZXRDb2x1bW5XaWR0aDpmdW5jdGlvbihiLGMsYSl7dGhpcy5jb25maWdbYl0ud2lkdGg9Yzt0aGlzLnRvdGFsV2lkdGg9bnVsbDtpZighYSl7dGhpcy5maXJlRXZlbnQoIndpZHRoY2hhbmdlIix0aGlzLGIsYyl9fSxnZXRUb3RhbFdpZHRoOmZ1bmN0aW9uKGIpe2lmKCF0aGlzLnRvdGFsV2lkdGgpe3RoaXMudG90YWxXaWR0aD0wO2Zvcih2YXIgYz0wLGE9dGhpcy5jb25maWcubGVuZ3RoO2M8YTtjKyspe2lmKGJ8fCF0aGlzLmlzSGlkZGVuKGMpKXt0aGlzLnRvdGFsV2lkdGgrPXRoaXMuZ2V0Q29sdW1uV2lkdGgoYyl9fX1yZXR1cm4gdGhpcy50b3RhbFdpZHRofSxnZXRDb2x1bW5IZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29uZmlnW2FdLmhlYWRlcn0sc2V0Q29sdW1uSGVhZGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5jb25maWdbYV0uaGVhZGVyPWI7dGhpcy5maXJlRXZlbnQoImhlYWRlcmNoYW5nZSIsdGhpcyxhLGIpfSxnZXRDb2x1bW5Ub29sdGlwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbmZpZ1thXS50b29sdGlwfSxzZXRDb2x1bW5Ub29sdGlwOmZ1bmN0aW9uKGEsYil7dGhpcy5jb25maWdbYV0udG9vbHRpcD1ifSxnZXREYXRhSW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY29uZmlnW2FdLmRhdGFJbmRleH0sc2V0RGF0YUluZGV4OmZ1bmN0aW9uKGEsYil7dGhpcy5jb25maWdbYV0uZGF0YUluZGV4PWJ9LGZpbmRDb2x1bW5JbmRleDpmdW5jdGlvbihkKXt2YXIgZT10aGlzLmNvbmZpZztmb3IodmFyIGI9MCxhPWUubGVuZ3RoO2I8YTtiKyspe2lmKGVbYl0uZGF0YUluZGV4PT1kKXtyZXR1cm4gYn19cmV0dXJuIC0xfSxpc0NlbGxFZGl0YWJsZTpmdW5jdGlvbihiLGUpe3ZhciBkPXRoaXMuY29uZmlnW2JdLGE9ZC5lZGl0YWJsZTtyZXR1cm4gISEoYXx8KCFFeHQuaXNEZWZpbmVkKGEpJiZkLmVkaXRvcikpfSxnZXRDZWxsRWRpdG9yOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuY29uZmlnW2FdLmdldENlbGxFZGl0b3IoYil9LHNldEVkaXRhYmxlOmZ1bmN0aW9uKGEsYil7dGhpcy5jb25maWdbYV0uZWRpdGFibGU9Yn0saXNIaWRkZW46ZnVuY3Rpb24oYSl7cmV0dXJuICEhdGhpcy5jb25maWdbYV0uaGlkZGVufSxpc0ZpeGVkOmZ1bmN0aW9uKGEpe3JldHVybiAhIXRoaXMuY29uZmlnW2FdLmZpeGVkfSxpc1Jlc2l6YWJsZTpmdW5jdGlvbihhKXtyZXR1cm4gYT49MCYmdGhpcy5jb25maWdbYV0ucmVzaXphYmxlIT09ZmFsc2UmJnRoaXMuY29uZmlnW2FdLmZpeGVkIT09dHJ1ZX0sc2V0SGlkZGVuOmZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5jb25maWdbYV07aWYoZC5oaWRkZW4hPT1iKXtkLmhpZGRlbj1iO3RoaXMudG90YWxXaWR0aD1udWxsO3RoaXMuZmlyZUV2ZW50KCJoaWRkZW5jaGFuZ2UiLHRoaXMsYSxiKX19LHNldEVkaXRvcjpmdW5jdGlvbihhLGIpe3RoaXMuY29uZmlnW2FdLnNldEVkaXRvcihiKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBiPXRoaXMuY29uZmlnLmxlbmd0aCxhPTA7Zm9yKDthPGI7YSsrKXt0aGlzLmNvbmZpZ1thXS5kZXN0cm95KCl9ZGVsZXRlIHRoaXMuY29uZmlnO2RlbGV0ZSB0aGlzLmxvb2t1cDt0aGlzLnB1cmdlTGlzdGVuZXJzKCl9LHNldFN0YXRlOmZ1bmN0aW9uKGEsYil7Yj1FeHQuYXBwbHlJZihiLHRoaXMuZGVmYXVsdHMpO0V4dC5hcHBseSh0aGlzLmNvbmZpZ1thXSxiKX19KTtFeHQuZ3JpZC5Db2x1bW5Nb2RlbC5kZWZhdWx0UmVuZGVyZXI9ZnVuY3Rpb24oYSl7aWYodHlwZW9mIGE9PSJzdHJpbmciJiZhLmxlbmd0aDwxKXtyZXR1cm4iJiMxNjA7In1yZXR1cm4gYX07RXh0LmdyaWQuQWJzdHJhY3RTZWxlY3Rpb25Nb2RlbD1FeHQuZXh0ZW5kKEV4dC51dGlsLk9ic2VydmFibGUse2NvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7dGhpcy5sb2NrZWQ9ZmFsc2U7RXh0LmdyaWQuQWJzdHJhY3RTZWxlY3Rpb25Nb2RlbC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9LGluaXQ6ZnVuY3Rpb24oYSl7dGhpcy5ncmlkPWE7aWYodGhpcy5sb2NrT25Jbml0KXtkZWxldGUgdGhpcy5sb2NrT25Jbml0O3RoaXMubG9ja2VkPWZhbHNlO3RoaXMubG9jaygpfXRoaXMuaW5pdEV2ZW50cygpfSxsb2NrOmZ1bmN0aW9uKCl7aWYoIXRoaXMubG9ja2VkKXt0aGlzLmxvY2tlZD10cnVlO3ZhciBhPXRoaXMuZ3JpZDtpZihhKXthLmdldFZpZXcoKS5vbih7c2NvcGU6dGhpcyxiZWZvcmVyZWZyZXNoOnRoaXMuc29ydFVuTG9jayxyZWZyZXNoOnRoaXMuc29ydExvY2t9KX1lbHNle3RoaXMubG9ja09uSW5pdD10cnVlfX19LHNvcnRMb2NrOmZ1bmN0aW9uKCl7dGhpcy5sb2NrZWQ9dHJ1ZX0sc29ydFVuTG9jazpmdW5jdGlvbigpe3RoaXMubG9ja2VkPWZhbHNlfSx1bmxvY2s6ZnVuY3Rpb24oKXtpZih0aGlzLmxvY2tlZCl7dGhpcy5sb2NrZWQ9ZmFsc2U7dmFyIGE9dGhpcy5ncmlkLGI7aWYoYSl7Yj1hLmdldFZpZXcoKTtiLnVuKCJiZWZvcmVyZWZyZXNoIix0aGlzLnNvcnRVbkxvY2ssdGhpcyk7Yi51bigicmVmcmVzaCIsdGhpcy5zb3J0TG9jayx0aGlzKX1lbHNle2RlbGV0ZSB0aGlzLmxvY2tPbkluaXR9fX0saXNMb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NrZWR9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnVubG9jaygpO3RoaXMucHVyZ2VMaXN0ZW5lcnMoKX19KTtFeHQuZ3JpZC5Sb3dTZWxlY3Rpb25Nb2RlbD1FeHQuZXh0ZW5kKEV4dC5ncmlkLkFic3RyYWN0U2VsZWN0aW9uTW9kZWwse3NpbmdsZVNlbGVjdDpmYWxzZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLnNlbGVjdGlvbnM9bmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbihmYWxzZSxmdW5jdGlvbihiKXtyZXR1cm4gYi5pZH0pO3RoaXMubGFzdD1mYWxzZTt0aGlzLmxhc3RBY3RpdmU9ZmFsc2U7dGhpcy5hZGRFdmVudHMoInNlbGVjdGlvbmNoYW5nZSIsImJlZm9yZXJvd3NlbGVjdCIsInJvd3NlbGVjdCIsInJvd2Rlc2VsZWN0Iik7RXh0LmdyaWQuUm93U2VsZWN0aW9uTW9kZWwuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZ3JpZC5lbmFibGVEcmFnRHJvcCYmIXRoaXMuZ3JpZC5lbmFibGVEcmFnKXt0aGlzLmdyaWQub24oInJvd21vdXNlZG93biIsdGhpcy5oYW5kbGVNb3VzZURvd24sdGhpcyl9dGhpcy5yb3dOYXY9bmV3IEV4dC5LZXlOYXYodGhpcy5ncmlkLmdldEdyaWRFbCgpLHt1cDp0aGlzLm9uS2V5UHJlc3MsZG93bjp0aGlzLm9uS2V5UHJlc3Msc2NvcGU6dGhpc30pO3RoaXMuZ3JpZC5nZXRWaWV3KCkub24oe3Njb3BlOnRoaXMscmVmcmVzaDp0aGlzLm9uUmVmcmVzaCxyb3d1cGRhdGVkOnRoaXMub25Sb3dVcGRhdGVkLHJvd3JlbW92ZWQ6dGhpcy5vblJlbW92ZX0pfSxvbktleVByZXNzOmZ1bmN0aW9uKGcsYil7dmFyIGE9Yj09InVwIixoPWE/InNlbGVjdFByZXZpb3VzIjoic2VsZWN0TmV4dCIsZD1hPy0xOjEsYztpZighZy5zaGlmdEtleXx8dGhpcy5zaW5nbGVTZWxlY3Qpe3RoaXNbaF0oZmFsc2UpfWVsc2V7aWYodGhpcy5sYXN0IT09ZmFsc2UmJnRoaXMubGFzdEFjdGl2ZSE9PWZhbHNlKXtjPXRoaXMubGFzdDt0aGlzLnNlbGVjdFJhbmdlKHRoaXMubGFzdCx0aGlzLmxhc3RBY3RpdmUrZCk7dGhpcy5ncmlkLmdldFZpZXcoKS5mb2N1c1Jvdyh0aGlzLmxhc3RBY3RpdmUpO2lmKGMhPT1mYWxzZSl7dGhpcy5sYXN0PWN9fWVsc2V7dGhpcy5zZWxlY3RGaXJzdFJvdygpfX19LG9uUmVmcmVzaDpmdW5jdGlvbigpe3ZhciBnPXRoaXMuZ3JpZC5zdG9yZSxkPXRoaXMuZ2V0U2VsZWN0aW9ucygpLGM9MCxhPWQubGVuZ3RoLGIsZTt0aGlzLnNpbGVudD10cnVlO3RoaXMuY2xlYXJTZWxlY3Rpb25zKHRydWUpO2Zvcig7YzxhO2MrKyl7ZT1kW2NdO2lmKChiPWcuaW5kZXhPZklkKGUuaWQpKSE9LTEpe3RoaXMuc2VsZWN0Um93KGIsdHJ1ZSl9fWlmKGQubGVuZ3RoIT10aGlzLnNlbGVjdGlvbnMuZ2V0Q291bnQoKSl7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyl9dGhpcy5zaWxlbnQ9ZmFsc2V9LG9uUmVtb3ZlOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLnNlbGVjdGlvbnMucmVtb3ZlKGMpIT09ZmFsc2Upe3RoaXMuZmlyZUV2ZW50KCJzZWxlY3Rpb25jaGFuZ2UiLHRoaXMpfX0sb25Sb3dVcGRhdGVkOmZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmlzU2VsZWN0ZWQoYykpe2Eub25Sb3dTZWxlY3QoYil9fSxzZWxlY3RSZWNvcmRzOmZ1bmN0aW9uKGIsZSl7aWYoIWUpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKCl9dmFyIGQ9dGhpcy5ncmlkLnN0b3JlLGM9MCxhPWIubGVuZ3RoO2Zvcig7YzxhO2MrKyl7dGhpcy5zZWxlY3RSb3coZC5pbmRleE9mKGJbY10pLHRydWUpfX0sZ2V0Q291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb25zLmxlbmd0aH0sc2VsZWN0Rmlyc3RSb3c6ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdFJvdygwKX0sc2VsZWN0TGFzdFJvdzpmdW5jdGlvbihhKXt0aGlzLnNlbGVjdFJvdyh0aGlzLmdyaWQuc3RvcmUuZ2V0Q291bnQoKS0xLGEpfSxzZWxlY3ROZXh0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuaGFzTmV4dCgpKXt0aGlzLnNlbGVjdFJvdyh0aGlzLmxhc3QrMSxhKTt0aGlzLmdyaWQuZ2V0VmlldygpLmZvY3VzUm93KHRoaXMubGFzdCk7cmV0dXJuIHRydWV9cmV0dXJuIGZhbHNlfSxzZWxlY3RQcmV2aW91czpmdW5jdGlvbihhKXtpZih0aGlzLmhhc1ByZXZpb3VzKCkpe3RoaXMuc2VsZWN0Um93KHRoaXMubGFzdC0xLGEpO3RoaXMuZ3JpZC5nZXRWaWV3KCkuZm9jdXNSb3codGhpcy5sYXN0KTtyZXR1cm4gdHJ1ZX1yZXR1cm4gZmFsc2V9LGhhc05leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sYXN0IT09ZmFsc2UmJih0aGlzLmxhc3QrMSk8dGhpcy5ncmlkLnN0b3JlLmdldENvdW50KCl9LGhhc1ByZXZpb3VzOmZ1bmN0aW9uKCl7cmV0dXJuICEhdGhpcy5sYXN0fSxnZXRTZWxlY3Rpb25zOmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHRoaXMuc2VsZWN0aW9ucy5pdGVtcyl9LGdldFNlbGVjdGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2VsZWN0aW9ucy5pdGVtQXQoMCl9LGVhY2g6ZnVuY3Rpb24oZSxkKXt2YXIgYz10aGlzLmdldFNlbGVjdGlvbnMoKSxiPTAsYT1jLmxlbmd0aDtmb3IoO2I8YTtiKyspe2lmKGUuY2FsbChkfHx0aGlzLGNbYl0sYik9PT1mYWxzZSl7cmV0dXJuIGZhbHNlfX1yZXR1cm4gdHJ1ZX0sY2xlYXJTZWxlY3Rpb25zOmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNMb2NrZWQoKSl7cmV0dXJufWlmKGEhPT10cnVlKXt2YXIgYz10aGlzLmdyaWQuc3RvcmUsYj10aGlzLnNlbGVjdGlvbnM7Yi5lYWNoKGZ1bmN0aW9uKGQpe3RoaXMuZGVzZWxlY3RSb3coYy5pbmRleE9mSWQoZC5pZCkpfSx0aGlzKTtiLmNsZWFyKCl9ZWxzZXt0aGlzLnNlbGVjdGlvbnMuY2xlYXIoKX10aGlzLmxhc3Q9ZmFsc2V9LHNlbGVjdEFsbDpmdW5jdGlvbigpe2lmKHRoaXMuaXNMb2NrZWQoKSl7cmV0dXJufXRoaXMuc2VsZWN0aW9ucy5jbGVhcigpO2Zvcih2YXIgYj0wLGE9dGhpcy5ncmlkLnN0b3JlLmdldENvdW50KCk7YjxhO2IrKyl7dGhpcy5zZWxlY3RSb3coYix0cnVlKX19LGhhc1NlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbnMubGVuZ3RoPjB9LGlzU2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9RXh0LmlzTnVtYmVyKGEpP3RoaXMuZ3JpZC5zdG9yZS5nZXRBdChhKTphO3JldHVybihiJiZ0aGlzLnNlbGVjdGlvbnMua2V5KGIuaWQpP3RydWU6ZmFsc2UpfSxpc0lkU2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuKHRoaXMuc2VsZWN0aW9ucy5rZXkoYSk/dHJ1ZTpmYWxzZSl9LGhhbmRsZU1vdXNlRG93bjpmdW5jdGlvbihkLGksaCl7aWYoaC5idXR0b24hPT0wfHx0aGlzLmlzTG9ja2VkKCkpe3JldHVybn12YXIgYT10aGlzLmdyaWQuZ2V0VmlldygpO2lmKGguc2hpZnRLZXkmJiF0aGlzLnNpbmdsZVNlbGVjdCYmdGhpcy5sYXN0IT09ZmFsc2Upe3ZhciBjPXRoaXMubGFzdDt0aGlzLnNlbGVjdFJhbmdlKGMsaSxoLmN0cmxLZXkpO3RoaXMubGFzdD1jO2EuZm9jdXNSb3coaSl9ZWxzZXt2YXIgYj10aGlzLmlzU2VsZWN0ZWQoaSk7aWYoaC5jdHJsS2V5JiZiKXt0aGlzLmRlc2VsZWN0Um93KGkpfWVsc2V7aWYoIWJ8fHRoaXMuZ2V0Q291bnQoKT4xKXt0aGlzLnNlbGVjdFJvdyhpLGguY3RybEtleXx8aC5zaGlmdEtleSk7YS5mb2N1c1JvdyhpKX19fX0sc2VsZWN0Um93czpmdW5jdGlvbihjLGQpe2lmKCFkKXt0aGlzLmNsZWFyU2VsZWN0aW9ucygpfWZvcih2YXIgYj0wLGE9Yy5sZW5ndGg7YjxhO2IrKyl7dGhpcy5zZWxlY3RSb3coY1tiXSx0cnVlKX19LHNlbGVjdFJhbmdlOmZ1bmN0aW9uKGIsYSxkKXt2YXIgYztpZih0aGlzLmlzTG9ja2VkKCkpe3JldHVybn1pZighZCl7dGhpcy5jbGVhclNlbGVjdGlvbnMoKX1pZihiPD1hKXtmb3IoYz1iO2M8PWE7YysrKXt0aGlzLnNlbGVjdFJvdyhjLHRydWUpfX1lbHNle2ZvcihjPWI7Yz49YTtjLS0pe3RoaXMuc2VsZWN0Um93KGMsdHJ1ZSl9fX0sZGVzZWxlY3RSYW5nZTpmdW5jdGlvbihjLGIsYSl7aWYodGhpcy5pc0xvY2tlZCgpKXtyZXR1cm59Zm9yKHZhciBkPWM7ZDw9YjtkKyspe3RoaXMuZGVzZWxlY3RSb3coZCxhKX19LHNlbGVjdFJvdzpmdW5jdGlvbihiLGQsYSl7aWYodGhpcy5pc0xvY2tlZCgpfHwoYjwwfHxiPj10aGlzLmdyaWQuc3RvcmUuZ2V0Q291bnQoKSl8fChkJiZ0aGlzLmlzU2VsZWN0ZWQoYikpKXtyZXR1cm59dmFyIGM9dGhpcy5ncmlkLnN0b3JlLmdldEF0KGIpO2lmKGMmJnRoaXMuZmlyZUV2ZW50KCJiZWZvcmVyb3dzZWxlY3QiLHRoaXMsYixkLGMpIT09ZmFsc2Upe2lmKCFkfHx0aGlzLnNpbmdsZVNlbGVjdCl7dGhpcy5jbGVhclNlbGVjdGlvbnMoKX10aGlzLnNlbGVjdGlvbnMuYWRkKGMpO3RoaXMubGFzdD10aGlzLmxhc3RBY3RpdmU9YjtpZighYSl7dGhpcy5ncmlkLmdldFZpZXcoKS5vblJvd1NlbGVjdChiKX1pZighdGhpcy5zaWxlbnQpe3RoaXMuZmlyZUV2ZW50KCJyb3dzZWxlY3QiLHRoaXMsYixjKTt0aGlzLmZpcmVFdmVudCgic2VsZWN0aW9uY2hhbmdlIix0aGlzKX19fSxkZXNlbGVjdFJvdzpmdW5jdGlvbihiLGEpe2lmKHRoaXMuaXNMb2NrZWQoKSl7cmV0dXJufWlmKHRoaXMubGFzdD09Yil7dGhpcy5sYXN0PWZhbHNlfWlmKHRoaXMubGFzdEFjdGl2ZT09Yil7dGhpcy5sYXN0QWN0aXZlPWZhbHNlfXZhciBjPXRoaXMuZ3JpZC5zdG9yZS5nZXRBdChiKTtpZihjKXt0aGlzLnNlbGVjdGlvbnMucmVtb3ZlKGMpO2lmKCFhKXt0aGlzLmdyaWQuZ2V0VmlldygpLm9uUm93RGVzZWxlY3QoYil9dGhpcy5maXJlRXZlbnQoInJvd2Rlc2VsZWN0Iix0aGlzLGIsYyk7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyl9fSxhY2NlcHRzTmF2OmZ1bmN0aW9uKGMsYixhKXtyZXR1cm4gIWEuaXNIaWRkZW4oYikmJmEuaXNDZWxsRWRpdGFibGUoYixjKX0sb25FZGl0b3JLZXk6ZnVuY3Rpb24obixsKXt2YXIgZD1sLmdldEtleSgpLGgsaT10aGlzLmdyaWQscD1pLmxhc3RFZGl0LGo9aS5hY3RpdmVFZGl0b3IsYj1sLnNoaWZ0S2V5LG8scCxhLG07aWYoZD09bC5UQUIpe2wuc3RvcEV2ZW50KCk7ai5jb21wbGV0ZUVkaXQoKTtpZihiKXtoPWkud2Fsa0NlbGxzKGoucm93LGouY29sLTEsLTEsdGhpcy5hY2NlcHRzTmF2LHRoaXMpfWVsc2V7aD1pLndhbGtDZWxscyhqLnJvdyxqLmNvbCsxLDEsdGhpcy5hY2NlcHRzTmF2LHRoaXMpfX1lbHNle2lmKGQ9PWwuRU5URVIpe2lmKHRoaXMubW92ZUVkaXRvck9uRW50ZXIhPT1mYWxzZSl7aWYoYil7aD1pLndhbGtDZWxscyhwLnJvdy0xLHAuY29sLC0xLHRoaXMuYWNjZXB0c05hdix0aGlzKX1lbHNle2g9aS53YWxrQ2VsbHMocC5yb3crMSxwLmNvbCwxLHRoaXMuYWNjZXB0c05hdix0aGlzKX19fX1pZihoKXthPWhbMF07bT1oWzFdO3RoaXMub25FZGl0b3JTZWxlY3QoYSxwLnJvdyk7aWYoaS5pc0VkaXRvciYmaS5lZGl0aW5nKXtvPWkuYWN0aXZlRWRpdG9yO2lmKG8mJm8uZmllbGQudHJpZ2dlckJsdXIpe28uZmllbGQudHJpZ2dlckJsdXIoKX19aS5zdGFydEVkaXRpbmcoYSxtKX19LG9uRWRpdG9yU2VsZWN0OmZ1bmN0aW9uKGIsYSl7aWYoYSE9Yil7dGhpcy5zZWxlY3RSb3coYil9fSxkZXN0cm95OmZ1bmN0aW9uKCl7RXh0LmRlc3Ryb3kodGhpcy5yb3dOYXYpO3RoaXMucm93TmF2PW51bGw7RXh0LmdyaWQuUm93U2VsZWN0aW9uTW9kZWwuc3VwZXJjbGFzcy5kZXN0cm95LmNhbGwodGhpcyl9fSk7RXh0LmdyaWQuQ29sdW1uPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7aXNDb2x1bW46dHJ1ZSxjb25zdHJ1Y3RvcjpmdW5jdGlvbihiKXtFeHQuYXBwbHkodGhpcyxiKTtpZihFeHQuaXNTdHJpbmcodGhpcy5yZW5kZXJlcikpe3RoaXMucmVuZGVyZXI9RXh0LnV0aWwuRm9ybWF0W3RoaXMucmVuZGVyZXJdfWVsc2V7aWYoRXh0LmlzT2JqZWN0KHRoaXMucmVuZGVyZXIpKXt0aGlzLnNjb3BlPXRoaXMucmVuZGVyZXIuc2NvcGU7dGhpcy5yZW5kZXJlcj10aGlzLnJlbmRlcmVyLmZufX1pZighdGhpcy5zY29wZSl7dGhpcy5zY29wZT10aGlzfXZhciBhPXRoaXMuZWRpdG9yO2RlbGV0ZSB0aGlzLmVkaXRvcjt0aGlzLnNldEVkaXRvcihhKTt0aGlzLmFkZEV2ZW50cygiY2xpY2siLCJjb250ZXh0bWVudSIsImRibGNsaWNrIiwibW91c2Vkb3duIik7RXh0LmdyaWQuQ29sdW1uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0scHJvY2Vzc0V2ZW50OmZ1bmN0aW9uKGIsZCxjLGcsYSl7cmV0dXJuIHRoaXMuZmlyZUV2ZW50KGIsdGhpcyxjLGcsZCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtpZih0aGlzLnNldEVkaXRvcil7dGhpcy5zZXRFZGl0b3IobnVsbCl9dGhpcy5wdXJnZUxpc3RlbmVycygpfSxyZW5kZXJlcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sZ2V0RWRpdG9yOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVkaXRhYmxlIT09ZmFsc2U/dGhpcy5lZGl0b3I6bnVsbH0sc2V0RWRpdG9yOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZWRpdG9yO2lmKGEpe2lmKGEuZ3JpZEVkaXRvcil7YS5ncmlkRWRpdG9yLmRlc3Ryb3koKTtkZWxldGUgYS5ncmlkRWRpdG9yfWVsc2V7YS5kZXN0cm95KCl9fXRoaXMuZWRpdG9yPW51bGw7aWYoYil7aWYoIWIuaXNYVHlwZSl7Yj1FeHQuY3JlYXRlKGIsInRleHRmaWVsZCIpfXRoaXMuZWRpdG9yPWJ9fSxnZXRDZWxsRWRpdG9yOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ2V0RWRpdG9yKGIpO2lmKGEpe2lmKCFhLnN0YXJ0RWRpdCl7aWYoIWEuZ3JpZEVkaXRvcil7YS5ncmlkRWRpdG9yPW5ldyBFeHQuZ3JpZC5HcmlkRWRpdG9yKGEpfWE9YS5ncmlkRWRpdG9yfX1yZXR1cm4gYX19KTtFeHQuZ3JpZC5Cb29sZWFuQ29sdW1uPUV4dC5leHRlbmQoRXh0LmdyaWQuQ29sdW1uLHt0cnVlVGV4dDoidHJ1ZSIsZmFsc2VUZXh0OiJmYWxzZSIsdW5kZWZpbmVkVGV4dDoiJiMxNjA7Iixjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuZ3JpZC5Cb29sZWFuQ29sdW1uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3ZhciBjPXRoaXMudHJ1ZVRleHQsZD10aGlzLmZhbHNlVGV4dCxiPXRoaXMudW5kZWZpbmVkVGV4dDt0aGlzLnJlbmRlcmVyPWZ1bmN0aW9uKGUpe2lmKGU9PT11bmRlZmluZWQpe3JldHVybiBifWlmKCFlfHxlPT09ImZhbHNlIil7cmV0dXJuIGR9cmV0dXJuIGN9fX0pO0V4dC5ncmlkLk51bWJlckNvbHVtbj1FeHQuZXh0ZW5kKEV4dC5ncmlkLkNvbHVtbix7Zm9ybWF0OiIwLDAwMC4wMCIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYSl7RXh0LmdyaWQuTnVtYmVyQ29sdW1uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMucmVuZGVyZXI9RXh0LnV0aWwuRm9ybWF0Lm51bWJlclJlbmRlcmVyKHRoaXMuZm9ybWF0KX19KTtFeHQuZ3JpZC5EYXRlQ29sdW1uPUV4dC5leHRlbmQoRXh0LmdyaWQuQ29sdW1uLHtmb3JtYXQ6Im0vZC9ZIixjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuZ3JpZC5EYXRlQ29sdW1uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3RoaXMucmVuZGVyZXI9RXh0LnV0aWwuRm9ybWF0LmRhdGVSZW5kZXJlcih0aGlzLmZvcm1hdCl9fSk7RXh0LmdyaWQuVGVtcGxhdGVDb2x1bW49RXh0LmV4dGVuZChFeHQuZ3JpZC5Db2x1bW4se2NvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5ncmlkLlRlbXBsYXRlQ29sdW1uLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzLGEpO3ZhciBiPSghRXh0LmlzUHJpbWl0aXZlKHRoaXMudHBsKSYmdGhpcy50cGwuY29tcGlsZSk/dGhpcy50cGw6bmV3IEV4dC5YVGVtcGxhdGUodGhpcy50cGwpO3RoaXMucmVuZGVyZXI9ZnVuY3Rpb24oZCxlLGMpe3JldHVybiBiLmFwcGx5KGMuZGF0YSl9O3RoaXMudHBsPWJ9fSk7RXh0LmdyaWQuQWN0aW9uQ29sdW1uPUV4dC5leHRlbmQoRXh0LmdyaWQuQ29sdW1uLHtoZWFkZXI6IiYjMTYwOyIsYWN0aW9uSWRSZToveC1hY3Rpb24tY29sLShcZCspLyxhbHRUZXh0OiIiLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGIpe3ZhciBnPXRoaXMsYz1iLml0ZW1zfHwoZy5pdGVtcz1bZ10pLGE9Yy5sZW5ndGgsZCxlO0V4dC5ncmlkLkFjdGlvbkNvbHVtbi5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwoZyxiKTtnLnJlbmRlcmVyPWZ1bmN0aW9uKGgsaSl7aD1FeHQuaXNGdW5jdGlvbihiLnJlbmRlcmVyKT9iLnJlbmRlcmVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8IiI6IiI7aS5jc3MrPSIgeC1hY3Rpb24tY29sLWNlbGwiO2ZvcihkPTA7ZDxhO2QrKyl7ZT1jW2RdO2grPSc8aW1nIGFsdD0iJysoZS5hbHRUZXh0fHxnLmFsdFRleHQpKyciIHNyYz0iJysoZS5pY29ufHxFeHQuQkxBTktfSU1BR0VfVVJMKSsnIiBjbGFzcz0ieC1hY3Rpb24tY29sLWljb24geC1hY3Rpb24tY29sLScrU3RyaW5nKGQpKyIgIisoZS5pY29uQ2xzfHwiIikrIiAiKyhFeHQuaXNGdW5jdGlvbihlLmdldENsYXNzKT9lLmdldENsYXNzLmFwcGx5KGUuc2NvcGV8fHRoaXMuc2NvcGV8fHRoaXMsYXJndW1lbnRzKToiIikrJyInKygoZS50b29sdGlwKT8nIGV4dDpxdGlwPSInK2UudG9vbHRpcCsnIic6IiIpKyIgLz4ifXJldHVybiBofX0sZGVzdHJveTpmdW5jdGlvbigpe2RlbGV0ZSB0aGlzLml0ZW1zO2RlbGV0ZSB0aGlzLnJlbmRlcmVyO3JldHVybiBFeHQuZ3JpZC5BY3Rpb25Db2x1bW4uc3VwZXJjbGFzcy5kZXN0cm95LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scHJvY2Vzc0V2ZW50OmZ1bmN0aW9uKGMsaSxkLGosYil7dmFyIGE9aS5nZXRUYXJnZXQoKS5jbGFzc05hbWUubWF0Y2godGhpcy5hY3Rpb25JZFJlKSxoLGc7aWYoYSYmKGg9dGhpcy5pdGVtc1twYXJzZUludChhWzFdLDEwKV0pKXtpZihjPT0iY2xpY2siKXsoZz1oLmhhbmRsZXJ8fHRoaXMuaGFuZGxlcikmJmcuY2FsbChoLnNjb3BlfHx0aGlzLnNjb3BlfHx0aGlzLGQsaixiLGgsaSl9ZWxzZXtpZigoYz09Im1vdXNlZG93biIpJiYoaC5zdG9wU2VsZWN0aW9uIT09ZmFsc2UpKXtyZXR1cm4gZmFsc2V9fX1yZXR1cm4gRXh0LmdyaWQuQWN0aW9uQ29sdW1uLnN1cGVyY2xhc3MucHJvY2Vzc0V2ZW50LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KTtFeHQuZ3JpZC5Db2x1bW4udHlwZXM9e2dyaWRjb2x1bW46RXh0LmdyaWQuQ29sdW1uLGJvb2xlYW5jb2x1bW46RXh0LmdyaWQuQm9vbGVhbkNvbHVtbixudW1iZXJjb2x1bW46RXh0LmdyaWQuTnVtYmVyQ29sdW1uLGRhdGVjb2x1bW46RXh0LmdyaWQuRGF0ZUNvbHVtbix0ZW1wbGF0ZWNvbHVtbjpFeHQuZ3JpZC5UZW1wbGF0ZUNvbHVtbixhY3Rpb25jb2x1bW46RXh0LmdyaWQuQWN0aW9uQ29sdW1ufTtFeHQuZ3JpZC5Sb3dOdW1iZXJlcj1FeHQuZXh0ZW5kKE9iamVjdCx7aGVhZGVyOiIiLHdpZHRoOjIzLHNvcnRhYmxlOmZhbHNlLGNvbnN0cnVjdG9yOmZ1bmN0aW9uKGEpe0V4dC5hcHBseSh0aGlzLGEpO2lmKHRoaXMucm93c3Bhbil7dGhpcy5yZW5kZXJlcj10aGlzLnJlbmRlcmVyLmNyZWF0ZURlbGVnYXRlKHRoaXMpfX0sZml4ZWQ6dHJ1ZSxoaWRlYWJsZTpmYWxzZSxtZW51RGlzYWJsZWQ6dHJ1ZSxkYXRhSW5kZXg6IiIsaWQ6Im51bWJlcmVyIixyb3dzcGFuOnVuZGVmaW5lZCxyZW5kZXJlcjpmdW5jdGlvbihiLGMsYSxkKXtpZih0aGlzLnJvd3NwYW4pe2MuY2VsbEF0dHI9J3Jvd3NwYW49IicrdGhpcy5yb3dzcGFuKyciJ31yZXR1cm4gZCsxfX0pO0V4dC5ncmlkLkNoZWNrYm94U2VsZWN0aW9uTW9kZWw9RXh0LmV4dGVuZChFeHQuZ3JpZC5Sb3dTZWxlY3Rpb25Nb2RlbCx7aGVhZGVyOic8ZGl2IGNsYXNzPSJ4LWdyaWQzLWhkLWNoZWNrZXIiPiYjMTYwOzwvZGl2Picsd2lkdGg6MjAsc29ydGFibGU6ZmFsc2UsbWVudURpc2FibGVkOnRydWUsZml4ZWQ6dHJ1ZSxoaWRlYWJsZTpmYWxzZSxkYXRhSW5kZXg6IiIsaWQ6ImNoZWNrZXIiLGlzQ29sdW1uOnRydWUsY29uc3RydWN0b3I6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5DaGVja2JveFNlbGVjdGlvbk1vZGVsLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuY2hlY2tPbmx5KXt0aGlzLmhhbmRsZU1vdXNlRG93bj1FeHQuZW1wdHlGbn19LGluaXRFdmVudHM6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5DaGVja2JveFNlbGVjdGlvbk1vZGVsLnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO3RoaXMuZ3JpZC5vbigicmVuZGVyIixmdW5jdGlvbigpe0V4dC5mbHkodGhpcy5ncmlkLmdldFZpZXcoKS5pbm5lckhkKS5vbigibW91c2Vkb3duIix0aGlzLm9uSGRNb3VzZURvd24sdGhpcyl9LHRoaXMpfSxwcm9jZXNzRXZlbnQ6ZnVuY3Rpb24oYixkLGMsZyxhKXtpZihiPT0ibW91c2Vkb3duIil7dGhpcy5vbk1vdXNlRG93bihkLGQuZ2V0VGFyZ2V0KCkpO3JldHVybiBmYWxzZX1lbHNle3JldHVybiBFeHQuZ3JpZC5Db2x1bW4ucHJvdG90eXBlLnByb2Nlc3NFdmVudC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxvbk1vdXNlRG93bjpmdW5jdGlvbihjLGIpe2lmKGMuYnV0dG9uPT09MCYmYi5jbGFzc05hbWU9PSJ4LWdyaWQzLXJvdy1jaGVja2VyIil7Yy5zdG9wRXZlbnQoKTt2YXIgZD1jLmdldFRhcmdldCgiLngtZ3JpZDMtcm93Iik7aWYoZCl7dmFyIGE9ZC5yb3dJbmRleDtpZih0aGlzLmlzU2VsZWN0ZWQoYSkpe3RoaXMuZGVzZWxlY3RSb3coYSl9ZWxzZXt0aGlzLnNlbGVjdFJvdyhhLHRydWUpO3RoaXMuZ3JpZC5nZXRWaWV3KCkuZm9jdXNSb3coYSl9fX19LG9uSGRNb3VzZURvd246ZnVuY3Rpb24oYyxhKXtpZihhLmNsYXNzTmFtZT09IngtZ3JpZDMtaGQtY2hlY2tlciIpe2Muc3RvcEV2ZW50KCk7dmFyIGI9RXh0LmZseShhLnBhcmVudE5vZGUpO3ZhciBkPWIuaGFzQ2xhc3MoIngtZ3JpZDMtaGQtY2hlY2tlci1vbiIpO2lmKGQpe2IucmVtb3ZlQ2xhc3MoIngtZ3JpZDMtaGQtY2hlY2tlci1vbiIpO3RoaXMuY2xlYXJTZWxlY3Rpb25zKCl9ZWxzZXtiLmFkZENsYXNzKCJ4LWdyaWQzLWhkLWNoZWNrZXItb24iKTt0aGlzLnNlbGVjdEFsbCgpfX19LHJlbmRlcmVyOmZ1bmN0aW9uKGIsYyxhKXtyZXR1cm4nPGRpdiBjbGFzcz0ieC1ncmlkMy1yb3ctY2hlY2tlciI+JiMxNjA7PC9kaXY+J30sb25FZGl0b3JTZWxlY3Q6ZnVuY3Rpb24oYixhKXtpZihhIT1iJiYhdGhpcy5jaGVja09ubHkpe3RoaXMuc2VsZWN0Um93KGIpfX19KTtFeHQuZ3JpZC5DZWxsU2VsZWN0aW9uTW9kZWw9RXh0LmV4dGVuZChFeHQuZ3JpZC5BYnN0cmFjdFNlbGVjdGlvbk1vZGVsLHtjb25zdHJ1Y3RvcjpmdW5jdGlvbihhKXtFeHQuYXBwbHkodGhpcyxhKTt0aGlzLnNlbGVjdGlvbj1udWxsO3RoaXMuYWRkRXZlbnRzKCJiZWZvcmVjZWxsc2VsZWN0IiwiY2VsbHNlbGVjdCIsInNlbGVjdGlvbmNoYW5nZSIpO0V4dC5ncmlkLkNlbGxTZWxlY3Rpb25Nb2RlbC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyl9LGluaXRFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLmdyaWQub24oImNlbGxtb3VzZWRvd24iLHRoaXMuaGFuZGxlTW91c2VEb3duLHRoaXMpO3RoaXMuZ3JpZC5vbihFeHQuRXZlbnRNYW5hZ2VyLmdldEtleUV2ZW50KCksdGhpcy5oYW5kbGVLZXlEb3duLHRoaXMpO3RoaXMuZ3JpZC5nZXRWaWV3KCkub24oe3Njb3BlOnRoaXMscmVmcmVzaDp0aGlzLm9uVmlld0NoYW5nZSxyb3d1cGRhdGVkOnRoaXMub25Sb3dVcGRhdGVkLGJlZm9yZXJvd3JlbW92ZWQ6dGhpcy5jbGVhclNlbGVjdGlvbnMsYmVmb3Jlcm93c2luc2VydGVkOnRoaXMuY2xlYXJTZWxlY3Rpb25zfSk7aWYodGhpcy5ncmlkLmlzRWRpdG9yKXt0aGlzLmdyaWQub24oImJlZm9yZWVkaXQiLHRoaXMuYmVmb3JlRWRpdCx0aGlzKX19LGJlZm9yZUVkaXQ6ZnVuY3Rpb24oYSl7dGhpcy5zZWxlY3QoYS5yb3csYS5jb2x1bW4sZmFsc2UsdHJ1ZSxhLnJlY29yZCl9LG9uUm93VXBkYXRlZDpmdW5jdGlvbihhLGIsYyl7aWYodGhpcy5zZWxlY3Rpb24mJnRoaXMuc2VsZWN0aW9uLnJlY29yZD09Yyl7YS5vbkNlbGxTZWxlY3QoYix0aGlzLnNlbGVjdGlvbi5jZWxsWzFdKX19LG9uVmlld0NoYW5nZTpmdW5jdGlvbigpe3RoaXMuY2xlYXJTZWxlY3Rpb25zKHRydWUpfSxnZXRTZWxlY3RlZENlbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb24/dGhpcy5zZWxlY3Rpb24uY2VsbDpudWxsfSxjbGVhclNlbGVjdGlvbnM6ZnVuY3Rpb24oYil7dmFyIGE9dGhpcy5zZWxlY3Rpb247aWYoYSl7aWYoYiE9PXRydWUpe3RoaXMuZ3JpZC52aWV3Lm9uQ2VsbERlc2VsZWN0KGEuY2VsbFswXSxhLmNlbGxbMV0pfXRoaXMuc2VsZWN0aW9uPW51bGw7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyxudWxsKX19LGhhc1NlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvbj90cnVlOmZhbHNlfSxoYW5kbGVNb3VzZURvd246ZnVuY3Rpb24oYixkLGEsYyl7aWYoYy5idXR0b24hPT0wfHx0aGlzLmlzTG9ja2VkKCkpe3JldHVybn10aGlzLnNlbGVjdChkLGEpfSxzZWxlY3Q6ZnVuY3Rpb24oZyxjLGIsZSxkKXtpZih0aGlzLmZpcmVFdmVudCgiYmVmb3JlY2VsbHNlbGVjdCIsdGhpcyxnLGMpIT09ZmFsc2Upe3RoaXMuY2xlYXJTZWxlY3Rpb25zKCk7ZD1kfHx0aGlzLmdyaWQuc3RvcmUuZ2V0QXQoZyk7dGhpcy5zZWxlY3Rpb249e3JlY29yZDpkLGNlbGw6W2csY119O2lmKCFiKXt2YXIgYT10aGlzLmdyaWQuZ2V0VmlldygpO2Eub25DZWxsU2VsZWN0KGcsYyk7aWYoZSE9PXRydWUpe2EuZm9jdXNDZWxsKGcsYyl9fXRoaXMuZmlyZUV2ZW50KCJjZWxsc2VsZWN0Iix0aGlzLGcsYyk7dGhpcy5maXJlRXZlbnQoInNlbGVjdGlvbmNoYW5nZSIsdGhpcyx0aGlzLnNlbGVjdGlvbil9fSxpc1NlbGVjdGFibGU6ZnVuY3Rpb24oYyxiLGEpe3JldHVybiAhYS5pc0hpZGRlbihiKX0sb25FZGl0b3JLZXk6ZnVuY3Rpb24oYixhKXtpZihhLmdldEtleSgpPT1hLlRBQil7dGhpcy5oYW5kbGVLZXlEb3duKGEpfX0saGFuZGxlS2V5RG93bjpmdW5jdGlvbihqKXtpZighai5pc05hdktleVByZXNzKCkpe3JldHVybn12YXIgZD1qLmdldEtleSgpLGk9dGhpcy5ncmlkLHA9dGhpcy5zZWxlY3Rpb24sYj10aGlzLG09ZnVuY3Rpb24oZyxjLGUpe3JldHVybiBpLndhbGtDZWxscyhnLGMsZSxpLmlzRWRpdG9yJiZpLmVkaXRpbmc/Yi5hY2NlcHRzTmF2OmIuaXNTZWxlY3RhYmxlLGIpfSxvLGgsYSxsLG47c3dpdGNoKGQpe2Nhc2Ugai5FU0M6Y2FzZSBqLlBBR0VfVVA6Y2FzZSBqLlBBR0VfRE9XTjpicmVhaztkZWZhdWx0Omouc3RvcEV2ZW50KCk7YnJlYWt9aWYoIXApe289bSgwLDAsMSk7aWYobyl7dGhpcy5zZWxlY3Qob1swXSxvWzFdKX1yZXR1cm59bz1wLmNlbGw7YT1vWzBdO2w9b1sxXTtzd2l0Y2goZCl7Y2FzZSBqLlRBQjppZihqLnNoaWZ0S2V5KXtoPW0oYSxsLTEsLTEpfWVsc2V7aD1tKGEsbCsxLDEpfWJyZWFrO2Nhc2Ugai5ET1dOOmg9bShhKzEsbCwxKTticmVhaztjYXNlIGouVVA6aD1tKGEtMSxsLC0xKTticmVhaztjYXNlIGouUklHSFQ6aD1tKGEsbCsxLDEpO2JyZWFrO2Nhc2Ugai5MRUZUOmg9bShhLGwtMSwtMSk7YnJlYWs7Y2FzZSBqLkVOVEVSOmlmKGkuaXNFZGl0b3ImJiFpLmVkaXRpbmcpe2kuc3RhcnRFZGl0aW5nKGEsbCk7cmV0dXJufWJyZWFrfWlmKGgpe2E9aFswXTtsPWhbMV07dGhpcy5zZWxlY3QoYSxsKTtpZihpLmlzRWRpdG9yJiZpLmVkaXRpbmcpe249aS5hY3RpdmVFZGl0b3I7aWYobiYmbi5maWVsZC50cmlnZ2VyQmx1cil7bi5maWVsZC50cmlnZ2VyQmx1cigpfWkuc3RhcnRFZGl0aW5nKGEsbCl9fX0sYWNjZXB0c05hdjpmdW5jdGlvbihjLGIsYSl7cmV0dXJuICFhLmlzSGlkZGVuKGIpJiZhLmlzQ2VsbEVkaXRhYmxlKGIsYyl9fSk7RXh0LmdyaWQuRWRpdG9yR3JpZFBhbmVsPUV4dC5leHRlbmQoRXh0LmdyaWQuR3JpZFBhbmVsLHtjbGlja3NUb0VkaXQ6Mixmb3JjZVZhbGlkYXRpb246ZmFsc2UsaXNFZGl0b3I6dHJ1ZSxkZXRlY3RFZGl0OmZhbHNlLGF1dG9FbmNvZGU6ZmFsc2UsdHJhY2tNb3VzZU92ZXI6ZmFsc2UsaW5pdENvbXBvbmVudDpmdW5jdGlvbigpe0V4dC5ncmlkLkVkaXRvckdyaWRQYW5lbC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTtpZighdGhpcy5zZWxNb2RlbCl7dGhpcy5zZWxNb2RlbD1uZXcgRXh0LmdyaWQuQ2VsbFNlbGVjdGlvbk1vZGVsKCl9dGhpcy5hY3RpdmVFZGl0b3I9bnVsbDt0aGlzLmFkZEV2ZW50cygiYmVmb3JlZWRpdCIsImFmdGVyZWRpdCIsInZhbGlkYXRlZWRpdCIpfSxpbml0RXZlbnRzOmZ1bmN0aW9uKCl7RXh0LmdyaWQuRWRpdG9yR3JpZFBhbmVsLnN1cGVyY2xhc3MuaW5pdEV2ZW50cy5jYWxsKHRoaXMpO3RoaXMuZ2V0R3JpZEVsKCkub24oIm1vdXNld2hlZWwiLHRoaXMuc3RvcEVkaXRpbmcuY3JlYXRlRGVsZWdhdGUodGhpcyxbdHJ1ZV0pLHRoaXMpO3RoaXMub24oImNvbHVtbnJlc2l6ZSIsdGhpcy5zdG9wRWRpdGluZyx0aGlzLFt0cnVlXSk7aWYodGhpcy5jbGlja3NUb0VkaXQ9PTEpe3RoaXMub24oImNlbGxjbGljayIsdGhpcy5vbkNlbGxEYmxDbGljayx0aGlzKX1lbHNle3ZhciBhPXRoaXMuZ2V0VmlldygpO2lmKHRoaXMuY2xpY2tzVG9FZGl0PT0iYXV0byImJmEubWFpbkJvZHkpe2EubWFpbkJvZHkub24oIm1vdXNlZG93biIsdGhpcy5vbkF1dG9FZGl0Q2xpY2ssdGhpcyl9dGhpcy5vbigiY2VsbGRibGNsaWNrIix0aGlzLm9uQ2VsbERibENsaWNrLHRoaXMpfX0sb25SZXNpemU6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5FZGl0b3JHcmlkUGFuZWwuc3VwZXJjbGFzcy5vblJlc2l6ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGE9dGhpcy5hY3RpdmVFZGl0b3I7aWYodGhpcy5lZGl0aW5nJiZhKXthLnJlYWxpZ24odHJ1ZSl9fSxvbkNlbGxEYmxDbGljazpmdW5jdGlvbihiLGMsYSl7dGhpcy5zdGFydEVkaXRpbmcoYyxhKX0sb25BdXRvRWRpdENsaWNrOmZ1bmN0aW9uKGMsYil7aWYoYy5idXR0b24hPT0wKXtyZXR1cm59dmFyIGc9dGhpcy52aWV3LmZpbmRSb3dJbmRleChiKSxhPXRoaXMudmlldy5maW5kQ2VsbEluZGV4KGIpO2lmKGchPT1mYWxzZSYmYSE9PWZhbHNlKXt0aGlzLnN0b3BFZGl0aW5nKCk7aWYodGhpcy5zZWxNb2RlbC5nZXRTZWxlY3RlZENlbGwpe3ZhciBkPXRoaXMuc2VsTW9kZWwuZ2V0U2VsZWN0ZWRDZWxsKCk7aWYoZCYmZFswXT09PWcmJmRbMV09PT1hKXt0aGlzLnN0YXJ0RWRpdGluZyhnLGEpfX1lbHNle2lmKHRoaXMuc2VsTW9kZWwuaXNTZWxlY3RlZChnKSl7dGhpcy5zdGFydEVkaXRpbmcoZyxhKX19fX0sb25FZGl0Q29tcGxldGU6ZnVuY3Rpb24oYixkLGEpe3RoaXMuZWRpdGluZz1mYWxzZTt0aGlzLmxhc3RBY3RpdmVFZGl0b3I9dGhpcy5hY3RpdmVFZGl0b3I7dGhpcy5hY3RpdmVFZGl0b3I9bnVsbDt2YXIgYz1iLnJlY29yZCxoPXRoaXMuY29sTW9kZWwuZ2V0RGF0YUluZGV4KGIuY29sKTtkPXRoaXMucG9zdEVkaXRWYWx1ZShkLGEsYyxoKTtpZih0aGlzLmZvcmNlVmFsaWRhdGlvbj09PXRydWV8fFN0cmluZyhkKSE9PVN0cmluZyhhKSl7dmFyIGc9e2dyaWQ6dGhpcyxyZWNvcmQ6YyxmaWVsZDpoLG9yaWdpbmFsVmFsdWU6YSx2YWx1ZTpkLHJvdzpiLnJvdyxjb2x1bW46Yi5jb2wsY2FuY2VsOmZhbHNlfTtpZih0aGlzLmZpcmVFdmVudCgidmFsaWRhdGVlZGl0IixnKSE9PWZhbHNlJiYhZy5jYW5jZWwmJlN0cmluZyhkKSE9PVN0cmluZyhhKSl7Yy5zZXQoaCxnLnZhbHVlKTtkZWxldGUgZy5jYW5jZWw7dGhpcy5maXJlRXZlbnQoImFmdGVyZWRpdCIsZyl9fXRoaXMudmlldy5mb2N1c0NlbGwoYi5yb3csYi5jb2wpfSxzdGFydEVkaXRpbmc6ZnVuY3Rpb24oaSxjKXt0aGlzLnN0b3BFZGl0aW5nKCk7aWYodGhpcy5jb2xNb2RlbC5pc0NlbGxFZGl0YWJsZShjLGkpKXt0aGlzLnZpZXcuZW5zdXJlVmlzaWJsZShpLGMsdHJ1ZSk7dmFyIGQ9dGhpcy5zdG9yZS5nZXRBdChpKSxoPXRoaXMuY29sTW9kZWwuZ2V0RGF0YUluZGV4KGMpLGc9e2dyaWQ6dGhpcyxyZWNvcmQ6ZCxmaWVsZDpoLHZhbHVlOmQuZGF0YVtoXSxyb3c6aSxjb2x1bW46YyxjYW5jZWw6ZmFsc2V9O2lmKHRoaXMuZmlyZUV2ZW50KCJiZWZvcmVlZGl0IixnKSE9PWZhbHNlJiYhZy5jYW5jZWwpe3RoaXMuZWRpdGluZz10cnVlO3ZhciBiPXRoaXMuY29sTW9kZWwuZ2V0Q2VsbEVkaXRvcihjLGkpO2lmKCFiKXtyZXR1cm59aWYoIWIucmVuZGVyZWQpe2IucGFyZW50RWw9dGhpcy52aWV3LmdldEVkaXRvclBhcmVudChiKTtiLm9uKHtzY29wZTp0aGlzLHJlbmRlcjp7Zm46ZnVuY3Rpb24oZSl7ZS5maWVsZC5mb2N1cyhmYWxzZSx0cnVlKX0sc2luZ2xlOnRydWUsc2NvcGU6dGhpc30sc3BlY2lhbGtleTpmdW5jdGlvbihrLGope3RoaXMuZ2V0U2VsZWN0aW9uTW9kZWwoKS5vbkVkaXRvcktleShrLGopfSxjb21wbGV0ZTp0aGlzLm9uRWRpdENvbXBsZXRlLGNhbmNlbGVkaXQ6dGhpcy5zdG9wRWRpdGluZy5jcmVhdGVEZWxlZ2F0ZSh0aGlzLFt0cnVlXSl9KX1FeHQuYXBwbHkoYix7cm93OmksY29sOmMscmVjb3JkOmR9KTt0aGlzLmxhc3RFZGl0PXtyb3c6aSxjb2w6Y307dGhpcy5hY3RpdmVFZGl0b3I9YjtiLnNlbGVjdFNhbWVFZGl0b3I9KHRoaXMuYWN0aXZlRWRpdG9yPT10aGlzLmxhc3RBY3RpdmVFZGl0b3IpO3ZhciBhPXRoaXMucHJlRWRpdFZhbHVlKGQsaCk7Yi5zdGFydEVkaXQodGhpcy52aWV3LmdldENlbGwoaSxjKS5maXJzdENoaWxkLEV4dC5pc0RlZmluZWQoYSk/YToiIik7KGZ1bmN0aW9uKCl7ZGVsZXRlIGIuc2VsZWN0U2FtZUVkaXRvcn0pLmRlZmVyKDUwKX19fSxwcmVFZGl0VmFsdWU6ZnVuY3Rpb24oYSxjKXt2YXIgYj1hLmRhdGFbY107cmV0dXJuIHRoaXMuYXV0b0VuY29kZSYmRXh0LmlzU3RyaW5nKGIpP0V4dC51dGlsLkZvcm1hdC5odG1sRGVjb2RlKGIpOmJ9LHBvc3RFZGl0VmFsdWU6ZnVuY3Rpb24oYyxhLGIsZCl7cmV0dXJuIHRoaXMuYXV0b0VuY29kZSYmRXh0LmlzU3RyaW5nKGMpP0V4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKGMpOmN9LHN0b3BFZGl0aW5nOmZ1bmN0aW9uKGIpe2lmKHRoaXMuZWRpdGluZyl7dmFyIGE9dGhpcy5sYXN0QWN0aXZlRWRpdG9yPXRoaXMuYWN0aXZlRWRpdG9yO2lmKGEpe2FbYj09PXRydWU/ImNhbmNlbEVkaXQiOiJjb21wbGV0ZUVkaXQiXSgpO3RoaXMudmlldy5mb2N1c0NlbGwoYS5yb3csYS5jb2wpfXRoaXMuYWN0aXZlRWRpdG9yPW51bGx9dGhpcy5lZGl0aW5nPWZhbHNlfX0pO0V4dC5yZWcoImVkaXRvcmdyaWQiLEV4dC5ncmlkLkVkaXRvckdyaWRQYW5lbCk7RXh0LmdyaWQuR3JpZEVkaXRvcj1mdW5jdGlvbihiLGEpe0V4dC5ncmlkLkdyaWRFZGl0b3Iuc3VwZXJjbGFzcy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsYixhKTtiLm1vbml0b3JUYWI9ZmFsc2V9O0V4dC5leHRlbmQoRXh0LmdyaWQuR3JpZEVkaXRvcixFeHQuRWRpdG9yLHthbGlnbm1lbnQ6InRsLXRsIixhdXRvU2l6ZToid2lkdGgiLGhpZGVFbDpmYWxzZSxjbHM6Ingtc21hbGwtZWRpdG9yIHgtZ3JpZC1lZGl0b3IiLHNoaW06ZmFsc2Usc2hhZG93OmZhbHNlfSk7RXh0LmdyaWQuUHJvcGVydHlSZWNvcmQ9RXh0LmRhdGEuUmVjb3JkLmNyZWF0ZShbe25hbWU6Im5hbWUiLHR5cGU6InN0cmluZyJ9LCJ2YWx1ZSJdKTtFeHQuZ3JpZC5Qcm9wZXJ0eVN0b3JlPUV4dC5leHRlbmQoRXh0LnV0aWwuT2JzZXJ2YWJsZSx7Y29uc3RydWN0b3I6ZnVuY3Rpb24oYSxiKXt0aGlzLmdyaWQ9YTt0aGlzLnN0b3JlPW5ldyBFeHQuZGF0YS5TdG9yZSh7cmVjb3JkVHlwZTpFeHQuZ3JpZC5Qcm9wZXJ0eVJlY29yZH0pO3RoaXMuc3RvcmUub24oInVwZGF0ZSIsdGhpcy5vblVwZGF0ZSx0aGlzKTtpZihiKXt0aGlzLnNldFNvdXJjZShiKX1FeHQuZ3JpZC5Qcm9wZXJ0eVN0b3JlLnN1cGVyY2xhc3MuY29uc3RydWN0b3IuY2FsbCh0aGlzKX0sc2V0U291cmNlOmZ1bmN0aW9uKGMpe3RoaXMuc291cmNlPWM7dGhpcy5zdG9yZS5yZW1vdmVBbGwoKTt2YXIgYj1bXTtmb3IodmFyIGEgaW4gYyl7aWYodGhpcy5pc0VkaXRhYmxlVmFsdWUoY1thXSkpe2IucHVzaChuZXcgRXh0LmdyaWQuUHJvcGVydHlSZWNvcmQoe25hbWU6YSx2YWx1ZTpjW2FdfSxhKSl9fXRoaXMuc3RvcmUubG9hZFJlY29yZHMoe3JlY29yZHM6Yn0se30sdHJ1ZSl9LG9uVXBkYXRlOmZ1bmN0aW9uKGUsYSxkKXtpZihkPT1FeHQuZGF0YS5SZWNvcmQuRURJVCl7dmFyIGI9YS5kYXRhLnZhbHVlO3ZhciBjPWEubW9kaWZpZWQudmFsdWU7aWYodGhpcy5ncmlkLmZpcmVFdmVudCgiYmVmb3JlcHJvcGVydHljaGFuZ2UiLHRoaXMuc291cmNlLGEuaWQsYixjKSE9PWZhbHNlKXt0aGlzLnNvdXJjZVthLmlkXT1iO2EuY29tbWl0KCk7dGhpcy5ncmlkLmZpcmVFdmVudCgicHJvcGVydHljaGFuZ2UiLHRoaXMuc291cmNlLGEuaWQsYixjKX1lbHNle2EucmVqZWN0KCl9fX0sZ2V0UHJvcGVydHk6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0QXQoYSl9LGlzRWRpdGFibGVWYWx1ZTpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmlzUHJpbWl0aXZlKGEpfHxFeHQuaXNEYXRlKGEpfSxzZXRWYWx1ZTpmdW5jdGlvbihkLGMsYSl7dmFyIGI9dGhpcy5nZXRSZWMoZCk7aWYoYil7Yi5zZXQoInZhbHVlIixjKTt0aGlzLnNvdXJjZVtkXT1jfWVsc2V7aWYoYSl7dGhpcy5zb3VyY2VbZF09YztiPW5ldyBFeHQuZ3JpZC5Qcm9wZXJ0eVJlY29yZCh7bmFtZTpkLHZhbHVlOmN9LGQpO3RoaXMuc3RvcmUuYWRkKGIpfX19LHJlbW92ZTpmdW5jdGlvbihiKXt2YXIgYT10aGlzLmdldFJlYyhiKTtpZihhKXt0aGlzLnN0b3JlLnJlbW92ZShhKTtkZWxldGUgdGhpcy5zb3VyY2VbYl19fSxnZXRSZWM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3RvcmUuZ2V0QnlJZChhKX0sZ2V0U291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc291cmNlfX0pO0V4dC5ncmlkLlByb3BlcnR5Q29sdW1uTW9kZWw9RXh0LmV4dGVuZChFeHQuZ3JpZC5Db2x1bW5Nb2RlbCx7bmFtZVRleHQ6Ik5hbWUiLHZhbHVlVGV4dDoiVmFsdWUiLGRhdGVGb3JtYXQ6Im0vai9ZIix0cnVlVGV4dDoidHJ1ZSIsZmFsc2VUZXh0OiJmYWxzZSIsY29uc3RydWN0b3I6ZnVuY3Rpb24oYyxiKXt2YXIgZD1FeHQuZ3JpZCxlPUV4dC5mb3JtO3RoaXMuZ3JpZD1jO2QuUHJvcGVydHlDb2x1bW5Nb2RlbC5zdXBlcmNsYXNzLmNvbnN0cnVjdG9yLmNhbGwodGhpcyxbe2hlYWRlcjp0aGlzLm5hbWVUZXh0LHdpZHRoOjUwLHNvcnRhYmxlOnRydWUsZGF0YUluZGV4OiJuYW1lIixpZDoibmFtZSIsbWVudURpc2FibGVkOnRydWV9LHtoZWFkZXI6dGhpcy52YWx1ZVRleHQsd2lkdGg6NTAscmVzaXphYmxlOmZhbHNlLGRhdGFJbmRleDoidmFsdWUiLGlkOiJ2YWx1ZSIsbWVudURpc2FibGVkOnRydWV9XSk7dGhpcy5zdG9yZT1iO3ZhciBhPW5ldyBlLkZpZWxkKHthdXRvQ3JlYXRlOnt0YWc6InNlbGVjdCIsY2hpbGRyZW46W3t0YWc6Im9wdGlvbiIsdmFsdWU6InRydWUiLGh0bWw6dGhpcy50cnVlVGV4dH0se3RhZzoib3B0aW9uIix2YWx1ZToiZmFsc2UiLGh0bWw6dGhpcy5mYWxzZVRleHR9XX0sZ2V0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbC5kb20udmFsdWU9PSJ0cnVlIn19KTt0aGlzLmVkaXRvcnM9e2RhdGU6bmV3IGQuR3JpZEVkaXRvcihuZXcgZS5EYXRlRmllbGQoe3NlbGVjdE9uRm9jdXM6dHJ1ZX0pKSxzdHJpbmc6bmV3IGQuR3JpZEVkaXRvcihuZXcgZS5UZXh0RmllbGQoe3NlbGVjdE9uRm9jdXM6dHJ1ZX0pKSxudW1iZXI6bmV3IGQuR3JpZEVkaXRvcihuZXcgZS5OdW1iZXJGaWVsZCh7c2VsZWN0T25Gb2N1czp0cnVlLHN0eWxlOiJ0ZXh0LWFsaWduOmxlZnQ7In0pKSwiYm9vbGVhbiI6bmV3IGQuR3JpZEVkaXRvcihhLHthdXRvU2l6ZToiYm90aCJ9KX07dGhpcy5yZW5kZXJDZWxsRGVsZWdhdGU9dGhpcy5yZW5kZXJDZWxsLmNyZWF0ZURlbGVnYXRlKHRoaXMpO3RoaXMucmVuZGVyUHJvcERlbGVnYXRlPXRoaXMucmVuZGVyUHJvcC5jcmVhdGVEZWxlZ2F0ZSh0aGlzKX0scmVuZGVyRGF0ZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRlRm9ybWF0KHRoaXMuZGF0ZUZvcm1hdCl9LHJlbmRlckJvb2w6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbYT8idHJ1ZVRleHQiOiJmYWxzZVRleHQiXX0saXNDZWxsRWRpdGFibGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09MX0sZ2V0UmVuZGVyZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PTE/dGhpcy5yZW5kZXJDZWxsRGVsZWdhdGU6dGhpcy5yZW5kZXJQcm9wRGVsZWdhdGV9LHJlbmRlclByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0UHJvcGVydHlOYW1lKGEpfSxyZW5kZXJDZWxsOmZ1bmN0aW9uKGQsYixjKXt2YXIgYT10aGlzLmdyaWQuY3VzdG9tUmVuZGVyZXJzW2MuZ2V0KCJuYW1lIildO2lmKGEpe3JldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX12YXIgZT1kO2lmKEV4dC5pc0RhdGUoZCkpe2U9dGhpcy5yZW5kZXJEYXRlKGQpfWVsc2V7aWYodHlwZW9mIGQ9PSJib29sZWFuIil7ZT10aGlzLnJlbmRlckJvb2woZCl9fXJldHVybiBFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShlKX0sZ2V0UHJvcGVydHlOYW1lOmZ1bmN0aW9uKGIpe3ZhciBhPXRoaXMuZ3JpZC5wcm9wZXJ0eU5hbWVzO3JldHVybiBhJiZhW2JdP2FbYl06Yn0sZ2V0Q2VsbEVkaXRvcjpmdW5jdGlvbihhLGUpe3ZhciBiPXRoaXMuc3RvcmUuZ2V0UHJvcGVydHkoZSksZD1iLmRhdGEubmFtZSxjPWIuZGF0YS52YWx1ZTtpZih0aGlzLmdyaWQuY3VzdG9tRWRpdG9yc1tkXSl7cmV0dXJuIHRoaXMuZ3JpZC5jdXN0b21FZGl0b3JzW2RdfWlmKEV4dC5pc0RhdGUoYykpe3JldHVybiB0aGlzLmVkaXRvcnMuZGF0ZX1lbHNle2lmKHR5cGVvZiBjPT0ibnVtYmVyIil7cmV0dXJuIHRoaXMuZWRpdG9ycy5udW1iZXJ9ZWxzZXtpZih0eXBlb2YgYz09ImJvb2xlYW4iKXtyZXR1cm4gdGhpcy5lZGl0b3JzWyJib29sZWFuIl19ZWxzZXtyZXR1cm4gdGhpcy5lZGl0b3JzLnN0cmluZ319fX0sZGVzdHJveTpmdW5jdGlvbigpe0V4dC5ncmlkLlByb3BlcnR5Q29sdW1uTW9kZWwuc3VwZXJjbGFzcy5kZXN0cm95LmNhbGwodGhpcyk7dGhpcy5kZXN0cm95RWRpdG9ycyh0aGlzLmVkaXRvcnMpO3RoaXMuZGVzdHJveUVkaXRvcnModGhpcy5ncmlkLmN1c3RvbUVkaXRvcnMpfSxkZXN0cm95RWRpdG9yczpmdW5jdGlvbihiKXtmb3IodmFyIGEgaW4gYil7RXh0LmRlc3Ryb3koYlthXSl9fX0pO0V4dC5ncmlkLlByb3BlcnR5R3JpZD1FeHQuZXh0ZW5kKEV4dC5ncmlkLkVkaXRvckdyaWRQYW5lbCx7ZW5hYmxlQ29sdW1uTW92ZTpmYWxzZSxzdHJpcGVSb3dzOmZhbHNlLHRyYWNrTW91c2VPdmVyOmZhbHNlLGNsaWNrc1RvRWRpdDoxLGVuYWJsZUhkTWVudTpmYWxzZSx2aWV3Q29uZmlnOntmb3JjZUZpdDp0cnVlfSxpbml0Q29tcG9uZW50OmZ1bmN0aW9uKCl7dGhpcy5jdXN0b21SZW5kZXJlcnM9dGhpcy5jdXN0b21SZW5kZXJlcnN8fHt9O3RoaXMuY3VzdG9tRWRpdG9ycz10aGlzLmN1c3RvbUVkaXRvcnN8fHt9O3RoaXMubGFzdEVkaXRSb3c9bnVsbDt2YXIgYj1uZXcgRXh0LmdyaWQuUHJvcGVydHlTdG9yZSh0aGlzKTt0aGlzLnByb3BTdG9yZT1iO3ZhciBhPW5ldyBFeHQuZ3JpZC5Qcm9wZXJ0eUNvbHVtbk1vZGVsKHRoaXMsYik7Yi5zdG9yZS5zb3J0KCJuYW1lIiwiQVNDIik7dGhpcy5hZGRFdmVudHMoImJlZm9yZXByb3BlcnR5Y2hhbmdlIiwicHJvcGVydHljaGFuZ2UiKTt0aGlzLmNtPWE7dGhpcy5kcz1iLnN0b3JlO0V4dC5ncmlkLlByb3BlcnR5R3JpZC5zdXBlcmNsYXNzLmluaXRDb21wb25lbnQuY2FsbCh0aGlzKTt0aGlzLm1vbih0aGlzLnNlbE1vZGVsLCJiZWZvcmVjZWxsc2VsZWN0IixmdW5jdGlvbihlLGQsYyl7aWYoYz09PTApe3RoaXMuc3RhcnRFZGl0aW5nLmRlZmVyKDIwMCx0aGlzLFtkLDFdKTtyZXR1cm4gZmFsc2V9fSx0aGlzKX0sb25SZW5kZXI6ZnVuY3Rpb24oKXtFeHQuZ3JpZC5Qcm9wZXJ0eUdyaWQuc3VwZXJjbGFzcy5vblJlbmRlci5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5nZXRHcmlkRWwoKS5hZGRDbGFzcygieC1wcm9wcy1ncmlkIil9LGFmdGVyUmVuZGVyOmZ1bmN0aW9uKCl7RXh0LmdyaWQuUHJvcGVydHlHcmlkLnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHRoaXMuc291cmNlKXt0aGlzLnNldFNvdXJjZSh0aGlzLnNvdXJjZSl9fSxzZXRTb3VyY2U6ZnVuY3Rpb24oYSl7dGhpcy5wcm9wU3RvcmUuc2V0U291cmNlKGEpfSxnZXRTb3VyY2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wU3RvcmUuZ2V0U291cmNlKCl9LHNldFByb3BlcnR5OmZ1bmN0aW9uKGMsYixhKXt0aGlzLnByb3BTdG9yZS5zZXRWYWx1ZShjLGIsYSl9LHJlbW92ZVByb3BlcnR5OmZ1bmN0aW9uKGEpe3RoaXMucHJvcFN0b3JlLnJlbW92ZShhKX19KTtFeHQucmVnKCJwcm9wZXJ0eWdyaWQiLEV4dC5ncmlkLlByb3BlcnR5R3JpZCk7RXh0LmdyaWQuR3JvdXBpbmdWaWV3PUV4dC5leHRlbmQoRXh0LmdyaWQuR3JpZFZpZXcse2dyb3VwQnlUZXh0OiJHcm91cCBCeSBUaGlzIEZpZWxkIixzaG93R3JvdXBzVGV4dDoiU2hvdyBpbiBHcm91cHMiLGhpZGVHcm91cGVkQ29sdW1uOmZhbHNlLHNob3dHcm91cE5hbWU6dHJ1ZSxzdGFydENvbGxhcHNlZDpmYWxzZSxlbmFibGVHcm91cGluZzp0cnVlLGVuYWJsZUdyb3VwaW5nTWVudTp0cnVlLGVuYWJsZU5vR3JvdXBzOnRydWUsZW1wdHlHcm91cFRleHQ6IihOb25lKSIsaWdub3JlQWRkOmZhbHNlLGdyb3VwVGV4dFRwbDoie3RleHR9Iixncm91cE1vZGU6InZhbHVlIixjYW5jZWxFZGl0T25Ub2dnbGU6dHJ1ZSxpbml0VGVtcGxhdGVzOmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JvdXBpbmdWaWV3LnN1cGVyY2xhc3MuaW5pdFRlbXBsYXRlcy5jYWxsKHRoaXMpO3RoaXMuc3RhdGU9e307dmFyIGE9dGhpcy5ncmlkLmdldFNlbGVjdGlvbk1vZGVsKCk7YS5vbihhLnNlbGVjdFJvdz8iYmVmb3Jlcm93c2VsZWN0IjoiYmVmb3JlY2VsbHNlbGVjdCIsdGhpcy5vbkJlZm9yZVJvd1NlbGVjdCx0aGlzKTtpZighdGhpcy5zdGFydEdyb3VwKXt0aGlzLnN0YXJ0R3JvdXA9bmV3IEV4dC5YVGVtcGxhdGUoJzxkaXYgaWQ9Intncm91cElkfSIgY2xhc3M9IngtZ3JpZC1ncm91cCB7Y2xzfSI+JywnPGRpdiBpZD0ie2dyb3VwSWR9LWhkIiBjbGFzcz0ieC1ncmlkLWdyb3VwLWhkIiBzdHlsZT0ie3N0eWxlfSI+PGRpdiBjbGFzcz0ieC1ncmlkLWdyb3VwLXRpdGxlIj4nLHRoaXMuZ3JvdXBUZXh0VHBsLCI8L2Rpdj48L2Rpdj4iLCc8ZGl2IGlkPSJ7Z3JvdXBJZH0tYmQiIGNsYXNzPSJ4LWdyaWQtZ3JvdXAtYm9keSI+Jyl9dGhpcy5zdGFydEdyb3VwLmNvbXBpbGUoKTtpZighdGhpcy5lbmRHcm91cCl7dGhpcy5lbmRHcm91cD0iPC9kaXY+PC9kaXY+In19LGZpbmRHcm91cDpmdW5jdGlvbihhKXtyZXR1cm4gRXh0LmZseShhKS51cCgiLngtZ3JpZC1ncm91cCIsdGhpcy5tYWluQm9keS5kb20pfSxnZXRHcm91cHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNSb3dzKCk/dGhpcy5tYWluQm9keS5kb20uY2hpbGROb2RlczpbXX0sb25BZGQ6ZnVuY3Rpb24oZCxhLGIpe2lmKHRoaXMuY2FuR3JvdXAoKSYmIXRoaXMuaWdub3JlQWRkKXt2YXIgYz10aGlzLmdldFNjcm9sbFN0YXRlKCk7dGhpcy5maXJlRXZlbnQoImJlZm9yZXJvd3NpbnNlcnRlZCIsZCxiLGIrKGEubGVuZ3RoLTEpKTt0aGlzLnJlZnJlc2goKTt0aGlzLnJlc3RvcmVTY3JvbGwoYyk7dGhpcy5maXJlRXZlbnQoInJvd3NpbnNlcnRlZCIsZCxiLGIrKGEubGVuZ3RoLTEpKX1lbHNle2lmKCF0aGlzLmNhbkdyb3VwKCkpe0V4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLm9uQWRkLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19fSxvblJlbW92ZTpmdW5jdGlvbihlLGEsYixkKXtFeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuc3VwZXJjbGFzcy5vblJlbW92ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGM9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5fZ3JvdXBJZCk7aWYoYyYmYy5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXMubGVuZ3RoPDEpe0V4dC5yZW1vdmVOb2RlKGMpfXRoaXMuYXBwbHlFbXB0eVRleHQoKX0scmVmcmVzaFJvdzpmdW5jdGlvbihhKXtpZih0aGlzLmRzLmdldENvdW50KCk9PTEpe3RoaXMucmVmcmVzaCgpfWVsc2V7dGhpcy5pc1VwZGF0aW5nPXRydWU7RXh0LmdyaWQuR3JvdXBpbmdWaWV3LnN1cGVyY2xhc3MucmVmcmVzaFJvdy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy5pc1VwZGF0aW5nPWZhbHNlfX0sYmVmb3JlTWVudVNob3c6ZnVuY3Rpb24oKXt2YXIgYyxhPXRoaXMuaG1lbnUuaXRlbXMsYj10aGlzLmNtLmNvbmZpZ1t0aGlzLmhkQ3R4SW5kZXhdLmdyb3VwYWJsZT09PWZhbHNlO2lmKChjPWEuZ2V0KCJncm91cEJ5IikpKXtjLnNldERpc2FibGVkKGIpfWlmKChjPWEuZ2V0KCJzaG93R3JvdXBzIikpKXtjLnNldERpc2FibGVkKGIpO2Muc2V0Q2hlY2tlZCh0aGlzLmNhbkdyb3VwKCksdHJ1ZSl9fSxyZW5kZXJVSTpmdW5jdGlvbigpe3ZhciBhPUV4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLnJlbmRlclVJLmNhbGwodGhpcyk7aWYodGhpcy5lbmFibGVHcm91cGluZ01lbnUmJnRoaXMuaG1lbnUpe3RoaXMuaG1lbnUuYWRkKCItIix7aXRlbUlkOiJncm91cEJ5Iix0ZXh0OnRoaXMuZ3JvdXBCeVRleHQsaGFuZGxlcjp0aGlzLm9uR3JvdXBCeUNsaWNrLHNjb3BlOnRoaXMsaWNvbkNsczoieC1ncm91cC1ieS1pY29uIn0pO2lmKHRoaXMuZW5hYmxlTm9Hcm91cHMpe3RoaXMuaG1lbnUuYWRkKHtpdGVtSWQ6InNob3dHcm91cHMiLHRleHQ6dGhpcy5zaG93R3JvdXBzVGV4dCxjaGVja2VkOnRydWUsY2hlY2tIYW5kbGVyOnRoaXMub25TaG93R3JvdXBzQ2xpY2ssc2NvcGU6dGhpc30pfXRoaXMuaG1lbnUub24oImJlZm9yZXNob3ciLHRoaXMuYmVmb3JlTWVudVNob3csdGhpcyl9cmV0dXJuIGF9LHByb2Nlc3NFdmVudDpmdW5jdGlvbihiLGkpe0V4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLnByb2Nlc3NFdmVudC5jYWxsKHRoaXMsYixpKTt2YXIgaD1pLmdldFRhcmdldCgiLngtZ3JpZC1ncm91cC1oZCIsdGhpcy5tYWluQm9keSk7aWYoaCl7dmFyIGc9dGhpcy5nZXRHcm91cEZpZWxkKCksZD10aGlzLmdldFByZWZpeChnKSxhPWguaWQuc3Vic3RyaW5nKGQubGVuZ3RoKSxjPW5ldyBSZWdFeHAoImdwLSIrRXh0LmVzY2FwZVJlKGcpKyItLWhkIik7YT1hLnN1YnN0cigwLGEubGVuZ3RoLTMpO2lmKGF8fGMudGVzdChoLmlkKSl7dGhpcy5ncmlkLmZpcmVFdmVudCgiZ3JvdXAiK2IsdGhpcy5ncmlkLGcsYSxpKX1pZihiPT0ibW91c2Vkb3duIiYmaS5idXR0b249PTApe3RoaXMudG9nZ2xlR3JvdXAoaC5wYXJlbnROb2RlKX19fSxvbkdyb3VwQnlDbGljazpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ3JpZDt0aGlzLmVuYWJsZUdyb3VwaW5nPXRydWU7YS5zdG9yZS5ncm91cEJ5KHRoaXMuY20uZ2V0RGF0YUluZGV4KHRoaXMuaGRDdHhJbmRleCkpO2EuZmlyZUV2ZW50KCJncm91cGNoYW5nZSIsYSxhLnN0b3JlLmdldEdyb3VwU3RhdGUoKSk7dGhpcy5iZWZvcmVNZW51U2hvdygpO3RoaXMucmVmcmVzaCgpfSxvblNob3dHcm91cHNDbGljazpmdW5jdGlvbihhLGIpe3RoaXMuZW5hYmxlR3JvdXBpbmc9YjtpZihiKXt0aGlzLm9uR3JvdXBCeUNsaWNrKCl9ZWxzZXt0aGlzLmdyaWQuc3RvcmUuY2xlYXJHcm91cGluZygpO3RoaXMuZ3JpZC5maXJlRXZlbnQoImdyb3VwY2hhbmdlIix0aGlzLG51bGwpfX0sdG9nZ2xlUm93SW5kZXg6ZnVuY3Rpb24oYyxhKXtpZighdGhpcy5jYW5Hcm91cCgpKXtyZXR1cm59dmFyIGI9dGhpcy5nZXRSb3coYyk7aWYoYil7dGhpcy50b2dnbGVHcm91cCh0aGlzLmZpbmRHcm91cChiKSxhKX19LHRvZ2dsZUdyb3VwOmZ1bmN0aW9uKGMsYil7dmFyIGE9RXh0LmdldChjKSxkPUV4dC51dGlsLkZvcm1hdC5odG1sRW5jb2RlKGEuaWQpO2I9RXh0LmlzRGVmaW5lZChiKT9iOmEuaGFzQ2xhc3MoIngtZ3JpZC1ncm91cC1jb2xsYXBzZWQiKTtpZih0aGlzLnN0YXRlW2RdIT09Yil7aWYodGhpcy5jYW5jZWxFZGl0T25Ub2dnbGUhPT1mYWxzZSl7dGhpcy5ncmlkLnN0b3BFZGl0aW5nKHRydWUpfXRoaXMuc3RhdGVbZF09YjthW2I/InJlbW92ZUNsYXNzIjoiYWRkQ2xhc3MiXSgieC1ncmlkLWdyb3VwLWNvbGxhcHNlZCIpfX0sdG9nZ2xlQWxsR3JvdXBzOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMuZ2V0R3JvdXBzKCk7Zm9yKHZhciBkPTAsYT1iLmxlbmd0aDtkPGE7ZCsrKXt0aGlzLnRvZ2dsZUdyb3VwKGJbZF0sYyl9fSxleHBhbmRBbGxHcm91cHM6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZUFsbEdyb3Vwcyh0cnVlKX0sY29sbGFwc2VBbGxHcm91cHM6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZUFsbEdyb3VwcyhmYWxzZSl9LGdldEdyb3VwOmZ1bmN0aW9uKGEsZSxpLGosYixoKXt2YXIgYz10aGlzLmNtLmNvbmZpZ1tiXSxkPWk/aS5jYWxsKGMuc2NvcGUsYSx7fSxlLGosYixoKTpTdHJpbmcoYSk7aWYoZD09PSIifHxkPT09IiYjMTYwOyIpe2Q9Yy5lbXB0eUdyb3VwVGV4dHx8dGhpcy5lbXB0eUdyb3VwVGV4dH1yZXR1cm4gZH0sZ2V0R3JvdXBGaWVsZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdyaWQuc3RvcmUuZ2V0R3JvdXBTdGF0ZSgpfSxhZnRlclJlbmRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLmRzfHwhdGhpcy5jbSl7cmV0dXJufUV4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLmFmdGVyUmVuZGVyLmNhbGwodGhpcyk7aWYodGhpcy5ncmlkLmRlZmVyUm93UmVuZGVyKXt0aGlzLnVwZGF0ZUdyb3VwV2lkdGhzKCl9fSxhZnRlclJlbmRlclVJOmZ1bmN0aW9uKCl7RXh0LmdyaWQuR3JvdXBpbmdWaWV3LnN1cGVyY2xhc3MuYWZ0ZXJSZW5kZXJVSS5jYWxsKHRoaXMpO2lmKHRoaXMuZW5hYmxlR3JvdXBpbmdNZW51JiZ0aGlzLmhtZW51KXt0aGlzLmhtZW51LmFkZCgiLSIse2l0ZW1JZDoiZ3JvdXBCeSIsdGV4dDp0aGlzLmdyb3VwQnlUZXh0LGhhbmRsZXI6dGhpcy5vbkdyb3VwQnlDbGljayxzY29wZTp0aGlzLGljb25DbHM6IngtZ3JvdXAtYnktaWNvbiJ9KTtpZih0aGlzLmVuYWJsZU5vR3JvdXBzKXt0aGlzLmhtZW51LmFkZCh7aXRlbUlkOiJzaG93R3JvdXBzIix0ZXh0OnRoaXMuc2hvd0dyb3Vwc1RleHQsY2hlY2tlZDp0cnVlLGNoZWNrSGFuZGxlcjp0aGlzLm9uU2hvd0dyb3Vwc0NsaWNrLHNjb3BlOnRoaXN9KX10aGlzLmhtZW51Lm9uKCJiZWZvcmVzaG93Iix0aGlzLmJlZm9yZU1lbnVTaG93LHRoaXMpfX0scmVuZGVyUm93czpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0R3JvdXBGaWVsZCgpO3ZhciBlPSEhYTtpZih0aGlzLmhpZGVHcm91cGVkQ29sdW1uKXt2YXIgYj10aGlzLmNtLmZpbmRDb2x1bW5JbmRleChhKSxkPUV4dC5pc0RlZmluZWQodGhpcy5sYXN0R3JvdXBGaWVsZCk7aWYoIWUmJmQpe3RoaXMubWFpbkJvZHkudXBkYXRlKCIiKTt0aGlzLmNtLnNldEhpZGRlbih0aGlzLmNtLmZpbmRDb2x1bW5JbmRleCh0aGlzLmxhc3RHcm91cEZpZWxkKSxmYWxzZSk7ZGVsZXRlIHRoaXMubGFzdEdyb3VwRmllbGR9ZWxzZXtpZihlJiYhZCl7dGhpcy5sYXN0R3JvdXBGaWVsZD1hO3RoaXMuY20uc2V0SGlkZGVuKGIsdHJ1ZSl9ZWxzZXtpZihlJiZkJiZhIT09dGhpcy5sYXN0R3JvdXBGaWVsZCl7dGhpcy5tYWluQm9keS51cGRhdGUoIiIpO3ZhciBjPXRoaXMuY20uZmluZENvbHVtbkluZGV4KHRoaXMubGFzdEdyb3VwRmllbGQpO3RoaXMuY20uc2V0SGlkZGVuKGMsZmFsc2UpO3RoaXMubGFzdEdyb3VwRmllbGQ9YTt0aGlzLmNtLnNldEhpZGRlbihiLHRydWUpfX19fXJldHVybiBFeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuc3VwZXJjbGFzcy5yZW5kZXJSb3dzLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZG9SZW5kZXI6ZnVuY3Rpb24oYyxoLHEsYSxwLHMpe2lmKGgubGVuZ3RoPDEpe3JldHVybiIifWlmKCF0aGlzLmNhbkdyb3VwKCl8fHRoaXMuaXNVcGRhdGluZyl7cmV0dXJuIEV4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLmRvUmVuZGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX12YXIgej10aGlzLmdldEdyb3VwRmllbGQoKSxvPXRoaXMuY20uZmluZENvbHVtbkluZGV4KHopLHcsaj0id2lkdGg6Iit0aGlzLmdldFRvdGFsV2lkdGgoKSsiOyIsZT10aGlzLmNtLmNvbmZpZ1tvXSxiPWUuZ3JvdXBSZW5kZXJlcnx8ZS5yZW5kZXJlcix0PXRoaXMuc2hvd0dyb3VwTmFtZT8oZS5ncm91cE5hbWV8fGUuaGVhZGVyKSsiOiAiOiIiLHk9W10sbCx1LHYsbjtmb3IodT0wLHY9aC5sZW5ndGg7dTx2O3UrKyl7dmFyIGs9YSt1LG09aFt1XSxkPW0uZGF0YVt6XTt3PXRoaXMuZ2V0R3JvdXAoZCxtLGIsayxvLHEpO2lmKCFsfHxsLmdyb3VwIT13KXtuPXRoaXMuY29uc3RydWN0SWQoZCx6LG8pO3RoaXMuc3RhdGVbbl09IShFeHQuaXNEZWZpbmVkKHRoaXMuc3RhdGVbbl0pPyF0aGlzLnN0YXRlW25dOnRoaXMuc3RhcnRDb2xsYXBzZWQpO2w9e2dyb3VwOncsZ3ZhbHVlOmQsdGV4dDp0K3csZ3JvdXBJZDpuLHN0YXJ0Um93OmsscnM6W21dLGNsczp0aGlzLnN0YXRlW25dPyIiOiJ4LWdyaWQtZ3JvdXAtY29sbGFwc2VkIixzdHlsZTpqfTt5LnB1c2gobCl9ZWxzZXtsLnJzLnB1c2gobSl9bS5fZ3JvdXBJZD1ufXZhciB4PVtdO2Zvcih1PTAsdj15Lmxlbmd0aDt1PHY7dSsrKXt3PXlbdV07dGhpcy5kb0dyb3VwU3RhcnQoeCx3LGMscSxwKTt4W3gubGVuZ3RoXT1FeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuc3VwZXJjbGFzcy5kb1JlbmRlci5jYWxsKHRoaXMsYyx3LnJzLHEsdy5zdGFydFJvdyxwLHMpO3RoaXMuZG9Hcm91cEVuZCh4LHcsYyxxLHApfXJldHVybiB4LmpvaW4oIiIpfSxnZXRHcm91cElkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0R3JvdXBGaWVsZCgpO3JldHVybiB0aGlzLmNvbnN0cnVjdElkKGEsYix0aGlzLmNtLmZpbmRDb2x1bW5JbmRleChiKSl9LGNvbnN0cnVjdElkOmZ1bmN0aW9uKGMsZSxhKXt2YXIgYj10aGlzLmNtLmNvbmZpZ1thXSxkPWIuZ3JvdXBSZW5kZXJlcnx8Yi5yZW5kZXJlcixnPSh0aGlzLmdyb3VwTW9kZT09InZhbHVlIik/Yzp0aGlzLmdldEdyb3VwKGMse2RhdGE6e319LGQsMCxhLHRoaXMuZHMpO3JldHVybiB0aGlzLmdldFByZWZpeChlKStFeHQudXRpbC5Gb3JtYXQuaHRtbEVuY29kZShnKX0sY2FuR3JvdXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVHcm91cGluZyYmISF0aGlzLmdldEdyb3VwRmllbGQoKX0sZ2V0UHJlZml4OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdyaWQuZ2V0R3JpZEVsKCkuaWQrIi1ncC0iK2ErIi0ifSxkb0dyb3VwU3RhcnQ6ZnVuY3Rpb24oYSxkLGIsZSxjKXthW2EubGVuZ3RoXT10aGlzLnN0YXJ0R3JvdXAuYXBwbHkoZCl9LGRvR3JvdXBFbmQ6ZnVuY3Rpb24oYSxkLGIsZSxjKXthW2EubGVuZ3RoXT10aGlzLmVuZEdyb3VwfSxnZXRSb3dzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuY2FuR3JvdXAoKSl7cmV0dXJuIEV4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLmdldFJvd3MuY2FsbCh0aGlzKX12YXIgaz1bXSxjPXRoaXMuZ2V0R3JvdXBzKCksaCxlPTAsYT1jLmxlbmd0aCxkLGI7Zm9yKDtlPGE7KytlKXtoPWNbZV0uY2hpbGROb2Rlc1sxXTtpZihoKXtoPWguY2hpbGROb2Rlcztmb3IoZD0wLGI9aC5sZW5ndGg7ZDxiOysrZCl7a1trLmxlbmd0aF09aFtkXX19fXJldHVybiBrfSx1cGRhdGVHcm91cFdpZHRoczpmdW5jdGlvbigpe2lmKCF0aGlzLmNhbkdyb3VwKCl8fCF0aGlzLmhhc1Jvd3MoKSl7cmV0dXJufXZhciBjPU1hdGgubWF4KHRoaXMuY20uZ2V0VG90YWxXaWR0aCgpLHRoaXMuZWwuZG9tLm9mZnNldFdpZHRoLXRoaXMuZ2V0U2Nyb2xsT2Zmc2V0KCkpKyJweCI7dmFyIGI9dGhpcy5nZXRHcm91cHMoKTtmb3IodmFyIGQ9MCxhPWIubGVuZ3RoO2Q8YTtkKyspe2JbZF0uZmlyc3RDaGlsZC5zdHlsZS53aWR0aD1jfX0sb25Db2x1bW5XaWR0aFVwZGF0ZWQ6ZnVuY3Rpb24oYyxhLGIpe0V4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLm9uQ29sdW1uV2lkdGhVcGRhdGVkLmNhbGwodGhpcyxjLGEsYik7dGhpcy51cGRhdGVHcm91cFdpZHRocygpfSxvbkFsbENvbHVtbldpZHRoc1VwZGF0ZWQ6ZnVuY3Rpb24oYSxiKXtFeHQuZ3JpZC5Hcm91cGluZ1ZpZXcuc3VwZXJjbGFzcy5vbkFsbENvbHVtbldpZHRoc1VwZGF0ZWQuY2FsbCh0aGlzLGEsYik7dGhpcy51cGRhdGVHcm91cFdpZHRocygpfSxvbkNvbHVtbkhpZGRlblVwZGF0ZWQ6ZnVuY3Rpb24oYixjLGEpe0V4dC5ncmlkLkdyb3VwaW5nVmlldy5zdXBlcmNsYXNzLm9uQ29sdW1uSGlkZGVuVXBkYXRlZC5jYWxsKHRoaXMsYixjLGEpO3RoaXMudXBkYXRlR3JvdXBXaWR0aHMoKX0sb25MYXlvdXQ6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUdyb3VwV2lkdGhzKCl9LG9uQmVmb3JlUm93U2VsZWN0OmZ1bmN0aW9uKGIsYSl7dGhpcy50b2dnbGVSb3dJbmRleChhLHRydWUpfX0pO0V4dC5ncmlkLkdyb3VwaW5nVmlldy5HUk9VUF9JRD0xMDAwOw==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>