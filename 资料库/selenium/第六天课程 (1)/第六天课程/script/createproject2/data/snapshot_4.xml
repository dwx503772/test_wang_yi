<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="4">
  <HTTPTask id="17" hostname="192.168.0.106" path="/testlink/gui/javascript/testlink_library.js" url="http://192.168.0.106/testlink/gui/javascript/testlink_library.js" ip="192.168.0.106" port="80" connectionId="3" origin="Primary" frame="1" startTime="7432776" endTime="7432792">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzE5Mi4xNjguMC4xMDYvdGVzdGxpbmsvbG9naW4ucGhw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>emgtQ04=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgOS4wOyBXaW5kb3dzIE5UIDYuMTsgVHJpZGVudC81LjAp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyLjE2OC4wLjEwNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UEhQU0VTU0lEPTY1NDAzaXUybGw5ZzdnY2ttdGJ2NWk1NTU3</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC90ZXN0bGluay9ndWkvamF2YXNjcmlwdC90ZXN0bGlua19saWJyYXJ5LmpzIEhUVFAvMS4xDQpBY2NlcHQ6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICovKjtxPTAuOA0KUmVmZXJlcjogaHR0cDovLzE5Mi4xNjguMC4xMDYvdGVzdGxpbmsvbG9naW4ucGhwDQpBY2NlcHQtTGFuZ3VhZ2U6IHpoLUNODQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSA5LjA7IFdpbmRvd3MgTlQgNi4xOyBUcmlkZW50LzUuMCkNCkFjY2VwdC1FbmNvZGluZzogZ3ppcCwgZGVmbGF0ZQ0KSG9zdDogMTkyLjE2OC4wLjEwNg0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KQ29va2llOiBQSFBTRVNTSUQ9NjU0MDNpdTJsbDlnN2dja210YnY1aTU1NTcNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="PHPSESSID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjU0MDNpdTJsbDlnN2dja210YnY1aTU1NTc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBBdWcgMjAxNiAxNTo1ODo0OCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLzIuNC4xMCAoVWJ1bnR1KQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U2F0LCAwMSBTZXAgMjAxMiAxMzo1NTozMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjhhZTItNGM4YTQ0MmVmMTg4MC1nemlwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>OTA5Mg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Keep-Alive" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGltZW91dD01LCBtYXg9MTAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUdWUsIDE2IEF1ZyAyMDE2IDE1OjU4OjQ4IEdNVA0KU2VydmVyOiBBcGFjaGUvMi40LjEwIChVYnVudHUpDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDAxIFNlcCAyMDEyIDEzOjU1OjMwIEdNVA0KRVRhZzogIjhhZTItNGM4YTQ0MmVmMTg4MC1nemlwIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KQ29udGVudC1MZW5ndGg6IDkwOTINCktlZXAtQWxpdmU6IHRpbWVvdXQ9NSwgbWF4PTEwMA0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>Ly8gVGVzdExpbmsgT3BlbiBTb3VyY2UgUHJvamVjdCAtIGh0dHA6Ly90ZXN0bGluay5zb3VyY2Vmb3JnZS5uZXQvCi8vIFRoaXMgc2NyaXB0IGlzIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBHTlUgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSAyIG9yIGxhdGVyLgovLwovLyBAZmlsZXNvdXJjZSB0ZXN0bGlua19saWJyYXJ5LmpzCi8vCi8vIEphdmFzY3JpcHQgZnVuY3Rpb25zIGNvbW1vbmx5IHVzZWQgdGhyb3VnaCB0aGUgR1VJCi8vIFJ1bGU6IERPIE5PVCBBREQgRlVOQ1RJT05TIEZPUiBPTkUgVVNJTkcKLy8KLy8gQHVzZWQgVGhpcyBsaWJyYXJ5IGlzIGF1dG9tYXRpY2FsbHkgbG9hZGVkIHdpdGggaW5jX2hlYWRlci50cGwKLy8KLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCi8vIC0tLS0tIERldmVsb3BtZW50IE5vdGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi8vCi8vIEBnbG9iYWwgdmFyaWFibGVzOgovLyAJZlJvb3QKLy8gCW1lbnVVcmwKLy8gCWFyZ3MKLy8KLy8gdmFsdWUgdG8gdGhpcyB2YXJpYWJsZXMgaXMgYXNzaWduZWQgdXNpbmcgZGlmZmVyZW50IHNtYXJ0eSB0ZW1wbGF0ZXMsCi8vIGxpa2UgaW5jX2hlYWQudHBsCi8vCi8vIEF0dGVudGlvbjoKLy8gd2luZG93Lm9wZW4oKSAtIG9uIEZpcmVmb3ggaXMgd2luZG93IG5hbWUgY29udGFpbnMgYmxhbmsgbm90aGluZyBoYXBwZW5zIChubyBnb29kKQovLyAgICAgICAgICAgICAgICAgb24gSS5FLiA9PiBnZW5lcmF0ZXMgYSBidWcgLSBCRSBDQVJFRlVMCi8vCi8vIEBpbnRlcm5hbCByZXZpc2lvbnMKLy8gQHNpbmNlIDEuOS40Ci8vIDIwMTExMTIzIC0gZnJhbmNpc2NvbSAtIFRJQ0tFVCA0ODE0OiBidWcgZGVsZXRpb24gbWF5IGZhaWxzIGlmIGJ1Z0lEIHN0cmluZyBjb250YWlucyBzcGVjaWFsIGNoYXJhY3RlcnMgCi8vIDIwMTExMTA1IC0gZnJhbmNpc2NvbSAtIFRJQ0tFVCA0Nzk2OiBUZXN0IENhc2UgcmV1c2UgLSBRdWljayAmIERpcnR5IEFwcHJvYWNoIAovLyAyMDExMTAwNyAtIGZyYW5jaXNjb20gLSBUSUNLRVQgNDc2NjogUmVxdWlyZW1lbnRzIFJlcG9ydCAtIERpc3BsYXkgUmV2aXNpb24gYW5kIFZlcnNpb24KCi8qCiAgZnVuY3Rpb246IGZvY3VzSW5wdXRGaWVsZAoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIGZvY3VzSW5wdXRGaWVsZChpZCxzZWxlY3RJdCkKewoJdmFyIGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7CglpZiAoZikKCXsKCQlmLmZvY3VzKCk7CgkJaWYoc2VsZWN0SXQpCgkJewoJCQlmLnNlbGVjdCgpOwoJCX0JCgl9Cn0KCgovKiAKZnVuY3Rpb246IHNob3cgaGVscCA8ZGl2PiB0YWcgd2l0aCBhYnNvbHV0ZSBwb3NpdGlvbiBvciByaWdodCBzaXRlIG93IHdpbmRvdwphcmc6IGxvY2FsaXplZCB0ZXh0IG9mIGhlbHAKcmV0dXJuczogTi9BIAoqLwpmdW5jdGlvbiBzaG93X2hlbHAodGV4dCkKewoJLy8gc2V0IHdvcmtmcmFtZSB3aW5kb3cgZm9yIG5hdmlnYXRvciBwYW5lCglpZih3aW5kb3cubmFtZSA9PSAidHJlZWZyYW1lIil7CgkJdmFyIG15d2luZG93cyA9IHdpbmRvdy5wYXJlbnQuZnJhbWVzWyJ3b3JrZnJhbWUiXS5kb2N1bWVudDsJCQoJfSBlbHNlIHsKCQl2YXIgbXl3aW5kb3dzID0gd2luZG93LmRvY3VtZW50OwoJfQoKCW15RWxlbWVudCA9IG15d2luZG93cy5nZXRFbGVtZW50QnlJZCgidGxoZWxwIik7CglpZihteUVsZW1lbnQgPT0gbnVsbCkKCXsKCQkKICAJCXZhciBteWJvZHkgPSBteXdpbmRvd3MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKS5pdGVtKDApOwoJCXZhciBuZXdkaXYgPSBteXdpbmRvd3MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CgkJbmV3ZGl2LnNldEF0dHJpYnV0ZSgnaWQnLCAndGxoZWxwJyk7CgkJbmV3ZGl2LnNldEF0dHJpYnV0ZSgnb25jbGljaycsICdqYXZhc2NyaXB0OiBjbG9zZV9oZWxwKCknKTsKCQlteWJvZHkuYXBwZW5kQ2hpbGQobmV3ZGl2KTsKCgkJbXlFbGVtZW50ID0gbXl3aW5kb3dzLmdldEVsZW1lbnRCeUlkKCJ0bGhlbHAiKTsKCX0KCglteUVsZW1lbnQuaW5uZXJIVE1MID0gdGV4dDsKfQoKZnVuY3Rpb24gY2xvc2VfaGVscCgpIAp7CgkvLyBzZXQgd29ya2ZyYW1lIHdpbmRvdyBmb3IgbmF2aWdhdG9yIHBhbmUKCWlmKHdpbmRvdy5uYW1lID09ICJ0cmVlZnJhbWUiKXsKCQl2YXIgbXl3aW5kb3dzID0gd2luZG93LnBhcmVudC5mcmFtZXNbIndvcmtmcmFtZSJdLmRvY3VtZW50OwkJCgl9IGVsc2UgewoJCXZhciBteXdpbmRvd3MgPSB3aW5kb3cuZG9jdW1lbnQ7Cgl9CgoJdmFyIGQgPSBteXdpbmRvd3MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImJvZHkiKS5pdGVtKDApOwoJdmFyIG9sZGRpdiA9IG15d2luZG93cy5nZXRFbGVtZW50QnlJZCgndGxoZWxwJyk7CglkLnJlbW92ZUNoaWxkKG9sZGRpdik7Cn0KCgoKLyoKICBmdW5jdGlvbjogb3Blbl9wb3B1cAoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIG9wZW5fcG9wdXAocGFnZSkKewogIHZhciB3aW5kb3dDZmc9ImxlZnQ9MzUwLHRvcD01MCxzY3JlZW5YPTM1MCxzY3JlZW5ZPTUwLGZ1bGxzY3JlZW49bm8scmVzaXphYmxlPXllcywiICsgCiAgICAgICAgICAgICAgICAidG9vbGJhcj1ubyxzdGF0dXM9bm8sbWVudWJhcj1ubyxzY3JvbGxiYXJzPXllcyxkaXJlY3Rvcmllcz1ubyxsb2NhdGlvbj1ubywiICsKICAgICAgICAgICAgICAgICJ3aWR0aD00MDAsaGVpZ2h0PTY1MCI7Cgl3aW5kb3cub3BlbihwYWdlLCAiX2JsYW5rIix3aW5kb3dDZmcpOwoJcmV0dXJuIHRydWU7Cn0KCi8vIEJVR0lEIDI2ODQ6IG5vdCBuZWVkZWQgYW55bW9yZQovLyBtaWRkbGUgd2luZG93IChpbmZvcm1hdGlvbiwgVEMpCi8vZnVuY3Rpb24gb3Blbl90b3AocGFnZSkKLy97Ci8vICB2YXIgd2luZG93Q2ZnPSJsZWZ0PTM1MCx0b3A9NTAsc2NyZWVuWD0zNTAsc2NyZWVuWT01MCxmdWxsc2NyZWVuPW5vLHJlc2l6YWJsZT15ZXMsIiArIAovLyAgICAgICAgICAgICAgICAidG9vbGJhcj1ubyxzdGF0dXM9bm8sbWVudWJhcj1ubyxzY3JvbGxiYXJzPXllcyxkaXJlY3Rvcmllcz1ubyxsb2NhdGlvbj1ubywiICsKLy8gICAgICAgICAgICAgICAgIndpZHRoPTYwMCxoZWlnaHQ9NDAwIjsKLy8gIAovLwl3aW5kb3cub3BlbihwYWdlLCAiX2JsYW5rIiwgd2luZG93Q2ZnKTsKLy8JcmV0dXJuIHRydWU7Ci8vfQoKCi8vIHRlc3Qgc3BlY2lmaWNhdGlvbiByZWxhdGVkIGZ1bmN0aW9ucwovKgogIGZ1bmN0aW9uOiBTVAogICAgICAgICAgICBTaG93IFRlc3QgY2FzZQoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiAgSU1QT1JUQU5UIE5PVElDRTogc2VlIERldmVsb3BtZW50IE5vdGVzIG9uIFRPUCBvZiB0aGlzIGRvY3VtZW50IGZvciBpbmZvIHJlZ2FyZGluZyBhcmdzCgoqLwpmdW5jdGlvbiBTVChpZCx2ZXJzaW9uKQp7CiAgdmFyIF9GVU5DVElPTl9OQU1FXz0nU1QnOwogIHZhciBhY3Rpb25fdXJsPWZSb290K21lbnVVcmwrIj92ZXJzaW9uX2lkPSIrdmVyc2lvbisiJmxldmVsPXRlc3RjYXNlJmlkPSIraWQrYXJnczsKCS8vIGFsZXJ0KF9GVU5DVElPTl9OQU1FXyArICIgIiArYWN0aW9uX3VybCk7CglwYXJlbnQud29ya2ZyYW1lLmxvY2F0aW9uID0gYWN0aW9uX3VybDsKfQoKCi8qCiAgZnVuY3Rpb246IFNUUwogICAgICAgICAgICBTaG93IFRlc3QgU3VpdGUKCiAgYXJncyA6CgogIHJldHVybnM6CgoqLwpmdW5jdGlvbiBTVFMoaWQpCnsKICB2YXIgX0ZVTkNUSU9OX05BTUVfPSdTVFMnOwoJdmFyIGFjdGlvbl91cmwgPSBmUm9vdCsnLycrbWVudVVybCsiP2xldmVsPXRlc3RzdWl0ZSZpZD0iK2lkK2FyZ3M7CgkvLyBhbGVydChfRlVOQ1RJT05fTkFNRV8gKyAiICIgK2FjdGlvbl91cmwpOwoJcGFyZW50LndvcmtmcmFtZS5sb2NhdGlvbiA9IGFjdGlvbl91cmw7Cn0KCgovKgogIGZ1bmN0aW9uOiBTUAoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIFNQKCkKewogICAgdmFyIGFjdGlvbl91cmwgPSBmUm9vdCttZW51VXJsOwogIAlwYXJlbnQud29ya2ZyYW1lLmxvY2F0aW9uID0gYWN0aW9uX3VybDsKfQoKLyoKICBmdW5jdGlvbjogRVAKICAgICAgICAgICAgcHJpbnRpbmcgb2YgVGVzdCBTcGVjaWZpY2F0aW9uCgogIGFyZ3MgOgoKICByZXR1cm5zOgoKKi8KZnVuY3Rpb24gRVAoaWQpCnsKCXZhciBfRlVOQ1RJT05fTkFNRV89IkVQIjsKCgkvLyBnZXQgY2hlY2tib3hlcyBzdGF0dXMKCXZhciBwUGFyYW1zID0gdHJlZV9nZXRQcmludFByZWZlcmVuY2VzKCk7Cgl2YXIgYWN0aW9uX3VybCA9IGZSb290K21lbnVVcmwrIj9wcmludF9zY29wZT10ZXN0X3NwZWNpZmljYXRpb24iICsgIiZlZGl0PXRlc3Rwcm9qZWN0IiArCgkgICAgICAgICAgICAgICAgICImbGV2ZWw9dGVzdHByb2plY3QmaWQ9IitpZCthcmdzKyImIitwUGFyYW1zOwoKCS8vYWxlcnQoX0ZVTkNUSU9OX05BTUVfICsgIiAiICthY3Rpb25fdXJsKTsKCXBhcmVudC53b3JrZnJhbWUubG9jYXRpb24gPSBhY3Rpb25fdXJsOwp9CgovLy8qCi8vZnVuY3Rpb246IFBMCi8vICAgICAgICAgIHByaW50aW5nIG9mIFRlc3QgUGxhbiBmb3IgQlVHSUQgMzA0OQovL2FyZ3M6IGlkCi8vKi8KLy9mdW5jdGlvbiBQTChpZCkKLy97Ci8vCXZhciBfRlVOQ1RJT05fTkFNRV89IlBMIjsKLy8JdmFyIGFjdGlvbl91cmwgPSBmUm9vdCArICdsaWIvdGVzdGNhc2VzL2FyY2hpdmVEYXRhLnBocD9lZGl0PXRlc3RwbGFuJmxldmVsPXRlc3RwbGFuJmlkPScgKyBpZDsKLy8JcGFyZW50LndvcmtmcmFtZS5sb2NhdGlvbiA9IGFjdGlvbl91cmw7Ci8vfQoKLyoKICBmdW5jdGlvbjogRWRpdCBUZXN0IFN1aXRlIG9yIGxhdW5jaCBwcmludAoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiAgcmV2IDoKICAgICAgICAyMDA3MDIxOCAtIGZyYW5jaXNjb20KKi8KZnVuY3Rpb24gRVRTKGlkKQp7CiAgLy8gZ2V0IGNoZWNrYm94ZXMgc3RhdHVzCgl2YXIgX0ZVTkNUSU9OX05BTUVfPSJFVFMiOwoJdmFyIHBQYXJhbXMgPSB0cmVlX2dldFByaW50UHJlZmVyZW5jZXMoKTsKCXZhciBhY3Rpb25fdXJsPWZSb290K21lbnVVcmwrIj9wcmludF9zY29wZT10ZXN0X3NwZWNpZmljYXRpb24iICsKCSAgICAgICAgICAgICAgICImZWRpdD10ZXN0c3VpdGUmbGV2ZWw9dGVzdHN1aXRlJmlkPSIraWQrYXJncysiJiIrcFBhcmFtczsKCgkvLyBhbGVydChfRlVOQ1RJT05fTkFNRV8gKyAiICIgK2FjdGlvbl91cmwpOwoJcGFyZW50LndvcmtmcmFtZS5sb2NhdGlvbiA9IGFjdGlvbl91cmw7Cgp9CgovKgogIGZ1bmN0aW9uOiBFZGl0IFRlc3QgY2FzZQoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIEVUKGlkLHYpCnsKICAvLyBnZXQgY2hlY2tib3hlcyBzdGF0dXMKIAl2YXIgX0ZVTkNUSU9OX05BTUVfPSJFVCI7CiAgdmFyIHBQYXJhbXMgPSB0cmVlX2dldFByaW50UHJlZmVyZW5jZXMoKTsKCXZhciBteV9sb2NhdGlvbiA9IGZSb290K21lbnVVcmwrIj92ZXJzaW9uX2lkPSIrdisiJmVkaXQ9dGVzdGNhc2UmaWQ9IitpZCthcmdzOwoJLy8gYWxlcnQoX0ZVTkNUSU9OX05BTUVfICsgIiAiICtteV9sb2NhdGlvbik7CiAgCglwYXJlbnQud29ya2ZyYW1lLmxvY2F0aW9uID0gbXlfbG9jYXRpb247Cn0KCgovKiBHZW5lcmF0ZSBkb2M6IGEgc2VsZWN0ZWQgVGVzdCBTdWl0ZSBmcm9tIFRlc3QgU3BlY2lmaWNhdGlvbiAqLwpmdW5jdGlvbiBUUFJPSkVDVF9QVFMoaWQpCnsKCXZhciBwUGFyYW1zID0gdHJlZV9nZXRQcmludFByZWZlcmVuY2VzKCk7CglwYXJlbnQud29ya2ZyYW1lLmxvY2F0aW9uID0gZlJvb3QrbWVudVVybCsiP3R5cGU9dGVzdHNwZWMmbGV2ZWw9dGVzdHN1aXRlJmlkPSIraWQrYXJncysiJiIrcFBhcmFtczsKfQoKLyogR2VuZXJhdGUgZG9jOiBhbGwgVGVzdCBTcGVjaWZpY2F0aW9uICovCmZ1bmN0aW9uIFRQUk9KRUNUX1BUUChpZCkKewoJdmFyIHBQYXJhbXMgPSB0cmVlX2dldFByaW50UHJlZmVyZW5jZXMoKTsKCXBhcmVudC53b3JrZnJhbWUubG9jYXRpb24gPSBmUm9vdCttZW51VXJsKyI/dHlwZT10ZXN0c3BlYyZsZXZlbD10ZXN0cHJvamVjdCZpZD0iK2lkK2FyZ3MrIiYiK3BQYXJhbXM7Cn0KCi8qIEdlbmVyYXRlIGRvYzogYSBzZWxlY3RlZCBUZXN0IFRhc2UgZnJvbSBUZXN0IFNwZWNpZmljYXRpb24gKi8KZnVuY3Rpb24gVFBST0pFQ1RfUFRDKGlkKQp7CglwYXJlbnQud29ya2ZyYW1lLmxvY2F0aW9uID0gZlJvb3QrbWVudVVybCsiP3R5cGU9dGVzdHNwZWMmbGV2ZWw9dGMmaWQ9IitpZCthcmdzOwp9CgoKLyogR2VuZXJhdGUgZG9jOiBhbGwgUmVxIFNwZWNzLCBjb21wbGV0ZSBwcm9qZWN0ICovCmZ1bmN0aW9uIFRQUk9KRUNUX1BUUF9SUyhpZCkKewoJdmFyIHBQYXJhbXMgPSB0cmVlX2dldFByaW50UHJlZmVyZW5jZXMoKTsKCXBhcmVudC53b3JrZnJhbWUubG9jYXRpb24gPSBmUm9vdCttZW51VXJsKyI/dHlwZT1yZXFzcGVjJmxldmVsPXRlc3Rwcm9qZWN0JmlkPSIraWQrYXJncysiJiIrcFBhcmFtczsKfQoKCi8qIEdlbmVyYXRlIGRvYzogb25lIFJlcSBTcGVjICh3aXRoIGNoaWxkcmVuKSAqLwpmdW5jdGlvbiBUUFJPSkVDVF9QUlMoaWQpCnsKCXZhciBwUGFyYW1zID0gdHJlZV9nZXRQcmludFByZWZlcmVuY2VzKCk7CglwYXJlbnQud29ya2ZyYW1lLmxvY2F0aW9uID0gZlJvb3QrbWVudVVybCsiP3R5cGU9cmVxc3BlYyZsZXZlbD1yZXFzcGVjJmlkPSIraWQrYXJncysiJiIrcFBhcmFtczsKfQoKCi8qCiAgZnVuY3Rpb246IFRQTEFOX1BUUwogICAgICAgICAgICBUZXN0IFBMQU4gUHJpbnQgVGVzdCBTdWl0ZQoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIFRQTEFOX1BUUyhpZCkKewoJdmFyIHBQYXJhbXMgPSB0cmVlX2dldFByaW50UHJlZmVyZW5jZXMoKTsKCXBhcmVudC53b3JrZnJhbWUubG9jYXRpb24gPSBmUm9vdCttZW51VXJsKyI/bGV2ZWw9dGVzdHN1aXRlJmlkPSIraWQrYXJncysiJiIrcFBhcmFtczsKfQoKLyoKICBmdW5jdGlvbjogVFBMQU5fUFRQCiAgICAgICAgICAgIFRlc3QgUExBTiBQcmludCBUZXN0IFBsYW4KKi8KZnVuY3Rpb24gVFBMQU5fUFRQKGlkKQp7Cgl2YXIgcFBhcmFtcyA9IHRyZWVfZ2V0UHJpbnRQcmVmZXJlbmNlcygpOwoJdmFyIG15X2xvY2F0aW9uID0gZlJvb3QrbWVudVVybCsiP2xldmVsPXRlc3Rwcm9qZWN0JmlkPSIraWQrYXJncysiJiIrcFBhcmFtczsKCXBhcmVudC53b3JrZnJhbWUubG9jYXRpb24gPW15X2xvY2F0aW9uOwp9CgoKLyoKICBmdW5jdGlvbjogVFBMQU5fUFRDCiAgICAgICAgICAgIFRlc3QgUExBTiBQcmludCBUZXN0IENhc2UKKi8KZnVuY3Rpb24gVFBMQU5fUFRDKGlkKQp7Cgl2YXIgbXlfbG9jYXRpb24gPSBmUm9vdCttZW51VXJsKyI/bGV2ZWw9dGMmaWQ9IitpZCthcmdzOwoJcGFyZW50LndvcmtmcmFtZS5sb2NhdGlvbiA9IG15X2xvY2F0aW9uOwp9CgpmdW5jdGlvbiBzaG93T3JIaWRlRWxlbWVudChvaWQsaGlkZSkKewoJICB2YXIgb2JqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob2lkKTsKCSAgdmFyIGRpc3BsYXlWYWx1ZSA9ICIiOwogICAgCiAgICBpZiAoIW9iaikKICAgIHsKICAgIAlyZXR1cm47CiAgICB9CiAgCWlmKGhpZGUpCiAgCXsKICAJCWRpc3BsYXlWYWx1ZSA9ICJub25lIjsKICAgIH0KICAJb2JqLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5VmFsdWU7Cn0KCi8qKgogKiBEaXNwbGF5IGEgY29uZmlybWF0aW9uIGRsZyBiZWZvcmUgbW9kaWZ5aW5nIHJvbGVzCiAqCiAqIEByZXR1cm4gYm9vbCByZXR1cm4gdHJ1ZSBpZiB0aGUgdXNlciBjb25maXJtZWQsIGZhbHNlIGVsc2UKICoKICoqLwpmdW5jdGlvbiBtb2RpZnlSb2xlc193YXJuaW5nKCkKewogIHZhciByZXQ9ZmFsc2U7CglpZiAoY29uZmlybSh3YXJuaW5nX21vZGlmeV9yb2xlKSkKCXsKCQlyZXQ9dHJ1ZTsKICB9IAoJcmV0dXJuIHJldDsKfQoKLyoqCiAqIAogKiBAcGFyYW0gc3RyaW5nIGZlYXR1cmUgdGhlIGZlYXR1cmUsIGNvdWxkIGJlIHRlc3RwbGFuIG9yIHByb2R1Y3QKICoqLwpmdW5jdGlvbiBjaGFuZ2VGZWF0dXJlKGZlYXR1cmUpCnsKCXZhciB0bXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmVhdHVyZVNlbCcpOwoJdmFyIGZJRCA9ICcnOwoJaWYgKCF0bXApCgl7CgkJcmV0dXJuOwoJfQoJZklEID0gdG1wLnZhbHVlOwoJaWYoZklEKQoJewoJCWxvY2F0aW9uID0gZlJvb3QrImxpYi91c2VybWFuYWdlbWVudC91c2Vyc0Fzc2lnbi5waHA/ZmVhdHVyZVR5cGU9IitmZWF0dXJlKyImZmVhdHVyZUlEPSIrZklEOwoJfQkKfQoKZnVuY3Rpb24gb3BlbkZpbGVVcGxvYWRXaW5kb3coaWQsdGFibGVOYW1lKQp7CiAgdmFyIHdpbmRvd0NmZz0id2lkdGg9NTEwLGhlaWdodD0zMDAscmVzaXphYmxlPXllcyxkZXBlbmRlbnQ9eWVzIjsKCXdpbmRvdy5vcGVuKGZSb290KyJsaWIvYXR0YWNobWVudHMvYXR0YWNobWVudHVwbG9hZC5waHA/aWQ9IitpZCsiJnRhYmxlTmFtZT0iK3RhYmxlTmFtZSwKCSAgICAgICAgICAgICJGaWxlVXBsb2FkIix3aW5kb3dDZmcpOwp9CgoKLyoKICBmdW5jdGlvbjoKCiAgYXJncyA6ICBvYmplY3QgaWQKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIGRlbGV0ZUF0dGFjaG1lbnRfb25DbGljayhidG4sdHh0LGlkKQp7CglpZiAoYnRuID09ICd5ZXMnKQoJewoJICB2YXIgd2luZG93Q2ZnPSJ3aWR0aD01MTAsaGVpZ2h0PTE1MCxyZXNpemFibGU9eWVzLGRlcGVuZGVudD15ZXMiOwoJCXdpbmRvdy5vcGVuKGZSb290KyJsaWIvYXR0YWNobWVudHMvYXR0YWNobWVudGRlbGV0ZS5waHA/aWQ9IitpZCwKCQkgICAgICAgICAgICAiRGVsZXRlIix3aW5kb3dDZmcpOwoJfQkKfQoKZnVuY3Rpb24gYXR0YWNobWVudERsZ19vblVubG9hZCgpCnsKCWlmIChhdHRhY2htZW50RGxnX2JOb1JlZnJlc2gpCgl7CgkJYXR0YWNobWVudERsZ19iTm9SZWZyZXNoID0gZmFsc2U7CgkJcmV0dXJuOwoJfQoJdHJ5Cgl7CgkJaWYgKGF0dGFjaG1lbnREbGdfcmVmV2luZG93ID09IHRvcC5vcGVuZXIpCgkJewoJCQl0b3Aub3BlbmVyLmxvY2F0aW9uID0gYXR0YWNobWVudERsZ19yZWZMb2NhdGlvbjsKCQl9CQoJfQoJY2F0Y2goZSkKCXt9CglhdHRhY2htZW50RGxnX3JlZldpbmRvdyA9IG51bGw7CglhdHRhY2htZW50RGxnX3JlZkxvY2F0aW9uID0gbnVsbDsKfQoKZnVuY3Rpb24gYXR0YWNobWVudERsZ19vbkxvYWQoKQp7CglhdHRhY2htZW50RGxnX3JlZldpbmRvdyA9IG51bGw7CglhdHRhY2htZW50RGxnX3JlZkxvY2F0aW9uID0gbnVsbDsKCXRyeQoJewoJCWF0dGFjaG1lbnREbGdfcmVmV2luZG93ID0gdG9wLm9wZW5lcjsKCQlhdHRhY2htZW50RGxnX3JlZkxvY2F0aW9uID0gdG9wLm9wZW5lci5sb2NhdGlvbjsKCQlpZiAoYXR0YWNobWVudERsZ19yZWZXaW5kb3cuYXR0YWNobWVudF9yZWxvYWRPbkNhbmNlbFVSTCkKCQl7CgkJCWF0dGFjaG1lbnREbGdfcmVmTG9jYXRpb24gPSBhdHRhY2htZW50RGxnX3JlZldpbmRvdy5hdHRhY2htZW50X3JlbG9hZE9uQ2FuY2VsVVJMOwoJCX0JCgl9CgljYXRjaChlKQoJe30KfQoKZnVuY3Rpb24gYXR0YWNobWVudERsZ19vblN1Ym1pdChhbGxvd0VtcHR5VGl0bGUpCnsKCXZhciBiU3VjY2VzcyA9IHRydWU7CglhdHRhY2htZW50RGxnX2JOb1JlZnJlc2ggPSB0cnVlOwoKCWlmICghYWxsb3dFbXB0eVRpdGxlKQoJewoJCXZhciB0aXRsZUZpZWxkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpdGxlJyk7CgkJaWYgKGlzV2hpdGVzcGFjZSh0aXRsZUZpZWxkLnZhbHVlKSkKCQl7CgkJCXZhciBhRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhRm9ybScpOwoJCQlhbGVydF9tZXNzYWdlKGFsZXJ0X2JveF90aXRsZSx3YXJuaW5nX2VtcHR5X3RpdGxlKTsKCQkgICAgc2VsZWN0RmllbGQoYUZvcm0sICd0aXRsZScpOwoJCSAgICBiU3VjY2VzcyA9IGZhbHNlOwoJCX0KCX0KCXJldHVybiBiU3VjY2VzczsKfQoKCi8qCiAgZnVuY3Rpb246IGNvbmZpcm1fYW5kX3N1Ym1pdAoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIGNvbmZpcm1fYW5kX3N1Ym1pdChtc2csZm9ybV9pZCxmaWVsZF9pZCxmaWVsZF92YWx1ZSxhY3Rpb25fZmllbGRfaWQsYWN0aW9uX2ZpZWxkX3ZhbHVlKQp7CglpZiAoY29uZmlybShtc2cpKQoJewoJCXZhciBmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ybV9pZCk7CgkJaWYgKGYpCgkJewoJCQl2YXIgZmllbGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChmaWVsZF9pZCk7CgkJCWlmIChmaWVsZCkKCQkJewoJCQkJZmllbGQudmFsdWUgPSBmaWVsZF92YWx1ZTsKCQkJfQoKCQkJdmFyIGZpZWxkX2EgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhY3Rpb25fZmllbGRfaWQpOwoJCQlpZiAoZmllbGRfYSkKCQkJewoJCQkJZmllbGRfYS52YWx1ZSA9IGFjdGlvbl9maWVsZF92YWx1ZTsKCQkJfQoKCQkJZi5zdWJtaXQoKTsKCQl9Cgl9Cgp9CgovKgogIGZ1bmN0aW9uOiB0cmVlX2dldFByaW50UHJlZmVyZW5jZXMKCiAgYXJncyA6CgogIHJldHVybnM6CgogIHJldiAgOiAKCiovCmZ1bmN0aW9uIHRyZWVfZ2V0UHJpbnRQcmVmZXJlbmNlcygpCnsKCXZhciBwYXJhbXMgPSBbXTsKCXZhciBmaWVsZHMgPSBbJ2hlYWRlcicsJ3N1bW1hcnknLCd0b2MnLCdib2R5JywncGFzc2ZhaWwnLCAnY2ZpZWxkcycsJ3Rlc3RwbGFuJywgJ21ldHJpY3MnLCAKCSAgICAgICAgICAgICAgJ2F1dGhvcicsJ3JlcXVpcmVtZW50Jywna2V5d29yZCcsJ25vdGVzJywKCSAgICAgICAgICAgICAgJ3JlcV9zcGVjX3Njb3BlJywncmVxX3NwZWNfYXV0aG9yJywncmVxX3NwZWNfb3ZlcndyaXR0ZW5fY291bnRfcmVxcycsCgkgICAgICAgICAgICAgICdyZXFfc3BlY190eXBlJywncmVxX3NwZWNfY2YnLCdyZXFfc2NvcGUnLCdyZXFfYXV0aG9yJywncmVxX3N0YXR1cycsCgkgICAgICAgICAgICAgICdyZXFfdHlwZScsJ3JlcV9jZicsJ3JlcV9yZWxhdGlvbnMnLCdyZXFfbGlua2VkX3RjcycsJ3JlcV9jb3ZlcmFnZScsIAoJICAgICAgICAgICAgICAnaGVhZGVyTnVtYmVyaW5nJywnZGlzcGxheVZlcnNpb24nXTsKCiAgZm9yICh2YXIgaWR4PSAwO2lkeCA8IGZpZWxkcy5sZW5ndGg7aWR4KyspCgl7CgkJdmFyIHYgPSB0cmVlX2dldENoZWNrQm94KGZpZWxkc1tpZHhdKTsKCQlpZiAodikKCQl7CgkJCXBhcmFtcy5wdXNoKHYpOwoJCX0JCgl9Cgl2YXIgZiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtYXQnKTsKCWlmKGYpCgl7CgkJcGFyYW1zLnB1c2goImZvcm1hdD0iK2YudmFsdWUpOwogIH0KCXBhcmFtcyA9IHBhcmFtcy5qb2luKCcmJyk7CgoJcmV0dXJuIHBhcmFtczsKfQoKCi8vIFRPRE8gdW5kZXJzdGFuZCB3aGVyZSBpcyB1c2VkIC0gMjAwOTA3MTUgLSBmcmFuY2lzY29tCmZ1bmN0aW9uIHRyZWVfZ2V0Q2hlY2tCb3goaWQpCnsKCXZhcgljYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYicraWQpOwoJaWYgKGNiICYmIGNiLmNoZWNrZWQpCgl7CgkJcmV0dXJuIGlkKyc9eSc7Cgl9CglyZXR1cm4gbnVsbDsKfQoKCmZ1bmN0aW9uIG9wZW5fYnVnX2FkZF93aW5kb3codHByb2plY3RfaWQsZXhlY19pZCkKewoJd2luZG93Lm9wZW4oZlJvb3QrImxpYi9leGVjdXRlL2J1Z0FkZC5waHA/dHByb2plY3RfaWQ9IiArIHRwcm9qZWN0X2lkICsgIiZleGVjX2lkPSIrZXhlY19pZCwiYnVnX2FkZCIsCgkgICAgICAgICAgICAid2lkdGg9NTEwLGhlaWdodD0yNzAscmVzaXphYmxlPXllcyxkZXBlbmRlbnQ9eWVzIik7Cn0KCmZ1bmN0aW9uIGJ1Z19kaWFsb2coKQp7Cgl0aGlzLnJlZldpbmRvdyA9IG51bGw7Cgl0aGlzLnJlZkxvY2F0aW9uID0gbnVsbDsKCXRoaXMuTm9SZWZyZXNoID0gZmFsc2U7Cn0KCmZ1bmN0aW9uIHN0ZF9kaWFsb2coYWRkaXRpb25hbCkKewogIC8vIGFsZXJ0KCdzdGRfZGlhbG9nKCkgLSBjYWxsZWQnKTsKCXRoaXMucmVmV2luZG93ID0gbnVsbDsKCXRoaXMucmVmTG9jYXRpb24gPSBudWxsOwoJdGhpcy5yZWZBZGRpdGlvbmFsPWFkZGl0aW9uYWw7Cgl0aGlzLk5vUmVmcmVzaCA9IGZhbHNlOwp9CgoKZnVuY3Rpb24gZGlhbG9nX29uU3VibWl0KG9kaWFsb2cpCnsKICAvLyBJbiB0aGlzIHdheSB3ZSBkbyBub3QgZG8gcmVmcmVzaC4KCW9kaWFsb2cuTm9SZWZyZXNoID0gdHJ1ZTsKCXJldHVybiB0cnVlOwp9CgpmdW5jdGlvbiBkaWFsb2dfb25Mb2FkKG9kaWFsb2cpCnsKCW9kaWFsb2cucmVmV2luZG93ID0gbnVsbDsKCW9kaWFsb2cucmVmTG9jYXRpb24gPSBudWxsOwoJdHJ5Cgl7CgkJb2RpYWxvZy5yZWZXaW5kb3cgPSB0b3Aub3BlbmVyOwoJCW9kaWFsb2cucmVmTG9jYXRpb24gPSB0b3Aub3BlbmVyLmxvY2F0aW9uOwoJCWlmKG9kaWFsb2cucmVmQWRkaXRpb25hbCAhPSB1bmRlZmluZWQpCgkJewoJCSAgIG9kaWFsb2cucmVmTG9jYXRpb24gKz0gb2RpYWxvZy5yZWZBZGRpdGlvbmFsOwoJCX0gCgl9CgljYXRjaChlKQoJe30KfQoKZnVuY3Rpb24gZGlhbG9nX29uVW5sb2FkKG9kaWFsb2cpCnsKCWlmIChvZGlhbG9nLk5vUmVmcmVzaCkKCXsKCQlvZGlhbG9nLk5vUmVmcmVzaCA9IGZhbHNlOwoJCXJldHVybjsKCX0KCXRyeQoJewoJCWlmIChvZGlhbG9nLnJlZldpbmRvdyA9PSB0b3Aub3BlbmVyKQoJCXsKCQkJdG9wLm9wZW5lci5sb2NhdGlvbiA9IG9kaWFsb2cucmVmTG9jYXRpb247CgkJfQkKCX0KCWNhdGNoKGUpCgl7fQoJb2RpYWxvZy5yZWZXaW5kb3cgPSBudWxsOwoJb2RpYWxvZy5yZWZMb2NhdGlvbiA9IG51bGw7Cn0KCi8qKgogKiBDYWxscyB0aGUgYnVnIGRlbGV0ZSBwYWdlIHdoZW4gdGhlICd5ZXMnIGJ1dHRvbiBpbiB0aGUgZGVsZXRlIGNvbmZpcm1hdGlvbiBkaWFsb2cKICogd2FzIGNsaWNrZWQKICogCiAqIEBwYXJhbSBidG4gc3RyaW5nIGlkIG9mIHRoZSBidXR0b24gY2xpY2tlZAogKiBAcGFyYW0gdGV4dCBzdHJpbmcgbm90IHVzZWQKICogQHBhcmFtIGNvbWJpbmVkQnVnSUQgc3RyaW5nIGxpa2UgPGV4ZWN1dGlvbklELWJ1Z0lEPgogKi8KZnVuY3Rpb24gZGVsZXRlQnVnKGJ0bix0ZXh0LGNvbWJpbmVkQnVnSUQpCnsKCXZhciBpZHg7Cgl2YXIgZXhlY3V0aW9uSUQ7Cgl2YXIgYnVnSUQ7CgkKCWlmIChidG4gIT0gJ3llcycpCgl7CgkJcmV0dXJuOwoJfQoJCglpZHggPSBjb21iaW5lZEJ1Z0lELmluZGV4T2YoJy0nKTsKCWlmIChpZHggPCAwKQoJewoJCXJldHVybjsKCX0KCQoJZXhlY3V0aW9uSUQgPSBjb21iaW5lZEJ1Z0lELnN1YnN0cigwLGlkeCkKCgkvLyBUSUNLRVQgNDgxNDogYnVnIGRlbGV0aW9uIG1heSBmYWlscyBpZiBidWdJRCBzdHJpbmcgY29udGFpbnMgc3BlY2lhbCBjaGFyYWN0ZXJzICgnIycsICcmJyAsIC4uLikKCS8vIGJ1Z0lEIHN0cmluZyBtYXkgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnMgOiAKCS8vIG11c3QgZXNjYXBlIGl0IHRvIGdldCBjb3JyZWN0IGJ1Z0lEIHZhbHVlIGluIGJ1Z0RlbGV0ZS5waHAKCWJ1Z0lEID0gZXNjYXBlKGNvbWJpbmVkQnVnSUQuc3Vic3RyKGlkeCsxKSk7CgkKCXdpbmRvdy5vcGVuKGZSb290KyJsaWIvZXhlY3V0ZS9idWdEZWxldGUucGhwP2V4ZWNfaWQ9IitleGVjdXRpb25JRCsiJmJ1Z19pZD0iK2J1Z0lELAoJCSAgICAgICAgICAgICJEZWxldGVCdWciLCJ3aWR0aD01MTAsaGVpZ2h0PTE1MCxyZXNpemFibGU9eWVzLGRlcGVuZGVudD15ZXMiKTsKfQoKLy8gc2VlbXMgaXMgbm90IHVzZWQgPT4gZG8gbW9yZSBjaGVja3MgYW5kIHJlbW92ZQpmdW5jdGlvbiBwbGFuUmVtb3ZlVEMod2FybmluZ19tc2cpCnsKCXZhciBjYnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTsKCXZhciBiUmVtb3ZlVEMgPSBmYWxzZTsKCXZhciBsZW4gPSBjYnMubGVuZ3RoOwoJZm9yICh2YXIgaSA9IDA7aSA8IGxlbjtpKyspCgl7CgkJdmFyIGl0ZW0gPSBjYnNbaV07CgkJaWYgKGl0ZW0udHlwZSA9PSAnY2hlY2tib3gnICYmIGl0ZW0uY2hlY2tlZCAmJiBpdGVtLm5hbWUuc3Vic3RyaW5nKDAsMTcpID09ICJyZW1vdmVfY2hlY2tlZF90YyIpCgkJewoJCQliUmVtb3ZlVEMgPSB0cnVlOwoJCQlicmVhazsKCQl9Cgl9CglpZiAoYlJlbW92ZVRDKQoJewoJCWlmICghY29uZmlybSh3YXJuaW5nX21zZykpCgkJCXJldHVybiBmYWxzZTsKCX0KCglyZXR1cm4gdHJ1ZTsKfQoKLyoqCiAqIE9wZW4gdGhlIG92ZXJ2aWV3IG92ZXIgYWxsIFRlc3QgQ2FzZXMgYXNzaWduZWQgdG8gYSB1c2VyIGluIGEgcG9wdXAgd2luZG93LgogKiBAYXV0aG9yIEFuZHJlYXMgU2ltb24KICogQHBhcmFtIHVzZXJfaWQKICogQHBhcmFtIGJ1aWxkX2lkCiAqIEBwYXJhbSB0cGxhbl9pZAogKi8KZnVuY3Rpb24gb3BlbkFzc2lnbm1lbnRPdmVydmlld1dpbmRvdyh1c2VyX2lkLCBidWlsZF9pZCwgdHBsYW5faWQpIHsKCXZhciB1cmwgPSAibGliL3Rlc3RjYXNlcy90Y0Fzc2lnbmVkVG9Vc2VyLnBocCI7Cgl1cmwgKz0gIj91c2VyX2lkPSIgKyB1c2VyX2lkICsgIiZidWlsZF9pZD0iICsgYnVpbGRfaWQgKyAiJnRwbGFuX2lkPSIgKyB0cGxhbl9pZDsKCgkvLyAyMDEwMTAwOCAtIGFzaW1vbiAtIEJVR0lEIDMzMTEKCXZhciB3aWR0aCA9IGdldENvb2tpZSgiQXNzaWdubWVudE92ZXJ2aWV3V2lkdGgiKTsKCXZhciBoZWlnaHQgPSBnZXRDb29raWUoIkFzc2lnbm1lbnRPdmVydmlld0hlaWdodCIpOwoKCWlmICh3aWR0aCA9PSBudWxsKQoJewoJCXZhciB3aWR0aCA9ICI4MDAiOwoJfQoKCWlmIChoZWlnaHQgPT0gbnVsbCkKCXsKCQl2YXIgaGVpZ2h0ID0gIjYwMCI7Cgl9CgoJdmFyIHdpbmRvd0NmZyA9ICJ3aWR0aD0iK3dpZHRoKyIsaGVpZ2h0PSIraGVpZ2h0KyIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxkZXBlbmRlbnQ9eWVzIjsKCXdpbmRvdy5vcGVuKGZSb290K3VybCwgJ19ibGFuaycsIHdpbmRvd0NmZyk7Cn0KCgovKioKICogT3BlbiB0ZXN0Y2FzZSBkZXNjcmlwdGlvbiBpbiBhIHBvcHVwIHdpbmRvdy4KICogQGF1dGhvciBBbmRyZWFzIFNpbW9uCiAqIEBwYXJhbSB0Y19pZAogKi8KZnVuY3Rpb24gb3BlblRDRWRpdFdpbmRvdyh0Y19pZCkgewoJdmFyIHVybCA9ICJsaWIvdGVzdGNhc2VzL2FyY2hpdmVEYXRhLnBocD9lZGl0PXRlc3RjYXNlJmlkPSIgKyB0Y19pZDsKCgkvLyAyMDEwMTAwOCAtIGFzaW1vbiAtIEJVR0lEIDMzMTEKCXZhciB3aWR0aCA9IGdldENvb2tpZSgiVENFZGl0UG9wdXBXaWR0aCIpOwoJdmFyIGhlaWdodCA9IGdldENvb2tpZSgiVENFZGl0UG9wdXBIZWlnaHQiKTsKCQoJaWYgKHdpZHRoID09IG51bGwpCgl7CgkJdmFyIHdpZHRoID0gIjgwMCI7Cgl9CgoJaWYgKGhlaWdodCA9PSBudWxsKQoJewoJCXZhciBoZWlnaHQgPSAiNjAwIjsKCX0KCQoJdmFyIHdpbmRvd0NmZyA9ICJ3aWR0aD0iK3dpZHRoKyIsaGVpZ2h0PSIraGVpZ2h0KyIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxkZXBlbmRlbnQ9eWVzIjsKCXdpbmRvdy5vcGVuKGZSb290K3VybCwgJ19ibGFuaycsIHdpbmRvd0NmZyk7Cn0KCgovKioKICogT3BlbiB0ZXN0Y2FzZSBmb3IgZXhlY3V0aW9uIGluIGEgcG9wdXAgd2luZG93LgogKiBAYXV0aG9yIEFuZHJlYXMgU2ltb24KICogQHBhcmFtIHRjX2lkCiAqIEBwYXJhbSB0Y3ZlcnNpb25faWQKICogQHBhcmFtIGJ1aWxkX2lkCiAqIEBwYXJhbSB0cGxhbl9pZAogKiBAcGFyYW0gcGxhdGZvcm1faWQKICovCmZ1bmN0aW9uIG9wZW5FeGVjdXRpb25XaW5kb3codGNfaWQsIHRjdmVyc2lvbl9pZCwgYnVpbGRfaWQsIHRwbGFuX2lkLCBwbGF0Zm9ybV9pZCkgewoJdmFyIHVybCA9ICJsaWIvZXhlY3V0ZS9leGVjU2V0UmVzdWx0cy5waHA/IiArCgkgICAgICAgICAgInZlcnNpb25faWQ9IiArIHRjdmVyc2lvbl9pZCArCgkgICAgICAgICAgIiZsZXZlbD10ZXN0Y2FzZSZpZD0iICsgdGNfaWQgKwoJICAgICAgICAgICImdHBsYW5faWQ9IiArIHRwbGFuX2lkICsKCSAgICAgICAgICAiJnNldHRpbmdfYnVpbGQ9IiArIGJ1aWxkX2lkICsKCSAgICAgICAgICAiJnNldHRpbmdfcGxhdGZvcm09IiArIHBsYXRmb3JtX2lkOwoKCS8vIDIwMTAxMDA4IC0gYXNpbW9uIC0gQlVHSUQgMzMxMQoJdmFyIHdpZHRoID0gZ2V0Q29va2llKCJUQ0V4ZWNQb3B1cFdpZHRoIik7Cgl2YXIgaGVpZ2h0ID0gZ2V0Q29va2llKCJUQ0V4ZWNQb3B1cEhlaWdodCIpOwoKCWlmICh3aWR0aCA9PSBudWxsKQoJewoJCXZhciB3aWR0aCA9ICI4MDAiOwoJfQoKCWlmIChoZWlnaHQgPT0gbnVsbCkKCXsKCQl2YXIgaGVpZ2h0ID0gIjYwMCI7Cgl9CgkKCXZhciB3aW5kb3dDZmcgPSAid2lkdGg9Iit3aWR0aCsiLGhlaWdodD0iK2hlaWdodCsiLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsZGVwZW5kZW50PXllcyI7Cgl3aW5kb3cub3BlbihmUm9vdCt1cmwsICdfYmxhbmsnLCB3aW5kb3dDZmcpOwp9CgoKLyoKICBmdW5jdGlvbjogb3Blbl9oZWxwX3dpbmRvdwoKICBhcmdzIDoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIG9wZW5faGVscF93aW5kb3coaGVscF9wYWdlLGxvY2FsZSkKewogICAgdmFyIHdpbmRvd0NmZz0nJzsKICAgIHdpbmRvd0NmZz0ibGVmdD0zNTAsdG9wPTUwLHNjcmVlblg9MzUwLHNjcmVlblk9NTAsZnVsbHNjcmVlbj1ubyxyZXNpemFibGU9eWVzLCIgKyAKICAgICAgICAgICAgICAgInRvb2xiYXI9bm8sc3RhdHVzPW5vLG1lbnViYXI9bm8sc2Nyb2xsYmFycz15ZXMsZGlyZWN0b3JpZXM9bm8sIiArIAogICAgICAgICAgICAgICAibG9jYXRpb249bm8sd2lkdGg9NDAwLGhlaWdodD02NTAiOwogICAgd2luZG93Lm9wZW4oZlJvb3QrImxpYi9nZW5lcmFsL3Nob3dfaGVscC5waHA/aGVscD0iK2hlbHBfcGFnZSsiJmxvY2FsZT0iK2xvY2FsZSwiX2JsYW5rIix3aW5kb3dDZmcpOwp9CgoKLyoKICBmdW5jdGlvbjogb3BlblRDYXNlV2luZG93CgogIGFyZ3M6IHRjYXNlX2lkOiB0ZXN0IGNhc2UgaWQKICAgICAgICB0Y3ZlcnNpb25faWQ6IHRlc3QgY2FzZSB2ZXJzaW9uIGlkCiAgICAgICAgc2hvd19tb2RlOiBzdHJpbmcgdXNlZCBvbiB0ZXN0Y2FzZS5zaG93KCkgdG8gbWFuYWdlIHJlZnJlc2ggCiAgICAgICAgICAgICAgICAgICBsb2dpYyBvZiBmcmFtZXMgd2hlbiBFZGl0IFRlc3QgY2FzZSBwYWdlIGlzIGNsb3NlZC4KICAgICAgICAgICAgICAgICAgIFRoaXMgYXJndW1lbnQgd2FzIGFkZGVkIHRvIGFsbG93IGF1dG9tYXRpYyByZWZlcmVzaAogICAgICAgICAgICAgICAgICAgb2YgZnJhbWVzIHdoZW4gdXNlciB1c2VzIHRoZSBmZWF0dXJlIHRoYXQgYWxsb3dzIAogICAgICAgICAgICAgICAgICAgZWRpdCBhIHRlc3QgY2FzZSB3aGlsZSBleGVjdXRpb24gaXQuCgogIHJldHVybnM6CgogIHJldiA6CiAgICAgICAyMDEwMTExMSAtIGFzaW1vbiAtIG5vdyBhbHNvIHJlbWVtYmVycyBwb3B1cCBzaXplIGxpa2Ugb3RoZXIgZnVuY3Rpb25zIGRvCiAgICAgICAyMDA5MDcxNSAtIGZyYW5jaXNjb20gLSBhZGRlZCBkb2N1bWVudGF0aW9uCiAgICAgICAyMDA3MDkzMCAtIGZyYW5jaXNjb20gLSBSRVEgLSBCVUdJRCAxMDc4CgoqLwpmdW5jdGlvbiBvcGVuVENhc2VXaW5kb3codGNhc2VfaWQsdGN2ZXJzaW9uX2lkLHNob3dfbW9kZSkKewoJLy9AVE9ETyBzY2hsdW5kdXMsIHdoYXQgaXMgc2hvd19tb2RlPyBub3QgdXNlZCBpbiBhcmNoaXZlRGF0YS5waHAKCS8vWW91IGFyZSByaWdodDogcHJvYmxlbSBmaXhlZCBzZWUgZG9jdW1lbnRhdGlvbiBhZGRlZCBvbiBoZWFkZXIgKGZyYW5jaXNjb20pCgkvLyAKCXZhciBmZWF0dXJlX3VybCA9ICJsaWIvdGVzdGNhc2VzL2FyY2hpdmVEYXRhLnBocCI7CglmZWF0dXJlX3VybCArPSI/YWxsb3dfZWRpdD0wJnNob3dfbW9kZT0iK3Nob3dfbW9kZSsiJmVkaXQ9dGVzdGNhc2UmaWQ9IisKCQkJCSAgdGNhc2VfaWQrIiZ0Y3ZlcnNpb25faWQ9Iit0Y3ZlcnNpb25faWQ7CgoJLy8gMjAxMDExMTEgLSBhc2ltb24gLSBub3cgYWxzbyByZW1lbWJlcnMgcG9wdXAgc2l6ZQoJdmFyIHdpZHRoID0gZ2V0Q29va2llKCJUQ0VkaXRQb3B1cFdpZHRoIik7Cgl2YXIgaGVpZ2h0ID0gZ2V0Q29va2llKCJUQ0VkaXRQb3B1cEhlaWdodCIpOwoKCWlmICh3aWR0aCA9PSBudWxsKQoJewoJCXZhciB3aWR0aCA9ICI4MDAiOwoJfQoKCWlmIChoZWlnaHQgPT0gbnVsbCkKCXsKCQl2YXIgaGVpZ2h0ID0gIjYwMCI7Cgl9CgoJdmFyIHdpbmRvd0NmZyA9ICJ3aWR0aD0iK3dpZHRoKyIsaGVpZ2h0PSIraGVpZ2h0KyIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxkZXBlbmRlbnQ9eWVzIjsKCgkvLyBzZWNvbmQgcGFyYW1ldGVyKHdpbmRvdyBuYW1lKSB3aXRoIHNwYWNlcyBjYXVzZWQgYnVnIG9uIElFCgl3aW5kb3cub3BlbihmUm9vdCtmZWF0dXJlX3VybCwiVGVzdENhc2VTcGVjIix3aW5kb3dDZmcpOwp9CgoKLyoqCiAqIG9wZW4gYSBzcGVjaWZpYyB2ZXJzaW9uIG9mIGEgcmVxdWlyZW1lbnQgaW4gYSBwb3B1cCB3aW5kb3cKICogCiAqIEBwYXJhbSByZXFfaWQgUmVxdWlyZW1lbnQgSUQKICogQHBhcmFtIHJlcV92ZXJzaW9uX2lkIFJlcXVpcmVtZW50IFZlcnNpb24gSUQKICogQHBhcmFtIGFuY2hvciBzdHJpbmcgd2l0aCBhbmNob3IgbmFtZQogKi8KZnVuY3Rpb24gb3BlbkxpbmtlZFJlcVZlcnNpb25XaW5kb3cocmVxX2lkLCByZXFfdmVyc2lvbl9pZCwgYW5jaG9yKQp7CglpZiAoYW5jaG9yID09IG51bGwpIHsKCQlhbmNob3IgPSAnJzsKCX0gZWxzZSB7CgkJYW5jaG9yID0gJyMnICsgYW5jaG9yOwoJfQoJCgl2YXIgd2luZG93Q2ZnPScnOwoJdmFyIGZlYXR1cmVfdXJsID0gImxpYi9yZXF1aXJlbWVudHMvcmVxVmlldy5waHAiOwoJZmVhdHVyZV91cmwgKz0gIj9zaG93UmVxU3BlY1RpdGxlPTEmcmVxdWlyZW1lbnRfaWQ9IiArIHJlcV9pZCArICImcmVxX3ZlcnNpb25faWQ9IiArIHJlcV92ZXJzaW9uX2lkICsgYW5jaG9yOwoKCXZhciB3aWR0aCA9IGdldENvb2tpZSgiUmVxUG9wdXBXaWR0aCIpOwoJdmFyIGhlaWdodCA9IGdldENvb2tpZSgiUmVxUG9wdXBIZWlnaHQiKTsKCglpZiAod2lkdGggPT0gbnVsbCkKCXsKCQl2YXIgd2lkdGggPSAiODAwIjsKCX0KCglpZiAoaGVpZ2h0ID09IG51bGwpCgl7CgkJdmFyIGhlaWdodCA9ICI2MDAiOwoJfQoKCXZhciB3aW5kb3dDZmcgPSAid2lkdGg9Iit3aWR0aCsiLGhlaWdodD0iK2hlaWdodCsiLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsZGVwZW5kZW50PXllcyI7Cgl3aW5kb3cub3BlbihmUm9vdCtmZWF0dXJlX3VybCwiUmVxdWlyZW1lbnQiLHdpbmRvd0NmZyk7Cn0KCgovKioKICogb3BlbiBhIHJlcXVpcmVtZW50IGluIGEgcG9wdXAgd2luZG93CiAqIAogKiBAcGFyYW0gcmVxX2lkIFJlcXVpcmVtZW50IElECiAqIEBwYXJhbSBhbmNob3Igc3RyaW5nIHdpdGggYW5jaG9yIG5hbWUKICovCmZ1bmN0aW9uIG9wZW5MaW5rZWRSZXFXaW5kb3cocmVxX2lkLCBhbmNob3IpCnsKCS8vIDIwMTAxMDA4IC0gYXNpbW9uIC0gQlVHSUQgMzMxMQoJdmFyIHdpZHRoID0gZ2V0Q29va2llKCJSZXFQb3B1cFdpZHRoIik7Cgl2YXIgaGVpZ2h0ID0gZ2V0Q29va2llKCJSZXFQb3B1cEhlaWdodCIpOwoJdmFyIHdpbmRvd0NmZz0nJzsKCXZhciBmZWF0dXJlX3VybCA9ICJsaWIvcmVxdWlyZW1lbnRzL3JlcVZpZXcucGhwIjsKCgoJaWYgKGFuY2hvciA9PSBudWxsKSB7CgkJYW5jaG9yID0gJyc7Cgl9IGVsc2UgewoJCWFuY2hvciA9ICcjJyArIGFuY2hvcjsKCX0KCQoJaWYgKHdpZHRoID09IG51bGwpCgl7CgkJd2lkdGggPSAiODAwIjsKCX0KCglpZiAoaGVpZ2h0ID09IG51bGwpCgl7CgkJaGVpZ2h0ID0gIjYwMCI7Cgl9CgoJZmVhdHVyZV91cmwgKz0gIj9zaG93UmVxU3BlY1RpdGxlPTEmcmVxdWlyZW1lbnRfaWQ9IiArIHJlcV9pZCArIGFuY2hvcjsKCXdpbmRvd0NmZyA9ICJ3aWR0aD0iK3dpZHRoKyIsaGVpZ2h0PSIraGVpZ2h0KyIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxkZXBlbmRlbnQ9eWVzIjsKCXdpbmRvdy5vcGVuKGZSb290K2ZlYXR1cmVfdXJsLCJSZXF1aXJlbWVudCIsd2luZG93Q2ZnKTsKfQoKCi8qKgogKiBvcGVuIGEgcmVxIHNwZWMgaW4gYSBwb3B1cCB3aW5kb3cKICogCiAqIEBwYXJhbSByZXFzcGVjX2lkIFJlcXVpcmVtZW50IFNwZWNpZmljYXRpb24gSUQKICogQHBhcmFtIGFuY2hvciBzdHJpbmcgd2l0aCBhbmNob3IgbmFtZQogKi8KZnVuY3Rpb24gb3BlbkxpbmtlZFJlcVNwZWNXaW5kb3cocmVxc3BlY19pZCwgYW5jaG9yKQp7CglpZiAoYW5jaG9yID09IG51bGwpIHsKCQlhbmNob3IgPSAnJzsKCX0gZWxzZSB7CgkJYW5jaG9yID0gJyMnICsgYW5jaG9yOwoJfQoJCgl2YXIgd2luZG93Q2ZnPScnOwoJdmFyIGZlYXR1cmVfdXJsID0gImxpYi9yZXF1aXJlbWVudHMvcmVxU3BlY1ZpZXcucGhwIjsKCWZlYXR1cmVfdXJsICs9ICI/cmVxX3NwZWNfaWQ9IiArIHJlcXNwZWNfaWQgKyBhbmNob3I7CgoJLy8gMjAxMDEwMDggLSBhc2ltb24gLSBCVUdJRCAzMzExCgl2YXIgd2lkdGggPSBnZXRDb29raWUoIlJlcVNwZWNQb3B1cFdpZHRoIik7Cgl2YXIgaGVpZ2h0ID0gZ2V0Q29va2llKCJSZXFTcGVjUG9wdXBIZWlnaHQiKTsKCglpZiAod2lkdGggPT0gbnVsbCkKCXsKCQl2YXIgd2lkdGggPSAiODAwIjsKCX0KCglpZiAoaGVpZ2h0ID09IG51bGwpCgl7CgkJdmFyIGhlaWdodCA9ICI2MDAiOwoJfQoKCXZhciB3aW5kb3dDZmcgPSAid2lkdGg9Iit3aWR0aCsiLGhlaWdodD0iK2hlaWdodCsiLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsZGVwZW5kZW50PXllcyI7Cgl3aW5kb3cub3BlbihmUm9vdCtmZWF0dXJlX3VybCwiUmVxdWlyZW1lbnRTcGVjaWZpY2F0aW9uIix3aW5kb3dDZmcpOwp9CgoKLyoKICBmdW5jdGlvbjogVFBST0pFQ1RfUkVRX1NQRUNfTUdNVAogICAgICAgICAgICBsYXVuY2hlciBmb3IgVGVzdHByb2plY3QgUkVRdWlyZW1lbnQgU1BFQ2lmaWNhdGlvbnMgTWFuYUdlTWVuVAoKICBhcmdzOgoKICByZXR1cm5zOgoKKi8KZnVuY3Rpb24gVFBST0pFQ1RfUkVRX1NQRUNfTUdNVChpZCkKewoJdmFyIF9GVU5DVElPTl9OQU1FXz0iVFBST0pFQ1RfUkVRX1NQRUNfTUdNVCI7Cgl2YXIgcFBhcmFtcyA9IHRyZWVfZ2V0UHJpbnRQcmVmZXJlbmNlcygpOwoJdmFyIGFjdGlvbl91cmwgPSBmUm9vdCsibGliL3Byb2plY3QvcHJvamVjdF9yZXFfc3BlY19tZ210LnBocCIrIj9pZD0iK2lkK2FyZ3MrIiYiK3BQYXJhbXM7CgogIC8vYWxlcnQoX0ZVTkNUSU9OX05BTUVfICsgIiAiICthY3Rpb25fdXJsKTsKCXBhcmVudC53b3JrZnJhbWUubG9jYXRpb24gPSBhY3Rpb25fdXJsOwoKfQoKCi8qCiAgZnVuY3Rpb246IFJFUV9TUEVDX01HTVQKICAgICAgICAgICAgbGF1bmNoZXIgZm9yIFJFUXVpcmVtZW50IFNQRUNpZmljYXRpb24gTWFuYUdlTWVuVAoKICBhcmdzOgoKICByZXR1cm5zOgoKKi8KZnVuY3Rpb24gUkVRX1NQRUNfTUdNVChpZCkKewoJdmFyIF9GVU5DVElPTl9OQU1FXz0iUkVRX1NQRUNfTUdNVCI7Cgl2YXIgcFBhcmFtcyA9IHRyZWVfZ2V0UHJpbnRQcmVmZXJlbmNlcygpOwogIHZhciBhY3Rpb25fdXJsID0gZlJvb3QrcmVxX3NwZWNfbWFuYWdlcl91cmwrIj9pdGVtPXJlcV9zcGVjJnJlcV9zcGVjX2lkPSIraWQrYXJncysiJiIrcFBhcmFtczsKICAKICAvLyBhbGVydChfRlVOQ1RJT05fTkFNRV8gKyAiICIgK2FjdGlvbl91cmwpOwoJcGFyZW50LndvcmtmcmFtZS5sb2NhdGlvbiA9IGFjdGlvbl91cmw7Cn0KCi8qCiAgZnVuY3Rpb246IFJFUV9NR01UCiAgICAgICAgICAgIGxhdW5jaGVyIGZvciBSRVF1aXJlbWVudCBNYW5hR2VNZW5UCgogIGFyZ3M6CgogIHJldHVybnM6CgoqLwpmdW5jdGlvbiBSRVFfTUdNVChpZCkKewoJdmFyIF9GVU5DVElPTl9OQU1FXz0iUkVRX01HTVQiOwoJdmFyIHBQYXJhbXMgPSB0cmVlX2dldFByaW50UHJlZmVyZW5jZXMoKTsKCXZhciBhY3Rpb25fdXJsID0gZlJvb3QrcmVxX21hbmFnZXJfdXJsKyI/aXRlbT1yZXF1aXJlbWVudCZyZXF1aXJlbWVudF9pZD0iK2lkK2FyZ3MrIiYiK3BQYXJhbXM7CgogIC8vYWxlcnQoX0ZVTkNUSU9OX05BTUVfICsgIiAiICthY3Rpb25fdXJsKTsKCXBhcmVudC53b3JrZnJhbWUubG9jYXRpb24gPSBhY3Rpb25fdXJsOwoKfQoKCi8qCiAgZnVuY3Rpb246IHNob3dfaGlkZV9jb2x1bW4KCiAgYXJnczoKCiAgcmV0dXJuczoKCiovCmZ1bmN0aW9uIHNob3dfaGlkZV9jb2x1bW4odGFibGVfaWQsY29sX25vKQp7Cgl2YXIgdGJsICA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRhYmxlX2lkKTsKCXZhciByb3dzID0gdGJsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCd0cicpOwoJCglmb3IgKHZhciByb3c9MDsgcm93PHJvd3MubGVuZ3RoO3JvdysrKQoJewoJCWlmKHJvdyA9PSAwKQoJCQljZWxsVGFnID0gJ3RoJzsKCQllbHNlCgkJCWNlbGxUYWcgPSAndGQnOwogIAkKCSAgCXZhciBjZWxzID0gcm93c1tyb3ddLmdldEVsZW1lbnRzQnlUYWdOYW1lKGNlbGxUYWcpCgkgICAgaWYoY2Vsc1tjb2xfbm9dLnN0eWxlLmRpc3BsYXkgPT0gJ25vbmUnKQoJICAgICAgICBjZWxzW2NvbF9ub10uc3R5bGUuZGlzcGxheT0nYmxvY2snOwoJICAgIGVsc2UKCSAgICAgICBjZWxzW2NvbF9ub10uc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICB9Cn0KCgpmdW5jdGlvbiBzaG93SGlkZUJ5Q2xhc3ModGFnTmFtZSxjbGFzc05hbWUpCnsKICAgIHZhciBvYmplY3RzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGFnTmFtZSk7CiAgICBmb3IgKHZhciBpZHg9MDsgaWR4PG9iamVjdHMubGVuZ3RoOyBpZHgrKykKICAgIHsKICAgIAl2YXIgbXlDbGFzc05hbWUgPSBvYmplY3RzW2lkeF0uY2xhc3NOYW1lOwogICAgCWlmKCBteUNsYXNzTmFtZSA9PSBjbGFzc05hbWUpCiAgICAJewogICAgICAgICAgICBpZihvYmplY3RzW2lkeF0uc3R5bGUuZGlzcGxheSA9PSAnbm9uZScpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG9iamVjdHNbaWR4XS5zdHlsZS5kaXNwbGF5PScnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICBvYmplY3RzW2lkeF0uc3R5bGUuZGlzcGxheT0nbm9uZSc7CiAgICAgICAgICAgIH0KICAgIAl9CiAgICB9Cn0KCi8qCmZ1bmN0aW9uOiBzaG93Q2FsCiAgICAgICAgICB1c2VkIHRvIGRpc3BsYXkgZXh0anMgZGF0ZXBpY2tlcgoKYXJnczoKCnJldHVybnM6CgoqLwoKZnVuY3Rpb24gc2hvd0NhbChpZCxkYXRlRmllbGQsZGF0ZUZvcm1hdCkKewoJLy8gc2V0IGRlZmF1bHQgZGF0ZUZvcm1hdCBpZiBubyBkYXRlRm9ybWF0IGlzIHBhc3NlZAoJaWYoZGF0ZUZvcm1hdCA9PSBudWxsKSB7CgkJZGF0ZUZvcm1hdCA9ICJtL2QvWSI7Cgl9Cgl2YXIgeCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsKCXguaW5uZXJIVE1MID0gJyc7Cgl2YXIgZHAgPSBuZXcgRXh0LkRhdGVQaWNrZXIoeyByZW5kZXJUbzppZCwgZm9ybWF0OmRhdGVGb3JtYXQsIGlkRmllbGQ6ZGF0ZUZpZWxkIH0pOwoJLy8gcmVhZCB2YWx1ZSBvZiBkYXRlIGlucHV0IGZpZWxkCgl2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkYXRlRmllbGQpOwoJCgkvLyBpZiB2YWx1ZSBvbiBpbnB1dCBmaWVsZCBleGlzdHMgdXNlIGl0IHRvIHByZXNlbGVjdCBkYXRlcGlja2VyCglpZihlbC52YWx1ZSAhPSAiIikKCXsKCQkvKiBub3cgd2UgaGF2ZSB0byBjb252ZXJ0IGxvY2FsaXplZCB0aW1lc3RhbXAgdG8gYSBmb3JtYXQgdGhhdCAiRGF0ZSIgdW5kZXJzdGFuZHMKCQkgKiBiZWNhdXNlIGRhdGVwaWNrZXIgbmVlZHMgRGF0ZSBPYmplY3QgdG8gYmUgYWJsZSB0byBwcmVzZWxlY3QgZGF0ZSBhY2NvcmRpbmcgdG8KCQkgKiB2YWx1ZSBvbiBpbnB1dCBmaWVsZAoJCSAqLwoJCQoJCS8vIGdldCBjaGFyIHRoYXQgc3BsaXRzIGRhdGUgcGllY2VzIG9uIGxvY2FsaXplZCB0aW1lc3RhbXAgKCAiLiIsICIvIiBvciAiLSIgKQoJCXNwbGl0Q2hhciA9ICIuIjsKCQlpZiAoZWwudmFsdWUuaW5kZXhPZigiLSIpICE9IC0xKSB7CgkJCXNwbGl0Q2hhciA9ICItIjsKCQl9IAoJCWlmIChlbC52YWx1ZS5pbmRleE9mKCIvIikgIT0gLTEpIHsKCQkJc3BsaXRDaGFyID0gIi8iOwoJCX0KCQkKCQkvLyBzcGxpdCB0aGUgZGF0ZSBmcm9tIGlucHV0IGZpZWxkIHdpdGggc3BsaXRDaGFyCgkJdmFyIHNwbGl0RGF0ZSA9IGVsLnZhbHVlLnNwbGl0KHNwbGl0Q2hhcik7CgkJCgkJLy8gcHJlcGFyZSB2YXJpYWJsZXMgZm9yIGRhdGUgInBpZWNlcyIKCQl2YXIgeWVhciA9IG51bGw7CgkJdmFyIG1vbnRoID0gbnVsbDsKCQl2YXIgZGF5ID0gbnVsbDsKCQkKCQkvLyByZW1vdmUgYWxsIHNwbGl0Q2hhcnMgKG1heCAyKQoJCS8vIFRPRE8gZG8gbm90IGNhbGwgcmVwbGFjZSB0d2ljZSB1c2UgcmVnIGV4cAoJCWRhdGVGb3JtYXQgPSBkYXRlRm9ybWF0LnJlcGxhY2Uoc3BsaXRDaGFyLCAiIik7CgkJZGF0ZUZvcm1hdCA9IGRhdGVGb3JtYXQucmVwbGFjZShzcGxpdENoYXIsICIiKTsKCQkKCQkvLyBnZXQgZGF0ZSAicGllY2VzIiBhY2NvcmRpbmcgdG8gZGF0ZUZvcm1hdAoJCWZvcihpPTA7IGkgPCBkYXRlRm9ybWF0Lmxlbmd0aDsgaSsrKSB7CgkJCXN3aXRjaCAoZGF0ZUZvcm1hdC5jaGFyQXQoaSkpIHsKCQkJCWNhc2UgIlkiOgoJCQkJCXllYXIgPSBzcGxpdERhdGVbaV07CgkJCQkJYnJlYWs7CgkJCQkvLyBub3QgbmVjZXNzYXJ5IHJpZ2h0IG5vdyBhcyBhbGwgbG9jYWxpemVkIHRpbWVzdGFtcHMgdXNlICJZIiAtPiBmb3VyIGRpZ2l0IHllYXIKCQkJCS8vY2FzZSAieSI6CgkJCQkvLwl5ZWFyID0gc3BsaXREYXRlW2ldOwoJCQkJLy8JYnJlYWs7CgkJCQljYXNlICJtIjogCgkJCQkJbW9udGggPSBzcGxpdERhdGVbaV07CgkJCQkJYnJlYWs7CgkJCQljYXNlICJkIjogCgkJCQkJZGF5ID0gc3BsaXREYXRlW2ldOwoJCQkJCWJyZWFrOwoJCQl9CgkJfQoJCQoJCS8vIGZpbmFsbHkgY3JlYXRlIERhdGUgb2JqZWN0IHRvIHByZXNlbGVjdCBkYXRlIG9uIGRhdGVwaWNrZXIKCQkvLyBzdWJ0cmFjdCAxIGZyb20gbW9udGggYXMgamFudWFyeSBoYXMgdmFsdWUgMAoJCXNlbGVjdGVkRGF0ZSA9IG5ldyBEYXRlKHllYXIsKG1vbnRoLTEpLGRheSk7CgkJCgkJaWYgKGlzTmFOKHNlbGVjdGVkRGF0ZS5nZXRUaW1lKCkpKQoJCXsKCQkJIHNlbGVjdGVkRGF0ZSA9ICcnOwoJCQkgZWwudmFsdWUgPSAnJzsKCQl9CgkJZWxzZQoJCQlkcC5zZXRWYWx1ZShzZWxlY3RlZERhdGUpOwoJfQoJZHAuYWRkTGlzdGVuZXIoInNlbGVjdCIsIG9uU2VsZWN0KTsKfQoKLyoKZnVuY3Rpb246IG9uU2VsZWN0CiAgICAgICAgICB1c2VkIGJ5IHNob3dDYWwgKG9ubHkpIHRvIGhhbmRsZSBkYXRlIHNlbGVjdCBldmVudAoKYXJnczoKCnJldHVybnM6CgoqLwoKZnVuY3Rpb24gb25TZWxlY3QoZGF0ZVBpY2tlcixkYXRlKQp7Cgl2YXIgZHQgPSBuZXcgRGF0ZShkYXRlKTsKCS8vIHVzZSB0aGUgc2FtZSBvdXRwdXQgZGF0ZWZvcm1hdCBhcyBkYXRlcGlja2VyIHVzZXMKCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRhdGVQaWNrZXIuaWRGaWVsZCkudmFsdWUgPSBkdC5mb3JtYXQoZGF0ZVBpY2tlci5mb3JtYXQpOwoJZGF0ZVBpY2tlci5kZXN0cm95KCk7Cn0KCmZ1bmN0aW9uIHNob3dFdmVudEhpc3RvcnlGb3Iob2JqZWN0SUQsb2JqZWN0VHlwZSkKewoJdmFyIGYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZXZlbnRoaXN0b3J5Jyk7CglpZiAoIWYpCgl7CgkJZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImZvcm0iKTsKCQlpZiAoIWYpCgkJewoJCQlyZXR1cm47CgkJfQoJCXZhciBiID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTsKCQlpZiAoIWIpCgkJewoJCQlyZXR1cm47CgkJfQoJCWIuYXBwZW5kQ2hpbGQoZik7CgkJZi5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwoJCWYuaWQgPSAiZXZlbnRoaXN0b3J5IjsKCQlmLnRhcmdldCA9ICJfYmxhbmsiOwoJCWYubWV0aG9kID0gIlBPU1QiOwoJCXZhciBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQlpLnR5cGUgPSAiaGlkZGVuIjsKCQlpLm5hbWUgPSAib2JqZWN0X2lkIjsKCQlpLmlkID0gIm9iamVjdF9pZCI7CgkJZi5hcHBlbmRDaGlsZChpKTsKCQlpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKCQlpLnR5cGUgPSAiaGlkZGVuIjsKCQlpLm5hbWUgPSAib2JqZWN0X3R5cGUiOwoJCWkuaWQgPSAib2JqZWN0X3R5cGUiOwoJCWYuYXBwZW5kQ2hpbGQoaSk7CgkJZi5hY3Rpb24gPSBmUm9vdCsibGliL2V2ZW50cy9ldmVudHZpZXdlci5waHAiOwoJfQoJaWYgKGYpCgl7CgkJZi5vYmplY3RfaWQudmFsdWUgPSBvYmplY3RJRDsKCQlmLm9iamVjdF90eXBlLnZhbHVlID0gb2JqZWN0VHlwZTsKCQlmLnN1Ym1pdCgpOwoJfQp9CgovKgogIGZ1bmN0aW9uOiAKCiAgYXJncyA6CiAgCiAgcmV0dXJuczogCgoqLwpmdW5jdGlvbiBvcGVuUmVxV2luZG93KHRjYXNlX2lkKQp7IAogIHZhciB3aW5kb3dDZmc9Jyc7ICAgICAgICAgICAgICAgICAgICAgICAKCXZhciBmZWF0dXJlX3VybCA9ICJsaWIvcmVxdWlyZW1lbnRzL3JlcVRjQXNzaWduLnBocCI7CgkKCWZlYXR1cmVfdXJsICs9Ij9lZGl0PXRlc3RjYXNlJnNob3dDbG9zZUJ1dHRvbj0xJmlkPSIrdGNhc2VfaWQ7CgoJLy8gc2Vjb25kIHBhcmFtZXRlcih3aW5kb3cgbmFtZSkgd2l0aCBzcGFjZXMgZ2VuZXJhdGUgYnVnIG9uIElFCgl3aW5kb3dDZmc9IndpZHRoPTUxMCxoZWlnaHQ9MzAwLHJlc2l6YWJsZT15ZXMsc2Nyb2xsYmFycz15ZXMsZGVwZW5kZW50PXllcyI7Cgl3aW5kb3cub3BlbihmUm9vdCtmZWF0dXJlX3VybCwiVGVzdENhc2VfUmVxdWlyZW1lbnRfbGluayIsd2luZG93Q2ZnKTsKfQoKLyoKICBmdW5jdGlvbjogdG9nZ2xlSW5wdXQKCiAgYXJnczogb2lkIC0gb2JqZWN0IGlkCiAgCiAgcmV0dXJuczogCgogIHJldjogMjAwOTA3MTYgLSBmcmFuY2lzY29tIC0gZml4ZWQgcmVmYWN0b3JlZCB0aGF0IGRvZXMgbm90IHdvcmsKKi8KZnVuY3Rpb24gdG9nZ2xlSW5wdXQob2lkKQp7Cgl2YXIgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG9pZCk7CglpZiAoZWxlbSkKCXsKICAgIGVsZW0udmFsdWUgPSAoZWxlbS52YWx1ZSA9PSAxKSA/IDAgOiAxOwogIH0gIAp9CgoKLyoqCiAqIFNob3cgVXNlciBmZWVkYmFjawogKiBAcGFyYW0gYm9vbGVhbiBzdWNjZXNzIAlbMF0gPSBlcnJvcgogKiBAcGFyYW0gc3RyaW5nIG1lc3NhZ2UgCWxvY2FsaXplZCB0ZXh0CiAqLwpmdW5jdGlvbiBzaG93RmVlZGJhY2soc3VjY2VzcywgbXNnX3RleHQpCnsKCXZhciBiYXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJfZmVlZGJhY2snKTsKCWlmIChiYXNlKQoJewogICAgCWlmIChzdWNjZXNzKQogICAgCXsKICAgIAkJYmFzZS5jbGFzc05hbWUgPSAndXNlcl9mZWVkYmFjayc7CiAgICAJfSBlbHNlIHsKCSAgICAJYmFzZS5jbGFzc05hbWUgPSAnZXJyb3InOwoJICAgIH0KCQliYXNlLmlubmVySFRNTCA9IG1zZ190ZXh0OwoJfQovKgllbHNlCgl7CgkJLy8gYWRkIGRpdiBlbGVtZW50ICd1c2VyX2ZlZWRiYWNrJyBpZiBkb24ndCBleGlzdHMKCQkvLyBoYXZsYXRtOiBJIGRvbid0IGtub3cgd2h5IGRvZXNuJ3Qgd29yayA6LSgKCQl2YXIgb05ld0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwoJCXZhciBkaW0gPSBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShvTmV3RGl2LCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnZGl2JylbMF0pOwoJCWlmIChkaW0pCgkJewogICAgCQlkaW0uc2V0QXR0cmlidXRlKCdpZCcsJ3VzZXJfZmVlZGJhY2snKTsKICAgIAkJc2hvd0ZlZWRiYWNrKHN1Y2Nlc3MsIG1zZ190ZXh0KTsKCQl9IAoJfQoqLwkgCn0KCgovKgogIGZ1bmN0aW9uOiBvcGVuRXhlY0VkaXRXaW5kb3cKCiAgYXJncyA6CgogIHJldHVybnM6CgoqLwpmdW5jdGlvbiBvcGVuRXhlY0VkaXRXaW5kb3coZXhlY19pZCx0Y3ZlcnNpb25faWQsdHBsYW5faWQsdHByb2plY3RfaWQpCnsKCXZhciB0YXJnZXRfdXJsID0gImxpYi9leGVjdXRlL2VkaXRFeGVjdXRpb24ucGhwIjsKCgkvLyAyMDEwMTAwOCAtIGFzaW1vbiAtIEJVR0lEIDMzMTEKCXZhciB3aWR0aCA9IGdldENvb2tpZSgiRXhlY0VkaXRQb3B1cFdpZHRoIik7Cgl2YXIgaGVpZ2h0ID0gZ2V0Q29va2llKCJFeGVjRWRpdFBvcHVwSGVpZ2h0Iik7CgoJaWYgKHdpZHRoID09IG51bGwpCgl7CgkJdmFyIHdpZHRoID0gIjgwMCI7Cgl9CgoJaWYgKGhlaWdodCA9PSBudWxsKQoJewoJCXZhciBoZWlnaHQgPSAiNjAwIjsKCX0KCgl2YXIgd2luZG93Q2ZnID0gIndpZHRoPSIrd2lkdGgrIixoZWlnaHQ9IitoZWlnaHQrIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9eWVzLGRlcGVuZGVudD15ZXMiOwoJd2luZG93Lm9wZW4oZlJvb3QrdGFyZ2V0X3VybCsiP2V4ZWNfaWQ9IitleGVjX2lkKyImdGN2ZXJzaW9uX2lkPSIrdGN2ZXJzaW9uX2lkKyImdHBsYW5faWQ9Iit0cGxhbl9pZCsiJnRwcm9qZWN0X2lkPSIrdHByb2plY3RfaWQsCgkgICAgICAgICAgICAiZXhlY3V0aW9uX25vdGVzIix3aW5kb3dDZmcpOwp9CgovKiAKICogdXNlIHRvIGRpc3BsYXkgdGVzdCBzdWl0ZSBjb250ZW50IChyZWFkIG9ubHkgbW9kZSkgb24gZXhlY3V0aW9uIGZlYXR1cmUKICogb24gdXNlciByZXF1ZXN0CiAqLwpmdW5jdGlvbiBvcGVuVGVzdFN1aXRlV2luZG93KHRzdWl0ZV9pZCkKeyAKCXZhciB3aW5kb3dDZmcgPSAnJzsgICAgICAgICAgICAgICAgICAgICAgIAoJdmFyIGZlYXR1cmVfdXJsID0gImxpYi90ZXN0Y2FzZXMvYXJjaGl2ZURhdGEucGhwIjsKCglmZWF0dXJlX3VybCArPSI/c2hvd19tb2RlPXJlYWRvbmx5JnByaW50X3Njb3BlPXRlc3Rfc3BlY2lmaWNhdGlvbiZlZGl0PXRlc3RzdWl0ZSZsZXZlbD10ZXN0c3VpdGUmaWQ9Iit0c3VpdGVfaWQ7CgoJLy8gc2Vjb25kIHBhcmFtZXRlcih3aW5kb3cgbmFtZSkgd2l0aCBzcGFjZXMgZ2VuZXJhdGUgYnVnIG9uIElFCgl3aW5kb3dDZmcgPSAid2lkdGg9NTEwLGhlaWdodD0zMDAscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxkZXBlbmRlbnQ9eWVzIjsKCXdpbmRvdy5vcGVuKGZSb290K2ZlYXR1cmVfdXJsLCJUZXN0U3VpdGUiLHdpbmRvd0NmZyk7Cn0KCi8qIAogKiB1c2UgdG8gZGlzcGxheSBkb2N1bWVudGF0aW9uIGluY2x1ZGVkIG9uIHRlc3QgbGluayBkaXN0cmlidXRpb24KICogMjAxMDAxMzEgLSBmcmFuY2lzY29tIC0gbW92ZWQgaGVyZSB0byBzb2x2ZSBCVUdJRCAzMTE4OiBIZWxwIGZpbGVzIGFyZSBub3QgZ2V0dGluZyAKICogICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmVkIHdoZW4gc2VsZWN0ZWQgaW4gdGhlIGRyb3Bkb3duCiAqLwpmdW5jdGlvbiBnZXRfZG9jcyhuYW1lLCBzZXJ2ZXJfbmFtZSkKewogIGlmIChuYW1lICE9ICdsZWVyJykgewogICAgICB2YXIgdyA9IHdpbmRvdy5vcGVuKCk7CiAgICAgIHcubG9jYXRpb24gPSBzZXJ2ZXJfbmFtZSArICcvZG9jcy8nICsgbmFtZTsKICB9Cn0KCi8qKgogKiBIZWxwZXIgZnVuY3Rpb24gZm9yIEJVR0lEIDMzMTEuIExvYWRzIHRoZSB2YWx1ZSBvZiBhIGdpdmVuIGNvb2tpZS4KICogQHBhcmFtIG5hbWUgTmFtZSBvZiB0aGUgY29va2llIHRvIGxvYWQuCiAqLwpmdW5jdGlvbiBnZXRDb29raWUobmFtZSkgewoJdmFyIGNvb2tpZSA9IGRvY3VtZW50LmNvb2tpZTsKCgl2YXIgcG9zTmFtZSA9IGNvb2tpZS5pbmRleE9mKCI7ICIgKyBuYW1lICsgIj0iKTsKCWlmIChwb3NOYW1lID09IC0xKSB7CgkJaWYgKGNvb2tpZS5pbmRleE9mKG5hbWUgKyAiPSIpID09IDApIHsKCQkJcG9zTmFtZSA9IDA7CgkJfQoJCWVsc2UgewoJCQlyZXR1cm4gbnVsbDsKCQl9Cgl9CgoJdmFyIHZhbHVlU3RhcnQgPSBjb29raWUuaW5kZXhPZigiPSIsIHBvc05hbWUpKzE7Cgl2YXIgdmFsdWVFbmQgPSBjb29raWUuaW5kZXhPZigiOyIsIHBvc05hbWUrMSk7CglpZiAodmFsdWVFbmQgPT0gLTEpIHZhbHVlRW5kID0gY29va2llLmxlbmd0aDsKCgl2YXIgdmFsdWUgPSBjb29raWUuc3Vic3RyaW5nKHZhbHVlU3RhcnQsIHZhbHVlRW5kKTsKCXJldHVybiB1bmVzY2FwZSh2YWx1ZSk7Cn0KCi8qKgogKiBIZWxwZXIgZnVuY3Rpb24gZm9yIEJVR0lEIDMzMTEuIFN0b3JlcyB0aGUgc2l6ZSBvZiB0aGUgY3VycmVudCB3aW5kb3cgdG8gYSBjb29raWUgd2l0aCB0aGUgZ2l2ZW4gbmFtZS4KICogQHBhcmFtIHdpbmRvd25hbWUgVGhlIG5hbWUgZm9yIHdoaWNoIHRoZSBjb29raWUgc2hhbGwgYmUgc3RvcmVkLgogKi8KZnVuY3Rpb24gc3RvcmVXaW5kb3dTaXplKHdpbmRvd25hbWUpIHsKCXZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIHx8ICh3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IHdpbmRvdy5kb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKTsKCXZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgKHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8IHdpbmRvdy5kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCk7CgoJdmFyIGV4cGlyZXMgPSBuZXcgRGF0ZSgpOwoJLy8gRXhwaXJlcyBpbiAxMCBkYXlzCglleHBpcmVzID0gbmV3IERhdGUoZXhwaXJlcy5nZXRUaW1lKCkgKyAxMDAwKjYwKjYwKjI0KjEwKTsKCglkb2N1bWVudC5jb29raWUgPSB3aW5kb3duYW1lKydXaWR0aD0nK3dpZHRoKyc7IGV4cGlyZXM9JytleHBpcmVzLnRvR01UU3RyaW5nKCkrJzsgcGF0aD0vJzsKCWRvY3VtZW50LmNvb2tpZSA9IHdpbmRvd25hbWUrJ0hlaWdodD0nK2hlaWdodCsnOyBleHBpcmVzPScrZXhwaXJlcy50b0dNVFN0cmluZygpKyc7IHBhdGg9Lyc7Cn0KCi8qKgogKiBXcmFwcGVyIHRvIG5hdGl2ZSBmdW5jdGlvbiB0byBwdXQgYW4gZWxlbWVudCAnIG9uIHRoZSBmYWNlIG9mIHVzZXInCiAqIEBwYXJhbSBvaWQ6IEhUTUwgZWxlbWVudCBJRAogKgogKiBAaW50ZXJuYWwgUmV2aXNpb25zCiAqIDIwMTEwMTEyIC0gYWRkZWQgY2hlY2sgaWYgb2JqIGlzIG5vdCBudWxsIHRvIGF2b2lkIHdhcm5pbmdzCiAqIDIwMTAxMDE2IC0gZnJhbmNpc2NvbSAtIEJVR0lEIDM5MDE6IEVkaXQgVGVzdCBDYXNlIFNURVAgLSBzY3JvbGwgd2luZG93IHRvIHNob3cgc2VsZWN0ZWQgc3RlcCAKICovCmZ1bmN0aW9uIHNjcm9sbFRvU2hvd01lKG9pZCkgewoJb2JqID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob2lkKTsKCWlmIChvYmogIT0gbnVsbCkgewoJCW9iai5zY3JvbGxJbnRvVmlldyh0cnVlKTsKCQlvYmouZm9jdXMoKTsKCX0KfQoKCi8qKgogKiBvcGVuIGEgcmVxdWlyZW1lbnQgaW4gYSBwb3B1cCB3aW5kb3cKICogCiAqIEBwYXJhbSBpdGVtX2lkIFJlcXVpcmVtZW50IFJFVklTSU9OIElECiAqIEBwYXJhbSBhbmNob3Igc3RyaW5nIHdpdGggYW5jaG9yIG5hbWUKICovCmZ1bmN0aW9uIG9wZW5SZXFSZXZpc2lvbldpbmRvdyhpdGVtX2lkLCBhbmNob3IpCnsKCXZhciB3aWR0aCA9IGdldENvb2tpZSgiUmVxUG9wdXBXaWR0aCIpOwoJdmFyIGhlaWdodCA9IGdldENvb2tpZSgiUmVxUG9wdXBIZWlnaHQiKTsKCXZhciB3aW5kb3dDZmc9Jyc7Cgl2YXIgZmVhdHVyZV91cmwgPSAibGliL3JlcXVpcmVtZW50cy9yZXFWaWV3UmV2aXNpb24ucGhwIjsKCgoJaWYgKGFuY2hvciA9PSBudWxsKSB7CgkJYW5jaG9yID0gJyc7Cgl9IGVsc2UgewoJCWFuY2hvciA9ICcjJyArIGFuY2hvcjsKCX0KCglpZiAod2lkdGggPT0gbnVsbCkKCXsKCQl3aWR0aCA9ICI4MDAiOwoJfQoKCWlmIChoZWlnaHQgPT0gbnVsbCkKCXsKCQloZWlnaHQgPSAiNjAwIjsKCX0KCglmZWF0dXJlX3VybCArPSAiP3Nob3dSZXFTcGVjVGl0bGU9MSZpdGVtX2lkPSIgKyBpdGVtX2lkICsgYW5jaG9yOwoJd2luZG93Q2ZnID0gIndpZHRoPSIrd2lkdGgrIixoZWlnaHQ9IitoZWlnaHQrIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9eWVzLGRlcGVuZGVudD15ZXMiOwoKICAvLyBXYXJuaW5nIFlPVSBDQU4gTk9UIEhBVkUgc3BhY2VzIG9uIHdpbmRvd3MgdGl0bGUgSUUgZG9lcyBub3QgbGlrZSBpdAoJd2luZG93VGl0bGUgPSAiICI7Cgl3aW5kb3cub3BlbihmUm9vdCtmZWF0dXJlX3VybCwiUmVxdWlyZW1lbnQgUmV2aXNpb24iLHdpbmRvd0NmZyk7Cn0KCi8qKgogKiBPcGVuIHByaW50IHByZXZpZXcgaW4gcG9wdXAgd2luZG93IHRvIGVuYWJsZSBzaW1wbGUgcHJpbnRpbmcgZm9yIHRoZSB1c2VyLgogKiAKICogQGF1dGhvciBhc2ltb24KICogQHBhcmFtIHR5cGUgY2FuIGJlICJyZXEiLCJyZXFTcGVjIiwgInRjIgogKiBAcGFyYW0gaWQKICogQHBhcmFtIHZlcnNpb25faWQgdGhlIHZlcnNpb24gd2hpY2ggc2hhbGwgYmUgcHJpbnRlZCwgaWYgc2V0CiAqIEBwYXJhbSByZXZpc2lvbl9pZCBvbmx5IHVzZWQgZm9yIHJlcXVpcmVtZW50cywgbnVsbCBpbiBjYXNlIG9mIHRlc3RjYXNlcwogKiBAcGFyYW0gcHJpbnRfYWN0aW9uIHRhcmdldCB1cmwgdG8gb3BlbiBpbiBwb3B1cAogKi8KZnVuY3Rpb24gb3BlblByaW50UHJldmlldyh0eXBlLCBpZCwgY2hpbGRfaWQsIHJldmlzaW9uLCBwcmludF9hY3Rpb24pIAp7CgkvLyBjb25maWd1cmUgd2luZG93IHNpemUgdXNpbmcgY29va2llcyBvciBkZWZhdWx0IHZhbHVlcyBpZiB0aGVyZSBhcmUgbm8gY29va2llcwoJdmFyIHdpZHRoID0gZ2V0Q29va2llKCJSZXFQb3B1cFdpZHRoIik7Cgl2YXIgaGVpZ2h0ID0gZ2V0Q29va2llKCJSZXFQb3B1cEhlaWdodCIpOwoJdmFyIHdpbmRvd0NmZz0nJzsKCXZhciBmZWF0dXJlX3VybCA9IHByaW50X2FjdGlvbjsKCglpZiAod2lkdGggPT0gbnVsbCkgewoJCXdpZHRoID0gIjgwMCI7Cgl9CglpZiAoaGVpZ2h0ID09IG51bGwpIHsKCQloZWlnaHQgPSAiNjAwIjsKCX0KCQoJc3dpdGNoKHR5cGUpCgl7CgoJCWNhc2UgJ3JlcSc6CgkJCWZlYXR1cmVfdXJsICs9ICI/cmVxX2lkPSIgKyBpZCArICImcmVxX3ZlcnNpb25faWQ9IiArIGNoaWxkX2lkICsgIiZyZXFfcmV2aXNpb249IiArIHJldmlzaW9uOwoJCWJyZWFrOwoKCQljYXNlICdyZXFTcGVjJzoKCQkJZmVhdHVyZV91cmwgKz0gIj9yZXFzcGVjX2lkPSIgKyBpZCArICImcmVxc3BlY19yZXZpc2lvbl9pZD0iICsgY2hpbGRfaWQ7CgkJYnJlYWs7CgkJCgkJY2FzZSAndGMnOgoJCQlmZWF0dXJlX3VybCArPSAiJnRlc3RjYXNlX2lkPSIgKyBpZCArICImdGN2ZXJzaW9uX2lkPSIgKyBjaGlsZF9pZDsKCQlicmVhazsKCQkKCX0KCXdpbmRvd0NmZyA9ICJ3aWR0aD0iK3dpZHRoKyIsaGVpZ2h0PSIraGVpZ2h0KyIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyx0b29sYmFyPXllcyxkZXBlbmRlbnQ9eWVzLG1lbnViYXI9eWVzIjsKCXdpbmRvdy5vcGVuKGZSb290K2ZlYXR1cmVfdXJsLCJfYmxhbmsiLHdpbmRvd0NmZyk7IC8vIFRPRE8gbG9jYWxpemUgIlByaW50IFByZXZpZXciIQp9CgoKCmZ1bmN0aW9uIG9wZW5FeGVjSGlzdG9yeVdpbmRvdyh0Y19pZCkgCnsKCXZhciB1cmwgPSAibGliL2V4ZWN1dGUvZXhlY0hpc3RvcnkucGhwP3RjYXNlX2lkPSIgKyB0Y19pZDsKCgl2YXIgd2lkdGggPSBnZXRDb29raWUoImV4ZWNIaXN0b3J5UG9wdXBXaWR0aCIpOwoJdmFyIGhlaWdodCA9IGdldENvb2tpZSgiZXhlY0hpc3RvcnlQb3B1cEhlaWdodCIpOwoKCWlmICh3aWR0aCA9PSBudWxsKQoJewoJCXdpZHRoID0gIjgwMCI7Cgl9CgoJaWYgKGhlaWdodCA9PSBudWxsKQoJewoJCWhlaWdodCA9ICI2MDAiOwoJfQoJCgl2YXIgd2luZG93Q2ZnID0gIndpZHRoPSIrd2lkdGgrIixoZWlnaHQ9IitoZWlnaHQrIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9eWVzLGRlcGVuZGVudD15ZXMiOwoJd2luZG93Lm9wZW4oZlJvb3QrdXJsLCAnX2JsYW5rJywgd2luZG93Q2ZnKTsKfQoKLyoqCiAqIG9wZW4gYSByZXF1aXJlbWVudCBpbiBhIHBvcHVwIHdpbmRvdwogKiAKICogQHBhcmFtIGl0ZW1faWQgUmVxIFNwZWMgUmV2aXNpb24gSUQKICogQHBhcmFtIGFuY2hvciBzdHJpbmcgd2l0aCBhbmNob3IgbmFtZQogKi8KZnVuY3Rpb24gb3BlblJlcVNwZWNSZXZpc2lvbldpbmRvdyhpdGVtX2lkLCBhbmNob3IpCnsKCXZhciBjZmcgPSBuZXcgT2JqZWN0KCk7CgoJY2ZnLndpZHRoID0gZ2V0Q29va2llKCJSZXFQb3B1cFdpZHRoIik7CgljZmcuaGVpZ2h0ID0gZ2V0Q29va2llKCJSZXFQb3B1cEhlaWdodCIpOwoJY2ZnLmZlYXR1cmVfdXJsID0gImxpYi9yZXF1aXJlbWVudHMvcmVxU3BlY1ZpZXdSZXZpc2lvbi5waHAiOwoKCWlmIChhbmNob3IgPT0gbnVsbCkgewoJCWFuY2hvciA9ICcnOwoJfSAKCWVsc2UgCgl7CgkJYW5jaG9yID0gJyMnICsgYW5jaG9yOwoJfQoKCWNmZy5mZWF0dXJlX3VybCArPSAiP3Nob3dSZXFTcGVjVGl0bGU9MSZpdGVtX2lkPSIgKyBpdGVtX2lkICsgYW5jaG9yOwoJY2ZnLndpbmRvd1RpdGxlID0gIlJlcVNwZWNSZXZpc2lvblZpZXciOwoJb3Blbkl0ZW1XaW5kb3coY2ZnKTsKfQoKCgpmdW5jdGlvbiBvcGVuSXRlbVdpbmRvdyhjZmcpCnsKCgl2YXIgd2lkdGggPSBjZmcud2lkdGg7Cgl2YXIgaGVpZ2h0ID0gY2ZnLmhlaWdodDsKCglpZiAoY2ZnLmFuY2hvciA9PSBudWxsKSB7CgkJYW5jaG9yID0gJyc7Cgl9IGVsc2UgewoJCWFuY2hvciA9ICcjJyArIGNmZy5hbmNob3I7Cgl9CgoJaWYgKHdpZHRoID09IG51bGwpCgl7CgkJd2lkdGggPSAiODAwIjsKCX0KCglpZiAoaGVpZ2h0ID09IG51bGwpCgl7CgkJaGVpZ2h0ID0gIjYwMCI7Cgl9CgoJd2luZG93Q2ZnID0gIndpZHRoPSIgKyBjZmcud2lkdGggKyAiLGhlaWdodD0iICsgY2ZnLmhlaWdodCArICIscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxkZXBlbmRlbnQ9eWVzIjsKCXdpbmRvdy5vcGVuKGZSb290K2NmZy5mZWF0dXJlX3VybCxjZmcud2luZG93VGl0bGUsd2luZG93Q2ZnKTsKfQoKLyoKICBmdW5jdGlvbjogb3BlblRDVwogIAkJCWFub3RoZXIgb3BlbiBUZXN0IENhc2UgV2luZG93IGZ1bmN0aW9uCiAgCQkJSW50ZW5kZWQgdG8gYmUgdXNlZCBmb3IgYWRkaW5nIHJlZmVyZW5jZSB0byBhIFRlc3QgQ2FzZSAKICAJCQlpbnNpZGUgb3RoZXIgVGVzdCBDYXNlIGZvciBzb21lIHNvcnQgb2YgcmV1c2UKCiAgYXJnczogdGNhc2VfZXh0ZXJuYWxfaWQ6IGV4YW1wbGUgVEVSLTIzCiAgCQl2ZXJzaW9uX251bWJlcjogZXhhbXBsZSAyCgogIHJldHVybnM6IC0gCgoqLwpmdW5jdGlvbiBvcGVuVENXKHRjYXNlX2V4dGVybmFsX2lkLHZlcnNpb25fbnVtYmVyKQp7Cgl2YXIgX19GVU5DVElPTl9fID0gJ29wZW5UQ1cnOwoJdmFyIHdpbmRvd0NmZyA9ICcnOwoJdmFyIHdpZHRoID0gZ2V0Q29va2llKCJUQ0VkaXRQb3B1cFdpZHRoIik7Cgl2YXIgaGVpZ2h0ID0gZ2V0Q29va2llKCJUQ0VkaXRQb3B1cEhlaWdodCIpOwoJdmFyIGZlYXR1cmVfdXJsID0gImxpYi90ZXN0Y2FzZXMvYXJjaGl2ZURhdGEucGhwIjsKCglmZWF0dXJlX3VybCArPQkiP2FsbG93X2VkaXQ9MCZzaG93X21vZGU9ZWRpdERpc2FibGVkIisiJmVkaXQ9dGVzdGNhc2UmdGNhc2VFeHRlcm5hbElEPSIrdGNhc2VfZXh0ZXJuYWxfaWQrCgkJCQkJIiZ0Y2FzZVZlcnNpb25OdW1iZXI9Iit2ZXJzaW9uX251bWJlcjsKCglpZiAod2lkdGggPT0gbnVsbCkKCXsKCQl2YXIgd2lkdGggPSAiODAwIjsKCX0KCglpZiAoaGVpZ2h0ID09IG51bGwpCgl7CgkJdmFyIGhlaWdodCA9ICI2MDAiOwoJfQoJd2luZG93Q2ZnID0gIndpZHRoPSIrd2lkdGgrIixoZWlnaHQ9IitoZWlnaHQrIixyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9eWVzLGRlcGVuZGVudD15ZXMiOwoKCS8vIHNlY29uZCBwYXJhbWV0ZXIod2luZG93IG5hbWUpIHdpdGggc3BhY2VzIGNhdXNlZCBidWcgb24gSUUKCXdpbmRvdy5vcGVuKGZSb290K2ZlYXR1cmVfdXJsLF9fRlVOQ1RJT05fXyx3aW5kb3dDZmcpOwp9Cg==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>