<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="52">
  <HTTPTask id="116" hostname="192.168.0.106" path="/testlink/third_party/fckeditor/editor/js/fckeditorcode_ie.js" url="http://192.168.0.106/testlink/third_party/fckeditor/editor/js/fckeditorcode_ie.js" ip="192.168.0.106" port="80" connectionId="21" origin="Primary" frame="1" startTime="7458392" endTime="7458439">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzE5Mi4xNjguMC4xMDYvdGVzdGxpbmsvdGhpcmRfcGFydHkvZmNrZWRpdG9yL2VkaXRvci9mY2tlZGl0b3IuaHRtbD9JbnN0YW5jZU5hbWU9bm90ZXMmVG9vbGJhcj10bF9kZWZhdWx0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>emgtQ04=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgOS4wOyBXaW5kb3dzIE5UIDYuMTsgVHJpZGVudC81LjAp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyLjE2OC4wLjEwNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UEhQU0VTU0lEPTY1NDAzaXUybGw5ZzdnY2ttdGJ2NWk1NTU3OyBURVNUTElOS19VU0VSX0FVVEhfQ09PS0lFPTVkYTY4M2JiOGYwMDRkZDM4MjAwMDc5OTBkYTQyY2JmZjI0NmJkNTZmZjRkZWZkNGJjZWJlNzdiNWMxMmQ2M2U=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC90ZXN0bGluay90aGlyZF9wYXJ0eS9mY2tlZGl0b3IvZWRpdG9yL2pzL2Zja2VkaXRvcmNvZGVfaWUuanMgSFRUUC8xLjENCkFjY2VwdDogYXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44DQpSZWZlcmVyOiBodHRwOi8vMTkyLjE2OC4wLjEwNi90ZXN0bGluay90aGlyZF9wYXJ0eS9mY2tlZGl0b3IvZWRpdG9yL2Zja2VkaXRvci5odG1sP0luc3RhbmNlTmFtZT1ub3RlcyZUb29sYmFyPXRsX2RlZmF1bHQNCkFjY2VwdC1MYW5ndWFnZTogemgtQ04NClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDkuMDsgV2luZG93cyBOVCA2LjE7IFRyaWRlbnQvNS4wKQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpIb3N0OiAxOTIuMTY4LjAuMTA2DQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpDb29raWU6IFBIUFNFU1NJRD02NTQwM2l1MmxsOWc3Z2NrbXRidjVpNTU1NzsgVEVTVExJTktfVVNFUl9BVVRIX0NPT0tJRT01ZGE2ODNiYjhmMDA0ZGQzODIwMDA3OTkwZGE0MmNiZmYyNDZiZDU2ZmY0ZGVmZDRiY2ViZTc3YjVjMTJkNjNlDQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="PHPSESSID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NjU0MDNpdTJsbDlnN2dja210YnY1aTU1NTc=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="TESTLINK_USER_AUTH_COOKIE" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NWRhNjgzYmI4ZjAwNGRkMzgyMDAwNzk5MGRhNDJjYmZmMjQ2YmQ1NmZmNGRlZmQ0YmNlYmU3N2I1YzEyZDYzZQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAxNiBBdWcgMjAxNiAxNTo1OToxNCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLzIuNC4xMCAoVWJ1bnR1KQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U2F0LCAwMSBTZXAgMjAxMiAxMzo1NTozMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjQyNWE1LTRjOGE0NDJlZjE4ODAtZ3ppcCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Keep-Alive" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGltZW91dD01LCBtYXg9OTg=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBUdWUsIDE2IEF1ZyAyMDE2IDE1OjU5OjE0IEdNVA0KU2VydmVyOiBBcGFjaGUvMi40LjEwIChVYnVudHUpDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDAxIFNlcCAyMDEyIDEzOjU1OjMwIEdNVA0KRVRhZzogIjQyNWE1LTRjOGE0NDJlZjE4ODAtZ3ppcCINCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCktlZXAtQWxpdmU6IHRpbWVvdXQ9NSwgbWF4PTk4DQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZA0KQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>77u/LyoKICogRkNLZWRpdG9yIC0gVGhlIHRleHQgZWRpdG9yIGZvciBJbnRlcm5ldCAtIGh0dHA6Ly93d3cuZmNrZWRpdG9yLm5ldAogKiBDb3B5cmlnaHQgKEMpIDIwMDMtMjAxMCBGcmVkZXJpY28gQ2FsZGVpcmEgS25hYmJlbgogKgogKiA9PSBCRUdJTiBMSUNFTlNFID09CiAqCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiBhbnkgb2YgdGhlIGZvbGxvd2luZyBsaWNlbnNlcyBhdCB5b3VyCiAqIGNob2ljZToKICoKICogIC0gR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgVmVyc2lvbiAyIG9yIGxhdGVyICh0aGUgIkdQTCIpCiAqICAgIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9ncGwuaHRtbAogKgogKiAgLSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgVmVyc2lvbiAyLjEgb3IgbGF0ZXIgKHRoZSAiTEdQTCIpCiAqICAgIGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy9sZ3BsLmh0bWwKICoKICogIC0gTW96aWxsYSBQdWJsaWMgTGljZW5zZSBWZXJzaW9uIDEuMSBvciBsYXRlciAodGhlICJNUEwiKQogKiAgICBodHRwOi8vd3d3Lm1vemlsbGEub3JnL01QTC9NUEwtMS4xLmh0bWwKICoKICogPT0gRU5EIExJQ0VOU0UgPT0KICoKICogVGhpcyBmaWxlIGhhcyBiZWVuIGNvbXByZXNzZWQgZm9yIGJldHRlciBwZXJmb3JtYW5jZS4gVGhlIG9yaWdpbmFsIHNvdXJjZQogKiBjYW4gYmUgZm91bmQgYXQgImVkaXRvci9fc291cmNlIi4KICovCgp2YXIgRkNLX1NUQVRVU19OT1RMT0FERUQ9d2luZG93LnBhcmVudC5GQ0tfU1RBVFVTX05PVExPQURFRD0wO3ZhciBGQ0tfU1RBVFVTX0FDVElWRT13aW5kb3cucGFyZW50LkZDS19TVEFUVVNfQUNUSVZFPTE7dmFyIEZDS19TVEFUVVNfQ09NUExFVEU9d2luZG93LnBhcmVudC5GQ0tfU1RBVFVTX0NPTVBMRVRFPTI7dmFyIEZDS19UUklTVEFURV9PRkY9d2luZG93LnBhcmVudC5GQ0tfVFJJU1RBVEVfT0ZGPTA7dmFyIEZDS19UUklTVEFURV9PTj13aW5kb3cucGFyZW50LkZDS19UUklTVEFURV9PTj0xO3ZhciBGQ0tfVFJJU1RBVEVfRElTQUJMRUQ9d2luZG93LnBhcmVudC5GQ0tfVFJJU1RBVEVfRElTQUJMRUQ9LTE7dmFyIEZDS19VTktOT1dOPXdpbmRvdy5wYXJlbnQuRkNLX1VOS05PV049LTk7dmFyIEZDS19UT09MQkFSSVRFTV9PTkxZSUNPTj13aW5kb3cucGFyZW50LkZDS19UT09MQkFSSVRFTV9PTkxZSUNPTj0wO3ZhciBGQ0tfVE9PTEJBUklURU1fT05MWVRFWFQ9d2luZG93LnBhcmVudC5GQ0tfVE9PTEJBUklURU1fT05MWVRFWFQ9MTt2YXIgRkNLX1RPT0xCQVJJVEVNX0lDT05URVhUPXdpbmRvdy5wYXJlbnQuRkNLX1RPT0xCQVJJVEVNX0lDT05URVhUPTI7dmFyIEZDS19FRElUTU9ERV9XWVNJV1lHPXdpbmRvdy5wYXJlbnQuRkNLX0VESVRNT0RFX1dZU0lXWUc9MDt2YXIgRkNLX0VESVRNT0RFX1NPVVJDRT13aW5kb3cucGFyZW50LkZDS19FRElUTU9ERV9TT1VSQ0U9MTt2YXIgRkNLX0lNQUdFU19QQVRIPSdpbWFnZXMvJzt2YXIgRkNLX1NQQUNFUl9QQVRIPSdpbWFnZXMvc3BhY2VyLmdpZic7dmFyIENUUkw9MTAwMDt2YXIgU0hJRlQ9MjAwMDt2YXIgQUxUPTQwMDA7dmFyIEZDS19TVFlMRV9CTE9DSz0wO3ZhciBGQ0tfU1RZTEVfSU5MSU5FPTE7dmFyIEZDS19TVFlMRV9PQkpFQ1Q9MjsKU3RyaW5nLnByb3RvdHlwZS5Db250YWlucz1mdW5jdGlvbihBKXtyZXR1cm4gKHRoaXMuaW5kZXhPZihBKT4tMSk7fTtTdHJpbmcucHJvdG90eXBlLkVxdWFscz1mdW5jdGlvbigpe3ZhciBBPWFyZ3VtZW50cztpZiAoQS5sZW5ndGg9PTEmJkFbMF0ucG9wKSBBPUFbMF07Zm9yICh2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtpZiAodGhpcz09QVtpXSkgcmV0dXJuIHRydWU7fTtyZXR1cm4gZmFsc2U7fTtTdHJpbmcucHJvdG90eXBlLklFcXVhbHM9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLnRvVXBwZXJDYXNlKCk7dmFyIEI9YXJndW1lbnRzO2lmIChCLmxlbmd0aD09MSYmQlswXS5wb3ApIEI9QlswXTtmb3IgKHZhciBpPTA7aTxCLmxlbmd0aDtpKyspe2lmIChBPT1CW2ldLnRvVXBwZXJDYXNlKCkpIHJldHVybiB0cnVlO307cmV0dXJuIGZhbHNlO307U3RyaW5nLnByb3RvdHlwZS5SZXBsYWNlQWxsPWZ1bmN0aW9uKEEsQil7dmFyIEM9dGhpcztmb3IgKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe0M9Qy5yZXBsYWNlKEFbaV0sQltpXSk7fTtyZXR1cm4gQzt9O1N0cmluZy5wcm90b3R5cGUuU3RhcnRzV2l0aD1mdW5jdGlvbihBKXtyZXR1cm4gKHRoaXMuc3Vic3RyKDAsQS5sZW5ndGgpPT1BKTt9O1N0cmluZy5wcm90b3R5cGUuRW5kc1dpdGg9ZnVuY3Rpb24oQSxCKXt2YXIgQz10aGlzLmxlbmd0aDt2YXIgRD1BLmxlbmd0aDtpZiAoRD5DKSByZXR1cm4gZmFsc2U7aWYgKEIpe3ZhciBFPW5ldyBSZWdFeHAoQSsnJCcsJ2knKTtyZXR1cm4gRS50ZXN0KHRoaXMpO31lbHNlIHJldHVybiAoRD09MHx8dGhpcy5zdWJzdHIoQy1ELEQpPT1BKTt9O1N0cmluZy5wcm90b3R5cGUuUmVtb3ZlPWZ1bmN0aW9uKEEsQil7dmFyIHM9Jyc7aWYgKEE+MCkgcz10aGlzLnN1YnN0cmluZygwLEEpO2lmIChBK0I8dGhpcy5sZW5ndGgpIHMrPXRoaXMuc3Vic3RyaW5nKEErQix0aGlzLmxlbmd0aCk7cmV0dXJuIHM7fTtTdHJpbmcucHJvdG90eXBlLlRyaW09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZXBsYWNlKC8oXlsgXHRcblxyXSopfChbIFx0XG5ccl0qJCkvZywnJyk7fTtTdHJpbmcucHJvdG90eXBlLkxUcmltPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXlsgXHRcblxyXSovZywnJyk7fTtTdHJpbmcucHJvdG90eXBlLlJUcmltPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVwbGFjZSgvWyBcdFxuXHJdKiQvZywnJyk7fTtTdHJpbmcucHJvdG90eXBlLlJlcGxhY2VOZXdMaW5lQ2hhcnM9ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMucmVwbGFjZSgvXG4vZyxBKTt9O1N0cmluZy5wcm90b3R5cGUuUmVwbGFjZT1mdW5jdGlvbihBLEIsQyl7aWYgKHR5cGVvZiBCPT0nZnVuY3Rpb24nKXtyZXR1cm4gdGhpcy5yZXBsYWNlKEEsZnVuY3Rpb24oKXtyZXR1cm4gQi5hcHBseShDfHx0aGlzLGFyZ3VtZW50cyk7fSk7fWVsc2UgcmV0dXJuIHRoaXMucmVwbGFjZShBLEIpO307QXJyYXkucHJvdG90eXBlLkluZGV4T2Y9ZnVuY3Rpb24oQSl7Zm9yICh2YXIgaT0wO2k8dGhpcy5sZW5ndGg7aSsrKXtpZiAodGhpc1tpXT09QSkgcmV0dXJuIGk7fTtyZXR1cm4tMTt9Owp2YXIJRkNLSUVDbGVhbnVwPWZ1bmN0aW9uKEEpe2lmIChBLl9GQ0tDbGVhbnVwT2JqKSB0aGlzLkl0ZW1zPUEuX0ZDS0NsZWFudXBPYmouSXRlbXM7ZWxzZXt0aGlzLkl0ZW1zPVtdO0EuX0ZDS0NsZWFudXBPYmo9dGhpcztGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQSwndW5sb2FkJyxGQ0tJRUNsZWFudXBfQ2xlYW51cCk7fX07RkNLSUVDbGVhbnVwLnByb3RvdHlwZS5BZGRJdGVtPWZ1bmN0aW9uKEEsQil7dGhpcy5JdGVtcy5wdXNoKFtBLEJdKTt9O2Z1bmN0aW9uIEZDS0lFQ2xlYW51cF9DbGVhbnVwKCl7aWYgKCF0aGlzLl9GQ0tDbGVhbnVwT2JqfHwoRkNLQ29uZmlnLk1zV2ViQnJvd3NlckNvbnRyb2xDb21wYXQmJiF3aW5kb3cuRkNLVW5sb2FkRmxhZykpIHJldHVybjt2YXIgQT10aGlzLl9GQ0tDbGVhbnVwT2JqLkl0ZW1zO3doaWxlIChBLmxlbmd0aD4wKXt2YXIgQj1BLnBvcCgpO2lmIChCKSBCWzFdLmNhbGwoQlswXSk7fTt0aGlzLl9GQ0tDbGVhbnVwT2JqPW51bGw7aWYgKENvbGxlY3RHYXJiYWdlKSBDb2xsZWN0R2FyYmFnZSgpO307CnZhciBzPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTt2YXIgRkNLQnJvd3NlckluZm89e0lzSUU6LypAY2Nfb24hQCovZmFsc2UsSXNJRTc6LypAY2Nfb24hQCovZmFsc2UmJihwYXJzZUludChzLm1hdGNoKC9tc2llIChcZCspLylbMV0sMTApPj03KSxJc0lFNjovKkBjY19vbiFAKi9mYWxzZSYmKHBhcnNlSW50KHMubWF0Y2goL21zaWUgKFxkKykvKVsxXSwxMCk+PTYpLElzU2FmYXJpOnMuQ29udGFpbnMoJyBhcHBsZXdlYmtpdC8nKSxJc09wZXJhOiEhd2luZG93Lm9wZXJhLElzQUlSOnMuQ29udGFpbnMoJyBhZG9iZWFpci8nKSxJc01hYzpzLkNvbnRhaW5zKCdtYWNpbnRvc2gnKX07KGZ1bmN0aW9uKEEpe0EuSXNHZWNrbz0obmF2aWdhdG9yLnByb2R1Y3Q9PSdHZWNrbycpJiYhQS5Jc1NhZmFyaSYmIUEuSXNPcGVyYTtBLklzR2Vja29MaWtlPShBLklzR2Vja298fEEuSXNTYWZhcml8fEEuSXNPcGVyYSk7aWYgKEEuSXNHZWNrbyl7dmFyIEI9cy5tYXRjaCgvcnY6KFxkK1wuXGQrKS8pO3ZhciBDPUImJnBhcnNlRmxvYXQoQlsxXSk7aWYgKEMpe0EuSXNHZWNrbzEwPShDPDEuOCk7QS5Jc0dlY2tvMTk9KEM+MS44KTt9fTtpZiAoQS5Jc1NhZmFyaSkgQS5Jc1NhZmFyaTM9KHBhcnNlRmxvYXQocy5tYXRjaCgvIGFwcGxld2Via2l0XC8oXGQrKS8pWzFdKTw1MjYpO30pKEZDS0Jyb3dzZXJJbmZvKTsKdmFyIEZDS1VSTFBhcmFtcz17fTsoZnVuY3Rpb24oKXt2YXIgQT1kb2N1bWVudC5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLnNwbGl0KCcmJyk7Zm9yICh2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXt2YXIgQj1BW2ldLnNwbGl0KCc9Jyk7dmFyIEM9ZGVjb2RlVVJJQ29tcG9uZW50KEJbMF0pO3ZhciBEPWRlY29kZVVSSUNvbXBvbmVudChCWzFdKTtGQ0tVUkxQYXJhbXNbQ109RDt9fSkoKTsKdmFyIEZDS0V2ZW50cz1mdW5jdGlvbihBKXt0aGlzLk93bmVyPUE7dGhpcy5fUmVnaXN0ZXJlZEV2ZW50cz17fTt9O0ZDS0V2ZW50cy5wcm90b3R5cGUuQXR0YWNoRXZlbnQ9ZnVuY3Rpb24oQSxCKXt2YXIgQztpZiAoIShDPXRoaXMuX1JlZ2lzdGVyZWRFdmVudHNbQV0pKSB0aGlzLl9SZWdpc3RlcmVkRXZlbnRzW0FdPVtCXTtlbHNle2lmIChDLkluZGV4T2YoQik9PS0xKSBDLnB1c2goQik7fX07RkNLRXZlbnRzLnByb3RvdHlwZS5GaXJlRXZlbnQ9ZnVuY3Rpb24oQSxCKXt2YXIgQz10cnVlO3ZhciBEPXRoaXMuX1JlZ2lzdGVyZWRFdmVudHNbQV07aWYgKEQpe2ZvciAodmFyIGk9MDtpPEQubGVuZ3RoO2krKyl7dHJ5e0M9KERbaV0odGhpcy5Pd25lcixCKSYmQyk7fWNhdGNoKGUpe2lmIChlLm51bWJlciE9LTIxNDY4MjMyNzcpIHRocm93IGU7fX19O3JldHVybiBDO307CnZhciBGQ0tEYXRhUHJvY2Vzc29yPWZ1bmN0aW9uKCl7fTtGQ0tEYXRhUHJvY2Vzc29yLnByb3RvdHlwZT17Q29udmVydFRvSHRtbDpmdW5jdGlvbihBKXtpZiAoRkNLQ29uZmlnLkZ1bGxQYWdlKXtGQ0suRG9jVHlwZURlY2xhcmF0aW9uPUEubWF0Y2goRkNLUmVnZXhMaWIuRG9jVHlwZVRhZyk7aWYgKCFGQ0tSZWdleExpYi5IYXNCb2R5VGFnLnRlc3QoQSkpIEE9Jzxib2R5PicrQSsnPC9ib2R5Pic7aWYgKCFGQ0tSZWdleExpYi5IdG1sT3BlbmVyLnRlc3QoQSkpIEE9JzxodG1sIGRpcj0iJytGQ0tDb25maWcuQ29udGVudExhbmdEaXJlY3Rpb24rJyI+JytBKyc8L2h0bWw+JztpZiAoIUZDS1JlZ2V4TGliLkhlYWRPcGVuZXIudGVzdChBKSkgQT1BLnJlcGxhY2UoRkNLUmVnZXhMaWIuSHRtbE9wZW5lciwnJCY8aGVhZD48dGl0bGU+PC90aXRsZT48L2hlYWQ+Jyk7cmV0dXJuIEE7fWVsc2V7dmFyIEI9RkNLQ29uZmlnLkRvY1R5cGUrJzxodG1sIGRpcj0iJytGQ0tDb25maWcuQ29udGVudExhbmdEaXJlY3Rpb24rJyInO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFJiZGQ0tDb25maWcuRG9jVHlwZS5sZW5ndGg+MCYmIUZDS1JlZ2V4TGliLkh0bWw0RG9jVHlwZS50ZXN0KEZDS0NvbmZpZy5Eb2NUeXBlKSkgQis9JyBzdHlsZT0ib3ZlcmZsb3cteTogc2Nyb2xsIic7Qis9Jz48aGVhZD48dGl0bGU+PC90aXRsZT48L2hlYWQ+PGJvZHknK0ZDS0NvbmZpZy5HZXRCb2R5QXR0cmlidXRlcygpKyc+JytBKyc8L2JvZHk+PC9odG1sPic7cmV0dXJuIEI7fX0sQ29udmVydFRvRGF0YUZvcm1hdDpmdW5jdGlvbihBLEIsQyxEKXt2YXIgRT1GQ0tYSHRtbC5HZXRYSFRNTChBLCFCLEQpO2lmIChDJiZGQ0tSZWdleExpYi5FbXB0eU91dFBhcmFncmFwaC50ZXN0KEUpKSByZXR1cm4gJyc7cmV0dXJuIEU7fSxGaXhIdG1sOmZ1bmN0aW9uKEEpe3JldHVybiBBO319Owp2YXIgRkNLPXtOYW1lOkZDS1VSTFBhcmFtc1snSW5zdGFuY2VOYW1lJ10sU3RhdHVzOjAsRWRpdE1vZGU6MCxUb29sYmFyOm51bGwsSGFzRm9jdXM6ZmFsc2UsRGF0YVByb2Nlc3NvcjpuZXcgRkNLRGF0YVByb2Nlc3NvcigpLEdldEluc3RhbmNlT2JqZWN0OihmdW5jdGlvbigpe3ZhciB3PXdpbmRvdztyZXR1cm4gZnVuY3Rpb24obmFtZSl7cmV0dXJuIHdbbmFtZV07fX0pKCksQXR0YWNoVG9PblNlbGVjdGlvbkNoYW5nZTpmdW5jdGlvbihBKXt0aGlzLkV2ZW50cy5BdHRhY2hFdmVudCgnT25TZWxlY3Rpb25DaGFuZ2UnLEEpO30sR2V0TGlua2VkRmllbGRWYWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLkxpbmtlZEZpZWxkLnZhbHVlO30sR2V0UGFyZW50Rm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLkxpbmtlZEZpZWxkLmZvcm07fSxTdGFydHVwVmFsdWU6JycsSXNEaXJ0eTpmdW5jdGlvbigpe2lmICh0aGlzLkVkaXRNb2RlPT0xKSByZXR1cm4gKHRoaXMuU3RhcnR1cFZhbHVlIT10aGlzLkVkaXRpbmdBcmVhLlRleHRhcmVhLnZhbHVlKTtlbHNle2lmICghdGhpcy5FZGl0b3JEb2N1bWVudCkgcmV0dXJuIGZhbHNlO3JldHVybiAodGhpcy5TdGFydHVwVmFsdWUhPXRoaXMuRWRpdG9yRG9jdW1lbnQuYm9keS5pbm5lckhUTUwpO319LFJlc2V0SXNEaXJ0eTpmdW5jdGlvbigpe2lmICh0aGlzLkVkaXRNb2RlPT0xKSB0aGlzLlN0YXJ0dXBWYWx1ZT10aGlzLkVkaXRpbmdBcmVhLlRleHRhcmVhLnZhbHVlO2Vsc2UgaWYgKHRoaXMuRWRpdG9yRG9jdW1lbnQuYm9keSkgdGhpcy5TdGFydHVwVmFsdWU9dGhpcy5FZGl0b3JEb2N1bWVudC5ib2R5LmlubmVySFRNTDt9LFN0YXJ0RWRpdG9yOmZ1bmN0aW9uKCl7dGhpcy5UZW1wQmFzZVRhZz1GQ0tDb25maWcuQmFzZUhyZWYubGVuZ3RoPjA/JzxiYXNlIGhyZWY9IicrRkNLQ29uZmlnLkJhc2VIcmVmKyciIF9mY2t0ZW1wPSJ0cnVlIj48L2Jhc2U+JzonJzt2YXIgQT1GQ0suS2V5c3Ryb2tlSGFuZGxlcj1uZXcgRkNLS2V5c3Ryb2tlSGFuZGxlcigpO0EuT25LZXlzdHJva2U9X0ZDS19LZXlzdHJva2VIYW5kbGVyX09uS2V5c3Ryb2tlO0EuU2V0S2V5c3Ryb2tlcyhGQ0tDb25maWcuS2V5c3Ryb2tlcyk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUU3KXtpZiAoKENUUkwrODYpIGluIEEuS2V5c3Ryb2tlcykgQS5TZXRLZXlzdHJva2VzKFtDVFJMKzg2LHRydWVdKTtpZiAoKFNISUZUKzQ1KSBpbiBBLktleXN0cm9rZXMpIEEuU2V0S2V5c3Ryb2tlcyhbU0hJRlQrNDUsdHJ1ZV0pO307QS5TZXRLZXlzdHJva2VzKFtDVFJMKzgsdHJ1ZV0pO3RoaXMuRWRpdGluZ0FyZWE9bmV3IEZDS0VkaXRpbmdBcmVhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd4RWRpdGluZ0FyZWEnKSk7dGhpcy5FZGl0aW5nQXJlYS5GRlNwZWxsQ2hlY2tlcj1GQ0tDb25maWcuRmlyZWZveFNwZWxsQ2hlY2tlcjt0aGlzLlNldERhdGEodGhpcy5HZXRMaW5rZWRGaWVsZFZhbHVlKCksdHJ1ZSk7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcihkb2N1bWVudCwia2V5ZG93biIsdGhpcy5fVGFiS2V5SGFuZGxlcik7dGhpcy5BdHRhY2hUb09uU2VsZWN0aW9uQ2hhbmdlKF9GQ0tfUGFkZGluZ05vZGVMaXN0ZW5lcik7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja28pIHRoaXMuQXR0YWNoVG9PblNlbGVjdGlvbkNoYW5nZSh0aGlzLl9FeGVjQ2hlY2tFbXB0eUJsb2NrKTt9LEZvY3VzOmZ1bmN0aW9uKCl7RkNLLkVkaXRpbmdBcmVhLkZvY3VzKCk7fSxTZXRTdGF0dXM6ZnVuY3Rpb24oQSl7dGhpcy5TdGF0dXM9QTtpZiAoQT09MSl7RkNLRm9jdXNNYW5hZ2VyLkFkZFdpbmRvdyh3aW5kb3csdHJ1ZSk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpIEZDS0ZvY3VzTWFuYWdlci5BZGRXaW5kb3cod2luZG93LmZyYW1lRWxlbWVudCx0cnVlKTtpZiAoRkNLQ29uZmlnLlN0YXJ0dXBGb2N1cykgRkNLLkZvY3VzKCk7fTt0aGlzLkV2ZW50cy5GaXJlRXZlbnQoJ09uU3RhdHVzQ2hhbmdlJyxBKTt9LEZpeEJvZHk6ZnVuY3Rpb24oKXt2YXIgQT1GQ0tDb25maWcuRW50ZXJNb2RlO2lmIChBIT0ncCcmJkEhPSdkaXYnKSByZXR1cm47dmFyIEI9dGhpcy5FZGl0b3JEb2N1bWVudDtpZiAoIUIpIHJldHVybjt2YXIgQz1CLmJvZHk7aWYgKCFDKSByZXR1cm47RkNLRG9tVG9vbHMuVHJpbU5vZGUoQyk7dmFyIEQ9Qy5maXJzdENoaWxkO3ZhciBFO3doaWxlIChEKXt2YXIgRj1mYWxzZTtzd2l0Y2ggKEQubm9kZVR5cGUpe2Nhc2UgMTp2YXIgRz1ELm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYgKCFGQ0tMaXN0c0xpYi5CbG9ja0VsZW1lbnRzW0ddJiZHIT0nbGknJiYhRC5nZXRBdHRyaWJ1dGUoJ19mY2tmYWtlbGVtZW50JykmJkQuZ2V0QXR0cmlidXRlKCdfbW96X2RpcnR5Jyk9PW51bGwpIEY9dHJ1ZTticmVhaztjYXNlIDM6aWYgKEV8fEQubm9kZVZhbHVlLlRyaW0oKS5sZW5ndGg+MCkgRj10cnVlO2JyZWFrO2Nhc2UgODppZiAoRSkgRj10cnVlO2JyZWFrO307aWYgKEYpe3ZhciBIPUQucGFyZW50Tm9kZTtpZiAoIUUpIEU9SC5pbnNlcnRCZWZvcmUoQi5jcmVhdGVFbGVtZW50KEEpLEQpO0UuYXBwZW5kQ2hpbGQoSC5yZW1vdmVDaGlsZChEKSk7RD1FLm5leHRTaWJsaW5nO31lbHNle2lmIChFKXtGQ0tEb21Ub29scy5UcmltTm9kZShFKTtFPW51bGw7fTtEPUQubmV4dFNpYmxpbmc7fX07aWYgKEUpIEZDS0RvbVRvb2xzLlRyaW1Ob2RlKEUpO30sR2V0RGF0YTpmdW5jdGlvbihBKXtGQ0suRXZlbnRzLkZpcmVFdmVudCgiT25CZWZvcmVHZXREYXRhIik7aWYgKEZDSy5FZGl0TW9kZT09MSkgcmV0dXJuIEZDSy5FZGl0aW5nQXJlYS5UZXh0YXJlYS52YWx1ZTt0aGlzLkZpeEJvZHkoKTt2YXIgQj1GQ0suRWRpdG9yRG9jdW1lbnQ7aWYgKCFCKSByZXR1cm4gbnVsbDt2YXIgQz1GQ0tDb25maWcuRnVsbFBhZ2U7dmFyIEQ9RkNLLkRhdGFQcm9jZXNzb3IuQ29udmVydFRvRGF0YUZvcm1hdChDP0IuZG9jdW1lbnRFbGVtZW50OkIuYm9keSwhQyxGQ0tDb25maWcuSWdub3JlRW1wdHlQYXJhZ3JhcGhWYWx1ZSxBKTtEPUZDSy5Qcm90ZWN0RXZlbnRzUmVzdG9yZShEKTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgRD1ELnJlcGxhY2UoRkNLUmVnZXhMaWIuVG9SZXBsYWNlLCckMScpO2lmIChDKXtpZiAoRkNLLkRvY1R5cGVEZWNsYXJhdGlvbiYmRkNLLkRvY1R5cGVEZWNsYXJhdGlvbi5sZW5ndGg+MCkgRD1GQ0suRG9jVHlwZURlY2xhcmF0aW9uKydcbicrRDtpZiAoRkNLLlhtbERlY2xhcmF0aW9uJiZGQ0suWG1sRGVjbGFyYXRpb24ubGVuZ3RoPjApIEQ9RkNLLlhtbERlY2xhcmF0aW9uKydcbicrRDt9O0Q9RkNLQ29uZmlnLlByb3RlY3RlZFNvdXJjZS5SZXZlcnQoRCk7c2V0VGltZW91dChmdW5jdGlvbigpIHsgRkNLLkV2ZW50cy5GaXJlRXZlbnQoIk9uQWZ0ZXJHZXREYXRhIik7fSwwKTtyZXR1cm4gRDt9LFVwZGF0ZUxpbmtlZEZpZWxkOmZ1bmN0aW9uKCl7dmFyIEE9RkNLLkdldFhIVE1MKEZDS0NvbmZpZy5Gb3JtYXRPdXRwdXQpO2lmIChGQ0tDb25maWcuSHRtbEVuY29kZU91dHB1dCkgQT1GQ0tUb29scy5IVE1MRW5jb2RlKEEpO0ZDSy5MaW5rZWRGaWVsZC52YWx1ZT1BO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCdPbkFmdGVyTGlua2VkRmllbGRVcGRhdGUnKTt9LFJlZ2lzdGVyZWREb3VibGVDbGlja0hhbmRsZXJzOnt9LE9uRG91YmxlQ2xpY2s6ZnVuY3Rpb24oQSl7dmFyIEI9RkNLLlJlZ2lzdGVyZWREb3VibGVDbGlja0hhbmRsZXJzW0EudGFnTmFtZS50b1VwcGVyQ2FzZSgpXTtpZiAoQil7Zm9yICh2YXIgaT0wO2k8Qi5sZW5ndGg7aSsrKSBCW2ldKEEpO307Qj1GQ0suUmVnaXN0ZXJlZERvdWJsZUNsaWNrSGFuZGxlcnNbJyonXTtpZiAoQil7Zm9yICh2YXIgaT0wO2k8Qi5sZW5ndGg7aSsrKSBCW2ldKEEpO319LFJlZ2lzdGVyRG91YmxlQ2xpY2tIYW5kbGVyOmZ1bmN0aW9uKEEsQil7dmFyIEM9Qnx8JyonO0M9Qy50b1VwcGVyQ2FzZSgpO3ZhciBEO2lmICghKEQ9RkNLLlJlZ2lzdGVyZWREb3VibGVDbGlja0hhbmRsZXJzW0NdKSkgRkNLLlJlZ2lzdGVyZWREb3VibGVDbGlja0hhbmRsZXJzW0NdPVtBXTtlbHNle2lmIChELkluZGV4T2YoQSk9PS0xKSBELnB1c2goQSk7fX0sT25BZnRlclNldEhUTUw6ZnVuY3Rpb24oKXtGQ0tEb2N1bWVudFByb2Nlc3Nvci5Qcm9jZXNzKEZDSy5FZGl0b3JEb2N1bWVudCk7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTtGQ0suRXZlbnRzLkZpcmVFdmVudCgnT25TZWxlY3Rpb25DaGFuZ2UnKTtGQ0suRXZlbnRzLkZpcmVFdmVudCgnT25BZnRlclNldEhUTUwnKTt9LFByb3RlY3RVcmxzOmZ1bmN0aW9uKEEpe0E9QS5yZXBsYWNlKEZDS1JlZ2V4TGliLlByb3RlY3RVcmxzQSwnJCYgX2Zja3NhdmVkdXJsPSQxJyk7QT1BLnJlcGxhY2UoRkNLUmVnZXhMaWIuUHJvdGVjdFVybHNJbWcsJyQmIF9mY2tzYXZlZHVybD0kMScpO0E9QS5yZXBsYWNlKEZDS1JlZ2V4TGliLlByb3RlY3RVcmxzQXJlYSwnJCYgX2Zja3NhdmVkdXJsPSQxJyk7cmV0dXJuIEE7fSxQcm90ZWN0RXZlbnRzOmZ1bmN0aW9uKEEpe3JldHVybiBBLnJlcGxhY2UoRkNLUmVnZXhMaWIuVGFnc1dpdGhFdmVudCxfRkNLX1Byb3RlY3RFdmVudHNfUmVwbGFjZVRhZ3MpO30sUHJvdGVjdEV2ZW50c1Jlc3RvcmU6ZnVuY3Rpb24oQSl7cmV0dXJuIEEucmVwbGFjZShGQ0tSZWdleExpYi5Qcm90ZWN0ZWRFdmVudHMsX0ZDS19Qcm90ZWN0RXZlbnRzX1Jlc3RvcmVFdmVudHMpO30sUHJvdGVjdFRhZ3M6ZnVuY3Rpb24oQSl7dmFyIEI9RkNLQ29uZmlnLlByb3RlY3RlZFRhZ3M7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpIEIrPUIubGVuZ3RoPjA/J3xBQkJSfFhNTHxFTUJFRHxPQkpFQ1QnOidBQkJSfFhNTHxFTUJFRHxPQkpFQ1QnO3ZhciBDO2lmIChCLmxlbmd0aD4wKXtDPW5ldyBSZWdFeHAoJzwoJytCKycpKD8hXHd8OiknLCdnaScpO0E9QS5yZXBsYWNlKEMsJzxGQ0s6JDEnKTtDPW5ldyBSZWdFeHAoJzxcLygnK0IrJyk+JywnZ2knKTtBPUEucmVwbGFjZShDLCc8XC9GQ0s6JDE+Jyk7fTtCPSdNRVRBJztpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgQis9J3xIUic7Qz1uZXcgUmVnRXhwKCc8KCgnK0IrJykoPz1cXHN8PnwvKVtcXHNcXFNdKj8pLz8+JywnZ2knKTtBPUEucmVwbGFjZShDLCc8RkNLOiQxIC8+Jyk7cmV0dXJuIEE7fSxTZXREYXRhOmZ1bmN0aW9uKEEsQil7dGhpcy5FZGl0aW5nQXJlYS5Nb2RlPUZDSy5FZGl0TW9kZTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSYmRkNLLkVkaXRvckRvY3VtZW50KXtGQ0suRWRpdG9yRG9jdW1lbnQuZGV0YWNoRXZlbnQoIm9uc2VsZWN0aW9uY2hhbmdlIixEb2NfT25TZWxlY3Rpb25DaGFuZ2UpO307RkNLVGVtcEJpbi5SZXNldCgpO0ZDSy5TZWxlY3Rpb24uUmVsZWFzZSgpO2lmIChGQ0suRWRpdE1vZGU9PTApe3RoaXMuX0ZvcmNlUmVzZXRJc0RpcnR5PShCPT09dHJ1ZSk7QT1GQ0tDb25maWcuUHJvdGVjdGVkU291cmNlLlByb3RlY3QoQSk7QT1GQ0suRGF0YVByb2Nlc3Nvci5Db252ZXJ0VG9IdG1sKEEpO0E9QS5yZXBsYWNlKEZDS1JlZ2V4TGliLkludmFsaWRTZWxmQ2xvc2VUYWdzLCckMT48LyQyPicpO0E9RkNLLlByb3RlY3RFdmVudHMoQSk7QT1GQ0suUHJvdGVjdFVybHMoQSk7QT1GQ0suUHJvdGVjdFRhZ3MoQSk7aWYgKEZDSy5UZW1wQmFzZVRhZy5sZW5ndGg+MCYmIUZDS1JlZ2V4TGliLkhhc0Jhc2VUYWcudGVzdChBKSkgQT1BLnJlcGxhY2UoRkNLUmVnZXhMaWIuSGVhZE9wZW5lciwnJCYnK0ZDSy5UZW1wQmFzZVRhZyk7dmFyIEM9Jyc7aWYgKCFGQ0tDb25maWcuRnVsbFBhZ2UpIEMrPV9GQ0tfR2V0RWRpdG9yQXJlYVN0eWxlVGFncygpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBDKz1GQ0suX0dldEJlaGF2aW9yc1N0eWxlKCk7ZWxzZSBpZiAoRkNLQ29uZmlnLlNob3dCb3JkZXJzKSBDKz1GQ0tUb29scy5HZXRTdHlsZUh0bWwoRkNLX1Nob3dUYWJsZUJvcmRlcnNDU1MsdHJ1ZSk7Qys9RkNLVG9vbHMuR2V0U3R5bGVIdG1sKEZDS19JbnRlcm5hbENTUyx0cnVlKTtBPUEucmVwbGFjZShGQ0tSZWdleExpYi5IZWFkQ2xvc2VyLEMrJyQmJyk7dGhpcy5FZGl0aW5nQXJlYS5PbkxvYWQ9X0ZDS19FZGl0aW5nQXJlYV9PbkxvYWQ7dGhpcy5FZGl0aW5nQXJlYS5TdGFydChBKTt9ZWxzZXtGQ0suRWRpdG9yV2luZG93PW51bGw7RkNLLkVkaXRvckRvY3VtZW50PW51bGw7RkNLRG9tVG9vbHMuUGFkZGluZ05vZGU9bnVsbDt0aGlzLkVkaXRpbmdBcmVhLk9uTG9hZD1udWxsO3RoaXMuRWRpdGluZ0FyZWEuU3RhcnQoQSk7dGhpcy5FZGl0aW5nQXJlYS5UZXh0YXJlYS5fRkNLU2hvd0NvbnRleHRNZW51PXRydWU7RkNLLkVudGVyS2V5SGFuZGxlcj1udWxsO2lmIChCKSB0aGlzLlJlc2V0SXNEaXJ0eSgpO0ZDSy5LZXlzdHJva2VIYW5kbGVyLkF0dGFjaFRvRWxlbWVudCh0aGlzLkVkaXRpbmdBcmVhLlRleHRhcmVhKTt0aGlzLkVkaXRpbmdBcmVhLlRleHRhcmVhLmZvY3VzKCk7RkNLLkV2ZW50cy5GaXJlRXZlbnQoJ09uQWZ0ZXJTZXRIVE1MJyk7fTtpZiAod2luZG93Lm9ucmVzaXplKSB3aW5kb3cub25yZXNpemUoKTt9LFJlZGlyZWN0TmFtZWRDb21tYW5kczp7fSxFeGVjdXRlTmFtZWRDb21tYW5kOmZ1bmN0aW9uKEEsQixDLEQpe2lmICghRCkgRkNLVW5kby5TYXZlVW5kb1N0ZXAoKTtpZiAoIUMmJkZDSy5SZWRpcmVjdE5hbWVkQ29tbWFuZHNbQV0hPW51bGwpIEZDSy5FeGVjdXRlUmVkaXJlY3RlZE5hbWVkQ29tbWFuZChBLEIpO2Vsc2V7RkNLLkZvY3VzKCk7RkNLLkVkaXRvckRvY3VtZW50LmV4ZWNDb21tYW5kKEEsZmFsc2UsQik7RkNLLkV2ZW50cy5GaXJlRXZlbnQoJ09uU2VsZWN0aW9uQ2hhbmdlJyk7fTtpZiAoIUQpIEZDS1VuZG8uU2F2ZVVuZG9TdGVwKCk7fSxHZXROYW1lZENvbW1hbmRTdGF0ZTpmdW5jdGlvbihBKXt0cnl7aWYgKEZDS0Jyb3dzZXJJbmZvLklzU2FmYXJpJiZGQ0suRWRpdG9yV2luZG93JiZBLklFcXVhbHMoJ1Bhc3RlJykpIHJldHVybiAwO2lmICghRkNLLkVkaXRvckRvY3VtZW50LnF1ZXJ5Q29tbWFuZEVuYWJsZWQoQSkpIHJldHVybiAtMTtlbHNle3JldHVybiBGQ0suRWRpdG9yRG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUoQSk/MTowO319Y2F0Y2ggKGUpe3JldHVybiAwO319LEdldE5hbWVkQ29tbWFuZFZhbHVlOmZ1bmN0aW9uKEEpe3ZhciBCPScnO3ZhciBDPUZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZShBKTtpZiAoQz09LTEpIHJldHVybiBudWxsO3RyeXtCPXRoaXMuRWRpdG9yRG9jdW1lbnQucXVlcnlDb21tYW5kVmFsdWUoQSk7fWNhdGNoKGUpIHt9O3JldHVybiBCP0I6Jyc7fSxQYXN0ZTpmdW5jdGlvbihBKXtpZiAoRkNLLlN0YXR1cyE9Mnx8IUZDSy5FdmVudHMuRmlyZUV2ZW50KCdPblBhc3RlJykpIHJldHVybiBmYWxzZTtyZXR1cm4gQXx8RkNLLl9FeGVjUGFzdGUoKTt9LFBhc3RlRnJvbVdvcmQ6ZnVuY3Rpb24oKXtGQ0tEaWFsb2cuT3BlbkRpYWxvZygnRkNLRGlhbG9nX1Bhc3RlJyxGQ0tMYW5nLlBhc3RlRnJvbVdvcmQsJ2RpYWxvZy9mY2tfcGFzdGUuaHRtbCcsNDAwLDMzMCwnV29yZCcpO30sUHJldmlldzpmdW5jdGlvbigpe3ZhciBBO2lmIChGQ0tDb25maWcuRnVsbFBhZ2Upe2lmIChGQ0suVGVtcEJhc2VUYWcubGVuZ3RoPjApIEE9RkNLLlRlbXBCYXNlVGFnK0ZDSy5HZXRYSFRNTCgpO2Vsc2UgQT1GQ0suR2V0WEhUTUwoKTt9ZWxzZXtBPUZDS0NvbmZpZy5Eb2NUeXBlKyc8aHRtbCBkaXI9IicrRkNLQ29uZmlnLkNvbnRlbnRMYW5nRGlyZWN0aW9uKyciPjxoZWFkPicrRkNLLlRlbXBCYXNlVGFnKyc8dGl0bGU+JytGQ0tMYW5nLlByZXZpZXcrJzwvdGl0bGU+JytfRkNLX0dldEVkaXRvckFyZWFTdHlsZVRhZ3MoKSsnPC9oZWFkPjxib2R5JytGQ0tDb25maWcuR2V0Qm9keUF0dHJpYnV0ZXMoKSsnPicrRkNLLkdldFhIVE1MKCkrJzwvYm9keT48L2h0bWw+Jzt9O3ZhciBCPUZDS0NvbmZpZy5TY3JlZW5XaWR0aCowLjg7dmFyIEM9RkNLQ29uZmlnLlNjcmVlbkhlaWdodCowLjc7dmFyIEQ9KEZDS0NvbmZpZy5TY3JlZW5XaWR0aC1CKS8yO3ZhciBFPScnO2lmIChGQ0tfSVNfQ1VTVE9NX0RPTUFJTiYmRkNLQnJvd3NlckluZm8uSXNJRSl7d2luZG93Ll9GQ0tIdG1sVG9Mb2FkPUE7RT0namF2YXNjcmlwdDp2b2lkKCAoZnVuY3Rpb24oKXtkb2N1bWVudC5vcGVuKCkgO2RvY3VtZW50LmRvbWFpbj0iJytkb2N1bWVudC5kb21haW4rJyIgO2RvY3VtZW50LndyaXRlKCB3aW5kb3cub3BlbmVyLl9GQ0tIdG1sVG9Mb2FkICk7ZG9jdW1lbnQuY2xvc2UoKSA7d2luZG93Lm9wZW5lci5fRkNLSHRtbFRvTG9hZCA9IG51bGwgO30pKCkgKSc7fTt2YXIgRj13aW5kb3cub3BlbihFLG51bGwsJ3Rvb2xiYXI9eWVzLGxvY2F0aW9uPW5vLHN0YXR1cz15ZXMsbWVudWJhcj15ZXMsc2Nyb2xsYmFycz15ZXMscmVzaXphYmxlPXllcyx3aWR0aD0nK0IrJyxoZWlnaHQ9JytDKycsbGVmdD0nK0QpO2lmICghRkNLX0lTX0NVU1RPTV9ET01BSU58fCFGQ0tCcm93c2VySW5mby5Jc0lFKXtGLmRvY3VtZW50LndyaXRlKEEpO0YuZG9jdW1lbnQuY2xvc2UoKTt9fSxTd2l0Y2hFZGl0TW9kZTpmdW5jdGlvbihBKXt2YXIgQj0oRkNLLkVkaXRNb2RlPT0wKTt2YXIgQz1GQ0suSXNEaXJ0eSgpO3ZhciBEO2lmIChCKXtGQ0tDb21tYW5kcy5HZXRDb21tYW5kKCdTaG93QmxvY2tzJykuU2F2ZVN0YXRlKCk7aWYgKCFBJiZGQ0tCcm93c2VySW5mby5Jc0lFKSBGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO0Q9RkNLLkdldFhIVE1MKEZDS0NvbmZpZy5Gb3JtYXRTb3VyY2UpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBGQ0tUZW1wQmluLlRvSHRtbCgpO2lmIChEPT1udWxsKSByZXR1cm4gZmFsc2U7fWVsc2UgRD10aGlzLkVkaXRpbmdBcmVhLlRleHRhcmVhLnZhbHVlO0ZDSy5FZGl0TW9kZT1CPzE6MDtGQ0suU2V0RGF0YShELCFDKTtGQ0suRm9jdXMoKTtGQ0tUb29scy5SdW5GdW5jdGlvbihGQ0suVG9vbGJhclNldC5SZWZyZXNoTW9kZVN0YXRlLEZDSy5Ub29sYmFyU2V0KTtyZXR1cm4gdHJ1ZTt9LEluc2VydEVsZW1lbnQ6ZnVuY3Rpb24oQSl7aWYgKHR5cGVvZiBBPT0nc3RyaW5nJykgQT10aGlzLkVkaXRvckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoQSk7dmFyIEI9QS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO0ZDS1NlbGVjdGlvbi5SZXN0b3JlKCk7dmFyIEM9bmV3IEZDS0RvbVJhbmdlKHRoaXMuRWRpdG9yV2luZG93KTtDLk1vdmVUb1NlbGVjdGlvbigpO0MuRGVsZXRlQ29udGVudHMoKTtpZiAoRkNLTGlzdHNMaWIuQmxvY2tFbGVtZW50c1tCXSE9bnVsbCl7aWYgKEMuU3RhcnRCbG9jayl7aWYgKEMuQ2hlY2tTdGFydE9mQmxvY2soKSkgQy5Nb3ZlVG9Qb3NpdGlvbihDLlN0YXJ0QmxvY2ssMyk7ZWxzZSBpZiAoQy5DaGVja0VuZE9mQmxvY2soKSkgQy5Nb3ZlVG9Qb3NpdGlvbihDLlN0YXJ0QmxvY2ssNCk7ZWxzZSBDLlNwbGl0QmxvY2soKTt9O0MuSW5zZXJ0Tm9kZShBKTt2YXIgRD1GQ0tEb21Ub29scy5HZXROZXh0U291cmNlRWxlbWVudChBLGZhbHNlLG51bGwsWydocicsJ2JyJywncGFyYW0nLCdpbWcnLCdhcmVhJywnaW5wdXQnXSx0cnVlKTtpZiAoIUQmJkZDS0NvbmZpZy5FbnRlck1vZGUhPSdicicpe0Q9dGhpcy5FZGl0b3JEb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudChGQ0tDb25maWcuRW50ZXJNb2RlKSk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlKSBGQ0tUb29scy5BcHBlbmRCb2d1c0JyKEQpO307aWYgKEZDS0xpc3RzTGliLkVtcHR5RWxlbWVudHNbQl09PW51bGwpIEMuTW92ZVRvRWxlbWVudEVkaXRTdGFydChBKTtlbHNlIGlmIChEKSBDLk1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoRCk7ZWxzZSBDLk1vdmVUb1Bvc2l0aW9uKEEsNCk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlKXtpZiAoRCkgRkNLRG9tVG9vbHMuU2Nyb2xsSW50b1ZpZXcoRCxmYWxzZSk7RkNLRG9tVG9vbHMuU2Nyb2xsSW50b1ZpZXcoQSxmYWxzZSk7fX1lbHNle0MuSW5zZXJ0Tm9kZShBKTtDLlNldFN0YXJ0KEEsNCk7Qy5TZXRFbmQoQSw0KTt9O0MuU2VsZWN0KCk7Qy5SZWxlYXNlKCk7dGhpcy5Gb2N1cygpO3JldHVybiBBO30sX0luc2VydEJsb2NrRWxlbWVudDpmdW5jdGlvbihBKXt9LF9Jc0Z1bmN0aW9uS2V5OmZ1bmN0aW9uKEEpe2lmIChBPj0xNiYmQTw9MjApIHJldHVybiB0cnVlO2lmIChBPT0yN3x8KEE+PTMzJiZBPD00MCkpIHJldHVybiB0cnVlO2lmIChBPT00NSkgcmV0dXJuIHRydWU7cmV0dXJuIGZhbHNlO30sX0tleURvd25MaXN0ZW5lcjpmdW5jdGlvbihBKXtpZiAoIUEpIEE9RkNLLkVkaXRvcldpbmRvdy5ldmVudDtpZiAoRkNLLkVkaXRvcldpbmRvdyl7aWYgKCFGQ0suX0lzRnVuY3Rpb25LZXkoQS5rZXlDb2RlKSYmIShBLmN0cmxLZXl8fEEubWV0YUtleSkmJiEoQS5rZXlDb2RlPT00NikpIEZDSy5fS2V5RG93blVuZG8oKTt9O3JldHVybiB0cnVlO30sX0tleURvd25VbmRvOmZ1bmN0aW9uKCl7aWYgKCFGQ0tVbmRvLlR5cGluZyl7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTtGQ0tVbmRvLlR5cGluZz10cnVlO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCJPblNlbGVjdGlvbkNoYW5nZSIpO307RkNLVW5kby5UeXBlc0NvdW50Kys7RkNLVW5kby5DaGFuZ2VkPTE7aWYgKEZDS1VuZG8uVHlwZXNDb3VudD5GQ0tVbmRvLk1heFR5cGVzKXtGQ0tVbmRvLlR5cGVzQ291bnQ9MDtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO319LF9UYWJLZXlIYW5kbGVyOmZ1bmN0aW9uKEEpe2lmICghQSkgQT13aW5kb3cuZXZlbnQ7dmFyIEI9QS5rZXlDb2RlO2lmIChCPT05JiZGQ0suRWRpdE1vZGUhPTApe2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt2YXIgQz1kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtpZiAoQy5wYXJlbnRFbGVtZW50KCkhPUZDSy5FZGl0aW5nQXJlYS5UZXh0YXJlYSkgcmV0dXJuIHRydWU7Qy50ZXh0PSdcdCc7Qy5zZWxlY3QoKTt9ZWxzZXt2YXIgYT1bXTt2YXIgRD1GQ0suRWRpdGluZ0FyZWEuVGV4dGFyZWE7dmFyIEU9RC5zZWxlY3Rpb25TdGFydDt2YXIgRj1ELnNlbGVjdGlvbkVuZDthLnB1c2goRC52YWx1ZS5zdWJzdHIoMCxFKSk7YS5wdXNoKCdcdCcpO2EucHVzaChELnZhbHVlLnN1YnN0cihGKSk7RC52YWx1ZT1hLmpvaW4oJycpO0Quc2V0U2VsZWN0aW9uUmFuZ2UoRSsxLEUrMSk7fTtpZiAoQS5wcmV2ZW50RGVmYXVsdCkgcmV0dXJuIEEucHJldmVudERlZmF1bHQoKTtyZXR1cm4gQS5yZXR1cm5WYWx1ZT1mYWxzZTt9O3JldHVybiB0cnVlO319O0ZDSy5FdmVudHM9bmV3IEZDS0V2ZW50cyhGQ0spO0ZDSy5HZXRIVE1MPUZDSy5HZXRYSFRNTD1GQ0suR2V0RGF0YTtGQ0suU2V0SFRNTD1GQ0suU2V0RGF0YTtGQ0suSW5zZXJ0RWxlbWVudEFuZEdldEl0PUZDSy5DcmVhdGVFbGVtZW50PUZDSy5JbnNlcnRFbGVtZW50O2Z1bmN0aW9uIF9GQ0tfUHJvdGVjdEV2ZW50c19SZXBsYWNlVGFncyhBKXtyZXR1cm4gQS5yZXBsYWNlKEZDS1JlZ2V4TGliLkV2ZW50QXR0cmlidXRlcyxfRkNLX1Byb3RlY3RFdmVudHNfUmVwbGFjZUV2ZW50cyk7fTtmdW5jdGlvbiBfRkNLX1Byb3RlY3RFdmVudHNfUmVwbGFjZUV2ZW50cyhBLEIpe3JldHVybiAnICcrQisnX2Zja3Byb3RlY3RlZGF0dD0iJytlbmNvZGVVUklDb21wb25lbnQoQSkrJyInO307ZnVuY3Rpb24gX0ZDS19Qcm90ZWN0RXZlbnRzX1Jlc3RvcmVFdmVudHMoQSxCKXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KEIpO307ZnVuY3Rpb24gX0ZDS19Nb3VzZUV2ZW50c0xpc3RlbmVyKEEpe2lmICghQSkgQT13aW5kb3cuZXZlbnQ7aWYgKEEudHlwZT09J21vdXNlZG93bicpIEZDSy5Nb3VzZURvd25GbGFnPXRydWU7ZWxzZSBpZiAoQS50eXBlPT0nbW91c2V1cCcpIEZDSy5Nb3VzZURvd25GbGFnPWZhbHNlO2Vsc2UgaWYgKEEudHlwZT09J21vdXNlbW92ZScpIEZDSy5FdmVudHMuRmlyZUV2ZW50KCdPbk1vdXNlTW92ZScsQSk7fTtmdW5jdGlvbiBfRkNLX1BhZGRpbmdOb2RlTGlzdGVuZXIoKXtpZiAoRkNLQ29uZmlnLkVudGVyTW9kZS5JRXF1YWxzKCdicicpKSByZXR1cm47RkNLRG9tVG9vbHMuRW5mb3JjZVBhZGRpbmdOb2RlKEZDSy5FZGl0b3JEb2N1bWVudCxGQ0tDb25maWcuRW50ZXJNb2RlKTtpZiAoIUZDS0Jyb3dzZXJJbmZvLklzSUUmJkZDS0RvbVRvb2xzLlBhZGRpbmdOb2RlKXt2YXIgQT1GQ0tTZWxlY3Rpb24uR2V0U2VsZWN0aW9uKCk7aWYgKEEmJkEucmFuZ2VDb3VudD09MSl7dmFyIEI9QS5nZXRSYW5nZUF0KDApO2lmIChCLmNvbGxhcHNlZCYmQi5zdGFydENvbnRhaW5lcj09RkNLLkVkaXRvckRvY3VtZW50LmJvZHkmJkIuc3RhcnRPZmZzZXQ9PTApe0Iuc2VsZWN0Tm9kZUNvbnRlbnRzKEZDS0RvbVRvb2xzLlBhZGRpbmdOb2RlKTtCLmNvbGxhcHNlKHRydWUpO0EucmVtb3ZlQWxsUmFuZ2VzKCk7QS5hZGRSYW5nZShCKTt9fX1lbHNlIGlmIChGQ0tEb21Ub29scy5QYWRkaW5nTm9kZSl7dmFyIEM9RkNLU2VsZWN0aW9uLkdldFBhcmVudEVsZW1lbnQoKTt2YXIgRD1GQ0tEb21Ub29scy5QYWRkaW5nTm9kZTtpZiAoQyYmQy5ub2RlTmFtZS5JRXF1YWxzKCdib2R5Jykpe2lmIChGQ0suRWRpdG9yRG9jdW1lbnQuYm9keS5jaGlsZE5vZGVzLmxlbmd0aD09MSYmRkNLLkVkaXRvckRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZD09RCl7aWYgKEZDS1NlbGVjdGlvbi5fR2V0U2VsZWN0aW9uRG9jdW1lbnQoRkNLLkVkaXRvckRvY3VtZW50LnNlbGVjdGlvbikhPUZDSy5FZGl0b3JEb2N1bWVudCkgcmV0dXJuO3ZhciBCPUZDSy5FZGl0b3JEb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO3ZhciBGPWZhbHNlO2lmICghRC5jaGlsZE5vZGVzLmZpcnN0Q2hpbGQpe0QuYXBwZW5kQ2hpbGQoRkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEQpLmNyZWF0ZVRleHROb2RlKCdcdWZlZmYnKSk7Rj10cnVlO307Qi5tb3ZlVG9FbGVtZW50VGV4dChEKTtCLnNlbGVjdCgpO2lmIChGKSBCLnBhc3RlSFRNTCgnJyk7fX19fTtmdW5jdGlvbiBfRkNLX0VkaXRpbmdBcmVhX09uTG9hZCgpe0ZDSy5FZGl0b3JXaW5kb3c9RkNLLkVkaXRpbmdBcmVhLldpbmRvdztGQ0suRWRpdG9yRG9jdW1lbnQ9RkNLLkVkaXRpbmdBcmVhLkRvY3VtZW50O2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBGQ0tUZW1wQmluLlRvRWxlbWVudHMoKTtGQ0suSW5pdGlhbGl6ZUJlaGF2aW9ycygpO0ZDSy5Nb3VzZURvd25GbGFnPWZhbHNlO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXIoRkNLLkVkaXRvckRvY3VtZW50LCdtb3VzZW1vdmUnLF9GQ0tfTW91c2VFdmVudHNMaXN0ZW5lcik7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcihGQ0suRWRpdG9yRG9jdW1lbnQsJ21vdXNlZG93bicsX0ZDS19Nb3VzZUV2ZW50c0xpc3RlbmVyKTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyKEZDSy5FZGl0b3JEb2N1bWVudCwnbW91c2V1cCcsX0ZDS19Nb3VzZUV2ZW50c0xpc3RlbmVyKTtpZiAoRkNLQnJvd3NlckluZm8uSXNTYWZhcmkpe0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXIoRkNLLkVkaXRvckRvY3VtZW50LCdwYXN0ZScsZnVuY3Rpb24oZXZ0KXt2YXIgQT1uZXcgRkNLRG9tUmFuZ2UoRkNLLkVkaXRvcldpbmRvdyk7dmFyIEI9RkNLLkVkaXRvckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdcdWZlZmYnKTt2YXIgQz1GQ0suRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO0MuaWQ9J2Zja19wYXN0ZV9wYWRkaW5nJztDLmlubmVySFRNTD0nJiM2NTI3OTsnO0EuTW92ZVRvU2VsZWN0aW9uKCk7QS5EZWxldGVDb250ZW50cygpO0EuSW5zZXJ0Tm9kZShCKTtBLkNvbGxhcHNlKCk7QS5JbnNlcnROb2RlKEMpO0EuTW92ZVRvUG9zaXRpb24oQywzKTtBLlNlbGVjdCgpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtCLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQik7Qz1GQ0suRWRpdG9yRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zja19wYXN0ZV9wYWRkaW5nJyk7Qy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEMpO30sMCk7fSk7fTtpZiAoRkNLQnJvd3NlckluZm8uSXNTYWZhcmkpe3ZhciBEPWZ1bmN0aW9uKGV2dCl7aWYgKCEoZXZ0LmN0cmxLZXl8fGV2dC5tZXRhS2V5KSkgcmV0dXJuO2lmIChGQ0suRWRpdE1vZGUhPTApIHJldHVybjtzd2l0Y2ggKGV2dC5rZXlDb2RlKXtjYXNlIDg5OkZDS1VuZG8uUmVkbygpO2JyZWFrO2Nhc2UgOTA6RkNLVW5kby5VbmRvKCk7YnJlYWs7fX07RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcihGQ0suRWRpdG9yRG9jdW1lbnQsJ2tleXVwJyxEKTt9O0ZDSy5FbnRlcktleUhhbmRsZXI9bmV3IEZDS0VudGVyS2V5KEZDSy5FZGl0b3JXaW5kb3csRkNLQ29uZmlnLkVudGVyTW9kZSxGQ0tDb25maWcuU2hpZnRFbnRlck1vZGUsRkNLQ29uZmlnLlRhYlNwYWNlcyk7RkNLLktleXN0cm9rZUhhbmRsZXIuQXR0YWNoVG9FbGVtZW50KEZDSy5FZGl0b3JEb2N1bWVudCk7aWYgKEZDSy5fRm9yY2VSZXNldElzRGlydHkpIEZDSy5SZXNldElzRGlydHkoKTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSYmRkNLLkhhc0ZvY3VzKSBGQ0suRWRpdG9yRG9jdW1lbnQuYm9keS5zZXRBY3RpdmUoKTtGQ0suT25BZnRlclNldEhUTUwoKTtGQ0tDb21tYW5kcy5HZXRDb21tYW5kKCdTaG93QmxvY2tzJykuUmVzdG9yZVN0YXRlKCk7aWYgKEZDSy5TdGF0dXMhPTApIHJldHVybjtGQ0suU2V0U3RhdHVzKDEpO307ZnVuY3Rpb24gX0ZDS19HZXRFZGl0b3JBcmVhU3R5bGVUYWdzKCl7cmV0dXJuIEZDS1Rvb2xzLkdldFN0eWxlSHRtbChGQ0tDb25maWcuRWRpdG9yQXJlYUNTUykrRkNLVG9vbHMuR2V0U3R5bGVIdG1sKEZDS0NvbmZpZy5FZGl0b3JBcmVhU3R5bGVzKTt9O2Z1bmN0aW9uIF9GQ0tfS2V5c3Ryb2tlSGFuZGxlcl9PbktleXN0cm9rZShBLEIpe2lmIChGQ0suU3RhdHVzIT0yKSByZXR1cm4gZmFsc2U7aWYgKEZDSy5FZGl0TW9kZT09MCl7c3dpdGNoIChCKXtjYXNlICdQYXN0ZSc6cmV0dXJuIUZDSy5QYXN0ZSgpO2Nhc2UgJ0N1dCc6RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTtyZXR1cm4gZmFsc2U7fX1lbHNle2lmIChCLkVxdWFscygnUGFzdGUnLCdVbmRvJywnUmVkbycsJ1NlbGVjdEFsbCcsJ0N1dCcpKSByZXR1cm4gZmFsc2U7fTt2YXIgQz1GQ0suQ29tbWFuZHMuR2V0Q29tbWFuZChCKTtpZiAoQy5HZXRTdGF0ZSgpPT0tMSkgcmV0dXJuIGZhbHNlO3JldHVybiAoQy5FeGVjdXRlLmFwcGx5KEMsRkNLVG9vbHMuQXJndW1lbnRzVG9BcnJheShhcmd1bWVudHMsMikpIT09ZmFsc2UpO307KGZ1bmN0aW9uKCl7dmFyIEE9d2luZG93LnBhcmVudC5kb2N1bWVudDt2YXIgQj1BLmdldEVsZW1lbnRCeUlkKEZDSy5OYW1lKTt2YXIgaT0wO3doaWxlIChCfHxpPT0wKXtpZiAoQiYmQi50YWdOYW1lLnRvTG93ZXJDYXNlKCkuRXF1YWxzKCdpbnB1dCcsJ3RleHRhcmVhJykpe0ZDSy5MaW5rZWRGaWVsZD1CO2JyZWFrO307Qj1BLmdldEVsZW1lbnRzQnlOYW1lKEZDSy5OYW1lKVtpKytdO319KSgpO3ZhciBGQ0tUZW1wQmluPXtFbGVtZW50czpbXSxBZGRFbGVtZW50OmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMuRWxlbWVudHMubGVuZ3RoO3RoaXMuRWxlbWVudHNbQl09QTtyZXR1cm4gQjt9LFJlbW92ZUVsZW1lbnQ6ZnVuY3Rpb24oQSl7dmFyIGU9dGhpcy5FbGVtZW50c1tBXTt0aGlzLkVsZW1lbnRzW0FdPW51bGw7cmV0dXJuIGU7fSxSZXNldDpmdW5jdGlvbigpe3ZhciBpPTA7d2hpbGUgKGk8dGhpcy5FbGVtZW50cy5sZW5ndGgpIHRoaXMuRWxlbWVudHNbaSsrXT1udWxsO3RoaXMuRWxlbWVudHMubGVuZ3RoPTA7fSxUb0h0bWw6ZnVuY3Rpb24oKXtmb3IgKHZhciBpPTA7aTx0aGlzLkVsZW1lbnRzLmxlbmd0aDtpKyspe3RoaXMuRWxlbWVudHNbaV09JzxkaXY+Jm5ic3A7Jyt0aGlzLkVsZW1lbnRzW2ldLm91dGVySFRNTCsnPC9kaXY+Jzt0aGlzLkVsZW1lbnRzW2ldLmlzSHRtbD10cnVlO319LFRvRWxlbWVudHM6ZnVuY3Rpb24oKXt2YXIgQT1GQ0suRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7Zm9yICh2YXIgaT0wO2k8dGhpcy5FbGVtZW50cy5sZW5ndGg7aSsrKXtpZiAodGhpcy5FbGVtZW50c1tpXS5pc0h0bWwpe0EuaW5uZXJIVE1MPXRoaXMuRWxlbWVudHNbaV07dGhpcy5FbGVtZW50c1tpXT1BLmZpcnN0Q2hpbGQucmVtb3ZlQ2hpbGQoQS5maXJzdENoaWxkLmxhc3RDaGlsZCk7fX19fTt2YXIgRkNLRm9jdXNNYW5hZ2VyPUZDSy5Gb2N1c01hbmFnZXI9e0lzTG9ja2VkOmZhbHNlLEFkZFdpbmRvdzpmdW5jdGlvbihBLEIpe3ZhciBDO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBDPUEubm9kZVR5cGU9PTE/QTpBLmZyYW1lRWxlbWVudD9BLmZyYW1lRWxlbWVudDpBLmRvY3VtZW50O2Vsc2UgaWYgKEZDS0Jyb3dzZXJJbmZvLklzU2FmYXJpKSBDPUE7ZWxzZSBDPUEuZG9jdW1lbnQ7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcihDLCdibHVyJyxGQ0tGb2N1c01hbmFnZXJfV2luX09uQmx1cik7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcihDLCdmb2N1cycsQj9GQ0tGb2N1c01hbmFnZXJfV2luX09uRm9jdXNfQXJlYTpGQ0tGb2N1c01hbmFnZXJfV2luX09uRm9jdXMpO30sUmVtb3ZlV2luZG93OmZ1bmN0aW9uKEEpe2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBvVGFyZ2V0PUEubm9kZVR5cGU9PTE/QTpBLmZyYW1lRWxlbWVudD9BLmZyYW1lRWxlbWVudDpBLmRvY3VtZW50O2Vsc2Ugb1RhcmdldD1BLmRvY3VtZW50O0ZDS1Rvb2xzLlJlbW92ZUV2ZW50TGlzdGVuZXIob1RhcmdldCwnYmx1cicsRkNLRm9jdXNNYW5hZ2VyX1dpbl9PbkJsdXIpO0ZDS1Rvb2xzLlJlbW92ZUV2ZW50TGlzdGVuZXIob1RhcmdldCwnZm9jdXMnLEZDS0ZvY3VzTWFuYWdlcl9XaW5fT25Gb2N1c19BcmVhKTtGQ0tUb29scy5SZW1vdmVFdmVudExpc3RlbmVyKG9UYXJnZXQsJ2ZvY3VzJyxGQ0tGb2N1c01hbmFnZXJfV2luX09uRm9jdXMpO30sTG9jazpmdW5jdGlvbigpe3RoaXMuSXNMb2NrZWQ9dHJ1ZTt9LFVubG9jazpmdW5jdGlvbigpe2lmICh0aGlzLl9IYXNQZW5kaW5nQmx1cikgRkNLRm9jdXNNYW5hZ2VyLl9UaW1lcj13aW5kb3cuc2V0VGltZW91dChGQ0tGb2N1c01hbmFnZXJfRmlyZU9uQmx1ciwxMDApO3RoaXMuSXNMb2NrZWQ9ZmFsc2U7fSxfUmVzZXRUaW1lcjpmdW5jdGlvbigpe3RoaXMuX0hhc1BlbmRpbmdCbHVyPWZhbHNlO2lmICh0aGlzLl9UaW1lcil7d2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9UaW1lcik7ZGVsZXRlIHRoaXMuX1RpbWVyO319fTtmdW5jdGlvbiBGQ0tGb2N1c01hbmFnZXJfV2luX09uQmx1cigpe2lmICh0eXBlb2YoRkNLKSE9J3VuZGVmaW5lZCcmJkZDSy5IYXNGb2N1cyl7RkNLRm9jdXNNYW5hZ2VyLl9SZXNldFRpbWVyKCk7RkNLRm9jdXNNYW5hZ2VyLl9UaW1lcj13aW5kb3cuc2V0VGltZW91dChGQ0tGb2N1c01hbmFnZXJfRmlyZU9uQmx1ciwxMDApO319O2Z1bmN0aW9uIEZDS0ZvY3VzTWFuYWdlcl9GaXJlT25CbHVyKCl7aWYgKEZDS0ZvY3VzTWFuYWdlci5Jc0xvY2tlZCkgRkNLRm9jdXNNYW5hZ2VyLl9IYXNQZW5kaW5nQmx1cj10cnVlO2Vsc2V7RkNLLkhhc0ZvY3VzPWZhbHNlO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCJPbkJsdXIiKTt9fTtmdW5jdGlvbiBGQ0tGb2N1c01hbmFnZXJfV2luX09uRm9jdXNfQXJlYSgpe2lmIChGQ0tGb2N1c01hbmFnZXIuX0lzRm9jdXNpbmcpIHJldHVybjtGQ0tGb2N1c01hbmFnZXIuX0lzRm9jdXNpbmc9dHJ1ZTtGQ0suRm9jdXMoKTtGQ0tGb2N1c01hbmFnZXJfV2luX09uRm9jdXMoKTtGQ0tUb29scy5SdW5GdW5jdGlvbihmdW5jdGlvbigpe2RlbGV0ZSBGQ0tGb2N1c01hbmFnZXIuX0lzRm9jdXNpbmc7fSk7fTtmdW5jdGlvbiBGQ0tGb2N1c01hbmFnZXJfV2luX09uRm9jdXMoKXtGQ0tGb2N1c01hbmFnZXIuX1Jlc2V0VGltZXIoKTtpZiAoIUZDSy5IYXNGb2N1cyYmIUZDS0ZvY3VzTWFuYWdlci5Jc0xvY2tlZCl7RkNLLkhhc0ZvY3VzPXRydWU7RkNLLkV2ZW50cy5GaXJlRXZlbnQoIk9uRm9jdXMiKTt9fTsoZnVuY3Rpb24oKXt2YXIgQT13aW5kb3cuZnJhbWVFbGVtZW50O3ZhciBCPUEud2lkdGg7dmFyIEM9QS5oZWlnaHQ7aWYgKC9eXGQrJC8udGVzdChCKSkgQis9J3B4JztpZiAoL15cZCskLy50ZXN0KEMpKSBDKz0ncHgnO3ZhciBEPUEuc3R5bGU7RC5ib3JkZXI9RC5wYWRkaW5nPUQubWFyZ2luPTA7RC5iYWNrZ3JvdW5kQ29sb3I9J3RyYW5zcGFyZW50JztELmJhY2tncm91bmRJbWFnZT0nbm9uZSc7RC53aWR0aD1CO0QuaGVpZ2h0PUM7fSkoKTsKRkNLLkRlc2NyaXB0aW9uPSJGQ0tlZGl0b3IgZm9yIEludGVybmV0IEV4cGxvcmVyIDUuNSsiO0ZDSy5fR2V0QmVoYXZpb3JzU3R5bGU9ZnVuY3Rpb24oKXtpZiAoIUZDSy5fQmVoYXZpb3JzU3R5bGUpe3ZhciBBPUZDS0NvbmZpZy5CYXNlUGF0aDt2YXIgQj0nJzt2YXIgQztDPSc8c3R5bGUgdHlwZT0idGV4dC9jc3MiIF9mY2t0ZW1wPSJ0cnVlIj4nO2lmIChGQ0tDb25maWcuU2hvd0JvcmRlcnMpIEI9J3VybCgnK0ErJ2Nzcy9iZWhhdmlvcnMvc2hvd3RhYmxlYm9yZGVycy5odGMpJztDKz0nSU5QVVQsVEVYVEFSRUEsU0VMRUNULC5GQ0tfX0FuY2hvciwuRkNLX19QYWdlQnJlYWssLkZDS19fSW5wdXRIaWRkZW4nO2lmIChGQ0tDb25maWcuRGlzYWJsZU9iamVjdFJlc2l6aW5nKXtDKz0nLElNRyc7Qis9JyB1cmwoJytBKydjc3MvYmVoYXZpb3JzL2Rpc2FibGVoYW5kbGVzLmh0YyknO307Qys9JyB7IGJlaGF2aW9yOiB1cmwoJytBKydjc3MvYmVoYXZpb3JzL2Rpc2FibGVoYW5kbGVzLmh0YykgOyB9JztpZiAoQi5sZW5ndGg+MCkgQys9J1RBQkxFIHsgYmVoYXZpb3I6ICcrQisnIDsgfSc7Qys9Jzwvc3R5bGU+JztGQ0suX0JlaGF2aW9yc1N0eWxlPUM7fTtyZXR1cm4gRkNLLl9CZWhhdmlvcnNTdHlsZTt9O2Z1bmN0aW9uIERvY19Pbk1vdXNlVXAoKXtpZiAoRkNLLkVkaXRvcldpbmRvdy5ldmVudC5zcmNFbGVtZW50LnRhZ05hbWU9PSdIVE1MJyl7RkNLLkZvY3VzKCk7RkNLLkVkaXRvcldpbmRvdy5ldmVudC5jYW5jZWxCdWJibGU9dHJ1ZTtGQ0suRWRpdG9yV2luZG93LmV2ZW50LnJldHVyblZhbHVlPWZhbHNlO319O2Z1bmN0aW9uIERvY19PblBhc3RlKCl7dmFyIEE9RkNLLkVkaXRvckRvY3VtZW50LmJvZHk7QS5kZXRhY2hFdmVudCgnb25wYXN0ZScsRG9jX09uUGFzdGUpO3ZhciBCPUZDSy5QYXN0ZSghRkNLQ29uZmlnLkZvcmNlUGFzdGVBc1BsYWluVGV4dCYmIUZDS0NvbmZpZy5BdXRvRGV0ZWN0UGFzdGVGcm9tV29yZCk7QS5hdHRhY2hFdmVudCgnb25wYXN0ZScsRG9jX09uUGFzdGUpO3JldHVybiBCO307ZnVuY3Rpb24gRG9jX09uRGJsQ2xpY2soKXtGQ0suT25Eb3VibGVDbGljayhGQ0suRWRpdG9yV2luZG93LmV2ZW50LnNyY0VsZW1lbnQpO0ZDSy5FZGl0b3JXaW5kb3cuZXZlbnQuY2FuY2VsQnViYmxlPXRydWU7fTtmdW5jdGlvbiBEb2NfT25TZWxlY3Rpb25DaGFuZ2UoKXtpZiAoIUZDSy5Jc1NlbGVjdGlvbkNoYW5nZUxvY2tlZCYmRkNLLkVkaXRvckRvY3VtZW50KSBGQ0suRXZlbnRzLkZpcmVFdmVudCgiT25TZWxlY3Rpb25DaGFuZ2UiKTt9O2Z1bmN0aW9uIERvY19PbkRyb3AoKXtpZiAoRkNLLk1vdXNlRG93bkZsYWcpe0ZDSy5Nb3VzZURvd25GbGFnPWZhbHNlO3JldHVybjt9O2lmIChGQ0tDb25maWcuRm9yY2VQYXN0ZUFzUGxhaW5UZXh0KXt2YXIgQT1GQ0suRWRpdG9yV2luZG93LmV2ZW50O2lmIChGQ0suX0NoZWNrSXNQYXN0aW5nRW5hYmxlZCgpfHxGQ0tDb25maWcuU2hvd0Ryb3BEaWFsb2cpIEZDSy5QYXN0ZUFzUGxhaW5UZXh0KEEuZGF0YVRyYW5zZmVyLmdldERhdGEoJ1RleHQnKSk7QS5yZXR1cm5WYWx1ZT1mYWxzZTtBLmNhbmNlbEJ1YmJsZT10cnVlO319O0ZDSy5Jbml0aWFsaXplQmVoYXZpb3JzPWZ1bmN0aW9uKEEpe3RoaXMuRWRpdG9yRG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29ubW91c2V1cCcsRG9jX09uTW91c2VVcCk7dGhpcy5FZGl0b3JEb2N1bWVudC5ib2R5LmF0dGFjaEV2ZW50KCdvbnBhc3RlJyxEb2NfT25QYXN0ZSk7dGhpcy5FZGl0b3JEb2N1bWVudC5ib2R5LmF0dGFjaEV2ZW50KCdvbmRyb3AnLERvY19PbkRyb3ApO0ZDSy5Db250ZXh0TWVudS5fSW5uZXJDb250ZXh0TWVudS5BdHRhY2hUb0VsZW1lbnQoRkNLLkVkaXRvckRvY3VtZW50LmJvZHkpO3RoaXMuRWRpdG9yRG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9ua2V5ZG93biIsRkNLLl9LZXlEb3duTGlzdGVuZXIpO3RoaXMuRWRpdG9yRG9jdW1lbnQuYXR0YWNoRXZlbnQoIm9uZGJsY2xpY2siLERvY19PbkRibENsaWNrKTt0aGlzLkVkaXRvckRvY3VtZW50LmF0dGFjaEV2ZW50KCJvbmJlZm9yZWRlYWN0aXZhdGUiLGZ1bmN0aW9uKCl7IEZDS1NlbGVjdGlvbi5TYXZlKCk7fSk7dGhpcy5FZGl0b3JEb2N1bWVudC5hdHRhY2hFdmVudCgib25zZWxlY3Rpb25jaGFuZ2UiLERvY19PblNlbGVjdGlvbkNoYW5nZSk7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcihGQ0suRWRpdG9yRG9jdW1lbnQsJ21vdXNlZG93bicsRG9jX09uTW91c2VEb3duKTt9O0ZDSy5JbnNlcnRIdG1sPWZ1bmN0aW9uKEEpe0E9RkNLQ29uZmlnLlByb3RlY3RlZFNvdXJjZS5Qcm90ZWN0KEEpO0E9RkNLLlByb3RlY3RFdmVudHMoQSk7QT1GQ0suUHJvdGVjdFVybHMoQSk7QT1GQ0suUHJvdGVjdFRhZ3MoQSk7RkNLU2VsZWN0aW9uLlJlc3RvcmUoKTtGQ0suRWRpdG9yV2luZG93LmZvY3VzKCk7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTt2YXIgQj1GQ0tTZWxlY3Rpb24uR2V0U2VsZWN0aW9uKCk7aWYgKEIudHlwZS50b0xvd2VyQ2FzZSgpPT0nY29udHJvbCcpIEIuY2xlYXIoKTtBPSc8c3BhbiBpZD0iX19mYWtlRkNLUmVtb3ZlX18iIHN0eWxlPSJkaXNwbGF5Om5vbmU7Ij5mYWtlRkNLUmVtb3ZlPC9zcGFuPicrQTtCLmNyZWF0ZVJhbmdlKCkucGFzdGVIVE1MKEEpO3ZhciBDPUZDSy5FZGl0b3JEb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnX19mYWtlRkNLUmVtb3ZlX18nKTtpZiAoQy5wYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoPT0xKSBDPUMucGFyZW50Tm9kZTtDLnJlbW92ZU5vZGUodHJ1ZSk7RkNLRG9jdW1lbnRQcm9jZXNzb3IuUHJvY2VzcyhGQ0suRWRpdG9yRG9jdW1lbnQpO3RoaXMuRXZlbnRzLkZpcmVFdmVudCgiT25TZWxlY3Rpb25DaGFuZ2UiKTt9O0ZDSy5TZXRJbm5lckh0bWw9ZnVuY3Rpb24oQSl7dmFyIEI9RkNLLkVkaXRvckRvY3VtZW50O0IuYm9keS5pbm5lckhUTUw9JzxkaXYgaWQ9Il9fZmFrZUZDS1JlbW92ZV9fIj4mbmJzcDs8L2Rpdj4nK0E7Qi5nZXRFbGVtZW50QnlJZCgnX19mYWtlRkNLUmVtb3ZlX18nKS5yZW1vdmVOb2RlKHRydWUpO307ZnVuY3Rpb24gRkNLX1ByZWxvYWRJbWFnZXMoKXt2YXIgQT1uZXcgRkNLSW1hZ2VQcmVsb2FkZXIoKTtBLkFkZEltYWdlcyhGQ0tDb25maWcuUHJlbG9hZEltYWdlcyk7QS5BZGRJbWFnZXMoRkNLQ29uZmlnLlNraW5QYXRoKydmY2tfc3RyaXAuZ2lmJyk7QS5PbkNvbXBsZXRlPUxvYWRUb29sYmFyU2V0dXA7QS5TdGFydCgpO307ZnVuY3Rpb24gRG9jdW1lbnRfT25Db250ZXh0TWVudSgpe3JldHVybiAoZXZlbnQuc3JjRWxlbWVudC5fRkNLU2hvd0NvbnRleHRNZW51PT10cnVlKTt9O2RvY3VtZW50Lm9uY29udGV4dG1lbnU9RG9jdW1lbnRfT25Db250ZXh0TWVudTtmdW5jdGlvbiBGQ0tfQ2xlYW51cCgpe3RoaXMuTGlua2VkRmllbGQ9bnVsbDt0aGlzLkVkaXRvcldpbmRvdz1udWxsO3RoaXMuRWRpdG9yRG9jdW1lbnQ9bnVsbDt9O0ZDSy5fRXhlY1Bhc3RlPWZ1bmN0aW9uKCl7aWYgKEZDSy5fUGFzdGVJc1J1bm5pbmcpIHJldHVybiB0cnVlO2lmIChGQ0tDb25maWcuRm9yY2VQYXN0ZUFzUGxhaW5UZXh0KXtGQ0suUGFzdGVBc1BsYWluVGV4dCgpO3JldHVybiBmYWxzZTt9O3ZhciBBPUZDSy5fQ2hlY2tJc1Bhc3RpbmdFbmFibGVkKHRydWUpO2lmIChBPT09ZmFsc2UpIEZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKEZDS0RpYWxvZy5PcGVuRGlhbG9nLEZDS0RpYWxvZyxbJ0ZDS0RpYWxvZ19QYXN0ZScsRkNLTGFuZy5QYXN0ZSwnZGlhbG9nL2Zja19wYXN0ZS5odG1sJyw0MDAsMzMwLCdTZWN1cml0eSddKTtlbHNle2lmIChGQ0tDb25maWcuQXV0b0RldGVjdFBhc3RlRnJvbVdvcmQmJkEubGVuZ3RoPjApe3ZhciBCPS88XHdbXj5dKigoIGNsYXNzPSI/TXNvTm9ybWFsIj8pfCg9Im1zby0pKS9naTtpZiAoQi50ZXN0KEEpKXtpZiAoY29uZmlybShGQ0tMYW5nLlBhc3RlV29yZENvbmZpcm0pKXtGQ0suUGFzdGVGcm9tV29yZCgpO3JldHVybiBmYWxzZTt9fX07RkNLLl9QYXN0ZUlzUnVubmluZz10cnVlO0ZDSy5FeGVjdXRlTmFtZWRDb21tYW5kKCdQYXN0ZScpO2RlbGV0ZSBGQ0suX1Bhc3RlSXNSdW5uaW5nO307cmV0dXJuIGZhbHNlO307RkNLLlBhc3RlQXNQbGFpblRleHQ9ZnVuY3Rpb24oQSl7aWYgKCFGQ0suX0NoZWNrSXNQYXN0aW5nRW5hYmxlZCgpKXtGQ0tEaWFsb2cuT3BlbkRpYWxvZygnRkNLRGlhbG9nX1Bhc3RlJyxGQ0tMYW5nLlBhc3RlQXNUZXh0LCdkaWFsb2cvZmNrX3Bhc3RlLmh0bWwnLDQwMCwzMzAsJ1BsYWluVGV4dCcpO3JldHVybjt9O3ZhciBCPW51bGw7aWYgKCFBKSBCPWNsaXBib2FyZERhdGEuZ2V0RGF0YSgiVGV4dCIpO2Vsc2UgQj1BO2lmIChCJiZCLmxlbmd0aD4wKXtCPUZDS1Rvb2xzLkhUTUxFbmNvZGUoQik7Qj1GQ0tUb29scy5Qcm9jZXNzTGluZUJyZWFrcyh3aW5kb3csRkNLQ29uZmlnLEIpO3ZhciBDPUIuc2VhcmNoKCc8L3A+Jyk7dmFyIEQ9Qi5zZWFyY2goJzxwPicpO2lmICgoQyE9LTEmJkQhPS0xJiZDPEQpfHwoQyE9LTEmJkQ9PS0xKSl7dmFyIEU9Qi5zdWJzdHIoMCxDKTtCPUIuc3Vic3RyKEMrNCk7dGhpcy5JbnNlcnRIdG1sKEUpO307RkNLVW5kby5TYXZlTG9ja2VkPXRydWU7dGhpcy5JbnNlcnRIdG1sKEIpO0ZDS1VuZG8uU2F2ZUxvY2tlZD1mYWxzZTt9fTtGQ0suX0NoZWNrSXNQYXN0aW5nRW5hYmxlZD1mdW5jdGlvbihBKXtGQ0suX1Bhc3RlSXNFbmFibGVkPWZhbHNlO2RvY3VtZW50LmJvZHkuYXR0YWNoRXZlbnQoJ29ucGFzdGUnLEZDS19DaGVja1Bhc3RpbmdfTGlzdGVuZXIpO3ZhciBCPUZDSy5HZXRDbGlwYm9hcmRIVE1MKCk7ZG9jdW1lbnQuYm9keS5kZXRhY2hFdmVudCgnb25wYXN0ZScsRkNLX0NoZWNrUGFzdGluZ19MaXN0ZW5lcik7aWYgKEZDSy5fUGFzdGVJc0VuYWJsZWQpe2lmICghQSkgQj10cnVlO31lbHNlIEI9ZmFsc2U7ZGVsZXRlIEZDSy5fUGFzdGVJc0VuYWJsZWQ7cmV0dXJuIEI7fTtmdW5jdGlvbiBGQ0tfQ2hlY2tQYXN0aW5nX0xpc3RlbmVyKCl7RkNLLl9QYXN0ZUlzRW5hYmxlZD10cnVlO307RkNLLkdldENsaXBib2FyZEhUTUw9ZnVuY3Rpb24oKXt2YXIgQT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnX19fRkNLSGlkZGVuRGl2Jyk7aWYgKCFBKXtBPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO0EuaWQ9J19fX0ZDS0hpZGRlbkRpdic7dmFyIEI9QS5zdHlsZTtCLnBvc2l0aW9uPSdhYnNvbHV0ZSc7Qi52aXNpYmlsaXR5PUIub3ZlcmZsb3c9J2hpZGRlbic7Qi53aWR0aD1CLmhlaWdodD0xO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoQSk7fTtBLmlubmVySFRNTD0nJzt2YXIgQz1kb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO0MubW92ZVRvRWxlbWVudFRleHQoQSk7Qy5leGVjQ29tbWFuZCgnUGFzdGUnKTt2YXIgRD1BLmlubmVySFRNTDtBLmlubmVySFRNTD0nJztyZXR1cm4gRDt9O0ZDSy5DcmVhdGVMaW5rPWZ1bmN0aW9uKEEsQil7dmFyIEM9W107dmFyIEQ9RkNLU2VsZWN0aW9uLkdldFR5cGUoKT09J0NvbnRyb2wnO3ZhciBFPUQmJkZDS1NlbGVjdGlvbi5HZXRTZWxlY3RlZEVsZW1lbnQoKTtpZiAoIShEJiYhRkNLVG9vbHMuR2V0RWxlbWVudEFzY2Vuc29yKEUsJ2EnKSkpIEZDSy5FeGVjdXRlTmFtZWRDb21tYW5kKCdVbmxpbmsnLG51bGwsZmFsc2UsISFCKTtpZiAoQS5sZW5ndGg+MCl7aWYgKEQpe3ZhciBGPXRoaXMuRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQScpO0YuaHJlZj1BO3ZhciBHPUU7Ry5wYXJlbnROb2RlLmluc2VydEJlZm9yZShGLEcpO0cucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChHKTtGLmFwcGVuZENoaWxkKEcpO3JldHVybiBbRl07fTt2YXIgSD0namF2YXNjcmlwdDp2b2lkKDApOy8qJysobmV3IERhdGUoKS5nZXRUaW1lKCkpKycqLyc7RkNLLkV4ZWN1dGVOYW1lZENvbW1hbmQoJ0NyZWF0ZUxpbmsnLEgsZmFsc2UsISFCKTt2YXIgST10aGlzLkVkaXRvckRvY3VtZW50LmxpbmtzO2ZvciAoaT0wO2k8SS5sZW5ndGg7aSsrKXt2YXIgRj1JW2ldO2lmIChGLmdldEF0dHJpYnV0ZSgnaHJlZicsMik9PUgpe3ZhciBLPUYuaW5uZXJIVE1MO0YuaHJlZj1BO0YuaW5uZXJIVE1MPUs7dmFyIEw9Ri5sYXN0Q2hpbGQ7aWYgKEwmJkwubm9kZU5hbWU9PSdCUicpe0ZDS0RvbVRvb2xzLkluc2VydEFmdGVyTm9kZShGLEYucmVtb3ZlQ2hpbGQoTCkpO307Qy5wdXNoKEYpO319fTtyZXR1cm4gQzt9O2Z1bmN0aW9uIF9GQ0tfUmVtb3ZlRGlzYWJsZWRBdHQoKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTt9O2Z1bmN0aW9uIERvY19Pbk1vdXNlRG93bihBKXt2YXIgZT1BLnNyY0VsZW1lbnQ7aWYgKGUubm9kZU5hbWUmJmUubm9kZU5hbWUuSUVxdWFscygnaW5wdXQnKSYmZS50eXBlLklFcXVhbHMoWydyYWRpbycsJ2NoZWNrYm94J10pJiYhZS5kaXNhYmxlZCl7ZS5kaXNhYmxlZD10cnVlO0ZDS1Rvb2xzLlNldFRpbWVvdXQoX0ZDS19SZW1vdmVEaXNhYmxlZEF0dCwxLGUpO319Owp2YXIgRkNLQ29uZmlnPUZDSy5Db25maWc9e307aWYgKGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sPT0nZmlsZTonKXtGQ0tDb25maWcuQmFzZVBhdGg9ZGVjb2RlVVJJQ29tcG9uZW50KGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cigxKSk7RkNLQ29uZmlnLkJhc2VQYXRoPUZDS0NvbmZpZy5CYXNlUGF0aC5yZXBsYWNlKC9cXC9naSwnLycpO3ZhciBzRnVsbFByb3RvY29sPWRvY3VtZW50LmxvY2F0aW9uLmhyZWYubWF0Y2goL14oZmlsZVw6XC97MiwzfSkvKVsxXTtpZiAoRkNLQnJvd3NlckluZm8uSXNPcGVyYSkgc0Z1bGxQcm90b2NvbCs9J2xvY2FsaG9zdC8nO0ZDS0NvbmZpZy5CYXNlUGF0aD1zRnVsbFByb3RvY29sK0ZDS0NvbmZpZy5CYXNlUGF0aC5zdWJzdHJpbmcoMCxGQ0tDb25maWcuQmFzZVBhdGgubGFzdEluZGV4T2YoJy8nKSsxKTt9ZWxzZSBGQ0tDb25maWcuQmFzZVBhdGg9ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wrJy8vJytkb2N1bWVudC5sb2NhdGlvbi5ob3N0K2RvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lLnN1YnN0cmluZygwLGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lLmxhc3RJbmRleE9mKCcvJykrMSk7RkNLQ29uZmlnLkZ1bGxCYXNlUGF0aD1GQ0tDb25maWcuQmFzZVBhdGg7RkNLQ29uZmlnLkVkaXRvclBhdGg9RkNLQ29uZmlnLkJhc2VQYXRoLnJlcGxhY2UoL2VkaXRvclwvJC8sJycpO3RyeXtGQ0tDb25maWcuU2NyZWVuV2lkdGg9c2NyZWVuLndpZHRoO0ZDS0NvbmZpZy5TY3JlZW5IZWlnaHQ9c2NyZWVuLmhlaWdodDt9Y2F0Y2ggKGUpe0ZDS0NvbmZpZy5TY3JlZW5XaWR0aD04MDA7RkNLQ29uZmlnLlNjcmVlbkhlaWdodD02MDA7fTtGQ0tDb25maWcuUHJvY2Vzc0hpZGRlbkZpZWxkPWZ1bmN0aW9uKCl7dGhpcy5QYWdlQ29uZmlnPXt9O3ZhciBBPXdpbmRvdy5wYXJlbnQuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRkNLLk5hbWUrJ19fX0NvbmZpZycpO2lmICghQSkgcmV0dXJuO3ZhciBCPUEudmFsdWUuc3BsaXQoJyYnKTtmb3IgKHZhciBpPTA7aTxCLmxlbmd0aDtpKyspe2lmIChCW2ldLmxlbmd0aD09MCkgY29udGludWU7dmFyIEM9QltpXS5zcGxpdCgnPScpO3ZhciBEPWRlY29kZVVSSUNvbXBvbmVudChDWzBdKTt2YXIgRT1kZWNvZGVVUklDb21wb25lbnQoQ1sxXSk7aWYgKEQ9PSdDdXN0b21Db25maWd1cmF0aW9uc1BhdGgnKSBGQ0tDb25maWdbRF09RTtlbHNlIGlmIChFLnRvTG93ZXJDYXNlKCk9PSJ0cnVlIikgdGhpcy5QYWdlQ29uZmlnW0RdPXRydWU7ZWxzZSBpZiAoRS50b0xvd2VyQ2FzZSgpPT0iZmFsc2UiKSB0aGlzLlBhZ2VDb25maWdbRF09ZmFsc2U7ZWxzZSBpZiAoRS5sZW5ndGg+MCYmIWlzTmFOKEUpKSB0aGlzLlBhZ2VDb25maWdbRF09cGFyc2VGbG9hdChFKTtlbHNlIHRoaXMuUGFnZUNvbmZpZ1tEXT1FO319O2Z1bmN0aW9uIEZDS0NvbmZpZ19Mb2FkUGFnZUNvbmZpZygpe3ZhciBBPUZDS0NvbmZpZy5QYWdlQ29uZmlnO2ZvciAodmFyIEIgaW4gQSkgRkNLQ29uZmlnW0JdPUFbQl07fTtmdW5jdGlvbiBGQ0tDb25maWdfUHJlUHJvY2Vzcygpe3ZhciBBPUZDS0NvbmZpZztpZiAoQS5BbGxvd1F1ZXJ5U3RyaW5nRGVidWcpe3RyeXtpZiAoKC9mY2tkZWJ1Zz10cnVlL2kpLnRlc3Qod2luZG93LnRvcC5sb2NhdGlvbi5zZWFyY2gpKSBBLkRlYnVnPXRydWU7fWNhdGNoIChlKSB7ICB9fTtpZiAoIUEuUGx1Z2luc1BhdGguRW5kc1dpdGgoJy8nKSkgQS5QbHVnaW5zUGF0aCs9Jy8nO3ZhciBCPUEuVG9vbGJhckNvbWJvUHJldmlld0NTUztpZiAoIUJ8fEIubGVuZ3RoPT0wKSBBLlRvb2xiYXJDb21ib1ByZXZpZXdDU1M9QS5FZGl0b3JBcmVhQ1NTO0EuUmVtb3ZlQXR0cmlidXRlc0FycmF5PShBLlJlbW92ZUF0dHJpYnV0ZXN8fCcnKS5zcGxpdCgnLCcpO2lmICghRkNLQ29uZmlnLlNraW5FZGl0b3JDU1N8fEZDS0NvbmZpZy5Ta2luRWRpdG9yQ1NTLmxlbmd0aD09MCkgRkNLQ29uZmlnLlNraW5FZGl0b3JDU1M9RkNLQ29uZmlnLlNraW5QYXRoKydmY2tfZWRpdG9yLmNzcyc7aWYgKCFGQ0tDb25maWcuU2tpbkRpYWxvZ0NTU3x8RkNLQ29uZmlnLlNraW5EaWFsb2dDU1MubGVuZ3RoPT0wKSBGQ0tDb25maWcuU2tpbkRpYWxvZ0NTUz1GQ0tDb25maWcuU2tpblBhdGgrJ2Zja19kaWFsb2cuY3NzJzt9O0ZDS0NvbmZpZy5Ub29sYmFyU2V0cz17fTtGQ0tDb25maWcuUGx1Z2lucz17fTtGQ0tDb25maWcuUGx1Z2lucy5JdGVtcz1bXTtGQ0tDb25maWcuUGx1Z2lucy5BZGQ9ZnVuY3Rpb24oQSxCLEMpe0ZDS0NvbmZpZy5QbHVnaW5zLkl0ZW1zLnB1c2goW0EsQixDXSk7fTtGQ0tDb25maWcuUHJvdGVjdGVkU291cmNlPXt9O0ZDS0NvbmZpZy5Qcm90ZWN0ZWRTb3VyY2UuX0NvZGVUYWc9KG5ldyBEYXRlKCkpLnZhbHVlT2YoKTtGQ0tDb25maWcuUHJvdGVjdGVkU291cmNlLlJlZ2V4RW50cmllcz1bLzwhLS1bXHNcU10qPy0tPi9nLC88c2NyaXB0W1xzXFNdKj88XC9zY3JpcHQ+L2dpLC88bm9zY3JpcHRbXHNcU10qPzxcL25vc2NyaXB0Pi9naV07RkNLQ29uZmlnLlByb3RlY3RlZFNvdXJjZS5BZGQ9ZnVuY3Rpb24oQSl7dGhpcy5SZWdleEVudHJpZXMucHVzaChBKTt9O0ZDS0NvbmZpZy5Qcm90ZWN0ZWRTb3VyY2UuUHJvdGVjdD1mdW5jdGlvbihBKXt2YXIgQj10aGlzLl9Db2RlVGFnO2Z1bmN0aW9uIF9SZXBsYWNlKHByb3RlY3RlZFNvdXJjZSl7dmFyIEM9RkNLVGVtcEJpbi5BZGRFbGVtZW50KHByb3RlY3RlZFNvdXJjZSk7cmV0dXJuICc8IS0teycrQitDKyd9LS0+Jzt9O2ZvciAodmFyIGk9MDtpPHRoaXMuUmVnZXhFbnRyaWVzLmxlbmd0aDtpKyspe0E9QS5yZXBsYWNlKHRoaXMuUmVnZXhFbnRyaWVzW2ldLF9SZXBsYWNlKTt9O3JldHVybiBBO307RkNLQ29uZmlnLlByb3RlY3RlZFNvdXJjZS5SZXZlcnQ9ZnVuY3Rpb24oQSxCKXtmdW5jdGlvbiBfUmVwbGFjZShtLG9wZW5lcixpbmRleCl7dmFyIEM9Qj9GQ0tUZW1wQmluLlJlbW92ZUVsZW1lbnQoaW5kZXgpOkZDS1RlbXBCaW4uRWxlbWVudHNbaW5kZXhdO3JldHVybiBGQ0tDb25maWcuUHJvdGVjdGVkU291cmNlLlJldmVydChDLEIpO307dmFyIEQ9bmV3IFJlZ0V4cCgiKDx8Jmx0OykhLS1cXHsiK3RoaXMuX0NvZGVUYWcrIihcXGQrKVxcfS0tKD58Jmd0OykiLCJnIik7cmV0dXJuIEEucmVwbGFjZShELF9SZXBsYWNlKTt9O0ZDS0NvbmZpZy5HZXRCb2R5QXR0cmlidXRlcz1mdW5jdGlvbigpe3ZhciBBPScnO2lmICh0aGlzLkJvZHlJZCYmdGhpcy5Cb2R5SWQubGVuZ3RoPjApIEErPScgaWQ9IicrdGhpcy5Cb2R5SWQrJyInO2lmICh0aGlzLkJvZHlDbGFzcyYmdGhpcy5Cb2R5Q2xhc3MubGVuZ3RoPjApIEErPScgY2xhc3M9IicrdGhpcy5Cb2R5Q2xhc3MrJyInO3JldHVybiBBO307RkNLQ29uZmlnLkFwcGx5Qm9keUF0dHJpYnV0ZXM9ZnVuY3Rpb24oQSl7aWYgKHRoaXMuQm9keUlkJiZ0aGlzLkJvZHlJZC5sZW5ndGg+MCkgQS5pZD1GQ0tDb25maWcuQm9keUlkO2lmICh0aGlzLkJvZHlDbGFzcyYmdGhpcy5Cb2R5Q2xhc3MubGVuZ3RoPjApIEEuY2xhc3NOYW1lKz0nICcrRkNLQ29uZmlnLkJvZHlDbGFzczt9Owp2YXIgRkNLRGVidWc9e091dHB1dDpmdW5jdGlvbigpe30sT3V0cHV0T2JqZWN0OmZ1bmN0aW9uKCl7fX07CnZhciBGQ0tEb21Ub29scz17TW92ZUNoaWxkcmVuOmZ1bmN0aW9uKEEsQixDKXtpZiAoQT09QikgcmV0dXJuO3ZhciBEO2lmIChDKXt3aGlsZSAoKEQ9QS5sYXN0Q2hpbGQpKSBCLmluc2VydEJlZm9yZShBLnJlbW92ZUNoaWxkKEQpLEIuZmlyc3RDaGlsZCk7fWVsc2V7d2hpbGUgKChEPUEuZmlyc3RDaGlsZCkpIEIuYXBwZW5kQ2hpbGQoQS5yZW1vdmVDaGlsZChEKSk7fX0sTW92ZU5vZGU6ZnVuY3Rpb24oQSxCLEMpe2lmIChDKSBCLmluc2VydEJlZm9yZShGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEEpLEIuZmlyc3RDaGlsZCk7ZWxzZSBCLmFwcGVuZENoaWxkKEZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoQSkpO30sVHJpbU5vZGU6ZnVuY3Rpb24oQSl7dGhpcy5MVHJpbU5vZGUoQSk7dGhpcy5SVHJpbU5vZGUoQSk7fSxMVHJpbU5vZGU6ZnVuY3Rpb24oQSl7dmFyIEI7d2hpbGUgKChCPUEuZmlyc3RDaGlsZCkpe2lmIChCLm5vZGVUeXBlPT0zKXt2YXIgQz1CLm5vZGVWYWx1ZS5MVHJpbSgpO3ZhciBEPUIubm9kZVZhbHVlLmxlbmd0aDtpZiAoQy5sZW5ndGg9PTApe0EucmVtb3ZlQ2hpbGQoQik7Y29udGludWU7fWVsc2UgaWYgKEMubGVuZ3RoPEQpe0Iuc3BsaXRUZXh0KEQtQy5sZW5ndGgpO0EucmVtb3ZlQ2hpbGQoQS5maXJzdENoaWxkKTt9fTticmVhazt9fSxSVHJpbU5vZGU6ZnVuY3Rpb24oQSl7dmFyIEI7d2hpbGUgKChCPUEubGFzdENoaWxkKSl7aWYgKEIubm9kZVR5cGU9PTMpe3ZhciBDPUIubm9kZVZhbHVlLlJUcmltKCk7dmFyIEQ9Qi5ub2RlVmFsdWUubGVuZ3RoO2lmIChDLmxlbmd0aD09MCl7Qi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEIpO2NvbnRpbnVlO31lbHNlIGlmIChDLmxlbmd0aDxEKXtCLnNwbGl0VGV4dChDLmxlbmd0aCk7QS5sYXN0Q2hpbGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChBLmxhc3RDaGlsZCk7fX07YnJlYWs7fTtpZiAoIUZDS0Jyb3dzZXJJbmZvLklzSUUmJiFGQ0tCcm93c2VySW5mby5Jc09wZXJhKXtCPUEubGFzdENoaWxkO2lmIChCJiZCLm5vZGVUeXBlPT0xJiZCLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PSdicicpe0IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChCKTt9fX0sUmVtb3ZlTm9kZTpmdW5jdGlvbihBLEIpe2lmIChCKXt2YXIgQzt3aGlsZSAoKEM9QS5maXJzdENoaWxkKSkgQS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShBLnJlbW92ZUNoaWxkKEMpLEEpO307cmV0dXJuIEEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChBKTt9LEdldEZpcnN0Q2hpbGQ6ZnVuY3Rpb24oQSxCKXtpZiAodHlwZW9mIChCKT09J3N0cmluZycpIEI9W0JdO3ZhciBDPUEuZmlyc3RDaGlsZDt3aGlsZShDKXtpZiAoQy5ub2RlVHlwZT09MSYmQy50YWdOYW1lLkVxdWFscy5hcHBseShDLnRhZ05hbWUsQikpIHJldHVybiBDO0M9Qy5uZXh0U2libGluZzt9O3JldHVybiBudWxsO30sR2V0TGFzdENoaWxkOmZ1bmN0aW9uKEEsQil7aWYgKHR5cGVvZiAoQik9PSdzdHJpbmcnKSBCPVtCXTt2YXIgQz1BLmxhc3RDaGlsZDt3aGlsZShDKXtpZiAoQy5ub2RlVHlwZT09MSYmKCFCfHxDLnRhZ05hbWUuRXF1YWxzKEIpKSkgcmV0dXJuIEM7Qz1DLnByZXZpb3VzU2libGluZzt9O3JldHVybiBudWxsO30sR2V0UHJldmlvdXNTb3VyY2VFbGVtZW50OmZ1bmN0aW9uKEEsQixDLEQpe2lmICghQSkgcmV0dXJuIG51bGw7aWYgKEMmJkEubm9kZVR5cGU9PTEmJkEubm9kZU5hbWUuSUVxdWFscyhDKSkgcmV0dXJuIG51bGw7aWYgKEEucHJldmlvdXNTaWJsaW5nKSBBPUEucHJldmlvdXNTaWJsaW5nO2Vsc2UgcmV0dXJuIHRoaXMuR2V0UHJldmlvdXNTb3VyY2VFbGVtZW50KEEucGFyZW50Tm9kZSxCLEMsRCk7d2hpbGUgKEEpe2lmIChBLm5vZGVUeXBlPT0xKXtpZiAoQyYmQS5ub2RlTmFtZS5JRXF1YWxzKEMpKSBicmVhaztpZiAoIUR8fCFBLm5vZGVOYW1lLklFcXVhbHMoRCkpIHJldHVybiBBO31lbHNlIGlmIChCJiZBLm5vZGVUeXBlPT0zJiZBLm5vZGVWYWx1ZS5SVHJpbSgpLmxlbmd0aD4wKSBicmVhaztpZiAoQS5sYXN0Q2hpbGQpIEE9QS5sYXN0Q2hpbGQ7ZWxzZSByZXR1cm4gdGhpcy5HZXRQcmV2aW91c1NvdXJjZUVsZW1lbnQoQSxCLEMsRCk7fTtyZXR1cm4gbnVsbDt9LEdldE5leHRTb3VyY2VFbGVtZW50OmZ1bmN0aW9uKEEsQixDLEQsRSl7d2hpbGUoKEE9dGhpcy5HZXROZXh0U291cmNlTm9kZShBLEUpKSl7aWYgKEEubm9kZVR5cGU9PTEpe2lmIChDJiZBLm5vZGVOYW1lLklFcXVhbHMoQykpIGJyZWFrO2lmIChEJiZBLm5vZGVOYW1lLklFcXVhbHMoRCkpIHJldHVybiB0aGlzLkdldE5leHRTb3VyY2VFbGVtZW50KEEsQixDLEQpO3JldHVybiBBO31lbHNlIGlmIChCJiZBLm5vZGVUeXBlPT0zJiZBLm5vZGVWYWx1ZS5SVHJpbSgpLmxlbmd0aD4wKSBicmVhazt9O3JldHVybiBudWxsO30sR2V0TmV4dFNvdXJjZU5vZGU6ZnVuY3Rpb24oQSxCLEMsRCl7aWYgKCFBKSByZXR1cm4gbnVsbDt2YXIgRTtpZiAoIUImJkEuZmlyc3RDaGlsZCkgRT1BLmZpcnN0Q2hpbGQ7ZWxzZXtpZiAoRCYmQT09RCkgcmV0dXJuIG51bGw7RT1BLm5leHRTaWJsaW5nO2lmICghRSYmKCFEfHxEIT1BLnBhcmVudE5vZGUpKSByZXR1cm4gdGhpcy5HZXROZXh0U291cmNlTm9kZShBLnBhcmVudE5vZGUsdHJ1ZSxDLEQpO307aWYgKEMmJkUmJkUubm9kZVR5cGUhPUMpIHJldHVybiB0aGlzLkdldE5leHRTb3VyY2VOb2RlKEUsZmFsc2UsQyxEKTtyZXR1cm4gRTt9LEdldFByZXZpb3VzU291cmNlTm9kZTpmdW5jdGlvbihBLEIsQyxEKXtpZiAoIUEpIHJldHVybiBudWxsO3ZhciBFO2lmICghQiYmQS5sYXN0Q2hpbGQpIEU9QS5sYXN0Q2hpbGQ7ZWxzZXtpZiAoRCYmQT09RCkgcmV0dXJuIG51bGw7RT1BLnByZXZpb3VzU2libGluZztpZiAoIUUmJighRHx8RCE9QS5wYXJlbnROb2RlKSkgcmV0dXJuIHRoaXMuR2V0UHJldmlvdXNTb3VyY2VOb2RlKEEucGFyZW50Tm9kZSx0cnVlLEMsRCk7fTtpZiAoQyYmRSYmRS5ub2RlVHlwZSE9QykgcmV0dXJuIHRoaXMuR2V0UHJldmlvdXNTb3VyY2VOb2RlKEUsZmFsc2UsQyxEKTtyZXR1cm4gRTt9LEluc2VydEFmdGVyTm9kZTpmdW5jdGlvbihBLEIpe3JldHVybiBBLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKEIsQS5uZXh0U2libGluZyk7fSxHZXRQYXJlbnRzOmZ1bmN0aW9uKEEpe3ZhciBCPVtdO3doaWxlIChBKXtCLnVuc2hpZnQoQSk7QT1BLnBhcmVudE5vZGU7fTtyZXR1cm4gQjt9LEdldENvbW1vblBhcmVudHM6ZnVuY3Rpb24oQSxCKXt2YXIgQz10aGlzLkdldFBhcmVudHMoQSk7dmFyIEQ9dGhpcy5HZXRQYXJlbnRzKEIpO3ZhciBFPVtdO2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7aWYgKENbaV09PURbaV0pIEUucHVzaChDW2ldKTt9O3JldHVybiBFO30sR2V0Q29tbW9uUGFyZW50Tm9kZTpmdW5jdGlvbihBLEIsQyl7dmFyIEQ9e307aWYgKCFDLnBvcCkgQz1bQ107d2hpbGUgKEMubGVuZ3RoPjApIERbQy5wb3AoKS50b0xvd2VyQ2FzZSgpXT0xO3ZhciBFPXRoaXMuR2V0Q29tbW9uUGFyZW50cyhBLEIpO3ZhciBGPW51bGw7d2hpbGUgKChGPUUucG9wKCkpKXtpZiAoRFtGLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSByZXR1cm4gRjt9O3JldHVybiBudWxsO30sR2V0SW5kZXhPZjpmdW5jdGlvbihBKXt2YXIgQj1BLnBhcmVudE5vZGU/QS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ6bnVsbDt2YXIgQz0tMTt3aGlsZSAoQil7QysrO2lmIChCPT1BKSByZXR1cm4gQztCPUIubmV4dFNpYmxpbmc7fTtyZXR1cm4tMTt9LFBhZGRpbmdOb2RlOm51bGwsRW5mb3JjZVBhZGRpbmdOb2RlOmZ1bmN0aW9uKEEsQil7dHJ5e2lmICghQXx8IUEuYm9keSkgcmV0dXJuO31jYXRjaCAoZSl7cmV0dXJuO307dGhpcy5DaGVja0FuZFJlbW92ZVBhZGRpbmdOb2RlKEEsQix0cnVlKTt0cnl7aWYgKEEuYm9keS5sYXN0Q2hpbGQmJihBLmJvZHkubGFzdENoaWxkLm5vZGVUeXBlIT0xfHxBLmJvZHkubGFzdENoaWxkLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Qi50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuO31jYXRjaCAoZSl7cmV0dXJuO307dmFyIEM9QS5jcmVhdGVFbGVtZW50KEIpO2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvJiZGQ0tMaXN0c0xpYi5Ob25FbXB0eUJsb2NrRWxlbWVudHNbQl0pIEZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnIoQyk7dGhpcy5QYWRkaW5nTm9kZT1DO2lmIChBLmJvZHkuY2hpbGROb2Rlcy5sZW5ndGg9PTEmJkEuYm9keS5maXJzdENoaWxkLm5vZGVUeXBlPT0xJiZBLmJvZHkuZmlyc3RDaGlsZC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSdicicmJihBLmJvZHkuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoJ19tb3pfZGlydHknKSE9bnVsbHx8QS5ib2R5LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCd0eXBlJyk9PSdfbW96JykpIEEuYm9keS5yZXBsYWNlQ2hpbGQoQyxBLmJvZHkuZmlyc3RDaGlsZCk7ZWxzZSBBLmJvZHkuYXBwZW5kQ2hpbGQoQyk7fSxDaGVja0FuZFJlbW92ZVBhZGRpbmdOb2RlOmZ1bmN0aW9uKEEsQixDKXt2YXIgRD10aGlzLlBhZGRpbmdOb2RlO2lmICghRCkgcmV0dXJuO3RyeXtpZiAoRC5wYXJlbnROb2RlIT1BLmJvZHl8fEQudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT1CfHwoRC5jaGlsZE5vZGVzLmxlbmd0aD4xKXx8KEQuZmlyc3RDaGlsZCYmRC5maXJzdENoaWxkLm5vZGVWYWx1ZSE9J1x4YTAnJiZTdHJpbmcoRC5maXJzdENoaWxkLnRhZ05hbWUpLnRvTG93ZXJDYXNlKCkhPSdicicpKXt0aGlzLlBhZGRpbmdOb2RlPW51bGw7cmV0dXJuO319Y2F0Y2ggKGUpe3RoaXMuUGFkZGluZ05vZGU9bnVsbDtyZXR1cm47fTtpZiAoIUMpe2lmIChELnBhcmVudE5vZGUuY2hpbGROb2Rlcy5sZW5ndGg+MSkgRC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEQpO3RoaXMuUGFkZGluZ05vZGU9bnVsbDt9fSxIYXNBdHRyaWJ1dGU6ZnVuY3Rpb24oQSxCKXtpZiAoQS5oYXNBdHRyaWJ1dGUpIHJldHVybiBBLmhhc0F0dHJpYnV0ZShCKTtlbHNle3ZhciBDPUEuYXR0cmlidXRlc1tCXTtyZXR1cm4gKEMhPXVuZGVmaW5lZCYmQy5zcGVjaWZpZWQpO319LEhhc0F0dHJpYnV0ZXM6ZnVuY3Rpb24oQSl7dmFyIEI9QS5hdHRyaWJ1dGVzO2ZvciAodmFyIGk9MDtpPEIubGVuZ3RoO2krKyl7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpe3ZhciBDPUJbaV0ubm9kZU5hbWU7aWYgKEMuU3RhcnRzV2l0aCgnX2ZjaycpKXtjb250aW51ZTt9O2lmIChDPT0nY2xhc3MnKXtpZiAoQS5jbGFzc05hbWUubGVuZ3RoPjApIHJldHVybiB0cnVlO2NvbnRpbnVlO319O2lmIChCW2ldLnNwZWNpZmllZCkgcmV0dXJuIHRydWU7fTtyZXR1cm4gZmFsc2U7fSxSZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oQSxCKXtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSYmQi50b0xvd2VyQ2FzZSgpPT0nY2xhc3MnKSBCPSdjbGFzc05hbWUnO3JldHVybiBBLnJlbW92ZUF0dHJpYnV0ZShCLDApO30sUmVtb3ZlQXR0cmlidXRlczpmdW5jdGlvbiAoQSxCKXtmb3IgKHZhciBpPTA7aTxCLmxlbmd0aDtpKyspIHRoaXMuUmVtb3ZlQXR0cmlidXRlKEEsQltpXSk7fSxHZXRBdHRyaWJ1dGVWYWx1ZTpmdW5jdGlvbihBLEIpe3ZhciBDPUI7aWYgKHR5cGVvZiBCPT0nc3RyaW5nJykgQj1BLmF0dHJpYnV0ZXNbQl07ZWxzZSBDPUIubm9kZU5hbWU7aWYgKEImJkIuc3BlY2lmaWVkKXtpZiAoQz09J3N0eWxlJykgcmV0dXJuIEEuc3R5bGUuY3NzVGV4dDtlbHNlIGlmIChDPT0nY2xhc3MnfHxDLmluZGV4T2YoJ29uJyk9PTApIHJldHVybiBCLm5vZGVWYWx1ZTtlbHNle3JldHVybiBBLmdldEF0dHJpYnV0ZShDLDIpO319O3JldHVybiBudWxsO30sQ29udGFpbnM6ZnVuY3Rpb24oQSxCKXtpZiAoQS5jb250YWlucyYmQi5ub2RlVHlwZT09MSkgcmV0dXJuIEEuY29udGFpbnMoQik7d2hpbGUgKChCPUIucGFyZW50Tm9kZSkpe2lmIChCPT1BKSByZXR1cm4gdHJ1ZTt9O3JldHVybiBmYWxzZTt9LEJyZWFrUGFyZW50OmZ1bmN0aW9uKEEsQixDKXt2YXIgRD1DfHxuZXcgRkNLRG9tUmFuZ2UoRkNLVG9vbHMuR2V0RWxlbWVudFdpbmRvdyhBKSk7RC5TZXRTdGFydChBLDQpO0QuU2V0RW5kKEIsNCk7dmFyIEU9RC5FeHRyYWN0Q29udGVudHMoKTtELkluc2VydE5vZGUoQS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEEpKTtFLkluc2VydEFmdGVyTm9kZShBKTtELlJlbGVhc2UoISFDKTt9LEdldE5vZGVBZGRyZXNzOmZ1bmN0aW9uKEEsQil7dmFyIEM9W107d2hpbGUgKEEmJkEhPUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChBKS5kb2N1bWVudEVsZW1lbnQpe3ZhciBEPUEucGFyZW50Tm9kZTt2YXIgRT0tMTtmb3IodmFyIGk9MDtpPEQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgRj1ELmNoaWxkTm9kZXNbaV07aWYgKEI9PT10cnVlJiZGLm5vZGVUeXBlPT0zJiZGLnByZXZpb3VzU2libGluZyYmRi5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU9PTMpIGNvbnRpbnVlO0UrKztpZiAoRC5jaGlsZE5vZGVzW2ldPT1BKSBicmVhazt9O0MudW5zaGlmdChFKTtBPUEucGFyZW50Tm9kZTt9O3JldHVybiBDO30sR2V0Tm9kZUZyb21BZGRyZXNzOmZ1bmN0aW9uKEEsQixDKXt2YXIgRD1BLmRvY3VtZW50RWxlbWVudDtmb3IgKHZhciBpPTA7aTxCLmxlbmd0aDtpKyspe3ZhciBFPUJbaV07aWYgKCFDKXtEPUQuY2hpbGROb2Rlc1tFXTtjb250aW51ZTt9O3ZhciBGPS0xO2ZvciAodmFyIGo9MDtqPEQuY2hpbGROb2Rlcy5sZW5ndGg7aisrKXt2YXIgRz1ELmNoaWxkTm9kZXNbal07aWYgKEM9PT10cnVlJiZHLm5vZGVUeXBlPT0zJiZHLnByZXZpb3VzU2libGluZyYmRy5wcmV2aW91c1NpYmxpbmcubm9kZVR5cGU9PTMpIGNvbnRpbnVlO0YrKztpZiAoRj09RSl7RD1HO2JyZWFrO319fTtyZXR1cm4gRDt9LENsb25lRWxlbWVudDpmdW5jdGlvbihBKXtBPUEuY2xvbmVOb2RlKGZhbHNlKTtBLnJlbW92ZUF0dHJpYnV0ZSgnaWQnLGZhbHNlKTtyZXR1cm4gQTt9LENsZWFyRWxlbWVudEpTUHJvcGVydHk6ZnVuY3Rpb24oQSxCKXtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgQS5yZW1vdmVBdHRyaWJ1dGUoQik7ZWxzZSBkZWxldGUgQVtCXTt9LFNldEVsZW1lbnRNYXJrZXI6ZnVuY3Rpb24gKEEsQixDLEQpe3ZhciBFPVN0cmluZyhwYXJzZUludChNYXRoLnJhbmRvbSgpKjB4ZmZmZmZmZmYsMTApKTtCLl9GQ0tNYXJrZXJJZD1FO0JbQ109RDtpZiAoIUFbRV0pIEFbRV09eyAnZWxlbWVudCc6QiwnbWFya2Vycyc6e30gfTtBW0VdWydtYXJrZXJzJ11bQ109RDt9LENsZWFyRWxlbWVudE1hcmtlcnM6ZnVuY3Rpb24oQSxCLEMpe3ZhciBEPUIuX0ZDS01hcmtlcklkO2lmICghRCkgcmV0dXJuO3RoaXMuQ2xlYXJFbGVtZW50SlNQcm9wZXJ0eShCLCdfRkNLTWFya2VySWQnKTtmb3IgKHZhciBqIGluIEFbRF1bJ21hcmtlcnMnXSkgdGhpcy5DbGVhckVsZW1lbnRKU1Byb3BlcnR5KEIsaik7aWYgKEMpIGRlbGV0ZSBBW0RdO30sQ2xlYXJBbGxNYXJrZXJzOmZ1bmN0aW9uKEEpe2ZvciAodmFyIGkgaW4gQSkgdGhpcy5DbGVhckVsZW1lbnRNYXJrZXJzKEEsQVtpXVsnZWxlbWVudCddLHRydWUpO30sTGlzdFRvQXJyYXk6ZnVuY3Rpb24oQSxCLEMsRCxFKXtpZiAoIUEubm9kZU5hbWUuSUVxdWFscyhbJ3VsJywnb2wnXSkpIHJldHVybiBbXTtpZiAoIUQpIEQ9MDtpZiAoIUMpIEM9W107Zm9yICh2YXIgaT0wO2k8QS5jaGlsZE5vZGVzLmxlbmd0aDtpKyspe3ZhciBGPUEuY2hpbGROb2Rlc1tpXTtpZiAoIUYubm9kZU5hbWUuSUVxdWFscygnbGknKSkgY29udGludWU7dmFyIEc9eyAncGFyZW50JzpBLCdpbmRlbnQnOkQsJ2NvbnRlbnRzJzpbXSB9O2lmICghRSl7Ry5ncmFuZHBhcmVudD1BLnBhcmVudE5vZGU7aWYgKEcuZ3JhbmRwYXJlbnQmJkcuZ3JhbmRwYXJlbnQubm9kZU5hbWUuSUVxdWFscygnbGknKSkgRy5ncmFuZHBhcmVudD1HLmdyYW5kcGFyZW50LnBhcmVudE5vZGU7fWVsc2UgRy5ncmFuZHBhcmVudD1FO2lmIChCKSB0aGlzLlNldEVsZW1lbnRNYXJrZXIoQixGLCdfRkNLX0xpc3RBcnJheV9JbmRleCcsQy5sZW5ndGgpO0MucHVzaChHKTtmb3IgKHZhciBqPTA7ajxGLmNoaWxkTm9kZXMubGVuZ3RoO2orKyl7dmFyIEg9Ri5jaGlsZE5vZGVzW2pdO2lmIChILm5vZGVOYW1lLklFcXVhbHMoWyd1bCcsJ29sJ10pKSB0aGlzLkxpc3RUb0FycmF5KEgsQixDLEQrMSxHLmdyYW5kcGFyZW50KTtlbHNlIEcuY29udGVudHMucHVzaChIKTt9fTtyZXR1cm4gQzt9LEFycmF5VG9MaXN0OmZ1bmN0aW9uKEEsQixDKXtpZiAoQz09dW5kZWZpbmVkKSBDPTA7aWYgKCFBfHxBLmxlbmd0aDxDKzEpIHJldHVybiBudWxsO3ZhciBEPUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChBW0NdLnBhcmVudCk7dmFyIEU9RC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dmFyIEY9bnVsbDt2YXIgRz1DO3ZhciBIPU1hdGgubWF4KEFbQ10uaW5kZW50LDApO3ZhciBJPW51bGw7d2hpbGUgKHRydWUpe3ZhciBKPUFbR107aWYgKEouaW5kZW50PT1IKXtpZiAoIUZ8fEFbR10ucGFyZW50Lm5vZGVOYW1lIT1GLm5vZGVOYW1lKXtGPUFbR10ucGFyZW50LmNsb25lTm9kZShmYWxzZSk7RS5hcHBlbmRDaGlsZChGKTt9O0k9RC5jcmVhdGVFbGVtZW50KCdsaScpO0YuYXBwZW5kQ2hpbGQoSSk7Zm9yICh2YXIgaT0wO2k8Si5jb250ZW50cy5sZW5ndGg7aSsrKSBJLmFwcGVuZENoaWxkKEouY29udGVudHNbaV0uY2xvbmVOb2RlKHRydWUpKTtHKys7fWVsc2UgaWYgKEouaW5kZW50PT1NYXRoLm1heChILDApKzEpe3ZhciBLPXRoaXMuQXJyYXlUb0xpc3QoQSxudWxsLEcpO0kuYXBwZW5kQ2hpbGQoSy5saXN0Tm9kZSk7Rz1LLm5leHRJbmRleDt9ZWxzZSBpZiAoSi5pbmRlbnQ9PS0xJiZDPT0wJiZKLmdyYW5kcGFyZW50KXt2YXIgSTtpZiAoSi5ncmFuZHBhcmVudC5ub2RlTmFtZS5JRXF1YWxzKFsndWwnLCdvbCddKSkgST1ELmNyZWF0ZUVsZW1lbnQoJ2xpJyk7ZWxzZXtpZiAoRkNLQ29uZmlnLkVudGVyTW9kZS5JRXF1YWxzKFsnZGl2JywncCddKSYmIUouZ3JhbmRwYXJlbnQubm9kZU5hbWUuSUVxdWFscygndGQnKSkgST1ELmNyZWF0ZUVsZW1lbnQoRkNLQ29uZmlnLkVudGVyTW9kZSk7ZWxzZSBJPUQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO307Zm9yICh2YXIgaT0wO2k8Si5jb250ZW50cy5sZW5ndGg7aSsrKSBJLmFwcGVuZENoaWxkKEouY29udGVudHNbaV0uY2xvbmVOb2RlKHRydWUpKTtpZiAoSS5ub2RlVHlwZT09MTEpe2lmIChJLmxhc3RDaGlsZCYmSS5sYXN0Q2hpbGQuZ2V0QXR0cmlidXRlJiZJLmxhc3RDaGlsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKT09J19tb3onKSBJLnJlbW92ZUNoaWxkKEkubGFzdENoaWxkKTtJLmFwcGVuZENoaWxkKEQuY3JlYXRlRWxlbWVudCgnYnInKSk7fTtpZiAoSS5ub2RlTmFtZS5JRXF1YWxzKEZDS0NvbmZpZy5FbnRlck1vZGUpJiZJLmZpcnN0Q2hpbGQpe3RoaXMuVHJpbU5vZGUoSSk7aWYgKEZDS0xpc3RzTGliLkJsb2NrQm91bmRhcmllc1tJLmZpcnN0Q2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pe3ZhciBNPUQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3doaWxlIChJLmZpcnN0Q2hpbGQpIE0uYXBwZW5kQ2hpbGQoSS5yZW1vdmVDaGlsZChJLmZpcnN0Q2hpbGQpKTtJPU07fX07aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlJiZJLm5vZGVOYW1lLklFcXVhbHMoWydkaXYnLCdwJ10pKSBGQ0tUb29scy5BcHBlbmRCb2d1c0JyKEkpO0UuYXBwZW5kQ2hpbGQoSSk7Rj1udWxsO0crKzt9ZWxzZSByZXR1cm4gbnVsbDtpZiAoQS5sZW5ndGg8PUd8fE1hdGgubWF4KEFbR10uaW5kZW50LDApPEgpe2JyZWFrO319O2lmIChCKXt2YXIgTj1FLmZpcnN0Q2hpbGQ7d2hpbGUgKE4pe2lmIChOLm5vZGVUeXBlPT0xKSB0aGlzLkNsZWFyRWxlbWVudE1hcmtlcnMoQixOKTtOPXRoaXMuR2V0TmV4dFNvdXJjZU5vZGUoTik7fX07cmV0dXJuIHsgJ2xpc3ROb2RlJzpFLCduZXh0SW5kZXgnOkcgfTt9LEdldE5leHRTaWJsaW5nOmZ1bmN0aW9uKEEsQil7QT1BLm5leHRTaWJsaW5nO3doaWxlIChBJiYhQiYmQS5ub2RlVHlwZSE9MSYmKEEubm9kZVR5cGUhPTN8fEEubm9kZVZhbHVlLmxlbmd0aD09MCkpIEE9QS5uZXh0U2libGluZztyZXR1cm4gQTt9LEdldFByZXZpb3VzU2libGluZzpmdW5jdGlvbihBLEIpe0E9QS5wcmV2aW91c1NpYmxpbmc7d2hpbGUgKEEmJiFCJiZBLm5vZGVUeXBlIT0xJiYoQS5ub2RlVHlwZSE9M3x8QS5ub2RlVmFsdWUubGVuZ3RoPT0wKSkgQT1BLnByZXZpb3VzU2libGluZztyZXR1cm4gQTt9LENoZWNrSXNFbXB0eUVsZW1lbnQ6ZnVuY3Rpb24oQSxCKXt2YXIgQz1BLmZpcnN0Q2hpbGQ7dmFyIEQ7d2hpbGUgKEMpe2lmIChDLm5vZGVUeXBlPT0xKXtpZiAoRHx8IUZDS0xpc3RzTGliLklubGluZU5vbkVtcHR5RWxlbWVudHNbQy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkgcmV0dXJuIGZhbHNlO2lmICghQnx8QihDKT09PXRydWUpIEQ9Qzt9ZWxzZSBpZiAoQy5ub2RlVHlwZT09MyYmQy5ub2RlVmFsdWUubGVuZ3RoPjApIHJldHVybiBmYWxzZTtDPUMubmV4dFNpYmxpbmc7fTtyZXR1cm4gRD90aGlzLkNoZWNrSXNFbXB0eUVsZW1lbnQoRCxCKTp0cnVlO30sU2V0RWxlbWVudFN0eWxlczpmdW5jdGlvbihBLEIpe3ZhciBDPUEuc3R5bGU7Zm9yICh2YXIgRCBpbiBCKSBDW0RdPUJbRF07fSxTZXRPcGFjaXR5OmZ1bmN0aW9uKEEsQil7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpe0I9TWF0aC5yb3VuZChCKjEwMCk7QS5zdHlsZS5maWx0ZXI9KEI+MTAwPycnOidwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGEob3BhY2l0eT0nK0IrJyknKTt9ZWxzZSBBLnN0eWxlLm9wYWNpdHk9Qjt9LEdldEN1cnJlbnRFbGVtZW50U3R5bGU6ZnVuY3Rpb24oQSxCKXtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgcmV0dXJuIEEuY3VycmVudFN0eWxlW0JdO2Vsc2UgcmV0dXJuIEEub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKEEsJycpLmdldFByb3BlcnR5VmFsdWUoQik7fSxHZXRQb3NpdGlvbmVkQW5jZXN0b3I6ZnVuY3Rpb24oQSl7dmFyIEI9QTt3aGlsZSAoQiE9RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEIpLmRvY3VtZW50RWxlbWVudCl7aWYgKHRoaXMuR2V0Q3VycmVudEVsZW1lbnRTdHlsZShCLCdwb3NpdGlvbicpIT0nc3RhdGljJykgcmV0dXJuIEI7aWYgKEI9PUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChCKS5kb2N1bWVudEVsZW1lbnQmJmN1cnJlbnRXaW5kb3chPXcpIEI9Y3VycmVudFdpbmRvdy5mcmFtZUVsZW1lbnQ7ZWxzZSBCPUIucGFyZW50Tm9kZTt9O3JldHVybiBudWxsO30sU2Nyb2xsSW50b1ZpZXc6ZnVuY3Rpb24oQSxCKXt2YXIgQz1GQ0tUb29scy5HZXRFbGVtZW50V2luZG93KEEpO3ZhciBEPUZDS1Rvb2xzLkdldFZpZXdQYW5lU2l6ZShDKS5IZWlnaHQ7dmFyIEU9RCotMTtpZiAoQj09PWZhbHNlKXtFKz1BLm9mZnNldEhlaWdodHx8MDtFKz1wYXJzZUludCh0aGlzLkdldEN1cnJlbnRFbGVtZW50U3R5bGUoQSwnbWFyZ2luQm90dG9tJyl8fDAsMTApfHwwO307dmFyIEY9RkNLVG9vbHMuR2V0RG9jdW1lbnRQb3NpdGlvbihDLEEpO0UrPUYueTt2YXIgRz1GQ0tUb29scy5HZXRTY3JvbGxQb3NpdGlvbihDKS5ZO2lmIChFPjAmJihFPkd8fEU8Ry1EKSkgQy5zY3JvbGxUbygwLEUpO30sQ2hlY2tJc0VkaXRhYmxlOmZ1bmN0aW9uKEEpe3ZhciBCPUEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2YXIgQz1GQ0suRFREW0JdfHxGQ0suRFRELnNwYW47cmV0dXJuIChDWycjJ10mJiFGQ0tMaXN0c0xpYi5Ob25FZGl0YWJsZUVsZW1lbnRzW0JdKTt9LEdldFNlbGVjdGVkRGl2Q29udGFpbmVyczpmdW5jdGlvbigpe3ZhciBBPVtdO3ZhciBCPW5ldyBGQ0tEb21SYW5nZShGQ0suRWRpdG9yV2luZG93KTtCLk1vdmVUb1NlbGVjdGlvbigpO3ZhciBDPUIuR2V0VG91Y2hlZFN0YXJ0Tm9kZSgpO3ZhciBEPUIuR2V0VG91Y2hlZEVuZE5vZGUoKTt2YXIgRT1DO2lmIChDPT1EKXt3aGlsZSAoRC5ub2RlVHlwZT09MSYmRC5sYXN0Q2hpbGQpIEQ9RC5sYXN0Q2hpbGQ7RD1GQ0tEb21Ub29scy5HZXROZXh0U291cmNlTm9kZShEKTt9d2hpbGUgKEUmJkUhPUQpe2lmIChFLm5vZGVUeXBlIT0zfHwhL15bIFx0XG5dKiQvLnRlc3QoRS5ub2RlVmFsdWUpKXt2YXIgRj1uZXcgRkNLRWxlbWVudFBhdGgoRSk7dmFyIEc9Ri5CbG9ja0xpbWl0O2lmIChHJiZHLm5vZGVOYW1lLklFcXVhbHMoJ2RpdicpJiZBLkluZGV4T2YoRyk9PS0xKSBBLnB1c2goRyk7fTtFPUZDS0RvbVRvb2xzLkdldE5leHRTb3VyY2VOb2RlKEUpO307cmV0dXJuIEE7fX07CnZhciBGQ0tUb29scz17fTtGQ0tUb29scy5DcmVhdGVCb2d1c0JSPWZ1bmN0aW9uKEEpe3ZhciBCPUEuY3JlYXRlRWxlbWVudCgnYnInKTtCLnNldEF0dHJpYnV0ZSgndHlwZScsJ19tb3onKTtyZXR1cm4gQjt9O0ZDS1Rvb2xzLkZpeENzc1VybHM9ZnVuY3Rpb24oQSxCKXtpZiAoIUF8fEEubGVuZ3RoPT0wKSByZXR1cm4gQjtyZXR1cm4gQi5yZXBsYWNlKC91cmxccypcKChbXHMnIl0qKSguKj8pKFtccyInXSopXCkvZyxmdW5jdGlvbihtYXRjaCxvcGVuZXIscGF0aCxjbG9zZXIpe2lmICgvXlwvfF5cdz86Ly50ZXN0KHBhdGgpKSByZXR1cm4gbWF0Y2g7ZWxzZSByZXR1cm4gJ3VybCgnK29wZW5lcitBK3BhdGgrY2xvc2VyKycpJzt9KTt9O0ZDS1Rvb2xzLl9HZXRVcmxGaXhlZENzcz1mdW5jdGlvbihBLEIpe3ZhciBDPUEubWF0Y2goL14oW158XSspXHwoW1xzXFNdKikvKTtpZiAoQykgcmV0dXJuIEZDS1Rvb2xzLkZpeENzc1VybHMoQ1sxXSxDWzJdKTtlbHNlIHJldHVybiBBO307RkNLVG9vbHMuQXBwZW5kU3R5bGVTaGVldD1mdW5jdGlvbihBLEIpe2lmICghQikgcmV0dXJuIFtdO2lmICh0eXBlb2YoQik9PSdzdHJpbmcnKXtpZiAoL1tcXFwvXC5dW157fV0qJC8udGVzdChCKSl7cmV0dXJuIHRoaXMuQXBwZW5kU3R5bGVTaGVldChBLEIuc3BsaXQoJywnKSk7fWVsc2UgcmV0dXJuIFt0aGlzLkFwcGVuZFN0eWxlU3RyaW5nKEEsRkNLVG9vbHMuX0dldFVybEZpeGVkQ3NzKEIpKV07fWVsc2V7dmFyIEM9W107Zm9yICh2YXIgaT0wO2k8Qi5sZW5ndGg7aSsrKSBDLnB1c2godGhpcy5fQXBwZW5kU3R5bGVTaGVldChBLEJbaV0pKTtyZXR1cm4gQzt9fTtGQ0tUb29scy5HZXRTdHlsZUh0bWw9KGZ1bmN0aW9uKCl7dmFyIEE9ZnVuY3Rpb24oc3R5bGVEZWYsbWFya1RlbXApe2lmIChzdHlsZURlZi5sZW5ndGg9PTApIHJldHVybiAnJzt2YXIgQj1tYXJrVGVtcD8nIF9mY2t0ZW1wPSJ0cnVlIic6Jyc7cmV0dXJuICc8c3R5bGUgdHlwZT0idGV4dC9jc3MiJytCKyc+JytzdHlsZURlZisnPC9zdHlsZT4nO307dmFyIEM9ZnVuY3Rpb24oY3NzRmlsZVVybCxtYXJrVGVtcCl7aWYgKGNzc0ZpbGVVcmwubGVuZ3RoPT0wKSByZXR1cm4gJyc7dmFyIEI9bWFya1RlbXA/JyBfZmNrdGVtcD0idHJ1ZSInOicnO3JldHVybiAnPGxpbmsgaHJlZj0iJytjc3NGaWxlVXJsKyciIHR5cGU9InRleHQvY3NzIiByZWw9InN0eWxlc2hlZXQiICcrQisnLz4nO307cmV0dXJuIGZ1bmN0aW9uKGNzc0ZpbGVPckFycmF5T3JEZWYsbWFya1RlbXApe2lmICghY3NzRmlsZU9yQXJyYXlPckRlZikgcmV0dXJuICcnO2lmICh0eXBlb2YoY3NzRmlsZU9yQXJyYXlPckRlZik9PSdzdHJpbmcnKXtpZiAoL1tcXFwvXC5dW157fV0qJC8udGVzdChjc3NGaWxlT3JBcnJheU9yRGVmKSl7cmV0dXJuIHRoaXMuR2V0U3R5bGVIdG1sKGNzc0ZpbGVPckFycmF5T3JEZWYuc3BsaXQoJywnKSxtYXJrVGVtcCk7fWVsc2UgcmV0dXJuIEEodGhpcy5fR2V0VXJsRml4ZWRDc3MoY3NzRmlsZU9yQXJyYXlPckRlZiksbWFya1RlbXApO31lbHNle3ZhciBFPScnO2ZvciAodmFyIGk9MDtpPGNzc0ZpbGVPckFycmF5T3JEZWYubGVuZ3RoO2krKykgRSs9Qyhjc3NGaWxlT3JBcnJheU9yRGVmW2ldLG1hcmtUZW1wKTtyZXR1cm4gRTt9fX0pKCk7RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50PWZ1bmN0aW9uIChBKXtyZXR1cm4gQS5vd25lckRvY3VtZW50fHxBLmRvY3VtZW50O307RkNLVG9vbHMuR2V0RWxlbWVudFdpbmRvdz1mdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5HZXREb2N1bWVudFdpbmRvdyh0aGlzLkdldEVsZW1lbnREb2N1bWVudChBKSk7fTtGQ0tUb29scy5HZXREb2N1bWVudFdpbmRvdz1mdW5jdGlvbihBKXtpZiAoRkNLQnJvd3NlckluZm8uSXNTYWZhcmkmJiFBLnBhcmVudFdpbmRvdykgdGhpcy5GaXhEb2N1bWVudFBhcmVudFdpbmRvdyh3aW5kb3cudG9wKTtyZXR1cm4gQS5wYXJlbnRXaW5kb3d8fEEuZGVmYXVsdFZpZXc7fTtGQ0tUb29scy5GaXhEb2N1bWVudFBhcmVudFdpbmRvdz1mdW5jdGlvbihBKXtpZiAoQS5kb2N1bWVudCkgQS5kb2N1bWVudC5wYXJlbnRXaW5kb3c9QTtmb3IgKHZhciBpPTA7aTxBLmZyYW1lcy5sZW5ndGg7aSsrKSBGQ0tUb29scy5GaXhEb2N1bWVudFBhcmVudFdpbmRvdyhBLmZyYW1lc1tpXSk7fTtGQ0tUb29scy5IVE1MRW5jb2RlPWZ1bmN0aW9uKEEpe2lmICghQSkgcmV0dXJuICcnO0E9QS5yZXBsYWNlKC8mL2csJyZhbXA7Jyk7QT1BLnJlcGxhY2UoLzwvZywnJmx0OycpO0E9QS5yZXBsYWNlKC8+L2csJyZndDsnKTtyZXR1cm4gQTt9O0ZDS1Rvb2xzLkhUTUxEZWNvZGU9ZnVuY3Rpb24oQSl7aWYgKCFBKSByZXR1cm4gJyc7QT1BLnJlcGxhY2UoLyZndDsvZywnPicpO0E9QS5yZXBsYWNlKC8mbHQ7L2csJzwnKTtBPUEucmVwbGFjZSgvJmFtcDsvZywnJicpO3JldHVybiBBO307RkNLVG9vbHMuX1Byb2Nlc3NMaW5lQnJlYWtzRm9yUE1vZGU9ZnVuY3Rpb24oQSxCLEMsRCxFKXt2YXIgRj0wO3ZhciBHPSI8cD4iO3ZhciBIPSI8L3A+Ijt2YXIgST0iPGJyIC8+IjtpZiAoQyl7Rz0iPGxpPiI7SD0iPC9saT4iO0Y9MTt9d2hpbGUgKEQmJkQhPUEuRkNLLkVkaXRvckRvY3VtZW50LmJvZHkpe2lmIChELnRhZ05hbWUudG9Mb3dlckNhc2UoKT09J3AnKXtGPTE7YnJlYWs7fTtEPUQucGFyZW50Tm9kZTt9O2ZvciAodmFyIGk9MDtpPEIubGVuZ3RoO2krKyl7dmFyIGM9Qi5jaGFyQXQoaSk7aWYgKGM9PSdccicpIGNvbnRpbnVlO2lmIChjIT0nXG4nKXtFLnB1c2goYyk7Y29udGludWU7fTt2YXIgbj1CLmNoYXJBdChpKzEpO2lmIChuPT0nXHInKXtpKys7bj1CLmNoYXJBdChpKzEpO307aWYgKG49PSdcbicpe2krKztpZiAoRikgRS5wdXNoKEgpO0UucHVzaChHKTtGPTE7fWVsc2UgRS5wdXNoKEkpO319O0ZDS1Rvb2xzLl9Qcm9jZXNzTGluZUJyZWFrc0ZvckRpdk1vZGU9ZnVuY3Rpb24oQSxCLEMsRCxFKXt2YXIgRj0wO3ZhciBHPSI8ZGl2PiI7dmFyIEg9IjwvZGl2PiI7aWYgKEMpe0c9IjxsaT4iO0g9IjwvbGk+IjtGPTE7fXdoaWxlIChEJiZEIT1BLkZDSy5FZGl0b3JEb2N1bWVudC5ib2R5KXtpZiAoRC50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSdkaXYnKXtGPTE7YnJlYWs7fTtEPUQucGFyZW50Tm9kZTt9O2ZvciAodmFyIGk9MDtpPEIubGVuZ3RoO2krKyl7dmFyIGM9Qi5jaGFyQXQoaSk7aWYgKGM9PSdccicpIGNvbnRpbnVlO2lmIChjIT0nXG4nKXtFLnB1c2goYyk7Y29udGludWU7fTtpZiAoRil7aWYgKEVbRS5sZW5ndGgtMV09PUcpe0UucHVzaCgiJm5ic3A7Iik7fTtFLnB1c2goSCk7fTtFLnB1c2goRyk7Rj0xO307aWYgKEYpIEUucHVzaChIKTt9O0ZDS1Rvb2xzLl9Qcm9jZXNzTGluZUJyZWFrc0ZvckJyTW9kZT1mdW5jdGlvbihBLEIsQyxELEUpe3ZhciBGPTA7dmFyIEc9IjxiciAvPiI7dmFyIEg9IiI7aWYgKEMpe0c9IjxsaT4iO0g9IjwvbGk+IjtGPTE7fTtmb3IgKHZhciBpPTA7aTxCLmxlbmd0aDtpKyspe3ZhciBjPUIuY2hhckF0KGkpO2lmIChjPT0nXHInKSBjb250aW51ZTtpZiAoYyE9J1xuJyl7RS5wdXNoKGMpO2NvbnRpbnVlO307aWYgKEYmJkgubGVuZ3RoKSBFLnB1c2ggKEgpO0UucHVzaChHKTtGPTE7fX07RkNLVG9vbHMuUHJvY2Vzc0xpbmVCcmVha3M9ZnVuY3Rpb24oQSxCLEMpe3ZhciBEPUIuRW50ZXJNb2RlLnRvTG93ZXJDYXNlKCk7dmFyIEU9W107dmFyIEY9MDt2YXIgRz1uZXcgQS5GQ0tEb21SYW5nZShBLkZDSy5FZGl0b3JXaW5kb3cpO0cuTW92ZVRvU2VsZWN0aW9uKCk7dmFyIEg9Ry5fUmFuZ2Uuc3RhcnRDb250YWluZXI7d2hpbGUgKEgmJkgubm9kZVR5cGUhPTEpIEg9SC5wYXJlbnROb2RlO2lmIChIJiZILnRhZ05hbWUudG9Mb3dlckNhc2UoKT09J2xpJykgRj0xO2lmIChEPT0ncCcpIHRoaXMuX1Byb2Nlc3NMaW5lQnJlYWtzRm9yUE1vZGUoQSxDLEYsSCxFKTtlbHNlIGlmIChEPT0nZGl2JykgdGhpcy5fUHJvY2Vzc0xpbmVCcmVha3NGb3JEaXZNb2RlKEEsQyxGLEgsRSk7ZWxzZSBpZiAoRD09J2JyJykgdGhpcy5fUHJvY2Vzc0xpbmVCcmVha3NGb3JCck1vZGUoQSxDLEYsSCxFKTtyZXR1cm4gRS5qb2luKCIiKTt9O0ZDS1Rvb2xzLkFkZFNlbGVjdE9wdGlvbj1mdW5jdGlvbihBLEIsQyl7dmFyIEQ9RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEEpLmNyZWF0ZUVsZW1lbnQoIk9QVElPTiIpO0QudGV4dD1CO0QudmFsdWU9QztBLm9wdGlvbnMuYWRkKEQpO3JldHVybiBEO307RkNLVG9vbHMuUnVuRnVuY3Rpb249ZnVuY3Rpb24oQSxCLEMsRCl7aWYgKEEpIHRoaXMuU2V0VGltZW91dChBLDAsQixDLEQpO307RkNLVG9vbHMuU2V0VGltZW91dD1mdW5jdGlvbihBLEIsQyxELEUpe3JldHVybiAoRXx8d2luZG93KS5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYgKEQpIEEuYXBwbHkoQyxbXS5jb25jYXQoRCkpO2Vsc2UgQS5hcHBseShDKTt9LEIpO307RkNLVG9vbHMuU2V0SW50ZXJ2YWw9ZnVuY3Rpb24oQSxCLEMsRCxFKXtyZXR1cm4gKEV8fHdpbmRvdykuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtBLmFwcGx5KEMsRHx8W10pO30sQik7fTtGQ0tUb29scy5Db252ZXJ0U3R5bGVTaXplVG9IdG1sPWZ1bmN0aW9uKEEpe3JldHVybiBBLkVuZHNXaXRoKCclJyk/QTpwYXJzZUludChBLDEwKTt9O0ZDS1Rvb2xzLkNvbnZlcnRIdG1sU2l6ZVRvU3R5bGU9ZnVuY3Rpb24oQSl7cmV0dXJuIEEuRW5kc1dpdGgoJyUnKT9BOihBKydweCcpO307RkNLVG9vbHMuR2V0RWxlbWVudEFzY2Vuc29yPWZ1bmN0aW9uKEEsQil7dmFyIGU9QTt2YXIgQz0iLCIrQi50b1VwcGVyQ2FzZSgpKyIsIjt3aGlsZSAoZSl7aWYgKEMuaW5kZXhPZigiLCIrZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpKyIsIikhPS0xKSByZXR1cm4gZTtlPWUucGFyZW50Tm9kZTt9O3JldHVybiBudWxsO307RkNLVG9vbHMuQ3JlYXRlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihBLEIpe3ZhciBmPWZ1bmN0aW9uKCl7dmFyIEM9W107Zm9yICh2YXIgaT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspIEMucHVzaChhcmd1bWVudHNbaV0pO0EuYXBwbHkodGhpcyxDLmNvbmNhdChCKSk7fTtyZXR1cm4gZjt9O0ZDS1Rvb2xzLklzU3RyaWN0TW9kZT1mdW5jdGlvbihBKXtyZXR1cm4gKCdDU1MxQ29tcGF0Jz09KEEuY29tcGF0TW9kZXx8KEZDS0Jyb3dzZXJJbmZvLklzU2FmYXJpPydDU1MxQ29tcGF0JzpudWxsKSkpO307RkNLVG9vbHMuQXJndW1lbnRzVG9BcnJheT1mdW5jdGlvbihBLEIsQyl7Qj1CfHwwO0M9Q3x8QS5sZW5ndGg7dmFyIEQ9W107Zm9yICh2YXIgaT1CO2k8QitDJiZpPEEubGVuZ3RoO2krKykgRC5wdXNoKEFbaV0pO3JldHVybiBEO307RkNLVG9vbHMuQ2xvbmVPYmplY3Q9ZnVuY3Rpb24oQSl7dmFyIEI9ZnVuY3Rpb24oKSB7fTtCLnByb3RvdHlwZT1BO3JldHVybiBuZXcgQjt9O0ZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnI9ZnVuY3Rpb24oQSl7aWYgKCFBKSByZXR1cm47dmFyIEI9dGhpcy5HZXRMYXN0SXRlbShBLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdicicpKTtpZiAoIUJ8fChCLmdldEF0dHJpYnV0ZSgndHlwZScsMikhPSdfbW96JyYmQi5nZXRBdHRyaWJ1dGUoJ19tb3pfZGlydHknKT09bnVsbCkpe3ZhciBDPXRoaXMuR2V0RWxlbWVudERvY3VtZW50KEEpO2lmIChGQ0tCcm93c2VySW5mby5Jc09wZXJhKSBBLmFwcGVuZENoaWxkKEMuY3JlYXRlVGV4dE5vZGUoJycpKTtlbHNlIEEuYXBwZW5kQ2hpbGQodGhpcy5DcmVhdGVCb2d1c0JSKEMpKTt9fTtGQ0tUb29scy5HZXRMYXN0SXRlbT1mdW5jdGlvbihBKXtpZiAoQS5sZW5ndGg+MCkgcmV0dXJuIEFbQS5sZW5ndGgtMV07cmV0dXJuIG51bGw7fTtGQ0tUb29scy5HZXREb2N1bWVudFBvc2l0aW9uPWZ1bmN0aW9uKHcsQSl7dmFyIHg9MDt2YXIgeT0wO3ZhciBCPUE7dmFyIEM9bnVsbDt2YXIgRD1GQ0tUb29scy5HZXRFbGVtZW50V2luZG93KEIpO3doaWxlIChCJiYhKEQ9PXcmJihCPT13LmRvY3VtZW50LmJvZHl8fEI9PXcuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkpe3grPUIub2Zmc2V0TGVmdC1CLnNjcm9sbExlZnQ7eSs9Qi5vZmZzZXRUb3AtQi5zY3JvbGxUb3A7aWYgKCFGQ0tCcm93c2VySW5mby5Jc09wZXJhKXt2YXIgRT1DO3doaWxlIChFJiZFIT1CKXt4LT1FLnNjcm9sbExlZnQ7eS09RS5zY3JvbGxUb3A7RT1FLnBhcmVudE5vZGU7fX07Qz1CO2lmIChCLm9mZnNldFBhcmVudCkgQj1CLm9mZnNldFBhcmVudDtlbHNle2lmIChEIT13KXtCPUQuZnJhbWVFbGVtZW50O0M9bnVsbDtpZiAoQikgRD1CLmNvbnRlbnRXaW5kb3cucGFyZW50O31lbHNlIEI9bnVsbDt9fTtpZiAoRkNLRG9tVG9vbHMuR2V0Q3VycmVudEVsZW1lbnRTdHlsZSh3LmRvY3VtZW50LmJvZHksJ3Bvc2l0aW9uJykhPSdzdGF0aWMnfHwoRkNLQnJvd3NlckluZm8uSXNJRSYmRkNLRG9tVG9vbHMuR2V0UG9zaXRpb25lZEFuY2VzdG9yKEEpPT1udWxsKSl7eCs9dy5kb2N1bWVudC5ib2R5Lm9mZnNldExlZnQ7eSs9dy5kb2N1bWVudC5ib2R5Lm9mZnNldFRvcDt9O3JldHVybiB7ICJ4Ijp4LCJ5Ijp5IH07fTtGQ0tUb29scy5HZXRXaW5kb3dQb3NpdGlvbj1mdW5jdGlvbih3LEEpe3ZhciBCPXRoaXMuR2V0RG9jdW1lbnRQb3NpdGlvbih3LEEpO3ZhciBDPUZDS1Rvb2xzLkdldFNjcm9sbFBvc2l0aW9uKHcpO0IueC09Qy5YO0IueS09Qy5ZO3JldHVybiBCO307RkNLVG9vbHMuUHJvdGVjdEZvcm1TdHlsZXM9ZnVuY3Rpb24oQSl7aWYgKCFBfHxBLm5vZGVUeXBlIT0xfHxBLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9J2Zvcm0nKSByZXR1cm4gW107dmFyIEI9W107dmFyIEM9WydzdHlsZScsJ2NsYXNzTmFtZSddO2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIEQ9Q1tpXTtpZiAoQS5lbGVtZW50cy5uYW1lZEl0ZW0oRCkpe3ZhciBFPUEuZWxlbWVudHMubmFtZWRJdGVtKEQpO0IucHVzaChbRSxFLm5leHRTaWJsaW5nXSk7QS5yZW1vdmVDaGlsZChFKTt9fTtyZXR1cm4gQjt9O0ZDS1Rvb2xzLlJlc3RvcmVGb3JtU3R5bGVzPWZ1bmN0aW9uKEEsQil7aWYgKCFBfHxBLm5vZGVUeXBlIT0xfHxBLnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9J2Zvcm0nKSByZXR1cm47aWYgKEIubGVuZ3RoPjApe2ZvciAodmFyIGk9Qi5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIEM9QltpXVswXTt2YXIgRD1CW2ldWzFdO2lmIChEKSBBLmluc2VydEJlZm9yZShDLEQpO2Vsc2UgQS5hcHBlbmRDaGlsZChDKTt9fX07RkNLVG9vbHMuR2V0TmV4dE5vZGU9ZnVuY3Rpb24oQSxCKXtpZiAoQS5maXJzdENoaWxkKSByZXR1cm4gQS5maXJzdENoaWxkO2Vsc2UgaWYgKEEubmV4dFNpYmxpbmcpIHJldHVybiBBLm5leHRTaWJsaW5nO2Vsc2V7dmFyIEM9QS5wYXJlbnROb2RlO3doaWxlIChDKXtpZiAoQz09QikgcmV0dXJuIG51bGw7aWYgKEMubmV4dFNpYmxpbmcpIHJldHVybiBDLm5leHRTaWJsaW5nO2Vsc2UgQz1DLnBhcmVudE5vZGU7fX07cmV0dXJuIG51bGw7fTtGQ0tUb29scy5HZXROZXh0VGV4dE5vZGU9ZnVuY3Rpb24oQSxCLEMpe25vZGU9dGhpcy5HZXROZXh0Tm9kZShBLEIpO2lmIChDJiZub2RlJiZDKG5vZGUpKSByZXR1cm4gbnVsbDt3aGlsZSAobm9kZSYmbm9kZS5ub2RlVHlwZSE9Myl7bm9kZT10aGlzLkdldE5leHROb2RlKG5vZGUsQik7aWYgKEMmJm5vZGUmJkMobm9kZSkpIHJldHVybiBudWxsO307cmV0dXJuIG5vZGU7fTtGQ0tUb29scy5NZXJnZT1mdW5jdGlvbigpe3ZhciBBPWFyZ3VtZW50czt2YXIgbz1BWzBdO2ZvciAodmFyIGk9MTtpPEEubGVuZ3RoO2krKyl7dmFyIEI9QVtpXTtmb3IgKHZhciBwIGluIEIpIG9bcF09QltwXTt9O3JldHVybiBvO307RkNLVG9vbHMuSXNBcnJheT1mdW5jdGlvbihBKXtyZXR1cm4gKEEgaW5zdGFuY2VvZiBBcnJheSk7fTtGQ0tUb29scy5BcHBlbmRMZW5ndGhQcm9wZXJ0eT1mdW5jdGlvbihBLEIpe3ZhciBDPTA7Zm9yICh2YXIgbiBpbiBBKSBDKys7cmV0dXJuIEFbQnx8J2xlbmd0aCddPUM7fTtGQ0tUb29scy5Ob3JtYWxpemVDc3NUZXh0PWZ1bmN0aW9uKEEpe3ZhciBCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtCLnN0eWxlLmNzc1RleHQ9QTtyZXR1cm4gQi5zdHlsZS5jc3NUZXh0O307RkNLVG9vbHMuQmluZD1mdW5jdGlvbihBLEIpe3JldHVybiBmdW5jdGlvbigpeyByZXR1cm4gQi5hcHBseShBLGFyZ3VtZW50cyk7fTt9O0ZDS1Rvb2xzLkdldFZvaWRVcmw9ZnVuY3Rpb24oKXtpZiAoRkNLX0lTX0NVU1RPTV9ET01BSU4pIHJldHVybiAiamF2YXNjcmlwdDogdm9pZCggZnVuY3Rpb24oKXtkb2N1bWVudC5vcGVuKCk7ZG9jdW1lbnQud3JpdGUoJzxodG1sPjxoZWFkPjx0aXRsZT48L3RpdGxlPjwvaGVhZD48Ym9keT48L2JvZHk+PC9odG1sPicpO2RvY3VtZW50LmRvbWFpbiA9ICciK0ZDS19SVU5USU1FX0RPTUFJTisiJztkb2N1bWVudC5jbG9zZSgpO30oKSApIDsiO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXtpZiAoRkNLQnJvd3NlckluZm8uSXNJRTd8fCFGQ0tCcm93c2VySW5mby5Jc0lFNikgcmV0dXJuICIiO2Vsc2UgcmV0dXJuICJqYXZhc2NyaXB0OiAnJzsiO307cmV0dXJuICJqYXZhc2NyaXB0OiB2b2lkKDApOyI7fTtGQ0tUb29scy5SZXNldFN0eWxlcz1mdW5jdGlvbihBKXtBLnN0eWxlLmNzc1RleHQ9J21hcmdpbjowO3BhZGRpbmc6MDtib3JkZXI6MDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50O2JhY2tncm91bmQtaW1hZ2U6bm9uZTsnO307CkZDS1Rvb2xzLkNhbmNlbEV2ZW50PWZ1bmN0aW9uKGUpe3JldHVybiBmYWxzZTt9O0ZDS1Rvb2xzLl9BcHBlbmRTdHlsZVNoZWV0PWZ1bmN0aW9uKEEsQil7cmV0dXJuIEEuY3JlYXRlU3R5bGVTaGVldChCKS5vd25pbmdFbGVtZW50O307RkNLVG9vbHMuQXBwZW5kU3R5bGVTdHJpbmc9ZnVuY3Rpb24oQSxCKXtpZiAoIUIpIHJldHVybiBudWxsO3ZhciBzPUEuY3JlYXRlU3R5bGVTaGVldCgiIik7cy5jc3NUZXh0PUI7cmV0dXJuIHM7fTtGQ0tUb29scy5DbGVhckVsZW1lbnRBdHRyaWJ1dGVzPWZ1bmN0aW9uKEEpe0EuY2xlYXJBdHRyaWJ1dGVzKCk7fTtGQ0tUb29scy5HZXRBbGxDaGlsZHJlbklkcz1mdW5jdGlvbihBKXt2YXIgQj1bXTtmb3IgKHZhciBpPTA7aTxBLmFsbC5sZW5ndGg7aSsrKXt2YXIgQz1BLmFsbFtpXS5pZDtpZiAoQyYmQy5sZW5ndGg+MCkgQltCLmxlbmd0aF09Qzt9O3JldHVybiBCO307RkNLVG9vbHMuUmVtb3ZlT3V0ZXJUYWdzPWZ1bmN0aW9uKGUpe2UuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVCZWdpbicsZS5pbm5lckhUTUwpO2UucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTt9O0ZDS1Rvb2xzLkNyZWF0ZVhtbE9iamVjdD1mdW5jdGlvbihBKXt2YXIgQjtzd2l0Y2ggKEEpe2Nhc2UgJ1htbEh0dHAnOmlmIChkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCE9J2ZpbGU6JykgdHJ5IHsgcmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO30gY2F0Y2ggKGUpIHt9O0I9WydNU1hNTDIuWG1sSHR0cCcsJ01pY3Jvc29mdC5YbWxIdHRwJ107YnJlYWs7Y2FzZSAnRE9NRG9jdW1lbnQnOkI9WydNU1hNTDIuRE9NRG9jdW1lbnQnLCdNaWNyb3NvZnQuWG1sRG9tJ107YnJlYWs7fTtmb3IgKHZhciBpPTA7aTwyO2krKyl7dHJ5IHsgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KEJbaV0pO31jYXRjaCAoZSl7fX07aWYgKEZDS0xhbmcuTm9BY3RpdmVYKXthbGVydChGQ0tMYW5nLk5vQWN0aXZlWCk7RkNLTGFuZy5Ob0FjdGl2ZVg9bnVsbDt9O3JldHVybiBudWxsO307RkNLVG9vbHMuRGlzYWJsZVNlbGVjdGlvbj1mdW5jdGlvbihBKXtBLnVuc2VsZWN0YWJsZT0nb24nO3ZhciBlLGk9MDt3aGlsZSAoKGU9QS5hbGxbaSsrXSkpe3N3aXRjaCAoZS50YWdOYW1lKXtjYXNlICdJRlJBTUUnOmNhc2UgJ1RFWFRBUkVBJzpjYXNlICdJTlBVVCc6Y2FzZSAnU0VMRUNUJzpicmVhaztkZWZhdWx0OmUudW5zZWxlY3RhYmxlPSdvbic7fX19O0ZDS1Rvb2xzLkdldFNjcm9sbFBvc2l0aW9uPWZ1bmN0aW9uKEEpe3ZhciBCPUEuZG9jdW1lbnQ7dmFyIEM9eyBYOkIuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQsWTpCLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfTtpZiAoQy5YPjB8fEMuWT4wKSByZXR1cm4gQztyZXR1cm4geyBYOkIuYm9keS5zY3JvbGxMZWZ0LFk6Qi5ib2R5LnNjcm9sbFRvcCB9O307RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihBLEIsQyl7QS5hdHRhY2hFdmVudCgnb24nK0IsQyk7fTtGQ0tUb29scy5SZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKEEsQixDKXtBLmRldGFjaEV2ZW50KCdvbicrQixDKTt9O0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeD1mdW5jdGlvbihBLEIsQyxEKXt2YXIgbz17fTtvLlNvdXJjZT1BO28uUGFyYW1zPUR8fFtdO28uTGlzdGVuZXI9ZnVuY3Rpb24oZXYpe3JldHVybiBDLmFwcGx5KG8uU291cmNlLFtldl0uY29uY2F0KG8uUGFyYW1zKSk7fTtpZiAoRkNLLklFQ2xlYW51cCkgRkNLLklFQ2xlYW51cC5BZGRJdGVtKG51bGwsZnVuY3Rpb24oKSB7IG8uU291cmNlPW51bGw7by5QYXJhbXM9bnVsbDt9KTtBLmF0dGFjaEV2ZW50KCdvbicrQixvLkxpc3RlbmVyKTtBPW51bGw7RD1udWxsO307RkNLVG9vbHMuR2V0Vmlld1BhbmVTaXplPWZ1bmN0aW9uKEEpe3ZhciBCO3ZhciBDPUEuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O2lmIChDJiZDLmNsaWVudFdpZHRoKSBCPUM7ZWxzZSBCPUEuZG9jdW1lbnQuYm9keTtpZiAoQikgcmV0dXJuIHsgV2lkdGg6Qi5jbGllbnRXaWR0aCxIZWlnaHQ6Qi5jbGllbnRIZWlnaHQgfTtlbHNlIHJldHVybiB7IFdpZHRoOjAsSGVpZ2h0OjAgfTt9O0ZDS1Rvb2xzLlNhdmVTdHlsZXM9ZnVuY3Rpb24oQSl7dmFyIEI9RkNLVG9vbHMuUHJvdGVjdEZvcm1TdHlsZXMoQSk7dmFyIEM9e307aWYgKEEuY2xhc3NOYW1lLmxlbmd0aD4wKXtDLkNsYXNzPUEuY2xhc3NOYW1lO0EuY2xhc3NOYW1lPScnO307dmFyIEQ9QS5zdHlsZS5jc3NUZXh0O2lmIChELmxlbmd0aD4wKXtDLklubGluZT1EO0Euc3R5bGUuY3NzVGV4dD0nJzt9O0ZDS1Rvb2xzLlJlc3RvcmVGb3JtU3R5bGVzKEEsQik7cmV0dXJuIEM7fTtGQ0tUb29scy5SZXN0b3JlU3R5bGVzPWZ1bmN0aW9uKEEsQil7dmFyIEM9RkNLVG9vbHMuUHJvdGVjdEZvcm1TdHlsZXMoQSk7QS5jbGFzc05hbWU9Qi5DbGFzc3x8Jyc7QS5zdHlsZS5jc3NUZXh0PUIuSW5saW5lfHwnJztGQ0tUb29scy5SZXN0b3JlRm9ybVN0eWxlcyhBLEMpO307RkNLVG9vbHMuUmVnaXN0ZXJEb2xsYXJGdW5jdGlvbj1mdW5jdGlvbihBKXtBLiQ9QS5kb2N1bWVudC5nZXRFbGVtZW50QnlJZDt9O0ZDS1Rvb2xzLkFwcGVuZEVsZW1lbnQ9ZnVuY3Rpb24oQSxCKXtyZXR1cm4gQS5hcHBlbmRDaGlsZCh0aGlzLkdldEVsZW1lbnREb2N1bWVudChBKS5jcmVhdGVFbGVtZW50KEIpKTt9O0ZDS1Rvb2xzLlRvTG93ZXJDYXNlPWZ1bmN0aW9uKEEpe3JldHVybiBBLnRvTG93ZXJDYXNlKCk7fTsKdmFyIEZDS2VkaXRvckFQSTtmdW5jdGlvbiBJbml0aWFsaXplQVBJKCl7dmFyIEE9d2luZG93LnBhcmVudDtpZiAoIShGQ0tlZGl0b3JBUEk9QS5GQ0tlZGl0b3JBUEkpKXt2YXIgQj0nd2luZG93LkZDS2VkaXRvckFQSSA9IHtWZXJzaW9uIDogIjIuNi42IixWZXJzaW9uQnVpbGQgOiAiMjU0MjciLEluc3RhbmNlcyA6IHdpbmRvdy5GQ0tlZGl0b3JBUEkgJiYgd2luZG93LkZDS2VkaXRvckFQSS5JbnN0YW5jZXMgfHwge30sR2V0SW5zdGFuY2UgOiBmdW5jdGlvbiggbmFtZSApe3JldHVybiB0aGlzLkluc3RhbmNlc1sgbmFtZSBdO30sX0Zvcm1TdWJtaXQgOiBmdW5jdGlvbigpe2ZvciAoIHZhciBuYW1lIGluIEZDS2VkaXRvckFQSS5JbnN0YW5jZXMgKXt2YXIgb0VkaXRvciA9IEZDS2VkaXRvckFQSS5JbnN0YW5jZXNbIG5hbWUgXSA7aWYgKCBvRWRpdG9yLkdldFBhcmVudEZvcm0gJiYgb0VkaXRvci5HZXRQYXJlbnRGb3JtKCkgPT0gdGhpcyApb0VkaXRvci5VcGRhdGVMaW5rZWRGaWVsZCgpIDt9dGhpcy5fRkNLT3JpZ2luYWxTdWJtaXQoKSA7fSxfRnVuY3Rpb25RdWV1ZQk6IHdpbmRvdy5GQ0tlZGl0b3JBUEkgJiYgd2luZG93LkZDS2VkaXRvckFQSS5fRnVuY3Rpb25RdWV1ZSB8fCB7RnVuY3Rpb25zIDogbmV3IEFycmF5KCksSXNSdW5uaW5nIDogZmFsc2UsQWRkIDogZnVuY3Rpb24oIGYgKXt0aGlzLkZ1bmN0aW9ucy5wdXNoKCBmICk7aWYgKCAhdGhpcy5Jc1J1bm5pbmcgKXRoaXMuU3RhcnROZXh0KCk7fSxTdGFydE5leHQgOiBmdW5jdGlvbigpe3ZhciBhUXVldWUgPSB0aGlzLkZ1bmN0aW9ucyA7aWYgKCBhUXVldWUubGVuZ3RoID4gMCApe3RoaXMuSXNSdW5uaW5nID0gdHJ1ZTthUXVldWVbMF0uY2FsbCgpO31lbHNlIHRoaXMuSXNSdW5uaW5nID0gZmFsc2U7fSxSZW1vdmUgOiBmdW5jdGlvbiggZiApe3ZhciBhUXVldWUgPSB0aGlzLkZ1bmN0aW9uczt2YXIgaSA9IDAsIGZGdW5jO3doaWxlKCAoZkZ1bmMgPSBhUXVldWVbIGkgXSkgKXtpZiAoIGZGdW5jID09IGYgKWFRdWV1ZS5zcGxpY2UoIGksMSApO2krKyA7fXRoaXMuU3RhcnROZXh0KCk7fX19JztpZiAoQS5leGVjU2NyaXB0KSBBLmV4ZWNTY3JpcHQoQiwnSmF2YVNjcmlwdCcpO2Vsc2V7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja28xMCl7ZXZhbC5jYWxsKEEsQik7fWVsc2UgaWYoRkNLQnJvd3NlckluZm8uSXNBSVIpe0ZDS0Fkb2JlQUlSLkZDS2VkaXRvckFQSV9FdmFsdWF0ZShBLEIpO31lbHNlIGlmIChGQ0tCcm93c2VySW5mby5Jc1NhZmFyaSl7dmFyIEM9QS5kb2N1bWVudDt2YXIgRD1DLmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO0QuYXBwZW5kQ2hpbGQoQy5jcmVhdGVUZXh0Tm9kZShCKSk7Qy5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoRCk7fWVsc2UgQS5ldmFsKEIpO307RkNLZWRpdG9yQVBJPUEuRkNLZWRpdG9yQVBJO0ZDS2VkaXRvckFQSS5fX0luc3RhbmNlcz1GQ0tlZGl0b3JBUEkuSW5zdGFuY2VzO307RkNLZWRpdG9yQVBJLkluc3RhbmNlc1tGQ0suTmFtZV09RkNLO307ZnVuY3Rpb24gX0F0dGFjaEZvcm1TdWJtaXRUb0FQSSgpe3ZhciBBPUZDSy5HZXRQYXJlbnRGb3JtKCk7aWYgKEEpe0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXIoQSwnc3VibWl0JyxGQ0suVXBkYXRlTGlua2VkRmllbGQpO2lmICghQS5fRkNLT3JpZ2luYWxTdWJtaXQmJih0eXBlb2YoQS5zdWJtaXQpPT0nZnVuY3Rpb24nfHwoIUEuc3VibWl0LnRhZ05hbWUmJiFBLnN1Ym1pdC5sZW5ndGgpKSl7QS5fRkNLT3JpZ2luYWxTdWJtaXQ9QS5zdWJtaXQ7QS5zdWJtaXQ9RkNLZWRpdG9yQVBJLl9Gb3JtU3VibWl0O319fTtmdW5jdGlvbiBGQ0tlZGl0b3JBUElfQ2xlYW51cCgpe2lmICh3aW5kb3cuRkNLQ29uZmlnJiZGQ0tDb25maWcuTXNXZWJCcm93c2VyQ29udHJvbENvbXBhdCYmIXdpbmRvdy5GQ0tVbmxvYWRGbGFnKSByZXR1cm47ZGVsZXRlIEZDS2VkaXRvckFQSS5JbnN0YW5jZXNbRkNLLk5hbWVdO307ZnVuY3Rpb24gRkNLZWRpdG9yQVBJX0NvbmZpcm1DbGVhbnVwKCl7aWYgKHdpbmRvdy5GQ0tDb25maWcmJkZDS0NvbmZpZy5Nc1dlYkJyb3dzZXJDb250cm9sQ29tcGF0KSB3aW5kb3cuRkNLVW5sb2FkRmxhZz10cnVlO307RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csJ3VubG9hZCcsRkNLZWRpdG9yQVBJX0NsZWFudXApO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXIod2luZG93LCdiZWZvcmV1bmxvYWQnLEZDS2VkaXRvckFQSV9Db25maXJtQ2xlYW51cCk7CnZhciBGQ0tJbWFnZVByZWxvYWRlcj1mdW5jdGlvbigpe3RoaXMuX0ltYWdlcz1bXTt9O0ZDS0ltYWdlUHJlbG9hZGVyLnByb3RvdHlwZT17QWRkSW1hZ2VzOmZ1bmN0aW9uKEEpe2lmICh0eXBlb2YoQSk9PSdzdHJpbmcnKSBBPUEuc3BsaXQoJzsnKTt0aGlzLl9JbWFnZXM9dGhpcy5fSW1hZ2VzLmNvbmNhdChBKTt9LFN0YXJ0OmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5fSW1hZ2VzO3RoaXMuX1ByZWxvYWRDb3VudD1BLmxlbmd0aDtmb3IgKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe3ZhciBCPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChCLCdsb2FkJyxfRkNLSW1hZ2VQcmVsb2FkZXJfT25JbWFnZSx0aGlzKTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQiwnZXJyb3InLF9GQ0tJbWFnZVByZWxvYWRlcl9PbkltYWdlLHRoaXMpO0Iuc3JjPUFbaV07X0ZDS0ltYWdlUHJlbG9hZGVyX0ltYWdlQ2FjaGUucHVzaChCKTt9fX07dmFyIF9GQ0tJbWFnZVByZWxvYWRlcl9JbWFnZUNhY2hlPVtdO2Z1bmN0aW9uIF9GQ0tJbWFnZVByZWxvYWRlcl9PbkltYWdlKEEsQil7aWYgKCgtLUIuX1ByZWxvYWRDb3VudCk9PTAmJkIuT25Db21wbGV0ZSkgQi5PbkNvbXBsZXRlKCk7fTsKdmFyIEZDS1JlZ2V4TGliPXtBcG9zRW50aXR5Oi8mYXBvczsvZ2ksT2JqZWN0RWxlbWVudHM6L14oPzpJTUd8VEFCTEV8VFJ8VER8VEh8SU5QVVR8U0VMRUNUfFRFWFRBUkVBfEhSfE9CSkVDVHxBfFVMfE9MfExJKSQvaSxOYW1lZENvbW1hbmRzOi9eKD86Q3V0fENvcHl8UGFzdGV8UHJpbnR8U2VsZWN0QWxsfFJlbW92ZUZvcm1hdHxVbmxpbmt8VW5kb3xSZWRvfEJvbGR8SXRhbGljfFVuZGVybGluZXxTdHJpa2VUaHJvdWdofFN1YnNjcmlwdHxTdXBlcnNjcmlwdHxKdXN0aWZ5TGVmdHxKdXN0aWZ5Q2VudGVyfEp1c3RpZnlSaWdodHxKdXN0aWZ5RnVsbHxPdXRkZW50fEluZGVudHxJbnNlcnRPcmRlcmVkTGlzdHxJbnNlcnRVbm9yZGVyZWRMaXN0fEluc2VydEhvcml6b250YWxSdWxlKSQvaSxCZWZvcmVCb2R5Oi8oXltcc1xTXSpcPGJvZHlbXlw+XSpcPikvaSxBZnRlckJvZHk6LyhcPFwvYm9keVw+W1xzXFNdKiQpL2ksVG9SZXBsYWNlOi9fX19mY2t0b3JlcGxhY2U6KFtcd10rKS9pZyxNZXRhSHR0cEVxdWl2Oi9odHRwLWVxdWl2XHMqPVxzKlsiJ10/KFteIicgXSspL2ksSGFzQmFzZVRhZzovPGJhc2UgL2ksSGFzQm9keVRhZzovPGJvZHlbXHN8Pl0vaSxIdG1sT3BlbmVyOi88aHRtbFxzP1tePl0qPi9pLEhlYWRPcGVuZXI6LzxoZWFkXHM/W14+XSo+L2ksSGVhZENsb3NlcjovPFwvaGVhZFxzKj4vaSxGQ0tfQ2xhc3M6L1xzKkZDS19fW14gXSooPz1ccyt8JCkvLEVsZW1lbnROYW1lOi8oXlthLXpfOl1bXHcuXC06XSpcdyQpfCheW2Etel9dJCkvLEZvcmNlU2ltcGxlQW1wZXJzYW5kOi9fX19GQ0tBbXBfX18vZyxTcGFjZU5vQ2xvc2U6L1wvPi9nLEVtcHR5UGFyYWdyYXBoOi9ePChwfGRpdnxhZGRyZXNzfGhcZHxjZW50ZXIpKD89WyA+XSlbXj5dKj5ccyooPFwvXDE+KT8kLyxFbXB0eU91dFBhcmFncmFwaDovXjwocHxkaXZ8YWRkcmVzc3xoXGR8Y2VudGVyKSg/PVsgPl0pW14+XSo+KD86XHMqfCZuYnNwO3wmIzE2MDspKDxcL1wxPik/JC8sVGFnQm9keTovPjwvLEdlY2tvRW50aXRpZXNNYXJrZXI6LyNcPy1cOi9nLFByb3RlY3RVcmxzSW1nOi88aW1nKD89XHMpLio/XHNzcmM9KCg/Oig/OlxzKikoInwnKS4qP1wyKXwoPzpbXiInXVteID5dKykpL2dpLFByb3RlY3RVcmxzQTovPGEoPz1ccykuKj9cc2hyZWY9KCg/Oig/OlxzKikoInwnKS4qP1wyKXwoPzpbXiInXVteID5dKykpL2dpLFByb3RlY3RVcmxzQXJlYTovPGFyZWEoPz1ccykuKj9cc2hyZWY9KCg/Oig/OlxzKikoInwnKS4qP1wyKXwoPzpbXiInXVteID5dKykpL2dpLEh0bWw0RG9jVHlwZTovSFRNTCA0XC4wIFRyYW5zaXRpb25hbC9pLERvY1R5cGVUYWc6LzwhRE9DVFlQRVtePl0qPi9pLEh0bWxEb2NUeXBlOi9EVEQgSFRNTC8sVGFnc1dpdGhFdmVudDovPFteXD5dKyBvblx3K1tcc1xyXG5dKj1bXHNcclxuXSo/KCd8IilbXHNcU10rP1w+L2csRXZlbnRBdHRyaWJ1dGVzOi9ccyhvblx3KylbXHNcclxuXSo9W1xzXHJcbl0qPygnfCIpKFtcc1xTXSo/KVwyL2csUHJvdGVjdGVkRXZlbnRzOi9cc1x3K19mY2twcm90ZWN0ZWRhdHQ9IihbXiJdKykiL2csU3R5bGVQcm9wZXJ0aWVzOi9cUytccyo6L2csSW52YWxpZFNlbGZDbG9zZVRhZ3M6Lyg8KD8hYmFzZXxtZXRhfGxpbmt8aHJ8YnJ8cGFyYW18aW1nfGFyZWF8aW5wdXQpKFthLXpBLVowLTk6XSspW14+XSopXC8+L2dpLFN0eWxlVmFyaWFibGVBdHROYW1lOi8jXChccyooInwnKSguKz8pXDFbXlwpXSpccypcKS9nLFJlZ0V4cDovXlwvKC4qKVwvKFtnaW1dKikkLyxIdG1sVGFnOi88W15cczw+XSg/OiJbXiJdKiJ8J1teJ10qJ3xbXjxdKSo+L307CnZhciBGQ0tMaXN0c0xpYj17QmxvY2tFbGVtZW50czp7IGFkZHJlc3M6MSxibG9ja3F1b3RlOjEsY2VudGVyOjEsZGl2OjEsZGw6MSxmaWVsZHNldDoxLGZvcm06MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MSxocjoxLG1hcnF1ZWU6MSxub3NjcmlwdDoxLG9sOjEscDoxLHByZToxLHNjcmlwdDoxLHRhYmxlOjEsdWw6MSB9LE5vbkVtcHR5QmxvY2tFbGVtZW50czp7IHA6MSxkaXY6MSxmb3JtOjEsaDE6MSxoMjoxLGgzOjEsaDQ6MSxoNToxLGg2OjEsYWRkcmVzczoxLHByZToxLG9sOjEsdWw6MSxsaToxLHRkOjEsdGg6MSB9LElubGluZUNoaWxkUmVxRWxlbWVudHM6eyBhYmJyOjEsYWNyb255bToxLGI6MSxiZG86MSxiaWc6MSxjaXRlOjEsY29kZToxLGRlbDoxLGRmbjoxLGVtOjEsZm9udDoxLGk6MSxpbnM6MSxsYWJlbDoxLGtiZDoxLHE6MSxzYW1wOjEsc21hbGw6MSxzcGFuOjEsc3RyaWtlOjEsc3Ryb25nOjEsc3ViOjEsc3VwOjEsdHQ6MSx1OjEsJ3Zhcic6MSB9LElubGluZU5vbkVtcHR5RWxlbWVudHM6eyBhOjEsYWJicjoxLGFjcm9ueW06MSxiOjEsYmRvOjEsYmlnOjEsY2l0ZToxLGNvZGU6MSxkZWw6MSxkZm46MSxlbToxLGZvbnQ6MSxpOjEsaW5zOjEsbGFiZWw6MSxrYmQ6MSxxOjEsc2FtcDoxLHNtYWxsOjEsc3BhbjoxLHN0cmlrZToxLHN0cm9uZzoxLHN1YjoxLHN1cDoxLHR0OjEsdToxLCd2YXInOjEgfSxFbXB0eUVsZW1lbnRzOnsgYmFzZToxLGNvbDoxLG1ldGE6MSxsaW5rOjEsaHI6MSxicjoxLHBhcmFtOjEsaW1nOjEsYXJlYToxLGlucHV0OjEgfSxQYXRoQmxvY2tFbGVtZW50czp7IGFkZHJlc3M6MSxibG9ja3F1b3RlOjEsZGw6MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MSxwOjEscHJlOjEsbGk6MSxkdDoxLGRlOjEgfSxQYXRoQmxvY2tMaW1pdEVsZW1lbnRzOnsgYm9keToxLGRpdjoxLHRkOjEsdGg6MSxjYXB0aW9uOjEsZm9ybToxIH0sU3R5bGVCbG9ja0VsZW1lbnRzOnsgYWRkcmVzczoxLGRpdjoxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxLHA6MSxwcmU6MSB9LFN0eWxlT2JqZWN0RWxlbWVudHM6eyBpbWc6MSxocjoxLGxpOjEsdGFibGU6MSx0cjoxLHRkOjEsZW1iZWQ6MSxvYmplY3Q6MSxvbDoxLHVsOjEgfSxOb25FZGl0YWJsZUVsZW1lbnRzOnsgYnV0dG9uOjEsb3B0aW9uOjEsc2NyaXB0OjEsaWZyYW1lOjEsdGV4dGFyZWE6MSxvYmplY3Q6MSxlbWJlZDoxLG1hcDoxLGFwcGxldDoxIH0sQmxvY2tCb3VuZGFyaWVzOnsgcDoxLGRpdjoxLGgxOjEsaDI6MSxoMzoxLGg0OjEsaDU6MSxoNjoxLGhyOjEsYWRkcmVzczoxLHByZToxLG9sOjEsdWw6MSxsaToxLGR0OjEsZGU6MSx0YWJsZToxLHRoZWFkOjEsdGJvZHk6MSx0Zm9vdDoxLHRyOjEsdGg6MSx0ZDoxLGNhcHRpb246MSxjb2w6MSxjb2xncm91cDoxLGJsb2NrcXVvdGU6MSxib2R5OjEgfSxMaXN0Qm91bmRhcmllczp7IHA6MSxkaXY6MSxoMToxLGgyOjEsaDM6MSxoNDoxLGg1OjEsaDY6MSxocjoxLGFkZHJlc3M6MSxwcmU6MSxvbDoxLHVsOjEsbGk6MSxkdDoxLGRlOjEsdGFibGU6MSx0aGVhZDoxLHRib2R5OjEsdGZvb3Q6MSx0cjoxLHRoOjEsdGQ6MSxjYXB0aW9uOjEsY29sOjEsY29sZ3JvdXA6MSxibG9ja3F1b3RlOjEsYm9keToxLGJyOjEgfX07CnZhciBGQ0tMYW5ndWFnZU1hbmFnZXI9RkNLLkxhbmd1YWdlPXtBdmFpbGFibGVMYW5ndWFnZXM6e2FmOidBZnJpa2FhbnMnLGFyOidBcmFiaWMnLGJnOidCdWxnYXJpYW4nLGJuOidCZW5nYWxpL0JhbmdsYScsYnM6J0Jvc25pYW4nLGNhOidDYXRhbGFuJyxjczonQ3plY2gnLGRhOidEYW5pc2gnLGRlOidHZXJtYW4nLGVsOidHcmVlaycsZW46J0VuZ2xpc2gnLCdlbi1hdSc6J0VuZ2xpc2ggKEF1c3RyYWxpYSknLCdlbi1jYSc6J0VuZ2xpc2ggKENhbmFkaWFuKScsJ2VuLXVrJzonRW5nbGlzaCAoVW5pdGVkIEtpbmdkb20pJyxlbzonRXNwZXJhbnRvJyxlczonU3BhbmlzaCcsZXQ6J0VzdG9uaWFuJyxldTonQmFzcXVlJyxmYTonUGVyc2lhbicsZmk6J0Zpbm5pc2gnLGZvOidGYXJvZXNlJyxmcjonRnJlbmNoJywnZnItY2EnOidGcmVuY2ggKENhbmFkYSknLGdsOidHYWxpY2lhbicsZ3U6J0d1amFyYXRpJyxoZTonSGVicmV3JyxoaTonSGluZGknLGhyOidDcm9hdGlhbicsaHU6J0h1bmdhcmlhbicsaXM6J0ljZWxhbmRpYycsaXQ6J0l0YWxpYW4nLGphOidKYXBhbmVzZScsa206J0tobWVyJyxrbzonS29yZWFuJyxsdDonTGl0aHVhbmlhbicsbHY6J0xhdHZpYW4nLG1uOidNb25nb2xpYW4nLG1zOidNYWxheScsbmI6J05vcndlZ2lhbiBCb2ttYWwnLG5sOidEdXRjaCcsbm86J05vcndlZ2lhbicscGw6J1BvbGlzaCcscHQ6J1BvcnR1Z3Vlc2UgKFBvcnR1Z2FsKScsJ3B0LWJyJzonUG9ydHVndWVzZSAoQnJhemlsKScscm86J1JvbWFuaWFuJyxydTonUnVzc2lhbicsc2s6J1Nsb3Zhaycsc2w6J1Nsb3Zlbmlhbicsc3I6J1NlcmJpYW4gKEN5cmlsbGljKScsJ3NyLWxhdG4nOidTZXJiaWFuIChMYXRpbiknLHN2OidTd2VkaXNoJyx0aDonVGhhaScsdHI6J1R1cmtpc2gnLHVrOidVa3JhaW5pYW4nLHZpOidWaWV0bmFtZXNlJyx6aDonQ2hpbmVzZSBUcmFkaXRpb25hbCcsJ3poLWNuJzonQ2hpbmVzZSBTaW1wbGlmaWVkJ30sR2V0QWN0aXZlTGFuZ3VhZ2U6ZnVuY3Rpb24oKXtpZiAoRkNLQ29uZmlnLkF1dG9EZXRlY3RMYW5ndWFnZSl7dmFyIEE7aWYgKG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UpIEE9bmF2aWdhdG9yLnVzZXJMYW5ndWFnZS50b0xvd2VyQ2FzZSgpO2Vsc2UgaWYgKG5hdmlnYXRvci5sYW5ndWFnZSkgQT1uYXZpZ2F0b3IubGFuZ3VhZ2UudG9Mb3dlckNhc2UoKTtlbHNle3JldHVybiBGQ0tDb25maWcuRGVmYXVsdExhbmd1YWdlO307aWYgKEEubGVuZ3RoPj01KXtBPUEuc3Vic3RyKDAsNSk7aWYgKHRoaXMuQXZhaWxhYmxlTGFuZ3VhZ2VzW0FdKSByZXR1cm4gQTt9O2lmIChBLmxlbmd0aD49Mil7QT1BLnN1YnN0cigwLDIpO2lmICh0aGlzLkF2YWlsYWJsZUxhbmd1YWdlc1tBXSkgcmV0dXJuIEE7fX07cmV0dXJuIHRoaXMuRGVmYXVsdExhbmd1YWdlO30sVHJhbnNsYXRlRWxlbWVudHM6ZnVuY3Rpb24oQSxCLEMsRCl7dmFyIGU9QS5nZXRFbGVtZW50c0J5VGFnTmFtZShCKTt2YXIgRSxzO2ZvciAodmFyIGk9MDtpPGUubGVuZ3RoO2krKyl7aWYgKChFPWVbaV0uZ2V0QXR0cmlidXRlKCdmY2tMYW5nJykpKXtpZiAoKHM9RkNLTGFuZ1tFXSkpe2lmIChEKSBzPUZDS1Rvb2xzLkhUTUxFbmNvZGUocyk7ZVtpXVtDXT1zO319fX0sVHJhbnNsYXRlUGFnZTpmdW5jdGlvbihBKXt0aGlzLlRyYW5zbGF0ZUVsZW1lbnRzKEEsJ0lOUFVUJywndmFsdWUnKTt0aGlzLlRyYW5zbGF0ZUVsZW1lbnRzKEEsJ1NQQU4nLCdpbm5lckhUTUwnKTt0aGlzLlRyYW5zbGF0ZUVsZW1lbnRzKEEsJ0xBQkVMJywnaW5uZXJIVE1MJyk7dGhpcy5UcmFuc2xhdGVFbGVtZW50cyhBLCdPUFRJT04nLCdpbm5lckhUTUwnLHRydWUpO3RoaXMuVHJhbnNsYXRlRWxlbWVudHMoQSwnTEVHRU5EJywnaW5uZXJIVE1MJyk7fSxJbml0aWFsaXplOmZ1bmN0aW9uKCl7aWYgKHRoaXMuQXZhaWxhYmxlTGFuZ3VhZ2VzW0ZDS0NvbmZpZy5EZWZhdWx0TGFuZ3VhZ2VdKSB0aGlzLkRlZmF1bHRMYW5ndWFnZT1GQ0tDb25maWcuRGVmYXVsdExhbmd1YWdlO2Vsc2UgdGhpcy5EZWZhdWx0TGFuZ3VhZ2U9J2VuJzt0aGlzLkFjdGl2ZUxhbmd1YWdlPXt9O3RoaXMuQWN0aXZlTGFuZ3VhZ2UuQ29kZT10aGlzLkdldEFjdGl2ZUxhbmd1YWdlKCk7dGhpcy5BY3RpdmVMYW5ndWFnZS5OYW1lPXRoaXMuQXZhaWxhYmxlTGFuZ3VhZ2VzW3RoaXMuQWN0aXZlTGFuZ3VhZ2UuQ29kZV07fX07CnZhciBGQ0tYSHRtbEVudGl0aWVzPXt9O0ZDS1hIdG1sRW50aXRpZXMuSW5pdGlhbGl6ZT1mdW5jdGlvbigpe2lmIChGQ0tYSHRtbEVudGl0aWVzLkVudGl0aWVzKSByZXR1cm47dmFyIEE9Jyc7dmFyIEIsZTtpZiAoRkNLQ29uZmlnLlByb2Nlc3NIVE1MRW50aXRpZXMpe0ZDS1hIdG1sRW50aXRpZXMuRW50aXRpZXM9eyfCoCc6J25ic3AnLCfCoSc6J2lleGNsJywnwqInOidjZW50JywnwqMnOidwb3VuZCcsJ8KkJzonY3VycmVuJywnwqUnOid5ZW4nLCfCpic6J2JydmJhcicsJ8KnJzonc2VjdCcsJ8KoJzondW1sJywnwqknOidjb3B5JywnwqonOidvcmRmJywnwqsnOidsYXF1bycsJ8KsJzonbm90Jywnwq0nOidzaHknLCfCric6J3JlZycsJ8KvJzonbWFjcicsJ8KwJzonZGVnJywnwrEnOidwbHVzbW4nLCfCsic6J3N1cDInLCfCsyc6J3N1cDMnLCfCtCc6J2FjdXRlJywnwrUnOidtaWNybycsJ8K2JzoncGFyYScsJ8K3JzonbWlkZG90JywnwrgnOidjZWRpbCcsJ8K5Jzonc3VwMScsJ8K6Jzonb3JkbScsJ8K7JzoncmFxdW8nLCfCvCc6J2ZyYWMxNCcsJ8K9JzonZnJhYzEyJywnwr4nOidmcmFjMzQnLCfCvyc6J2lxdWVzdCcsJ8OXJzondGltZXMnLCfDtyc6J2RpdmlkZScsJ8aSJzonZm5vZicsJ+KAoic6J2J1bGwnLCfigKYnOidoZWxsaXAnLCfigLInOidwcmltZScsJ+KAsyc6J1ByaW1lJywn4oC+Jzonb2xpbmUnLCfigYQnOidmcmFzbCcsJ+KEmCc6J3dlaWVycCcsJ+KEkSc6J2ltYWdlJywn4oScJzoncmVhbCcsJ+KEoic6J3RyYWRlJywn4oS1JzonYWxlZnN5bScsJ+KGkCc6J2xhcnInLCfihpEnOid1YXJyJywn4oaSJzoncmFycicsJ+KGkyc6J2RhcnInLCfihpQnOidoYXJyJywn4oa1JzonY3JhcnInLCfih5AnOidsQXJyJywn4oeRJzondUFycicsJ+KHkic6J3JBcnInLCfih5MnOidkQXJyJywn4oeUJzonaEFycicsJ+KIgCc6J2ZvcmFsbCcsJ+KIgic6J3BhcnQnLCfiiIMnOidleGlzdCcsJ+KIhSc6J2VtcHR5Jywn4oiHJzonbmFibGEnLCfiiIgnOidpc2luJywn4oiJJzonbm90aW4nLCfiiIsnOiduaScsJ+KIjyc6J3Byb2QnLCfiiJEnOidzdW0nLCfiiJInOidtaW51cycsJ+KIlyc6J2xvd2FzdCcsJ+KImic6J3JhZGljJywn4oidJzoncHJvcCcsJ+KInic6J2luZmluJywn4oigJzonYW5nJywn4oinJzonYW5kJywn4oioJzonb3InLCfiiKknOidjYXAnLCfiiKonOidjdXAnLCfiiKsnOidpbnQnLCfiiLQnOid0aGVyZTQnLCfiiLwnOidzaW0nLCfiiYUnOidjb25nJywn4omIJzonYXN5bXAnLCfiiaAnOiduZScsJ+KJoSc6J2VxdWl2Jywn4omkJzonbGUnLCfiiaUnOidnZScsJ+KKgic6J3N1YicsJ+KKgyc6J3N1cCcsJ+KKhCc6J25zdWInLCfiioYnOidzdWJlJywn4oqHJzonc3VwZScsJ+KKlSc6J29wbHVzJywn4oqXJzonb3RpbWVzJywn4oqlJzoncGVycCcsJ+KLhSc6J3Nkb3QnLCdcdTIzMDgnOidsY2VpbCcsJ1x1MjMwOSc6J3JjZWlsJywnXHUyMzBhJzonbGZsb29yJywnXHUyMzBiJzoncmZsb29yJywnXHUyMzI5JzonbGFuZycsJ1x1MjMyYSc6J3JhbmcnLCfil4onOidsb3onLCfimaAnOidzcGFkZXMnLCfimaMnOidjbHVicycsJ+KZpSc6J2hlYXJ0cycsJ+KZpic6J2RpYW1zJywnIic6J3F1b3QnLCc+JzonZ3QnLCfLhic6J2NpcmMnLCfLnCc6J3RpbGRlJywn4oCCJzonZW5zcCcsJ+KAgyc6J2Vtc3AnLCfigIknOid0aGluc3AnLCfigIwnOid6d25qJywn4oCNJzonendqJywn4oCOJzonbHJtJywn4oCPJzoncmxtJywn4oCTJzonbmRhc2gnLCfigJQnOidtZGFzaCcsJ+KAmCc6J2xzcXVvJywn4oCZJzoncnNxdW8nLCfigJonOidzYnF1bycsJ+KAnCc6J2xkcXVvJywn4oCdJzoncmRxdW8nLCfigJ4nOidiZHF1bycsJ+KAoCc6J2RhZ2dlcicsJ+KAoSc6J0RhZ2dlcicsJ+KAsCc6J3Blcm1pbCcsJ+KAuSc6J2xzYXF1bycsJ+KAuic6J3JzYXF1bycsJ+KCrCc6J2V1cm8nfTtmb3IgKGUgaW4gRkNLWEh0bWxFbnRpdGllcy5FbnRpdGllcykgQSs9ZTtpZiAoRkNLQ29uZmlnLkluY2x1ZGVMYXRpbkVudGl0aWVzKXtCPXsnw4AnOidBZ3JhdmUnLCfDgSc6J0FhY3V0ZScsJ8OCJzonQWNpcmMnLCfDgyc6J0F0aWxkZScsJ8OEJzonQXVtbCcsJ8OFJzonQXJpbmcnLCfDhic6J0FFbGlnJywnw4cnOidDY2VkaWwnLCfDiCc6J0VncmF2ZScsJ8OJJzonRWFjdXRlJywnw4onOidFY2lyYycsJ8OLJzonRXVtbCcsJ8OMJzonSWdyYXZlJywnw40nOidJYWN1dGUnLCfDjic6J0ljaXJjJywnw48nOidJdW1sJywnw5AnOidFVEgnLCfDkSc6J050aWxkZScsJ8OSJzonT2dyYXZlJywnw5MnOidPYWN1dGUnLCfDlCc6J09jaXJjJywnw5UnOidPdGlsZGUnLCfDlic6J091bWwnLCfDmCc6J09zbGFzaCcsJ8OZJzonVWdyYXZlJywnw5onOidVYWN1dGUnLCfDmyc6J1VjaXJjJywnw5wnOidVdW1sJywnw50nOidZYWN1dGUnLCfDnic6J1RIT1JOJywnw58nOidzemxpZycsJ8OgJzonYWdyYXZlJywnw6EnOidhYWN1dGUnLCfDoic6J2FjaXJjJywnw6MnOidhdGlsZGUnLCfDpCc6J2F1bWwnLCfDpSc6J2FyaW5nJywnw6YnOidhZWxpZycsJ8OnJzonY2NlZGlsJywnw6gnOidlZ3JhdmUnLCfDqSc6J2VhY3V0ZScsJ8OqJzonZWNpcmMnLCfDqyc6J2V1bWwnLCfDrCc6J2lncmF2ZScsJ8OtJzonaWFjdXRlJywnw64nOidpY2lyYycsJ8OvJzonaXVtbCcsJ8OwJzonZXRoJywnw7EnOidudGlsZGUnLCfDsic6J29ncmF2ZScsJ8OzJzonb2FjdXRlJywnw7QnOidvY2lyYycsJ8O1Jzonb3RpbGRlJywnw7YnOidvdW1sJywnw7gnOidvc2xhc2gnLCfDuSc6J3VncmF2ZScsJ8O6JzondWFjdXRlJywnw7snOid1Y2lyYycsJ8O8JzondXVtbCcsJ8O9JzoneWFjdXRlJywnw74nOid0aG9ybicsJ8O/JzoneXVtbCcsJ8WSJzonT0VsaWcnLCfFkyc6J29lbGlnJywnxaAnOidTY2Fyb24nLCfFoSc6J3NjYXJvbicsJ8W4JzonWXVtbCd9O2ZvciAoZSBpbiBCKXtGQ0tYSHRtbEVudGl0aWVzLkVudGl0aWVzW2VdPUJbZV07QSs9ZTt9O0I9bnVsbDt9O2lmIChGQ0tDb25maWcuSW5jbHVkZUdyZWVrRW50aXRpZXMpe0I9eyfOkSc6J0FscGhhJywnzpInOidCZXRhJywnzpMnOidHYW1tYScsJ86UJzonRGVsdGEnLCfOlSc6J0Vwc2lsb24nLCfOlic6J1pldGEnLCfOlyc6J0V0YScsJ86YJzonVGhldGEnLCfOmSc6J0lvdGEnLCfOmic6J0thcHBhJywnzpsnOidMYW1iZGEnLCfOnCc6J011Jywnzp0nOidOdScsJ86eJzonWGknLCfOnyc6J09taWNyb24nLCfOoCc6J1BpJywnzqEnOidSaG8nLCfOoyc6J1NpZ21hJywnzqQnOidUYXUnLCfOpSc6J1Vwc2lsb24nLCfOpic6J1BoaScsJ86nJzonQ2hpJywnzqgnOidQc2knLCfOqSc6J09tZWdhJywnzrEnOidhbHBoYScsJ86yJzonYmV0YScsJ86zJzonZ2FtbWEnLCfOtCc6J2RlbHRhJywnzrUnOidlcHNpbG9uJywnzrYnOid6ZXRhJywnzrcnOidldGEnLCfOuCc6J3RoZXRhJywnzrknOidpb3RhJywnzronOidrYXBwYScsJ867JzonbGFtYmRhJywnzrwnOidtdScsJ869JzonbnUnLCfOvic6J3hpJywnzr8nOidvbWljcm9uJywnz4AnOidwaScsJ8+BJzoncmhvJywnz4InOidzaWdtYWYnLCfPgyc6J3NpZ21hJywnz4QnOid0YXUnLCfPhSc6J3Vwc2lsb24nLCfPhic6J3BoaScsJ8+HJzonY2hpJywnz4gnOidwc2knLCfPiSc6J29tZWdhJywnXHUwM2QxJzondGhldGFzeW0nLCdcdTAzZDInOid1cHNpaCcsJ1x1MDNkNic6J3Bpdid9O2ZvciAoZSBpbiBCKXtGQ0tYSHRtbEVudGl0aWVzLkVudGl0aWVzW2VdPUJbZV07QSs9ZTt9O0I9bnVsbDt9fWVsc2V7RkNLWEh0bWxFbnRpdGllcy5FbnRpdGllcz17Jz4nOidndCd9O0E9Jz4nO0ErPSfCoCc7fTt2YXIgQz0nWycrQSsnXSc7aWYgKEZDS0NvbmZpZy5Qcm9jZXNzTnVtZXJpY0VudGl0aWVzKSBDPSdbXiAtfl18JytDO3ZhciBEPUZDS0NvbmZpZy5BZGRpdGlvbmFsTnVtZXJpY0VudGl0aWVzO2lmIChEJiZELmxlbmd0aD4wKSBDKz0nfCcrRkNLQ29uZmlnLkFkZGl0aW9uYWxOdW1lcmljRW50aXRpZXM7RkNLWEh0bWxFbnRpdGllcy5FbnRpdGllc1JlZ2V4PW5ldyBSZWdFeHAoQywnZycpO307CnZhciBGQ0tYSHRtbD17fTtGQ0tYSHRtbC5DdXJyZW50Sm9iTnVtPTA7RkNLWEh0bWwuR2V0WEhUTUw9ZnVuY3Rpb24oQSxCLEMpe0ZDS0RvbVRvb2xzLkNoZWNrQW5kUmVtb3ZlUGFkZGluZ05vZGUoRkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEEpLEZDS0NvbmZpZy5FbnRlck1vZGUpO0ZDS1hIdG1sRW50aXRpZXMuSW5pdGlhbGl6ZSgpO3RoaXMuX05ic3BFbnRpdHk9KEZDS0NvbmZpZy5Qcm9jZXNzSFRNTEVudGl0aWVzPyduYnNwJzonIzE2MCcpO3ZhciBEPUZDSy5Jc0RpcnR5KCk7RkNLWEh0bWwuU3BlY2lhbEJsb2Nrcz1bXTt0aGlzLlhNTD1GQ0tUb29scy5DcmVhdGVYbWxPYmplY3QoJ0RPTURvY3VtZW50Jyk7dGhpcy5NYWluTm9kZT10aGlzLlhNTC5hcHBlbmRDaGlsZCh0aGlzLlhNTC5jcmVhdGVFbGVtZW50KCd4aHRtbCcpKTtGQ0tYSHRtbC5DdXJyZW50Sm9iTnVtKys7aWYgKEIpIHRoaXMuX0FwcGVuZE5vZGUodGhpcy5NYWluTm9kZSxBKTtlbHNlIHRoaXMuX0FwcGVuZENoaWxkTm9kZXModGhpcy5NYWluTm9kZSxBLGZhbHNlKTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgRkNLWEh0bWwuX1JlbW92ZVhIdG1sSm9iUHJvcGVydGllcyhBKTt2YXIgRT10aGlzLl9HZXRNYWluWG1sU3RyaW5nKCk7dGhpcy5YTUw9bnVsbDtpZiAoRkNLQnJvd3NlckluZm8uSXNTYWZhcmkpIEU9RS5yZXBsYWNlKC9ePHhodG1sLio/Pi8sJzx4aHRtbD4nKTtFPUUuc3Vic3RyKDcsRS5sZW5ndGgtMTUpLlRyaW0oKTtpZiAoRkNLQ29uZmlnLkRvY1R5cGUubGVuZ3RoPjAmJkZDS1JlZ2V4TGliLkh0bWxEb2NUeXBlLnRlc3QoRkNLQ29uZmlnLkRvY1R5cGUpKSBFPUUucmVwbGFjZShGQ0tSZWdleExpYi5TcGFjZU5vQ2xvc2UsJz4nKTtlbHNlIEU9RS5yZXBsYWNlKEZDS1JlZ2V4TGliLlNwYWNlTm9DbG9zZSwnIC8+Jyk7aWYgKEZDS0NvbmZpZy5Gb3JjZVNpbXBsZUFtcGVyc2FuZCkgRT1FLnJlcGxhY2UoRkNLUmVnZXhMaWIuRm9yY2VTaW1wbGVBbXBlcnNhbmQsJyYnKTtpZiAoQykgRT1GQ0tDb2RlRm9ybWF0dGVyLkZvcm1hdChFKTtmb3IgKHZhciBpPTA7aTxGQ0tYSHRtbC5TcGVjaWFsQmxvY2tzLmxlbmd0aDtpKyspe3ZhciBGPW5ldyBSZWdFeHAoJ19fX0ZDS3NpX19fJytpKTtFPUUucmVwbGFjZShGLEZDS1hIdG1sLlNwZWNpYWxCbG9ja3NbaV0pO307RT1FLnJlcGxhY2UoRkNLUmVnZXhMaWIuR2Vja29FbnRpdGllc01hcmtlciwnJicpO2lmICghRCkgRkNLLlJlc2V0SXNEaXJ0eSgpO0ZDS0RvbVRvb2xzLkVuZm9yY2VQYWRkaW5nTm9kZShGQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQSksRkNLQ29uZmlnLkVudGVyTW9kZSk7cmV0dXJuIEU7fTtGQ0tYSHRtbC5fQXBwZW5kQXR0cmlidXRlPWZ1bmN0aW9uKEEsQixDKXt0cnl7aWYgKEM9PXVuZGVmaW5lZHx8Qz09bnVsbCkgQz0nJztlbHNlIGlmIChDLnJlcGxhY2Upe2lmIChGQ0tDb25maWcuRm9yY2VTaW1wbGVBbXBlcnNhbmQpIEM9Qy5yZXBsYWNlKC8mL2csJ19fX0ZDS0FtcF9fXycpO0M9Qy5yZXBsYWNlKEZDS1hIdG1sRW50aXRpZXMuRW50aXRpZXNSZWdleCxGQ0tYSHRtbF9HZXRFbnRpdHkpO307dmFyIEQ9dGhpcy5YTUwuY3JlYXRlQXR0cmlidXRlKEIpO0QudmFsdWU9QztBLmF0dHJpYnV0ZXMuc2V0TmFtZWRJdGVtKEQpO31jYXRjaCAoZSl7fX07RkNLWEh0bWwuX0FwcGVuZENoaWxkTm9kZXM9ZnVuY3Rpb24oQSxCLEMpe3ZhciBEPUIuZmlyc3RDaGlsZDt3aGlsZSAoRCl7dGhpcy5fQXBwZW5kTm9kZShBLEQpO0Q9RC5uZXh0U2libGluZzt9O2lmIChDJiZCLnRhZ05hbWUmJkIudGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0ncHJlJyl7RkNLRG9tVG9vbHMuVHJpbU5vZGUoQSk7aWYgKEZDS0NvbmZpZy5GaWxsRW1wdHlCbG9ja3Mpe3ZhciBFPUEubGFzdENoaWxkO2lmIChFJiZFLm5vZGVUeXBlPT0xJiZFLm5vZGVOYW1lPT0nYnInKSB0aGlzLl9BcHBlbmRFbnRpdHkoQSx0aGlzLl9OYnNwRW50aXR5KTt9fTtpZiAoQS5jaGlsZE5vZGVzLmxlbmd0aD09MCl7aWYgKEMmJkZDS0NvbmZpZy5GaWxsRW1wdHlCbG9ja3Mpe3RoaXMuX0FwcGVuZEVudGl0eShBLHRoaXMuX05ic3BFbnRpdHkpO3JldHVybiBBO307dmFyIEY9QS5ub2RlTmFtZTtpZiAoRkNLTGlzdHNMaWIuSW5saW5lQ2hpbGRSZXFFbGVtZW50c1tGXSkgcmV0dXJuIG51bGw7aWYgKCFGQ0tMaXN0c0xpYi5FbXB0eUVsZW1lbnRzW0ZdKSBBLmFwcGVuZENoaWxkKHRoaXMuWE1MLmNyZWF0ZVRleHROb2RlKCcnKSk7fTtyZXR1cm4gQTt9O0ZDS1hIdG1sLl9BcHBlbmROb2RlPWZ1bmN0aW9uKEEsQil7aWYgKCFCKSByZXR1cm4gZmFsc2U7c3dpdGNoIChCLm5vZGVUeXBlKXtjYXNlIDE6aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja28mJkIudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0nYnInJiZCLnBhcmVudE5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT0ncHJlJyl7dmFyIEM9J1xyJztpZiAoQj09Qi5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpIEMrPSdccic7cmV0dXJuIEZDS1hIdG1sLl9BcHBlbmROb2RlKEEsdGhpcy5YTUwuY3JlYXRlVGV4dE5vZGUoQykpO307aWYgKEIuZ2V0QXR0cmlidXRlKCdfZmNrZmFrZWxlbWVudCcpKSByZXR1cm4gRkNLWEh0bWwuX0FwcGVuZE5vZGUoQSxGQ0suR2V0UmVhbEVsZW1lbnQoQikpO2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvJiYoQi5oYXNBdHRyaWJ1dGUoJ19tb3pfZWRpdG9yX2JvZ3VzX25vZGUnKXx8Qi5nZXRBdHRyaWJ1dGUoJ3R5cGUnKT09J19tb3onKSl7aWYgKEIubmV4dFNpYmxpbmcpIHJldHVybiBmYWxzZTtlbHNle0IucmVtb3ZlQXR0cmlidXRlKCdfbW96X2VkaXRvcl9ib2d1c19ub2RlJyk7Qi5yZW1vdmVBdHRyaWJ1dGUoJ3R5cGUnKTt9fTtpZiAoQi5nZXRBdHRyaWJ1dGUoJ19mY2t0ZW1wJykpIHJldHVybiBmYWxzZTt2YXIgRD1CLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSl7aWYgKEIuc2NvcGVOYW1lJiZCLnNjb3BlTmFtZSE9J0hUTUwnJiZCLnNjb3BlTmFtZSE9J0ZDSycpIEQ9Qi5zY29wZU5hbWUudG9Mb3dlckNhc2UoKSsnOicrRDt9ZWxzZXtpZiAoRC5TdGFydHNXaXRoKCdmY2s6JykpIEQ9RC5SZW1vdmUoMCw0KTt9O2lmICghRkNLUmVnZXhMaWIuRWxlbWVudE5hbWUudGVzdChEKSkgcmV0dXJuIGZhbHNlO2lmIChCLl9mY2t4aHRtbGpvYiYmQi5fZmNreGh0bWxqb2I9PUZDS1hIdG1sLkN1cnJlbnRKb2JOdW0pIHJldHVybiBmYWxzZTt2YXIgRT10aGlzLlhNTC5jcmVhdGVFbGVtZW50KEQpO0ZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGVzKEEsQixFLEQpO0IuX2Zja3hodG1sam9iPUZDS1hIdG1sLkN1cnJlbnRKb2JOdW07dmFyIEY9RkNLWEh0bWwuVGFnUHJvY2Vzc29yc1tEXTtpZiAoRikgRT1GKEUsQixBKTtlbHNlIEU9dGhpcy5fQXBwZW5kQ2hpbGROb2RlcyhFLEIsQm9vbGVhbihGQ0tMaXN0c0xpYi5Ob25FbXB0eUJsb2NrRWxlbWVudHNbRF0pKTtpZiAoIUUpIHJldHVybiBmYWxzZTtBLmFwcGVuZENoaWxkKEUpO2JyZWFrO2Nhc2UgMzppZiAoQi5wYXJlbnROb2RlJiZCLnBhcmVudE5vZGUubm9kZU5hbWUuSUVxdWFscygncHJlJykpIHJldHVybiB0aGlzLl9BcHBlbmRUZXh0Tm9kZShBLEIubm9kZVZhbHVlKTtyZXR1cm4gdGhpcy5fQXBwZW5kVGV4dE5vZGUoQSxCLm5vZGVWYWx1ZS5SZXBsYWNlTmV3TGluZUNoYXJzKCcgJykpO2Nhc2UgODppZiAoRkNLQnJvd3NlckluZm8uSXNJRSYmIUIuaW5uZXJIVE1MKSBicmVhazt0cnkgeyBBLmFwcGVuZENoaWxkKHRoaXMuWE1MLmNyZWF0ZUNvbW1lbnQoQi5ub2RlVmFsdWUpKTt9Y2F0Y2ggKGUpIHt9O2JyZWFrO2RlZmF1bHQ6QS5hcHBlbmRDaGlsZCh0aGlzLlhNTC5jcmVhdGVDb21tZW50KCJFbGVtZW50IG5vdCBzdXBwb3J0ZWQgLSBUeXBlOiAiK0Iubm9kZVR5cGUrIiBOYW1lOiAiK0Iubm9kZU5hbWUpKTticmVhazt9O3JldHVybiB0cnVlO307RkNLWEh0bWwuX0FwcGVuZFNwZWNpYWxJdGVtPWZ1bmN0aW9uKEEpe3JldHVybiAnX19fRkNLc2lfX18nKyhGQ0tYSHRtbC5TcGVjaWFsQmxvY2tzLnB1c2goQSktMSk7fTtGQ0tYSHRtbC5fQXBwZW5kRW50aXR5PWZ1bmN0aW9uKEEsQil7QS5hcHBlbmRDaGlsZCh0aGlzLlhNTC5jcmVhdGVUZXh0Tm9kZSgnIz8tOicrQisnOycpKTt9O0ZDS1hIdG1sLl9BcHBlbmRUZXh0Tm9kZT1mdW5jdGlvbihBLEIpe3ZhciBDPUIubGVuZ3RoPjA7aWYgKEMpIEEuYXBwZW5kQ2hpbGQodGhpcy5YTUwuY3JlYXRlVGV4dE5vZGUoQi5yZXBsYWNlKEZDS1hIdG1sRW50aXRpZXMuRW50aXRpZXNSZWdleCxGQ0tYSHRtbF9HZXRFbnRpdHkpKSk7cmV0dXJuIEM7fTtmdW5jdGlvbiBGQ0tYSHRtbF9HZXRFbnRpdHkoQSl7dmFyIEI9RkNLWEh0bWxFbnRpdGllcy5FbnRpdGllc1tBXXx8KCcjJytBLmNoYXJDb2RlQXQoMCkpO3JldHVybiAnIz8tOicrQisnOyc7fTtGQ0tYSHRtbC5UYWdQcm9jZXNzb3JzPXthOmZ1bmN0aW9uKEEsQil7aWYgKEIuaW5uZXJIVE1MLlRyaW0oKS5sZW5ndGg9PTAmJiFCLm5hbWUpIHJldHVybiBmYWxzZTt2YXIgQz1CLmdldEF0dHJpYnV0ZSgnX2Zja3NhdmVkdXJsJyk7aWYgKEMhPW51bGwpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnaHJlZicsQyk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpe2lmIChCLm5hbWUpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnbmFtZScsQi5uYW1lKTt9O0E9RkNLWEh0bWwuX0FwcGVuZENoaWxkTm9kZXMoQSxCLGZhbHNlKTtyZXR1cm4gQTt9LGFyZWE6ZnVuY3Rpb24oQSxCKXt2YXIgQz1CLmdldEF0dHJpYnV0ZSgnX2Zja3NhdmVkdXJsJyk7aWYgKEMhPW51bGwpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnaHJlZicsQyk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpe2lmICghQS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbSgnY29vcmRzJykpe3ZhciBEPUIuZ2V0QXR0cmlidXRlKCdjb29yZHMnLDIpO2lmIChEJiZEIT0nMCwwLDAnKSBGQ0tYSHRtbC5fQXBwZW5kQXR0cmlidXRlKEEsJ2Nvb3JkcycsRCk7fTtpZiAoIUEuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ3NoYXBlJykpe3ZhciBFPUIuZ2V0QXR0cmlidXRlKCdzaGFwZScsMik7aWYgKEUmJkUubGVuZ3RoPjApIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnc2hhcGUnLEUudG9Mb3dlckNhc2UoKSk7fX07cmV0dXJuIEE7fSxib2R5OmZ1bmN0aW9uKEEsQil7QT1GQ0tYSHRtbC5fQXBwZW5kQ2hpbGROb2RlcyhBLEIsZmFsc2UpO0EucmVtb3ZlQXR0cmlidXRlKCdzcGVsbGNoZWNrJyk7cmV0dXJuIEE7fSxpZnJhbWU6ZnVuY3Rpb24oQSxCKXt2YXIgQz1CLmlubmVySFRNTDtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrbykgQz1GQ0tUb29scy5IVE1MRGVjb2RlKEMpO0M9Qy5yZXBsYWNlKC9cc19mY2tzYXZlZHVybD0iW14iXSoiL2csJycpO0EuYXBwZW5kQ2hpbGQoRkNLWEh0bWwuWE1MLmNyZWF0ZVRleHROb2RlKEZDS1hIdG1sLl9BcHBlbmRTcGVjaWFsSXRlbShDKSkpO3JldHVybiBBO30saW1nOmZ1bmN0aW9uKEEsQil7aWYgKCFBLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKCdhbHQnKSkgRkNLWEh0bWwuX0FwcGVuZEF0dHJpYnV0ZShBLCdhbHQnLCcnKTt2YXIgQz1CLmdldEF0dHJpYnV0ZSgnX2Zja3NhdmVkdXJsJyk7aWYgKEMhPW51bGwpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnc3JjJyxDKTtpZiAoQi5zdHlsZS53aWR0aCkgQS5yZW1vdmVBdHRyaWJ1dGUoJ3dpZHRoJyk7aWYgKEIuc3R5bGUuaGVpZ2h0KSBBLnJlbW92ZUF0dHJpYnV0ZSgnaGVpZ2h0Jyk7cmV0dXJuIEE7fSxsaTpmdW5jdGlvbihBLEIsQyl7aWYgKEMubm9kZU5hbWUuSUVxdWFscyhbJ3VsJywnb2wnXSkpIHJldHVybiBGQ0tYSHRtbC5fQXBwZW5kQ2hpbGROb2RlcyhBLEIsdHJ1ZSk7dmFyIEQ9RkNLWEh0bWwuWE1MLmNyZWF0ZUVsZW1lbnQoJ3VsJyk7Qi5fZmNreGh0bWxqb2I9bnVsbDtkb3tGQ0tYSHRtbC5fQXBwZW5kTm9kZShELEIpO2Rve0I9RkNLRG9tVG9vbHMuR2V0TmV4dFNpYmxpbmcoQik7fSB3aGlsZSAoQiYmQi5ub2RlVHlwZT09MyYmQi5ub2RlVmFsdWUuVHJpbSgpLmxlbmd0aD09MCl9CXdoaWxlIChCJiZCLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PSdsaScpIHJldHVybiBEO30sb2w6ZnVuY3Rpb24oQSxCLEMpe2lmIChCLmlubmVySFRNTC5UcmltKCkubGVuZ3RoPT0wKSByZXR1cm4gZmFsc2U7dmFyIEQ9Qy5sYXN0Q2hpbGQ7aWYgKEQmJkQubm9kZVR5cGU9PTMpIEQ9RC5wcmV2aW91c1NpYmxpbmc7aWYgKEQmJkQubm9kZU5hbWUudG9VcHBlckNhc2UoKT09J0xJJyl7Qi5fZmNreGh0bWxqb2I9bnVsbDtGQ0tYSHRtbC5fQXBwZW5kTm9kZShELEIpO3JldHVybiBmYWxzZTt9O0E9RkNLWEh0bWwuX0FwcGVuZENoaWxkTm9kZXMoQSxCKTtyZXR1cm4gQTt9LHByZTpmdW5jdGlvbiAoQSxCKXt2YXIgQz1CLmZpcnN0Q2hpbGQ7aWYgKEMmJkMubm9kZVR5cGU9PTMpIEEuYXBwZW5kQ2hpbGQoRkNLWEh0bWwuWE1MLmNyZWF0ZVRleHROb2RlKEZDS1hIdG1sLl9BcHBlbmRTcGVjaWFsSXRlbSgnXHJcbicpKSk7RkNLWEh0bWwuX0FwcGVuZENoaWxkTm9kZXMoQSxCLHRydWUpO3JldHVybiBBO30sc2NyaXB0OmZ1bmN0aW9uKEEsQil7aWYgKCFBLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKCd0eXBlJykpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwndHlwZScsJ3RleHQvamF2YXNjcmlwdCcpO0EuYXBwZW5kQ2hpbGQoRkNLWEh0bWwuWE1MLmNyZWF0ZVRleHROb2RlKEZDS1hIdG1sLl9BcHBlbmRTcGVjaWFsSXRlbShCLnRleHQpKSk7cmV0dXJuIEE7fSxzcGFuOmZ1bmN0aW9uKEEsQil7aWYgKEIuaW5uZXJIVE1MLmxlbmd0aD09MCkgcmV0dXJuIGZhbHNlO0E9RkNLWEh0bWwuX0FwcGVuZENoaWxkTm9kZXMoQSxCLGZhbHNlKTtyZXR1cm4gQTt9LHN0eWxlOmZ1bmN0aW9uKEEsQil7aWYgKCFBLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKCd0eXBlJykpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwndHlwZScsJ3RleHQvY3NzJyk7dmFyIEM9Qi5pbm5lckhUTUw7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpIEM9Qy5yZXBsYWNlKC9eKFxyXG58XG58XHIpLywnJyk7QS5hcHBlbmRDaGlsZChGQ0tYSHRtbC5YTUwuY3JlYXRlVGV4dE5vZGUoRkNLWEh0bWwuX0FwcGVuZFNwZWNpYWxJdGVtKEMpKSk7cmV0dXJuIEE7fSx0aXRsZTpmdW5jdGlvbihBLEIpe0EuYXBwZW5kQ2hpbGQoRkNLWEh0bWwuWE1MLmNyZWF0ZVRleHROb2RlKEZDSy5FZGl0b3JEb2N1bWVudC50aXRsZSkpO3JldHVybiBBO319O0ZDS1hIdG1sLlRhZ1Byb2Nlc3NvcnMudWw9RkNLWEh0bWwuVGFnUHJvY2Vzc29ycy5vbDsKRkNLWEh0bWwuX0dldE1haW5YbWxTdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5NYWluTm9kZS54bWw7fTtGQ0tYSHRtbC5fQXBwZW5kQXR0cmlidXRlcz1mdW5jdGlvbihBLEIsQyxEKXt2YXIgRT1CLmF0dHJpYnV0ZXMsYkhhc1N0eWxlO2ZvciAodmFyIG49MDtuPEUubGVuZ3RoO24rKyl7dmFyIEY9RVtuXTtpZiAoRi5zcGVjaWZpZWQpe3ZhciBHPUYubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2YXIgSDtpZiAoRy5TdGFydHNXaXRoKCdfZmNrJykpIGNvbnRpbnVlO2Vsc2UgaWYgKEc9PSdzdHlsZScpe2JIYXNTdHlsZT10cnVlO2NvbnRpbnVlO31lbHNlIGlmIChHPT0nY2xhc3MnKXtIPUYubm9kZVZhbHVlLnJlcGxhY2UoRkNLUmVnZXhMaWIuRkNLX0NsYXNzLCcnKTtpZiAoSC5sZW5ndGg9PTApIGNvbnRpbnVlO31lbHNlIGlmIChHLmluZGV4T2YoJ29uJyk9PTApIEg9Ri5ub2RlVmFsdWU7ZWxzZSBpZiAoRD09J2JvZHknJiZHPT0nY29udGVudGVkaXRhYmxlJykgY29udGludWU7ZWxzZSBpZiAoRi5ub2RlVmFsdWU9PT10cnVlKSBIPUc7ZWxzZXt0cnl7SD1CLmdldEF0dHJpYnV0ZShHLDIpO31jYXRjaCAoZSkge319O3RoaXMuX0FwcGVuZEF0dHJpYnV0ZShDLEcsSHx8Ri5ub2RlVmFsdWUpO319O2lmIChiSGFzU3R5bGV8fEIuc3R5bGUuY3NzVGV4dC5sZW5ndGg+MCl7dmFyIEk9RkNLVG9vbHMuUHJvdGVjdEZvcm1TdHlsZXMoQik7dmFyIEo9Qi5zdHlsZS5jc3NUZXh0LnJlcGxhY2UoRkNLUmVnZXhMaWIuU3R5bGVQcm9wZXJ0aWVzLEZDS1Rvb2xzLlRvTG93ZXJDYXNlKTtGQ0tUb29scy5SZXN0b3JlRm9ybVN0eWxlcyhCLEkpO3RoaXMuX0FwcGVuZEF0dHJpYnV0ZShDLCdzdHlsZScsSik7fX07RkNLWEh0bWwuX1JlbW92ZVhIdG1sSm9iUHJvcGVydGllcz1mdW5jdGlvbiAoQSl7aWYgKCFBfHwhQS5ub2RlVHlwZXx8QS5ub2RlVHlwZSE9MSkgcmV0dXJuO2lmICh0eXBlb2YgQS5fZmNreGh0bWxqb2I9PSd1bmRlZmluZWQnJiZBLnRhZ05hbWUhPT0nQk9EWScpIHJldHVybjtBLnJlbW92ZUF0dHJpYnV0ZSgnX2Zja3hodG1sam9iJyk7aWYgKEEuaGFzQ2hpbGROb2RlcygpKXt2YXIgQj1BLmNoaWxkTm9kZXM7Zm9yICh2YXIgaT1CLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgQz1CW2ldO2lmIChDLnBhcmVudE5vZGU9PUEpIEZDS1hIdG1sLl9SZW1vdmVYSHRtbEpvYlByb3BlcnRpZXMoQyk7fX19O0ZDS1hIdG1sLlRhZ1Byb2Nlc3NvcnNbJ2RpdiddPWZ1bmN0aW9uKEEsQil7aWYgKEIuYWxpZ24ubGVuZ3RoPjApIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnYWxpZ24nLEIuYWxpZ24pO0E9RkNLWEh0bWwuX0FwcGVuZENoaWxkTm9kZXMoQSxCLHRydWUpO3JldHVybiBBO307RkNLWEh0bWwuVGFnUHJvY2Vzc29yc1snZm9udCddPWZ1bmN0aW9uKEEsQil7aWYgKEEuYXR0cmlidXRlcy5sZW5ndGg9PTApIEE9RkNLWEh0bWwuWE1MLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtBPUZDS1hIdG1sLl9BcHBlbmRDaGlsZE5vZGVzKEEsQik7cmV0dXJuIEE7fTtGQ0tYSHRtbC5UYWdQcm9jZXNzb3JzWydmb3JtJ109ZnVuY3Rpb24oQSxCKXtpZiAoQi5hY2NlcHRDaGFyc2V0JiZCLmFjY2VwdENoYXJzZXQubGVuZ3RoPjAmJkIuYWNjZXB0Q2hhcnNldCE9J1VOS05PV04nKSBGQ0tYSHRtbC5fQXBwZW5kQXR0cmlidXRlKEEsJ2FjY2VwdC1jaGFyc2V0JyxCLmFjY2VwdENoYXJzZXQpO3ZhciBDPUIuYXR0cmlidXRlc1snbmFtZSddO2lmIChDJiZDLnZhbHVlLmxlbmd0aD4wKSBGQ0tYSHRtbC5fQXBwZW5kQXR0cmlidXRlKEEsJ25hbWUnLEMudmFsdWUpO0E9RkNLWEh0bWwuX0FwcGVuZENoaWxkTm9kZXMoQSxCLHRydWUpO3JldHVybiBBO307RkNLWEh0bWwuVGFnUHJvY2Vzc29yc1snaW5wdXQnXT1mdW5jdGlvbihBLEIpe2lmIChCLm5hbWUpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnbmFtZScsQi5uYW1lKTtpZiAoQi52YWx1ZSYmIUEuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ3ZhbHVlJykpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwndmFsdWUnLEIudmFsdWUpO2lmICghQS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbSgndHlwZScpKSBGQ0tYSHRtbC5fQXBwZW5kQXR0cmlidXRlKEEsJ3R5cGUnLCd0ZXh0Jyk7cmV0dXJuIEE7fTtGQ0tYSHRtbC5UYWdQcm9jZXNzb3JzWydsYWJlbCddPWZ1bmN0aW9uKEEsQil7aWYgKEIuaHRtbEZvci5sZW5ndGg+MCkgRkNLWEh0bWwuX0FwcGVuZEF0dHJpYnV0ZShBLCdmb3InLEIuaHRtbEZvcik7QT1GQ0tYSHRtbC5fQXBwZW5kQ2hpbGROb2RlcyhBLEIpO3JldHVybiBBO307RkNLWEh0bWwuVGFnUHJvY2Vzc29yc1snbWFwJ109ZnVuY3Rpb24oQSxCKXtpZiAoIUEuYXR0cmlidXRlcy5nZXROYW1lZEl0ZW0oJ25hbWUnKSl7dmFyIEM9Qi5uYW1lO2lmIChDKSBGQ0tYSHRtbC5fQXBwZW5kQXR0cmlidXRlKEEsJ25hbWUnLEMpO307QT1GQ0tYSHRtbC5fQXBwZW5kQ2hpbGROb2RlcyhBLEIsdHJ1ZSk7cmV0dXJuIEE7fTtGQ0tYSHRtbC5UYWdQcm9jZXNzb3JzWydtZXRhJ109ZnVuY3Rpb24oQSxCKXt2YXIgQz1BLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKCdodHRwLWVxdWl2Jyk7aWYgKEM9PW51bGx8fEMudmFsdWUubGVuZ3RoPT0wKXt2YXIgRD1CLm91dGVySFRNTC5tYXRjaChGQ0tSZWdleExpYi5NZXRhSHR0cEVxdWl2KTtpZiAoRCl7RD1EWzFdO0ZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnaHR0cC1lcXVpdicsRCk7fX07cmV0dXJuIEE7fTtGQ0tYSHRtbC5UYWdQcm9jZXNzb3JzWydvcHRpb24nXT1mdW5jdGlvbihBLEIpe2lmIChCLnNlbGVjdGVkJiYhQS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbSgnc2VsZWN0ZWQnKSkgRkNLWEh0bWwuX0FwcGVuZEF0dHJpYnV0ZShBLCdzZWxlY3RlZCcsJ3NlbGVjdGVkJyk7QT1GQ0tYSHRtbC5fQXBwZW5kQ2hpbGROb2RlcyhBLEIpO3JldHVybiBBO307RkNLWEh0bWwuVGFnUHJvY2Vzc29yc1sndGV4dGFyZWEnXT1GQ0tYSHRtbC5UYWdQcm9jZXNzb3JzWydzZWxlY3QnXT1mdW5jdGlvbihBLEIpe2lmIChCLm5hbWUpIEZDS1hIdG1sLl9BcHBlbmRBdHRyaWJ1dGUoQSwnbmFtZScsQi5uYW1lKTtBPUZDS1hIdG1sLl9BcHBlbmRDaGlsZE5vZGVzKEEsQik7cmV0dXJuIEE7fTsKdmFyIEZDS0NvZGVGb3JtYXR0ZXI9e307RkNLQ29kZUZvcm1hdHRlci5Jbml0PWZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5SZWdleD17fTtBLkJsb2Nrc09wZW5lcj0vXDwoUHxESVZ8SDF8SDJ8SDN8SDR8SDV8SDZ8QUREUkVTU3xQUkV8T0x8VUx8TEl8REx8RFR8RER8VElUTEV8TUVUQXxMSU5LfEJBU0V8U0NSSVBUfExJTkt8VER8VEh8QVJFQXxPUFRJT04pW15cPl0qXD4vZ2k7QS5CbG9ja3NDbG9zZXI9L1w8XC8oUHxESVZ8SDF8SDJ8SDN8SDR8SDV8SDZ8QUREUkVTU3xQUkV8T0x8VUx8TEl8REx8RFR8RER8VElUTEV8TUVUQXxMSU5LfEJBU0V8U0NSSVBUfExJTkt8VER8VEh8QVJFQXxPUFRJT04pW15cPl0qXD4vZ2k7QS5OZXdMaW5lVGFncz0vXDwoQlJ8SFIpW15cPl0qXD4vZ2k7QS5NYWluVGFncz0vXDxcLz8oSFRNTHxIRUFEfEJPRFl8Rk9STXxUQUJMRXxUQk9EWXxUSEVBRHxUUilbXlw+XSpcPi9naTtBLkxpbmVTcGxpdHRlcj0vXHMqXG4rXHMqL2c7QS5JbmNyZWFzZUluZGVudD0vXlw8KEhUTUx8SEVBRHxCT0RZfEZPUk18VEFCTEV8VEJPRFl8VEhFQUR8VFJ8VUx8T0x8REwpWyBcL1w+XS9pO0EuRGVjcmVhc2VJbmRlbnQ9L15cPFwvKEhUTUx8SEVBRHxCT0RZfEZPUk18VEFCTEV8VEJPRFl8VEhFQUR8VFJ8VUx8T0x8REwpWyBcPl0vaTtBLkZvcm1hdEluZGVudGF0b3JSZW1vdmU9bmV3IFJlZ0V4cCgnXicrRkNLQ29uZmlnLkZvcm1hdEluZGVudGF0b3IpO0EuUHJvdGVjdGVkVGFncz0vKDxQUkVbXj5dKj4pKFtcc1xTXSo/KSg8XC9QUkU+KS9naTt9O0ZDS0NvZGVGb3JtYXR0ZXIuX1Byb3RlY3REYXRhPWZ1bmN0aW9uKEEsQixDLEQpe3JldHVybiBCKydfX19GQ0twZF9fXycrKEZDS0NvZGVGb3JtYXR0ZXIuUHJvdGVjdGVkRGF0YS5wdXNoKEMpLTEpK0Q7fTtGQ0tDb2RlRm9ybWF0dGVyLkZvcm1hdD1mdW5jdGlvbihBKXtpZiAoIXRoaXMuUmVnZXgpIHRoaXMuSW5pdCgpO0ZDS0NvZGVGb3JtYXR0ZXIuUHJvdGVjdGVkRGF0YT1bXTt2YXIgQj1BLnJlcGxhY2UodGhpcy5SZWdleC5Qcm90ZWN0ZWRUYWdzLEZDS0NvZGVGb3JtYXR0ZXIuX1Byb3RlY3REYXRhKTtCPUIucmVwbGFjZSh0aGlzLlJlZ2V4LkJsb2Nrc09wZW5lciwnXG4kJicpO0I9Qi5yZXBsYWNlKHRoaXMuUmVnZXguQmxvY2tzQ2xvc2VyLCckJlxuJyk7Qj1CLnJlcGxhY2UodGhpcy5SZWdleC5OZXdMaW5lVGFncywnJCZcbicpO0I9Qi5yZXBsYWNlKHRoaXMuUmVnZXguTWFpblRhZ3MsJ1xuJCZcbicpO3ZhciBDPScnO3ZhciBEPUIuc3BsaXQodGhpcy5SZWdleC5MaW5lU3BsaXR0ZXIpO0I9Jyc7Zm9yICh2YXIgaT0wO2k8RC5sZW5ndGg7aSsrKXt2YXIgRT1EW2ldO2lmIChFLmxlbmd0aD09MCkgY29udGludWU7aWYgKHRoaXMuUmVnZXguRGVjcmVhc2VJbmRlbnQudGVzdChFKSkgQz1DLnJlcGxhY2UodGhpcy5SZWdleC5Gb3JtYXRJbmRlbnRhdG9yUmVtb3ZlLCcnKTtCKz1DK0UrJ1xuJztpZiAodGhpcy5SZWdleC5JbmNyZWFzZUluZGVudC50ZXN0KEUpKSBDKz1GQ0tDb25maWcuRm9ybWF0SW5kZW50YXRvcjt9O2ZvciAodmFyIGo9MDtqPEZDS0NvZGVGb3JtYXR0ZXIuUHJvdGVjdGVkRGF0YS5sZW5ndGg7aisrKXt2YXIgRj1uZXcgUmVnRXhwKCdfX19GQ0twZF9fXycraik7Qj1CLnJlcGxhY2UoRixGQ0tDb2RlRm9ybWF0dGVyLlByb3RlY3RlZERhdGFbal0ucmVwbGFjZSgvXCQvZywnJCQkJCcpKTt9O3JldHVybiBCLlRyaW0oKTt9Owp2YXIgRkNLVW5kbz17fTtGQ0tVbmRvLlNhdmVkRGF0YT1bXTtGQ0tVbmRvLkN1cnJlbnRJbmRleD0tMTtGQ0tVbmRvLlR5cGVzQ291bnQ9MDtGQ0tVbmRvLkNoYW5nZWQ9ZmFsc2U7RkNLVW5kby5NYXhUeXBlcz0yNTtGQ0tVbmRvLlR5cGluZz1mYWxzZTtGQ0tVbmRvLlNhdmVMb2NrZWQ9ZmFsc2U7RkNLVW5kby5fR2V0Qm9va21hcms9ZnVuY3Rpb24oKXtGQ0tTZWxlY3Rpb24uUmVzdG9yZSgpO3ZhciBBPW5ldyBGQ0tEb21SYW5nZShGQ0suRWRpdG9yV2luZG93KTt0cnl7QS5Nb3ZlVG9TZWxlY3Rpb24oKTt9Y2F0Y2ggKGUpe3JldHVybiBudWxsO307aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpe3ZhciBCPUEuQ3JlYXRlQm9va21hcmsoKTt2YXIgQz1GQ0suRWRpdG9yRG9jdW1lbnQuYm9keS5pbm5lckhUTUw7QS5Nb3ZlVG9Cb29rbWFyayhCKTtyZXR1cm4gW0IsQ107fTtyZXR1cm4gQS5DcmVhdGVCb29rbWFyazIoKTt9O0ZDS1VuZG8uX1NlbGVjdEJvb2ttYXJrPWZ1bmN0aW9uKEEpe2lmICghQSkgcmV0dXJuO3ZhciBCPW5ldyBGQ0tEb21SYW5nZShGQ0suRWRpdG9yV2luZG93KTtpZiAoQSBpbnN0YW5jZW9mIE9iamVjdCl7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpIEIuTW92ZVRvQm9va21hcmsoQVswXSk7ZWxzZSBCLk1vdmVUb0Jvb2ttYXJrMihBKTt0cnl7Qi5TZWxlY3QoKTt9Y2F0Y2ggKGUpe0IuTW92ZVRvUG9zaXRpb24oRkNLLkVkaXRvckRvY3VtZW50LmJvZHksNCk7Qi5TZWxlY3QoKTt9fX07RkNLVW5kby5fQ29tcGFyZUN1cnNvcnM9ZnVuY3Rpb24oQSxCKXtmb3IgKHZhciBpPTA7aTxNYXRoLm1pbihBLmxlbmd0aCxCLmxlbmd0aCk7aSsrKXtpZiAoQVtpXTxCW2ldKSByZXR1cm4tMTtlbHNlIGlmIChBW2ldPkJbaV0pIHJldHVybiAxO307aWYgKEEubGVuZ3RoPEIubGVuZ3RoKSByZXR1cm4tMTtlbHNlIGlmIChBLmxlbmd0aD5CLmxlbmd0aCkgcmV0dXJuIDE7cmV0dXJuIDA7fTtGQ0tVbmRvLl9DaGVja0lzQm9va21hcmtzRXF1YWw9ZnVuY3Rpb24oQSxCKXtpZiAoIShBJiZCKSkgcmV0dXJuIGZhbHNlO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt2YXIgQz1BWzFdLnNlYXJjaChBWzBdLlN0YXJ0SWQpO3ZhciBEPUJbMV0uc2VhcmNoKEJbMF0uU3RhcnRJZCk7dmFyIEU9QVsxXS5zZWFyY2goQVswXS5FbmRJZCk7dmFyIEY9QlsxXS5zZWFyY2goQlswXS5FbmRJZCk7cmV0dXJuIEM9PUQmJkU9PUY7fWVsc2V7cmV0dXJuIHRoaXMuX0NvbXBhcmVDdXJzb3JzKEEuU3RhcnQsQi5TdGFydCk9PTAmJnRoaXMuX0NvbXBhcmVDdXJzb3JzKEEuRW5kLEIuRW5kKT09MDt9fTtGQ0tVbmRvLlNhdmVVbmRvU3RlcD1mdW5jdGlvbigpe2lmIChGQ0suRWRpdE1vZGUhPTB8fHRoaXMuU2F2ZUxvY2tlZCkgcmV0dXJuO2lmICh0aGlzLlNhdmVkRGF0YS5sZW5ndGgpIHRoaXMuQ2hhbmdlZD10cnVlO3ZhciBBPUZDSy5FZGl0b3JEb2N1bWVudC5ib2R5LmlubmVySFRNTDt2YXIgQj10aGlzLl9HZXRCb29rbWFyaygpO3RoaXMuU2F2ZWREYXRhPXRoaXMuU2F2ZWREYXRhLnNsaWNlKDAsdGhpcy5DdXJyZW50SW5kZXgrMSk7aWYgKHRoaXMuQ3VycmVudEluZGV4PjAmJkE9PXRoaXMuU2F2ZWREYXRhW3RoaXMuQ3VycmVudEluZGV4XVswXSYmdGhpcy5fQ2hlY2tJc0Jvb2ttYXJrc0VxdWFsKEIsdGhpcy5TYXZlZERhdGFbdGhpcy5DdXJyZW50SW5kZXhdWzFdKSkgcmV0dXJuO2Vsc2UgaWYgKHRoaXMuQ3VycmVudEluZGV4PT0wJiZ0aGlzLlNhdmVkRGF0YS5sZW5ndGgmJkE9PXRoaXMuU2F2ZWREYXRhWzBdWzBdKXt0aGlzLlNhdmVkRGF0YVswXVsxXT1CO3JldHVybjt9O2lmICh0aGlzLkN1cnJlbnRJbmRleCsxPj1GQ0tDb25maWcuTWF4VW5kb0xldmVscykgdGhpcy5TYXZlZERhdGEuc2hpZnQoKTtlbHNlIHRoaXMuQ3VycmVudEluZGV4Kys7dGhpcy5TYXZlZERhdGFbdGhpcy5DdXJyZW50SW5kZXhdPVtBLEJdO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCJPblNlbGVjdGlvbkNoYW5nZSIpO307RkNLVW5kby5DaGVja1VuZG9TdGF0ZT1mdW5jdGlvbigpe3JldHVybiAodGhpcy5DaGFuZ2VkfHx0aGlzLkN1cnJlbnRJbmRleD4wKTt9O0ZDS1VuZG8uQ2hlY2tSZWRvU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gKHRoaXMuQ3VycmVudEluZGV4PCh0aGlzLlNhdmVkRGF0YS5sZW5ndGgtMSkpO307RkNLVW5kby5VbmRvPWZ1bmN0aW9uKCl7aWYgKHRoaXMuQ2hlY2tVbmRvU3RhdGUoKSl7aWYgKHRoaXMuQ3VycmVudEluZGV4PT0odGhpcy5TYXZlZERhdGEubGVuZ3RoLTEpKXt0aGlzLlNhdmVVbmRvU3RlcCgpO307dGhpcy5fQXBwbHlVbmRvTGV2ZWwoLS10aGlzLkN1cnJlbnRJbmRleCk7RkNLLkV2ZW50cy5GaXJlRXZlbnQoIk9uU2VsZWN0aW9uQ2hhbmdlIik7fX07RkNLVW5kby5SZWRvPWZ1bmN0aW9uKCl7aWYgKHRoaXMuQ2hlY2tSZWRvU3RhdGUoKSl7dGhpcy5fQXBwbHlVbmRvTGV2ZWwoKyt0aGlzLkN1cnJlbnRJbmRleCk7RkNLLkV2ZW50cy5GaXJlRXZlbnQoIk9uU2VsZWN0aW9uQ2hhbmdlIik7fX07RkNLVW5kby5fQXBwbHlVbmRvTGV2ZWw9ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5TYXZlZERhdGFbQV07aWYgKCFCKSByZXR1cm47aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpe2lmIChCWzFdJiZCWzFdWzFdKSBGQ0suU2V0SW5uZXJIdG1sKEJbMV1bMV0pO2Vsc2UgRkNLLlNldElubmVySHRtbChCWzBdKTt9ZWxzZSBGQ0suRWRpdG9yRG9jdW1lbnQuYm9keS5pbm5lckhUTUw9QlswXTt0aGlzLl9TZWxlY3RCb29rbWFyayhCWzFdKTt0aGlzLlR5cGVzQ291bnQ9MDt0aGlzLkNoYW5nZWQ9ZmFsc2U7dGhpcy5UeXBpbmc9ZmFsc2U7fTsKdmFyIEZDS0VkaXRpbmdBcmVhPWZ1bmN0aW9uKEEpe3RoaXMuVGFyZ2V0RWxlbWVudD1BO3RoaXMuTW9kZT0wO2lmIChGQ0suSUVDbGVhbnVwKSBGQ0suSUVDbGVhbnVwLkFkZEl0ZW0odGhpcyxGQ0tFZGl0aW5nQXJlYV9DbGVhbnVwKTt9O0ZDS0VkaXRpbmdBcmVhLnByb3RvdHlwZS5TdGFydD1mdW5jdGlvbihBLEIpe3ZhciBDPXRoaXMuVGFyZ2V0RWxlbWVudDt2YXIgRD1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQyk7d2hpbGUoQy5maXJzdENoaWxkKSBDLnJlbW92ZUNoaWxkKEMuZmlyc3RDaGlsZCk7aWYgKHRoaXMuTW9kZT09MCl7aWYgKEZDS19JU19DVVNUT01fRE9NQUlOKSBBPSc8c2NyaXB0PmRvY3VtZW50LmRvbWFpbj0iJytGQ0tfUlVOVElNRV9ET01BSU4rJyI7PC9zY3JpcHQ+JytBO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBBPUEucmVwbGFjZSgvKDxiYXNlW14+XSo/KVxzKlwvPz4oPyFccyo8XC9iYXNlPikvZ2ksJyQxPjwvYmFzZT4nKTtlbHNlIGlmICghQil7dmFyIEU9QS5tYXRjaChGQ0tSZWdleExpYi5CZWZvcmVCb2R5KTt2YXIgRj1BLm1hdGNoKEZDS1JlZ2V4TGliLkFmdGVyQm9keSk7aWYgKEUmJkYpe3ZhciBHPUEuc3Vic3RyKEVbMV0ubGVuZ3RoLEEubGVuZ3RoLUVbMV0ubGVuZ3RoLUZbMV0ubGVuZ3RoKTtBPUVbMV0rJyZuYnNwOycrRlsxXTtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrbyYmKEcubGVuZ3RoPT0wfHxGQ0tSZWdleExpYi5FbXB0eVBhcmFncmFwaC50ZXN0KEcpKSkgRz0nPGJyIHR5cGU9Il9tb3oiPic7dGhpcy5fQm9keUhUTUw9Rzt9ZWxzZSB0aGlzLl9Cb2R5SFRNTD1BO307dmFyIEg9dGhpcy5JRnJhbWU9RC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTt2YXIgST0nPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIF9mY2t0ZW1wPSJ0cnVlIj53aW5kb3cub25lcnJvcj1mdW5jdGlvbigpe3JldHVybiB0cnVlO307PC9zY3JpcHQ+JztILmZyYW1lQm9yZGVyPTA7SC5zdHlsZS53aWR0aD1ILnN0eWxlLmhlaWdodD0nMTAwJSc7aWYgKEZDS19JU19DVVNUT01fRE9NQUlOJiZGQ0tCcm93c2VySW5mby5Jc0lFKXt3aW5kb3cuX0ZDS0h0bWxUb0xvYWQ9QS5yZXBsYWNlKC88aGVhZD4vaSwnPGhlYWQ+JytJKTtILnNyYz0namF2YXNjcmlwdDp2b2lkKCAoZnVuY3Rpb24oKXtkb2N1bWVudC5vcGVuKCkgO2RvY3VtZW50LmRvbWFpbj0iJytkb2N1bWVudC5kb21haW4rJyIgO2RvY3VtZW50LndyaXRlKCB3aW5kb3cucGFyZW50Ll9GQ0tIdG1sVG9Mb2FkICk7ZG9jdW1lbnQuY2xvc2UoKSA7d2luZG93LnBhcmVudC5fRkNLSHRtbFRvTG9hZCA9IG51bGwgO30pKCkgKSc7fWVsc2UgaWYgKCFGQ0tCcm93c2VySW5mby5Jc0dlY2tvKXtILnNyYz0namF2YXNjcmlwdDp2b2lkKDApJzt9O0MuYXBwZW5kQ2hpbGQoSCk7dGhpcy5XaW5kb3c9SC5jb250ZW50V2luZG93O2lmICghRkNLX0lTX0NVU1RPTV9ET01BSU58fCFGQ0tCcm93c2VySW5mby5Jc0lFKXt2YXIgSj10aGlzLldpbmRvdy5kb2N1bWVudDtKLm9wZW4oKTtKLndyaXRlKEEucmVwbGFjZSgvPGhlYWQ+L2ksJzxoZWFkPicrSSkpO0ouY2xvc2UoKTt9O2lmIChGQ0tCcm93c2VySW5mby5Jc0FJUikgRkNLQWRvYmVBSVIuRWRpdGluZ0FyZWFfU3RhcnQoSixBKTtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrbzEwJiYhQil7dGhpcy5TdGFydChBLHRydWUpO3JldHVybjt9O2lmIChILnJlYWR5U3RhdGUmJkgucmVhZHlTdGF0ZSE9J2NvbXBsZXRlZCcpe3ZhciBLPXRoaXM7c2V0VGltZW91dChmdW5jdGlvbigpe3RyeXtLLldpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwoImxlZnQiKTt9Y2F0Y2goZSl7c2V0VGltZW91dChhcmd1bWVudHMuY2FsbGVlLDApO3JldHVybjt9O0suV2luZG93Ll9GQ0tFZGl0aW5nQXJlYT1LO0ZDS0VkaXRpbmdBcmVhX0NvbXBsZXRlU3RhcnQuY2FsbChLLldpbmRvdyk7fSwwKTt9ZWxzZXt0aGlzLldpbmRvdy5fRkNLRWRpdGluZ0FyZWE9dGhpcztpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrbzEwKSB0aGlzLldpbmRvdy5zZXRUaW1lb3V0KEZDS0VkaXRpbmdBcmVhX0NvbXBsZXRlU3RhcnQsNTAwKTtlbHNlIEZDS0VkaXRpbmdBcmVhX0NvbXBsZXRlU3RhcnQuY2FsbCh0aGlzLldpbmRvdyk7fX1lbHNle3ZhciBMPXRoaXMuVGV4dGFyZWE9RC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO0wuY2xhc3NOYW1lPSdTb3VyY2VGaWVsZCc7TC5kaXI9J2x0cic7RkNLRG9tVG9vbHMuU2V0RWxlbWVudFN0eWxlcyhMLHt3aWR0aDonMTAwJScsaGVpZ2h0OicxMDAlJyxib3JkZXI6J25vbmUnLHJlc2l6ZTonbm9uZScsb3V0bGluZTonbm9uZSd9KTtDLmFwcGVuZENoaWxkKEwpO0wudmFsdWU9QTtGQ0tUb29scy5SdW5GdW5jdGlvbih0aGlzLk9uTG9hZCk7fX07ZnVuY3Rpb24gRkNLRWRpdGluZ0FyZWFfQ29tcGxldGVTdGFydCgpe2lmICghdGhpcy5kb2N1bWVudC5ib2R5KXt0aGlzLnNldFRpbWVvdXQoRkNLRWRpdGluZ0FyZWFfQ29tcGxldGVTdGFydCw1MCk7cmV0dXJuO307dmFyIEE9dGhpcy5fRkNLRWRpdGluZ0FyZWE7QS5Eb2N1bWVudD1BLldpbmRvdy5kb2N1bWVudDtBLk1ha2VFZGl0YWJsZSgpO0ZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKEEuT25Mb2FkKTt9O0ZDS0VkaXRpbmdBcmVhLnByb3RvdHlwZS5NYWtlRWRpdGFibGU9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLkRvY3VtZW50O2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXtBLmJvZHkuZGlzYWJsZWQ9dHJ1ZTtBLmJvZHkuY29udGVudEVkaXRhYmxlPXRydWU7QS5ib2R5LnJlbW92ZUF0dHJpYnV0ZSgiZGlzYWJsZWQiKTt9ZWxzZXt0cnl7QS5ib2R5LnNwZWxsY2hlY2s9KHRoaXMuRkZTcGVsbENoZWNrZXIhPT1mYWxzZSk7aWYgKHRoaXMuX0JvZHlIVE1MKXtBLmJvZHkuaW5uZXJIVE1MPXRoaXMuX0JvZHlIVE1MO0EuYm9keS5vZmZzZXRMZWZ0O3RoaXMuX0JvZHlIVE1MPW51bGw7fTtBLmRlc2lnbk1vZGU9J29uJztBLmV4ZWNDb21tYW5kKCdlbmFibGVPYmplY3RSZXNpemluZycsZmFsc2UsIUZDS0NvbmZpZy5EaXNhYmxlT2JqZWN0UmVzaXppbmcpO0EuZXhlY0NvbW1hbmQoJ2VuYWJsZUlubGluZVRhYmxlRWRpdGluZycsZmFsc2UsIUZDS0NvbmZpZy5EaXNhYmxlRkZUYWJsZUhhbmRsZXMpO31jYXRjaCAoZSl7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lcih0aGlzLldpbmRvdy5mcmFtZUVsZW1lbnQsJ0RPTUF0dHJNb2RpZmllZCcsRkNLRWRpdGluZ0FyZWFfRG9jdW1lbnRfQXR0cmlidXRlTm9kZU1vZGlmaWVkKTt9fX07ZnVuY3Rpb24gRkNLRWRpdGluZ0FyZWFfRG9jdW1lbnRfQXR0cmlidXRlTm9kZU1vZGlmaWVkKEEpe3ZhciBCPUEuY3VycmVudFRhcmdldC5jb250ZW50V2luZG93Ll9GQ0tFZGl0aW5nQXJlYTtpZiAoQi5fdGltZXIpIHdpbmRvdy5jbGVhclRpbWVvdXQoQi5fdGltZXIpO0IuX3RpbWVyPUZDS1Rvb2xzLlNldFRpbWVvdXQoRkNLRWRpdGluZ0FyZWFfTWFrZUVkaXRhYmxlQnlNdXRhdGlvbiwxMDAwLEIpO307ZnVuY3Rpb24gRkNLRWRpdGluZ0FyZWFfTWFrZUVkaXRhYmxlQnlNdXRhdGlvbigpe2RlbGV0ZSB0aGlzLl90aW1lcjtGQ0tUb29scy5SZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuV2luZG93LmZyYW1lRWxlbWVudCwnRE9NQXR0ck1vZGlmaWVkJyxGQ0tFZGl0aW5nQXJlYV9Eb2N1bWVudF9BdHRyaWJ1dGVOb2RlTW9kaWZpZWQpO3RoaXMuTWFrZUVkaXRhYmxlKCk7fTtGQ0tFZGl0aW5nQXJlYS5wcm90b3R5cGUuRm9jdXM9ZnVuY3Rpb24oKXt0cnl7aWYgKHRoaXMuTW9kZT09MCl7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpIHRoaXMuX0ZvY3VzSUUoKTtlbHNlIHRoaXMuV2luZG93LmZvY3VzKCk7fWVsc2V7dmFyIEE9RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KHRoaXMuVGV4dGFyZWEpO2lmICgoIUEuaGFzRm9jdXN8fEEuaGFzRm9jdXMoKSkmJkEuYWN0aXZlRWxlbWVudD09dGhpcy5UZXh0YXJlYSkgcmV0dXJuO3RoaXMuVGV4dGFyZWEuZm9jdXMoKTt9fWNhdGNoKGUpIHt9fTtGQ0tFZGl0aW5nQXJlYS5wcm90b3R5cGUuX0ZvY3VzSUU9ZnVuY3Rpb24oKXt0aGlzLkRvY3VtZW50LmJvZHkuc2V0QWN0aXZlKCk7dGhpcy5XaW5kb3cuZm9jdXMoKTt2YXIgQT10aGlzLkRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO3ZhciBCPUEucGFyZW50RWxlbWVudCgpO3ZhciBDPUIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZiAoQi5jaGlsZE5vZGVzLmxlbmd0aD4wfHwhKEZDS0xpc3RzTGliLkJsb2NrRWxlbWVudHNbQ118fEZDS0xpc3RzTGliLk5vbkVtcHR5QmxvY2tFbGVtZW50c1tDXSkpe3JldHVybjt9O0E9bmV3IEZDS0RvbVJhbmdlKHRoaXMuV2luZG93KTtBLk1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoQik7QS5TZWxlY3QoKTt9O2Z1bmN0aW9uIEZDS0VkaXRpbmdBcmVhX0NsZWFudXAoKXtpZiAodGhpcy5Eb2N1bWVudCl7dGhpcy5Eb2N1bWVudC5zZWxlY3Rpb24uZW1wdHkoKTt0aGlzLkRvY3VtZW50LmJvZHkuaW5uZXJIVE1MPSIiO307dGhpcy5UYXJnZXRFbGVtZW50PW51bGw7dGhpcy5JRnJhbWU9bnVsbDt0aGlzLkRvY3VtZW50PW51bGw7dGhpcy5UZXh0YXJlYT1udWxsO2lmICh0aGlzLldpbmRvdyl7dGhpcy5XaW5kb3cuX0ZDS0VkaXRpbmdBcmVhPW51bGw7dGhpcy5XaW5kb3c9bnVsbDt9fTsKdmFyIEZDS0tleXN0cm9rZUhhbmRsZXI9ZnVuY3Rpb24oQSl7dGhpcy5LZXlzdHJva2VzPXt9O3RoaXMuQ2FuY2VsQ3RybERlZmF1bHRzPShBIT09ZmFsc2UpO307RkNLS2V5c3Ryb2tlSGFuZGxlci5wcm90b3R5cGUuQXR0YWNoVG9FbGVtZW50PWZ1bmN0aW9uKEEpe0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChBLCdrZXlkb3duJyxfRkNLS2V5c3Ryb2tlSGFuZGxlcl9PbktleURvd24sdGhpcyk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja28xMHx8RkNLQnJvd3NlckluZm8uSXNPcGVyYXx8KEZDS0Jyb3dzZXJJbmZvLklzR2Vja28mJkZDS0Jyb3dzZXJJbmZvLklzTWFjKSkgRkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lckV4KEEsJ2tleXByZXNzJyxfRkNLS2V5c3Ryb2tlSGFuZGxlcl9PbktleVByZXNzLHRoaXMpO307RkNLS2V5c3Ryb2tlSGFuZGxlci5wcm90b3R5cGUuU2V0S2V5c3Ryb2tlcz1mdW5jdGlvbigpe2ZvciAodmFyIGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXt2YXIgQT1hcmd1bWVudHNbaV07aWYgKCFBKSBjb250aW51ZTtpZiAodHlwZW9mKEFbMF0pPT0nb2JqZWN0JykgdGhpcy5TZXRLZXlzdHJva2VzLmFwcGx5KHRoaXMsQSk7ZWxzZXtpZiAoQS5sZW5ndGg9PTEpIGRlbGV0ZSB0aGlzLktleXN0cm9rZXNbQVswXV07ZWxzZSB0aGlzLktleXN0cm9rZXNbQVswXV09QVsxXT09PXRydWU/dHJ1ZTpBO319fTtmdW5jdGlvbiBfRkNLS2V5c3Ryb2tlSGFuZGxlcl9PbktleURvd24oQSxCKXt2YXIgQz1BLmtleUNvZGV8fEEud2hpY2g7dmFyIEQ9MDtpZiAoQS5jdHJsS2V5fHxBLm1ldGFLZXkpIEQrPUNUUkw7aWYgKEEuc2hpZnRLZXkpIEQrPVNISUZUO2lmIChBLmFsdEtleSkgRCs9QUxUO3ZhciBFPUMrRDt2YXIgRj1CLl9DYW5jZWxJdD1mYWxzZTt2YXIgRz1CLktleXN0cm9rZXNbRV07aWYgKEcpe2lmIChHPT09dHJ1ZXx8IShCLk9uS2V5c3Ryb2tlJiZCLk9uS2V5c3Ryb2tlLmFwcGx5KEIsRykpKSByZXR1cm4gdHJ1ZTtGPXRydWU7fTtpZiAoRnx8KEIuQ2FuY2VsQ3RybERlZmF1bHRzJiZEPT1DVFJMJiYoQzwzM3x8Qz40MCkpKXtCLl9DYW5jZWxJdD10cnVlO2lmIChBLnByZXZlbnREZWZhdWx0KSByZXR1cm4gQS5wcmV2ZW50RGVmYXVsdCgpO0EucmV0dXJuVmFsdWU9ZmFsc2U7QS5jYW5jZWxCdWJibGU9dHJ1ZTtyZXR1cm4gZmFsc2U7fTtyZXR1cm4gdHJ1ZTt9O2Z1bmN0aW9uIF9GQ0tLZXlzdHJva2VIYW5kbGVyX09uS2V5UHJlc3MoQSxCKXtpZiAoQi5fQ2FuY2VsSXQpe2lmIChBLnByZXZlbnREZWZhdWx0KSByZXR1cm4gQS5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiBmYWxzZTt9O3JldHVybiB0cnVlO307CkZDSy5EVEQ9KGZ1bmN0aW9uKCl7dmFyIFg9RkNLVG9vbHMuTWVyZ2U7dmFyIEEsTCxKLE0sTixPLEQsSCxQLEssUSxGLEcsQyxCLEUsSTtBPXtpc2luZGV4OjEsZmllbGRzZXQ6MX07Qj17aW5wdXQ6MSxidXR0b246MSxzZWxlY3Q6MSx0ZXh0YXJlYToxLGxhYmVsOjF9O0M9WCh7YToxfSxCKTtEPVgoe2lmcmFtZToxfSxDKTtFPXtocjoxLHVsOjEsbWVudToxLGRpdjoxLGJsb2NrcXVvdGU6MSxub3NjcmlwdDoxLHRhYmxlOjEsY2VudGVyOjEsYWRkcmVzczoxLGRpcjoxLHByZToxLGg1OjEsZGw6MSxoNDoxLG5vZnJhbWVzOjEsaDY6MSxvbDoxLGgxOjEsaDM6MSxoMjoxfTtGPXtpbnM6MSxkZWw6MSxzY3JpcHQ6MX07Rz1YKHtiOjEsYWNyb255bToxLGJkbzoxLCd2YXInOjEsJyMnOjEsYWJicjoxLGNvZGU6MSxicjoxLGk6MSxjaXRlOjEsa2JkOjEsdToxLHN0cmlrZToxLHM6MSx0dDoxLHN0cm9uZzoxLHE6MSxzYW1wOjEsZW06MSxkZm46MSxzcGFuOjF9LEYpO0g9WCh7c3ViOjEsaW1nOjEsb2JqZWN0OjEsc3VwOjEsYmFzZWZvbnQ6MSxtYXA6MSxhcHBsZXQ6MSxmb250OjEsYmlnOjEsc21hbGw6MX0sRyk7ST1YKHtwOjF9LEgpO0o9WCh7aWZyYW1lOjF9LEgsQik7Sz17aW1nOjEsbm9zY3JpcHQ6MSxicjoxLGtiZDoxLGNlbnRlcjoxLGJ1dHRvbjoxLGJhc2Vmb250OjEsaDU6MSxoNDoxLHNhbXA6MSxoNjoxLG9sOjEsaDE6MSxoMzoxLGgyOjEsZm9ybToxLGZvbnQ6MSwnIyc6MSxzZWxlY3Q6MSxtZW51OjEsaW5zOjEsYWJicjoxLGxhYmVsOjEsY29kZToxLHRhYmxlOjEsc2NyaXB0OjEsY2l0ZToxLGlucHV0OjEsaWZyYW1lOjEsc3Ryb25nOjEsdGV4dGFyZWE6MSxub2ZyYW1lczoxLGJpZzoxLHNtYWxsOjEsc3BhbjoxLGhyOjEsc3ViOjEsYmRvOjEsJ3Zhcic6MSxkaXY6MSxvYmplY3Q6MSxzdXA6MSxzdHJpa2U6MSxkaXI6MSxtYXA6MSxkbDoxLGFwcGxldDoxLGRlbDoxLGlzaW5kZXg6MSxmaWVsZHNldDoxLHVsOjEsYjoxLGFjcm9ueW06MSxhOjEsYmxvY2txdW90ZToxLGk6MSx1OjEsczoxLHR0OjEsYWRkcmVzczoxLHE6MSxwcmU6MSxwOjEsZW06MSxkZm46MX07TD1YKHthOjF9LEopO009e3RyOjF9O049eycjJzoxfTtPPVgoe3BhcmFtOjF9LEspO1A9WCh7Zm9ybToxfSxBLEQsRSxJKTtRPXtsaToxfTtyZXR1cm4ge2NvbDp7fSx0cjp7dGQ6MSx0aDoxfSxpbWc6e30sY29sZ3JvdXA6e2NvbDoxfSxub3NjcmlwdDpQLHRkOlAsYnI6e30sdGg6UCxjZW50ZXI6UCxrYmQ6TCxidXR0b246WChJLEUpLGJhc2Vmb250Ont9LGg1OkwsaDQ6TCxzYW1wOkwsaDY6TCxvbDpRLGgxOkwsaDM6TCxvcHRpb246TixoMjpMLGZvcm06WChBLEQsRSxJKSxzZWxlY3Q6e29wdGdyb3VwOjEsb3B0aW9uOjF9LGZvbnQ6SixpbnM6UCxtZW51OlEsYWJicjpMLGxhYmVsOkwsdGFibGU6e3RoZWFkOjEsY29sOjEsdGJvZHk6MSx0cjoxLGNvbGdyb3VwOjEsY2FwdGlvbjoxLHRmb290OjF9LGNvZGU6TCxzY3JpcHQ6Tix0Zm9vdDpNLGNpdGU6TCxsaTpQLGlucHV0Ont9LGlmcmFtZTpQLHN0cm9uZzpKLHRleHRhcmVhOk4sbm9mcmFtZXM6UCxiaWc6SixzbWFsbDpKLHNwYW46Sixocjp7fSxkdDpMLHN1YjpKLG9wdGdyb3VwOntvcHRpb246MX0scGFyYW06e30sYmRvOkwsJ3Zhcic6SixkaXY6UCxvYmplY3Q6TyxzdXA6SixkZDpQLHN0cmlrZTpKLGFyZWE6e30sZGlyOlEsbWFwOlgoe2FyZWE6MSxmb3JtOjEscDoxfSxBLEYsRSksYXBwbGV0Ok8sZGw6e2R0OjEsZGQ6MX0sZGVsOlAsaXNpbmRleDp7fSxmaWVsZHNldDpYKHtsZWdlbmQ6MX0sSyksdGhlYWQ6TSx1bDpRLGFjcm9ueW06TCxiOkosYTpKLGJsb2NrcXVvdGU6UCxjYXB0aW9uOkwsaTpKLHU6Six0Ym9keTpNLHM6TCxhZGRyZXNzOlgoRCxJKSx0dDpKLGxlZ2VuZDpMLHE6TCxwcmU6WChHLEMpLHA6TCxlbTpKLGRmbjpMfTt9KSgpOwp2YXIgRkNLU3R5bGU9ZnVuY3Rpb24oQSl7dGhpcy5FbGVtZW50PShBLkVsZW1lbnR8fCdzcGFuJykudG9Mb3dlckNhc2UoKTt0aGlzLl9TdHlsZURlc2M9QTt9O0ZDS1N0eWxlLnByb3RvdHlwZT17R2V0VHlwZTpmdW5jdGlvbigpe3ZhciBBPXRoaXMuR2V0VHlwZV8kO2lmIChBIT11bmRlZmluZWQpIHJldHVybiBBO3ZhciBCPXRoaXMuRWxlbWVudDtpZiAoQj09JyMnfHxGQ0tMaXN0c0xpYi5TdHlsZUJsb2NrRWxlbWVudHNbQl0pIEE9MDtlbHNlIGlmIChGQ0tMaXN0c0xpYi5TdHlsZU9iamVjdEVsZW1lbnRzW0JdKSBBPTI7ZWxzZSBBPTE7cmV0dXJuICh0aGlzLkdldFR5cGVfJD1BKTt9LEFwcGx5VG9TZWxlY3Rpb246ZnVuY3Rpb24oQSl7dmFyIEI9bmV3IEZDS0RvbVJhbmdlKEEpO0IuTW92ZVRvU2VsZWN0aW9uKCk7dGhpcy5BcHBseVRvUmFuZ2UoQix0cnVlKTt9LEFwcGx5VG9SYW5nZTpmdW5jdGlvbihBLEIsQyl7c3dpdGNoICh0aGlzLkdldFR5cGUoKSl7Y2FzZSAwOnRoaXMuQXBwbHlUb1JhbmdlPXRoaXMuX0FwcGx5QmxvY2tTdHlsZTticmVhaztjYXNlIDE6dGhpcy5BcHBseVRvUmFuZ2U9dGhpcy5fQXBwbHlJbmxpbmVTdHlsZTticmVhaztkZWZhdWx0OnJldHVybjt9O3RoaXMuQXBwbHlUb1JhbmdlKEEsQixDKTt9LEFwcGx5VG9PYmplY3Q6ZnVuY3Rpb24oQSl7aWYgKCFBKSByZXR1cm47dGhpcy5CdWlsZEVsZW1lbnQobnVsbCxBKTt9LFJlbW92ZUZyb21TZWxlY3Rpb246ZnVuY3Rpb24oQSl7dmFyIEI9bmV3IEZDS0RvbVJhbmdlKEEpO0IuTW92ZVRvU2VsZWN0aW9uKCk7dGhpcy5SZW1vdmVGcm9tUmFuZ2UoQix0cnVlKTt9LFJlbW92ZUZyb21SYW5nZTpmdW5jdGlvbihBLEIsQyl7dmFyIEQ7dmFyIEU9dGhpcy5fR2V0QXR0cmlic0ZvckNvbXBhcmlzb24oKTt2YXIgRj10aGlzLl9HZXRPdmVycmlkZXNGb3JDb21wYXJpc29uKCk7aWYgKEEuQ2hlY2tJc0NvbGxhcHNlZCgpKXt2YXIgRD1BLkNyZWF0ZUJvb2ttYXJrKHRydWUpO3ZhciBIPUEuR2V0Qm9va21hcmtOb2RlKEQsdHJ1ZSk7dmFyIEk9bmV3IEZDS0VsZW1lbnRQYXRoKEgucGFyZW50Tm9kZSk7dmFyIEo9W107dmFyIEs9IUZDS0RvbVRvb2xzLkdldE5leHRTaWJsaW5nKEgpO3ZhciBMPUt8fCFGQ0tEb21Ub29scy5HZXRQcmV2aW91c1NpYmxpbmcoSCk7dmFyIE07dmFyIE49LTE7Zm9yICh2YXIgaT0wO2k8SS5FbGVtZW50cy5sZW5ndGg7aSsrKXt2YXIgTz1JLkVsZW1lbnRzW2ldO2lmICh0aGlzLkNoZWNrRWxlbWVudFJlbW92YWJsZShPKSl7aWYgKEwmJiFGQ0tEb21Ub29scy5DaGVja0lzRW1wdHlFbGVtZW50KE8sZnVuY3Rpb24oZWwpe3JldHVybiAoZWwhPUgpO30pKXtNPU87Tj1KLmxlbmd0aC0xO31lbHNle3ZhciBQPU8ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZiAoUD09dGhpcy5FbGVtZW50KXtmb3IgKHZhciBRIGluIEUpe2lmIChGQ0tEb21Ub29scy5IYXNBdHRyaWJ1dGUoTyxRKSl7c3dpdGNoIChRKXtjYXNlICdzdHlsZSc6dGhpcy5fUmVtb3ZlU3R5bGVzRnJvbUVsZW1lbnQoTyk7YnJlYWs7Y2FzZSAnY2xhc3MnOmlmIChGQ0tEb21Ub29scy5HZXRBdHRyaWJ1dGVWYWx1ZShPLFEpIT10aGlzLkdldEZpbmFsQXR0cmlidXRlVmFsdWUoUSkpIGNvbnRpbnVlO2RlZmF1bHQ6RkNLRG9tVG9vbHMuUmVtb3ZlQXR0cmlidXRlKE8sUSk7fX19fTt0aGlzLl9SZW1vdmVPdmVycmlkZXMoTyxGW1BdKTtpZiAodGhpcy5HZXRUeXBlKCk9PTEpIHRoaXMuX1JlbW92ZU5vQXR0cmliRWxlbWVudChPKTt9fWVsc2UgaWYgKEwpIEoucHVzaChPKTtMPUwmJigoSyYmIUZDS0RvbVRvb2xzLkdldE5leHRTaWJsaW5nKE8pKXx8KCFLJiYhRkNLRG9tVG9vbHMuR2V0UHJldmlvdXNTaWJsaW5nKE8pKSk7aWYgKE0mJighTHx8KGk9PUkuRWxlbWVudHMubGVuZ3RoLTEpKSl7dmFyIFI9RkNLRG9tVG9vbHMuUmVtb3ZlTm9kZShIKTtmb3IgKHZhciBqPTA7ajw9TjtqKyspe3ZhciBTPUZDS0RvbVRvb2xzLkNsb25lRWxlbWVudChKW2pdKTtTLmFwcGVuZENoaWxkKFIpO1I9Uzt9O2lmIChLKSBGQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoTSxSKTtlbHNlIE0ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoUixNKTtMPWZhbHNlO009bnVsbDt9fTtpZiAoQikgQS5TZWxlY3RCb29rbWFyayhEKTtpZiAoQykgQS5Nb3ZlVG9Cb29rbWFyayhEKTtyZXR1cm47fTtBLkV4cGFuZCgnaW5saW5lX2VsZW1lbnRzJyk7RD1BLkNyZWF0ZUJvb2ttYXJrKHRydWUpO3ZhciBUPUEuR2V0Qm9va21hcmtOb2RlKEQsdHJ1ZSk7dmFyIFU9QS5HZXRCb29rbWFya05vZGUoRCxmYWxzZSk7QS5SZWxlYXNlKHRydWUpO3ZhciBJPW5ldyBGQ0tFbGVtZW50UGF0aChUKTt2YXIgWD1JLkVsZW1lbnRzO3ZhciBPO2ZvciAodmFyIGk9MTtpPFgubGVuZ3RoO2krKyl7Tz1YW2ldO2lmIChPPT1JLkJsb2NrfHxPPT1JLkJsb2NrTGltaXQpIGJyZWFrO2lmICh0aGlzLkNoZWNrRWxlbWVudFJlbW92YWJsZShPKSkgRkNLRG9tVG9vbHMuQnJlYWtQYXJlbnQoVCxPLEEpO307ST1uZXcgRkNLRWxlbWVudFBhdGgoVSk7WD1JLkVsZW1lbnRzO2ZvciAodmFyIGk9MTtpPFgubGVuZ3RoO2krKyl7Tz1YW2ldO2lmIChPPT1JLkJsb2NrfHxPPT1JLkJsb2NrTGltaXQpIGJyZWFrO2I9Ty5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmICh0aGlzLkNoZWNrRWxlbWVudFJlbW92YWJsZShPKSkgRkNLRG9tVG9vbHMuQnJlYWtQYXJlbnQoVSxPLEEpO307dmFyIFo9RkNLRG9tVG9vbHMuR2V0TmV4dFNvdXJjZU5vZGUoVCx0cnVlKTt3aGlsZSAoWil7dmFyIGE9RkNLRG9tVG9vbHMuR2V0TmV4dFNvdXJjZU5vZGUoWik7aWYgKFoubm9kZVR5cGU9PTEpe3ZhciBiPVoubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2YXIgYz0oYj09dGhpcy5FbGVtZW50KTtpZiAoYyl7Zm9yICh2YXIgUSBpbiBFKXtpZiAoRkNLRG9tVG9vbHMuSGFzQXR0cmlidXRlKFosUSkpe3N3aXRjaCAoUSl7Y2FzZSAnc3R5bGUnOnRoaXMuX1JlbW92ZVN0eWxlc0Zyb21FbGVtZW50KFopO2JyZWFrO2Nhc2UgJ2NsYXNzJzppZiAoRkNLRG9tVG9vbHMuR2V0QXR0cmlidXRlVmFsdWUoWixRKSE9dGhpcy5HZXRGaW5hbEF0dHJpYnV0ZVZhbHVlKFEpKSBjb250aW51ZTtkZWZhdWx0OkZDS0RvbVRvb2xzLlJlbW92ZUF0dHJpYnV0ZShaLFEpO319fX1lbHNlIGM9ISFGW2JdO2lmIChjKXt0aGlzLl9SZW1vdmVPdmVycmlkZXMoWixGW2JdKTt0aGlzLl9SZW1vdmVOb0F0dHJpYkVsZW1lbnQoWik7fX07aWYgKGE9PVUpIGJyZWFrO1o9YTt9O3RoaXMuX0ZpeEJvb2ttYXJrU3RhcnQoVCk7aWYgKEIpIEEuU2VsZWN0Qm9va21hcmsoRCk7aWYgKEMpIEEuTW92ZVRvQm9va21hcmsoRCk7fSxDaGVja0VsZW1lbnRSZW1vdmFibGU6ZnVuY3Rpb24oQSxCKXtpZiAoIUEpIHJldHVybiBmYWxzZTt2YXIgQz1BLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYgKEM9PXRoaXMuRWxlbWVudCl7aWYgKCFCJiYhRkNLRG9tVG9vbHMuSGFzQXR0cmlidXRlcyhBKSkgcmV0dXJuIHRydWU7dmFyIEQ9dGhpcy5fR2V0QXR0cmlic0ZvckNvbXBhcmlzb24oKTt2YXIgRT0oRC5fbGVuZ3RoPT0wKTtmb3IgKHZhciBGIGluIEQpe2lmIChGPT0nX2xlbmd0aCcpIGNvbnRpbnVlO2lmICh0aGlzLl9Db21wYXJlQXR0cmlidXRlVmFsdWVzKEYsRkNLRG9tVG9vbHMuR2V0QXR0cmlidXRlVmFsdWUoQSxGKSwodGhpcy5HZXRGaW5hbEF0dHJpYnV0ZVZhbHVlKEYpfHwnJykpKXtFPXRydWU7aWYgKCFCKSBicmVhazt9ZWxzZXtFPWZhbHNlO2lmIChCKSByZXR1cm4gZmFsc2U7fX07aWYgKEUpIHJldHVybiB0cnVlO307dmFyIEc9dGhpcy5fR2V0T3ZlcnJpZGVzRm9yQ29tcGFyaXNvbigpW0NdO2lmIChHKXtpZiAoIShEPUcuQXR0cmlidXRlcykpIHJldHVybiB0cnVlO2ZvciAodmFyIGk9MDtpPEQubGVuZ3RoO2krKyl7dmFyIEg9RFtpXVswXTtpZiAoRkNLRG9tVG9vbHMuSGFzQXR0cmlidXRlKEEsSCkpe3ZhciBJPURbaV1bMV07aWYgKEk9PW51bGx8fCh0eXBlb2YgST09J3N0cmluZycmJkZDS0RvbVRvb2xzLkdldEF0dHJpYnV0ZVZhbHVlKEEsSCk9PUkpfHxJLnRlc3QoRkNLRG9tVG9vbHMuR2V0QXR0cmlidXRlVmFsdWUoQSxIKSkpIHJldHVybiB0cnVlO319fTtyZXR1cm4gZmFsc2U7fSxDaGVja0FjdGl2ZTpmdW5jdGlvbihBKXtzd2l0Y2ggKHRoaXMuR2V0VHlwZSgpKXtjYXNlIDA6cmV0dXJuIHRoaXMuQ2hlY2tFbGVtZW50UmVtb3ZhYmxlKEEuQmxvY2t8fEEuQmxvY2tMaW1pdCx0cnVlKTtjYXNlIDE6dmFyIEI9QS5FbGVtZW50cztmb3IgKHZhciBpPTA7aTxCLmxlbmd0aDtpKyspe3ZhciBDPUJbaV07aWYgKEM9PUEuQmxvY2t8fEM9PUEuQmxvY2tMaW1pdCkgY29udGludWU7aWYgKHRoaXMuQ2hlY2tFbGVtZW50UmVtb3ZhYmxlKEMsdHJ1ZSkpIHJldHVybiB0cnVlO319O3JldHVybiBmYWxzZTt9LFJlbW92ZUZyb21FbGVtZW50OmZ1bmN0aW9uKEEpe3ZhciBCPXRoaXMuX0dldEF0dHJpYnNGb3JDb21wYXJpc29uKCk7dmFyIEM9dGhpcy5fR2V0T3ZlcnJpZGVzRm9yQ29tcGFyaXNvbigpO3ZhciBEPUEuZ2V0RWxlbWVudHNCeVRhZ05hbWUodGhpcy5FbGVtZW50KTtmb3IgKHZhciBpPUQubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciBFPURbaV07Zm9yICh2YXIgRiBpbiBCKXtpZiAoRkNLRG9tVG9vbHMuSGFzQXR0cmlidXRlKEUsRikpe3N3aXRjaCAoRil7Y2FzZSAnc3R5bGUnOnRoaXMuX1JlbW92ZVN0eWxlc0Zyb21FbGVtZW50KEUpO2JyZWFrO2Nhc2UgJ2NsYXNzJzppZiAoRkNLRG9tVG9vbHMuR2V0QXR0cmlidXRlVmFsdWUoRSxGKSE9dGhpcy5HZXRGaW5hbEF0dHJpYnV0ZVZhbHVlKEYpKSBjb250aW51ZTtkZWZhdWx0OkZDS0RvbVRvb2xzLlJlbW92ZUF0dHJpYnV0ZShFLEYpO319fTt0aGlzLl9SZW1vdmVPdmVycmlkZXMoRSxDW3RoaXMuRWxlbWVudF0pO3RoaXMuX1JlbW92ZU5vQXR0cmliRWxlbWVudChFKTt9O2ZvciAodmFyIEcgaW4gQyl7aWYgKEchPXRoaXMuRWxlbWVudCl7RD1BLmdldEVsZW1lbnRzQnlUYWdOYW1lKEcpO2ZvciAodmFyIGk9RC5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIEU9RFtpXTt0aGlzLl9SZW1vdmVPdmVycmlkZXMoRSxDW0ddKTt0aGlzLl9SZW1vdmVOb0F0dHJpYkVsZW1lbnQoRSk7fX19fSxfUmVtb3ZlU3R5bGVzRnJvbUVsZW1lbnQ6ZnVuY3Rpb24oQSl7dmFyIEI9QS5zdHlsZS5jc3NUZXh0O3ZhciBDPXRoaXMuR2V0RmluYWxTdHlsZVZhbHVlKCk7aWYgKEIubGVuZ3RoPjAmJkMubGVuZ3RoPT0wKSByZXR1cm47Qz0nKF58OylcXHMqKCcrQy5yZXBsYWNlKC9ccyooW14gXSspOi4qPyg7fCQpL2csJyQxfCcpLnJlcGxhY2UoL1x8JC8sJycpKycpOlteO10rJzt2YXIgRD1uZXcgUmVnRXhwKEMsJ2dpJyk7Qj1CLnJlcGxhY2UoRCwnJykuVHJpbSgpO2lmIChCLmxlbmd0aD09MHx8Qj09JzsnKSBGQ0tEb21Ub29scy5SZW1vdmVBdHRyaWJ1dGUoQSwnc3R5bGUnKTtlbHNlIEEuc3R5bGUuY3NzVGV4dD1CLnJlcGxhY2UoRCwnJyk7fSxfUmVtb3ZlT3ZlcnJpZGVzOmZ1bmN0aW9uKEEsQil7dmFyIEM9QiYmQi5BdHRyaWJ1dGVzO2lmIChDKXtmb3IgKHZhciBpPTA7aTxDLmxlbmd0aDtpKyspe3ZhciBEPUNbaV1bMF07aWYgKEZDS0RvbVRvb2xzLkhhc0F0dHJpYnV0ZShBLEQpKXt2YXIgRT1DW2ldWzFdO2lmIChFPT1udWxsfHwoRS50ZXN0JiZFLnRlc3QoRkNLRG9tVG9vbHMuR2V0QXR0cmlidXRlVmFsdWUoQSxEKSkpfHwodHlwZW9mIEU9PSdzdHJpbmcnJiZGQ0tEb21Ub29scy5HZXRBdHRyaWJ1dGVWYWx1ZShBLEQpPT1FKSkgRkNLRG9tVG9vbHMuUmVtb3ZlQXR0cmlidXRlKEEsRCk7fX19fSxfUmVtb3ZlTm9BdHRyaWJFbGVtZW50OmZ1bmN0aW9uKEEpe2lmICghRkNLRG9tVG9vbHMuSGFzQXR0cmlidXRlcyhBKSl7dmFyIEI9QS5maXJzdENoaWxkO3ZhciBDPUEubGFzdENoaWxkO0ZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoQSx0cnVlKTt0aGlzLl9NZXJnZVNpYmxpbmdzKEIpO2lmIChCIT1DKSB0aGlzLl9NZXJnZVNpYmxpbmdzKEMpO319LEJ1aWxkRWxlbWVudDpmdW5jdGlvbihBLEIpe3ZhciBDPUJ8fEEuY3JlYXRlRWxlbWVudCh0aGlzLkVsZW1lbnQpO3ZhciBEPXRoaXMuX1N0eWxlRGVzYy5BdHRyaWJ1dGVzO3ZhciBFO2lmIChEKXtmb3IgKHZhciBGIGluIEQpe0U9dGhpcy5HZXRGaW5hbEF0dHJpYnV0ZVZhbHVlKEYpO2lmIChGLnRvTG93ZXJDYXNlKCk9PSdjbGFzcycpIEMuY2xhc3NOYW1lPUU7ZWxzZSBDLnNldEF0dHJpYnV0ZShGLEUpO319O2lmICh0aGlzLl9HZXRTdHlsZVRleHQoKS5sZW5ndGg+MCkgQy5zdHlsZS5jc3NUZXh0PXRoaXMuR2V0RmluYWxTdHlsZVZhbHVlKCk7cmV0dXJuIEM7fSxfQ29tcGFyZUF0dHJpYnV0ZVZhbHVlczpmdW5jdGlvbihBLEIsQyl7aWYgKEE9PSdzdHlsZScmJkImJkMpe0I9Qi5yZXBsYWNlKC87JC8sJycpLnRvTG93ZXJDYXNlKCk7Qz1DLnJlcGxhY2UoLzskLywnJykudG9Mb3dlckNhc2UoKTt9O3JldHVybiAoQj09Q3x8KChCPT09bnVsbHx8Qj09PScnKSYmKEM9PT1udWxsfHxDPT09JycpKSl9LEdldEZpbmFsQXR0cmlidXRlVmFsdWU6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5fU3R5bGVEZXNjLkF0dHJpYnV0ZXM7dmFyIEI9Qj9CW0FdOm51bGw7aWYgKCFCJiZBPT0nc3R5bGUnKSByZXR1cm4gdGhpcy5HZXRGaW5hbFN0eWxlVmFsdWUoKTtpZiAoQiYmdGhpcy5fVmFyaWFibGVzKSBCPUIuUmVwbGFjZShGQ0tSZWdleExpYi5TdHlsZVZhcmlhYmxlQXR0TmFtZSx0aGlzLl9HZXRWYXJpYWJsZVJlcGxhY2UsdGhpcyk7cmV0dXJuIEI7fSxHZXRGaW5hbFN0eWxlVmFsdWU6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLl9HZXRTdHlsZVRleHQoKTtpZiAoQS5sZW5ndGg+MCYmdGhpcy5fVmFyaWFibGVzKXtBPUEuUmVwbGFjZShGQ0tSZWdleExpYi5TdHlsZVZhcmlhYmxlQXR0TmFtZSx0aGlzLl9HZXRWYXJpYWJsZVJlcGxhY2UsdGhpcyk7QT1GQ0tUb29scy5Ob3JtYWxpemVDc3NUZXh0KEEpO307cmV0dXJuIEE7fSxfR2V0VmFyaWFibGVSZXBsYWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX1ZhcmlhYmxlc1thcmd1bWVudHNbMl1dfHxhcmd1bWVudHNbMF07fSxTZXRWYXJpYWJsZTpmdW5jdGlvbihBLEIpe3ZhciBDPXRoaXMuX1ZhcmlhYmxlcztpZiAoIUMpIEM9dGhpcy5fVmFyaWFibGVzPXt9O3RoaXMuX1ZhcmlhYmxlc1tBXT1CO30sX0Zyb21QcmU6ZnVuY3Rpb24oQSxCLEMpe3ZhciBEPUIuaW5uZXJIVE1MO0Q9RC5yZXBsYWNlKC8oXHJcbnxccikvZywnXG4nKTtEPUQucmVwbGFjZSgvXlsgXHRdKlxuLywnJyk7RD1ELnJlcGxhY2UoL1xuJC8sJycpO0Q9RC5yZXBsYWNlKC9eWyBcdF0rfFsgXHRdKyQvZyxmdW5jdGlvbihtYXRjaCxvZmZzZXQscyl7aWYgKG1hdGNoLmxlbmd0aD09MSkgcmV0dXJuICcmbmJzcDsnO2Vsc2UgaWYgKG9mZnNldD09MCkgcmV0dXJuIG5ldyBBcnJheShtYXRjaC5sZW5ndGgpLmpvaW4oJyZuYnNwOycpKycgJztlbHNlIHJldHVybiAnICcrbmV3IEFycmF5KG1hdGNoLmxlbmd0aCkuam9pbignJm5ic3A7Jyk7fSk7dmFyIEU9bmV3IEZDS0h0bWxJdGVyYXRvcihEKTt2YXIgRj1bXTtFLkVhY2goZnVuY3Rpb24oaXNUYWcsdmFsdWUpe2lmICghaXNUYWcpe3ZhbHVlPXZhbHVlLnJlcGxhY2UoL1xuL2csJzxicj4nKTt2YWx1ZT12YWx1ZS5yZXBsYWNlKC9bIFx0XXsyLH0vZyxmdW5jdGlvbiAobWF0Y2gpe3JldHVybiBuZXcgQXJyYXkobWF0Y2gubGVuZ3RoKS5qb2luKCcmbmJzcDsnKSsnICc7fSk7fTtGLnB1c2godmFsdWUpO30pO0MuaW5uZXJIVE1MPUYuam9pbignJyk7cmV0dXJuIEM7fSxfVG9QcmU6ZnVuY3Rpb24oQSxCLEMpe3ZhciBEPUIuaW5uZXJIVE1MLlRyaW0oKTtEPUQucmVwbGFjZSgvWyBcdFxyXG5dKig8YnJbXj5dKj4pWyBcdFxyXG5dKi9naSwnPGJyIC8+Jyk7dmFyIEU9bmV3IEZDS0h0bWxJdGVyYXRvcihEKTt2YXIgRj1bXTtFLkVhY2goZnVuY3Rpb24oaXNUYWcsdmFsdWUpe2lmICghaXNUYWcpIHZhbHVlPXZhbHVlLnJlcGxhY2UoLyhbIFx0XG5ccl0rfCZuYnNwOykvZywnICcpO2Vsc2UgaWYgKGlzVGFnJiZ2YWx1ZT09JzxiciAvPicpIHZhbHVlPSdcbic7Ri5wdXNoKHZhbHVlKTt9KTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSl7dmFyIEc9QS5jcmVhdGVFbGVtZW50KCdkaXYnKTtHLmFwcGVuZENoaWxkKEMpO0Mub3V0ZXJIVE1MPSc8cHJlPlxuJytGLmpvaW4oJycpKyc8L3ByZT4nO0M9Ry5yZW1vdmVDaGlsZChHLmZpcnN0Q2hpbGQpO31lbHNlIEMuaW5uZXJIVE1MPUYuam9pbignJyk7cmV0dXJuIEM7fSxfQ2hlY2tBbmRNZXJnZVByZTpmdW5jdGlvbihBLEIpe2lmIChBIT1GQ0tEb21Ub29scy5HZXRQcmV2aW91c1NvdXJjZUVsZW1lbnQoQix0cnVlKSkgcmV0dXJuO3ZhciBDPUEuaW5uZXJIVE1MLnJlcGxhY2UoL1xuJC8sJycpKydcblxuJytCLmlubmVySFRNTC5yZXBsYWNlKC9eXG4vLCcnKTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgQi5vdXRlckhUTUw9JzxwcmU+JytDKyc8L3ByZT4nO2Vsc2UgQi5pbm5lckhUTUw9QztGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEEpO30sX0NoZWNrQW5kU3BsaXRQcmU6ZnVuY3Rpb24oQSl7dmFyIEI7dmFyIEM9QS5maXJzdENoaWxkO0M9QyYmQy5uZXh0U2libGluZzt3aGlsZSAoQyl7dmFyIEQ9Qy5uZXh0U2libGluZztpZiAoRCYmRC5uZXh0U2libGluZyYmQy5ub2RlTmFtZS5JRXF1YWxzKCdicicpJiZELm5vZGVOYW1lLklFcXVhbHMoJ2JyJykpe0ZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoQyk7Qz1ELm5leHRTaWJsaW5nO0ZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoRCk7Qj1GQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoQnx8QSxGQ0tEb21Ub29scy5DbG9uZUVsZW1lbnQoQSkpO2NvbnRpbnVlO307aWYgKEIpe0M9Qy5wcmV2aW91c1NpYmxpbmc7RkNLRG9tVG9vbHMuTW92ZU5vZGUoQy5uZXh0U2libGluZyxCKTt9O0M9Qy5uZXh0U2libGluZzt9fSxfQXBwbHlCbG9ja1N0eWxlOmZ1bmN0aW9uKEEsQixDKXt2YXIgRDtpZiAoQikgRD1BLkNyZWF0ZUJvb2ttYXJrKCk7dmFyIEU9bmV3IEZDS0RvbVJhbmdlSXRlcmF0b3IoQSk7RS5FbmZvcmNlUmVhbEJsb2Nrcz10cnVlO3ZhciBGO3ZhciBHPUEuV2luZG93LmRvY3VtZW50O3ZhciBIO3doaWxlKChGPUUuR2V0TmV4dFBhcmFncmFwaCgpKSl7dmFyIEk9dGhpcy5CdWlsZEVsZW1lbnQoRyk7dmFyIEo9SS5ub2RlTmFtZS5JRXF1YWxzKCdwcmUnKTt2YXIgSz1GLm5vZGVOYW1lLklFcXVhbHMoJ3ByZScpO3ZhciBMPUomJiFLO3ZhciBNPSFKJiZLO2lmIChMKSBJPXRoaXMuX1RvUHJlKEcsRixJKTtlbHNlIGlmIChNKSBJPXRoaXMuX0Zyb21QcmUoRyxGLEkpO2Vsc2UgRkNLRG9tVG9vbHMuTW92ZUNoaWxkcmVuKEYsSSk7Ri5wYXJlbnROb2RlLmluc2VydEJlZm9yZShJLEYpO0ZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoRik7aWYgKEope2lmIChIKSB0aGlzLl9DaGVja0FuZE1lcmdlUHJlKEgsSSk7SD1JO31lbHNlIGlmIChNKSB0aGlzLl9DaGVja0FuZFNwbGl0UHJlKEkpO307aWYgKEIpIEEuU2VsZWN0Qm9va21hcmsoRCk7aWYgKEMpIEEuTW92ZVRvQm9va21hcmsoRCk7fSxfQXBwbHlJbmxpbmVTdHlsZTpmdW5jdGlvbihBLEIsQyl7dmFyIEQ9QS5XaW5kb3cuZG9jdW1lbnQ7aWYgKEEuQ2hlY2tJc0NvbGxhcHNlZCgpKXt2YXIgRT10aGlzLkJ1aWxkRWxlbWVudChEKTtBLkluc2VydE5vZGUoRSk7QS5Nb3ZlVG9Qb3NpdGlvbihFLDIpO0EuU2VsZWN0KCk7cmV0dXJuO307dmFyIEY9dGhpcy5FbGVtZW50O3ZhciBHPUZDSy5EVERbRl18fEZDSy5EVEQuc3Bhbjt2YXIgSD10aGlzLl9HZXRBdHRyaWJzRm9yQ29tcGFyaXNvbigpO3ZhciBJO0EuRXhwYW5kKCdpbmxpbmVfZWxlbWVudHMnKTt2YXIgSj1BLkNyZWF0ZUJvb2ttYXJrKHRydWUpO3ZhciBLPUEuR2V0Qm9va21hcmtOb2RlKEosdHJ1ZSk7dmFyIEw9QS5HZXRCb29rbWFya05vZGUoSixmYWxzZSk7QS5SZWxlYXNlKHRydWUpO3ZhciBNPUZDS0RvbVRvb2xzLkdldE5leHRTb3VyY2VOb2RlKEssdHJ1ZSk7d2hpbGUgKE0pe3ZhciBOPWZhbHNlO3ZhciBPPU0ubm9kZVR5cGU7dmFyIFA9Tz09MT9NLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk6bnVsbDtpZiAoIVB8fEdbUF0pe2lmICgoRkNLLkRURFtNLnBhcmVudE5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKV18fEZDSy5EVEQuc3BhbilbRl18fCFGQ0suRFREW0ZdKXtpZiAoIUEuQ2hlY2tIYXNSYW5nZSgpKSBBLlNldFN0YXJ0KE0sMyk7aWYgKE8hPTF8fE0uY2hpbGROb2Rlcy5sZW5ndGg9PTApe3ZhciBRPU07dmFyIFI9US5wYXJlbnROb2RlO3doaWxlIChRPT1SLmxhc3RDaGlsZCYmR1tSLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKXtRPVI7fTtBLlNldEVuZChRLDQpO2lmIChRPT1RLnBhcmVudE5vZGUubGFzdENoaWxkJiYhR1tRLnBhcmVudE5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pIE49dHJ1ZTt9ZWxzZXtBLlNldEVuZChNLDMpO319ZWxzZSBOPXRydWU7fWVsc2UgTj10cnVlO009RkNLRG9tVG9vbHMuR2V0TmV4dFNvdXJjZU5vZGUoTSk7aWYgKE09PUwpe009bnVsbDtOPXRydWU7fTtpZiAoTiYmQS5DaGVja0hhc1JhbmdlKCkmJiFBLkNoZWNrSXNDb2xsYXBzZWQoKSl7ST10aGlzLkJ1aWxkRWxlbWVudChEKTtBLkV4dHJhY3RDb250ZW50cygpLkFwcGVuZFRvKEkpO2lmIChJLmlubmVySFRNTC5SVHJpbSgpLmxlbmd0aD4wKXtBLkluc2VydE5vZGUoSSk7dGhpcy5SZW1vdmVGcm9tRWxlbWVudChJKTt0aGlzLl9NZXJnZVNpYmxpbmdzKEksdGhpcy5fR2V0QXR0cmlic0ZvckNvbXBhcmlzb24oKSk7aWYgKCFGQ0tCcm93c2VySW5mby5Jc0lFKSBJLm5vcm1hbGl6ZSgpO307QS5SZWxlYXNlKHRydWUpO319O3RoaXMuX0ZpeEJvb2ttYXJrU3RhcnQoSyk7aWYgKEIpIEEuU2VsZWN0Qm9va21hcmsoSik7aWYgKEMpIEEuTW92ZVRvQm9va21hcmsoSik7fSxfRml4Qm9va21hcmtTdGFydDpmdW5jdGlvbihBKXt2YXIgQjt3aGlsZSAoKEI9QS5uZXh0U2libGluZykpe2lmIChCLm5vZGVUeXBlPT0xJiZGQ0tMaXN0c0xpYi5JbmxpbmVOb25FbXB0eUVsZW1lbnRzW0Iubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pe2lmICghQi5maXJzdENoaWxkKSBGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEIpO2Vsc2UgRkNLRG9tVG9vbHMuTW92ZU5vZGUoQSxCLHRydWUpO2NvbnRpbnVlO307aWYgKEIubm9kZVR5cGU9PTMmJkIubGVuZ3RoPT0wKXtGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEIpO2NvbnRpbnVlO307YnJlYWs7fX0sX01lcmdlU2libGluZ3M6ZnVuY3Rpb24oQSxCKXtpZiAoIUF8fEEubm9kZVR5cGUhPTF8fCFGQ0tMaXN0c0xpYi5JbmxpbmVOb25FbXB0eUVsZW1lbnRzW0Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pIHJldHVybjt0aGlzLl9NZXJnZU5leHRTaWJsaW5nKEEsQik7dGhpcy5fTWVyZ2VQcmV2aW91c1NpYmxpbmcoQSxCKTt9LF9NZXJnZU5leHRTaWJsaW5nOmZ1bmN0aW9uKEEsQil7dmFyIEM9QS5uZXh0U2libGluZzt2YXIgRD0oQyYmQy5ub2RlVHlwZT09MSYmQy5nZXRBdHRyaWJ1dGUoJ19mY2tfYm9va21hcmsnKSk7aWYgKEQpIEM9Qy5uZXh0U2libGluZztpZiAoQyYmQy5ub2RlVHlwZT09MSYmQy5ub2RlTmFtZT09QS5ub2RlTmFtZSl7aWYgKCFCKSBCPXRoaXMuX0NyZWF0ZUVsZW1lbnRBdHRyaWJzRm9yQ29tcGFyaXNvbihBKTtpZiAodGhpcy5fQ2hlY2tBdHRyaWJ1dGVzTWF0Y2goQyxCKSl7dmFyIEU9QS5sYXN0Q2hpbGQ7aWYgKEQpIEZDS0RvbVRvb2xzLk1vdmVOb2RlKEEubmV4dFNpYmxpbmcsQSk7RkNLRG9tVG9vbHMuTW92ZUNoaWxkcmVuKEMsQSk7RkNLRG9tVG9vbHMuUmVtb3ZlTm9kZShDKTtpZiAoRSkgdGhpcy5fTWVyZ2VOZXh0U2libGluZyhFKTt9fX0sX01lcmdlUHJldmlvdXNTaWJsaW5nOmZ1bmN0aW9uKEEsQil7dmFyIEM9QS5wcmV2aW91c1NpYmxpbmc7dmFyIEQ9KEMmJkMubm9kZVR5cGU9PTEmJkMuZ2V0QXR0cmlidXRlKCdfZmNrX2Jvb2ttYXJrJykpO2lmIChEKSBDPUMucHJldmlvdXNTaWJsaW5nO2lmIChDJiZDLm5vZGVUeXBlPT0xJiZDLm5vZGVOYW1lPT1BLm5vZGVOYW1lKXtpZiAoIUIpIEI9dGhpcy5fQ3JlYXRlRWxlbWVudEF0dHJpYnNGb3JDb21wYXJpc29uKEEpO2lmICh0aGlzLl9DaGVja0F0dHJpYnV0ZXNNYXRjaChDLEIpKXt2YXIgRT1BLmZpcnN0Q2hpbGQ7aWYgKEQpIEZDS0RvbVRvb2xzLk1vdmVOb2RlKEEucHJldmlvdXNTaWJsaW5nLEEsdHJ1ZSk7RkNLRG9tVG9vbHMuTW92ZUNoaWxkcmVuKEMsQSx0cnVlKTtGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEMpO2lmIChFKSB0aGlzLl9NZXJnZVByZXZpb3VzU2libGluZyhFKTt9fX0sX0dldFN0eWxlVGV4dDpmdW5jdGlvbigpe3ZhciBBPXRoaXMuX1N0eWxlRGVzYy5TdHlsZXM7dmFyIEI9KHRoaXMuX1N0eWxlRGVzYy5BdHRyaWJ1dGVzP3RoaXMuX1N0eWxlRGVzYy5BdHRyaWJ1dGVzWydzdHlsZSddfHwnJzonJyk7aWYgKEIubGVuZ3RoPjApIEIrPSc7Jztmb3IgKHZhciBDIGluIEEpIEIrPUMrJzonK0FbQ10rJzsnO2lmIChCLmxlbmd0aD4wJiYhKC8jXCgvLnRlc3QoQikpKXtCPUZDS1Rvb2xzLk5vcm1hbGl6ZUNzc1RleHQoQik7fTtyZXR1cm4gKHRoaXMuX0dldFN0eWxlVGV4dD1mdW5jdGlvbigpIHsgcmV0dXJuIEI7fSkoKTt9LF9HZXRBdHRyaWJzRm9yQ29tcGFyaXNvbjpmdW5jdGlvbigpe3ZhciBBPXRoaXMuX0dldEF0dHJpYnNGb3JDb21wYXJpc29uXyQ7aWYgKEEpIHJldHVybiBBO0E9e307dmFyIEI9dGhpcy5fU3R5bGVEZXNjLkF0dHJpYnV0ZXM7aWYgKEIpe2ZvciAodmFyIEMgaW4gQil7QVtDLnRvTG93ZXJDYXNlKCldPUJbQ10udG9Mb3dlckNhc2UoKTt9fTtpZiAodGhpcy5fR2V0U3R5bGVUZXh0KCkubGVuZ3RoPjApe0FbJ3N0eWxlJ109dGhpcy5fR2V0U3R5bGVUZXh0KCkudG9Mb3dlckNhc2UoKTt9O0ZDS1Rvb2xzLkFwcGVuZExlbmd0aFByb3BlcnR5KEEsJ19sZW5ndGgnKTtyZXR1cm4gKHRoaXMuX0dldEF0dHJpYnNGb3JDb21wYXJpc29uXyQ9QSk7fSxfR2V0T3ZlcnJpZGVzRm9yQ29tcGFyaXNvbjpmdW5jdGlvbigpe3ZhciBBPXRoaXMuX0dldE92ZXJyaWRlc0ZvckNvbXBhcmlzb25fJDtpZiAoQSkgcmV0dXJuIEE7QT17fTt2YXIgQj10aGlzLl9TdHlsZURlc2MuT3ZlcnJpZGVzO2lmIChCKXtpZiAoIUZDS1Rvb2xzLklzQXJyYXkoQikpIEI9W0JdO2ZvciAodmFyIGk9MDtpPEIubGVuZ3RoO2krKyl7dmFyIEM9QltpXTt2YXIgRDt2YXIgRTt2YXIgRjtpZiAodHlwZW9mIEM9PSdzdHJpbmcnKSBEPUMudG9Mb3dlckNhc2UoKTtlbHNle0Q9Qy5FbGVtZW50P0MuRWxlbWVudC50b0xvd2VyQ2FzZSgpOnRoaXMuRWxlbWVudDtGPUMuQXR0cmlidXRlczt9O0U9QVtEXXx8KEFbRF09e30pO2lmIChGKXt2YXIgRz0oRS5BdHRyaWJ1dGVzPUUuQXR0cmlidXRlc3x8W10pO2ZvciAodmFyIEggaW4gRil7Ry5wdXNoKFtILnRvTG93ZXJDYXNlKCksRltIXV0pO319fX07cmV0dXJuICh0aGlzLl9HZXRPdmVycmlkZXNGb3JDb21wYXJpc29uXyQ9QSk7fSxfQ3JlYXRlRWxlbWVudEF0dHJpYnNGb3JDb21wYXJpc29uOmZ1bmN0aW9uKEEpe3ZhciBCPXt9O3ZhciBDPTA7Zm9yICh2YXIgaT0wO2k8QS5hdHRyaWJ1dGVzLmxlbmd0aDtpKyspe3ZhciBEPUEuYXR0cmlidXRlc1tpXTtpZiAoRC5zcGVjaWZpZWQpe0JbRC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXT1GQ0tEb21Ub29scy5HZXRBdHRyaWJ1dGVWYWx1ZShBLEQpLnRvTG93ZXJDYXNlKCk7QysrO319O0IuX2xlbmd0aD1DO3JldHVybiBCO30sX0NoZWNrQXR0cmlidXRlc01hdGNoOmZ1bmN0aW9uKEEsQil7dmFyIEM9QS5hdHRyaWJ1dGVzO3ZhciBEPTA7Zm9yICh2YXIgaT0wO2k8Qy5sZW5ndGg7aSsrKXt2YXIgRT1DW2ldO2lmIChFLnNwZWNpZmllZCl7dmFyIEY9RS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3ZhciBHPUJbRl07aWYgKCFHKSBicmVhaztpZiAoRyE9RkNLRG9tVG9vbHMuR2V0QXR0cmlidXRlVmFsdWUoQSxFKS50b0xvd2VyQ2FzZSgpKSBicmVhaztEKys7fX07cmV0dXJuIChEPT1CLl9sZW5ndGgpO319Owp2YXIgRkNLU3R5bGVzPUZDSy5TdHlsZXM9e19DYWxsYmFja3M6e30sX09iamVjdFN0eWxlczp7fSxBcHBseVN0eWxlOmZ1bmN0aW9uKEEpe2lmICh0eXBlb2YgQT09J3N0cmluZycpIEE9dGhpcy5HZXRTdHlsZXMoKVtBXTtpZiAoQSl7aWYgKEEuR2V0VHlwZSgpPT0yKSBBLkFwcGx5VG9PYmplY3QoRkNLU2VsZWN0aW9uLkdldFNlbGVjdGVkRWxlbWVudCgpKTtlbHNlIEEuQXBwbHlUb1NlbGVjdGlvbihGQ0suRWRpdG9yV2luZG93KTtGQ0suRXZlbnRzLkZpcmVFdmVudCgnT25TZWxlY3Rpb25DaGFuZ2UnKTt9fSxSZW1vdmVTdHlsZTpmdW5jdGlvbihBKXtpZiAodHlwZW9mIEE9PSdzdHJpbmcnKSBBPXRoaXMuR2V0U3R5bGVzKClbQV07aWYgKEEpe0EuUmVtb3ZlRnJvbVNlbGVjdGlvbihGQ0suRWRpdG9yV2luZG93KTtGQ0suRXZlbnRzLkZpcmVFdmVudCgnT25TZWxlY3Rpb25DaGFuZ2UnKTt9fSxBdHRhY2hTdHlsZVN0YXRlQ2hhbmdlOmZ1bmN0aW9uKEEsQixDKXt2YXIgRD10aGlzLl9DYWxsYmFja3NbQV07aWYgKCFEKSBEPXRoaXMuX0NhbGxiYWNrc1tBXT1bXTtELnB1c2goW0IsQ10pO30sQ2hlY2tTZWxlY3Rpb25DaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIEE9RkNLU2VsZWN0aW9uLkdldEJvdW5kYXJ5UGFyZW50RWxlbWVudCh0cnVlKTtpZiAoIUEpIHJldHVybjt2YXIgQj1uZXcgRkNLRWxlbWVudFBhdGgoQSk7dmFyIEM9dGhpcy5HZXRTdHlsZXMoKTtmb3IgKHZhciBEIGluIEMpe3ZhciBFPXRoaXMuX0NhbGxiYWNrc1tEXTtpZiAoRSl7dmFyIEY9Q1tEXTt2YXIgRz1GLkNoZWNrQWN0aXZlKEIpO2lmIChHIT0oRi5fTGFzdFN0YXRlfHxudWxsKSl7Ri5fTGFzdFN0YXRlPUc7Zm9yICh2YXIgaT0wO2k8RS5sZW5ndGg7aSsrKXt2YXIgSD1FW2ldWzBdO3ZhciBJPUVbaV1bMV07SC5jYWxsKEl8fHdpbmRvdyxELEcpO319fX19LENoZWNrU3R5bGVJblNlbGVjdGlvbjpmdW5jdGlvbihBKXtyZXR1cm4gZmFsc2U7fSxfR2V0UmVtb3ZlRm9ybWF0VGFnc1JlZ2V4OmZ1bmN0aW9uICgpe3ZhciBBPW5ldyBSZWdFeHAoJ14oPzonK0ZDS0NvbmZpZy5SZW1vdmVGb3JtYXRUYWdzLnJlcGxhY2UoLywvZywnfCcpKycpJCcsJ2knKTtyZXR1cm4gKHRoaXMuX0dldFJlbW92ZUZvcm1hdFRhZ3NSZWdleD1mdW5jdGlvbigpe3JldHVybiBBO30pJiZBO30sUmVtb3ZlQWxsOmZ1bmN0aW9uKCl7dmFyIEE9bmV3IEZDS0RvbVJhbmdlKEZDSy5FZGl0b3JXaW5kb3cpO0EuTW92ZVRvU2VsZWN0aW9uKCk7aWYgKEEuQ2hlY2tJc0NvbGxhcHNlZCgpKSByZXR1cm47QS5FeHBhbmQoJ2lubGluZV9lbGVtZW50cycpO3ZhciBCPUEuQ3JlYXRlQm9va21hcmsodHJ1ZSk7dmFyIEM9QS5HZXRCb29rbWFya05vZGUoQix0cnVlKTt2YXIgRD1BLkdldEJvb2ttYXJrTm9kZShCLGZhbHNlKTtBLlJlbGVhc2UodHJ1ZSk7dmFyIEU9dGhpcy5fR2V0UmVtb3ZlRm9ybWF0VGFnc1JlZ2V4KCk7dmFyIEY9bmV3IEZDS0VsZW1lbnRQYXRoKEMpO3ZhciBHPUYuRWxlbWVudHM7dmFyIEg7Zm9yICh2YXIgaT0xO2k8Ry5sZW5ndGg7aSsrKXtIPUdbaV07aWYgKEg9PUYuQmxvY2t8fEg9PUYuQmxvY2tMaW1pdCkgYnJlYWs7aWYgKEUudGVzdChILm5vZGVOYW1lKSkgRkNLRG9tVG9vbHMuQnJlYWtQYXJlbnQoQyxILEEpO307Rj1uZXcgRkNLRWxlbWVudFBhdGgoRCk7Rz1GLkVsZW1lbnRzO2ZvciAodmFyIGk9MTtpPEcubGVuZ3RoO2krKyl7SD1HW2ldO2lmIChIPT1GLkJsb2NrfHxIPT1GLkJsb2NrTGltaXQpIGJyZWFrO2VsZW1lbnROYW1lPUgubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZiAoRS50ZXN0KEgubm9kZU5hbWUpKSBGQ0tEb21Ub29scy5CcmVha1BhcmVudChELEgsQSk7fTt2YXIgST1GQ0tEb21Ub29scy5HZXROZXh0U291cmNlTm9kZShDLHRydWUsMSk7d2hpbGUgKEkpe2lmIChJPT1EKSBicmVhazt2YXIgSj1GQ0tEb21Ub29scy5HZXROZXh0U291cmNlTm9kZShJLGZhbHNlLDEpO2lmIChFLnRlc3QoSS5ub2RlTmFtZSkpIEZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoSSx0cnVlKTtlbHNlIEZDS0RvbVRvb2xzLlJlbW92ZUF0dHJpYnV0ZXMoSSxGQ0tDb25maWcuUmVtb3ZlQXR0cmlidXRlc0FycmF5KTtJPUo7fTtBLlNlbGVjdEJvb2ttYXJrKEIpO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCdPblNlbGVjdGlvbkNoYW5nZScpO30sR2V0U3R5bGU6ZnVuY3Rpb24oQSl7cmV0dXJuIHRoaXMuR2V0U3R5bGVzKClbQV07fSxHZXRTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLl9HZXRTdHlsZXM7aWYgKCFBKXtBPXRoaXMuX0dldFN0eWxlcz1GQ0tUb29scy5NZXJnZSh0aGlzLl9Mb2FkU3R5bGVzQ29yZSgpLHRoaXMuX0xvYWRTdHlsZXNDdXN0b20oKSx0aGlzLl9Mb2FkU3R5bGVzWG1sKCkpO307cmV0dXJuIEE7fSxDaGVja0hhc09iamVjdFN0eWxlOmZ1bmN0aW9uKEEpe3JldHVybiEhdGhpcy5fT2JqZWN0U3R5bGVzW0FdO30sX0xvYWRTdHlsZXNDb3JlOmZ1bmN0aW9uKCl7dmFyIEE9e307dmFyIEI9RkNLQ29uZmlnLkNvcmVTdHlsZXM7Zm9yICh2YXIgQyBpbiBCKXt2YXIgRD1BWydfRkNLXycrQ109bmV3IEZDS1N0eWxlKEJbQ10pO0QuSXNDb3JlPXRydWU7fTtyZXR1cm4gQTt9LF9Mb2FkU3R5bGVzQ3VzdG9tOmZ1bmN0aW9uKCl7dmFyIEE9e307dmFyIEI9RkNLQ29uZmlnLkN1c3RvbVN0eWxlcztpZiAoQil7Zm9yICh2YXIgQyBpbiBCKXt2YXIgRD1BW0NdPW5ldyBGQ0tTdHlsZShCW0NdKTtELk5hbWU9Qzt9fTtyZXR1cm4gQTt9LF9Mb2FkU3R5bGVzWG1sOmZ1bmN0aW9uKCl7dmFyIEE9e307dmFyIEI9RkNLQ29uZmlnLlN0eWxlc1htbFBhdGg7aWYgKCFCfHxCLmxlbmd0aD09MCkgcmV0dXJuIEE7dmFyIEM9bmV3IEZDS1htbCgpO0MuTG9hZFVybChCKTt2YXIgRD1GQ0tYbWwuVHJhbnNmb3JtVG9PYmplY3QoQy5TZWxlY3RTaW5nbGVOb2RlKCdTdHlsZXMnKSk7dmFyIEU9RC4kU3R5bGU7aWYgKCFFKSByZXR1cm4gQTtmb3IgKHZhciBpPTA7aTxFLmxlbmd0aDtpKyspe3ZhciBGPUVbaV07dmFyIEc9KEYuZWxlbWVudHx8JycpLnRvTG93ZXJDYXNlKCk7aWYgKEcubGVuZ3RoPT0wKSB0aHJvdygnVGhlIGVsZW1lbnQgbmFtZSBpcyByZXF1aXJlZC4gRXJyb3IgbG9hZGluZyAiJytCKyciJyk7dmFyIEg9e0VsZW1lbnQ6RyxBdHRyaWJ1dGVzOnt9LFN0eWxlczp7fSxPdmVycmlkZXM6W119O3ZhciBJPUYuJEF0dHJpYnV0ZXx8W107Zm9yICh2YXIgaj0wO2o8SS5sZW5ndGg7aisrKXtILkF0dHJpYnV0ZXNbSVtqXS5uYW1lXT1JW2pdLnZhbHVlO307dmFyIEo9Ri4kU3R5bGV8fFtdO2ZvciAoaj0wO2o8Si5sZW5ndGg7aisrKXtILlN0eWxlc1tKW2pdLm5hbWVdPUpbal0udmFsdWU7fTt2YXIgSz1GLiRPdmVycmlkZTtpZiAoSyl7Zm9yIChqPTA7ajxLLmxlbmd0aDtqKyspe3ZhciBMPUtbal07dmFyIE09e0VsZW1lbnQ6TC5lbGVtZW50fTt2YXIgTj1MLiRBdHRyaWJ1dGU7aWYgKE4pe00uQXR0cmlidXRlcz17fTtmb3IgKHZhciBrPTA7azxOLmxlbmd0aDtrKyspe3ZhciBPPU5ba10udmFsdWV8fG51bGw7aWYgKE8pe3ZhciBQPU8mJkZDS1JlZ2V4TGliLlJlZ0V4cC5leGVjKE8pO2lmIChQKSBPPW5ldyBSZWdFeHAoUFsxXSxQWzJdfHwnJyk7fTtNLkF0dHJpYnV0ZXNbTltrXS5uYW1lXT1PO319O0guT3ZlcnJpZGVzLnB1c2goTSk7fX07dmFyIFE9bmV3IEZDS1N0eWxlKEgpO1EuTmFtZT1GLm5hbWV8fEc7aWYgKFEuR2V0VHlwZSgpPT0yKSB0aGlzLl9PYmplY3RTdHlsZXNbR109dHJ1ZTtBW1EuTmFtZV09UTt9O3JldHVybiBBO319Owp2YXIgRkNLTGlzdEhhbmRsZXI9e091dGRlbnRMaXN0SXRlbTpmdW5jdGlvbihBKXt2YXIgQj1BLnBhcmVudE5vZGU7aWYgKEIudGFnTmFtZS50b1VwcGVyQ2FzZSgpLkVxdWFscygnVUwnLCdPTCcpKXt2YXIgQz1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQSk7dmFyIEQ9bmV3IEZDS0RvY3VtZW50RnJhZ21lbnQoQyk7dmFyIEU9RC5Sb290Tm9kZTt2YXIgRj1mYWxzZTt2YXIgRz1GQ0tEb21Ub29scy5HZXRGaXJzdENoaWxkKEEsWydVTCcsJ09MJ10pO2lmIChHKXtGPXRydWU7dmFyIEg7d2hpbGUgKChIPUcuZmlyc3RDaGlsZCkpIEUuYXBwZW5kQ2hpbGQoRy5yZW1vdmVDaGlsZChIKSk7RkNLRG9tVG9vbHMuUmVtb3ZlTm9kZShHKTt9O3ZhciBJO3ZhciBKPWZhbHNlO3doaWxlICgoST1BLm5leHRTaWJsaW5nKSl7aWYgKCFGJiZJLm5vZGVUeXBlPT0xJiZJLm5vZGVOYW1lLnRvVXBwZXJDYXNlKCk9PSdMSScpIEo9Rj10cnVlO0UuYXBwZW5kQ2hpbGQoSS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEkpKTtpZiAoIUomJkkubm9kZVR5cGU9PTEmJkkubm9kZU5hbWUudG9VcHBlckNhc2UoKS5FcXVhbHMoJ1VMJywnT0wnKSkgRkNLRG9tVG9vbHMuUmVtb3ZlTm9kZShJLHRydWUpO307dmFyIEs9Qi5wYXJlbnROb2RlLnRhZ05hbWUudG9VcHBlckNhc2UoKTt2YXIgTD0oSz09J0xJJyk7aWYgKEx8fEsuRXF1YWxzKCdVTCcsJ09MJykpe2lmIChGKXt2YXIgRz1CLmNsb25lTm9kZShmYWxzZSk7RC5BcHBlbmRUbyhHKTtBLmFwcGVuZENoaWxkKEcpO31lbHNlIGlmIChMKSBELkluc2VydEFmdGVyTm9kZShCLnBhcmVudE5vZGUpO2Vsc2UgRC5JbnNlcnRBZnRlck5vZGUoQik7aWYgKEwpIEZDS0RvbVRvb2xzLkluc2VydEFmdGVyTm9kZShCLnBhcmVudE5vZGUsQi5yZW1vdmVDaGlsZChBKSk7ZWxzZSBGQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoQixCLnJlbW92ZUNoaWxkKEEpKTt9ZWxzZXtpZiAoRil7dmFyIE49Qi5jbG9uZU5vZGUoZmFsc2UpO0QuQXBwZW5kVG8oTik7RkNLRG9tVG9vbHMuSW5zZXJ0QWZ0ZXJOb2RlKEIsTik7fTt2YXIgTz1DLmNyZWF0ZUVsZW1lbnQoRkNLQ29uZmlnLkVudGVyTW9kZT09J3AnPydwJzonZGl2Jyk7RkNLRG9tVG9vbHMuTW92ZUNoaWxkcmVuKEIucmVtb3ZlQ2hpbGQoQSksTyk7RkNLRG9tVG9vbHMuSW5zZXJ0QWZ0ZXJOb2RlKEIsTyk7aWYgKEZDS0NvbmZpZy5FbnRlck1vZGU9PSdicicpe2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvKSBPLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKEZDS1Rvb2xzLkNyZWF0ZUJvZ3VzQlIoQyksTyk7ZWxzZSBGQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoTyxGQ0tUb29scy5DcmVhdGVCb2d1c0JSKEMpKTtGQ0tEb21Ub29scy5SZW1vdmVOb2RlKE8sdHJ1ZSk7fX07aWYgKHRoaXMuQ2hlY2tFbXB0eUxpc3QoQikpIEZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoQix0cnVlKTt9fSxDaGVja0VtcHR5TGlzdDpmdW5jdGlvbihBKXtyZXR1cm4gKEZDS0RvbVRvb2xzLkdldEZpcnN0Q2hpbGQoQSwnTEknKT09bnVsbCk7fSxDaGVja0xpc3RIYXNDb250ZW50czpmdW5jdGlvbihBKXt2YXIgQj1BLmZpcnN0Q2hpbGQ7d2hpbGUgKEIpe3N3aXRjaCAoQi5ub2RlVHlwZSl7Y2FzZSAxOmlmICghQi5ub2RlTmFtZS5JRXF1YWxzKCdVTCcsJ0xJJykpIHJldHVybiB0cnVlO2JyZWFrO2Nhc2UgMzppZiAoQi5ub2RlVmFsdWUuVHJpbSgpLmxlbmd0aD4wKSByZXR1cm4gdHJ1ZTt9O0I9Qi5uZXh0U2libGluZzt9O3JldHVybiBmYWxzZTt9fTsKdmFyIEZDS0VsZW1lbnRQYXRoPWZ1bmN0aW9uKEEpe3ZhciBCPW51bGw7dmFyIEM9bnVsbDt2YXIgRD1bXTt2YXIgZT1BO3doaWxlIChlKXtpZiAoZS5ub2RlVHlwZT09MSl7aWYgKCF0aGlzLkxhc3RFbGVtZW50KSB0aGlzLkxhc3RFbGVtZW50PWU7dmFyIEU9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFJiZlLnNjb3BlTmFtZSE9J0hUTUwnKSBFPWUuc2NvcGVOYW1lLnRvTG93ZXJDYXNlKCkrJzonK0U7aWYgKCFDKXtpZiAoIUImJkZDS0xpc3RzTGliLlBhdGhCbG9ja0VsZW1lbnRzW0VdIT1udWxsKSBCPWU7aWYgKEZDS0xpc3RzTGliLlBhdGhCbG9ja0xpbWl0RWxlbWVudHNbRV0hPW51bGwpe2lmICghQiYmRT09J2RpdicmJiFGQ0tFbGVtZW50UGF0aC5fQ2hlY2tIYXNCbG9jayhlKSkgQj1lO2Vsc2UgQz1lO319O0QucHVzaChlKTtpZiAoRT09J2JvZHknKSBicmVhazt9O2U9ZS5wYXJlbnROb2RlO307dGhpcy5CbG9jaz1CO3RoaXMuQmxvY2tMaW1pdD1DO3RoaXMuRWxlbWVudHM9RDt9O0ZDS0VsZW1lbnRQYXRoLl9DaGVja0hhc0Jsb2NrPWZ1bmN0aW9uKEEpe3ZhciBCPUEuY2hpbGROb2Rlcztmb3IgKHZhciBpPTAsY291bnQ9Qi5sZW5ndGg7aTxjb3VudDtpKyspe3ZhciBDPUJbaV07aWYgKEMubm9kZVR5cGU9PTEmJkZDS0xpc3RzTGliLkJsb2NrRWxlbWVudHNbQy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkgcmV0dXJuIHRydWU7fTtyZXR1cm4gZmFsc2U7fTsKdmFyIEZDS0RvbVJhbmdlPWZ1bmN0aW9uKEEpe3RoaXMuV2luZG93PUE7dGhpcy5fQ2FjaGU9e307fTtGQ0tEb21SYW5nZS5wcm90b3R5cGU9e19VcGRhdGVFbGVtZW50SW5mbzpmdW5jdGlvbigpe3ZhciBBPXRoaXMuX1JhbmdlO2lmICghQSkgdGhpcy5SZWxlYXNlKHRydWUpO2Vsc2V7dmFyIEI9QS5zdGFydENvbnRhaW5lcjt2YXIgQz1uZXcgRkNLRWxlbWVudFBhdGgoQik7dGhpcy5TdGFydE5vZGU9Qi5ub2RlVHlwZT09Mz9COkIuY2hpbGROb2Rlc1tBLnN0YXJ0T2Zmc2V0XTt0aGlzLlN0YXJ0Q29udGFpbmVyPUI7dGhpcy5TdGFydEJsb2NrPUMuQmxvY2s7dGhpcy5TdGFydEJsb2NrTGltaXQ9Qy5CbG9ja0xpbWl0O2lmIChBLmNvbGxhcHNlZCl7dGhpcy5FbmROb2RlPXRoaXMuU3RhcnROb2RlO3RoaXMuRW5kQ29udGFpbmVyPXRoaXMuU3RhcnRDb250YWluZXI7dGhpcy5FbmRCbG9jaz10aGlzLlN0YXJ0QmxvY2s7dGhpcy5FbmRCbG9ja0xpbWl0PXRoaXMuU3RhcnRCbG9ja0xpbWl0O31lbHNle3ZhciBEPUEuZW5kQ29udGFpbmVyO2lmIChCIT1EKSBDPW5ldyBGQ0tFbGVtZW50UGF0aChEKTt2YXIgRT1EO2lmIChBLmVuZE9mZnNldD09MCl7d2hpbGUgKEUmJiFFLnByZXZpb3VzU2libGluZykgRT1FLnBhcmVudE5vZGU7aWYgKEUpIEU9RS5wcmV2aW91c1NpYmxpbmc7fWVsc2UgaWYgKEUubm9kZVR5cGU9PTEpIEU9RS5jaGlsZE5vZGVzW0EuZW5kT2Zmc2V0LTFdO3RoaXMuRW5kTm9kZT1FO3RoaXMuRW5kQ29udGFpbmVyPUQ7dGhpcy5FbmRCbG9jaz1DLkJsb2NrO3RoaXMuRW5kQmxvY2tMaW1pdD1DLkJsb2NrTGltaXQ7fX07dGhpcy5fQ2FjaGU9e307fSxDcmVhdGVSYW5nZTpmdW5jdGlvbigpe3JldHVybiBuZXcgRkNLVzNDUmFuZ2UodGhpcy5XaW5kb3cuZG9jdW1lbnQpO30sRGVsZXRlQ29udGVudHM6ZnVuY3Rpb24oKXtpZiAodGhpcy5fUmFuZ2Upe3RoaXMuX1JhbmdlLmRlbGV0ZUNvbnRlbnRzKCk7dGhpcy5fVXBkYXRlRWxlbWVudEluZm8oKTt9fSxFeHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtpZiAodGhpcy5fUmFuZ2Upe3ZhciBBPXRoaXMuX1JhbmdlLmV4dHJhY3RDb250ZW50cygpO3RoaXMuX1VwZGF0ZUVsZW1lbnRJbmZvKCk7cmV0dXJuIEE7fTtyZXR1cm4gbnVsbDt9LENoZWNrSXNDb2xsYXBzZWQ6ZnVuY3Rpb24oKXtpZiAodGhpcy5fUmFuZ2UpIHJldHVybiB0aGlzLl9SYW5nZS5jb2xsYXBzZWQ7cmV0dXJuIGZhbHNlO30sQ29sbGFwc2U6ZnVuY3Rpb24oQSl7aWYgKHRoaXMuX1JhbmdlKSB0aGlzLl9SYW5nZS5jb2xsYXBzZShBKTt0aGlzLl9VcGRhdGVFbGVtZW50SW5mbygpO30sQ2xvbmU6ZnVuY3Rpb24oKXt2YXIgQT1GQ0tUb29scy5DbG9uZU9iamVjdCh0aGlzKTtpZiAodGhpcy5fUmFuZ2UpIEEuX1JhbmdlPXRoaXMuX1JhbmdlLmNsb25lUmFuZ2UoKTtyZXR1cm4gQTt9LE1vdmVUb05vZGVDb250ZW50czpmdW5jdGlvbihBKXtpZiAoIXRoaXMuX1JhbmdlKSB0aGlzLl9SYW5nZT10aGlzLkNyZWF0ZVJhbmdlKCk7dGhpcy5fUmFuZ2Uuc2VsZWN0Tm9kZUNvbnRlbnRzKEEpO3RoaXMuX1VwZGF0ZUVsZW1lbnRJbmZvKCk7fSxNb3ZlVG9FbGVtZW50U3RhcnQ6ZnVuY3Rpb24oQSl7dGhpcy5TZXRTdGFydChBLDEpO3RoaXMuU2V0RW5kKEEsMSk7fSxNb3ZlVG9FbGVtZW50RWRpdFN0YXJ0OmZ1bmN0aW9uKEEpe3ZhciBCO3doaWxlIChBJiZBLm5vZGVUeXBlPT0xKXtpZiAoRkNLRG9tVG9vbHMuQ2hlY2tJc0VkaXRhYmxlKEEpKSBCPUE7ZWxzZSBpZiAoQikgYnJlYWs7QT1BLmZpcnN0Q2hpbGQ7fTtpZiAoQikgdGhpcy5Nb3ZlVG9FbGVtZW50U3RhcnQoQik7fSxJbnNlcnROb2RlOmZ1bmN0aW9uKEEpe2lmICh0aGlzLl9SYW5nZSkgdGhpcy5fUmFuZ2UuaW5zZXJ0Tm9kZShBKTt9LENoZWNrSXNFbXB0eTpmdW5jdGlvbigpe2lmICh0aGlzLkNoZWNrSXNDb2xsYXBzZWQoKSkgcmV0dXJuIHRydWU7dmFyIEE9dGhpcy5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7dGhpcy5fUmFuZ2UuY2xvbmVDb250ZW50cygpLkFwcGVuZFRvKEEpO0ZDS0RvbVRvb2xzLlRyaW1Ob2RlKEEpO3JldHVybiAoQS5pbm5lckhUTUwubGVuZ3RoPT0wKTt9LENoZWNrU3RhcnRPZkJsb2NrOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5fQ2FjaGU7dmFyIEI9QS5Jc1N0YXJ0T2ZCbG9jaztpZiAoQiE9dW5kZWZpbmVkKSByZXR1cm4gQjt2YXIgQz10aGlzLlN0YXJ0QmxvY2t8fHRoaXMuU3RhcnRCbG9ja0xpbWl0O3ZhciBEPXRoaXMuX1JhbmdlLnN0YXJ0Q29udGFpbmVyO3ZhciBFPXRoaXMuX1JhbmdlLnN0YXJ0T2Zmc2V0O3ZhciBGO2lmIChFPjApe2lmIChELm5vZGVUeXBlPT0zKXt2YXIgRz1ELm5vZGVWYWx1ZS5zdWJzdHIoMCxFKS5UcmltKCk7aWYgKEcubGVuZ3RoIT0wKSByZXR1cm4gQS5Jc1N0YXJ0T2ZCbG9jaz1mYWxzZTt9ZWxzZSBGPUQuY2hpbGROb2Rlc1tFLTFdO307aWYgKCFGKSBGPUZDS0RvbVRvb2xzLkdldFByZXZpb3VzU291cmNlTm9kZShELHRydWUsbnVsbCxDKTt3aGlsZSAoRil7c3dpdGNoIChGLm5vZGVUeXBlKXtjYXNlIDE6aWYgKCFGQ0tMaXN0c0xpYi5JbmxpbmVDaGlsZFJlcUVsZW1lbnRzW0Yubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pIHJldHVybiBBLklzU3RhcnRPZkJsb2NrPWZhbHNlO2JyZWFrO2Nhc2UgMzppZiAoRi5ub2RlVmFsdWUuVHJpbSgpLmxlbmd0aD4wKSByZXR1cm4gQS5Jc1N0YXJ0T2ZCbG9jaz1mYWxzZTt9O0Y9RkNLRG9tVG9vbHMuR2V0UHJldmlvdXNTb3VyY2VOb2RlKEYsZmFsc2UsbnVsbCxDKTt9O3JldHVybiBBLklzU3RhcnRPZkJsb2NrPXRydWU7fSxDaGVja0VuZE9mQmxvY2s6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5fQ2FjaGUuSXNFbmRPZkJsb2NrO2lmIChCIT11bmRlZmluZWQpIHJldHVybiBCO3ZhciBDPXRoaXMuRW5kQmxvY2t8fHRoaXMuRW5kQmxvY2tMaW1pdDt2YXIgRD10aGlzLl9SYW5nZS5lbmRDb250YWluZXI7dmFyIEU9dGhpcy5fUmFuZ2UuZW5kT2Zmc2V0O3ZhciBGO2lmIChELm5vZGVUeXBlPT0zKXt2YXIgRz1ELm5vZGVWYWx1ZTtpZiAoRTxHLmxlbmd0aCl7Rz1HLnN1YnN0cihFKTtpZiAoRy5UcmltKCkubGVuZ3RoIT0wKSByZXR1cm4gdGhpcy5fQ2FjaGUuSXNFbmRPZkJsb2NrPWZhbHNlO319ZWxzZSBGPUQuY2hpbGROb2Rlc1tFXTtpZiAoIUYpIEY9RkNLRG9tVG9vbHMuR2V0TmV4dFNvdXJjZU5vZGUoRCx0cnVlLG51bGwsQyk7dmFyIEg9ZmFsc2U7d2hpbGUgKEYpe3N3aXRjaCAoRi5ub2RlVHlwZSl7Y2FzZSAxOnZhciBJPUYubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZiAoRkNLTGlzdHNMaWIuSW5saW5lQ2hpbGRSZXFFbGVtZW50c1tJXSkgYnJlYWs7aWYgKEk9PSdicicmJiFIKXtIPXRydWU7YnJlYWs7fTtyZXR1cm4gdGhpcy5fQ2FjaGUuSXNFbmRPZkJsb2NrPWZhbHNlO2Nhc2UgMzppZiAoRi5ub2RlVmFsdWUuVHJpbSgpLmxlbmd0aD4wKSByZXR1cm4gdGhpcy5fQ2FjaGUuSXNFbmRPZkJsb2NrPWZhbHNlO307Rj1GQ0tEb21Ub29scy5HZXROZXh0U291cmNlTm9kZShGLGZhbHNlLG51bGwsQyk7fTtpZiAoQSkgdGhpcy5TZWxlY3QoKTtyZXR1cm4gdGhpcy5fQ2FjaGUuSXNFbmRPZkJsb2NrPXRydWU7fSxDcmVhdGVCb29rbWFyazpmdW5jdGlvbihBKXt2YXIgQj17U3RhcnRJZDoobmV3IERhdGUoKSkudmFsdWVPZigpK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAwKSsnUycsRW5kSWQ6KG5ldyBEYXRlKCkpLnZhbHVlT2YoKStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMCkrJ0UnfTt2YXIgQz10aGlzLldpbmRvdy5kb2N1bWVudDt2YXIgRDt2YXIgRTt2YXIgRjtpZiAoIXRoaXMuQ2hlY2tJc0NvbGxhcHNlZCgpKXtFPUMuY3JlYXRlRWxlbWVudCgnc3BhbicpO0Uuc3R5bGUuZGlzcGxheT0nbm9uZSc7RS5pZD1CLkVuZElkO0Uuc2V0QXR0cmlidXRlKCdfZmNrX2Jvb2ttYXJrJyx0cnVlKTtFLmlubmVySFRNTD0nJm5ic3A7JztGPXRoaXMuQ2xvbmUoKTtGLkNvbGxhcHNlKGZhbHNlKTtGLkluc2VydE5vZGUoRSk7fTtEPUMuY3JlYXRlRWxlbWVudCgnc3BhbicpO0Quc3R5bGUuZGlzcGxheT0nbm9uZSc7RC5pZD1CLlN0YXJ0SWQ7RC5zZXRBdHRyaWJ1dGUoJ19mY2tfYm9va21hcmsnLHRydWUpO0QuaW5uZXJIVE1MPScmbmJzcDsnO0Y9dGhpcy5DbG9uZSgpO0YuQ29sbGFwc2UodHJ1ZSk7Ri5JbnNlcnROb2RlKEQpO2lmIChBKXtCLlN0YXJ0Tm9kZT1EO0IuRW5kTm9kZT1FO307aWYgKEUpe3RoaXMuU2V0U3RhcnQoRCw0KTt0aGlzLlNldEVuZChFLDMpO31lbHNlIHRoaXMuTW92ZVRvUG9zaXRpb24oRCw0KTtyZXR1cm4gQjt9LEdldEJvb2ttYXJrTm9kZTpmdW5jdGlvbihBLEIpe3ZhciBDPXRoaXMuV2luZG93LmRvY3VtZW50O2lmIChCKSByZXR1cm4gQS5TdGFydE5vZGV8fEMuZ2V0RWxlbWVudEJ5SWQoQS5TdGFydElkKTtlbHNlIHJldHVybiBBLkVuZE5vZGV8fEMuZ2V0RWxlbWVudEJ5SWQoQS5FbmRJZCk7fSxNb3ZlVG9Cb29rbWFyazpmdW5jdGlvbihBLEIpe3ZhciBDPXRoaXMuR2V0Qm9va21hcmtOb2RlKEEsdHJ1ZSk7dmFyIEQ9dGhpcy5HZXRCb29rbWFya05vZGUoQSxmYWxzZSk7dGhpcy5TZXRTdGFydChDLDMpO2lmICghQikgRkNLRG9tVG9vbHMuUmVtb3ZlTm9kZShDKTtpZiAoRCl7dGhpcy5TZXRFbmQoRCwzKTtpZiAoIUIpIEZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoRCk7fWVsc2UgdGhpcy5Db2xsYXBzZSh0cnVlKTt0aGlzLl9VcGRhdGVFbGVtZW50SW5mbygpO30sQ3JlYXRlQm9va21hcmsyOmZ1bmN0aW9uKCl7aWYgKCF0aGlzLl9SYW5nZSkgcmV0dXJuIHsgIlN0YXJ0IjowLCJFbmQiOjAgfTt2YXIgQT17IlN0YXJ0IjpbdGhpcy5fUmFuZ2Uuc3RhcnRPZmZzZXRdLCJFbmQiOlt0aGlzLl9SYW5nZS5lbmRPZmZzZXRdfTt2YXIgQj10aGlzLl9SYW5nZS5zdGFydENvbnRhaW5lci5wcmV2aW91c1NpYmxpbmc7dmFyIEM9dGhpcy5fUmFuZ2UuZW5kQ29udGFpbmVyLnByZXZpb3VzU2libGluZzt2YXIgRD10aGlzLl9SYW5nZS5zdGFydENvbnRhaW5lcjt2YXIgRT10aGlzLl9SYW5nZS5lbmRDb250YWluZXI7d2hpbGUgKEImJkIubm9kZVR5cGU9PTMmJkQubm9kZVR5cGU9PTMpe0EuU3RhcnRbMF0rPUIubGVuZ3RoO0Q9QjtCPUIucHJldmlvdXNTaWJsaW5nO313aGlsZSAoQyYmQy5ub2RlVHlwZT09MyYmRS5ub2RlVHlwZT09Myl7QS5FbmRbMF0rPUMubGVuZ3RoO0U9QztDPUMucHJldmlvdXNTaWJsaW5nO307aWYgKEQubm9kZVR5cGU9PTEmJkQuY2hpbGROb2Rlc1tBLlN0YXJ0WzBdXSYmRC5jaGlsZE5vZGVzW0EuU3RhcnRbMF1dLm5vZGVUeXBlPT0zKXt2YXIgRj1ELmNoaWxkTm9kZXNbQS5TdGFydFswXV07dmFyIEc9MDt3aGlsZSAoRi5wcmV2aW91c1NpYmxpbmcmJkYucHJldmlvdXNTaWJsaW5nLm5vZGVUeXBlPT0zKXtGPUYucHJldmlvdXNTaWJsaW5nO0crPUYubGVuZ3RoO307RD1GO0EuU3RhcnRbMF09Rzt9O2lmIChFLm5vZGVUeXBlPT0xJiZFLmNoaWxkTm9kZXNbQS5FbmRbMF1dJiZFLmNoaWxkTm9kZXNbQS5FbmRbMF1dLm5vZGVUeXBlPT0zKXt2YXIgRj1FLmNoaWxkTm9kZXNbQS5FbmRbMF1dO3ZhciBHPTA7d2hpbGUgKEYucHJldmlvdXNTaWJsaW5nJiZGLnByZXZpb3VzU2libGluZy5ub2RlVHlwZT09Myl7Rj1GLnByZXZpb3VzU2libGluZztHKz1GLmxlbmd0aDt9O0U9RjtBLkVuZFswXT1HO307QS5TdGFydD1GQ0tEb21Ub29scy5HZXROb2RlQWRkcmVzcyhELHRydWUpLmNvbmNhdChBLlN0YXJ0KTtBLkVuZD1GQ0tEb21Ub29scy5HZXROb2RlQWRkcmVzcyhFLHRydWUpLmNvbmNhdChBLkVuZCk7cmV0dXJuIEE7fSxNb3ZlVG9Cb29rbWFyazI6ZnVuY3Rpb24oQSl7dmFyIEI9RkNLRG9tVG9vbHMuR2V0Tm9kZUZyb21BZGRyZXNzKHRoaXMuV2luZG93LmRvY3VtZW50LEEuU3RhcnQuc2xpY2UoMCwtMSksdHJ1ZSk7dmFyIEM9RkNLRG9tVG9vbHMuR2V0Tm9kZUZyb21BZGRyZXNzKHRoaXMuV2luZG93LmRvY3VtZW50LEEuRW5kLnNsaWNlKDAsLTEpLHRydWUpO3RoaXMuUmVsZWFzZSh0cnVlKTt0aGlzLl9SYW5nZT1uZXcgRkNLVzNDUmFuZ2UodGhpcy5XaW5kb3cuZG9jdW1lbnQpO3ZhciBEPUEuU3RhcnRbQS5TdGFydC5sZW5ndGgtMV07dmFyIEU9QS5FbmRbQS5FbmQubGVuZ3RoLTFdO3doaWxlIChCLm5vZGVUeXBlPT0zJiZEPkIubGVuZ3RoKXtpZiAoIUIubmV4dFNpYmxpbmd8fEIubmV4dFNpYmxpbmcubm9kZVR5cGUhPTMpIGJyZWFrO0QtPUIubGVuZ3RoO0I9Qi5uZXh0U2libGluZzt9d2hpbGUgKEMubm9kZVR5cGU9PTMmJkU+Qy5sZW5ndGgpe2lmICghQy5uZXh0U2libGluZ3x8Qy5uZXh0U2libGluZy5ub2RlVHlwZSE9MykgYnJlYWs7RS09Qy5sZW5ndGg7Qz1DLm5leHRTaWJsaW5nO307dGhpcy5fUmFuZ2Uuc2V0U3RhcnQoQixEKTt0aGlzLl9SYW5nZS5zZXRFbmQoQyxFKTt0aGlzLl9VcGRhdGVFbGVtZW50SW5mbygpO30sTW92ZVRvUG9zaXRpb246ZnVuY3Rpb24oQSxCKXt0aGlzLlNldFN0YXJ0KEEsQik7dGhpcy5Db2xsYXBzZSh0cnVlKTt9LFNldFN0YXJ0OmZ1bmN0aW9uKEEsQixDKXt2YXIgRD10aGlzLl9SYW5nZTtpZiAoIUQpIEQ9dGhpcy5fUmFuZ2U9dGhpcy5DcmVhdGVSYW5nZSgpO3N3aXRjaChCKXtjYXNlIDE6RC5zZXRTdGFydChBLDApO2JyZWFrO2Nhc2UgMjpELnNldFN0YXJ0KEEsQS5jaGlsZE5vZGVzLmxlbmd0aCk7YnJlYWs7Y2FzZSAzOkQuc2V0U3RhcnRCZWZvcmUoQSk7YnJlYWs7Y2FzZSA0OkQuc2V0U3RhcnRBZnRlcihBKTt9O2lmICghQykgdGhpcy5fVXBkYXRlRWxlbWVudEluZm8oKTt9LFNldEVuZDpmdW5jdGlvbihBLEIsQyl7dmFyIEQ9dGhpcy5fUmFuZ2U7aWYgKCFEKSBEPXRoaXMuX1JhbmdlPXRoaXMuQ3JlYXRlUmFuZ2UoKTtzd2l0Y2goQil7Y2FzZSAxOkQuc2V0RW5kKEEsMCk7YnJlYWs7Y2FzZSAyOkQuc2V0RW5kKEEsQS5jaGlsZE5vZGVzLmxlbmd0aCk7YnJlYWs7Y2FzZSAzOkQuc2V0RW5kQmVmb3JlKEEpO2JyZWFrO2Nhc2UgNDpELnNldEVuZEFmdGVyKEEpO307aWYgKCFDKSB0aGlzLl9VcGRhdGVFbGVtZW50SW5mbygpO30sRXhwYW5kOmZ1bmN0aW9uKEEpe3ZhciBCLG9TaWJsaW5nO3N3aXRjaCAoQSl7Y2FzZSAnaW5saW5lX2VsZW1lbnRzJzppZiAodGhpcy5fUmFuZ2Uuc3RhcnRPZmZzZXQ9PTApe0I9dGhpcy5fUmFuZ2Uuc3RhcnRDb250YWluZXI7aWYgKEIubm9kZVR5cGUhPTEpIEI9Qi5wcmV2aW91c1NpYmxpbmc/bnVsbDpCLnBhcmVudE5vZGU7aWYgKEIpe3doaWxlIChGQ0tMaXN0c0xpYi5JbmxpbmVOb25FbXB0eUVsZW1lbnRzW0Iubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pe3RoaXMuX1JhbmdlLnNldFN0YXJ0QmVmb3JlKEIpO2lmIChCIT1CLnBhcmVudE5vZGUuZmlyc3RDaGlsZCkgYnJlYWs7Qj1CLnBhcmVudE5vZGU7fX19O0I9dGhpcy5fUmFuZ2UuZW5kQ29udGFpbmVyO3ZhciBDPXRoaXMuX1JhbmdlLmVuZE9mZnNldDtpZiAoKEIubm9kZVR5cGU9PTMmJkM+PUIubm9kZVZhbHVlLmxlbmd0aCl8fChCLm5vZGVUeXBlPT0xJiZDPj1CLmNoaWxkTm9kZXMubGVuZ3RoKXx8KEIubm9kZVR5cGUhPTEmJkIubm9kZVR5cGUhPTMpKXtpZiAoQi5ub2RlVHlwZSE9MSkgQj1CLm5leHRTaWJsaW5nP251bGw6Qi5wYXJlbnROb2RlO2lmIChCKXt3aGlsZSAoRkNLTGlzdHNMaWIuSW5saW5lTm9uRW1wdHlFbGVtZW50c1tCLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKXt0aGlzLl9SYW5nZS5zZXRFbmRBZnRlcihCKTtpZiAoQiE9Qi5wYXJlbnROb2RlLmxhc3RDaGlsZCkgYnJlYWs7Qj1CLnBhcmVudE5vZGU7fX19O2JyZWFrO2Nhc2UgJ2Jsb2NrX2NvbnRlbnRzJzpjYXNlICdsaXN0X2NvbnRlbnRzJzp2YXIgRD1GQ0tMaXN0c0xpYi5CbG9ja0JvdW5kYXJpZXM7aWYgKEE9PSdsaXN0X2NvbnRlbnRzJ3x8RkNLQ29uZmlnLkVudGVyTW9kZT09J2JyJykgRD1GQ0tMaXN0c0xpYi5MaXN0Qm91bmRhcmllcztpZiAodGhpcy5TdGFydEJsb2NrJiZGQ0tDb25maWcuRW50ZXJNb2RlIT0nYnInJiZBPT0nYmxvY2tfY29udGVudHMnKSB0aGlzLlNldFN0YXJ0KHRoaXMuU3RhcnRCbG9jaywxKTtlbHNle0I9dGhpcy5fUmFuZ2Uuc3RhcnRDb250YWluZXI7aWYgKEIubm9kZVR5cGU9PTEpe3ZhciBFPUIuY2hpbGROb2Rlc1t0aGlzLl9SYW5nZS5zdGFydE9mZnNldF07aWYgKEUpIEI9RkNLRG9tVG9vbHMuR2V0UHJldmlvdXNTb3VyY2VOb2RlKEUsdHJ1ZSk7ZWxzZSBCPUIubGFzdENoaWxkfHxCO313aGlsZSAoQiYmKEIubm9kZVR5cGUhPTF8fChCIT10aGlzLlN0YXJ0QmxvY2tMaW1pdCYmIURbQi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpKXt0aGlzLl9SYW5nZS5zZXRTdGFydEJlZm9yZShCKTtCPUIucHJldmlvdXNTaWJsaW5nfHxCLnBhcmVudE5vZGU7fX07aWYgKHRoaXMuRW5kQmxvY2smJkZDS0NvbmZpZy5FbnRlck1vZGUhPSdicicmJkE9PSdibG9ja19jb250ZW50cycmJnRoaXMuRW5kQmxvY2subm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9J2xpJykgdGhpcy5TZXRFbmQodGhpcy5FbmRCbG9jaywyKTtlbHNle0I9dGhpcy5fUmFuZ2UuZW5kQ29udGFpbmVyO2lmIChCLm5vZGVUeXBlPT0xKSBCPUIuY2hpbGROb2Rlc1t0aGlzLl9SYW5nZS5lbmRPZmZzZXRdfHxCLmxhc3RDaGlsZDt3aGlsZSAoQiYmKEIubm9kZVR5cGUhPTF8fChCIT10aGlzLlN0YXJ0QmxvY2tMaW1pdCYmIURbQi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkpKXt0aGlzLl9SYW5nZS5zZXRFbmRBZnRlcihCKTtCPUIubmV4dFNpYmxpbmd8fEIucGFyZW50Tm9kZTt9O2lmIChCJiZCLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PSdicicpIHRoaXMuX1JhbmdlLnNldEVuZEFmdGVyKEIpO307dGhpcy5fVXBkYXRlRWxlbWVudEluZm8oKTt9fSxTcGxpdEJsb2NrOmZ1bmN0aW9uKEEpe3ZhciBCPUF8fEZDS0NvbmZpZy5FbnRlck1vZGU7aWYgKCF0aGlzLl9SYW5nZSkgdGhpcy5Nb3ZlVG9TZWxlY3Rpb24oKTtpZiAodGhpcy5TdGFydEJsb2NrTGltaXQ9PXRoaXMuRW5kQmxvY2tMaW1pdCl7dmFyIEM9dGhpcy5TdGFydEJsb2NrO3ZhciBEPXRoaXMuRW5kQmxvY2s7dmFyIEU9bnVsbDtpZiAoQiE9J2JyJyl7aWYgKCFDKXtDPXRoaXMuRml4QmxvY2sodHJ1ZSxCKTtEPXRoaXMuRW5kQmxvY2s7fTtpZiAoIUQpIEQ9dGhpcy5GaXhCbG9jayhmYWxzZSxCKTt9O3ZhciBGPShDIT1udWxsJiZ0aGlzLkNoZWNrU3RhcnRPZkJsb2NrKCkpO3ZhciBHPShEIT1udWxsJiZ0aGlzLkNoZWNrRW5kT2ZCbG9jaygpKTtpZiAoIXRoaXMuQ2hlY2tJc0VtcHR5KCkpIHRoaXMuRGVsZXRlQ29udGVudHMoKTtpZiAoQyYmRCYmQz09RCl7aWYgKEcpe0U9bmV3IEZDS0VsZW1lbnRQYXRoKHRoaXMuU3RhcnRDb250YWluZXIpO3RoaXMuTW92ZVRvUG9zaXRpb24oRCw0KTtEPW51bGw7fWVsc2UgaWYgKEYpe0U9bmV3IEZDS0VsZW1lbnRQYXRoKHRoaXMuU3RhcnRDb250YWluZXIpO3RoaXMuTW92ZVRvUG9zaXRpb24oQywzKTtDPW51bGw7fWVsc2V7dGhpcy5TZXRFbmQoQywyKTt2YXIgSD10aGlzLkV4dHJhY3RDb250ZW50cygpO0Q9Qy5jbG9uZU5vZGUoZmFsc2UpO0QucmVtb3ZlQXR0cmlidXRlKCdpZCcsZmFsc2UpO0guQXBwZW5kVG8oRCk7RkNLRG9tVG9vbHMuSW5zZXJ0QWZ0ZXJOb2RlKEMsRCk7dGhpcy5Nb3ZlVG9Qb3NpdGlvbihDLDQpO2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvJiYhQy5ub2RlTmFtZS5JRXF1YWxzKFsndWwnLCdvbCddKSkgRkNLVG9vbHMuQXBwZW5kQm9ndXNCcihDKTt9fTtyZXR1cm4ge1ByZXZpb3VzQmxvY2s6QyxOZXh0QmxvY2s6RCxXYXNTdGFydE9mQmxvY2s6RixXYXNFbmRPZkJsb2NrOkcsRWxlbWVudFBhdGg6RX07fTtyZXR1cm4gbnVsbDt9LEZpeEJsb2NrOmZ1bmN0aW9uKEEsQil7dmFyIEM9dGhpcy5DcmVhdGVCb29rbWFyaygpO3RoaXMuQ29sbGFwc2UoQSk7dGhpcy5FeHBhbmQoJ2Jsb2NrX2NvbnRlbnRzJyk7dmFyIEQ9dGhpcy5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChCKTt0aGlzLkV4dHJhY3RDb250ZW50cygpLkFwcGVuZFRvKEQpO0ZDS0RvbVRvb2xzLlRyaW1Ob2RlKEQpO2lmIChGQ0tEb21Ub29scy5DaGVja0lzRW1wdHlFbGVtZW50KEQsZnVuY3Rpb24oZWxlbWVudCkgeyByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ19mY2tfYm9va21hcmsnKSE9J3RydWUnO30pJiZGQ0tCcm93c2VySW5mby5Jc0dlY2tvTGlrZSkgRkNLVG9vbHMuQXBwZW5kQm9ndXNCcihEKTt0aGlzLkluc2VydE5vZGUoRCk7dGhpcy5Nb3ZlVG9Cb29rbWFyayhDKTtyZXR1cm4gRDt9LFJlbGVhc2U6ZnVuY3Rpb24oQSl7aWYgKCFBKSB0aGlzLldpbmRvdz1udWxsO3RoaXMuU3RhcnROb2RlPW51bGw7dGhpcy5TdGFydENvbnRhaW5lcj1udWxsO3RoaXMuU3RhcnRCbG9jaz1udWxsO3RoaXMuU3RhcnRCbG9ja0xpbWl0PW51bGw7dGhpcy5FbmROb2RlPW51bGw7dGhpcy5FbmRDb250YWluZXI9bnVsbDt0aGlzLkVuZEJsb2NrPW51bGw7dGhpcy5FbmRCbG9ja0xpbWl0PW51bGw7dGhpcy5fUmFuZ2U9bnVsbDt0aGlzLl9DYWNoZT1udWxsO30sQ2hlY2tIYXNSYW5nZTpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fUmFuZ2U7fSxHZXRUb3VjaGVkU3RhcnROb2RlOmZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5fUmFuZ2U7dmFyIEI9QS5zdGFydENvbnRhaW5lcjtpZiAoQS5jb2xsYXBzZWR8fEIubm9kZVR5cGUhPTEpIHJldHVybiBCO3JldHVybiBCLmNoaWxkTm9kZXNbQS5zdGFydE9mZnNldF18fEI7fSxHZXRUb3VjaGVkRW5kTm9kZTpmdW5jdGlvbigpe3ZhciBBPXRoaXMuX1JhbmdlO3ZhciBCPUEuZW5kQ29udGFpbmVyO2lmIChBLmNvbGxhcHNlZHx8Qi5ub2RlVHlwZSE9MSkgcmV0dXJuIEI7cmV0dXJuIEIuY2hpbGROb2Rlc1tBLmVuZE9mZnNldC0xXXx8Qjt9fTsKRkNLRG9tUmFuZ2UucHJvdG90eXBlLk1vdmVUb1NlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuUmVsZWFzZSh0cnVlKTt0aGlzLl9SYW5nZT1uZXcgRkNLVzNDUmFuZ2UodGhpcy5XaW5kb3cuZG9jdW1lbnQpO3ZhciBBPXRoaXMuV2luZG93LmRvY3VtZW50LnNlbGVjdGlvbjtpZiAoQS50eXBlIT0nQ29udHJvbCcpe3ZhciBCPXRoaXMuX0dldFNlbGVjdGlvbk1hcmtlclRhZyh0cnVlKTt2YXIgQz10aGlzLl9HZXRTZWxlY3Rpb25NYXJrZXJUYWcoZmFsc2UpO2lmICghQiYmIUMpe3RoaXMuX1JhbmdlLnNldFN0YXJ0KHRoaXMuV2luZG93LmRvY3VtZW50LmJvZHksMCk7dGhpcy5fVXBkYXRlRWxlbWVudEluZm8oKTtyZXR1cm47fTt0aGlzLl9SYW5nZS5zZXRTdGFydChCLnBhcmVudE5vZGUsRkNLRG9tVG9vbHMuR2V0SW5kZXhPZihCKSk7Qi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEIpO3RoaXMuX1JhbmdlLnNldEVuZChDLnBhcmVudE5vZGUsRkNLRG9tVG9vbHMuR2V0SW5kZXhPZihDKSk7Qy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEMpO3RoaXMuX1VwZGF0ZUVsZW1lbnRJbmZvKCk7fWVsc2V7dmFyIEQ9QS5jcmVhdGVSYW5nZSgpLml0ZW0oMCk7aWYgKEQpe3RoaXMuX1JhbmdlLnNldFN0YXJ0QmVmb3JlKEQpO3RoaXMuX1JhbmdlLnNldEVuZEFmdGVyKEQpO3RoaXMuX1VwZGF0ZUVsZW1lbnRJbmZvKCk7fX19O0ZDS0RvbVJhbmdlLnByb3RvdHlwZS5TZWxlY3Q9ZnVuY3Rpb24oQSl7aWYgKHRoaXMuX1JhbmdlKSB0aGlzLlNlbGVjdEJvb2ttYXJrKHRoaXMuQ3JlYXRlQm9va21hcmsodHJ1ZSksQSk7fTtGQ0tEb21SYW5nZS5wcm90b3R5cGUuU2VsZWN0Qm9va21hcms9ZnVuY3Rpb24oQSxCKXt2YXIgQz10aGlzLkNoZWNrSXNDb2xsYXBzZWQoKTt2YXIgRDt2YXIgRTt2YXIgRj10aGlzLkdldEJvb2ttYXJrTm9kZShBLHRydWUpO2lmICghRikgcmV0dXJuO3ZhciBHO2lmICghQykgRz10aGlzLkdldEJvb2ttYXJrTm9kZShBLGZhbHNlKTt2YXIgSD10aGlzLldpbmRvdy5kb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO0gubW92ZVRvRWxlbWVudFRleHQoRik7SC5tb3ZlU3RhcnQoJ2NoYXJhY3RlcicsMSk7aWYgKEcpe3ZhciBJPXRoaXMuV2luZG93LmRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7SS5tb3ZlVG9FbGVtZW50VGV4dChHKTtILnNldEVuZFBvaW50KCdFbmRUb0VuZCcsSSk7SC5tb3ZlRW5kKCdjaGFyYWN0ZXInLC0xKTt9ZWxzZXtEPUJ8fCFGLnByZXZpb3VzU2libGluZ3x8Ri5wcmV2aW91c1NpYmxpbmcubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09J2JyJztFPXRoaXMuV2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtFLmlubmVySFRNTD0nJiM2NTI3OTsnO0YucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRSxGKTtpZiAoRCl7Ri5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLldpbmRvdy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnXHVmZWZmJyksRik7fX07aWYgKCF0aGlzLl9SYW5nZSkgdGhpcy5fUmFuZ2U9dGhpcy5DcmVhdGVSYW5nZSgpO3RoaXMuX1JhbmdlLnNldFN0YXJ0QmVmb3JlKEYpO0YucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChGKTtpZiAoQyl7aWYgKEQpe0gubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLC0xKTtILnNlbGVjdCgpO3RoaXMuV2luZG93LmRvY3VtZW50LnNlbGVjdGlvbi5jbGVhcigpO31lbHNlIEguc2VsZWN0KCk7RkNLRG9tVG9vbHMuUmVtb3ZlTm9kZShFKTt9ZWxzZXt0aGlzLl9SYW5nZS5zZXRFbmRCZWZvcmUoRyk7Ry5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEcpO0guc2VsZWN0KCk7fX07RkNLRG9tUmFuZ2UucHJvdG90eXBlLl9HZXRTZWxlY3Rpb25NYXJrZXJUYWc9ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5XaW5kb3cuZG9jdW1lbnQ7dmFyIEM9Qi5zZWxlY3Rpb247dmFyIEQ7dHJ5e0Q9Qy5jcmVhdGVSYW5nZSgpO31jYXRjaCAoZSl7cmV0dXJuIG51bGw7fTtpZiAoRC5wYXJlbnRFbGVtZW50KCkuZG9jdW1lbnQhPUIpIHJldHVybiBudWxsO0QuY29sbGFwc2UoQT09PXRydWUpO3ZhciBFPSdmY2tfZG9tX3JhbmdlX3RlbXBfJysobmV3IERhdGUoKSkudmFsdWVPZigpKydfJytNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqMTAwMCk7RC5wYXN0ZUhUTUwoJzxzcGFuIGlkPSInK0UrJyI+PC9zcGFuPicpO3JldHVybiBCLmdldEVsZW1lbnRCeUlkKEUpO307CnZhciBGQ0tEb21SYW5nZUl0ZXJhdG9yPWZ1bmN0aW9uKEEpe3RoaXMuUmFuZ2U9QTt0aGlzLkZvcmNlQnJCcmVhaz1mYWxzZTt0aGlzLkVuZm9yY2VSZWFsQmxvY2tzPWZhbHNlO307RkNLRG9tUmFuZ2VJdGVyYXRvci5DcmVhdGVGcm9tU2VsZWN0aW9uPWZ1bmN0aW9uKEEpe3ZhciBCPW5ldyBGQ0tEb21SYW5nZShBKTtCLk1vdmVUb1NlbGVjdGlvbigpO3JldHVybiBuZXcgRkNLRG9tUmFuZ2VJdGVyYXRvcihCKTt9O0ZDS0RvbVJhbmdlSXRlcmF0b3IucHJvdG90eXBlPXtHZXROZXh0UGFyYWdyYXBoOmZ1bmN0aW9uKCl7dmFyIEE7dmFyIEI7dmFyIEM7dmFyIEQ7dmFyIEU7dmFyIEY9dGhpcy5Gb3JjZUJyQnJlYWs/RkNLTGlzdHNMaWIuTGlzdEJvdW5kYXJpZXM6RkNLTGlzdHNMaWIuQmxvY2tCb3VuZGFyaWVzO2lmICghdGhpcy5fTGFzdE5vZGUpe3ZhciBCPXRoaXMuUmFuZ2UuQ2xvbmUoKTtCLkV4cGFuZCh0aGlzLkZvcmNlQnJCcmVhaz8nbGlzdF9jb250ZW50cyc6J2Jsb2NrX2NvbnRlbnRzJyk7dGhpcy5fTmV4dE5vZGU9Qi5HZXRUb3VjaGVkU3RhcnROb2RlKCk7dGhpcy5fTGFzdE5vZGU9Qi5HZXRUb3VjaGVkRW5kTm9kZSgpO0I9bnVsbDt9O3ZhciBIPXRoaXMuX05leHROb2RlO3ZhciBJPXRoaXMuX0xhc3ROb2RlO3RoaXMuX05leHROb2RlPW51bGw7d2hpbGUgKEgpe3ZhciBKPWZhbHNlO3ZhciBLPShILm5vZGVUeXBlIT0xKTt2YXIgTD1mYWxzZTtpZiAoIUspe3ZhciBNPUgubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZiAoRltNXSYmKCFGQ0tCcm93c2VySW5mby5Jc0lFfHxILnNjb3BlTmFtZT09J0hUTUwnKSl7aWYgKE09PSdicicpIEs9dHJ1ZTtlbHNlIGlmICghQiYmSC5jaGlsZE5vZGVzLmxlbmd0aD09MCYmTSE9J2hyJyl7QT1IO0M9SD09STticmVhazt9O2lmIChCKXtCLlNldEVuZChILDMsdHJ1ZSk7aWYgKE0hPSdicicpIHRoaXMuX05leHROb2RlPUZDS0RvbVRvb2xzLkdldE5leHRTb3VyY2VOb2RlKEgsdHJ1ZSxudWxsLEkpfHxIO307Sj10cnVlO31lbHNle2lmIChILmZpcnN0Q2hpbGQpe2lmICghQil7Qj1uZXcgRkNLRG9tUmFuZ2UodGhpcy5SYW5nZS5XaW5kb3cpO0IuU2V0U3RhcnQoSCwzLHRydWUpO307SD1ILmZpcnN0Q2hpbGQ7Y29udGludWU7fTtLPXRydWU7fX1lbHNlIGlmIChILm5vZGVUeXBlPT0zKXtpZiAoL15bXHJcblx0IF0rJC8udGVzdChILm5vZGVWYWx1ZSkpIEs9ZmFsc2U7fTtpZiAoSyYmIUIpe0I9bmV3IEZDS0RvbVJhbmdlKHRoaXMuUmFuZ2UuV2luZG93KTtCLlNldFN0YXJ0KEgsMyx0cnVlKTt9O0M9KCghSnx8SykmJkg9PUkpO2lmIChCJiYhSil7d2hpbGUgKCFILm5leHRTaWJsaW5nJiYhQyl7dmFyIE49SC5wYXJlbnROb2RlO2lmIChGW04ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pe0o9dHJ1ZTtDPUN8fChOPT1JKTticmVhazt9O0g9TjtLPXRydWU7Qz0oSD09SSk7TD10cnVlO319O2lmIChLKSBCLlNldEVuZChILDQsdHJ1ZSk7aWYgKChKfHxDKSYmQil7Qi5fVXBkYXRlRWxlbWVudEluZm8oKTtpZiAoQi5TdGFydE5vZGU9PUIuRW5kTm9kZSYmQi5TdGFydE5vZGUucGFyZW50Tm9kZT09Qi5TdGFydEJsb2NrTGltaXQmJkIuU3RhcnROb2RlLmdldEF0dHJpYnV0ZSYmQi5TdGFydE5vZGUuZ2V0QXR0cmlidXRlKCdfZmNrX2Jvb2ttYXJrJykpIEI9bnVsbDtlbHNlIGJyZWFrO307aWYgKEMpIGJyZWFrO0g9RkNLRG9tVG9vbHMuR2V0TmV4dFNvdXJjZU5vZGUoSCxMLG51bGwsSSk7fTtpZiAoIUEpe2lmICghQil7dGhpcy5fTmV4dE5vZGU9bnVsbDtyZXR1cm4gbnVsbDt9O0E9Qi5TdGFydEJsb2NrO2lmICghQSYmIXRoaXMuRW5mb3JjZVJlYWxCbG9ja3MmJkIuU3RhcnRCbG9ja0xpbWl0Lm5vZGVOYW1lLklFcXVhbHMoJ0RJVicsJ1RIJywnVEQnKSYmQi5DaGVja1N0YXJ0T2ZCbG9jaygpJiZCLkNoZWNrRW5kT2ZCbG9jaygpKXtBPUIuU3RhcnRCbG9ja0xpbWl0O31lbHNlIGlmICghQXx8KHRoaXMuRW5mb3JjZVJlYWxCbG9ja3MmJkEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09J2xpJykpe0E9dGhpcy5SYW5nZS5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChGQ0tDb25maWcuRW50ZXJNb2RlPT0ncCc/J3AnOidkaXYnKTtCLkV4dHJhY3RDb250ZW50cygpLkFwcGVuZFRvKEEpO0ZDS0RvbVRvb2xzLlRyaW1Ob2RlKEEpO0IuSW5zZXJ0Tm9kZShBKTtEPXRydWU7RT10cnVlO31lbHNlIGlmIChBLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkhPSdsaScpe2lmICghQi5DaGVja1N0YXJ0T2ZCbG9jaygpfHwhQi5DaGVja0VuZE9mQmxvY2soKSl7QT1BLmNsb25lTm9kZShmYWxzZSk7Qi5FeHRyYWN0Q29udGVudHMoKS5BcHBlbmRUbyhBKTtGQ0tEb21Ub29scy5UcmltTm9kZShBKTt2YXIgTz1CLlNwbGl0QmxvY2soKTtEPSFPLldhc1N0YXJ0T2ZCbG9jaztFPSFPLldhc0VuZE9mQmxvY2s7Qi5JbnNlcnROb2RlKEEpO319ZWxzZSBpZiAoIUMpe3RoaXMuX05leHROb2RlPUE9PUk/bnVsbDpGQ0tEb21Ub29scy5HZXROZXh0U291cmNlTm9kZShCLkVuZE5vZGUsdHJ1ZSxudWxsLEkpO3JldHVybiBBO319O2lmIChEKXt2YXIgUD1BLnByZXZpb3VzU2libGluZztpZiAoUCYmUC5ub2RlVHlwZT09MSl7aWYgKFAubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09J2JyJykgUC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKFApO2Vsc2UgaWYgKFAubGFzdENoaWxkJiZQLmxhc3RDaGlsZC5ub2RlTmFtZS5JRXF1YWxzKCdicicpKSBQLnJlbW92ZUNoaWxkKFAubGFzdENoaWxkKTt9fTtpZiAoRSl7dmFyIFE9QS5sYXN0Q2hpbGQ7aWYgKFEmJlEubm9kZVR5cGU9PTEmJlEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09J2JyJykgQS5yZW1vdmVDaGlsZChRKTt9O2lmICghdGhpcy5fTmV4dE5vZGUpIHRoaXMuX05leHROb2RlPShDfHxBPT1JKT9udWxsOkZDS0RvbVRvb2xzLkdldE5leHRTb3VyY2VOb2RlKEEsdHJ1ZSxudWxsLEkpO3JldHVybiBBO319Owp2YXIgRkNLRG9jdW1lbnRGcmFnbWVudD1mdW5jdGlvbihBKXt0aGlzLl9Eb2N1bWVudD1BO3RoaXMuUm9vdE5vZGU9QS5jcmVhdGVFbGVtZW50KCdkaXYnKTt9O0ZDS0RvY3VtZW50RnJhZ21lbnQucHJvdG90eXBlPXtBcHBlbmRUbzpmdW5jdGlvbihBKXtGQ0tEb21Ub29scy5Nb3ZlQ2hpbGRyZW4odGhpcy5Sb290Tm9kZSxBKTt9LEFwcGVuZEh0bWw6ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5fRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7Qi5pbm5lckhUTUw9QTtGQ0tEb21Ub29scy5Nb3ZlQ2hpbGRyZW4oQix0aGlzLlJvb3ROb2RlKTt9LEluc2VydEFmdGVyTm9kZTpmdW5jdGlvbihBKXt2YXIgQj10aGlzLlJvb3ROb2RlO3ZhciBDO3doaWxlKChDPUIubGFzdENoaWxkKSkgRkNLRG9tVG9vbHMuSW5zZXJ0QWZ0ZXJOb2RlKEEsQi5yZW1vdmVDaGlsZChDKSk7fX07CnZhciBGQ0tXM0NSYW5nZT1mdW5jdGlvbihBKXt0aGlzLl9Eb2N1bWVudD1BO3RoaXMuc3RhcnRDb250YWluZXI9bnVsbDt0aGlzLnN0YXJ0T2Zmc2V0PW51bGw7dGhpcy5lbmRDb250YWluZXI9bnVsbDt0aGlzLmVuZE9mZnNldD1udWxsO3RoaXMuY29sbGFwc2VkPXRydWU7fTtGQ0tXM0NSYW5nZS5DcmVhdGVSYW5nZT1mdW5jdGlvbihBKXtyZXR1cm4gbmV3IEZDS1czQ1JhbmdlKEEpO307RkNLVzNDUmFuZ2UuQ3JlYXRlRnJvbVJhbmdlPWZ1bmN0aW9uKEEsQil7dmFyIEM9RkNLVzNDUmFuZ2UuQ3JlYXRlUmFuZ2UoQSk7Qy5zZXRTdGFydChCLnN0YXJ0Q29udGFpbmVyLEIuc3RhcnRPZmZzZXQpO0Muc2V0RW5kKEIuZW5kQ29udGFpbmVyLEIuZW5kT2Zmc2V0KTtyZXR1cm4gQzt9O0ZDS1czQ1JhbmdlLnByb3RvdHlwZT17X1VwZGF0ZUNvbGxhcHNlZDpmdW5jdGlvbigpe3RoaXMuY29sbGFwc2VkPSh0aGlzLnN0YXJ0Q29udGFpbmVyPT10aGlzLmVuZENvbnRhaW5lciYmdGhpcy5zdGFydE9mZnNldD09dGhpcy5lbmRPZmZzZXQpO30sc2V0U3RhcnQ6ZnVuY3Rpb24oQSxCKXt0aGlzLnN0YXJ0Q29udGFpbmVyPUE7dGhpcy5zdGFydE9mZnNldD1CO2lmICghdGhpcy5lbmRDb250YWluZXIpe3RoaXMuZW5kQ29udGFpbmVyPUE7dGhpcy5lbmRPZmZzZXQ9Qjt9O3RoaXMuX1VwZGF0ZUNvbGxhcHNlZCgpO30sc2V0RW5kOmZ1bmN0aW9uKEEsQil7dGhpcy5lbmRDb250YWluZXI9QTt0aGlzLmVuZE9mZnNldD1CO2lmICghdGhpcy5zdGFydENvbnRhaW5lcil7dGhpcy5zdGFydENvbnRhaW5lcj1BO3RoaXMuc3RhcnRPZmZzZXQ9Qjt9O3RoaXMuX1VwZGF0ZUNvbGxhcHNlZCgpO30sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihBKXt0aGlzLnNldFN0YXJ0KEEucGFyZW50Tm9kZSxGQ0tEb21Ub29scy5HZXRJbmRleE9mKEEpKzEpO30sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oQSl7dGhpcy5zZXRTdGFydChBLnBhcmVudE5vZGUsRkNLRG9tVG9vbHMuR2V0SW5kZXhPZihBKSk7fSxzZXRFbmRBZnRlcjpmdW5jdGlvbihBKXt0aGlzLnNldEVuZChBLnBhcmVudE5vZGUsRkNLRG9tVG9vbHMuR2V0SW5kZXhPZihBKSsxKTt9LHNldEVuZEJlZm9yZTpmdW5jdGlvbihBKXt0aGlzLnNldEVuZChBLnBhcmVudE5vZGUsRkNLRG9tVG9vbHMuR2V0SW5kZXhPZihBKSk7fSxjb2xsYXBzZTpmdW5jdGlvbihBKXtpZiAoQSl7dGhpcy5lbmRDb250YWluZXI9dGhpcy5zdGFydENvbnRhaW5lcjt0aGlzLmVuZE9mZnNldD10aGlzLnN0YXJ0T2Zmc2V0O31lbHNle3RoaXMuc3RhcnRDb250YWluZXI9dGhpcy5lbmRDb250YWluZXI7dGhpcy5zdGFydE9mZnNldD10aGlzLmVuZE9mZnNldDt9O3RoaXMuY29sbGFwc2VkPXRydWU7fSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oQSl7dGhpcy5zZXRTdGFydChBLDApO3RoaXMuc2V0RW5kKEEsQS5ub2RlVHlwZT09Mz9BLmRhdGEubGVuZ3RoOkEuY2hpbGROb2Rlcy5sZW5ndGgpO30saW5zZXJ0Tm9kZTpmdW5jdGlvbihBKXt2YXIgQj10aGlzLnN0YXJ0Q29udGFpbmVyO3ZhciBDPXRoaXMuc3RhcnRPZmZzZXQ7aWYgKEIubm9kZVR5cGU9PTMpe0Iuc3BsaXRUZXh0KEMpO2lmIChCPT10aGlzLmVuZENvbnRhaW5lcikgdGhpcy5zZXRFbmQoQi5uZXh0U2libGluZyx0aGlzLmVuZE9mZnNldC10aGlzLnN0YXJ0T2Zmc2V0KTtGQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoQixBKTtyZXR1cm47fWVsc2V7Qi5pbnNlcnRCZWZvcmUoQSxCLmNoaWxkTm9kZXNbQ118fG51bGwpO2lmIChCPT10aGlzLmVuZENvbnRhaW5lcil7dGhpcy5lbmRPZmZzZXQrKzt0aGlzLmNvbGxhcHNlZD1mYWxzZTt9fX0sZGVsZXRlQ29udGVudHM6ZnVuY3Rpb24oKXtpZiAodGhpcy5jb2xsYXBzZWQpIHJldHVybjt0aGlzLl9FeGVjQ29udGVudHNBY3Rpb24oMCk7fSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXt2YXIgQT1uZXcgRkNLRG9jdW1lbnRGcmFnbWVudCh0aGlzLl9Eb2N1bWVudCk7aWYgKCF0aGlzLmNvbGxhcHNlZCkgdGhpcy5fRXhlY0NvbnRlbnRzQWN0aW9uKDEsQSk7cmV0dXJuIEE7fSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7dmFyIEE9bmV3IEZDS0RvY3VtZW50RnJhZ21lbnQodGhpcy5fRG9jdW1lbnQpO2lmICghdGhpcy5jb2xsYXBzZWQpIHRoaXMuX0V4ZWNDb250ZW50c0FjdGlvbigyLEEpO3JldHVybiBBO30sX0V4ZWNDb250ZW50c0FjdGlvbjpmdW5jdGlvbihBLEIpe3ZhciBDPXRoaXMuc3RhcnRDb250YWluZXI7dmFyIEQ9dGhpcy5lbmRDb250YWluZXI7dmFyIEU9dGhpcy5zdGFydE9mZnNldDt2YXIgRj10aGlzLmVuZE9mZnNldDt2YXIgRz1mYWxzZTt2YXIgSD1mYWxzZTtpZiAoRC5ub2RlVHlwZT09MykgRD1ELnNwbGl0VGV4dChGKTtlbHNle2lmIChELmNoaWxkTm9kZXMubGVuZ3RoPjApe2lmIChGPkQuY2hpbGROb2Rlcy5sZW5ndGgtMSl7RD1GQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoRC5sYXN0Q2hpbGQsdGhpcy5fRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpKTtIPXRydWU7fWVsc2UgRD1ELmNoaWxkTm9kZXNbRl07fX07aWYgKEMubm9kZVR5cGU9PTMpe0Muc3BsaXRUZXh0KEUpO2lmIChDPT1EKSBEPUMubmV4dFNpYmxpbmc7fWVsc2V7aWYgKEU9PTApe0M9Qy5pbnNlcnRCZWZvcmUodGhpcy5fRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpLEMuZmlyc3RDaGlsZCk7Rz10cnVlO31lbHNlIGlmIChFPkMuY2hpbGROb2Rlcy5sZW5ndGgtMSl7Qz1DLmFwcGVuZENoaWxkKHRoaXMuX0RvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKSk7Rz10cnVlO31lbHNlIEM9Qy5jaGlsZE5vZGVzW0VdLnByZXZpb3VzU2libGluZzt9O3ZhciBJPUZDS0RvbVRvb2xzLkdldFBhcmVudHMoQyk7dmFyIEo9RkNLRG9tVG9vbHMuR2V0UGFyZW50cyhEKTt2YXIgaSx0b3BTdGFydCx0b3BFbmQ7Zm9yIChpPTA7aTxJLmxlbmd0aDtpKyspe3RvcFN0YXJ0PUlbaV07dG9wRW5kPUpbaV07aWYgKHRvcFN0YXJ0IT10b3BFbmQpIGJyZWFrO307dmFyIEssbGV2ZWxTdGFydE5vZGUsbGV2ZWxDbG9uZSxjdXJyZW50Tm9kZSxjdXJyZW50U2libGluZztpZiAoQikgSz1CLlJvb3ROb2RlO2ZvciAodmFyIGo9aTtqPEkubGVuZ3RoO2orKyl7bGV2ZWxTdGFydE5vZGU9SVtqXTtpZiAoSyYmbGV2ZWxTdGFydE5vZGUhPUMpIGxldmVsQ2xvbmU9Sy5hcHBlbmRDaGlsZChsZXZlbFN0YXJ0Tm9kZS5jbG9uZU5vZGUobGV2ZWxTdGFydE5vZGU9PUMpKTtjdXJyZW50Tm9kZT1sZXZlbFN0YXJ0Tm9kZS5uZXh0U2libGluZzt3aGlsZShjdXJyZW50Tm9kZSl7aWYgKGN1cnJlbnROb2RlPT1KW2pdfHxjdXJyZW50Tm9kZT09RCkgYnJlYWs7Y3VycmVudFNpYmxpbmc9Y3VycmVudE5vZGUubmV4dFNpYmxpbmc7aWYgKEE9PTIpIEsuYXBwZW5kQ2hpbGQoY3VycmVudE5vZGUuY2xvbmVOb2RlKHRydWUpKTtlbHNle2N1cnJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY3VycmVudE5vZGUpO2lmIChBPT0xKSBLLmFwcGVuZENoaWxkKGN1cnJlbnROb2RlKTt9O2N1cnJlbnROb2RlPWN1cnJlbnRTaWJsaW5nO307aWYgKEspIEs9bGV2ZWxDbG9uZTt9O2lmIChCKSBLPUIuUm9vdE5vZGU7Zm9yICh2YXIgaz1pO2s8Si5sZW5ndGg7aysrKXtsZXZlbFN0YXJ0Tm9kZT1KW2tdO2lmIChBPjAmJmxldmVsU3RhcnROb2RlIT1EKSBsZXZlbENsb25lPUsuYXBwZW5kQ2hpbGQobGV2ZWxTdGFydE5vZGUuY2xvbmVOb2RlKGxldmVsU3RhcnROb2RlPT1EKSk7aWYgKCFJW2tdfHxsZXZlbFN0YXJ0Tm9kZS5wYXJlbnROb2RlIT1JW2tdLnBhcmVudE5vZGUpe2N1cnJlbnROb2RlPWxldmVsU3RhcnROb2RlLnByZXZpb3VzU2libGluZzt3aGlsZShjdXJyZW50Tm9kZSl7aWYgKGN1cnJlbnROb2RlPT1JW2tdfHxjdXJyZW50Tm9kZT09QykgYnJlYWs7Y3VycmVudFNpYmxpbmc9Y3VycmVudE5vZGUucHJldmlvdXNTaWJsaW5nO2lmIChBPT0yKSBLLmluc2VydEJlZm9yZShjdXJyZW50Tm9kZS5jbG9uZU5vZGUodHJ1ZSksSy5maXJzdENoaWxkKTtlbHNle2N1cnJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY3VycmVudE5vZGUpO2lmIChBPT0xKSBLLmluc2VydEJlZm9yZShjdXJyZW50Tm9kZSxLLmZpcnN0Q2hpbGQpO307Y3VycmVudE5vZGU9Y3VycmVudFNpYmxpbmc7fX07aWYgKEspIEs9bGV2ZWxDbG9uZTt9O2lmIChBPT0yKXt2YXIgTD10aGlzLnN0YXJ0Q29udGFpbmVyO2lmIChMLm5vZGVUeXBlPT0zKXtMLmRhdGErPUwubmV4dFNpYmxpbmcuZGF0YTtMLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoTC5uZXh0U2libGluZyk7fTt2YXIgTT10aGlzLmVuZENvbnRhaW5lcjtpZiAoTS5ub2RlVHlwZT09MyYmTS5uZXh0U2libGluZyl7TS5kYXRhKz1NLm5leHRTaWJsaW5nLmRhdGE7TS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKE0ubmV4dFNpYmxpbmcpO319ZWxzZXtpZiAodG9wU3RhcnQmJnRvcEVuZCYmKEMucGFyZW50Tm9kZSE9dG9wU3RhcnQucGFyZW50Tm9kZXx8RC5wYXJlbnROb2RlIT10b3BFbmQucGFyZW50Tm9kZSkpe3ZhciBOPUZDS0RvbVRvb2xzLkdldEluZGV4T2YodG9wRW5kKTtpZiAoRyYmdG9wRW5kLnBhcmVudE5vZGU9PUMucGFyZW50Tm9kZSkgTi0tO3RoaXMuc2V0U3RhcnQodG9wRW5kLnBhcmVudE5vZGUsTik7fTt0aGlzLmNvbGxhcHNlKHRydWUpO307aWYoRykgQy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEMpO2lmKEgmJkQucGFyZW50Tm9kZSkgRC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEQpO30sY2xvbmVSYW5nZTpmdW5jdGlvbigpe3JldHVybiBGQ0tXM0NSYW5nZS5DcmVhdGVGcm9tUmFuZ2UodGhpcy5fRG9jdW1lbnQsdGhpcyk7fX07CnZhciBGQ0tFbnRlcktleT1mdW5jdGlvbihBLEIsQyxEKXt0aGlzLldpbmRvdz1BO3RoaXMuRW50ZXJNb2RlPUJ8fCdwJzt0aGlzLlNoaWZ0RW50ZXJNb2RlPUN8fCdicic7dmFyIEU9bmV3IEZDS0tleXN0cm9rZUhhbmRsZXIoZmFsc2UpO0UuX0VudGVyS2V5PXRoaXM7RS5PbktleXN0cm9rZT1GQ0tFbnRlcktleV9PbktleXN0cm9rZTtFLlNldEtleXN0cm9rZXMoW1sxMywnRW50ZXInXSxbU0hJRlQrMTMsJ1NoaWZ0RW50ZXInXSxbOCwnQmFja3NwYWNlJ10sW0NUUkwrOCwnQ3RybEJhY2tzcGFjZSddLFs0NiwnRGVsZXRlJ11dKTt0aGlzLlRhYlRleHQ9Jyc7aWYgKEQ+MHx8RkNLQnJvd3NlckluZm8uSXNTYWZhcmkpe3doaWxlIChELS0pIHRoaXMuVGFiVGV4dCs9J1x4YTAnO0UuU2V0S2V5c3Ryb2tlcyhbOSwnVGFiJ10pO307RS5BdHRhY2hUb0VsZW1lbnQoQS5kb2N1bWVudCk7fTtmdW5jdGlvbiBGQ0tFbnRlcktleV9PbktleXN0cm9rZShBLEIpe3ZhciBDPXRoaXMuX0VudGVyS2V5O3RyeXtzd2l0Y2ggKEIpe2Nhc2UgJ0VudGVyJzpyZXR1cm4gQy5Eb0VudGVyKCk7YnJlYWs7Y2FzZSAnU2hpZnRFbnRlcic6cmV0dXJuIEMuRG9TaGlmdEVudGVyKCk7YnJlYWs7Y2FzZSAnQmFja3NwYWNlJzpyZXR1cm4gQy5Eb0JhY2tzcGFjZSgpO2JyZWFrO2Nhc2UgJ0RlbGV0ZSc6cmV0dXJuIEMuRG9EZWxldGUoKTticmVhaztjYXNlICdUYWInOnJldHVybiBDLkRvVGFiKCk7YnJlYWs7Y2FzZSAnQ3RybEJhY2tzcGFjZSc6cmV0dXJuIEMuRG9DdHJsQmFja3NwYWNlKCk7YnJlYWs7fX1jYXRjaCAoZSl7fTtyZXR1cm4gZmFsc2U7fTtGQ0tFbnRlcktleS5wcm90b3R5cGUuRG9FbnRlcj1mdW5jdGlvbihBLEIpe0ZDS1VuZG8uU2F2ZVVuZG9TdGVwKCk7dGhpcy5fSGFzU2hpZnQ9KEI9PT10cnVlKTt2YXIgQz1GQ0tTZWxlY3Rpb24uR2V0UGFyZW50RWxlbWVudCgpO3ZhciBEPW5ldyBGQ0tFbGVtZW50UGF0aChDKTt2YXIgRT1BfHx0aGlzLkVudGVyTW9kZTtpZiAoRT09J2JyJ3x8RC5CbG9jayYmRC5CbG9jay50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSdwcmUnKSByZXR1cm4gdGhpcy5fRXhlY3V0ZUVudGVyQnIoKTtlbHNlIHJldHVybiB0aGlzLl9FeGVjdXRlRW50ZXJCbG9jayhFKTt9O0ZDS0VudGVyS2V5LnByb3RvdHlwZS5Eb1NoaWZ0RW50ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5Eb0VudGVyKHRoaXMuU2hpZnRFbnRlck1vZGUsdHJ1ZSk7fTtGQ0tFbnRlcktleS5wcm90b3R5cGUuRG9CYWNrc3BhY2U9ZnVuY3Rpb24oKXt2YXIgQT1mYWxzZTt2YXIgQj1uZXcgRkNLRG9tUmFuZ2UodGhpcy5XaW5kb3cpO0IuTW92ZVRvU2VsZWN0aW9uKCk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUmJnRoaXMuX0NoZWNrSXNBbGxDb250ZW50c0luY2x1ZGVkKEIsdGhpcy5XaW5kb3cuZG9jdW1lbnQuYm9keSkpe3RoaXMuX0ZpeElFU2VsZWN0QWxsQnVnKEIpO3JldHVybiB0cnVlO307dmFyIEM9Qi5DaGVja0lzQ29sbGFwc2VkKCk7aWYgKCFDKXtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSYmdGhpcy5XaW5kb3cuZG9jdW1lbnQuc2VsZWN0aW9uLnR5cGUudG9Mb3dlckNhc2UoKT09ImNvbnRyb2wiKXt2YXIgRD10aGlzLldpbmRvdy5kb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtmb3IgKHZhciBpPUQubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciBFPUQuaXRlbShpKTtFLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoRSk7fTtyZXR1cm4gdHJ1ZTt9O3JldHVybiBmYWxzZTt9O2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt2YXIgRj1GQ0tEb21Ub29scy5HZXRQcmV2aW91c1NvdXJjZUVsZW1lbnQoQi5TdGFydE5vZGUsdHJ1ZSk7aWYgKEYmJkYubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09J2JyJyl7dmFyIEc9Qi5DbG9uZSgpO0cuU2V0U3RhcnQoRiw0KTtpZiAoRy5DaGVja0lzRW1wdHkoKSl7Ri5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEYpO3JldHVybiB0cnVlO319fTt2YXIgSD1CLlN0YXJ0QmxvY2s7dmFyIEk9Qi5FbmRCbG9jaztpZiAoQi5TdGFydEJsb2NrTGltaXQ9PUIuRW5kQmxvY2tMaW1pdCYmSCYmSSl7aWYgKCFDKXt2YXIgSj1CLkNoZWNrRW5kT2ZCbG9jaygpO0IuRGVsZXRlQ29udGVudHMoKTtpZiAoSCE9SSl7Qi5TZXRTdGFydChJLDEpO0IuU2V0RW5kKEksMSk7fTtCLlNlbGVjdCgpO0E9KEg9PUkpO307aWYgKEIuQ2hlY2tTdGFydE9mQmxvY2soKSl7dmFyIEs9Qi5TdGFydEJsb2NrO3ZhciBMPUZDS0RvbVRvb2xzLkdldFByZXZpb3VzU291cmNlRWxlbWVudChLLHRydWUsWydCT0RZJyxCLlN0YXJ0QmxvY2tMaW1pdC5ub2RlTmFtZV0sWydVTCcsJ09MJ10pO0E9dGhpcy5fRXhlY3V0ZUJhY2tzcGFjZShCLEwsSyk7fWVsc2UgaWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlKXtCLlNlbGVjdCgpO319O0IuUmVsZWFzZSgpO3JldHVybiBBO307RkNLRW50ZXJLZXkucHJvdG90eXBlLkRvQ3RybEJhY2tzcGFjZT1mdW5jdGlvbigpe0ZDS1VuZG8uU2F2ZVVuZG9TdGVwKCk7dmFyIEE9bmV3IEZDS0RvbVJhbmdlKHRoaXMuV2luZG93KTtBLk1vdmVUb1NlbGVjdGlvbigpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFJiZ0aGlzLl9DaGVja0lzQWxsQ29udGVudHNJbmNsdWRlZChBLHRoaXMuV2luZG93LmRvY3VtZW50LmJvZHkpKXt0aGlzLl9GaXhJRVNlbGVjdEFsbEJ1ZyhBKTtyZXR1cm4gdHJ1ZTt9O3JldHVybiBmYWxzZTt9O0ZDS0VudGVyS2V5LnByb3RvdHlwZS5fRXhlY3V0ZUJhY2tzcGFjZT1mdW5jdGlvbihBLEIsQyl7dmFyIEQ9ZmFsc2U7aWYgKCFCJiZDJiZDLm5vZGVOYW1lLklFcXVhbHMoJ0xJJykmJkMucGFyZW50Tm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lLklFcXVhbHMoJ0xJJykpe3RoaXMuX091dGRlbnRXaXRoU2VsZWN0aW9uKEMsQSk7cmV0dXJuIHRydWU7fTtpZiAoQiYmQi5ub2RlTmFtZS5JRXF1YWxzKCdMSScpKXt2YXIgRT1GQ0tEb21Ub29scy5HZXRMYXN0Q2hpbGQoQixbJ1VMJywnT0wnXSk7d2hpbGUgKEUpe0I9RkNLRG9tVG9vbHMuR2V0TGFzdENoaWxkKEUsJ0xJJyk7RT1GQ0tEb21Ub29scy5HZXRMYXN0Q2hpbGQoQixbJ1VMJywnT0wnXSk7fX07aWYgKEImJkMpe2lmIChDLm5vZGVOYW1lLklFcXVhbHMoJ0xJJykmJiFCLm5vZGVOYW1lLklFcXVhbHMoJ0xJJykpe3RoaXMuX091dGRlbnRXaXRoU2VsZWN0aW9uKEMsQSk7cmV0dXJuIHRydWU7fTt2YXIgRj1DLnBhcmVudE5vZGU7dmFyIEc9Qi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmIChGQ0tMaXN0c0xpYi5FbXB0eUVsZW1lbnRzW0ddIT1udWxsfHxHPT0ndGFibGUnKXtGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEIpO0Q9dHJ1ZTt9ZWxzZXtGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEMpO3doaWxlIChGLmlubmVySFRNTC5UcmltKCkubGVuZ3RoPT0wKXt2YXIgSD1GLnBhcmVudE5vZGU7SC5yZW1vdmVDaGlsZChGKTtGPUg7fTtGQ0tEb21Ub29scy5MVHJpbU5vZGUoQyk7RkNLRG9tVG9vbHMuUlRyaW1Ob2RlKEIpO0EuU2V0U3RhcnQoQiwyLHRydWUpO0EuQ29sbGFwc2UodHJ1ZSk7dmFyIEk9QS5DcmVhdGVCb29rbWFyayh0cnVlKTtpZiAoIUMudGFnTmFtZS5JRXF1YWxzKFsnVEFCTEUnXSkpIEZDS0RvbVRvb2xzLk1vdmVDaGlsZHJlbihDLEIpO0EuU2VsZWN0Qm9va21hcmsoSSk7RD10cnVlO319O3JldHVybiBEO307RkNLRW50ZXJLZXkucHJvdG90eXBlLkRvRGVsZXRlPWZ1bmN0aW9uKCl7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTt2YXIgQT1mYWxzZTt2YXIgQj1uZXcgRkNLRG9tUmFuZ2UodGhpcy5XaW5kb3cpO0IuTW92ZVRvU2VsZWN0aW9uKCk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUmJnRoaXMuX0NoZWNrSXNBbGxDb250ZW50c0luY2x1ZGVkKEIsdGhpcy5XaW5kb3cuZG9jdW1lbnQuYm9keSkpe3RoaXMuX0ZpeElFU2VsZWN0QWxsQnVnKEIpO3JldHVybiB0cnVlO307aWYgKEIuQ2hlY2tJc0NvbGxhcHNlZCgpJiZCLkNoZWNrRW5kT2ZCbG9jayhGQ0tCcm93c2VySW5mby5Jc0dlY2tvTGlrZSkpe3ZhciBDPUIuU3RhcnRCbG9jazt2YXIgRD1GQ0tUb29scy5HZXRFbGVtZW50QXNjZW5zb3IoQywndGQnKTt2YXIgRT1GQ0tEb21Ub29scy5HZXROZXh0U291cmNlRWxlbWVudChDLHRydWUsW0IuU3RhcnRCbG9ja0xpbWl0Lm5vZGVOYW1lXSxbJ1VMJywnT0wnLCdUUiddLHRydWUpO2lmIChEKXt2YXIgRj1GQ0tUb29scy5HZXRFbGVtZW50QXNjZW5zb3IoRSwndGQnKTtpZiAoRiE9RCkgcmV0dXJuIHRydWU7fTtBPXRoaXMuX0V4ZWN1dGVCYWNrc3BhY2UoQixDLEUpO307Qi5SZWxlYXNlKCk7cmV0dXJuIEE7fTtGQ0tFbnRlcktleS5wcm90b3R5cGUuRG9UYWI9ZnVuY3Rpb24oKXt2YXIgQT1uZXcgRkNLRG9tUmFuZ2UodGhpcy5XaW5kb3cpO0EuTW92ZVRvU2VsZWN0aW9uKCk7dmFyIEI9QS5fUmFuZ2Uuc3RhcnRDb250YWluZXI7d2hpbGUgKEIpe2lmIChCLm5vZGVUeXBlPT0xKXt2YXIgQz1CLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZiAoQz09InRyInx8Qz09InRkInx8Qz09InRoInx8Qz09InRib2R5Inx8Qz09InRhYmxlIikgcmV0dXJuIGZhbHNlO2Vsc2UgYnJlYWs7fTtCPUIucGFyZW50Tm9kZTt9O2lmICh0aGlzLlRhYlRleHQpe0EuRGVsZXRlQ29udGVudHMoKTtBLkluc2VydE5vZGUodGhpcy5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGhpcy5UYWJUZXh0KSk7QS5Db2xsYXBzZShmYWxzZSk7QS5TZWxlY3QoKTt9O3JldHVybiB0cnVlO307RkNLRW50ZXJLZXkucHJvdG90eXBlLl9FeGVjdXRlRW50ZXJCbG9jaz1mdW5jdGlvbihBLEIpe3ZhciBDPUJ8fG5ldyBGQ0tEb21SYW5nZSh0aGlzLldpbmRvdyk7dmFyIEQ9Qy5TcGxpdEJsb2NrKEEpO2lmIChEKXt2YXIgRT1ELlByZXZpb3VzQmxvY2s7dmFyIEY9RC5OZXh0QmxvY2s7dmFyIEc9RC5XYXNTdGFydE9mQmxvY2s7dmFyIEg9RC5XYXNFbmRPZkJsb2NrO2lmIChGKXtpZiAoRi5wYXJlbnROb2RlLm5vZGVOYW1lLklFcXVhbHMoJ2xpJykpe0ZDS0RvbVRvb2xzLkJyZWFrUGFyZW50KEYsRi5wYXJlbnROb2RlKTtGQ0tEb21Ub29scy5Nb3ZlTm9kZShGLEYubmV4dFNpYmxpbmcsdHJ1ZSk7fX1lbHNlIGlmIChFJiZFLnBhcmVudE5vZGUubm9kZU5hbWUuSUVxdWFscygnbGknKSl7RkNLRG9tVG9vbHMuQnJlYWtQYXJlbnQoRSxFLnBhcmVudE5vZGUpO0MuTW92ZVRvRWxlbWVudEVkaXRTdGFydChFLm5leHRTaWJsaW5nKTtGQ0tEb21Ub29scy5Nb3ZlTm9kZShFLEUucHJldmlvdXNTaWJsaW5nKTt9O2lmICghRyYmIUgpe2lmIChGLm5vZGVOYW1lLklFcXVhbHMoJ2xpJykmJkYuZmlyc3RDaGlsZCYmRi5maXJzdENoaWxkLm5vZGVOYW1lLklFcXVhbHMoWyd1bCcsJ29sJ10pKSBGLmluc2VydEJlZm9yZShGQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoRikuY3JlYXRlVGV4dE5vZGUoJ1x4YTAnKSxGLmZpcnN0Q2hpbGQpO2lmIChGKSBDLk1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoRik7fWVsc2V7aWYgKEcmJkgmJkUudGFnTmFtZS50b1VwcGVyQ2FzZSgpPT0nTEknKXtDLk1vdmVUb0VsZW1lbnRTdGFydChFKTt0aGlzLl9PdXRkZW50V2l0aFNlbGVjdGlvbihFLEMpO0MuUmVsZWFzZSgpO3JldHVybiB0cnVlO307dmFyIEk7aWYgKEUpe3ZhciBKPUUudGFnTmFtZS50b1VwcGVyQ2FzZSgpO2lmICghdGhpcy5fSGFzU2hpZnQmJiEoL15IWzEtNl0kLykudGVzdChKKSl7ST1GQ0tEb21Ub29scy5DbG9uZUVsZW1lbnQoRSk7fX1lbHNlIGlmIChGKSBJPUZDS0RvbVRvb2xzLkNsb25lRWxlbWVudChGKTtpZiAoIUkpIEk9dGhpcy5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChBKTt2YXIgSz1ELkVsZW1lbnRQYXRoO2lmIChLKXtmb3IgKHZhciBpPTAsbGVuPUsuRWxlbWVudHMubGVuZ3RoO2k8bGVuO2krKyl7dmFyIEw9Sy5FbGVtZW50c1tpXTtpZiAoTD09Sy5CbG9ja3x8TD09Sy5CbG9ja0xpbWl0KSBicmVhaztpZiAoRkNLTGlzdHNMaWIuSW5saW5lQ2hpbGRSZXFFbGVtZW50c1tMLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKXtMPUZDS0RvbVRvb2xzLkNsb25lRWxlbWVudChMKTtGQ0tEb21Ub29scy5Nb3ZlQ2hpbGRyZW4oSSxMKTtJLmFwcGVuZENoaWxkKEwpO319fTtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrb0xpa2UpIEZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnIoSSk7Qy5JbnNlcnROb2RlKEkpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXtDLk1vdmVUb0VsZW1lbnRFZGl0U3RhcnQoSSk7Qy5TZWxlY3QoKTt9O0MuTW92ZVRvRWxlbWVudEVkaXRTdGFydChHJiYhSD9GOkkpO307aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlKXtpZiAoRil7dmFyIE09dGhpcy5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO00uaW5uZXJIVE1MPScmbmJzcDsnO0MuSW5zZXJ0Tm9kZShNKTtGQ0tEb21Ub29scy5TY3JvbGxJbnRvVmlldyhNLGZhbHNlKTtDLkRlbGV0ZUNvbnRlbnRzKCk7fWVsc2V7RkNLRG9tVG9vbHMuU2Nyb2xsSW50b1ZpZXcoRnx8SSxmYWxzZSk7fX07Qy5TZWxlY3QoKTt9O0MuUmVsZWFzZSgpO3JldHVybiB0cnVlO307RkNLRW50ZXJLZXkucHJvdG90eXBlLl9FeGVjdXRlRW50ZXJCcj1mdW5jdGlvbihBKXt2YXIgQj1uZXcgRkNLRG9tUmFuZ2UodGhpcy5XaW5kb3cpO0IuTW92ZVRvU2VsZWN0aW9uKCk7aWYgKEIuU3RhcnRCbG9ja0xpbWl0PT1CLkVuZEJsb2NrTGltaXQpe0IuRGVsZXRlQ29udGVudHMoKTtCLk1vdmVUb1NlbGVjdGlvbigpO3ZhciBDPUIuQ2hlY2tTdGFydE9mQmxvY2soKTt2YXIgRD1CLkNoZWNrRW5kT2ZCbG9jaygpO3ZhciBFPUIuU3RhcnRCbG9jaz9CLlN0YXJ0QmxvY2sudGFnTmFtZS50b1VwcGVyQ2FzZSgpOicnO3ZhciBGPXRoaXMuX0hhc1NoaWZ0O3ZhciBHPWZhbHNlO2lmICghRiYmRT09J0xJJykgcmV0dXJuIHRoaXMuX0V4ZWN1dGVFbnRlckJsb2NrKG51bGwsQik7aWYgKCFGJiZEJiYoL15IWzEtNl0kLykudGVzdChFKSl7RkNLRG9tVG9vbHMuSW5zZXJ0QWZ0ZXJOb2RlKEIuU3RhcnRCbG9jayx0aGlzLldpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpKTtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrbykgRkNLRG9tVG9vbHMuSW5zZXJ0QWZ0ZXJOb2RlKEIuU3RhcnRCbG9jayx0aGlzLldpbmRvdy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJykpO0IuU2V0U3RhcnQoQi5TdGFydEJsb2NrLm5leHRTaWJsaW5nLEZDS0Jyb3dzZXJJbmZvLklzSUU/MzoxKTt9ZWxzZXt2YXIgSDtHPUUuSUVxdWFscygncHJlJyk7aWYgKEcpIEg9dGhpcy5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoRkNLQnJvd3NlckluZm8uSXNJRT8nXHInOidcbicpO2Vsc2UgSD10aGlzLldpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpO0IuSW5zZXJ0Tm9kZShIKTtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrbykgRkNLRG9tVG9vbHMuSW5zZXJ0QWZ0ZXJOb2RlKEgsdGhpcy5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpKTtpZiAoRCYmRkNLQnJvd3NlckluZm8uSXNHZWNrb0xpa2UpIEZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnIoSC5wYXJlbnROb2RlKTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgQi5TZXRTdGFydChILDQpO2Vsc2UgQi5TZXRTdGFydChILm5leHRTaWJsaW5nLDEpO2lmICghRkNLQnJvd3NlckluZm8uSXNJRSl7dmFyIEk9bnVsbDtpZiAoRkNLQnJvd3NlckluZm8uSXNPcGVyYSkgST10aGlzLldpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7ZWxzZSBJPXRoaXMuV2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2JyJyk7SC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShJLEgubmV4dFNpYmxpbmcpO0ZDS0RvbVRvb2xzLlNjcm9sbEludG9WaWV3KEksZmFsc2UpO0kucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChJKTt9fTtCLkNvbGxhcHNlKHRydWUpO0IuU2VsZWN0KEcpO307Qi5SZWxlYXNlKCk7cmV0dXJuIHRydWU7fTtGQ0tFbnRlcktleS5wcm90b3R5cGUuX091dGRlbnRXaXRoU2VsZWN0aW9uPWZ1bmN0aW9uKEEsQil7dmFyIEM9Qi5DcmVhdGVCb29rbWFyaygpO0ZDS0xpc3RIYW5kbGVyLk91dGRlbnRMaXN0SXRlbShBKTtCLk1vdmVUb0Jvb2ttYXJrKEMpO0IuU2VsZWN0KCk7fTtGQ0tFbnRlcktleS5wcm90b3R5cGUuX0NoZWNrSXNBbGxDb250ZW50c0luY2x1ZGVkPWZ1bmN0aW9uKEEsQil7dmFyIEM9ZmFsc2U7dmFyIEQ9ZmFsc2U7aWYgKEEuU3RhcnRDb250YWluZXI9PUJ8fEEuU3RhcnRDb250YWluZXI9PUIuZmlyc3RDaGlsZCkgQz0oQS5fUmFuZ2Uuc3RhcnRPZmZzZXQ9PTApO2lmIChBLkVuZENvbnRhaW5lcj09Qnx8QS5FbmRDb250YWluZXI9PUIubGFzdENoaWxkKXt2YXIgRT1BLkVuZENvbnRhaW5lci5ub2RlVHlwZT09Mz9BLkVuZENvbnRhaW5lci5sZW5ndGg6QS5FbmRDb250YWluZXIuY2hpbGROb2Rlcy5sZW5ndGg7RD0oQS5fUmFuZ2UuZW5kT2Zmc2V0PT1FKTt9O3JldHVybiBDJiZEO307RkNLRW50ZXJLZXkucHJvdG90eXBlLl9GaXhJRVNlbGVjdEFsbEJ1Zz1mdW5jdGlvbihBKXt2YXIgQj10aGlzLldpbmRvdy5kb2N1bWVudDtCLmJvZHkuaW5uZXJIVE1MPScnO3ZhciBDO2lmIChGQ0tDb25maWcuRW50ZXJNb2RlLklFcXVhbHMoWydkaXYnLCdwJ10pKXtDPUIuY3JlYXRlRWxlbWVudChGQ0tDb25maWcuRW50ZXJNb2RlKTtCLmJvZHkuYXBwZW5kQ2hpbGQoQyk7fWVsc2UgQz1CLmJvZHk7QS5Nb3ZlVG9Ob2RlQ29udGVudHMoQyk7QS5Db2xsYXBzZSh0cnVlKTtBLlNlbGVjdCgpO0EuUmVsZWFzZSgpO307CnZhciBGQ0tEb2N1bWVudFByb2Nlc3Nvcj17fTtGQ0tEb2N1bWVudFByb2Nlc3Nvci5fSXRlbXM9W107RkNLRG9jdW1lbnRQcm9jZXNzb3IuQXBwZW5kTmV3PWZ1bmN0aW9uKCl7dmFyIEE9e307dGhpcy5fSXRlbXMucHVzaChBKTtyZXR1cm4gQTt9O0ZDS0RvY3VtZW50UHJvY2Vzc29yLlByb2Nlc3M9ZnVuY3Rpb24oQSl7dmFyIEI9RkNLLklzRGlydHkoKTt2YXIgQyxpPTA7d2hpbGUoKEM9dGhpcy5fSXRlbXNbaSsrXSkpIEMuUHJvY2Vzc0RvY3VtZW50KEEpO2lmICghQikgRkNLLlJlc2V0SXNEaXJ0eSgpO307dmFyIEZDS0RvY3VtZW50UHJvY2Vzc29yX0NyZWF0ZUZha2VJbWFnZT1mdW5jdGlvbihBLEIpe3ZhciBDPUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChCKS5jcmVhdGVFbGVtZW50KCdJTUcnKTtDLmNsYXNzTmFtZT1BO0Muc3JjPUZDS0NvbmZpZy5CYXNlUGF0aCsnaW1hZ2VzL3NwYWNlci5naWYnO0Muc2V0QXR0cmlidXRlKCdfZmNrZmFrZWxlbWVudCcsJ3RydWUnLDApO0Muc2V0QXR0cmlidXRlKCdfZmNrcmVhbGVsZW1lbnQnLEZDS1RlbXBCaW4uQWRkRWxlbWVudChCKSwwKTtyZXR1cm4gQzt9O2lmIChGQ0tCcm93c2VySW5mby5Jc0lFfHxGQ0tCcm93c2VySW5mby5Jc09wZXJhKXt2YXIgRkNLQW5jaG9yc1Byb2Nlc3Nvcj1GQ0tEb2N1bWVudFByb2Nlc3Nvci5BcHBlbmROZXcoKTtGQ0tBbmNob3JzUHJvY2Vzc29yLlByb2Nlc3NEb2N1bWVudD1mdW5jdGlvbihBKXt2YXIgQj1BLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdBJyk7dmFyIEM7dmFyIGk9Qi5sZW5ndGgtMTt3aGlsZSAoaT49MCYmKEM9QltpLS1dKSl7aWYgKEMubmFtZS5sZW5ndGg+MCl7aWYgKEMuaW5uZXJIVE1MIT09Jycpe2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBDLmNsYXNzTmFtZSs9JyBGQ0tfX0FuY2hvckMnO31lbHNle3ZhciBEPUZDS0RvY3VtZW50UHJvY2Vzc29yX0NyZWF0ZUZha2VJbWFnZSgnRkNLX19BbmNob3InLEMuY2xvbmVOb2RlKHRydWUpKTtELnNldEF0dHJpYnV0ZSgnX2Zja2FuY2hvcicsJ3RydWUnLDApO0MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoRCxDKTtDLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQyk7fX19fX07dmFyIEZDS1BhZ2VCcmVha3NQcm9jZXNzb3I9RkNLRG9jdW1lbnRQcm9jZXNzb3IuQXBwZW5kTmV3KCk7RkNLUGFnZUJyZWFrc1Byb2Nlc3Nvci5Qcm9jZXNzRG9jdW1lbnQ9ZnVuY3Rpb24oQSl7dmFyIEI9QS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnRElWJyk7dmFyIEM7dmFyIGk9Qi5sZW5ndGgtMTt3aGlsZSAoaT49MCYmKEM9QltpLS1dKSl7aWYgKEMuc3R5bGUucGFnZUJyZWFrQWZ0ZXI9PSdhbHdheXMnJiZDLmNoaWxkTm9kZXMubGVuZ3RoPT0xJiZDLmNoaWxkTm9kZXNbMF0uc3R5bGUmJkMuY2hpbGROb2Rlc1swXS5zdHlsZS5kaXNwbGF5PT0nbm9uZScpe3ZhciBEPUZDS0RvY3VtZW50UHJvY2Vzc29yX0NyZWF0ZUZha2VJbWFnZSgnRkNLX19QYWdlQnJlYWsnLEMuY2xvbmVOb2RlKHRydWUpKTtDLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKEQsQyk7Qy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEMpO319fTt2YXIgRkNLRW1iZWRBbmRPYmplY3RQcm9jZXNzb3I9KGZ1bmN0aW9uKCl7dmFyIEE9W107dmFyIEI9ZnVuY3Rpb24oZWwpe3ZhciBDPWVsLmNsb25lTm9kZSh0cnVlKTt2YXIgRDt2YXIgRT1EPUZDS0RvY3VtZW50UHJvY2Vzc29yX0NyZWF0ZUZha2VJbWFnZSgnRkNLX19Vbmtub3duT2JqZWN0JyxDKTtGQ0tFbWJlZEFuZE9iamVjdFByb2Nlc3Nvci5SZWZyZXNoVmlldyhFLGVsKTtmb3IgKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspIEQ9QVtpXShlbCxEKXx8RDtpZiAoRCE9RSkgRkNLVGVtcEJpbi5SZW1vdmVFbGVtZW50KEUuZ2V0QXR0cmlidXRlKCdfZmNrcmVhbGVsZW1lbnQnKSk7ZWwucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoRCxlbCk7fTt2YXIgRj1mdW5jdGlvbihlbGVtZW50TmFtZSxkb2Mpe3ZhciBHPWRvYy5nZXRFbGVtZW50c0J5VGFnTmFtZShlbGVtZW50TmFtZSk7Zm9yICh2YXIgaT1HLmxlbmd0aC0xO2k+PTA7aS0tKSBCKEdbaV0pO307dmFyIEg9ZnVuY3Rpb24oZG9jKXtGKCdvYmplY3QnLGRvYyk7RignZW1iZWQnLGRvYyk7fTtyZXR1cm4gRkNLVG9vbHMuTWVyZ2UoRkNLRG9jdW1lbnRQcm9jZXNzb3IuQXBwZW5kTmV3KCkse1Byb2Nlc3NEb2N1bWVudDpmdW5jdGlvbihkb2Mpe2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvKSBGQ0tUb29scy5SdW5GdW5jdGlvbihILHRoaXMsW2RvY10pO2Vsc2UgSChkb2MpO30sUmVmcmVzaFZpZXc6ZnVuY3Rpb24ocGxhY2VIb2xkZXIsb3JpZ2luYWwpe2lmIChvcmlnaW5hbC5nZXRBdHRyaWJ1dGUoJ3dpZHRoJyk+MCkgcGxhY2VIb2xkZXIuc3R5bGUud2lkdGg9RkNLVG9vbHMuQ29udmVydEh0bWxTaXplVG9TdHlsZShvcmlnaW5hbC5nZXRBdHRyaWJ1dGUoJ3dpZHRoJykpO2lmIChvcmlnaW5hbC5nZXRBdHRyaWJ1dGUoJ2hlaWdodCcpPjApIHBsYWNlSG9sZGVyLnN0eWxlLmhlaWdodD1GQ0tUb29scy5Db252ZXJ0SHRtbFNpemVUb1N0eWxlKG9yaWdpbmFsLmdldEF0dHJpYnV0ZSgnaGVpZ2h0JykpO30sQWRkQ3VzdG9tSGFuZGxlcjpmdW5jdGlvbihmdW5jKXtBLnB1c2goZnVuYyk7fX0pO30pKCk7RkNLLkdldFJlYWxFbGVtZW50PWZ1bmN0aW9uKEEpe3ZhciBlPUZDS1RlbXBCaW4uRWxlbWVudHNbQS5nZXRBdHRyaWJ1dGUoJ19mY2tyZWFsZWxlbWVudCcpXTtpZiAoQS5nZXRBdHRyaWJ1dGUoJ19mY2tmbGFzaCcpKXtpZiAoQS5zdHlsZS53aWR0aC5sZW5ndGg+MCkgZS53aWR0aD1GQ0tUb29scy5Db252ZXJ0U3R5bGVTaXplVG9IdG1sKEEuc3R5bGUud2lkdGgpO2lmIChBLnN0eWxlLmhlaWdodC5sZW5ndGg+MCkgZS5oZWlnaHQ9RkNLVG9vbHMuQ29udmVydFN0eWxlU2l6ZVRvSHRtbChBLnN0eWxlLmhlaWdodCk7fTtyZXR1cm4gZTt9O2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXtGQ0tEb2N1bWVudFByb2Nlc3Nvci5BcHBlbmROZXcoKS5Qcm9jZXNzRG9jdW1lbnQ9ZnVuY3Rpb24oQSl7dmFyIEI9QS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnSFInKTt2YXIgQzt2YXIgaT1CLmxlbmd0aC0xO3doaWxlIChpPj0wJiYoQz1CW2ktLV0pKXt2YXIgRD1BLmNyZWF0ZUVsZW1lbnQoJ2hyJyk7RC5tZXJnZUF0dHJpYnV0ZXMoQyx0cnVlKTtGQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoQyxEKTtDLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQyk7fX19O0ZDS0RvY3VtZW50UHJvY2Vzc29yLkFwcGVuZE5ldygpLlByb2Nlc3NEb2N1bWVudD1mdW5jdGlvbihBKXt2YXIgQj1BLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdJTlBVVCcpO3ZhciBDO3ZhciBpPUIubGVuZ3RoLTE7d2hpbGUgKGk+PTAmJihDPUJbaS0tXSkpe2lmIChDLnR5cGU9PSdoaWRkZW4nKXt2YXIgRD1GQ0tEb2N1bWVudFByb2Nlc3Nvcl9DcmVhdGVGYWtlSW1hZ2UoJ0ZDS19fSW5wdXRIaWRkZW4nLEMuY2xvbmVOb2RlKHRydWUpKTtELnNldEF0dHJpYnV0ZSgnX2Zja2lucHV0aGlkZGVuJywndHJ1ZScsMCk7Qy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShELEMpO0MucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChDKTt9fX07RkNLRW1iZWRBbmRPYmplY3RQcm9jZXNzb3IuQWRkQ3VzdG9tSGFuZGxlcihmdW5jdGlvbihBLEIpe2lmICghKEEubm9kZU5hbWUuSUVxdWFscygnZW1iZWQnKSYmKEEudHlwZT09J2FwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoJ3x8L1wuc3dmKCR8I3xcPykvaS50ZXN0KEEuc3JjKSkpKSByZXR1cm47Qi5jbGFzc05hbWU9J0ZDS19fRmxhc2gnO0Iuc2V0QXR0cmlidXRlKCdfZmNrZmxhc2gnLCd0cnVlJywwKTt9KTtpZiAoRkNLQnJvd3NlckluZm8uSXNTYWZhcmkpe0ZDS0RvY3VtZW50UHJvY2Vzc29yLkFwcGVuZE5ldygpLlByb2Nlc3NEb2N1bWVudD1mdW5jdGlvbihBKXt2YXIgQj1BLmdldEVsZW1lbnRzQnlDbGFzc05hbWU/QS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdBcHBsZS1zdHlsZS1zcGFuJyk6QXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKEEuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NwYW4nKSxmdW5jdGlvbihpdGVtKXsgcmV0dXJuIGl0ZW0uY2xhc3NOYW1lPT0nQXBwbGUtc3R5bGUtc3Bhbic7fSk7Zm9yICh2YXIgaT1CLmxlbmd0aC0xO2k+PTA7aS0tKSBGQ0tEb21Ub29scy5SZW1vdmVOb2RlKEJbaV0sdHJ1ZSk7fX07CnZhciBGQ0tTZWxlY3Rpb249RkNLLlNlbGVjdGlvbj17R2V0UGFyZW50QmxvY2s6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLkdldFBhcmVudEVsZW1lbnQoKTt3aGlsZSAoQSl7aWYgKEZDS0xpc3RzTGliLkJsb2NrQm91bmRhcmllc1tBLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSBicmVhaztBPUEucGFyZW50Tm9kZTt9O3JldHVybiBBO30sQXBwbHlTdHlsZTpmdW5jdGlvbihBKXtGQ0tTdHlsZXMuQXBwbHlTdHlsZShuZXcgRkNLU3R5bGUoQSkpO319OwpGQ0tTZWxlY3Rpb24uR2V0VHlwZT1mdW5jdGlvbigpe3RyeXt2YXIgQT1GQ0tTZWxlY3Rpb24uR2V0U2VsZWN0aW9uKCkudHlwZTtpZiAoQT09J0NvbnRyb2wnfHxBPT0nVGV4dCcpIHJldHVybiBBO2lmICh0aGlzLkdldFNlbGVjdGlvbigpLmNyZWF0ZVJhbmdlKCkucGFyZW50RWxlbWVudCkgcmV0dXJuICdUZXh0Jzt9Y2F0Y2goZSl7fTtyZXR1cm4gJ05vbmUnO307RkNLU2VsZWN0aW9uLkdldFNlbGVjdGVkRWxlbWVudD1mdW5jdGlvbigpe2lmICh0aGlzLkdldFR5cGUoKT09J0NvbnRyb2wnKXt2YXIgQT10aGlzLkdldFNlbGVjdGlvbigpLmNyZWF0ZVJhbmdlKCk7aWYgKEEmJkEuaXRlbSkgcmV0dXJuIHRoaXMuR2V0U2VsZWN0aW9uKCkuY3JlYXRlUmFuZ2UoKS5pdGVtKDApO307cmV0dXJuIG51bGw7fTtGQ0tTZWxlY3Rpb24uR2V0UGFyZW50RWxlbWVudD1mdW5jdGlvbigpe3N3aXRjaCAodGhpcy5HZXRUeXBlKCkpe2Nhc2UgJ0NvbnRyb2wnOnZhciBBPUZDS1NlbGVjdGlvbi5HZXRTZWxlY3RlZEVsZW1lbnQoKTtyZXR1cm4gQT9BLnBhcmVudEVsZW1lbnQ6bnVsbDtjYXNlICdOb25lJzpyZXR1cm4gbnVsbDtkZWZhdWx0OnJldHVybiB0aGlzLkdldFNlbGVjdGlvbigpLmNyZWF0ZVJhbmdlKCkucGFyZW50RWxlbWVudCgpO319O0ZDS1NlbGVjdGlvbi5HZXRCb3VuZGFyeVBhcmVudEVsZW1lbnQ9ZnVuY3Rpb24oQSl7c3dpdGNoICh0aGlzLkdldFR5cGUoKSl7Y2FzZSAnQ29udHJvbCc6dmFyIEI9RkNLU2VsZWN0aW9uLkdldFNlbGVjdGVkRWxlbWVudCgpO3JldHVybiBCP0IucGFyZW50RWxlbWVudDpudWxsO2Nhc2UgJ05vbmUnOnJldHVybiBudWxsO2RlZmF1bHQ6dmFyIEM9RkNLLkVkaXRvckRvY3VtZW50O3ZhciBEPUMuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7RC5jb2xsYXBzZShBIT09ZmFsc2UpO3ZhciBCPUQucGFyZW50RWxlbWVudCgpO3JldHVybiBGQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQik9PUM/QjpudWxsO319O0ZDS1NlbGVjdGlvbi5TZWxlY3ROb2RlPWZ1bmN0aW9uKEEpe0ZDSy5Gb2N1cygpO3RoaXMuR2V0U2VsZWN0aW9uKCkuZW1wdHkoKTt2YXIgQjt0cnl7Qj1GQ0suRWRpdG9yRG9jdW1lbnQuYm9keS5jcmVhdGVDb250cm9sUmFuZ2UoKTtCLmFkZEVsZW1lbnQoQSk7Qi5zZWxlY3QoKTt9Y2F0Y2goZSl7Qj1GQ0suRWRpdG9yRG9jdW1lbnQuYm9keS5jcmVhdGVUZXh0UmFuZ2UoKTtCLm1vdmVUb0VsZW1lbnRUZXh0KEEpO0Iuc2VsZWN0KCk7fX07RkNLU2VsZWN0aW9uLkNvbGxhcHNlPWZ1bmN0aW9uKEEpe0ZDSy5Gb2N1cygpO2lmICh0aGlzLkdldFR5cGUoKT09J1RleHQnKXt2YXIgQj10aGlzLkdldFNlbGVjdGlvbigpLmNyZWF0ZVJhbmdlKCk7Qi5jb2xsYXBzZShBPT1udWxsfHxBPT09dHJ1ZSk7Qi5zZWxlY3QoKTt9fTtGQ0tTZWxlY3Rpb24uSGFzQW5jZXN0b3JOb2RlPWZ1bmN0aW9uKEEpe3ZhciBCO2lmICh0aGlzLkdldFNlbGVjdGlvbigpLnR5cGU9PSJDb250cm9sIil7Qj10aGlzLkdldFNlbGVjdGVkRWxlbWVudCgpO31lbHNle3ZhciBDPXRoaXMuR2V0U2VsZWN0aW9uKCkuY3JlYXRlUmFuZ2UoKTtCPUMucGFyZW50RWxlbWVudCgpO313aGlsZSAoQil7aWYgKEIubm9kZU5hbWUuSUVxdWFscyhBKSkgcmV0dXJuIHRydWU7Qj1CLnBhcmVudE5vZGU7fTtyZXR1cm4gZmFsc2U7fTtGQ0tTZWxlY3Rpb24uTW92ZVRvQW5jZXN0b3JOb2RlPWZ1bmN0aW9uKEEpe3ZhciBCLG9SYW5nZTtpZiAoIUZDSy5FZGl0b3JEb2N1bWVudCkgcmV0dXJuIG51bGw7aWYgKHRoaXMuR2V0U2VsZWN0aW9uKCkudHlwZT09IkNvbnRyb2wiKXtvUmFuZ2U9dGhpcy5HZXRTZWxlY3Rpb24oKS5jcmVhdGVSYW5nZSgpO2ZvciAoaT0wO2k8b1JhbmdlLmxlbmd0aDtpKyspe2lmIChvUmFuZ2UoaSkucGFyZW50Tm9kZSl7Qj1vUmFuZ2UoaSkucGFyZW50Tm9kZTticmVhazt9fX1lbHNle29SYW5nZT10aGlzLkdldFNlbGVjdGlvbigpLmNyZWF0ZVJhbmdlKCk7Qj1vUmFuZ2UucGFyZW50RWxlbWVudCgpO313aGlsZSAoQiYmIUIubm9kZU5hbWUuRXF1YWxzKEEpKSBCPUIucGFyZW50Tm9kZTtyZXR1cm4gQjt9O0ZDS1NlbGVjdGlvbi5EZWxldGU9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLkdldFNlbGVjdGlvbigpO2lmIChBLnR5cGUudG9Mb3dlckNhc2UoKSE9Im5vbmUiKXtBLmNsZWFyKCk7fTtyZXR1cm4gQTt9O0ZDS1NlbGVjdGlvbi5HZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLlJlc3RvcmUoKTtyZXR1cm4gRkNLLkVkaXRvckRvY3VtZW50LnNlbGVjdGlvbjt9O0ZDS1NlbGVjdGlvbi5TYXZlPWZ1bmN0aW9uKEEpe3ZhciBCPUZDSy5FZGl0b3JEb2N1bWVudDtpZiAoIUIpIHJldHVybjtpZiAodGhpcy5sb2NrZWQpIHJldHVybjt0aGlzLmxvY2tlZD0hIUE7dmFyIEM9Qi5zZWxlY3Rpb247dmFyIEQ7aWYgKEMpe3RyeSB7RD1DLmNyZWF0ZVJhbmdlKCk7fWNhdGNoKGUpIHt9O2lmIChEKXtpZiAoRC5wYXJlbnRFbGVtZW50JiZGQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoRC5wYXJlbnRFbGVtZW50KCkpIT1CKSBEPW51bGw7ZWxzZSBpZiAoRC5pdGVtJiZGQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoRC5pdGVtKDApKSE9QikgRD1udWxsO319O3RoaXMuU2VsZWN0aW9uRGF0YT1EO307RkNLU2VsZWN0aW9uLl9HZXRTZWxlY3Rpb25Eb2N1bWVudD1mdW5jdGlvbihBKXt2YXIgQj1BLmNyZWF0ZVJhbmdlKCk7aWYgKCFCKSByZXR1cm4gbnVsbDtlbHNlIGlmIChCLml0ZW0pIHJldHVybiBGQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQi5pdGVtKDApKTtlbHNlIHJldHVybiBGQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQi5wYXJlbnRFbGVtZW50KCkpO307RkNLU2VsZWN0aW9uLlJlc3RvcmU9ZnVuY3Rpb24oKXtpZiAodGhpcy5TZWxlY3Rpb25EYXRhKXtGQ0suSXNTZWxlY3Rpb25DaGFuZ2VMb2NrZWQ9dHJ1ZTt0cnl7aWYgKFN0cmluZyh0aGlzLl9HZXRTZWxlY3Rpb25Eb2N1bWVudChGQ0suRWRpdG9yRG9jdW1lbnQuc2VsZWN0aW9uKS5ib2R5LmNvbnRlbnRFZGl0YWJsZSk9PSd0cnVlJyl7RkNLLklzU2VsZWN0aW9uQ2hhbmdlTG9ja2VkPWZhbHNlO3JldHVybjt9O3RoaXMuU2VsZWN0aW9uRGF0YS5zZWxlY3QoKTt9Y2F0Y2ggKGUpIHt9O0ZDSy5Jc1NlbGVjdGlvbkNoYW5nZUxvY2tlZD1mYWxzZTt9fTtGQ0tTZWxlY3Rpb24uUmVsZWFzZT1mdW5jdGlvbigpe3RoaXMubG9ja2VkPWZhbHNlO2RlbGV0ZSB0aGlzLlNlbGVjdGlvbkRhdGE7fTsKdmFyIEZDS1RhYmxlSGFuZGxlcj17fTtGQ0tUYWJsZUhhbmRsZXIuSW5zZXJ0Um93PWZ1bmN0aW9uKEEpe3ZhciBCPUZDS1NlbGVjdGlvbi5Nb3ZlVG9BbmNlc3Rvck5vZGUoJ1RSJyk7aWYgKCFCKSByZXR1cm47dmFyIEM9Qi5jbG9uZU5vZGUodHJ1ZSk7Qi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShDLEIpO0ZDS1RhYmxlSGFuZGxlci5DbGVhclJvdyhBP0M6Qik7fTtGQ0tUYWJsZUhhbmRsZXIuRGVsZXRlUm93cz1mdW5jdGlvbihBKXtpZiAoIUEpe3ZhciBCPUZDS1RhYmxlSGFuZGxlci5HZXRTZWxlY3RlZENlbGxzKCk7dmFyIEM9W107Zm9yICh2YXIgaT0wO2k8Qi5sZW5ndGg7aSsrKXt2YXIgRD1CW2ldLnBhcmVudE5vZGU7Q1tELnJvd0luZGV4XT1EO307Zm9yICh2YXIgaT1DLmxlbmd0aDtpPj0wO2ktLSl7aWYgKENbaV0pIEZDS1RhYmxlSGFuZGxlci5EZWxldGVSb3dzKENbaV0pO307cmV0dXJuO307dmFyIEU9RkNLVG9vbHMuR2V0RWxlbWVudEFzY2Vuc29yKEEsJ1RBQkxFJyk7aWYgKEUucm93cy5sZW5ndGg9PTEpe0ZDS1RhYmxlSGFuZGxlci5EZWxldGVUYWJsZShFKTtyZXR1cm47fTtBLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQSk7fTtGQ0tUYWJsZUhhbmRsZXIuRGVsZXRlVGFibGU9ZnVuY3Rpb24oQSl7aWYgKCFBKXtBPUZDS1NlbGVjdGlvbi5HZXRTZWxlY3RlZEVsZW1lbnQoKTtpZiAoIUF8fEEudGFnTmFtZSE9J1RBQkxFJykgQT1GQ0tTZWxlY3Rpb24uTW92ZVRvQW5jZXN0b3JOb2RlKCdUQUJMRScpO307aWYgKCFBKSByZXR1cm47RkNLU2VsZWN0aW9uLlNlbGVjdE5vZGUoQSk7RkNLU2VsZWN0aW9uLkNvbGxhcHNlKCk7aWYgKEEucGFyZW50Tm9kZS5jaGlsZE5vZGVzLmxlbmd0aD09MSkgQS5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQS5wYXJlbnROb2RlKTtlbHNlIEEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChBKTt9O0ZDS1RhYmxlSGFuZGxlci5JbnNlcnRDb2x1bW49ZnVuY3Rpb24oQSl7dmFyIEI9bnVsbDt2YXIgQz10aGlzLkdldFNlbGVjdGVkQ2VsbHMoKTtpZiAoQyYmQy5sZW5ndGgpIEI9Q1tBPzA6KEMubGVuZ3RoLTEpXTtpZiAoIUIpIHJldHVybjt2YXIgRD1GQ0tUb29scy5HZXRFbGVtZW50QXNjZW5zb3IoQiwnVEFCTEUnKTt2YXIgRT1CLmNlbGxJbmRleDtmb3IgKHZhciBpPTA7aTxELnJvd3MubGVuZ3RoO2krKyl7dmFyIEY9RC5yb3dzW2ldO2lmIChGLmNlbGxzLmxlbmd0aDwoRSsxKSkgY29udGludWU7Qj1GLmNlbGxzW0VdLmNsb25lTm9kZShmYWxzZSk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlKSBGQ0tUb29scy5BcHBlbmRCb2d1c0JyKEIpO3ZhciBHPUYuY2VsbHNbRV07Ri5pbnNlcnRCZWZvcmUoQiwoQT9HOkcubmV4dFNpYmxpbmcpKTt9fTtGQ0tUYWJsZUhhbmRsZXIuRGVsZXRlQ29sdW1ucz1mdW5jdGlvbihBKXtpZiAoIUEpe3ZhciBCPUZDS1RhYmxlSGFuZGxlci5HZXRTZWxlY3RlZENlbGxzKCk7Zm9yICh2YXIgaT1CLmxlbmd0aDtpPj0wO2ktLSl7aWYgKEJbaV0pIEZDS1RhYmxlSGFuZGxlci5EZWxldGVDb2x1bW5zKEJbaV0pO307cmV0dXJuO307aWYgKCFBKSByZXR1cm47dmFyIEM9RkNLVG9vbHMuR2V0RWxlbWVudEFzY2Vuc29yKEEsJ1RBQkxFJyk7dmFyIEQ9QS5jZWxsSW5kZXg7Zm9yICh2YXIgaT1DLnJvd3MubGVuZ3RoLTE7aT49MDtpLS0pe3ZhciBFPUMucm93c1tpXTtpZiAoRD09MCYmRS5jZWxscy5sZW5ndGg9PTEpe0ZDS1RhYmxlSGFuZGxlci5EZWxldGVSb3dzKEUpO2NvbnRpbnVlO307aWYgKEUuY2VsbHNbRF0pIEUucmVtb3ZlQ2hpbGQoRS5jZWxsc1tEXSk7fX07RkNLVGFibGVIYW5kbGVyLkluc2VydENlbGw9ZnVuY3Rpb24oQSxCKXt2YXIgQz1udWxsO3ZhciBEPXRoaXMuR2V0U2VsZWN0ZWRDZWxscygpO2lmIChEJiZELmxlbmd0aCkgQz1EW0I/MDooRC5sZW5ndGgtMSldO2lmICghQykgcmV0dXJuIG51bGw7dmFyIEU9RkNLLkVkaXRvckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1REJyk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlKSBGQ0tUb29scy5BcHBlbmRCb2d1c0JyKEUpO2lmICghQiYmQy5jZWxsSW5kZXg9PUMucGFyZW50Tm9kZS5jZWxscy5sZW5ndGgtMSkgQy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKEUpO2Vsc2UgQy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShFLEI/QzpDLm5leHRTaWJsaW5nKTtyZXR1cm4gRTt9O0ZDS1RhYmxlSGFuZGxlci5EZWxldGVDZWxsPWZ1bmN0aW9uKEEpe2lmIChBLnBhcmVudE5vZGUuY2VsbHMubGVuZ3RoPT0xKXtGQ0tUYWJsZUhhbmRsZXIuRGVsZXRlUm93cyhBLnBhcmVudE5vZGUpO3JldHVybjt9O0EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChBKTt9O0ZDS1RhYmxlSGFuZGxlci5EZWxldGVDZWxscz1mdW5jdGlvbigpe3ZhciBBPUZDS1RhYmxlSGFuZGxlci5HZXRTZWxlY3RlZENlbGxzKCk7Zm9yICh2YXIgaT1BLmxlbmd0aC0xO2k+PTA7aS0tKXtGQ0tUYWJsZUhhbmRsZXIuRGVsZXRlQ2VsbChBW2ldKTt9fTtGQ0tUYWJsZUhhbmRsZXIuX01hcmtDZWxscz1mdW5jdGlvbihBLEIpe2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKykgQVtpXVtCXT10cnVlO307RkNLVGFibGVIYW5kbGVyLl9Vbm1hcmtDZWxscz1mdW5jdGlvbihBLEIpe2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7RkNLRG9tVG9vbHMuQ2xlYXJFbGVtZW50SlNQcm9wZXJ0eShBW2ldLEIpO319O0ZDS1RhYmxlSGFuZGxlci5fUmVwbGFjZUNlbGxzQnlNYXJrZXI9ZnVuY3Rpb24oQSxCLEMpe2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7Zm9yICh2YXIgaj0wO2o8QVtpXS5sZW5ndGg7aisrKXtpZiAoQVtpXVtqXVtCXSkgQVtpXVtqXT1DO319fTtGQ0tUYWJsZUhhbmRsZXIuX0dldE1hcmtlckdlb21ldHJ5PWZ1bmN0aW9uKEEsQixDLEQpe3ZhciBFPTA7dmFyIEY9MDt2YXIgRz0wO3ZhciBIPTA7Zm9yICh2YXIgaT1DO0FbQl1baV0mJkFbQl1baV1bRF07aSsrKSBFKys7Zm9yICh2YXIgaT1DLTE7QVtCXVtpXSYmQVtCXVtpXVtEXTtpLS0pe0UrKztHKys7fTtmb3IgKHZhciBpPUI7QVtpXSYmQVtpXVtDXSYmQVtpXVtDXVtEXTtpKyspIEYrKztmb3IgKHZhciBpPUItMTtBW2ldJiZBW2ldW0NdJiZBW2ldW0NdW0RdO2ktLSl7RisrO0grKzt9O3JldHVybiB7ICd3aWR0aCc6RSwnaGVpZ2h0JzpGLCd4JzpHLCd5JzpIIH07fTtGQ0tUYWJsZUhhbmRsZXIuQ2hlY2tJc1NlbGVjdGlvblJlY3Rhbmd1bGFyPWZ1bmN0aW9uKCl7dmFyIEE9RkNLVGFibGVIYW5kbGVyLkdldFNlbGVjdGVkQ2VsbHMoKTtpZiAoQS5sZW5ndGg8MSkgcmV0dXJuIGZhbHNlO2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7aWYgKEFbaV0ucGFyZW50Tm9kZS5wYXJlbnROb2RlIT1BWzBdLnBhcmVudE5vZGUucGFyZW50Tm9kZSkgcmV0dXJuIGZhbHNlO307dGhpcy5fTWFya0NlbGxzKEEsJ19DZWxsU2VsZWN0ZWQnKTt2YXIgQj10aGlzLl9DcmVhdGVUYWJsZU1hcChBWzBdKTt2YXIgQz1BWzBdLnBhcmVudE5vZGUucm93SW5kZXg7dmFyIEQ9dGhpcy5fR2V0Q2VsbEluZGV4U3BhbihCLEMsQVswXSk7dmFyIEU9dGhpcy5fR2V0TWFya2VyR2VvbWV0cnkoQixDLEQsJ19DZWxsU2VsZWN0ZWQnKTt2YXIgRj1ELUUueDt2YXIgRz1DLUUueTtpZiAoRS53aWR0aD49RS5oZWlnaHQpe2ZvciAoRD1GO0Q8RitFLndpZHRoO0QrKyl7Qz1HKyhELUYpICUgRS5oZWlnaHQ7aWYgKCFCW0NdfHwhQltDXVtEXSl7dGhpcy5fVW5tYXJrQ2VsbHMoQSwnX0NlbGxTZWxlY3RlZCcpO3JldHVybiBmYWxzZTt9O3ZhciBnPXRoaXMuX0dldE1hcmtlckdlb21ldHJ5KEIsQyxELCdfQ2VsbFNlbGVjdGVkJyk7aWYgKGcud2lkdGghPUUud2lkdGh8fGcuaGVpZ2h0IT1FLmhlaWdodCl7dGhpcy5fVW5tYXJrQ2VsbHMoQSwnX0NlbGxTZWxlY3RlZCcpO3JldHVybiBmYWxzZTt9fX1lbHNle2ZvciAoQz1HO0M8RytFLmhlaWdodDtDKyspe0Q9RisoQy1HKSAlIEUud2lkdGg7aWYgKCFCW0NdfHwhQltDXVtEXSl7dGhpcy5fVW5tYXJrQ2VsbHMoQSwnX0NlbGxTZWxlY3RlZCcpO3JldHVybiBmYWxzZTt9O3ZhciBnPXRoaXMuX0dldE1hcmtlckdlb21ldHJ5KEIsQyxELCdfQ2VsbFNlbGVjdGVkJyk7aWYgKGcud2lkdGghPUUud2lkdGh8fGcuaGVpZ2h0IT1FLmhlaWdodCl7dGhpcy5fVW5tYXJrQ2VsbHMoQSwnX0NlbGxTZWxlY3RlZCcpO3JldHVybiBmYWxzZTt9fX07dGhpcy5fVW5tYXJrQ2VsbHMoQSwnX0NlbGxTZWxlY3RlZCcpO3JldHVybiB0cnVlO307RkNLVGFibGVIYW5kbGVyLk1lcmdlQ2VsbHM9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLkdldFNlbGVjdGVkQ2VsbHMoKTtpZiAoQS5sZW5ndGg8MikgcmV0dXJuO3ZhciBCPUFbMF07dmFyIEM9dGhpcy5fQ3JlYXRlVGFibGVNYXAoQik7dmFyIEQ9Qi5wYXJlbnROb2RlLnJvd0luZGV4O3ZhciBFPXRoaXMuX0dldENlbGxJbmRleFNwYW4oQyxELEIpO3RoaXMuX01hcmtDZWxscyhBLCdfU2VsZWN0ZWRDZWxscycpO3ZhciBGPXRoaXMuX0dldE1hcmtlckdlb21ldHJ5KEMsRCxFLCdfU2VsZWN0ZWRDZWxscycpO3ZhciBHPUUtRi54O3ZhciBIPUQtRi55O3ZhciBJPUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChCKS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7Zm9yICh2YXIgaT0wO2k8Ri5oZWlnaHQ7aSsrKXt2YXIgSj0wO2ZvciAodmFyIGo9MDtqPEYud2lkdGg7aisrKXt2YXIgSz1DW0graV1bRytqXTt3aGlsZSAoSy5jaGlsZE5vZGVzLmxlbmd0aD4wKXt2YXIgTD1LLnJlbW92ZUNoaWxkKEsuZmlyc3RDaGlsZCk7aWYgKEwubm9kZVR5cGUhPTF8fChMLmdldEF0dHJpYnV0ZSgndHlwZScsMikhPSdfbW96JyYmTC5nZXRBdHRyaWJ1dGUoJ19tb3pfZGlydHknKSE9bnVsbCkpe0kuYXBwZW5kQ2hpbGQoTCk7SisrO319fTtpZiAoSj4wKSBJLmFwcGVuZENoaWxkKEZDSy5FZGl0b3JEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpKTt9O3RoaXMuX1JlcGxhY2VDZWxsc0J5TWFya2VyKEMsJ19TZWxlY3RlZENlbGxzJyxCKTt0aGlzLl9Vbm1hcmtDZWxscyhBLCdfU2VsZWN0ZWRDZWxscycpO3RoaXMuX0luc3RhbGxUYWJsZU1hcChDLEIucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUpO0IuYXBwZW5kQ2hpbGQoSSk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlJiYoIUIuZmlyc3RDaGlsZCkpIEZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnIoQik7dGhpcy5fTW92ZUNhcmV0VG9DZWxsKEIsZmFsc2UpO307RkNLVGFibGVIYW5kbGVyLk1lcmdlUmlnaHQ9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLkdldE1lcmdlUmlnaHRUYXJnZXQoKTtpZiAoQT09bnVsbCkgcmV0dXJuO3ZhciBCPUEucmVmQ2VsbDt2YXIgQz1BLnRhYmxlTWFwO3ZhciBEPUEubmV4dENlbGw7dmFyIEU9RkNLLkVkaXRvckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt3aGlsZSAoRCYmRC5jaGlsZE5vZGVzJiZELmNoaWxkTm9kZXMubGVuZ3RoPjApIEUuYXBwZW5kQ2hpbGQoRC5yZW1vdmVDaGlsZChELmZpcnN0Q2hpbGQpKTtELnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoRCk7Qi5hcHBlbmRDaGlsZChFKTt0aGlzLl9NYXJrQ2VsbHMoW0RdLCdfUmVwbGFjZScpO3RoaXMuX1JlcGxhY2VDZWxsc0J5TWFya2VyKEMsJ19SZXBsYWNlJyxCKTt0aGlzLl9JbnN0YWxsVGFibGVNYXAoQyxCLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKTt0aGlzLl9Nb3ZlQ2FyZXRUb0NlbGwoQixmYWxzZSk7fTtGQ0tUYWJsZUhhbmRsZXIuTWVyZ2VEb3duPWZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5HZXRNZXJnZURvd25UYXJnZXQoKTtpZiAoQT09bnVsbCkgcmV0dXJuO3ZhciBCPUEucmVmQ2VsbDt2YXIgQz1BLnRhYmxlTWFwO3ZhciBEPUEubmV4dENlbGw7dmFyIEU9RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEIpLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt3aGlsZSAoRCYmRC5jaGlsZE5vZGVzJiZELmNoaWxkTm9kZXMubGVuZ3RoPjApIEUuYXBwZW5kQ2hpbGQoRC5yZW1vdmVDaGlsZChELmZpcnN0Q2hpbGQpKTtpZiAoRS5maXJzdENoaWxkKSBFLmluc2VydEJlZm9yZShGQ0suRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKSxFLmZpcnN0Q2hpbGQpO0IuYXBwZW5kQ2hpbGQoRSk7dGhpcy5fTWFya0NlbGxzKFtEXSwnX1JlcGxhY2UnKTt0aGlzLl9SZXBsYWNlQ2VsbHNCeU1hcmtlcihDLCdfUmVwbGFjZScsQik7dGhpcy5fSW5zdGFsbFRhYmxlTWFwKEMsQi5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7dGhpcy5fTW92ZUNhcmV0VG9DZWxsKEIsZmFsc2UpO307RkNLVGFibGVIYW5kbGVyLkhvcml6b250YWxTcGxpdENlbGw9ZnVuY3Rpb24oKXt2YXIgQT1GQ0tUYWJsZUhhbmRsZXIuR2V0U2VsZWN0ZWRDZWxscygpO2lmIChBLmxlbmd0aCE9MSkgcmV0dXJuO3ZhciBCPUFbMF07dmFyIEM9dGhpcy5fQ3JlYXRlVGFibGVNYXAoQik7dmFyIEQ9Qi5wYXJlbnROb2RlLnJvd0luZGV4O3ZhciBFPUZDS1RhYmxlSGFuZGxlci5fR2V0Q2VsbEluZGV4U3BhbihDLEQsQik7dmFyIEY9aXNOYU4oQi5jb2xTcGFuKT8xOkIuY29sU3BhbjtpZiAoRj4xKXt2YXIgRz1NYXRoLmNlaWwoRi8yKTt2YXIgSD1GQ0suRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudChCLm5vZGVOYW1lKTtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrb0xpa2UpIEZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnIoSCk7dmFyIEk9RStHO3ZhciBKPUUrRjt2YXIgSz1pc05hTihCLnJvd1NwYW4pPzE6Qi5yb3dTcGFuO2ZvciAodmFyIHI9RDtyPEQrSztyKyspe2ZvciAodmFyIGk9STtpPEo7aSsrKSBDW3JdW2ldPUg7fX1lbHNle3ZhciBMPVtdO2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIE09Q1tpXS5zbGljZSgwLEUpO2lmIChDW2ldLmxlbmd0aDw9RSl7TC5wdXNoKE0pO2NvbnRpbnVlO307aWYgKENbaV1bRV09PUIpe00ucHVzaChCKTtNLnB1c2goRkNLLkVkaXRvckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoQi5ub2RlTmFtZSkpO2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvTGlrZSkgRkNLVG9vbHMuQXBwZW5kQm9ndXNCcihNW00ubGVuZ3RoLTFdKTt9ZWxzZXtNLnB1c2goQ1tpXVtFXSk7TS5wdXNoKENbaV1bRV0pO307Zm9yICh2YXIgaj1FKzE7ajxDW2ldLmxlbmd0aDtqKyspIE0ucHVzaChDW2ldW2pdKTtMLnB1c2goTSk7fTtDPUw7fTt0aGlzLl9JbnN0YWxsVGFibGVNYXAoQyxCLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlKTt9O0ZDS1RhYmxlSGFuZGxlci5WZXJ0aWNhbFNwbGl0Q2VsbD1mdW5jdGlvbigpe3ZhciBBPUZDS1RhYmxlSGFuZGxlci5HZXRTZWxlY3RlZENlbGxzKCk7aWYgKEEubGVuZ3RoIT0xKSByZXR1cm47dmFyIEI9QVswXTt2YXIgQz10aGlzLl9DcmVhdGVUYWJsZU1hcChCKTt2YXIgRD1CLnBhcmVudE5vZGUucm93SW5kZXg7dmFyIEU9RkNLVGFibGVIYW5kbGVyLl9HZXRDZWxsSW5kZXhTcGFuKEMsRCxCKTt2YXIgRj1pc05hTihCLmNvbFNwYW4pPzE6Qi5jb2xTcGFuO3ZhciBHPUIucm93U3BhbjtpZiAoaXNOYU4oRykpIEc9MTtpZiAoRz4xKXtCLnJvd1NwYW49TWF0aC5jZWlsKEcvMik7dmFyIEg9RCtNYXRoLmNlaWwoRy8yKTt2YXIgST1DW0hdO3ZhciBKPW51bGw7Zm9yICh2YXIgaT1FKzE7aTxJLmxlbmd0aDtpKyspe2lmIChJW2ldLnBhcmVudE5vZGUucm93SW5kZXg9PUgpe0o9SVtpXTticmVhazt9fTt2YXIgSz1GQ0suRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudChCLm5vZGVOYW1lKTtLLnJvd1NwYW49TWF0aC5mbG9vcihHLzIpO2lmIChGPjEpIEsuY29sU3Bhbj1GO2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvTGlrZSkgRkNLVG9vbHMuQXBwZW5kQm9ndXNCcihLKTtCLnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJvd3NbSF0uaW5zZXJ0QmVmb3JlKEssSik7fWVsc2V7dmFyIEw9Qi5wYXJlbnROb2RlLnNlY3Rpb25Sb3dJbmRleCsxO3ZhciBNPUZDSy5FZGl0b3JEb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO3ZhciBOPUIucGFyZW50Tm9kZS5wYXJlbnROb2RlO2lmIChOLnJvd3MubGVuZ3RoPkwpIE4uaW5zZXJ0QmVmb3JlKE0sTi5yb3dzW0xdKTtlbHNlIE4uYXBwZW5kQ2hpbGQoTSk7Zm9yICh2YXIgaT0wO2k8Q1tEXS5sZW5ndGg7KXt2YXIgTz1DW0RdW2ldLmNvbFNwYW47aWYgKGlzTmFOKE8pfHxPPDEpIE89MTtpZiAoaT09RSl7aSs9Tztjb250aW51ZTt9O3ZhciBQPUNbRF1baV0ucm93U3BhbjtpZiAoaXNOYU4oUCkpIFA9MTtDW0RdW2ldLnJvd1NwYW49UCsxO2krPU87fTt2YXIgSz1GQ0suRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudChCLm5vZGVOYW1lKTtpZiAoRj4xKSBLLmNvbFNwYW49RjtpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrb0xpa2UpIEZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnIoSyk7TS5hcHBlbmRDaGlsZChLKTt9fTtGQ0tUYWJsZUhhbmRsZXIuX0dldENlbGxJbmRleFNwYW49ZnVuY3Rpb24oQSxCLEMpe2lmIChBLmxlbmd0aDxCKzEpIHJldHVybiBudWxsO3ZhciBEPUFbQl07Zm9yICh2YXIgYz0wO2M8RC5sZW5ndGg7YysrKXtpZiAoRFtjXT09QykgcmV0dXJuIGM7fTtyZXR1cm4gbnVsbDt9O0ZDS1RhYmxlSGFuZGxlci5fR2V0Q2VsbExvY2F0aW9uPWZ1bmN0aW9uKEEsQil7Zm9yICh2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXtmb3IgKHZhciBjPTA7YzxBW2ldLmxlbmd0aDtjKyspe2lmIChBW2ldW2NdPT1CKSByZXR1cm4gW2ksY107fX07cmV0dXJuIG51bGw7fTtGQ0tUYWJsZUhhbmRsZXIuX0NyZWF0ZVRhYmxlTWFwPWZ1bmN0aW9uKEEpe3ZhciBCPShBLm5vZGVOYW1lPT0nVEFCTEUnP0E6QS5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZSk7dmFyIEM9Qi5yb3dzO3ZhciByPS0xO3ZhciBEPVtdO2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7cisrO2lmICghRFtyXSkgRFtyXT1bXTt2YXIgYz0tMTtmb3IgKHZhciBqPTA7ajxDW2ldLmNlbGxzLmxlbmd0aDtqKyspe3ZhciBFPUNbaV0uY2VsbHNbal07YysrO3doaWxlIChEW3JdW2NdKSBjKys7dmFyIEY9aXNOYU4oRS5jb2xTcGFuKT8xOkUuY29sU3Bhbjt2YXIgRz1pc05hTihFLnJvd1NwYW4pPzE6RS5yb3dTcGFuO2ZvciAodmFyIEg9MDtIPEc7SCsrKXtpZiAoIURbcitIXSkgRFtyK0hdPVtdO2ZvciAodmFyIEk9MDtJPEY7SSsrKXtEW3IrSF1bYytJXT1DW2ldLmNlbGxzW2pdO319O2MrPUYtMTt9fTtyZXR1cm4gRDt9O0ZDS1RhYmxlSGFuZGxlci5fSW5zdGFsbFRhYmxlTWFwPWZ1bmN0aW9uKEEsQil7dmFyIEM9RkNLQnJvd3NlckluZm8uSXNJRT8iX2Zja3Jvd3NwYW4iOiJyb3dTcGFuIjtmb3IgKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspe2ZvciAodmFyIGo9MDtqPEFbaV0ubGVuZ3RoO2orKyl7dmFyIEQ9QVtpXVtqXTtpZiAoRC5wYXJlbnROb2RlKSBELnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoRCk7RC5jb2xTcGFuPURbQ109MTt9fTt2YXIgRT0wO2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7Zm9yICh2YXIgaj0wO2o8QVtpXS5sZW5ndGg7aisrKXt2YXIgRD1BW2ldW2pdO2lmICghRCkgY29udGludWU7aWYgKGo+RSkgRT1qO2lmIChELl9jb2xTY2FubmVkPT09dHJ1ZSkgY29udGludWU7aWYgKEFbaV1bai0xXT09RCkgRC5jb2xTcGFuKys7aWYgKEFbaV1baisxXSE9RCkgRC5fY29sU2Nhbm5lZD10cnVlO319O2ZvciAodmFyIGk9MDtpPD1FO2krKyl7Zm9yICh2YXIgaj0wO2o8QS5sZW5ndGg7aisrKXtpZiAoIUFbal0pIGNvbnRpbnVlO3ZhciBEPUFbal1baV07aWYgKCFEfHxELl9yb3dTY2FubmVkPT09dHJ1ZSkgY29udGludWU7aWYgKEFbai0xXSYmQVtqLTFdW2ldPT1EKSBEW0NdKys7aWYgKCFBW2orMV18fEFbaisxXVtpXSE9RCkgRC5fcm93U2Nhbm5lZD10cnVlO319O2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7Zm9yICh2YXIgaj0wO2o8QVtpXS5sZW5ndGg7aisrKXt2YXIgRD1BW2ldW2pdO0ZDS0RvbVRvb2xzLkNsZWFyRWxlbWVudEpTUHJvcGVydHkoRCwnX2NvbFNjYW5uZWQnKTtGQ0tEb21Ub29scy5DbGVhckVsZW1lbnRKU1Byb3BlcnR5KEQsJ19yb3dTY2FubmVkJyk7fX07Zm9yICh2YXIgaT0wO2k8QS5sZW5ndGg7aSsrKXt2YXIgST1GQ0suRWRpdG9yRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtmb3IgKHZhciBqPTA7ajxBW2ldLmxlbmd0aDspe3ZhciBEPUFbaV1bal07aWYgKEFbaS0xXSYmQVtpLTFdW2pdPT1EKXtqKz1ELmNvbFNwYW47Y29udGludWU7fTtJLmFwcGVuZENoaWxkKEQpO2lmIChDIT0ncm93U3Bhbicpe0Qucm93U3Bhbj1EW0NdO0QucmVtb3ZlQXR0cmlidXRlKEMpO307ais9RC5jb2xTcGFuO2lmIChELmNvbFNwYW49PTEpIEQucmVtb3ZlQXR0cmlidXRlKCdjb2xzcGFuJyk7aWYgKEQucm93U3Bhbj09MSkgRC5yZW1vdmVBdHRyaWJ1dGUoJ3Jvd3NwYW4nKTt9O2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXtCLnJvd3NbaV0ucmVwbGFjZU5vZGUoSSk7fWVsc2V7Qi5yb3dzW2ldLmlubmVySFRNTD0nJztGQ0tEb21Ub29scy5Nb3ZlQ2hpbGRyZW4oSSxCLnJvd3NbaV0pO319fTtGQ0tUYWJsZUhhbmRsZXIuX01vdmVDYXJldFRvQ2VsbD1mdW5jdGlvbiAoQSxCKXt2YXIgQz1uZXcgRkNLRG9tUmFuZ2UoRkNLLkVkaXRvcldpbmRvdyk7Qy5Nb3ZlVG9Ob2RlQ29udGVudHMoQSk7Qy5Db2xsYXBzZShCKTtDLlNlbGVjdCgpO307RkNLVGFibGVIYW5kbGVyLkNsZWFyUm93PWZ1bmN0aW9uKEEpe3ZhciBCPUEuY2VsbHM7Zm9yICh2YXIgaT0wO2k8Qi5sZW5ndGg7aSsrKXtCW2ldLmlubmVySFRNTD0nJztpZiAoRkNLQnJvd3NlckluZm8uSXNHZWNrb0xpa2UpIEZDS1Rvb2xzLkFwcGVuZEJvZ3VzQnIoQltpXSk7fX07RkNLVGFibGVIYW5kbGVyLkdldE1lcmdlUmlnaHRUYXJnZXQ9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLkdldFNlbGVjdGVkQ2VsbHMoKTtpZiAoQS5sZW5ndGghPTEpIHJldHVybiBudWxsO3ZhciBCPUFbMF07dmFyIEM9dGhpcy5fQ3JlYXRlVGFibGVNYXAoQik7dmFyIEQ9Qi5wYXJlbnROb2RlLnJvd0luZGV4O3ZhciBFPXRoaXMuX0dldENlbGxJbmRleFNwYW4oQyxELEIpO3ZhciBGPUUrKGlzTmFOKEIuY29sU3Bhbik/MTpCLmNvbFNwYW4pO3ZhciBHPUNbRF1bRl07aWYgKCFHKSByZXR1cm4gbnVsbDt0aGlzLl9NYXJrQ2VsbHMoW0IsR10sJ19TaXplVGVzdCcpO3ZhciBIPXRoaXMuX0dldE1hcmtlckdlb21ldHJ5KEMsRCxFLCdfU2l6ZVRlc3QnKTt2YXIgST10aGlzLl9HZXRNYXJrZXJHZW9tZXRyeShDLEQsRiwnX1NpemVUZXN0Jyk7dGhpcy5fVW5tYXJrQ2VsbHMoW0IsR10sJ19TaXplVGVzdCcpO2lmIChILmhlaWdodCE9SS5oZWlnaHR8fEgueSE9SS55KSByZXR1cm4gbnVsbDtyZXR1cm4geyAncmVmQ2VsbCc6QiwnbmV4dENlbGwnOkcsJ3RhYmxlTWFwJzpDIH07fTtGQ0tUYWJsZUhhbmRsZXIuR2V0TWVyZ2VEb3duVGFyZ2V0PWZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5HZXRTZWxlY3RlZENlbGxzKCk7aWYgKEEubGVuZ3RoIT0xKSByZXR1cm4gbnVsbDt2YXIgQj1BWzBdO3ZhciBDPXRoaXMuX0NyZWF0ZVRhYmxlTWFwKEIpO3ZhciBEPUIucGFyZW50Tm9kZS5yb3dJbmRleDt2YXIgRT10aGlzLl9HZXRDZWxsSW5kZXhTcGFuKEMsRCxCKTt2YXIgRj1EKyhpc05hTihCLnJvd1NwYW4pPzE6Qi5yb3dTcGFuKTtpZiAoIUNbRl0pIHJldHVybiBudWxsO3ZhciBHPUNbRl1bRV07aWYgKCFHKSByZXR1cm4gbnVsbDtpZiAoQi5wYXJlbnROb2RlLnBhcmVudE5vZGUhPUcucGFyZW50Tm9kZS5wYXJlbnROb2RlKSByZXR1cm4gbnVsbDt0aGlzLl9NYXJrQ2VsbHMoW0IsR10sJ19TaXplVGVzdCcpO3ZhciBIPXRoaXMuX0dldE1hcmtlckdlb21ldHJ5KEMsRCxFLCdfU2l6ZVRlc3QnKTt2YXIgST10aGlzLl9HZXRNYXJrZXJHZW9tZXRyeShDLEYsRSwnX1NpemVUZXN0Jyk7dGhpcy5fVW5tYXJrQ2VsbHMoW0IsR10sJ19TaXplVGVzdCcpO2lmIChILndpZHRoIT1JLndpZHRofHxILnghPUkueCkgcmV0dXJuIG51bGw7cmV0dXJuIHsgJ3JlZkNlbGwnOkIsJ25leHRDZWxsJzpHLCd0YWJsZU1hcCc6QyB9O307CkZDS1RhYmxlSGFuZGxlci5HZXRTZWxlY3RlZENlbGxzPWZ1bmN0aW9uKCl7aWYgKEZDS1NlbGVjdGlvbi5HZXRUeXBlKCk9PSdDb250cm9sJyl7dmFyIEE9RkNLU2VsZWN0aW9uLk1vdmVUb0FuY2VzdG9yTm9kZShbJ1REJywnVEgnXSk7cmV0dXJuIEE/W0FdOltdO307dmFyIEI9W107dmFyIEM9RkNLU2VsZWN0aW9uLkdldFNlbGVjdGlvbigpLmNyZWF0ZVJhbmdlKCk7dmFyIEQ9RkNLU2VsZWN0aW9uLkdldFBhcmVudEVsZW1lbnQoKTtpZiAoRCYmRC50YWdOYW1lLkVxdWFscygnVEQnLCdUSCcpKSBCWzBdPUQ7ZWxzZXtEPUZDS1NlbGVjdGlvbi5Nb3ZlVG9BbmNlc3Rvck5vZGUoJ1RBQkxFJyk7aWYgKEQpe2ZvciAodmFyIGk9MDtpPEQuY2VsbHMubGVuZ3RoO2krKyl7dmFyIEU9RkNLLkVkaXRvckRvY3VtZW50LmJvZHkuY3JlYXRlVGV4dFJhbmdlKCk7RS5tb3ZlVG9FbGVtZW50VGV4dChELmNlbGxzW2ldKTtpZiAoQy5pblJhbmdlKEUpfHwoQy5jb21wYXJlRW5kUG9pbnRzKCdTdGFydFRvU3RhcnQnLEUpPj0wJiZDLmNvbXBhcmVFbmRQb2ludHMoJ1N0YXJ0VG9FbmQnLEUpPD0wKXx8KEMuY29tcGFyZUVuZFBvaW50cygnRW5kVG9TdGFydCcsRSk+PTAmJkMuY29tcGFyZUVuZFBvaW50cygnRW5kVG9FbmQnLEUpPD0wKSl7QltCLmxlbmd0aF09RC5jZWxsc1tpXTt9fX19O3JldHVybiBCO307CnZhciBGQ0tYbWw9ZnVuY3Rpb24oKXt0aGlzLkVycm9yPWZhbHNlO307RkNLWG1sLkdldEF0dHJpYnV0ZT1mdW5jdGlvbihBLEIsQyl7dmFyIEQ9QS5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShCKTtyZXR1cm4gRD9ELnZhbHVlOkM7fTtGQ0tYbWwuVHJhbnNmb3JtVG9PYmplY3Q9ZnVuY3Rpb24oQSl7aWYgKCFBKSByZXR1cm4gbnVsbDt2YXIgQj17fTt2YXIgQz1BLmF0dHJpYnV0ZXM7Zm9yICh2YXIgaT0wO2k8Qy5sZW5ndGg7aSsrKXt2YXIgRD1DW2ldO0JbRC5uYW1lXT1ELnZhbHVlO307dmFyIEU9QS5jaGlsZE5vZGVzO2ZvciAoaT0wO2k8RS5sZW5ndGg7aSsrKXt2YXIgRj1FW2ldO2lmIChGLm5vZGVUeXBlPT0xKXt2YXIgRz0nJCcrRi5ub2RlTmFtZTt2YXIgSD1CW0ddO2lmICghSCkgSD1CW0ddPVtdO0gucHVzaCh0aGlzLlRyYW5zZm9ybVRvT2JqZWN0KEYpKTt9fTtyZXR1cm4gQjt9OwpGQ0tYbWwucHJvdG90eXBlPXtMb2FkVXJsOmZ1bmN0aW9uKEEpe3RoaXMuRXJyb3I9ZmFsc2U7dmFyIEI9RkNLVG9vbHMuQ3JlYXRlWG1sT2JqZWN0KCdYbWxIdHRwJyk7aWYgKCFCKXt0aGlzLkVycm9yPXRydWU7cmV0dXJuO307Qi5vcGVuKCJHRVQiLEEsZmFsc2UpO0Iuc2VuZChudWxsKTtpZiAoQi5zdGF0dXM9PTIwMHx8Qi5zdGF0dXM9PTMwNHx8KEIuc3RhdHVzPT0wJiZCLnJlYWR5U3RhdGU9PTQpKXt0aGlzLkRPTURvY3VtZW50PUIucmVzcG9uc2VYTUw7aWYgKCF0aGlzLkRPTURvY3VtZW50fHx0aGlzLkRPTURvY3VtZW50LmZpcnN0Q2hpbGQ9PW51bGwpe3RoaXMuRE9NRG9jdW1lbnQ9RkNLVG9vbHMuQ3JlYXRlWG1sT2JqZWN0KCdET01Eb2N1bWVudCcpO3RoaXMuRE9NRG9jdW1lbnQuYXN5bmM9ZmFsc2U7dGhpcy5ET01Eb2N1bWVudC5yZXNvbHZlRXh0ZXJuYWxzPWZhbHNlO3RoaXMuRE9NRG9jdW1lbnQubG9hZFhNTChCLnJlc3BvbnNlVGV4dCk7fX1lbHNle3RoaXMuRE9NRG9jdW1lbnQ9bnVsbDt9O2lmICh0aGlzLkRPTURvY3VtZW50PT1udWxsfHx0aGlzLkRPTURvY3VtZW50LmZpcnN0Q2hpbGQ9PW51bGwpe3RoaXMuRXJyb3I9dHJ1ZTtpZiAod2luZG93LmNvbmZpcm0oJ0Vycm9yIGxvYWRpbmcgIicrQSsnIlxyXG5EbyB5b3Ugd2FudCB0byBzZWUgbW9yZSBpbmZvPycpKSBhbGVydCgnVVJMIHJlcXVlc3RlZDogIicrQSsnIlxyXG5TZXJ2ZXIgcmVzcG9uc2U6XHJcblN0YXR1czogJytCLnN0YXR1cysnXHJcblJlc3BvbnNlIHRleHQ6XHJcbicrQi5yZXNwb25zZVRleHQpO319LFNlbGVjdE5vZGVzOmZ1bmN0aW9uKEEsQil7aWYgKHRoaXMuRXJyb3IpIHJldHVybiBbXTtpZiAoQikgcmV0dXJuIEIuc2VsZWN0Tm9kZXMoQSk7ZWxzZSByZXR1cm4gdGhpcy5ET01Eb2N1bWVudC5zZWxlY3ROb2RlcyhBKTt9LFNlbGVjdFNpbmdsZU5vZGU6ZnVuY3Rpb24oQSxCKXtpZiAodGhpcy5FcnJvcikgcmV0dXJuIG51bGw7aWYgKEIpIHJldHVybiBCLnNlbGVjdFNpbmdsZU5vZGUoQSk7ZWxzZSByZXR1cm4gdGhpcy5ET01Eb2N1bWVudC5zZWxlY3RTaW5nbGVOb2RlKEEpO319Owp2YXIgRkNLTmFtZWRDb21tYW5kPWZ1bmN0aW9uKEEpe3RoaXMuTmFtZT1BO307RkNLTmFtZWRDb21tYW5kLnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKCl7RkNLLkV4ZWN1dGVOYW1lZENvbW1hbmQodGhpcy5OYW1lKTt9O0ZDS05hbWVkQ29tbWFuZC5wcm90b3R5cGUuR2V0U3RhdGU9ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wKSByZXR1cm4gLTE7cmV0dXJuIEZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZSh0aGlzLk5hbWUpO307CnZhciBGQ0tTdHlsZUNvbW1hbmQ9ZnVuY3Rpb24oKXt9O0ZDS1N0eWxlQ29tbWFuZC5wcm90b3R5cGU9e05hbWU6J1N0eWxlJyxFeGVjdXRlOmZ1bmN0aW9uKEEsQil7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTtpZiAoQi5TZWxlY3RlZCkgRkNLLlN0eWxlcy5SZW1vdmVTdHlsZShCLlN0eWxlKTtlbHNlIEZDSy5TdHlsZXMuQXBwbHlTdHlsZShCLlN0eWxlKTtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO0ZDSy5Gb2N1cygpO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCdPblNlbGVjdGlvbkNoYW5nZScpO30sR2V0U3RhdGU6ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wfHwhRkNLLkVkaXRvckRvY3VtZW50KSByZXR1cm4gLTE7aWYgKEZDS1NlbGVjdGlvbi5HZXRUeXBlKCk9PSdDb250cm9sJyl7dmFyIEE9RkNLU2VsZWN0aW9uLkdldFNlbGVjdGVkRWxlbWVudCgpO2lmICghQXx8IUZDS1N0eWxlcy5DaGVja0hhc09iamVjdFN0eWxlKEEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSkpIHJldHVybiAtMTt9O3JldHVybiAwO319Owp2YXIgRkNLRGlhbG9nQ29tbWFuZD1mdW5jdGlvbihBLEIsQyxELEUsRixHLEgpe3RoaXMuTmFtZT1BO3RoaXMuVGl0bGU9Qjt0aGlzLlVybD1DO3RoaXMuV2lkdGg9RDt0aGlzLkhlaWdodD1FO3RoaXMuQ3VzdG9tVmFsdWU9SDt0aGlzLkdldFN0YXRlRnVuY3Rpb249Rjt0aGlzLkdldFN0YXRlUGFyYW09Rzt0aGlzLlJlc2l6YWJsZT1mYWxzZTt9O0ZDS0RpYWxvZ0NvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXtGQ0tEaWFsb2cuT3BlbkRpYWxvZygnRkNLRGlhbG9nXycrdGhpcy5OYW1lLHRoaXMuVGl0bGUsdGhpcy5VcmwsdGhpcy5XaWR0aCx0aGlzLkhlaWdodCx0aGlzLkN1c3RvbVZhbHVlLHRoaXMuUmVzaXphYmxlKTt9O0ZDS0RpYWxvZ0NvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlPWZ1bmN0aW9uKCl7aWYgKHRoaXMuR2V0U3RhdGVGdW5jdGlvbikgcmV0dXJuIHRoaXMuR2V0U3RhdGVGdW5jdGlvbih0aGlzLkdldFN0YXRlUGFyYW0pO2Vsc2UgcmV0dXJuIEZDSy5FZGl0TW9kZT09MD8wOi0xO307dmFyIEZDS1VuZGVmaW5lZENvbW1hbmQ9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J1VuZGVmaW5lZCc7fTtGQ0tVbmRlZmluZWRDb21tYW5kLnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKCl7YWxlcnQoRkNLTGFuZy5Ob3RJbXBsZW1lbnRlZCk7fTtGQ0tVbmRlZmluZWRDb21tYW5kLnByb3RvdHlwZS5HZXRTdGF0ZT1mdW5jdGlvbigpe3JldHVybiAwO307dmFyIEZDS0Zvcm1hdEJsb2NrQ29tbWFuZD1mdW5jdGlvbigpe307RkNLRm9ybWF0QmxvY2tDb21tYW5kLnByb3RvdHlwZT17TmFtZTonRm9ybWF0QmxvY2snLEV4ZWN1dGU6RkNLU3R5bGVDb21tYW5kLnByb3RvdHlwZS5FeGVjdXRlLEdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIEZDSy5FZGl0b3JEb2N1bWVudD8wOi0xO319O3ZhciBGQ0tGb250TmFtZUNvbW1hbmQ9ZnVuY3Rpb24oKXt9O0ZDS0ZvbnROYW1lQ29tbWFuZC5wcm90b3R5cGU9e05hbWU6J0ZvbnROYW1lJyxFeGVjdXRlOkZDS1N0eWxlQ29tbWFuZC5wcm90b3R5cGUuRXhlY3V0ZSxHZXRTdGF0ZTpGQ0tGb3JtYXRCbG9ja0NvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlfTt2YXIgRkNLRm9udFNpemVDb21tYW5kPWZ1bmN0aW9uKCl7fTtGQ0tGb250U2l6ZUNvbW1hbmQucHJvdG90eXBlPXtOYW1lOidGb250U2l6ZScsRXhlY3V0ZTpGQ0tTdHlsZUNvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGUsR2V0U3RhdGU6RkNLRm9ybWF0QmxvY2tDb21tYW5kLnByb3RvdHlwZS5HZXRTdGF0ZX07dmFyIEZDS1ByZXZpZXdDb21tYW5kPWZ1bmN0aW9uKCl7dGhpcy5OYW1lPSdQcmV2aWV3Jzt9O0ZDS1ByZXZpZXdDb21tYW5kLnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKCl7RkNLLlByZXZpZXcoKTt9O0ZDS1ByZXZpZXdDb21tYW5kLnByb3RvdHlwZS5HZXRTdGF0ZT1mdW5jdGlvbigpe3JldHVybiAwO307dmFyIEZDS1NhdmVDb21tYW5kPWZ1bmN0aW9uKCl7dGhpcy5OYW1lPSdTYXZlJzt9O0ZDS1NhdmVDb21tYW5kLnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKCl7dmFyIEE9RkNLLkdldFBhcmVudEZvcm0oKTtpZiAodHlwZW9mKEEub25zdWJtaXQpPT0nZnVuY3Rpb24nKXt2YXIgQj1BLm9uc3VibWl0KCk7aWYgKEIhPW51bGwmJkI9PT1mYWxzZSkgcmV0dXJuO307aWYgKHR5cGVvZihBLnN1Ym1pdCk9PSdmdW5jdGlvbicpIEEuc3VibWl0KCk7ZWxzZSBBLnN1Ym1pdC5jbGljaygpO307RkNLU2F2ZUNvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIDA7fTt2YXIgRkNLTmV3UGFnZUNvbW1hbmQ9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J05ld1BhZ2UnO307RkNLTmV3UGFnZUNvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO0ZDSy5TZXREYXRhKCcnKTtGQ0tVbmRvLlR5cGluZz10cnVlO0ZDSy5Gb2N1cygpO307RkNLTmV3UGFnZUNvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIDA7fTt2YXIgRkNLU291cmNlQ29tbWFuZD1mdW5jdGlvbigpe3RoaXMuTmFtZT0nU291cmNlJzt9O0ZDS1NvdXJjZUNvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXtpZiAoRkNLQ29uZmlnLlNvdXJjZVBvcHVwKXt2YXIgQT1GQ0tDb25maWcuU2NyZWVuV2lkdGgqMC42NTt2YXIgQj1GQ0tDb25maWcuU2NyZWVuSGVpZ2h0KjAuNjU7RkNLRGlhbG9nLk9wZW5EaWFsb2coJ0ZDS0RpYWxvZ19Tb3VyY2UnLEZDS0xhbmcuU291cmNlLCdkaWFsb2cvZmNrX3NvdXJjZS5odG1sJyxBLEIsbnVsbCx0cnVlKTt9ZWxzZSBGQ0suU3dpdGNoRWRpdE1vZGUoKTt9O0ZDS1NvdXJjZUNvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIChGQ0suRWRpdE1vZGU9PTA/MDoxKTt9O3ZhciBGQ0tVbmRvQ29tbWFuZD1mdW5jdGlvbigpe3RoaXMuTmFtZT0nVW5kbyc7fTtGQ0tVbmRvQ29tbWFuZC5wcm90b3R5cGUuRXhlY3V0ZT1mdW5jdGlvbigpe0ZDS1VuZG8uVW5kbygpO307RkNLVW5kb0NvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlPWZ1bmN0aW9uKCl7aWYgKEZDSy5FZGl0TW9kZSE9MCkgcmV0dXJuIC0xO3JldHVybiAoRkNLVW5kby5DaGVja1VuZG9TdGF0ZSgpPzA6LTEpO307dmFyIEZDS1JlZG9Db21tYW5kPWZ1bmN0aW9uKCl7dGhpcy5OYW1lPSdSZWRvJzt9O0ZDS1JlZG9Db21tYW5kLnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKCl7RkNLVW5kby5SZWRvKCk7fTtGQ0tSZWRvQ29tbWFuZC5wcm90b3R5cGUuR2V0U3RhdGU9ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wKSByZXR1cm4gLTE7cmV0dXJuIChGQ0tVbmRvLkNoZWNrUmVkb1N0YXRlKCk/MDotMSk7fTt2YXIgRkNLUGFnZUJyZWFrQ29tbWFuZD1mdW5jdGlvbigpe3RoaXMuTmFtZT0nUGFnZUJyZWFrJzt9O0ZDS1BhZ2VCcmVha0NvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO3ZhciBlPUZDSy5FZGl0b3JEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtlLnN0eWxlLnBhZ2VCcmVha0FmdGVyPSdhbHdheXMnO2UuaW5uZXJIVE1MPSc8c3BhbiBzdHlsZT0iRElTUExBWTpub25lIj4mbmJzcDs8L3NwYW4+Jzt2YXIgQT1GQ0tEb2N1bWVudFByb2Nlc3Nvcl9DcmVhdGVGYWtlSW1hZ2UoJ0ZDS19fUGFnZUJyZWFrJyxlKTt2YXIgQj1uZXcgRkNLRG9tUmFuZ2UoRkNLLkVkaXRvcldpbmRvdyk7Qi5Nb3ZlVG9TZWxlY3Rpb24oKTt2YXIgQz1CLlNwbGl0QmxvY2soKTtCLkluc2VydE5vZGUoQSk7RkNLLkV2ZW50cy5GaXJlRXZlbnQoJ09uU2VsZWN0aW9uQ2hhbmdlJyk7fTtGQ0tQYWdlQnJlYWtDb21tYW5kLnByb3RvdHlwZS5HZXRTdGF0ZT1mdW5jdGlvbigpe2lmIChGQ0suRWRpdE1vZGUhPTApIHJldHVybiAtMTtyZXR1cm4gMDt9O3ZhciBGQ0tVbmxpbmtDb21tYW5kPWZ1bmN0aW9uKCl7dGhpcy5OYW1lPSdVbmxpbmsnO307RkNLVW5saW5rQ29tbWFuZC5wcm90b3R5cGUuRXhlY3V0ZT1mdW5jdGlvbigpe0ZDS1VuZG8uU2F2ZVVuZG9TdGVwKCk7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja29MaWtlKXt2YXIgQT1GQ0suU2VsZWN0aW9uLk1vdmVUb0FuY2VzdG9yTm9kZSgnQScpO2lmIChBKSBGQ0tUb29scy5SZW1vdmVPdXRlclRhZ3MoQSk7cmV0dXJuO307RkNLLkV4ZWN1dGVOYW1lZENvbW1hbmQodGhpcy5OYW1lKTt9O0ZDS1VubGlua0NvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlPWZ1bmN0aW9uKCl7aWYgKEZDSy5FZGl0TW9kZSE9MCkgcmV0dXJuIC0xO3ZhciBBPUZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZSh0aGlzLk5hbWUpO2lmIChBPT0wJiZGQ0suRWRpdE1vZGU9PTApe3ZhciBCPUZDS1NlbGVjdGlvbi5Nb3ZlVG9BbmNlc3Rvck5vZGUoJ0EnKTt2YXIgQz0oQiYmQi5uYW1lLmxlbmd0aD4wJiZCLmhyZWYubGVuZ3RoPT0wKTtpZiAoQykgQT0tMTt9O3JldHVybiBBO307dmFyIEZDS1Zpc2l0TGlua0NvbW1hbmQ9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J1Zpc2l0TGluayc7fTtGQ0tWaXNpdExpbmtDb21tYW5kLnByb3RvdHlwZT17R2V0U3RhdGU6ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wKSByZXR1cm4gLTE7dmFyIEE9RkNLLkdldE5hbWVkQ29tbWFuZFN0YXRlKCdVbmxpbmsnKTtpZiAoQT09MCl7dmFyIEI9RkNLU2VsZWN0aW9uLk1vdmVUb0FuY2VzdG9yTm9kZSgnQScpO2lmICghQi5ocmVmKSBBPS0xO307cmV0dXJuIEE7fSxFeGVjdXRlOmZ1bmN0aW9uKCl7dmFyIEE9RkNLU2VsZWN0aW9uLk1vdmVUb0FuY2VzdG9yTm9kZSgnQScpO3ZhciBCPUEuZ2V0QXR0cmlidXRlKCdfZmNrc2F2ZWR1cmwnKXx8QS5nZXRBdHRyaWJ1dGUoJ2hyZWYnLDIpO2lmICghLzpcL1wvLy50ZXN0KEIpKXt2YXIgQz1GQ0tDb25maWcuQmFzZUhyZWY7dmFyIEQ9RkNLLkdldEluc3RhbmNlT2JqZWN0KCdwYXJlbnQnKTtpZiAoIUMpe0M9RC5kb2N1bWVudC5sb2NhdGlvbi5ocmVmO0M9Qy5zdWJzdHJpbmcoMCxDLmxhc3RJbmRleE9mKCcvJykrMSk7fTtpZiAoL15cLy8udGVzdChCKSl7dHJ5e0M9Qy5tYXRjaCgvXi4qOlwvXC8rW15cL10rLylbMF07fWNhdGNoIChlKXtDPUQuZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wrJzovLycrRC5wYXJlbnQuZG9jdW1lbnQubG9jYXRpb24uaG9zdDt9fTtCPUMrQjt9O2lmICghd2luZG93Lm9wZW4oQiwnX2JsYW5rJykpIGFsZXJ0KEZDS0xhbmcuVmlzaXRMaW5rQmxvY2tlZCk7fX07dmFyIEZDS1NlbGVjdEFsbENvbW1hbmQ9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J1NlbGVjdEFsbCc7fTtGQ0tTZWxlY3RBbGxDb21tYW5kLnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKCl7aWYgKEZDSy5FZGl0TW9kZT09MCl7RkNLLkV4ZWN1dGVOYW1lZENvbW1hbmQoJ1NlbGVjdEFsbCcpO31lbHNle3ZhciBBPUZDSy5FZGl0aW5nQXJlYS5UZXh0YXJlYTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSl7QS5jcmVhdGVUZXh0UmFuZ2UoKS5leGVjQ29tbWFuZCgnU2VsZWN0QWxsJyk7fWVsc2V7QS5zZWxlY3Rpb25TdGFydD0wO0Euc2VsZWN0aW9uRW5kPUEudmFsdWUubGVuZ3RoO307QS5mb2N1cygpO319O0ZDS1NlbGVjdEFsbENvbW1hbmQucHJvdG90eXBlLkdldFN0YXRlPWZ1bmN0aW9uKCl7aWYgKEZDSy5FZGl0TW9kZSE9MCkgcmV0dXJuIC0xO3JldHVybiAwO307dmFyIEZDS1Bhc3RlQ29tbWFuZD1mdW5jdGlvbigpe3RoaXMuTmFtZT0nUGFzdGUnO307RkNLUGFzdGVDb21tYW5kLnByb3RvdHlwZT17RXhlY3V0ZTpmdW5jdGlvbigpe2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBGQ0suUGFzdGUoKTtlbHNlIEZDSy5FeGVjdXRlTmFtZWRDb21tYW5kKCdQYXN0ZScpO30sR2V0U3RhdGU6ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wKSByZXR1cm4gLTE7cmV0dXJuIEZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZSgnUGFzdGUnKTt9fTt2YXIgRkNLUnVsZUNvbW1hbmQ9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J1J1bGUnO307RkNLUnVsZUNvbW1hbmQucHJvdG90eXBlPXtFeGVjdXRlOmZ1bmN0aW9uKCl7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTtGQ0suSW5zZXJ0RWxlbWVudCgnaHInKTt9LEdldFN0YXRlOmZ1bmN0aW9uKCl7aWYgKEZDSy5FZGl0TW9kZSE9MCkgcmV0dXJuIC0xO3JldHVybiBGQ0suR2V0TmFtZWRDb21tYW5kU3RhdGUoJ0luc2VydEhvcml6b250YWxSdWxlJyk7fX07dmFyIEZDS0N1dENvcHlDb21tYW5kPWZ1bmN0aW9uKEEpe3RoaXMuTmFtZT1BPydDdXQnOidDb3B5Jzt9O0ZDS0N1dENvcHlDb21tYW5kLnByb3RvdHlwZT17RXhlY3V0ZTpmdW5jdGlvbigpe3ZhciBBPWZhbHNlO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt2YXIgQj1mdW5jdGlvbigpe0E9dHJ1ZTt9O3ZhciBDPSdvbicrdGhpcy5OYW1lLnRvTG93ZXJDYXNlKCk7RkNLLkVkaXRvckRvY3VtZW50LmJvZHkuYXR0YWNoRXZlbnQoQyxCKTtGQ0suRXhlY3V0ZU5hbWVkQ29tbWFuZCh0aGlzLk5hbWUpO0ZDSy5FZGl0b3JEb2N1bWVudC5ib2R5LmRldGFjaEV2ZW50KEMsQik7fWVsc2V7dHJ5e0ZDSy5FeGVjdXRlTmFtZWRDb21tYW5kKHRoaXMuTmFtZSk7QT10cnVlO31jYXRjaChlKXt9fTtpZiAoIUEpIGFsZXJ0KEZDS0xhbmdbJ1Bhc3RlRXJyb3InK3RoaXMuTmFtZV0pO30sR2V0U3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gRkNLLkVkaXRNb2RlIT0wPy0xOkZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZSgnQ3V0Jyk7fX07dmFyIEZDS0FuY2hvckRlbGV0ZUNvbW1hbmQ9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J0FuY2hvckRlbGV0ZSc7fTtGQ0tBbmNob3JEZWxldGVDb21tYW5kLnByb3RvdHlwZT17RXhlY3V0ZTpmdW5jdGlvbigpe2lmIChGQ0suU2VsZWN0aW9uLkdldFR5cGUoKT09J0NvbnRyb2wnKXtGQ0suU2VsZWN0aW9uLkRlbGV0ZSgpO31lbHNle3ZhciBBPUZDSy5TZWxlY3Rpb24uR2V0U2VsZWN0ZWRFbGVtZW50KCk7aWYgKEEpe2lmIChBLnRhZ05hbWU9PSdJTUcnJiZBLmdldEF0dHJpYnV0ZSgnX2Zja2FuY2hvcicpKSBvQW5jaG9yPUZDSy5HZXRSZWFsRWxlbWVudChBKTtlbHNlIEE9bnVsbDt9O2lmICghQSl7b0FuY2hvcj1GQ0suU2VsZWN0aW9uLk1vdmVUb0FuY2VzdG9yTm9kZSgnQScpO2lmIChvQW5jaG9yKSBGQ0suU2VsZWN0aW9uLlNlbGVjdE5vZGUob0FuY2hvcik7fTtpZiAob0FuY2hvci5ocmVmLmxlbmd0aCE9MCl7b0FuY2hvci5yZW1vdmVBdHRyaWJ1dGUoJ25hbWUnKTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSkgb0FuY2hvci5jbGFzc05hbWU9b0FuY2hvci5jbGFzc05hbWUucmVwbGFjZShGQ0tSZWdleExpYi5GQ0tfQ2xhc3MsJycpO3JldHVybjt9O2lmIChBKXtBLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQSk7cmV0dXJuO307aWYgKG9BbmNob3IuaW5uZXJIVE1MLmxlbmd0aD09MCl7b0FuY2hvci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG9BbmNob3IpO3JldHVybjt9O0ZDS1Rvb2xzLlJlbW92ZU91dGVyVGFncyhvQW5jaG9yKTt9O2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvKSBGQ0suU2VsZWN0aW9uLkNvbGxhcHNlKHRydWUpO30sR2V0U3RhdGU6ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wKSByZXR1cm4gLTE7cmV0dXJuIEZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZSgnVW5saW5rJyk7fX07dmFyIEZDS0RlbGV0ZURpdkNvbW1hbmQ9ZnVuY3Rpb24oKXt9O0ZDS0RlbGV0ZURpdkNvbW1hbmQucHJvdG90eXBlPXtHZXRTdGF0ZTpmdW5jdGlvbigpe2lmIChGQ0suRWRpdE1vZGUhPTApIHJldHVybiAtMTt2YXIgQT1GQ0tTZWxlY3Rpb24uR2V0UGFyZW50RWxlbWVudCgpO3ZhciBCPW5ldyBGQ0tFbGVtZW50UGF0aChBKTtyZXR1cm4gQi5CbG9ja0xpbWl0JiZCLkJsb2NrTGltaXQubm9kZU5hbWUuSUVxdWFscygnZGl2Jyk/MDotMTt9LEV4ZWN1dGU6ZnVuY3Rpb24oKXtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO3ZhciBBPUZDS0RvbVRvb2xzLkdldFNlbGVjdGVkRGl2Q29udGFpbmVycygpO3ZhciBCPW5ldyBGQ0tEb21SYW5nZShGQ0suRWRpdG9yV2luZG93KTtCLk1vdmVUb1NlbGVjdGlvbigpO3ZhciBDPUIuQ3JlYXRlQm9va21hcmsoKTtmb3IgKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspIEZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoQVtpXSx0cnVlKTtCLk1vdmVUb0Jvb2ttYXJrKEMpO0IuU2VsZWN0KCk7fX07dmFyIEZDS05ic3A9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J05vbiBCcmVha2luZyBTcGFjZSc7fTtGQ0tOYnNwLnByb3RvdHlwZT17RXhlY3V0ZTpmdW5jdGlvbigpe0ZDSy5JbnNlcnRIdG1sKCcmbmJzcDsnKTt9LEdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIChGQ0suRWRpdE1vZGUhPTA/LTE6MCk7fX07CnZhciBGQ0tTaG93QmxvY2tDb21tYW5kPWZ1bmN0aW9uKEEsQil7dGhpcy5OYW1lPUE7aWYgKEIhPXVuZGVmaW5lZCkgdGhpcy5fU2F2ZWRTdGF0ZT1CO2Vsc2UgdGhpcy5fU2F2ZWRTdGF0ZT1udWxsO307RkNLU2hvd0Jsb2NrQ29tbWFuZC5wcm90b3R5cGUuRXhlY3V0ZT1mdW5jdGlvbigpe3ZhciBBPXRoaXMuR2V0U3RhdGUoKTtpZiAoQT09LTEpIHJldHVybjt2YXIgQj1GQ0suRWRpdG9yRG9jdW1lbnQuYm9keTtpZiAoQT09MSkgQi5jbGFzc05hbWU9Qi5jbGFzc05hbWUucmVwbGFjZSgvKF58IClGQ0tfX1Nob3dCbG9ja3MvZywnJyk7ZWxzZSBCLmNsYXNzTmFtZSs9JyBGQ0tfX1Nob3dCbG9ja3MnO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt0cnl7RkNLLkVkaXRvckRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLnNlbGVjdCgpO31jYXRjaCAoZSl7fX1lbHNle3ZhciBDPUZDSy5FZGl0b3JXaW5kb3cuZ2V0U2VsZWN0aW9uKCkuZm9jdXNOb2RlO2lmIChDKXtpZiAoQy5ub2RlVHlwZSE9MSkgQz1DLnBhcmVudE5vZGU7RkNLRG9tVG9vbHMuU2Nyb2xsSW50b1ZpZXcoQyxmYWxzZSk7fX07RkNLLkV2ZW50cy5GaXJlRXZlbnQoJ09uU2VsZWN0aW9uQ2hhbmdlJyk7fTtGQ0tTaG93QmxvY2tDb21tYW5kLnByb3RvdHlwZS5HZXRTdGF0ZT1mdW5jdGlvbigpe2lmIChGQ0suRWRpdE1vZGUhPTApIHJldHVybiAtMTtpZiAoIUZDSy5FZGl0b3JEb2N1bWVudCkgcmV0dXJuIDA7aWYgKC9GQ0tfX1Nob3dCbG9ja3MoPzpcc3wkKS8udGVzdChGQ0suRWRpdG9yRG9jdW1lbnQuYm9keS5jbGFzc05hbWUpKSByZXR1cm4gMTtyZXR1cm4gMDt9O0ZDS1Nob3dCbG9ja0NvbW1hbmQucHJvdG90eXBlLlNhdmVTdGF0ZT1mdW5jdGlvbigpe3RoaXMuX1NhdmVkU3RhdGU9dGhpcy5HZXRTdGF0ZSgpO307RkNLU2hvd0Jsb2NrQ29tbWFuZC5wcm90b3R5cGUuUmVzdG9yZVN0YXRlPWZ1bmN0aW9uKCl7aWYgKHRoaXMuX1NhdmVkU3RhdGUhPW51bGwmJnRoaXMuR2V0U3RhdGUoKSE9dGhpcy5fU2F2ZWRTdGF0ZSkgdGhpcy5FeGVjdXRlKCk7fTsKdmFyIEZDS1NwZWxsQ2hlY2tDb21tYW5kPWZ1bmN0aW9uKCl7dGhpcy5OYW1lPSdTcGVsbENoZWNrJzt0aGlzLklzRW5hYmxlZD10cnVlO307RkNLU3BlbGxDaGVja0NvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXtzd2l0Y2ggKEZDS0NvbmZpZy5TcGVsbENoZWNrZXIpe2Nhc2UgJ2llU3BlbGwnOnRoaXMuX1J1bkllU3BlbGwoKTticmVhaztjYXNlICdTcGVsbGVyUGFnZXMnOkZDS0RpYWxvZy5PcGVuRGlhbG9nKCdGQ0tEaWFsb2dfU3BlbGxDaGVjaycsJ1NwZWxsIENoZWNrJywnZGlhbG9nL2Zja19zcGVsbGVycGFnZXMuaHRtbCcsNDQwLDQ4MCk7YnJlYWs7Y2FzZSAnV1NDJzpGQ0tEaWFsb2cuT3BlbkRpYWxvZygnRkNLRGlhbG9nX1NwZWxsQ2hlY2snLCdTcGVsbCBDaGVjaycsJ3dzYy93Lmh0bWwnLDUzMCw0ODApO319O0ZDS1NwZWxsQ2hlY2tDb21tYW5kLnByb3RvdHlwZS5fUnVuSWVTcGVsbD1mdW5jdGlvbigpe3RyeXt2YXIgQT1uZXcgQWN0aXZlWE9iamVjdCgiaWVTcGVsbC5pZVNwZWxsRXh0ZW5zaW9uIik7QS5DaGVja0FsbExpbmtlZERvY3VtZW50cyhGQ0suRWRpdG9yRG9jdW1lbnQpO31jYXRjaChlKXtpZihlLm51bWJlcj09LTIxNDY4Mjc4NTkpe2lmIChjb25maXJtKEZDS0xhbmcuSWVTcGVsbERvd25sb2FkKSkgd2luZG93Lm9wZW4oRkNLQ29uZmlnLkllU3BlbGxEb3dubG9hZFVybCwnSWVTcGVsbERvd25sb2FkJyk7fWVsc2UgYWxlcnQoJ0Vycm9yIExvYWRpbmcgaWVTcGVsbDogJytlLm1lc3NhZ2UrJyAoJytlLm51bWJlcisnKScpO319O0ZDS1NwZWxsQ2hlY2tDb21tYW5kLnByb3RvdHlwZS5HZXRTdGF0ZT1mdW5jdGlvbigpe2lmIChGQ0suRWRpdE1vZGUhPTApIHJldHVybiAtMTtyZXR1cm4gdGhpcy5Jc0VuYWJsZWQ/MDotMTt9Owp2YXIgRkNLVGV4dENvbG9yQ29tbWFuZD1mdW5jdGlvbihBKXt0aGlzLk5hbWU9QT09J0ZvcmVDb2xvcic/J1RleHRDb2xvcic6J0JHQ29sb3InO3RoaXMuVHlwZT1BO3ZhciBCO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBCPXdpbmRvdztlbHNlIGlmIChGQ0suVG9vbGJhclNldC5fSUZyYW1lKSBCPUZDS1Rvb2xzLkdldEVsZW1lbnRXaW5kb3coRkNLLlRvb2xiYXJTZXQuX0lGcmFtZSk7ZWxzZSBCPXdpbmRvdy5wYXJlbnQ7dGhpcy5fUGFuZWw9bmV3IEZDS1BhbmVsKEIpO3RoaXMuX1BhbmVsLkFwcGVuZFN0eWxlU2hlZXQoRkNLQ29uZmlnLlNraW5FZGl0b3JDU1MpO3RoaXMuX1BhbmVsLk1haW5Ob2RlLmNsYXNzTmFtZT0nRkNLX1BhbmVsJzt0aGlzLl9DcmVhdGVQYW5lbEJvZHkodGhpcy5fUGFuZWwuRG9jdW1lbnQsdGhpcy5fUGFuZWwuTWFpbk5vZGUpO0ZDSy5Ub29sYmFyU2V0LlRvb2xiYXJJdGVtcy5HZXRJdGVtKHRoaXMuTmFtZSkuUmVnaXN0ZXJQYW5lbCh0aGlzLl9QYW5lbCk7RkNLVG9vbHMuRGlzYWJsZVNlbGVjdGlvbih0aGlzLl9QYW5lbC5Eb2N1bWVudC5ib2R5KTt9O0ZDS1RleHRDb2xvckNvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oQSxCLEMpe3RoaXMuX1BhbmVsLlNob3coQSxCLEMpO307RkNLVGV4dENvbG9yQ29tbWFuZC5wcm90b3R5cGUuU2V0Q29sb3I9ZnVuY3Rpb24oQSl7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTt2YXIgQj1GQ0tTdHlsZXMuR2V0U3R5bGUoJ19GQ0tfJysodGhpcy5UeXBlPT0nRm9yZUNvbG9yJz8nQ29sb3InOidCYWNrQ29sb3InKSk7aWYgKCFBfHxBLmxlbmd0aD09MCkgRkNLLlN0eWxlcy5SZW1vdmVTdHlsZShCKTtlbHNle0IuU2V0VmFyaWFibGUoJ0NvbG9yJyxBKTtGQ0tTdHlsZXMuQXBwbHlTdHlsZShCKTt9O0ZDS1VuZG8uU2F2ZVVuZG9TdGVwKCk7RkNLLkZvY3VzKCk7RkNLLkV2ZW50cy5GaXJlRXZlbnQoJ09uU2VsZWN0aW9uQ2hhbmdlJyk7fTtGQ0tUZXh0Q29sb3JDb21tYW5kLnByb3RvdHlwZS5HZXRTdGF0ZT1mdW5jdGlvbigpe2lmIChGQ0suRWRpdE1vZGUhPTApIHJldHVybiAtMTtyZXR1cm4gMDt9O2Z1bmN0aW9uIEZDS1RleHRDb2xvckNvbW1hbmRfT25Nb3VzZU92ZXIoKXt0aGlzLmNsYXNzTmFtZT0nQ29sb3JTZWxlY3RlZCc7fTtmdW5jdGlvbiBGQ0tUZXh0Q29sb3JDb21tYW5kX09uTW91c2VPdXQoKXt0aGlzLmNsYXNzTmFtZT0nQ29sb3JEZXNlbGVjdGVkJzt9O2Z1bmN0aW9uIEZDS1RleHRDb2xvckNvbW1hbmRfT25DbGljayhBLEIsQyl7dGhpcy5jbGFzc05hbWU9J0NvbG9yRGVzZWxlY3RlZCc7Qi5TZXRDb2xvcihDKTtCLl9QYW5lbC5IaWRlKCk7fTtmdW5jdGlvbiBGQ0tUZXh0Q29sb3JDb21tYW5kX0F1dG9PbkNsaWNrKEEsQil7dGhpcy5jbGFzc05hbWU9J0NvbG9yRGVzZWxlY3RlZCc7Qi5TZXRDb2xvcignJyk7Qi5fUGFuZWwuSGlkZSgpO307ZnVuY3Rpb24gRkNLVGV4dENvbG9yQ29tbWFuZF9Nb3JlT25DbGljayhBLEIpe3RoaXMuY2xhc3NOYW1lPSdDb2xvckRlc2VsZWN0ZWQnO0IuX1BhbmVsLkhpZGUoKTtGQ0tEaWFsb2cuT3BlbkRpYWxvZygnRkNLRGlhbG9nX0NvbG9yJyxGQ0tMYW5nLkRsZ0NvbG9yVGl0bGUsJ2RpYWxvZy9mY2tfY29sb3JzZWxlY3Rvci5odG1sJyw0MTAsMzIwLEZDS1Rvb2xzLkJpbmQoQixCLlNldENvbG9yKSk7fTtGQ0tUZXh0Q29sb3JDb21tYW5kLnByb3RvdHlwZS5fQ3JlYXRlUGFuZWxCb2R5PWZ1bmN0aW9uKEEsQil7ZnVuY3Rpb24gQ3JlYXRlU2VsZWN0aW9uRGl2KCl7dmFyIEM9QS5jcmVhdGVFbGVtZW50KCJESVYiKTtDLmNsYXNzTmFtZT0nQ29sb3JEZXNlbGVjdGVkJztGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQywnbW91c2VvdmVyJyxGQ0tUZXh0Q29sb3JDb21tYW5kX09uTW91c2VPdmVyKTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQywnbW91c2VvdXQnLEZDS1RleHRDb2xvckNvbW1hbmRfT25Nb3VzZU91dCk7cmV0dXJuIEM7fTt2YXIgRD1CLmFwcGVuZENoaWxkKEEuY3JlYXRlRWxlbWVudCgiVEFCTEUiKSk7RC5jbGFzc05hbWU9J0ZvcmNlQmFzZUZvbnQnO0Quc3R5bGUudGFibGVMYXlvdXQ9J2ZpeGVkJztELmNlbGxQYWRkaW5nPTA7RC5jZWxsU3BhY2luZz0wO0QuYm9yZGVyPTA7RC53aWR0aD0xNTA7dmFyIEU9RC5pbnNlcnRSb3coLTEpLmluc2VydENlbGwoLTEpO0UuY29sU3Bhbj04O3ZhciBDPUUuYXBwZW5kQ2hpbGQoQ3JlYXRlU2VsZWN0aW9uRGl2KCkpO0MuaW5uZXJIVE1MPSc8dGFibGUgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIj5cbgkJCTx0cj5cbgkJCQk8dGQ+PGRpdiBjbGFzcz0iQ29sb3JCb3hCb3JkZXIiPjxkaXYgY2xhc3M9IkNvbG9yQm94IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogIzAwMDAwMCI+PC9kaXY+PC9kaXY+PC90ZD5cbgkJCQk8dGQgbm93cmFwIHdpZHRoPSIxMDAlIiBhbGlnbj0iY2VudGVyIj4nK0ZDS0xhbmcuQ29sb3JBdXRvbWF0aWMrJzwvdGQ+XG4JCQk8L3RyPlxuCQk8L3RhYmxlPic7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lckV4KEMsJ2NsaWNrJyxGQ0tUZXh0Q29sb3JDb21tYW5kX0F1dG9PbkNsaWNrLHRoaXMpO2lmICghRkNLQnJvd3NlckluZm8uSXNJRSkgQy5zdHlsZS53aWR0aD0nOTYlJzt2YXIgRz1GQ0tDb25maWcuRm9udENvbG9ycy50b1N0cmluZygpLnNwbGl0KCcsJyk7dmFyIEg9MDt3aGlsZSAoSDxHLmxlbmd0aCl7dmFyIEk9RC5pbnNlcnRSb3coLTEpO2ZvciAodmFyIGk9MDtpPDg7aSsrLEgrKyl7aWYgKEg8Ry5sZW5ndGgpe3ZhciBKPUdbSF0uc3BsaXQoJy8nKTt2YXIgSz0nIycrSlswXTt2YXIgTD1KWzFdfHxLO307Qz1JLmluc2VydENlbGwoLTEpLmFwcGVuZENoaWxkKENyZWF0ZVNlbGVjdGlvbkRpdigpKTtDLmlubmVySFRNTD0nPGRpdiBjbGFzcz0iQ29sb3JCb3hCb3JkZXIiPjxkaXYgY2xhc3M9IkNvbG9yQm94IiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogJytLKyciPjwvZGl2PjwvZGl2Pic7aWYgKEg+PUcubGVuZ3RoKSBDLnN0eWxlLnZpc2liaWxpdHk9J2hpZGRlbic7ZWxzZSBGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQywnY2xpY2snLEZDS1RleHRDb2xvckNvbW1hbmRfT25DbGljayxbdGhpcyxMXSk7fX07aWYgKEZDS0NvbmZpZy5FbmFibGVNb3JlRm9udENvbG9ycyl7RT1ELmluc2VydFJvdygtMSkuaW5zZXJ0Q2VsbCgtMSk7RS5jb2xTcGFuPTg7Qz1FLmFwcGVuZENoaWxkKENyZWF0ZVNlbGVjdGlvbkRpdigpKTtDLmlubmVySFRNTD0nPHRhYmxlIHdpZHRoPSIxMDAlIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGJvcmRlcj0iMCI+PHRyPjx0ZCBub3dyYXAgYWxpZ249ImNlbnRlciI+JytGQ0tMYW5nLkNvbG9yTW9yZUNvbG9ycysnPC90ZD48L3RyPjwvdGFibGU+JztGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQywnY2xpY2snLEZDS1RleHRDb2xvckNvbW1hbmRfTW9yZU9uQ2xpY2ssdGhpcyk7aWYgKCFGQ0tCcm93c2VySW5mby5Jc0lFKSBDLnN0eWxlLndpZHRoPSc5NiUnO319Owp2YXIgRkNLUGFzdGVQbGFpblRleHRDb21tYW5kPWZ1bmN0aW9uKCl7dGhpcy5OYW1lPSdQYXN0ZVRleHQnO307RkNLUGFzdGVQbGFpblRleHRDb21tYW5kLnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKCl7RkNLLlBhc3RlQXNQbGFpblRleHQoKTt9O0ZDS1Bhc3RlUGxhaW5UZXh0Q29tbWFuZC5wcm90b3R5cGUuR2V0U3RhdGU9ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wKSByZXR1cm4gLTE7cmV0dXJuIEZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZSgnUGFzdGUnKTt9Owp2YXIgRkNLUGFzdGVXb3JkQ29tbWFuZD1mdW5jdGlvbigpe3RoaXMuTmFtZT0nUGFzdGVXb3JkJzt9O0ZDS1Bhc3RlV29yZENvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXtGQ0suUGFzdGVGcm9tV29yZCgpO307RkNLUGFzdGVXb3JkQ29tbWFuZC5wcm90b3R5cGUuR2V0U3RhdGU9ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wfHxGQ0tDb25maWcuRm9yY2VQYXN0ZUFzUGxhaW5UZXh0KSByZXR1cm4gLTE7ZWxzZSByZXR1cm4gRkNLLkdldE5hbWVkQ29tbWFuZFN0YXRlKCdQYXN0ZScpO307CnZhciBGQ0tUYWJsZUNvbW1hbmQ9ZnVuY3Rpb24oQSl7dGhpcy5OYW1lPUE7fTtGQ0tUYWJsZUNvbW1hbmQucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO2lmICghRkNLQnJvd3NlckluZm8uSXNHZWNrbyl7c3dpdGNoICh0aGlzLk5hbWUpe2Nhc2UgJ1RhYmxlTWVyZ2VSaWdodCc6cmV0dXJuIEZDS1RhYmxlSGFuZGxlci5NZXJnZVJpZ2h0KCk7Y2FzZSAnVGFibGVNZXJnZURvd24nOnJldHVybiBGQ0tUYWJsZUhhbmRsZXIuTWVyZ2VEb3duKCk7fX07c3dpdGNoICh0aGlzLk5hbWUpe2Nhc2UgJ1RhYmxlSW5zZXJ0Um93QWZ0ZXInOnJldHVybiBGQ0tUYWJsZUhhbmRsZXIuSW5zZXJ0Um93KGZhbHNlKTtjYXNlICdUYWJsZUluc2VydFJvd0JlZm9yZSc6cmV0dXJuIEZDS1RhYmxlSGFuZGxlci5JbnNlcnRSb3codHJ1ZSk7Y2FzZSAnVGFibGVEZWxldGVSb3dzJzpyZXR1cm4gRkNLVGFibGVIYW5kbGVyLkRlbGV0ZVJvd3MoKTtjYXNlICdUYWJsZUluc2VydENvbHVtbkFmdGVyJzpyZXR1cm4gRkNLVGFibGVIYW5kbGVyLkluc2VydENvbHVtbihmYWxzZSk7Y2FzZSAnVGFibGVJbnNlcnRDb2x1bW5CZWZvcmUnOnJldHVybiBGQ0tUYWJsZUhhbmRsZXIuSW5zZXJ0Q29sdW1uKHRydWUpO2Nhc2UgJ1RhYmxlRGVsZXRlQ29sdW1ucyc6cmV0dXJuIEZDS1RhYmxlSGFuZGxlci5EZWxldGVDb2x1bW5zKCk7Y2FzZSAnVGFibGVJbnNlcnRDZWxsQWZ0ZXInOnJldHVybiBGQ0tUYWJsZUhhbmRsZXIuSW5zZXJ0Q2VsbChudWxsLGZhbHNlKTtjYXNlICdUYWJsZUluc2VydENlbGxCZWZvcmUnOnJldHVybiBGQ0tUYWJsZUhhbmRsZXIuSW5zZXJ0Q2VsbChudWxsLHRydWUpO2Nhc2UgJ1RhYmxlRGVsZXRlQ2VsbHMnOnJldHVybiBGQ0tUYWJsZUhhbmRsZXIuRGVsZXRlQ2VsbHMoKTtjYXNlICdUYWJsZU1lcmdlQ2VsbHMnOnJldHVybiBGQ0tUYWJsZUhhbmRsZXIuTWVyZ2VDZWxscygpO2Nhc2UgJ1RhYmxlSG9yaXpvbnRhbFNwbGl0Q2VsbCc6cmV0dXJuIEZDS1RhYmxlSGFuZGxlci5Ib3Jpem9udGFsU3BsaXRDZWxsKCk7Y2FzZSAnVGFibGVWZXJ0aWNhbFNwbGl0Q2VsbCc6cmV0dXJuIEZDS1RhYmxlSGFuZGxlci5WZXJ0aWNhbFNwbGl0Q2VsbCgpO2Nhc2UgJ1RhYmxlRGVsZXRlJzpyZXR1cm4gRkNLVGFibGVIYW5kbGVyLkRlbGV0ZVRhYmxlKCk7ZGVmYXVsdDpyZXR1cm4gYWxlcnQoRkNLTGFuZy5Vbmtub3duQ29tbWFuZC5yZXBsYWNlKC8lMS9nLHRoaXMuTmFtZSkpO319O0ZDS1RhYmxlQ29tbWFuZC5wcm90b3R5cGUuR2V0U3RhdGU9ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRvckRvY3VtZW50IT1udWxsJiZGQ0tTZWxlY3Rpb24uSGFzQW5jZXN0b3JOb2RlKCdUQUJMRScpKXtzd2l0Y2ggKHRoaXMuTmFtZSl7Y2FzZSAnVGFibGVIb3Jpem9udGFsU3BsaXRDZWxsJzpjYXNlICdUYWJsZVZlcnRpY2FsU3BsaXRDZWxsJzppZiAoRkNLVGFibGVIYW5kbGVyLkdldFNlbGVjdGVkQ2VsbHMoKS5sZW5ndGg9PTEpIHJldHVybiAwO2Vsc2UgcmV0dXJuIC0xO2Nhc2UgJ1RhYmxlTWVyZ2VDZWxscyc6aWYgKEZDS1RhYmxlSGFuZGxlci5DaGVja0lzU2VsZWN0aW9uUmVjdGFuZ3VsYXIoKSYmRkNLVGFibGVIYW5kbGVyLkdldFNlbGVjdGVkQ2VsbHMoKS5sZW5ndGg+MSkgcmV0dXJuIDA7ZWxzZSByZXR1cm4gLTE7Y2FzZSAnVGFibGVNZXJnZVJpZ2h0JzpyZXR1cm4gRkNLVGFibGVIYW5kbGVyLkdldE1lcmdlUmlnaHRUYXJnZXQoKT8wOi0xO2Nhc2UgJ1RhYmxlTWVyZ2VEb3duJzpyZXR1cm4gRkNLVGFibGVIYW5kbGVyLkdldE1lcmdlRG93blRhcmdldCgpPzA6LTE7ZGVmYXVsdDpyZXR1cm4gMDt9fWVsc2UgcmV0dXJuIC0xO307CnZhciBGQ0tGaXRXaW5kb3c9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J0ZpdFdpbmRvdyc7fTtGQ0tGaXRXaW5kb3cucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oKXt2YXIgQT13aW5kb3cuZnJhbWVFbGVtZW50O3ZhciBCPUEuc3R5bGU7dmFyIEM9cGFyZW50O3ZhciBEPUMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3ZhciBFPUMuZG9jdW1lbnQuYm9keTt2YXIgRj1FLnN0eWxlO3ZhciBHO3ZhciBILG9FZGl0b3JTY3JvbGxQb3M7aWYgKEZDSy5FZGl0TW9kZT09MCl7SD1uZXcgRkNLRG9tUmFuZ2UoRkNLLkVkaXRvcldpbmRvdyk7SC5Nb3ZlVG9TZWxlY3Rpb24oKTtvRWRpdG9yU2Nyb2xsUG9zPUZDS1Rvb2xzLkdldFNjcm9sbFBvc2l0aW9uKEZDSy5FZGl0b3JXaW5kb3cpO31lbHNle3ZhciBJPUZDSy5FZGl0aW5nQXJlYS5UZXh0YXJlYTtIPSFGQ0tCcm93c2VySW5mby5Jc0lFJiZbSS5zZWxlY3Rpb25TdGFydCxJLnNlbGVjdGlvbkVuZF07b0VkaXRvclNjcm9sbFBvcz1bSS5zY3JvbGxMZWZ0LEkuc2Nyb2xsVG9wXTt9O2lmICghdGhpcy5Jc01heGltaXplZCl7aWYoRkNLQnJvd3NlckluZm8uSXNJRSkgQy5hdHRhY2hFdmVudCgnb25yZXNpemUnLEZDS0ZpdFdpbmRvd19SZXNpemUpO2Vsc2UgQy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLEZDS0ZpdFdpbmRvd19SZXNpemUsdHJ1ZSk7dGhpcy5fU2Nyb2xsUG9zPUZDS1Rvb2xzLkdldFNjcm9sbFBvc2l0aW9uKEMpO0c9QTt3aGlsZSgoRz1HLnBhcmVudE5vZGUpKXtpZiAoRy5ub2RlVHlwZT09MSl7Ry5fZmNrU2F2ZWRTdHlsZXM9RkNLVG9vbHMuU2F2ZVN0eWxlcyhHKTtHLnN0eWxlLnpJbmRleD1GQ0tDb25maWcuRmxvYXRpbmdQYW5lbHNaSW5kZXgtMTt9fTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRSl7dGhpcy5kb2N1bWVudEVsZW1lbnRPdmVyZmxvdz1ELnN0eWxlLm92ZXJmbG93O0Quc3R5bGUub3ZlcmZsb3c9J2hpZGRlbic7Ri5vdmVyZmxvdz0naGlkZGVuJzt9ZWxzZXtGLm92ZXJmbG93PSdoaWRkZW4nO0Yud2lkdGg9JzBweCc7Ri5oZWlnaHQ9JzBweCc7fTt0aGlzLl9FZGl0b3JGcmFtZVN0eWxlcz1GQ0tUb29scy5TYXZlU3R5bGVzKEEpO3ZhciBKPUZDS1Rvb2xzLkdldFZpZXdQYW5lU2l6ZShDKTtCLnBvc2l0aW9uPSJhYnNvbHV0ZSI7QS5vZmZzZXRMZWZ0O0IuekluZGV4PUZDS0NvbmZpZy5GbG9hdGluZ1BhbmVsc1pJbmRleC0xO0IubGVmdD0iMHB4IjtCLnRvcD0iMHB4IjtCLndpZHRoPUouV2lkdGgrInB4IjtCLmhlaWdodD1KLkhlaWdodCsicHgiO2lmICghRkNLQnJvd3NlckluZm8uSXNJRSl7Qi5ib3JkZXJSaWdodD1CLmJvcmRlckJvdHRvbT0iOTk5OXB4IHNvbGlkIHdoaXRlIjtCLmJhY2tncm91bmRDb2xvcj0id2hpdGUiO307Qy5zY3JvbGxUbygwLDApO3ZhciBLPUZDS1Rvb2xzLkdldFdpbmRvd1Bvc2l0aW9uKEMsQSk7aWYgKEsueCE9MCkgQi5sZWZ0PSgtMSpLLngpKyJweCI7aWYgKEsueSE9MCkgQi50b3A9KC0xKksueSkrInB4Ijt0aGlzLklzTWF4aW1pemVkPXRydWU7fWVsc2V7aWYoRkNLQnJvd3NlckluZm8uSXNJRSkgQy5kZXRhY2hFdmVudCgib25yZXNpemUiLEZDS0ZpdFdpbmRvd19SZXNpemUpO2Vsc2UgQy5yZW1vdmVFdmVudExpc3RlbmVyKCJyZXNpemUiLEZDS0ZpdFdpbmRvd19SZXNpemUsdHJ1ZSk7Rz1BO3doaWxlKChHPUcucGFyZW50Tm9kZSkpe2lmIChHLl9mY2tTYXZlZFN0eWxlcyl7RkNLVG9vbHMuUmVzdG9yZVN0eWxlcyhHLEcuX2Zja1NhdmVkU3R5bGVzKTtHLl9mY2tTYXZlZFN0eWxlcz1udWxsO319O2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBELnN0eWxlLm92ZXJmbG93PXRoaXMuZG9jdW1lbnRFbGVtZW50T3ZlcmZsb3c7RkNLVG9vbHMuUmVzdG9yZVN0eWxlcyhBLHRoaXMuX0VkaXRvckZyYW1lU3R5bGVzKTtDLnNjcm9sbFRvKHRoaXMuX1Njcm9sbFBvcy5YLHRoaXMuX1Njcm9sbFBvcy5ZKTt0aGlzLklzTWF4aW1pemVkPWZhbHNlO307RkNLVG9vbGJhckl0ZW1zLkdldEl0ZW0oJ0ZpdFdpbmRvdycpLlJlZnJlc2hTdGF0ZSgpO2lmIChGQ0suRWRpdE1vZGU9PTApIEZDSy5FZGl0aW5nQXJlYS5NYWtlRWRpdGFibGUoKTtGQ0suRm9jdXMoKTtpZiAoRkNLLkVkaXRNb2RlPT0wKXtILlNlbGVjdCgpO0ZDSy5FZGl0b3JXaW5kb3cuc2Nyb2xsVG8ob0VkaXRvclNjcm9sbFBvcy5YLG9FZGl0b3JTY3JvbGxQb3MuWSk7fWVsc2V7aWYgKCFGQ0tCcm93c2VySW5mby5Jc0lFKXtJLnNlbGVjdGlvblN0YXJ0PUhbMF07SS5zZWxlY3Rpb25FbmQ9SFsxXTt9O0kuc2Nyb2xsTGVmdD1vRWRpdG9yU2Nyb2xsUG9zWzBdO0kuc2Nyb2xsVG9wPW9FZGl0b3JTY3JvbGxQb3NbMV07fX07RkNLRml0V2luZG93LnByb3RvdHlwZS5HZXRTdGF0ZT1mdW5jdGlvbigpe2lmIChGQ0tDb25maWcuVG9vbGJhckxvY2F0aW9uIT0nSW4nKSByZXR1cm4gLTE7ZWxzZSByZXR1cm4gKHRoaXMuSXNNYXhpbWl6ZWQ/MTowKTt9O2Z1bmN0aW9uIEZDS0ZpdFdpbmRvd19SZXNpemUoKXt2YXIgQT1GQ0tUb29scy5HZXRWaWV3UGFuZVNpemUocGFyZW50KTt2YXIgQj13aW5kb3cuZnJhbWVFbGVtZW50LnN0eWxlO0Iud2lkdGg9QS5XaWR0aCsncHgnO0IuaGVpZ2h0PUEuSGVpZ2h0KydweCc7fTsKdmFyIEZDS0xpc3RDb21tYW5kPWZ1bmN0aW9uKEEsQil7dGhpcy5OYW1lPUE7dGhpcy5UYWdOYW1lPUI7fTtGQ0tMaXN0Q29tbWFuZC5wcm90b3R5cGU9e0dldFN0YXRlOmZ1bmN0aW9uKCl7aWYgKEZDSy5FZGl0TW9kZSE9MHx8IUZDSy5FZGl0b3JXaW5kb3cpIHJldHVybiAtMTt2YXIgQT1GQ0tTZWxlY3Rpb24uR2V0Qm91bmRhcnlQYXJlbnRFbGVtZW50KHRydWUpO3ZhciBCPUE7d2hpbGUgKEIpe2lmIChCLm5vZGVOYW1lLklFcXVhbHMoWyd1bCcsJ29sJ10pKSBicmVhaztCPUIucGFyZW50Tm9kZTt9O2lmIChCJiZCLm5vZGVOYW1lLklFcXVhbHModGhpcy5UYWdOYW1lKSkgcmV0dXJuIDE7ZWxzZSByZXR1cm4gMDt9LEV4ZWN1dGU6ZnVuY3Rpb24oKXtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO3ZhciBBPUZDSy5FZGl0b3JEb2N1bWVudDt2YXIgQj1uZXcgRkNLRG9tUmFuZ2UoRkNLLkVkaXRvcldpbmRvdyk7Qi5Nb3ZlVG9TZWxlY3Rpb24oKTt2YXIgQz10aGlzLkdldFN0YXRlKCk7aWYgKEM9PTApe0ZDS0RvbVRvb2xzLlRyaW1Ob2RlKEEuYm9keSk7aWYgKCFBLmJvZHkuZmlyc3RDaGlsZCl7dmFyIEQ9QS5jcmVhdGVFbGVtZW50KCdwJyk7QS5ib2R5LmFwcGVuZENoaWxkKEQpO0IuTW92ZVRvTm9kZUNvbnRlbnRzKEQpO319O3ZhciBFPUIuQ3JlYXRlQm9va21hcmsoKTt2YXIgRj1bXTt2YXIgRz17fTt2YXIgSD1uZXcgRkNLRG9tUmFuZ2VJdGVyYXRvcihCKTt2YXIgSTtILkZvcmNlQnJCcmVhaz0oQz09MCk7dmFyIEo9dHJ1ZTt2YXIgSz1udWxsO3doaWxlIChKKXt3aGlsZSAoKEk9SC5HZXROZXh0UGFyYWdyYXBoKCkpKXt2YXIgTD1uZXcgRkNLRWxlbWVudFBhdGgoSSk7dmFyIE09bnVsbDt2YXIgTj1mYWxzZTt2YXIgTz1MLkJsb2NrTGltaXQ7Zm9yICh2YXIgaT1MLkVsZW1lbnRzLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgUD1MLkVsZW1lbnRzW2ldO2lmIChQLm5vZGVOYW1lLklFcXVhbHMoWydvbCcsJ3VsJ10pKXtpZiAoTy5fRkNLX0xpc3RHcm91cE9iamVjdCkgTy5fRkNLX0xpc3RHcm91cE9iamVjdD1udWxsO3ZhciBRPVAuX0ZDS19MaXN0R3JvdXBPYmplY3Q7aWYgKFEpIFEuY29udGVudHMucHVzaChJKTtlbHNle1E9eyAncm9vdCc6UCwnY29udGVudHMnOltJXSB9O0YucHVzaChRKTtGQ0tEb21Ub29scy5TZXRFbGVtZW50TWFya2VyKEcsUCwnX0ZDS19MaXN0R3JvdXBPYmplY3QnLFEpO307Tj10cnVlO2JyZWFrO319O2lmIChOKSBjb250aW51ZTt2YXIgUj1PO2lmIChSLl9GQ0tfTGlzdEdyb3VwT2JqZWN0KSBSLl9GQ0tfTGlzdEdyb3VwT2JqZWN0LmNvbnRlbnRzLnB1c2goSSk7ZWxzZXt2YXIgUT17ICdyb290JzpSLCdjb250ZW50cyc6W0ldIH07RkNLRG9tVG9vbHMuU2V0RWxlbWVudE1hcmtlcihHLFIsJ19GQ0tfTGlzdEdyb3VwT2JqZWN0JyxRKTtGLnB1c2goUSk7fX07aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpIEo9ZmFsc2U7ZWxzZXtpZiAoSz09bnVsbCl7Sz1bXTt2YXIgVD1GQ0tTZWxlY3Rpb24uR2V0U2VsZWN0aW9uKCk7aWYgKFQmJkYubGVuZ3RoPT0wKSBLLnB1c2goVC5nZXRSYW5nZUF0KDApKTtmb3IgKHZhciBpPTE7VCYmaTxULnJhbmdlQ291bnQ7aSsrKSBLLnB1c2goVC5nZXRSYW5nZUF0KGkpKTt9O2lmIChLLmxlbmd0aDwxKSBKPWZhbHNlO2Vsc2V7dmFyIFU9RkNLVzNDUmFuZ2UuQ3JlYXRlRnJvbVJhbmdlKEEsSy5zaGlmdCgpKTtCLl9SYW5nZT1VO0IuX1VwZGF0ZUVsZW1lbnRJbmZvKCk7aWYgKEIuU3RhcnROb2RlLm5vZGVOYW1lLklFcXVhbHMoJ3RkJykpIEIuU2V0U3RhcnQoQi5TdGFydE5vZGUsMSk7aWYgKEIuRW5kTm9kZS5ub2RlTmFtZS5JRXF1YWxzKCd0ZCcpKSBCLlNldEVuZChCLkVuZE5vZGUsMik7SD1uZXcgRkNLRG9tUmFuZ2VJdGVyYXRvcihCKTtILkZvcmNlQnJCcmVhaz0oQz09MCk7fX19O3ZhciBXPVtdO3doaWxlIChGLmxlbmd0aD4wKXt2YXIgUT1GLnNoaWZ0KCk7aWYgKEM9PTApe2lmIChRLnJvb3Qubm9kZU5hbWUuSUVxdWFscyhbJ3VsJywnb2wnXSkpIHRoaXMuX0NoYW5nZUxpc3RUeXBlKFEsRyxXKTtlbHNlIHRoaXMuX0NyZWF0ZUxpc3QoUSxXKTt9ZWxzZSBpZiAoQz09MSYmUS5yb290Lm5vZGVOYW1lLklFcXVhbHMoWyd1bCcsJ29sJ10pKSB0aGlzLl9SZW1vdmVMaXN0KFEsRyk7fTtmb3IgKHZhciBpPTA7aTxXLmxlbmd0aDtpKyspe3ZhciBNPVdbaV07dmFyIFo9ZmFsc2U7dmFyIGE9TTt3aGlsZSAoIVope2E9YS5uZXh0U2libGluZztpZiAoYSYmYS5ub2RlVHlwZT09MyYmYS5ub2RlVmFsdWUuc2VhcmNoKC9eW1xuXHJcdCBdKiQvKT09MCkgY29udGludWU7Wj10cnVlO307aWYgKGEmJmEubm9kZU5hbWUuSUVxdWFscyh0aGlzLlRhZ05hbWUpKXthLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSk7d2hpbGUgKGEuZmlyc3RDaGlsZCkgTS5hcHBlbmRDaGlsZChhLnJlbW92ZUNoaWxkKGEuZmlyc3RDaGlsZCkpO307Wj1mYWxzZTthPU07d2hpbGUgKCFaKXthPWEucHJldmlvdXNTaWJsaW5nO2lmIChhJiZhLm5vZGVUeXBlPT0zJiZhLm5vZGVWYWx1ZS5zZWFyY2goL15bXG5cclx0IF0qJC8pPT0wKSBjb250aW51ZTtaPXRydWU7fTtpZiAoYSYmYS5ub2RlTmFtZS5JRXF1YWxzKHRoaXMuVGFnTmFtZSkpe2EucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKTt3aGlsZSAoYS5sYXN0Q2hpbGQpIE0uaW5zZXJ0QmVmb3JlKGEucmVtb3ZlQ2hpbGQoYS5sYXN0Q2hpbGQpLE0uZmlyc3RDaGlsZCk7fX07RkNLRG9tVG9vbHMuQ2xlYXJBbGxNYXJrZXJzKEcpO0IuTW92ZVRvQm9va21hcmsoRSk7Qi5TZWxlY3QoKTtGQ0suRm9jdXMoKTtGQ0suRXZlbnRzLkZpcmVFdmVudCgnT25TZWxlY3Rpb25DaGFuZ2UnKTt9LF9DaGFuZ2VMaXN0VHlwZTpmdW5jdGlvbihBLEIsQyl7dmFyIEQ9RkNLRG9tVG9vbHMuTGlzdFRvQXJyYXkoQS5yb290LEIpO3ZhciBFPVtdO2ZvciAodmFyIGk9MDtpPEEuY29udGVudHMubGVuZ3RoO2krKyl7dmFyIEY9QS5jb250ZW50c1tpXTtGPUZDS1Rvb2xzLkdldEVsZW1lbnRBc2NlbnNvcihGLCdsaScpO2lmICghRnx8Ri5fRkNLX0xpc3RJdGVtX1Byb2Nlc3NlZCkgY29udGludWU7RS5wdXNoKEYpO0ZDS0RvbVRvb2xzLlNldEVsZW1lbnRNYXJrZXIoQixGLCdfRkNLX0xpc3RJdGVtX1Byb2Nlc3NlZCcsdHJ1ZSk7fTt2YXIgRz1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQS5yb290KS5jcmVhdGVFbGVtZW50KHRoaXMuVGFnTmFtZSk7Zm9yICh2YXIgaT0wO2k8RS5sZW5ndGg7aSsrKXt2YXIgSD1FW2ldLl9GQ0tfTGlzdEFycmF5X0luZGV4O0RbSF0ucGFyZW50PUc7fTt2YXIgST1GQ0tEb21Ub29scy5BcnJheVRvTGlzdChELEIpO2ZvciAodmFyIGk9MDtpPEkubGlzdE5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXtpZiAoSS5saXN0Tm9kZS5jaGlsZE5vZGVzW2ldLm5vZGVOYW1lLklFcXVhbHModGhpcy5UYWdOYW1lKSkgQy5wdXNoKEkubGlzdE5vZGUuY2hpbGROb2Rlc1tpXSk7fTtBLnJvb3QucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoSS5saXN0Tm9kZSxBLnJvb3QpO30sX0NyZWF0ZUxpc3Q6ZnVuY3Rpb24oQSxCKXt2YXIgQz1BLmNvbnRlbnRzO3ZhciBEPUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChBLnJvb3QpO3ZhciBFPVtdO2lmIChDLmxlbmd0aD09MSYmQ1swXT09QS5yb290KXt2YXIgRj1ELmNyZWF0ZUVsZW1lbnQoJ2RpdicpO3doaWxlIChDWzBdLmZpcnN0Q2hpbGQpIEYuYXBwZW5kQ2hpbGQoQ1swXS5yZW1vdmVDaGlsZChDWzBdLmZpcnN0Q2hpbGQpKTtDWzBdLmFwcGVuZENoaWxkKEYpO0NbMF09Rjt9O3ZhciBHPUEuY29udGVudHNbMF0ucGFyZW50Tm9kZTtmb3IgKHZhciBpPTA7aTxDLmxlbmd0aDtpKyspIEc9RkNLRG9tVG9vbHMuR2V0Q29tbW9uUGFyZW50cyhHLENbaV0ucGFyZW50Tm9kZSkucG9wKCk7Zm9yICh2YXIgaT0wO2k8Qy5sZW5ndGg7aSsrKXt2YXIgSD1DW2ldO3doaWxlIChILnBhcmVudE5vZGUpe2lmIChILnBhcmVudE5vZGU9PUcpe0UucHVzaChIKTticmVhazt9O0g9SC5wYXJlbnROb2RlO319O2lmIChFLmxlbmd0aDwxKSByZXR1cm47dmFyIEk9RVtFLmxlbmd0aC0xXS5uZXh0U2libGluZzt2YXIgSj1ELmNyZWF0ZUVsZW1lbnQodGhpcy5UYWdOYW1lKTtCLnB1c2goSik7d2hpbGUgKEUubGVuZ3RoKXt2YXIgSz1FLnNoaWZ0KCk7dmFyIEw9RC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7d2hpbGUgKEsuZmlyc3RDaGlsZCkgTC5hcHBlbmRDaGlsZChLLnJlbW92ZUNoaWxkKEsuZmlyc3RDaGlsZCkpO0sucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChLKTt2YXIgTT1ELmNyZWF0ZUVsZW1lbnQoJ2xpJyk7TS5hcHBlbmRDaGlsZChMKTtKLmFwcGVuZENoaWxkKE0pO307Ry5pbnNlcnRCZWZvcmUoSixJKTt9LF9SZW1vdmVMaXN0OmZ1bmN0aW9uKEEsQil7dmFyIEM9RkNLRG9tVG9vbHMuTGlzdFRvQXJyYXkoQS5yb290LEIpO3ZhciBEPVtdO2ZvciAodmFyIGk9MDtpPEEuY29udGVudHMubGVuZ3RoO2krKyl7dmFyIEU9QS5jb250ZW50c1tpXTtFPUZDS1Rvb2xzLkdldEVsZW1lbnRBc2NlbnNvcihFLCdsaScpO2lmICghRXx8RS5fRkNLX0xpc3RJdGVtX1Byb2Nlc3NlZCkgY29udGludWU7RC5wdXNoKEUpO0ZDS0RvbVRvb2xzLlNldEVsZW1lbnRNYXJrZXIoQixFLCdfRkNLX0xpc3RJdGVtX1Byb2Nlc3NlZCcsdHJ1ZSk7fTt2YXIgRj1udWxsO2ZvciAodmFyIGk9MDtpPEQubGVuZ3RoO2krKyl7dmFyIEc9RFtpXS5fRkNLX0xpc3RBcnJheV9JbmRleDtDW0ddLmluZGVudD0tMTtGPUc7fTtmb3IgKHZhciBpPUYrMTtpPEMubGVuZ3RoO2krKyl7aWYgKENbaV0uaW5kZW50PkNbaS0xXS5pbmRlbnQrMSl7dmFyIEg9Q1tpLTFdLmluZGVudCsxLUNbaV0uaW5kZW50O3ZhciBJPUNbaV0uaW5kZW50O3doaWxlIChDW2ldJiZDW2ldLmluZGVudD49SSl7Q1tpXS5pbmRlbnQrPUg7aSsrO307aS0tO319O3ZhciBKPUZDS0RvbVRvb2xzLkFycmF5VG9MaXN0KEMsQik7aWYgKEEucm9vdC5uZXh0U2libGluZz09bnVsbHx8QS5yb290Lm5leHRTaWJsaW5nLm5vZGVOYW1lLklFcXVhbHMoJ2JyJykpe2lmIChKLmxpc3ROb2RlLmxhc3RDaGlsZC5ub2RlTmFtZS5JRXF1YWxzKCdicicpKSBKLmxpc3ROb2RlLnJlbW92ZUNoaWxkKEoubGlzdE5vZGUubGFzdENoaWxkKTt9O0Eucm9vdC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChKLmxpc3ROb2RlLEEucm9vdCk7fX07CnZhciBGQ0tKdXN0aWZ5Q29tbWFuZD1mdW5jdGlvbihBKXt0aGlzLkFsaWduVmFsdWU9QTt2YXIgQj1GQ0tDb25maWcuQ29udGVudExhbmdEaXJlY3Rpb24udG9Mb3dlckNhc2UoKTt0aGlzLklzRGVmYXVsdEFsaWduPShBPT0nbGVmdCcmJkI9PSdsdHInKXx8KEE9PSdyaWdodCcmJkI9PSdydGwnKTt2YXIgQz10aGlzLl9Dc3NDbGFzc05hbWU9KGZ1bmN0aW9uKCl7dmFyIEQ9RkNLQ29uZmlnLkp1c3RpZnlDbGFzc2VzO2lmIChEKXtzd2l0Y2ggKEEpe2Nhc2UgJ2xlZnQnOnJldHVybiBEWzBdfHxudWxsO2Nhc2UgJ2NlbnRlcic6cmV0dXJuIERbMV18fG51bGw7Y2FzZSAncmlnaHQnOnJldHVybiBEWzJdfHxudWxsO2Nhc2UgJ2p1c3RpZnknOnJldHVybiBEWzNdfHxudWxsO319O3JldHVybiBudWxsO30pKCk7aWYgKEMmJkMubGVuZ3RoPjApIHRoaXMuX0Nzc0NsYXNzUmVnZXg9bmV3IFJlZ0V4cCgnKD86XnxcXHMrKScrQysnKD89JHxcXHMpJyk7fTtGQ0tKdXN0aWZ5Q29tbWFuZC5fR2V0Q2xhc3NOYW1lUmVnZXg9ZnVuY3Rpb24oKXt2YXIgQT1GQ0tKdXN0aWZ5Q29tbWFuZC5fQ2xhc3NSZWdleDtpZiAoQSE9dW5kZWZpbmVkKSByZXR1cm4gQTt2YXIgQj1bXTt2YXIgQz1GQ0tDb25maWcuSnVzdGlmeUNsYXNzZXM7aWYgKEMpe2ZvciAodmFyIGk9MDtpPDQ7aSsrKXt2YXIgRD1DW2ldO2lmIChEJiZELmxlbmd0aD4wKSBCLnB1c2goRCk7fX07aWYgKEIubGVuZ3RoPjApIEE9bmV3IFJlZ0V4cCgnKD86XnxcXHMrKSg/OicrQi5qb2luKCd8JykrJykoPz0kfFxccyknKTtlbHNlIEE9bnVsbDtyZXR1cm4gRkNLSnVzdGlmeUNvbW1hbmQuX0NsYXNzUmVnZXg9QTt9O0ZDS0p1c3RpZnlDb21tYW5kLnByb3RvdHlwZT17RXhlY3V0ZTpmdW5jdGlvbigpe0ZDS1VuZG8uU2F2ZVVuZG9TdGVwKCk7dmFyIEE9bmV3IEZDS0RvbVJhbmdlKEZDSy5FZGl0b3JXaW5kb3cpO0EuTW92ZVRvU2VsZWN0aW9uKCk7dmFyIEI9dGhpcy5HZXRTdGF0ZSgpO2lmIChCPT0tMSkgcmV0dXJuO3ZhciBDPUEuQ3JlYXRlQm9va21hcmsoKTt2YXIgRD10aGlzLl9Dc3NDbGFzc05hbWU7dmFyIEU9bmV3IEZDS0RvbVJhbmdlSXRlcmF0b3IoQSk7dmFyIEY7d2hpbGUgKChGPUUuR2V0TmV4dFBhcmFncmFwaCgpKSl7Ri5yZW1vdmVBdHRyaWJ1dGUoJ2FsaWduJyk7aWYgKEQpe3ZhciBHPUYuY2xhc3NOYW1lLnJlcGxhY2UoRkNLSnVzdGlmeUNvbW1hbmQuX0dldENsYXNzTmFtZVJlZ2V4KCksJycpO2lmIChCPT0wKXtpZiAoRy5sZW5ndGg+MCkgRys9JyAnO0YuY2xhc3NOYW1lPUcrRDt9ZWxzZSBpZiAoRy5sZW5ndGg9PTApIEZDS0RvbVRvb2xzLlJlbW92ZUF0dHJpYnV0ZShGLCdjbGFzcycpO31lbHNle3ZhciBIPUYuc3R5bGU7aWYgKEI9PTApIEgudGV4dEFsaWduPXRoaXMuQWxpZ25WYWx1ZTtlbHNle0gudGV4dEFsaWduPScnO2lmIChILmNzc1RleHQubGVuZ3RoPT0wKSBGLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTt9fX07QS5Nb3ZlVG9Cb29rbWFyayhDKTtBLlNlbGVjdCgpO0ZDSy5Gb2N1cygpO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCdPblNlbGVjdGlvbkNoYW5nZScpO30sR2V0U3RhdGU6ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wfHwhRkNLLkVkaXRvcldpbmRvdykgcmV0dXJuIC0xO3ZhciBBPW5ldyBGQ0tFbGVtZW50UGF0aChGQ0tTZWxlY3Rpb24uR2V0Qm91bmRhcnlQYXJlbnRFbGVtZW50KHRydWUpKTt2YXIgQj1BLkJsb2NrfHxBLkJsb2NrTGltaXQ7aWYgKCFCfHxCLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PSdib2R5JykgcmV0dXJuIDA7dmFyIEM7aWYgKEZDS0Jyb3dzZXJJbmZvLklzSUUpIEM9Qi5jdXJyZW50U3R5bGUudGV4dEFsaWduO2Vsc2UgQz1GQ0suRWRpdG9yV2luZG93LmdldENvbXB1dGVkU3R5bGUoQiwnJykuZ2V0UHJvcGVydHlWYWx1ZSgndGV4dC1hbGlnbicpO0M9Qy5yZXBsYWNlKC8oLW1vei18LXdlYmtpdC18c3RhcnR8YXV0bykvaSwnJyk7aWYgKCghQyYmdGhpcy5Jc0RlZmF1bHRBbGlnbil8fEM9PXRoaXMuQWxpZ25WYWx1ZSkgcmV0dXJuIDE7cmV0dXJuIDA7fX07CnZhciBGQ0tJbmRlbnRDb21tYW5kPWZ1bmN0aW9uKEEsQil7dGhpcy5OYW1lPUE7dGhpcy5PZmZzZXQ9Qjt0aGlzLkluZGVudENTU1Byb3BlcnR5PUZDS0NvbmZpZy5Db250ZW50TGFuZ0RpcmVjdGlvbi5JRXF1YWxzKCdsdHInKT8nbWFyZ2luTGVmdCc6J21hcmdpblJpZ2h0Jzt9O0ZDS0luZGVudENvbW1hbmQuX0luaXRJbmRlbnRNb2RlUGFyYW1ldGVycz1mdW5jdGlvbigpe2lmIChGQ0tDb25maWcuSW5kZW50Q2xhc3NlcyYmRkNLQ29uZmlnLkluZGVudENsYXNzZXMubGVuZ3RoPjApe3RoaXMuX1VzZUluZGVudENsYXNzZXM9dHJ1ZTt0aGlzLl9JbmRlbnRDbGFzc01hcD17fTtmb3IgKHZhciBpPTA7aTxGQ0tDb25maWcuSW5kZW50Q2xhc3Nlcy5sZW5ndGg7aSsrKSB0aGlzLl9JbmRlbnRDbGFzc01hcFtGQ0tDb25maWcuSW5kZW50Q2xhc3Nlc1tpXV09aSsxO3RoaXMuX0NsYXNzTmFtZVJlZ2V4PW5ldyBSZWdFeHAoJyg/Ol58XFxzKykoJytGQ0tDb25maWcuSW5kZW50Q2xhc3Nlcy5qb2luKCd8JykrJykoPz0kfFxccyknKTt9ZWxzZSB0aGlzLl9Vc2VJbmRlbnRDbGFzc2VzPWZhbHNlO307RkNLSW5kZW50Q29tbWFuZC5wcm90b3R5cGU9e0V4ZWN1dGU6ZnVuY3Rpb24oKXtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO3ZhciBBPW5ldyBGQ0tEb21SYW5nZShGQ0suRWRpdG9yV2luZG93KTtBLk1vdmVUb1NlbGVjdGlvbigpO3ZhciBCPUEuQ3JlYXRlQm9va21hcmsoKTt2YXIgQz1GQ0tEb21Ub29scy5HZXRDb21tb25QYXJlbnROb2RlKEEuU3RhcnROb2RlfHxBLlN0YXJ0Q29udGFpbmVyLEEuRW5kTm9kZXx8QS5FbmRDb250YWluZXIsWyd1bCcsJ29sJ10pO2lmIChDKSB0aGlzLl9JbmRlbnRMaXN0KEEsQyk7ZWxzZSB0aGlzLl9JbmRlbnRCbG9jayhBKTtBLk1vdmVUb0Jvb2ttYXJrKEIpO0EuU2VsZWN0KCk7RkNLLkZvY3VzKCk7RkNLLkV2ZW50cy5GaXJlRXZlbnQoJ09uU2VsZWN0aW9uQ2hhbmdlJyk7fSxHZXRTdGF0ZTpmdW5jdGlvbigpe2lmIChGQ0suRWRpdE1vZGUhPTB8fCFGQ0suRWRpdG9yV2luZG93KSByZXR1cm4gLTE7aWYgKEZDS0luZGVudENvbW1hbmQuX1VzZUluZGVudENsYXNzZXM9PXVuZGVmaW5lZCkgRkNLSW5kZW50Q29tbWFuZC5fSW5pdEluZGVudE1vZGVQYXJhbWV0ZXJzKCk7dmFyIEE9RkNLU2VsZWN0aW9uLkdldEJvdW5kYXJ5UGFyZW50RWxlbWVudCh0cnVlKTt2YXIgQj1GQ0tTZWxlY3Rpb24uR2V0Qm91bmRhcnlQYXJlbnRFbGVtZW50KGZhbHNlKTt2YXIgQz1GQ0tEb21Ub29scy5HZXRDb21tb25QYXJlbnROb2RlKEEsQixbJ3VsJywnb2wnXSk7aWYgKEMpe2lmICh0aGlzLk5hbWUuSUVxdWFscygnb3V0ZGVudCcpKSByZXR1cm4gMDt2YXIgRD1GQ0tUb29scy5HZXRFbGVtZW50QXNjZW5zb3IoQSwnbGknKTtpZiAoIUR8fCFELnByZXZpb3VzU2libGluZykgcmV0dXJuIC0xO3JldHVybiAwO307aWYgKCFGQ0tJbmRlbnRDb21tYW5kLl9Vc2VJbmRlbnRDbGFzc2VzJiZ0aGlzLk5hbWUuSUVxdWFscygnaW5kZW50JykpIHJldHVybiAwO3ZhciBFPW5ldyBGQ0tFbGVtZW50UGF0aChBKTt2YXIgRj1FLkJsb2NrfHxFLkJsb2NrTGltaXQ7aWYgKCFGKSByZXR1cm4gLTE7aWYgKEZDS0luZGVudENvbW1hbmQuX1VzZUluZGVudENsYXNzZXMpe3ZhciBHPUYuY2xhc3NOYW1lLm1hdGNoKEZDS0luZGVudENvbW1hbmQuX0NsYXNzTmFtZVJlZ2V4KTt2YXIgSD0wO2lmIChHIT1udWxsKXtHPUdbMV07SD1GQ0tJbmRlbnRDb21tYW5kLl9JbmRlbnRDbGFzc01hcFtHXTt9O2lmICgodGhpcy5OYW1lPT0nb3V0ZGVudCcmJkg9PTApfHwodGhpcy5OYW1lPT0naW5kZW50JyYmSD09RkNLQ29uZmlnLkluZGVudENsYXNzZXMubGVuZ3RoKSkgcmV0dXJuIC0xO3JldHVybiAwO31lbHNle3ZhciBJPXBhcnNlSW50KEYuc3R5bGVbdGhpcy5JbmRlbnRDU1NQcm9wZXJ0eV0sMTApO2lmIChpc05hTihJKSkgST0wO2lmIChJPD0wKSByZXR1cm4gLTE7cmV0dXJuIDA7fX0sX0luZGVudEJsb2NrOmZ1bmN0aW9uKEEpe3ZhciBCPW5ldyBGQ0tEb21SYW5nZUl0ZXJhdG9yKEEpO0IuRW5mb3JjZVJlYWxCbG9ja3M9dHJ1ZTtBLkV4cGFuZCgnYmxvY2tfY29udGVudHMnKTt2YXIgQz1GQ0tEb21Ub29scy5HZXRDb21tb25QYXJlbnRzKEEuU3RhcnRDb250YWluZXIsQS5FbmRDb250YWluZXIpO3ZhciBEPUNbQy5sZW5ndGgtMV07dmFyIEU7d2hpbGUgKChFPUIuR2V0TmV4dFBhcmFncmFwaCgpKSl7aWYgKCEoRT09RHx8RS5wYXJlbnROb2RlPT1EKSkgY29udGludWU7aWYgKEZDS0luZGVudENvbW1hbmQuX1VzZUluZGVudENsYXNzZXMpe3ZhciBGPUUuY2xhc3NOYW1lLm1hdGNoKEZDS0luZGVudENvbW1hbmQuX0NsYXNzTmFtZVJlZ2V4KTt2YXIgRz0wO2lmIChGIT1udWxsKXtGPUZbMV07Rz1GQ0tJbmRlbnRDb21tYW5kLl9JbmRlbnRDbGFzc01hcFtGXTt9O2lmICh0aGlzLk5hbWUuSUVxdWFscygnb3V0ZGVudCcpKSBHLS07ZWxzZSBpZiAodGhpcy5OYW1lLklFcXVhbHMoJ2luZGVudCcpKSBHKys7Rz1NYXRoLm1pbihHLEZDS0NvbmZpZy5JbmRlbnRDbGFzc2VzLmxlbmd0aCk7Rz1NYXRoLm1heChHLDApO3ZhciBIPUUuY2xhc3NOYW1lLnJlcGxhY2UoRkNLSW5kZW50Q29tbWFuZC5fQ2xhc3NOYW1lUmVnZXgsJycpO2lmIChHPDEpIEUuY2xhc3NOYW1lPUg7ZWxzZSBFLmNsYXNzTmFtZT0oSC5sZW5ndGg+MD9IKycgJzonJykrRkNLQ29uZmlnLkluZGVudENsYXNzZXNbRy0xXTt9ZWxzZXt2YXIgST1wYXJzZUludChFLnN0eWxlW3RoaXMuSW5kZW50Q1NTUHJvcGVydHldLDEwKTtpZiAoaXNOYU4oSSkpIEk9MDtJKz10aGlzLk9mZnNldDtJPU1hdGgubWF4KEksMCk7ST1NYXRoLmNlaWwoSS90aGlzLk9mZnNldCkqdGhpcy5PZmZzZXQ7RS5zdHlsZVt0aGlzLkluZGVudENTU1Byb3BlcnR5XT1JP0krRkNLQ29uZmlnLkluZGVudFVuaXQ6Jyc7aWYgKEUuZ2V0QXR0cmlidXRlKCdzdHlsZScpPT0nJykgRS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJyk7fX19LF9JbmRlbnRMaXN0OmZ1bmN0aW9uKEEsQil7dmFyIEM9QS5TdGFydENvbnRhaW5lcjt2YXIgRD1BLkVuZENvbnRhaW5lcjt3aGlsZSAoQyYmQy5wYXJlbnROb2RlIT1CKSBDPUMucGFyZW50Tm9kZTt3aGlsZSAoRCYmRC5wYXJlbnROb2RlIT1CKSBEPUQucGFyZW50Tm9kZTtpZiAoIUN8fCFEKSByZXR1cm47dmFyIEU9Qzt2YXIgRj1bXTt2YXIgRz1mYWxzZTt3aGlsZSAoRz09ZmFsc2Upe2lmIChFPT1EKSBHPXRydWU7Ri5wdXNoKEUpO0U9RS5uZXh0U2libGluZzt9O2lmIChGLmxlbmd0aDwxKSByZXR1cm47dmFyIEg9RkNLRG9tVG9vbHMuR2V0UGFyZW50cyhCKTtmb3IgKHZhciBpPTA7aTxILmxlbmd0aDtpKyspe2lmIChIW2ldLm5vZGVOYW1lLklFcXVhbHMoWyd1bCcsJ29sJ10pKXtCPUhbaV07YnJlYWs7fX07dmFyIEk9dGhpcy5OYW1lLklFcXVhbHMoJ2luZGVudCcpPzE6LTE7dmFyIEo9RlswXTt2YXIgSz1GW0YubGVuZ3RoLTFdO3ZhciBMPXt9O3ZhciBNPUZDS0RvbVRvb2xzLkxpc3RUb0FycmF5KEIsTCk7dmFyIE49TVtLLl9GQ0tfTGlzdEFycmF5X0luZGV4XS5pbmRlbnQ7Zm9yICh2YXIgaT1KLl9GQ0tfTGlzdEFycmF5X0luZGV4O2k8PUsuX0ZDS19MaXN0QXJyYXlfSW5kZXg7aSsrKSBNW2ldLmluZGVudCs9STtmb3IgKHZhciBpPUsuX0ZDS19MaXN0QXJyYXlfSW5kZXgrMTtpPE0ubGVuZ3RoJiZNW2ldLmluZGVudD5OO2krKykgTVtpXS5pbmRlbnQrPUk7dmFyIE89RkNLRG9tVG9vbHMuQXJyYXlUb0xpc3QoTSk7aWYgKE8pIEIucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoTy5saXN0Tm9kZSxCKTtGQ0tEb21Ub29scy5DbGVhckFsbE1hcmtlcnMoTCk7fX07CnZhciBGQ0tCbG9ja1F1b3RlQ29tbWFuZD1mdW5jdGlvbigpe307RkNLQmxvY2tRdW90ZUNvbW1hbmQucHJvdG90eXBlPXtFeGVjdXRlOmZ1bmN0aW9uKCl7RkNLVW5kby5TYXZlVW5kb1N0ZXAoKTt2YXIgQT10aGlzLkdldFN0YXRlKCk7dmFyIEI9bmV3IEZDS0RvbVJhbmdlKEZDSy5FZGl0b3JXaW5kb3cpO0IuTW92ZVRvU2VsZWN0aW9uKCk7dmFyIEM9Qi5DcmVhdGVCb29rbWFyaygpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt2YXIgRD1CLkdldEJvb2ttYXJrTm9kZShDLHRydWUpO3ZhciBFPUIuR2V0Qm9va21hcmtOb2RlKEMsZmFsc2UpO3ZhciBGO2lmIChEJiZELnBhcmVudE5vZGUubm9kZU5hbWUuSUVxdWFscygnYmxvY2txdW90ZScpJiYhRC5wcmV2aW91c1NpYmxpbmcpe0Y9RDt3aGlsZSAoKEY9Ri5uZXh0U2libGluZykpe2lmIChGQ0tMaXN0c0xpYi5CbG9ja0VsZW1lbnRzW0Yubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0pIEZDS0RvbVRvb2xzLk1vdmVOb2RlKEQsRix0cnVlKTt9fTtpZiAoRSYmRS5wYXJlbnROb2RlLm5vZGVOYW1lLklFcXVhbHMoJ2Jsb2NrcXVvdGUnKSYmIUUucHJldmlvdXNTaWJsaW5nKXtGPUU7d2hpbGUgKChGPUYubmV4dFNpYmxpbmcpKXtpZiAoRkNLTGlzdHNMaWIuQmxvY2tFbGVtZW50c1tGLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKXtpZiAoRi5maXJzdENoaWxkPT1EKSBGQ0tEb21Ub29scy5JbnNlcnRBZnRlck5vZGUoRCxFKTtlbHNlIEZDS0RvbVRvb2xzLk1vdmVOb2RlKEUsRix0cnVlKTt9fX19O3ZhciBHPW5ldyBGQ0tEb21SYW5nZUl0ZXJhdG9yKEIpO3ZhciBIO2lmIChBPT0wKXt2YXIgST1bXTt3aGlsZSAoKEg9Ry5HZXROZXh0UGFyYWdyYXBoKCkpKSBJLnB1c2goSCk7aWYgKEkubGVuZ3RoPDEpe3BhcmE9Qi5XaW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChGQ0tDb25maWcuRW50ZXJNb2RlLklFcXVhbHMoJ3AnKT8ncCc6J2RpdicpO0IuSW5zZXJ0Tm9kZShwYXJhKTtwYXJhLmFwcGVuZENoaWxkKEIuV2luZG93LmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdcdWZlZmYnKSk7Qi5Nb3ZlVG9Cb29rbWFyayhDKTtCLk1vdmVUb05vZGVDb250ZW50cyhwYXJhKTtCLkNvbGxhcHNlKHRydWUpO0M9Qi5DcmVhdGVCb29rbWFyaygpO0kucHVzaChwYXJhKTt9O3ZhciBKPUlbMF0ucGFyZW50Tm9kZTt2YXIgSz1bXTtmb3IgKHZhciBpPTA7aTxJLmxlbmd0aDtpKyspe0g9SVtpXTtKPUZDS0RvbVRvb2xzLkdldENvbW1vblBhcmVudHMoSC5wYXJlbnROb2RlLEopLnBvcCgpO313aGlsZSAoSi5ub2RlTmFtZS5JRXF1YWxzKCd0YWJsZScsJ3Rib2R5JywndHInLCdvbCcsJ3VsJykpIEo9Si5wYXJlbnROb2RlO3ZhciBMPW51bGw7d2hpbGUgKEkubGVuZ3RoPjApe0g9SS5zaGlmdCgpO3doaWxlIChILnBhcmVudE5vZGUhPUopIEg9SC5wYXJlbnROb2RlO2lmIChIIT1MKSBLLnB1c2goSCk7TD1IO313aGlsZSAoSy5sZW5ndGg+MCl7SD1LLnNoaWZ0KCk7aWYgKEgubm9kZU5hbWUuSUVxdWFscygnYmxvY2txdW90ZScpKXt2YXIgTT1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoSCkuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3doaWxlIChILmZpcnN0Q2hpbGQpe00uYXBwZW5kQ2hpbGQoSC5yZW1vdmVDaGlsZChILmZpcnN0Q2hpbGQpKTtJLnB1c2goTS5sYXN0Q2hpbGQpO307SC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChNLEgpO31lbHNlIEkucHVzaChIKTt9O3ZhciBOPUIuV2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Jsb2NrcXVvdGUnKTtKLmluc2VydEJlZm9yZShOLElbMF0pO3doaWxlIChJLmxlbmd0aD4wKXtIPUkuc2hpZnQoKTtOLmFwcGVuZENoaWxkKEgpO319ZWxzZSBpZiAoQT09MSl7dmFyIE89W107dmFyIFA9e307d2hpbGUgKChIPUcuR2V0TmV4dFBhcmFncmFwaCgpKSl7dmFyIFE9bnVsbDt2YXIgUj1udWxsO3doaWxlIChILnBhcmVudE5vZGUpe2lmIChILnBhcmVudE5vZGUubm9kZU5hbWUuSUVxdWFscygnYmxvY2txdW90ZScpKXtRPUgucGFyZW50Tm9kZTtSPUg7YnJlYWs7fTtIPUgucGFyZW50Tm9kZTt9O2lmIChRJiZSJiYhUi5fZmNrYmxvY2txdW90ZW1vdmVvdXQpe08ucHVzaChSKTtGQ0tEb21Ub29scy5TZXRFbGVtZW50TWFya2VyKFAsUiwnX2Zja2Jsb2NrcXVvdGVtb3Zlb3V0Jyx0cnVlKTt9fTtGQ0tEb21Ub29scy5DbGVhckFsbE1hcmtlcnMoUCk7dmFyIFM9W107dmFyIFQ9W10sUD17fTt2YXIgVT1mdW5jdGlvbihOKXtmb3IgKHZhciBpPTA7aTxOLmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7aWYgKEZDS0xpc3RzTGliLkJsb2NrRWxlbWVudHNbTi5jaGlsZE5vZGVzW2ldLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldKSByZXR1cm4gZmFsc2U7fTtyZXR1cm4gdHJ1ZTt9O3doaWxlIChPLmxlbmd0aD4wKXt2YXIgVz1PLnNoaWZ0KCk7dmFyIE49Vy5wYXJlbnROb2RlO2lmIChXPT1XLnBhcmVudE5vZGUuZmlyc3RDaGlsZCkgTi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShOLnJlbW92ZUNoaWxkKFcpLE4pO2Vsc2UgaWYgKFc9PVcucGFyZW50Tm9kZS5sYXN0Q2hpbGQpIE4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoTi5yZW1vdmVDaGlsZChXKSxOLm5leHRTaWJsaW5nKTtlbHNlIEZDS0RvbVRvb2xzLkJyZWFrUGFyZW50KFcsVy5wYXJlbnROb2RlLEIpO2lmICghTi5fZmNrYnFwcm9jZXNzZWQpe1QucHVzaChOKTtGQ0tEb21Ub29scy5TZXRFbGVtZW50TWFya2VyKFAsTiwnX2Zja2JxcHJvY2Vzc2VkJyx0cnVlKTt9O1MucHVzaChXKTt9O2ZvciAodmFyIGk9VC5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIE49VFtpXTtpZiAoVShOKSkgRkNLRG9tVG9vbHMuUmVtb3ZlTm9kZShOKTt9O0ZDS0RvbVRvb2xzLkNsZWFyQWxsTWFya2VycyhQKTtpZiAoRkNLQ29uZmlnLkVudGVyTW9kZS5JRXF1YWxzKCdicicpKXt3aGlsZSAoUy5sZW5ndGgpe3ZhciBXPVMuc2hpZnQoKTt2YXIgYT10cnVlO2lmIChXLm5vZGVOYW1lLklFcXVhbHMoJ2RpdicpKXt2YXIgTT1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoVykuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3ZhciBjPWEmJlcucHJldmlvdXNTaWJsaW5nJiYhRkNLTGlzdHNMaWIuQmxvY2tCb3VuZGFyaWVzW1cucHJldmlvdXNTaWJsaW5nLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldO2lmIChhJiZjKSBNLmFwcGVuZENoaWxkKEZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChXKS5jcmVhdGVFbGVtZW50KCdicicpKTt2YXIgZD1XLm5leHRTaWJsaW5nJiYhRkNLTGlzdHNMaWIuQmxvY2tCb3VuZGFyaWVzW1cubmV4dFNpYmxpbmcubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07d2hpbGUgKFcuZmlyc3RDaGlsZCkgTS5hcHBlbmRDaGlsZChXLnJlbW92ZUNoaWxkKFcuZmlyc3RDaGlsZCkpO2lmIChkKSBNLmFwcGVuZENoaWxkKEZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChXKS5jcmVhdGVFbGVtZW50KCdicicpKTtXLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKE0sVyk7YT1mYWxzZTt9fX19O0IuTW92ZVRvQm9va21hcmsoQyk7Qi5TZWxlY3QoKTtGQ0suRm9jdXMoKTtGQ0suRXZlbnRzLkZpcmVFdmVudCgnT25TZWxlY3Rpb25DaGFuZ2UnKTt9LEdldFN0YXRlOmZ1bmN0aW9uKCl7aWYgKEZDSy5FZGl0TW9kZSE9MHx8IUZDSy5FZGl0b3JXaW5kb3cpIHJldHVybiAtMTt2YXIgQT1uZXcgRkNLRWxlbWVudFBhdGgoRkNLU2VsZWN0aW9uLkdldEJvdW5kYXJ5UGFyZW50RWxlbWVudCh0cnVlKSk7dmFyIEI9QS5CbG9ja3x8QS5CbG9ja0xpbWl0O2lmICghQnx8Qi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT0nYm9keScpIHJldHVybiAwO2ZvciAodmFyIGk9MDtpPEEuRWxlbWVudHMubGVuZ3RoO2krKyl7aWYgKEEuRWxlbWVudHNbaV0ubm9kZU5hbWUuSUVxdWFscygnYmxvY2txdW90ZScpKSByZXR1cm4gMTt9O3JldHVybiAwO319Owp2YXIgRkNLQ29yZVN0eWxlQ29tbWFuZD1mdW5jdGlvbihBKXt0aGlzLk5hbWU9J0NvcmVTdHlsZSc7dGhpcy5TdHlsZU5hbWU9J19GQ0tfJytBO3RoaXMuSXNBY3RpdmU9ZmFsc2U7RkNLU3R5bGVzLkF0dGFjaFN0eWxlU3RhdGVDaGFuZ2UodGhpcy5TdHlsZU5hbWUsdGhpcy5fT25TdHlsZVN0YXRlQ2hhbmdlLHRoaXMpO307RkNLQ29yZVN0eWxlQ29tbWFuZC5wcm90b3R5cGU9e0V4ZWN1dGU6ZnVuY3Rpb24oKXtGQ0tVbmRvLlNhdmVVbmRvU3RlcCgpO2lmICh0aGlzLklzQWN0aXZlKSBGQ0tTdHlsZXMuUmVtb3ZlU3R5bGUodGhpcy5TdHlsZU5hbWUpO2Vsc2UgRkNLU3R5bGVzLkFwcGx5U3R5bGUodGhpcy5TdHlsZU5hbWUpO0ZDSy5Gb2N1cygpO0ZDSy5FdmVudHMuRmlyZUV2ZW50KCdPblNlbGVjdGlvbkNoYW5nZScpO30sR2V0U3RhdGU6ZnVuY3Rpb24oKXtpZiAoRkNLLkVkaXRNb2RlIT0wKSByZXR1cm4gLTE7cmV0dXJuIHRoaXMuSXNBY3RpdmU/MTowO30sX09uU3R5bGVTdGF0ZUNoYW5nZTpmdW5jdGlvbihBLEIpe3RoaXMuSXNBY3RpdmU9Qjt9fTsKdmFyIEZDS1JlbW92ZUZvcm1hdENvbW1hbmQ9ZnVuY3Rpb24oKXt0aGlzLk5hbWU9J1JlbW92ZUZvcm1hdCc7fTtGQ0tSZW1vdmVGb3JtYXRDb21tYW5kLnByb3RvdHlwZT17RXhlY3V0ZTpmdW5jdGlvbigpe0ZDS1N0eWxlcy5SZW1vdmVBbGwoKTtGQ0suRm9jdXMoKTtGQ0suRXZlbnRzLkZpcmVFdmVudCgnT25TZWxlY3Rpb25DaGFuZ2UnKTt9LEdldFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIEZDSy5FZGl0b3JXaW5kb3c/MDotMTt9fTsKdmFyIEZDS0NvbW1hbmRzPUZDSy5Db21tYW5kcz17fTtGQ0tDb21tYW5kcy5Mb2FkZWRDb21tYW5kcz17fTtGQ0tDb21tYW5kcy5SZWdpc3RlckNvbW1hbmQ9ZnVuY3Rpb24oQSxCKXt0aGlzLkxvYWRlZENvbW1hbmRzW0FdPUI7fTtGQ0tDb21tYW5kcy5HZXRDb21tYW5kPWZ1bmN0aW9uKEEpe3ZhciBCPUZDS0NvbW1hbmRzLkxvYWRlZENvbW1hbmRzW0FdO2lmIChCKSByZXR1cm4gQjtzd2l0Y2ggKEEpe2Nhc2UgJ0JvbGQnOmNhc2UgJ0l0YWxpYyc6Y2FzZSAnVW5kZXJsaW5lJzpjYXNlICdTdHJpa2VUaHJvdWdoJzpjYXNlICdTdWJzY3JpcHQnOmNhc2UgJ1N1cGVyc2NyaXB0JzpCPW5ldyBGQ0tDb3JlU3R5bGVDb21tYW5kKEEpO2JyZWFrO2Nhc2UgJ1JlbW92ZUZvcm1hdCc6Qj1uZXcgRkNLUmVtb3ZlRm9ybWF0Q29tbWFuZCgpO2JyZWFrO2Nhc2UgJ0RvY1Byb3BzJzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdEb2NQcm9wcycsRkNLTGFuZy5Eb2NQcm9wcywnZGlhbG9nL2Zja19kb2Nwcm9wcy5odG1sJyw0MDAsMzgwLEZDS0NvbW1hbmRzLkdldEZ1bGxQYWdlU3RhdGUpO2JyZWFrO2Nhc2UgJ1RlbXBsYXRlcyc6Qj1uZXcgRkNLRGlhbG9nQ29tbWFuZCgnVGVtcGxhdGVzJyxGQ0tMYW5nLkRsZ1RlbXBsYXRlc1RpdGxlLCdkaWFsb2cvZmNrX3RlbXBsYXRlLmh0bWwnLDM4MCw0NTApO2JyZWFrO2Nhc2UgJ0xpbmsnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ0xpbmsnLEZDS0xhbmcuRGxnTG5rV2luZG93VGl0bGUsJ2RpYWxvZy9mY2tfbGluay5odG1sJyw0MDAsMzAwKTticmVhaztjYXNlICdVbmxpbmsnOkI9bmV3IEZDS1VubGlua0NvbW1hbmQoKTticmVhaztjYXNlICdWaXNpdExpbmsnOkI9bmV3IEZDS1Zpc2l0TGlua0NvbW1hbmQoKTticmVhaztjYXNlICdBbmNob3InOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ0FuY2hvcicsRkNLTGFuZy5EbGdBbmNob3JUaXRsZSwnZGlhbG9nL2Zja19hbmNob3IuaHRtbCcsMzcwLDE2MCk7YnJlYWs7Y2FzZSAnQW5jaG9yRGVsZXRlJzpCPW5ldyBGQ0tBbmNob3JEZWxldGVDb21tYW5kKCk7YnJlYWs7Y2FzZSAnQnVsbGV0ZWRMaXN0JzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdCdWxsZXRlZExpc3QnLEZDS0xhbmcuQnVsbGV0ZWRMaXN0UHJvcCwnZGlhbG9nL2Zja19saXN0cHJvcC5odG1sP1VMJywzNzAsMTYwKTticmVhaztjYXNlICdOdW1iZXJlZExpc3QnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ051bWJlcmVkTGlzdCcsRkNLTGFuZy5OdW1iZXJlZExpc3RQcm9wLCdkaWFsb2cvZmNrX2xpc3Rwcm9wLmh0bWw/T0wnLDM3MCwxNjApO2JyZWFrO2Nhc2UgJ0Fib3V0JzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdBYm91dCcsRkNLTGFuZy5BYm91dCwnZGlhbG9nL2Zja19hYm91dC5odG1sJyw0MjAsMzMwLGZ1bmN0aW9uKCl7IHJldHVybiAwO30pO2JyZWFrO2Nhc2UgJ0ZpbmQnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ0ZpbmQnLEZDS0xhbmcuRGxnRmluZEFuZFJlcGxhY2VUaXRsZSwnZGlhbG9nL2Zja19yZXBsYWNlLmh0bWwnLDM0MCwyMzAsbnVsbCxudWxsLCdGaW5kJyk7YnJlYWs7Y2FzZSAnUmVwbGFjZSc6Qj1uZXcgRkNLRGlhbG9nQ29tbWFuZCgnUmVwbGFjZScsRkNLTGFuZy5EbGdGaW5kQW5kUmVwbGFjZVRpdGxlLCdkaWFsb2cvZmNrX3JlcGxhY2UuaHRtbCcsMzQwLDIzMCxudWxsLG51bGwsJ1JlcGxhY2UnKTticmVhaztjYXNlICdJbWFnZSc6Qj1uZXcgRkNLRGlhbG9nQ29tbWFuZCgnSW1hZ2UnLEZDS0xhbmcuRGxnSW1nVGl0bGUsJ2RpYWxvZy9mY2tfaW1hZ2UuaHRtbCcsNDUwLDM5MCk7YnJlYWs7Y2FzZSAnRmxhc2gnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ0ZsYXNoJyxGQ0tMYW5nLkRsZ0ZsYXNoVGl0bGUsJ2RpYWxvZy9mY2tfZmxhc2guaHRtbCcsNDUwLDM5MCk7YnJlYWs7Y2FzZSAnU3BlY2lhbENoYXInOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ1NwZWNpYWxDaGFyJyxGQ0tMYW5nLkRsZ1NwZWNpYWxDaGFyVGl0bGUsJ2RpYWxvZy9mY2tfc3BlY2lhbGNoYXIuaHRtbCcsNDAwLDI5MCk7YnJlYWs7Y2FzZSAnU21pbGV5JzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdTbWlsZXknLEZDS0xhbmcuRGxnU21pbGV5VGl0bGUsJ2RpYWxvZy9mY2tfc21pbGV5Lmh0bWwnLEZDS0NvbmZpZy5TbWlsZXlXaW5kb3dXaWR0aCxGQ0tDb25maWcuU21pbGV5V2luZG93SGVpZ2h0KTticmVhaztjYXNlICdUYWJsZSc6Qj1uZXcgRkNLRGlhbG9nQ29tbWFuZCgnVGFibGUnLEZDS0xhbmcuRGxnVGFibGVUaXRsZSwnZGlhbG9nL2Zja190YWJsZS5odG1sJyw0ODAsMjUwKTticmVhaztjYXNlICdUYWJsZVByb3AnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ1RhYmxlJyxGQ0tMYW5nLkRsZ1RhYmxlVGl0bGUsJ2RpYWxvZy9mY2tfdGFibGUuaHRtbD9QYXJlbnQnLDQ4MCwyNTApO2JyZWFrO2Nhc2UgJ1RhYmxlQ2VsbFByb3AnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ1RhYmxlQ2VsbCcsRkNLTGFuZy5EbGdDZWxsVGl0bGUsJ2RpYWxvZy9mY2tfdGFibGVjZWxsLmh0bWwnLDU1MCwyNDApO2JyZWFrO2Nhc2UgJ1N0eWxlJzpCPW5ldyBGQ0tTdHlsZUNvbW1hbmQoKTticmVhaztjYXNlICdGb250TmFtZSc6Qj1uZXcgRkNLRm9udE5hbWVDb21tYW5kKCk7YnJlYWs7Y2FzZSAnRm9udFNpemUnOkI9bmV3IEZDS0ZvbnRTaXplQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ0ZvbnRGb3JtYXQnOkI9bmV3IEZDS0Zvcm1hdEJsb2NrQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ1NvdXJjZSc6Qj1uZXcgRkNLU291cmNlQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ1ByZXZpZXcnOkI9bmV3IEZDS1ByZXZpZXdDb21tYW5kKCk7YnJlYWs7Y2FzZSAnU2F2ZSc6Qj1uZXcgRkNLU2F2ZUNvbW1hbmQoKTticmVhaztjYXNlICdOZXdQYWdlJzpCPW5ldyBGQ0tOZXdQYWdlQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ1BhZ2VCcmVhayc6Qj1uZXcgRkNLUGFnZUJyZWFrQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ1J1bGUnOkI9bmV3IEZDS1J1bGVDb21tYW5kKCk7YnJlYWs7Y2FzZSAnTmJzcCc6Qj1uZXcgRkNLTmJzcCgpO2JyZWFrO2Nhc2UgJ1RleHRDb2xvcic6Qj1uZXcgRkNLVGV4dENvbG9yQ29tbWFuZCgnRm9yZUNvbG9yJyk7YnJlYWs7Y2FzZSAnQkdDb2xvcic6Qj1uZXcgRkNLVGV4dENvbG9yQ29tbWFuZCgnQmFja0NvbG9yJyk7YnJlYWs7Y2FzZSAnUGFzdGUnOkI9bmV3IEZDS1Bhc3RlQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ1Bhc3RlVGV4dCc6Qj1uZXcgRkNLUGFzdGVQbGFpblRleHRDb21tYW5kKCk7YnJlYWs7Y2FzZSAnUGFzdGVXb3JkJzpCPW5ldyBGQ0tQYXN0ZVdvcmRDb21tYW5kKCk7YnJlYWs7Y2FzZSAnSnVzdGlmeUxlZnQnOkI9bmV3IEZDS0p1c3RpZnlDb21tYW5kKCdsZWZ0Jyk7YnJlYWs7Y2FzZSAnSnVzdGlmeUNlbnRlcic6Qj1uZXcgRkNLSnVzdGlmeUNvbW1hbmQoJ2NlbnRlcicpO2JyZWFrO2Nhc2UgJ0p1c3RpZnlSaWdodCc6Qj1uZXcgRkNLSnVzdGlmeUNvbW1hbmQoJ3JpZ2h0Jyk7YnJlYWs7Y2FzZSAnSnVzdGlmeUZ1bGwnOkI9bmV3IEZDS0p1c3RpZnlDb21tYW5kKCdqdXN0aWZ5Jyk7YnJlYWs7Y2FzZSAnSW5kZW50JzpCPW5ldyBGQ0tJbmRlbnRDb21tYW5kKCdpbmRlbnQnLEZDS0NvbmZpZy5JbmRlbnRMZW5ndGgpO2JyZWFrO2Nhc2UgJ091dGRlbnQnOkI9bmV3IEZDS0luZGVudENvbW1hbmQoJ291dGRlbnQnLEZDS0NvbmZpZy5JbmRlbnRMZW5ndGgqLTEpO2JyZWFrO2Nhc2UgJ0Jsb2NrcXVvdGUnOkI9bmV3IEZDS0Jsb2NrUXVvdGVDb21tYW5kKCk7YnJlYWs7Y2FzZSAnQ3JlYXRlRGl2JzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdDcmVhdGVEaXYnLEZDS0xhbmcuQ3JlYXRlRGl2LCdkaWFsb2cvZmNrX2Rpdi5odG1sJywzODAsMjEwLG51bGwsbnVsbCx0cnVlKTticmVhaztjYXNlICdFZGl0RGl2JzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdFZGl0RGl2JyxGQ0tMYW5nLkVkaXREaXYsJ2RpYWxvZy9mY2tfZGl2Lmh0bWwnLDM4MCwyMTAsbnVsbCxudWxsLGZhbHNlKTticmVhaztjYXNlICdEZWxldGVEaXYnOkI9bmV3IEZDS0RlbGV0ZURpdkNvbW1hbmQoKTticmVhaztjYXNlICdUYWJsZUluc2VydFJvd0FmdGVyJzpCPW5ldyBGQ0tUYWJsZUNvbW1hbmQoJ1RhYmxlSW5zZXJ0Um93QWZ0ZXInKTticmVhaztjYXNlICdUYWJsZUluc2VydFJvd0JlZm9yZSc6Qj1uZXcgRkNLVGFibGVDb21tYW5kKCdUYWJsZUluc2VydFJvd0JlZm9yZScpO2JyZWFrO2Nhc2UgJ1RhYmxlRGVsZXRlUm93cyc6Qj1uZXcgRkNLVGFibGVDb21tYW5kKCdUYWJsZURlbGV0ZVJvd3MnKTticmVhaztjYXNlICdUYWJsZUluc2VydENvbHVtbkFmdGVyJzpCPW5ldyBGQ0tUYWJsZUNvbW1hbmQoJ1RhYmxlSW5zZXJ0Q29sdW1uQWZ0ZXInKTticmVhaztjYXNlICdUYWJsZUluc2VydENvbHVtbkJlZm9yZSc6Qj1uZXcgRkNLVGFibGVDb21tYW5kKCdUYWJsZUluc2VydENvbHVtbkJlZm9yZScpO2JyZWFrO2Nhc2UgJ1RhYmxlRGVsZXRlQ29sdW1ucyc6Qj1uZXcgRkNLVGFibGVDb21tYW5kKCdUYWJsZURlbGV0ZUNvbHVtbnMnKTticmVhaztjYXNlICdUYWJsZUluc2VydENlbGxBZnRlcic6Qj1uZXcgRkNLVGFibGVDb21tYW5kKCdUYWJsZUluc2VydENlbGxBZnRlcicpO2JyZWFrO2Nhc2UgJ1RhYmxlSW5zZXJ0Q2VsbEJlZm9yZSc6Qj1uZXcgRkNLVGFibGVDb21tYW5kKCdUYWJsZUluc2VydENlbGxCZWZvcmUnKTticmVhaztjYXNlICdUYWJsZURlbGV0ZUNlbGxzJzpCPW5ldyBGQ0tUYWJsZUNvbW1hbmQoJ1RhYmxlRGVsZXRlQ2VsbHMnKTticmVhaztjYXNlICdUYWJsZU1lcmdlQ2VsbHMnOkI9bmV3IEZDS1RhYmxlQ29tbWFuZCgnVGFibGVNZXJnZUNlbGxzJyk7YnJlYWs7Y2FzZSAnVGFibGVNZXJnZVJpZ2h0JzpCPW5ldyBGQ0tUYWJsZUNvbW1hbmQoJ1RhYmxlTWVyZ2VSaWdodCcpO2JyZWFrO2Nhc2UgJ1RhYmxlTWVyZ2VEb3duJzpCPW5ldyBGQ0tUYWJsZUNvbW1hbmQoJ1RhYmxlTWVyZ2VEb3duJyk7YnJlYWs7Y2FzZSAnVGFibGVIb3Jpem9udGFsU3BsaXRDZWxsJzpCPW5ldyBGQ0tUYWJsZUNvbW1hbmQoJ1RhYmxlSG9yaXpvbnRhbFNwbGl0Q2VsbCcpO2JyZWFrO2Nhc2UgJ1RhYmxlVmVydGljYWxTcGxpdENlbGwnOkI9bmV3IEZDS1RhYmxlQ29tbWFuZCgnVGFibGVWZXJ0aWNhbFNwbGl0Q2VsbCcpO2JyZWFrO2Nhc2UgJ1RhYmxlRGVsZXRlJzpCPW5ldyBGQ0tUYWJsZUNvbW1hbmQoJ1RhYmxlRGVsZXRlJyk7YnJlYWs7Y2FzZSAnRm9ybSc6Qj1uZXcgRkNLRGlhbG9nQ29tbWFuZCgnRm9ybScsRkNLTGFuZy5Gb3JtLCdkaWFsb2cvZmNrX2Zvcm0uaHRtbCcsMzgwLDIxMCk7YnJlYWs7Y2FzZSAnQ2hlY2tib3gnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ0NoZWNrYm94JyxGQ0tMYW5nLkNoZWNrYm94LCdkaWFsb2cvZmNrX2NoZWNrYm94Lmh0bWwnLDM4MCwyMDApO2JyZWFrO2Nhc2UgJ1JhZGlvJzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdSYWRpbycsRkNLTGFuZy5SYWRpb0J1dHRvbiwnZGlhbG9nL2Zja19yYWRpb2J1dHRvbi5odG1sJywzODAsMjAwKTticmVhaztjYXNlICdUZXh0RmllbGQnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ1RleHRGaWVsZCcsRkNLTGFuZy5UZXh0RmllbGQsJ2RpYWxvZy9mY2tfdGV4dGZpZWxkLmh0bWwnLDM4MCwyMTApO2JyZWFrO2Nhc2UgJ1RleHRhcmVhJzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdUZXh0YXJlYScsRkNLTGFuZy5UZXh0YXJlYSwnZGlhbG9nL2Zja190ZXh0YXJlYS5odG1sJywzODAsMjEwKTticmVhaztjYXNlICdIaWRkZW5GaWVsZCc6Qj1uZXcgRkNLRGlhbG9nQ29tbWFuZCgnSGlkZGVuRmllbGQnLEZDS0xhbmcuSGlkZGVuRmllbGQsJ2RpYWxvZy9mY2tfaGlkZGVuZmllbGQuaHRtbCcsMzgwLDE5MCk7YnJlYWs7Y2FzZSAnQnV0dG9uJzpCPW5ldyBGQ0tEaWFsb2dDb21tYW5kKCdCdXR0b24nLEZDS0xhbmcuQnV0dG9uLCdkaWFsb2cvZmNrX2J1dHRvbi5odG1sJywzODAsMjEwKTticmVhaztjYXNlICdTZWxlY3QnOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ1NlbGVjdCcsRkNLTGFuZy5TZWxlY3Rpb25GaWVsZCwnZGlhbG9nL2Zja19zZWxlY3QuaHRtbCcsNDAwLDM0MCk7YnJlYWs7Y2FzZSAnSW1hZ2VCdXR0b24nOkI9bmV3IEZDS0RpYWxvZ0NvbW1hbmQoJ0ltYWdlQnV0dG9uJyxGQ0tMYW5nLkltYWdlQnV0dG9uLCdkaWFsb2cvZmNrX2ltYWdlLmh0bWw/SW1hZ2VCdXR0b24nLDQ1MCwzOTApO2JyZWFrO2Nhc2UgJ1NwZWxsQ2hlY2snOkI9bmV3IEZDS1NwZWxsQ2hlY2tDb21tYW5kKCk7YnJlYWs7Y2FzZSAnRml0V2luZG93JzpCPW5ldyBGQ0tGaXRXaW5kb3coKTticmVhaztjYXNlICdVbmRvJzpCPW5ldyBGQ0tVbmRvQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ1JlZG8nOkI9bmV3IEZDS1JlZG9Db21tYW5kKCk7YnJlYWs7Y2FzZSAnQ29weSc6Qj1uZXcgRkNLQ3V0Q29weUNvbW1hbmQoZmFsc2UpO2JyZWFrO2Nhc2UgJ0N1dCc6Qj1uZXcgRkNLQ3V0Q29weUNvbW1hbmQodHJ1ZSk7YnJlYWs7Y2FzZSAnU2VsZWN0QWxsJzpCPW5ldyBGQ0tTZWxlY3RBbGxDb21tYW5kKCk7YnJlYWs7Y2FzZSAnSW5zZXJ0T3JkZXJlZExpc3QnOkI9bmV3IEZDS0xpc3RDb21tYW5kKCdpbnNlcnRvcmRlcmVkbGlzdCcsJ29sJyk7YnJlYWs7Y2FzZSAnSW5zZXJ0VW5vcmRlcmVkTGlzdCc6Qj1uZXcgRkNLTGlzdENvbW1hbmQoJ2luc2VydHVub3JkZXJlZGxpc3QnLCd1bCcpO2JyZWFrO2Nhc2UgJ1Nob3dCbG9ja3MnOkI9bmV3IEZDS1Nob3dCbG9ja0NvbW1hbmQoJ1Nob3dCbG9ja3MnLEZDS0NvbmZpZy5TdGFydHVwU2hvd0Jsb2Nrcz8xOjApO2JyZWFrO2Nhc2UgJ1VuZGVmaW5lZCc6Qj1uZXcgRkNLVW5kZWZpbmVkQ29tbWFuZCgpO2JyZWFrO2Nhc2UgJ1NjYXl0JzpCPUZDS1NjYXl0LkNyZWF0ZUNvbW1hbmQoKTticmVhaztjYXNlICdTY2F5dENvbnRleHQnOkI9RkNLU2NheXQuQ3JlYXRlQ29udGV4dENvbW1hbmQoKTticmVhaztkZWZhdWx0OmlmIChGQ0tSZWdleExpYi5OYW1lZENvbW1hbmRzLnRlc3QoQSkpIEI9bmV3IEZDS05hbWVkQ29tbWFuZChBKTtlbHNle2FsZXJ0KEZDS0xhbmcuVW5rbm93bkNvbW1hbmQucmVwbGFjZSgvJTEvZyxBKSk7cmV0dXJuIG51bGw7fX07RkNLQ29tbWFuZHMuTG9hZGVkQ29tbWFuZHNbQV09QjtyZXR1cm4gQjt9O0ZDS0NvbW1hbmRzLkdldEZ1bGxQYWdlU3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gRkNLQ29uZmlnLkZ1bGxQYWdlPzA6LTE7fTtGQ0tDb21tYW5kcy5HZXRCb29sZWFuU3RhdGU9ZnVuY3Rpb24oQSl7cmV0dXJuIEE/LTE6MDt9Owp2YXIgRkNLUGFuZWw9ZnVuY3Rpb24oQSl7dGhpcy5Jc1JUTD0oRkNLTGFuZy5EaXI9PSdydGwnKTt0aGlzLklzQ29udGV4dE1lbnU9ZmFsc2U7dGhpcy5fTG9ja0NvdW50ZXI9MDt0aGlzLl9XaW5kb3c9QXx8d2luZG93O3ZhciBCO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt0aGlzLl9Qb3B1cD10aGlzLl9XaW5kb3cuY3JlYXRlUG9wdXAoKTt2YXIgQz10aGlzLl9XaW5kb3cuZG9jdW1lbnQ7aWYgKEZDS19JU19DVVNUT01fRE9NQUlOJiYhRkNLQnJvd3NlckluZm8uSXNJRTcpe0MuZG9tYWluPUZDS19PUklHSU5BTF9ET01BSU47ZG9jdW1lbnQuZG9tYWluPUZDS19PUklHSU5BTF9ET01BSU47fTtCPXRoaXMuRG9jdW1lbnQ9dGhpcy5fUG9wdXAuZG9jdW1lbnQ7aWYgKEZDS19JU19DVVNUT01fRE9NQUlOKXtCLmRvbWFpbj1GQ0tfUlVOVElNRV9ET01BSU47Qy5kb21haW49RkNLX1JVTlRJTUVfRE9NQUlOO2RvY3VtZW50LmRvbWFpbj1GQ0tfUlVOVElNRV9ET01BSU47fTtGQ0suSUVDbGVhbnVwLkFkZEl0ZW0odGhpcyxGQ0tQYW5lbF9DbGVhbnVwKTt9ZWxzZXt2YXIgRD10aGlzLl9JRnJhbWU9dGhpcy5fV2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lmcmFtZScpO0ZDS1Rvb2xzLlJlc2V0U3R5bGVzKEQpO0Quc3JjPSdqYXZhc2NyaXB0OnZvaWQoMCknO0QuYWxsb3dUcmFuc3BhcmVuY3k9dHJ1ZTtELmZyYW1lQm9yZGVyPScwJztELnNjcm9sbGluZz0nbm8nO0Quc3R5bGUud2lkdGg9RC5zdHlsZS5oZWlnaHQ9JzBweCc7RkNLRG9tVG9vbHMuU2V0RWxlbWVudFN0eWxlcyhELHtwb3NpdGlvbjonYWJzb2x1dGUnLHpJbmRleDpGQ0tDb25maWcuRmxvYXRpbmdQYW5lbHNaSW5kZXh9KTt0aGlzLl9XaW5kb3cuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChEKTt2YXIgRT1ELmNvbnRlbnRXaW5kb3c7Qj10aGlzLkRvY3VtZW50PUUuZG9jdW1lbnQ7dmFyIEY9Jyc7aWYgKEZDS0Jyb3dzZXJJbmZvLklzU2FmYXJpKSBGPSc8YmFzZSBocmVmPSInK3dpbmRvdy5kb2N1bWVudC5sb2NhdGlvbisnIj4nO0Iub3BlbigpO0Iud3JpdGUoJzxodG1sPjxoZWFkPicrRisnPFwvaGVhZD48Ym9keSBzdHlsZT0ibWFyZ2luOjBweDtwYWRkaW5nOjBweDsiPjxcL2JvZHk+PFwvaHRtbD4nKTtCLmNsb3NlKCk7aWYoRkNLQnJvd3NlckluZm8uSXNBSVIpIEZDS0Fkb2JlQUlSLlBhbmVsX0NvbnRydWN0b3IoQix3aW5kb3cuZG9jdW1lbnQubG9jYXRpb24pO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChFLCdmb2N1cycsRkNLUGFuZWxfV2luZG93X09uRm9jdXMsdGhpcyk7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lckV4KEUsJ2JsdXInLEZDS1BhbmVsX1dpbmRvd19PbkJsdXIsdGhpcyk7fTtCLmRpcj1GQ0tMYW5nLkRpcjtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyKEIsJ2NvbnRleHRtZW51JyxGQ0tUb29scy5DYW5jZWxFdmVudCk7dGhpcy5NYWluTm9kZT1CLmJvZHkuYXBwZW5kQ2hpbGQoQi5jcmVhdGVFbGVtZW50KCdESVYnKSk7dGhpcy5NYWluTm9kZS5zdHlsZS5jc3NGbG9hdD10aGlzLklzUlRMPydyaWdodCc6J2xlZnQnO307RkNLUGFuZWwucHJvdG90eXBlLkFwcGVuZFN0eWxlU2hlZXQ9ZnVuY3Rpb24oQSl7RkNLVG9vbHMuQXBwZW5kU3R5bGVTaGVldCh0aGlzLkRvY3VtZW50LEEpO307RkNLUGFuZWwucHJvdG90eXBlLlByZWxvYWQ9ZnVuY3Rpb24oeCx5LEEpe2lmICh0aGlzLl9Qb3B1cCkgdGhpcy5fUG9wdXAuc2hvdyh4LHksMCwwLEEpO307RkNLUGFuZWwucHJvdG90eXBlLlJlc2l6ZUZvclN1YnBhbmVsPWZ1bmN0aW9uKEEsQixDKXtpZiAoIUZDS0Jyb3dzZXJJbmZvLklzSUU3KSByZXR1cm4gZmFsc2U7aWYgKCF0aGlzLl9Qb3B1cC5pc09wZW4pe3RoaXMuU3VicGFuZWw9bnVsbDtyZXR1cm4gZmFsc2U7fTtpZiAoQj09MCYmQz09MCl7aWYgKHRoaXMuU3VicGFuZWwhPT1BKSByZXR1cm4gZmFsc2U7dGhpcy5TdWJwYW5lbD1udWxsO3RoaXMuSW5jcmVhc2VkWD0wO31lbHNle3RoaXMuU3VicGFuZWw9QTtpZiAoKHRoaXMuSW5jcmVhc2VkWD49QikmJih0aGlzLkluY3JlYXNlZFk+PUMpKSByZXR1cm4gZmFsc2U7dGhpcy5JbmNyZWFzZWRYPU1hdGgubWF4KHRoaXMuSW5jcmVhc2VkWCxCKTt0aGlzLkluY3JlYXNlZFk9TWF0aC5tYXgodGhpcy5JbmNyZWFzZWRZLEMpO307dmFyIHg9dGhpcy5TaG93UmVjdC54O3ZhciB3PXRoaXMuSW5jcmVhc2VkWDtpZiAodGhpcy5Jc1JUTCkgeD14LXc7dmFyIEQ9dGhpcy5TaG93UmVjdC53K3c7dmFyIEU9TWF0aC5tYXgodGhpcy5TaG93UmVjdC5oLHRoaXMuSW5jcmVhc2VkWSk7aWYgKHRoaXMuUGFyZW50UGFuZWwpIHRoaXMuUGFyZW50UGFuZWwuUmVzaXplRm9yU3VicGFuZWwodGhpcyxELEUpO3RoaXMuX1BvcHVwLnNob3coeCx0aGlzLlNob3dSZWN0LnksRCxFLHRoaXMuUmVsYXRpdmVFbGVtZW50KTtyZXR1cm4gdGhpcy5Jc1JUTDt9O0ZDS1BhbmVsLnByb3RvdHlwZS5TaG93PWZ1bmN0aW9uKHgseSxBLEIsQyl7dmFyIEQ7dmFyIEU9dGhpcy5NYWluTm9kZTtpZiAodGhpcy5fUG9wdXApe3RoaXMuX1BvcHVwLnNob3coeCx5LDAsMCxBKTtGQ0tEb21Ub29scy5TZXRFbGVtZW50U3R5bGVzKEUse0I6Qj9CKydweCc6JycsQzpDP0MrJ3B4JzonJ30pO0Q9RS5vZmZzZXRXaWR0aDtpZiAoRkNLQnJvd3NlckluZm8uSXNJRTcpe2lmICh0aGlzLlBhcmVudFBhbmVsJiZ0aGlzLlBhcmVudFBhbmVsLlJlc2l6ZUZvclN1YnBhbmVsKHRoaXMsRCxFLm9mZnNldEhlaWdodCkpe0ZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKHRoaXMuU2hvdyx0aGlzLFt4LHksQV0pO3JldHVybjt9fTtpZiAodGhpcy5Jc1JUTCl7aWYgKHRoaXMuSXNDb250ZXh0TWVudSkgeD14LUQrMTtlbHNlIGlmIChBKSB4PSh4Ki0xKStBLm9mZnNldFdpZHRoLUQ7fTtpZiAoRkNLQnJvd3NlckluZm8uSXNJRTcpe3RoaXMuU2hvd1JlY3Q9e3g6eCx5OnksdzpELGg6RS5vZmZzZXRIZWlnaHR9O3RoaXMuSW5jcmVhc2VkWD0wO3RoaXMuSW5jcmVhc2VkWT0wO3RoaXMuUmVsYXRpdmVFbGVtZW50PUE7fTt0aGlzLl9Qb3B1cEFyZ3M9W3gseSxELEUub2Zmc2V0SGVpZ2h0LEFdO3RoaXMuX1BvcHVwLnNob3coeCx5LEQsRS5vZmZzZXRIZWlnaHQsQSk7aWYgKHRoaXMuT25IaWRlKXtpZiAodGhpcy5fVGltZXIpIENoZWNrUG9wdXBPbkhpZGUuY2FsbCh0aGlzLHRydWUpO3RoaXMuX1RpbWVyPUZDS1Rvb2xzLlNldEludGVydmFsKENoZWNrUG9wdXBPbkhpZGUsMTAwLHRoaXMpO319ZWxzZXtpZiAodHlwZW9mKEZDSy5Ub29sYmFyU2V0LkN1cnJlbnRJbnN0YW5jZS5Gb2N1c01hbmFnZXIpIT0ndW5kZWZpbmVkJykgRkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLkZvY3VzTWFuYWdlci5Mb2NrKCk7aWYgKHRoaXMuUGFyZW50UGFuZWwpe3RoaXMuUGFyZW50UGFuZWwuTG9jaygpO0ZDS1BhbmVsX1dpbmRvd19PbkJsdXIobnVsbCx0aGlzLlBhcmVudFBhbmVsKTt9O2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvJiZGQ0tCcm93c2VySW5mby5Jc01hYyl7dGhpcy5fSUZyYW1lLnNjcm9sbGluZz0nJztGQ0tUb29scy5SdW5GdW5jdGlvbihmdW5jdGlvbigpeyB0aGlzLl9JRnJhbWUuc2Nyb2xsaW5nPSdubyc7fSx0aGlzKTt9O2lmIChGQ0suVG9vbGJhclNldC5DdXJyZW50SW5zdGFuY2UuR2V0SW5zdGFuY2VPYmplY3QoJ0ZDS1BhbmVsJykuX09wZW5lZFBhbmVsJiZGQ0suVG9vbGJhclNldC5DdXJyZW50SW5zdGFuY2UuR2V0SW5zdGFuY2VPYmplY3QoJ0ZDS1BhbmVsJykuX09wZW5lZFBhbmVsIT10aGlzKSBGQ0suVG9vbGJhclNldC5DdXJyZW50SW5zdGFuY2UuR2V0SW5zdGFuY2VPYmplY3QoJ0ZDS1BhbmVsJykuX09wZW5lZFBhbmVsLkhpZGUoZmFsc2UsdHJ1ZSk7RkNLRG9tVG9vbHMuU2V0RWxlbWVudFN0eWxlcyhFLHtCOkI/QisncHgnOicnLEM6Qz9DKydweCc6Jyd9KTtEPUUub2Zmc2V0V2lkdGg7aWYgKCFCKQl0aGlzLl9JRnJhbWUud2lkdGg9MTtpZiAoIUMpCXRoaXMuX0lGcmFtZS5oZWlnaHQ9MTtEPUUub2Zmc2V0V2lkdGh8fEUuZmlyc3RDaGlsZC5vZmZzZXRXaWR0aDt2YXIgRj1GQ0tUb29scy5HZXREb2N1bWVudFBvc2l0aW9uKHRoaXMuX1dpbmRvdyxBLm5vZGVUeXBlPT05PyhGQ0tUb29scy5Jc1N0cmljdE1vZGUoQSk/QS5kb2N1bWVudEVsZW1lbnQ6QS5ib2R5KTpBKTt2YXIgRz1GQ0tEb21Ub29scy5HZXRQb3NpdGlvbmVkQW5jZXN0b3IodGhpcy5fSUZyYW1lLnBhcmVudE5vZGUpO2lmIChHKXt2YXIgSD1GQ0tUb29scy5HZXREb2N1bWVudFBvc2l0aW9uKEZDS1Rvb2xzLkdldEVsZW1lbnRXaW5kb3coRyksRyk7Ri54LT1ILng7Ri55LT1ILnk7fTtpZiAodGhpcy5Jc1JUTCYmIXRoaXMuSXNDb250ZXh0TWVudSkgeD0oeCotMSk7eCs9Ri54O3krPUYueTtpZiAodGhpcy5Jc1JUTCl7aWYgKHRoaXMuSXNDb250ZXh0TWVudSkgeD14LUQrMTtlbHNlIGlmIChBKSB4PXgrQS5vZmZzZXRXaWR0aC1EO31lbHNle3ZhciBJPUZDS1Rvb2xzLkdldFZpZXdQYW5lU2l6ZSh0aGlzLl9XaW5kb3cpO3ZhciBKPUZDS1Rvb2xzLkdldFNjcm9sbFBvc2l0aW9uKHRoaXMuX1dpbmRvdyk7dmFyIEs9SS5IZWlnaHQrSi5ZO3ZhciBMPUkuV2lkdGgrSi5YO2lmICgoeCtEKT5MKSB4LT14K0QtTDtpZiAoKHkrRS5vZmZzZXRIZWlnaHQpPkspIHktPXkrRS5vZmZzZXRIZWlnaHQtSzt9O0ZDS0RvbVRvb2xzLlNldEVsZW1lbnRTdHlsZXModGhpcy5fSUZyYW1lLHtsZWZ0OngrJ3B4Jyx0b3A6eSsncHgnfSk7dGhpcy5fSUZyYW1lLmNvbnRlbnRXaW5kb3cuZm9jdXMoKTt0aGlzLl9Jc09wZW5lZD10cnVlO3ZhciBNPXRoaXM7dGhpcy5fcmVzaXplVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBOPUUub2Zmc2V0V2lkdGh8fEUuZmlyc3RDaGlsZC5vZmZzZXRXaWR0aDt2YXIgTz1FLm9mZnNldEhlaWdodDtNLl9JRnJhbWUuc3R5bGUud2lkdGg9TisncHgnO00uX0lGcmFtZS5zdHlsZS5oZWlnaHQ9TysncHgnO30sMCk7RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLkdldEluc3RhbmNlT2JqZWN0KCdGQ0tQYW5lbCcpLl9PcGVuZWRQYW5lbD10aGlzO307RkNLVG9vbHMuUnVuRnVuY3Rpb24odGhpcy5PblNob3csdGhpcyk7fTtGQ0tQYW5lbC5wcm90b3R5cGUuSGlkZT1mdW5jdGlvbihBLEIpe2lmICh0aGlzLl9Qb3B1cCkgdGhpcy5fUG9wdXAuaGlkZSgpO2Vsc2V7aWYgKCF0aGlzLl9Jc09wZW5lZHx8dGhpcy5fTG9ja0NvdW50ZXI+MCkgcmV0dXJuO2lmICh0eXBlb2YoRkNLRm9jdXNNYW5hZ2VyKSE9J3VuZGVmaW5lZCcmJiFCKSBGQ0tGb2N1c01hbmFnZXIuVW5sb2NrKCk7dGhpcy5fSUZyYW1lLnN0eWxlLndpZHRoPXRoaXMuX0lGcmFtZS5zdHlsZS5oZWlnaHQ9JzBweCc7dGhpcy5fSXNPcGVuZWQ9ZmFsc2U7aWYgKHRoaXMuX3Jlc2l6ZVRpbWVyKXtjbGVhclRpbWVvdXQodGhpcy5fcmVzaXplVGltZXIpO3RoaXMuX3Jlc2l6ZVRpbWVyPW51bGw7fTtpZiAodGhpcy5QYXJlbnRQYW5lbCkgdGhpcy5QYXJlbnRQYW5lbC5VbmxvY2soKTtpZiAoIUEpIEZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKHRoaXMuT25IaWRlLHRoaXMpO319O0ZDS1BhbmVsLnByb3RvdHlwZS5DaGVja0lzT3BlbmVkPWZ1bmN0aW9uKCl7aWYgKHRoaXMuX1BvcHVwKSByZXR1cm4gdGhpcy5fUG9wdXAuaXNPcGVuO2Vsc2UgcmV0dXJuIHRoaXMuX0lzT3BlbmVkO307RkNLUGFuZWwucHJvdG90eXBlLkNyZWF0ZUNoaWxkUGFuZWw9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLl9Qb3B1cD9GQ0tUb29scy5HZXREb2N1bWVudFdpbmRvdyh0aGlzLkRvY3VtZW50KTp0aGlzLl9XaW5kb3c7dmFyIEI9bmV3IEZDS1BhbmVsKEEpO0IuUGFyZW50UGFuZWw9dGhpcztyZXR1cm4gQjt9O0ZDS1BhbmVsLnByb3RvdHlwZS5Mb2NrPWZ1bmN0aW9uKCl7dGhpcy5fTG9ja0NvdW50ZXIrKzt9O0ZDS1BhbmVsLnByb3RvdHlwZS5VbmxvY2s9ZnVuY3Rpb24oKXtpZiAoLS10aGlzLl9Mb2NrQ291bnRlcj09MCYmIXRoaXMuSGFzRm9jdXMpIHRoaXMuSGlkZSgpO307ZnVuY3Rpb24gRkNLUGFuZWxfV2luZG93X09uRm9jdXMoZSxBKXtBLkhhc0ZvY3VzPXRydWU7fTtmdW5jdGlvbiBGQ0tQYW5lbF9XaW5kb3dfT25CbHVyKGUsQSl7QS5IYXNGb2N1cz1mYWxzZTtpZiAoQS5fTG9ja0NvdW50ZXI9PTApIEZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKEEuSGlkZSxBKTt9O2Z1bmN0aW9uIENoZWNrUG9wdXBPbkhpZGUoQSl7aWYgKEF8fCF0aGlzLl9Qb3B1cC5pc09wZW4pe3dpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX1RpbWVyKTt0aGlzLl9UaW1lcj1udWxsO2lmICh0aGlzLl9Qb3B1cCYmdGhpcy5QYXJlbnRQYW5lbCYmIUEpIHRoaXMuUGFyZW50UGFuZWwuUmVzaXplRm9yU3VicGFuZWwodGhpcywwLDApO0ZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKHRoaXMuT25IaWRlLHRoaXMpO319O2Z1bmN0aW9uIEZDS1BhbmVsX0NsZWFudXAoKXt0aGlzLl9Qb3B1cD1udWxsO3RoaXMuX1dpbmRvdz1udWxsO3RoaXMuRG9jdW1lbnQ9bnVsbDt0aGlzLk1haW5Ob2RlPW51bGw7dGhpcy5SZWxhdGl2ZUVsZW1lbnQ9bnVsbDt9Owp2YXIgRkNLSWNvbj1mdW5jdGlvbihBKXt2YXIgQj1BP3R5cGVvZihBKTondW5kZWZpbmVkJztzd2l0Y2ggKEIpe2Nhc2UgJ251bWJlcic6dGhpcy5QYXRoPUZDS0NvbmZpZy5Ta2luUGF0aCsnZmNrX3N0cmlwLmdpZic7dGhpcy5TaXplPTE2O3RoaXMuUG9zaXRpb249QTticmVhaztjYXNlICd1bmRlZmluZWQnOnRoaXMuUGF0aD1GQ0tfU1BBQ0VSX1BBVEg7YnJlYWs7Y2FzZSAnc3RyaW5nJzp0aGlzLlBhdGg9QTticmVhaztkZWZhdWx0OnRoaXMuUGF0aD1BWzBdO3RoaXMuU2l6ZT1BWzFdO3RoaXMuUG9zaXRpb249QVsyXTt9fTtGQ0tJY29uLnByb3RvdHlwZS5DcmVhdGVJY29uRWxlbWVudD1mdW5jdGlvbihBKXt2YXIgQixlSWNvbkltYWdlO2lmICh0aGlzLlBvc2l0aW9uKXt2YXIgQz0nLScrKCh0aGlzLlBvc2l0aW9uLTEpKnRoaXMuU2l6ZSkrJ3B4JztpZiAoRkNLQnJvd3NlckluZm8uSXNJRSl7Qj1BLmNyZWF0ZUVsZW1lbnQoJ0RJVicpO2VJY29uSW1hZ2U9Qi5hcHBlbmRDaGlsZChBLmNyZWF0ZUVsZW1lbnQoJ0lNRycpKTtlSWNvbkltYWdlLnNyYz10aGlzLlBhdGg7ZUljb25JbWFnZS5zdHlsZS50b3A9Qzt9ZWxzZXtCPUEuY3JlYXRlRWxlbWVudCgnSU1HJyk7Qi5zcmM9RkNLX1NQQUNFUl9QQVRIO0Iuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uPScwcHggJytDO0Iuc3R5bGUuYmFja2dyb3VuZEltYWdlPSd1cmwoIicrdGhpcy5QYXRoKyciKSc7fX1lbHNle2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXtCPUEuY3JlYXRlRWxlbWVudCgnRElWJyk7ZUljb25JbWFnZT1CLmFwcGVuZENoaWxkKEEuY3JlYXRlRWxlbWVudCgnSU1HJykpO2VJY29uSW1hZ2Uuc3JjPXRoaXMuUGF0aD90aGlzLlBhdGg6RkNLX1NQQUNFUl9QQVRIO31lbHNle0I9QS5jcmVhdGVFbGVtZW50KCdJTUcnKTtCLnNyYz10aGlzLlBhdGg/dGhpcy5QYXRoOkZDS19TUEFDRVJfUEFUSDt9fTtCLmNsYXNzTmFtZT0nVEJfQnV0dG9uX0ltYWdlJztyZXR1cm4gQjt9Owp2YXIgRkNLVG9vbGJhckJ1dHRvblVJPWZ1bmN0aW9uKEEsQixDLEQsRSxGKXt0aGlzLk5hbWU9QTt0aGlzLkxhYmVsPUJ8fEE7dGhpcy5Ub29sdGlwPUN8fHRoaXMuTGFiZWw7dGhpcy5TdHlsZT1FfHwwO3RoaXMuU3RhdGU9Rnx8MDt0aGlzLkljb249bmV3IEZDS0ljb24oRCk7aWYgKEZDSy5JRUNsZWFudXApIEZDSy5JRUNsZWFudXAuQWRkSXRlbSh0aGlzLEZDS1Rvb2xiYXJCdXR0b25VSV9DbGVhbnVwKTt9O0ZDS1Rvb2xiYXJCdXR0b25VSS5wcm90b3R5cGUuX0NyZWF0ZVBhZGRpbmdFbGVtZW50PWZ1bmN0aW9uKEEpe3ZhciBCPUEuY3JlYXRlRWxlbWVudCgnSU1HJyk7Qi5jbGFzc05hbWU9J1RCX0J1dHRvbl9QYWRkaW5nJztCLnNyYz1GQ0tfU1BBQ0VSX1BBVEg7cmV0dXJuIEI7fTtGQ0tUb29sYmFyQnV0dG9uVUkucHJvdG90eXBlLkNyZWF0ZT1mdW5jdGlvbihBKXt2YXIgQj1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQSk7dmFyIEM9dGhpcy5NYWluRWxlbWVudD1CLmNyZWF0ZUVsZW1lbnQoJ0RJVicpO0MudGl0bGU9dGhpcy5Ub29sdGlwO2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvKSBDLm9ubW91c2Vkb3duPUZDS1Rvb2xzLkNhbmNlbEV2ZW50O0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChDLCdtb3VzZW92ZXInLEZDS1Rvb2xiYXJCdXR0b25VSV9Pbk1vdXNlT3Zlcix0aGlzKTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQywnbW91c2VvdXQnLEZDS1Rvb2xiYXJCdXR0b25VSV9Pbk1vdXNlT3V0LHRoaXMpO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChDLCdjbGljaycsRkNLVG9vbGJhckJ1dHRvblVJX09uQ2xpY2ssdGhpcyk7dGhpcy5DaGFuZ2VTdGF0ZSh0aGlzLlN0YXRlLHRydWUpO2lmICh0aGlzLlN0eWxlPT0wJiYhdGhpcy5TaG93QXJyb3cpe0MuYXBwZW5kQ2hpbGQodGhpcy5JY29uLkNyZWF0ZUljb25FbGVtZW50KEIpKTt9ZWxzZXt2YXIgRD1DLmFwcGVuZENoaWxkKEIuY3JlYXRlRWxlbWVudCgnVEFCTEUnKSk7RC5jZWxsUGFkZGluZz0wO0QuY2VsbFNwYWNpbmc9MDt2YXIgRT1ELmluc2VydFJvdygtMSk7dmFyIEY9RS5pbnNlcnRDZWxsKC0xKTtpZiAodGhpcy5TdHlsZT09MHx8dGhpcy5TdHlsZT09MikgRi5hcHBlbmRDaGlsZCh0aGlzLkljb24uQ3JlYXRlSWNvbkVsZW1lbnQoQikpO2Vsc2UgRi5hcHBlbmRDaGlsZCh0aGlzLl9DcmVhdGVQYWRkaW5nRWxlbWVudChCKSk7aWYgKHRoaXMuU3R5bGU9PTF8fHRoaXMuU3R5bGU9PTIpe0Y9RS5pbnNlcnRDZWxsKC0xKTtGLmNsYXNzTmFtZT0nVEJfQnV0dG9uX1RleHQnO0Yubm9XcmFwPXRydWU7Ri5hcHBlbmRDaGlsZChCLmNyZWF0ZVRleHROb2RlKHRoaXMuTGFiZWwpKTt9O2lmICh0aGlzLlNob3dBcnJvdyl7aWYgKHRoaXMuU3R5bGUhPTApe0UuaW5zZXJ0Q2VsbCgtMSkuYXBwZW5kQ2hpbGQodGhpcy5fQ3JlYXRlUGFkZGluZ0VsZW1lbnQoQikpO307Rj1FLmluc2VydENlbGwoLTEpO3ZhciBHPUYuYXBwZW5kQ2hpbGQoQi5jcmVhdGVFbGVtZW50KCdJTUcnKSk7Ry5zcmM9RkNLQ29uZmlnLlNraW5QYXRoKydpbWFnZXMvdG9vbGJhci5idXR0b25hcnJvdy5naWYnO0cud2lkdGg9NTtHLmhlaWdodD0zO307Rj1FLmluc2VydENlbGwoLTEpO0YuYXBwZW5kQ2hpbGQodGhpcy5fQ3JlYXRlUGFkZGluZ0VsZW1lbnQoQikpO307QS5hcHBlbmRDaGlsZChDKTt9O0ZDS1Rvb2xiYXJCdXR0b25VSS5wcm90b3R5cGUuQ2hhbmdlU3RhdGU9ZnVuY3Rpb24oQSxCKXtpZiAoIUImJnRoaXMuU3RhdGU9PUEpIHJldHVybjt2YXIgZT10aGlzLk1haW5FbGVtZW50O2lmICghZSkgcmV0dXJuO3N3aXRjaCAocGFyc2VJbnQoQSwxMCkpe2Nhc2UgMDplLmNsYXNzTmFtZT0nVEJfQnV0dG9uX09mZic7YnJlYWs7Y2FzZSAxOmUuY2xhc3NOYW1lPSdUQl9CdXR0b25fT24nO2JyZWFrO2Nhc2UgLTE6ZS5jbGFzc05hbWU9J1RCX0J1dHRvbl9EaXNhYmxlZCc7YnJlYWs7fTt0aGlzLlN0YXRlPUE7fTtmdW5jdGlvbiBGQ0tUb29sYmFyQnV0dG9uVUlfT25Nb3VzZU92ZXIoQSxCKXtpZiAoQi5TdGF0ZT09MCkgdGhpcy5jbGFzc05hbWU9J1RCX0J1dHRvbl9PZmZfT3Zlcic7ZWxzZSBpZiAoQi5TdGF0ZT09MSkgdGhpcy5jbGFzc05hbWU9J1RCX0J1dHRvbl9Pbl9PdmVyJzt9O2Z1bmN0aW9uIEZDS1Rvb2xiYXJCdXR0b25VSV9Pbk1vdXNlT3V0KEEsQil7aWYgKEIuU3RhdGU9PTApIHRoaXMuY2xhc3NOYW1lPSdUQl9CdXR0b25fT2ZmJztlbHNlIGlmIChCLlN0YXRlPT0xKSB0aGlzLmNsYXNzTmFtZT0nVEJfQnV0dG9uX09uJzt9O2Z1bmN0aW9uIEZDS1Rvb2xiYXJCdXR0b25VSV9PbkNsaWNrKEEsQil7aWYgKEIuT25DbGljayYmQi5TdGF0ZSE9LTEpIEIuT25DbGljayhCKTt9O2Z1bmN0aW9uIEZDS1Rvb2xiYXJCdXR0b25VSV9DbGVhbnVwKCl7dGhpcy5NYWluRWxlbWVudD1udWxsO307CnZhciBGQ0tUb29sYmFyQnV0dG9uPWZ1bmN0aW9uKEEsQixDLEQsRSxGLEcpe3RoaXMuQ29tbWFuZE5hbWU9QTt0aGlzLkxhYmVsPUI7dGhpcy5Ub29sdGlwPUM7dGhpcy5TdHlsZT1EO3RoaXMuU291cmNlVmlldz1FP3RydWU6ZmFsc2U7dGhpcy5Db250ZXh0U2Vuc2l0aXZlPUY/dHJ1ZTpmYWxzZTtpZiAoRz09bnVsbCkgdGhpcy5JY29uUGF0aD1GQ0tDb25maWcuU2tpblBhdGgrJ3Rvb2xiYXIvJytBLnRvTG93ZXJDYXNlKCkrJy5naWYnO2Vsc2UgaWYgKHR5cGVvZihHKT09J251bWJlcicpIHRoaXMuSWNvblBhdGg9W0ZDS0NvbmZpZy5Ta2luUGF0aCsnZmNrX3N0cmlwLmdpZicsMTYsR107ZWxzZSB0aGlzLkljb25QYXRoPUc7fTtGQ0tUb29sYmFyQnV0dG9uLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oQSl7dGhpcy5fVUlCdXR0b249bmV3IEZDS1Rvb2xiYXJCdXR0b25VSSh0aGlzLkNvbW1hbmROYW1lLHRoaXMuTGFiZWwsdGhpcy5Ub29sdGlwLHRoaXMuSWNvblBhdGgsdGhpcy5TdHlsZSk7dGhpcy5fVUlCdXR0b24uT25DbGljaz10aGlzLkNsaWNrO3RoaXMuX1VJQnV0dG9uLl9Ub29sYmFyQnV0dG9uPXRoaXM7dGhpcy5fVUlCdXR0b24uQ3JlYXRlKEEpO307RkNLVG9vbGJhckJ1dHRvbi5wcm90b3R5cGUuUmVmcmVzaFN0YXRlPWZ1bmN0aW9uKCl7dmFyIEE9dGhpcy5fVUlCdXR0b247aWYgKCFBKSByZXR1cm47dmFyIEI9RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLkNvbW1hbmRzLkdldENvbW1hbmQodGhpcy5Db21tYW5kTmFtZSkuR2V0U3RhdGUoKTtpZiAoQj09QS5TdGF0ZSkgcmV0dXJuO0EuQ2hhbmdlU3RhdGUoQik7fTtGQ0tUb29sYmFyQnV0dG9uLnByb3RvdHlwZS5DbGljaz1mdW5jdGlvbigpe3ZhciBBPXRoaXMuX1Rvb2xiYXJCdXR0b258fHRoaXM7RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLkNvbW1hbmRzLkdldENvbW1hbmQoQS5Db21tYW5kTmFtZSkuRXhlY3V0ZSgpO307RkNLVG9vbGJhckJ1dHRvbi5wcm90b3R5cGUuRW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5SZWZyZXNoU3RhdGUoKTt9O0ZDS1Rvb2xiYXJCdXR0b24ucHJvdG90eXBlLkRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLl9VSUJ1dHRvbi5DaGFuZ2VTdGF0ZSgtMSk7fTsKdmFyIEZDS1NwZWNpYWxDb21ibz1mdW5jdGlvbihBLEIsQyxELEUpe3RoaXMuRmllbGRXaWR0aD1CfHwxMDA7dGhpcy5QYW5lbFdpZHRoPUN8fDE1MDt0aGlzLlBhbmVsTWF4SGVpZ2h0PUR8fDE1MDt0aGlzLkxhYmVsPScmbmJzcDsnO3RoaXMuQ2FwdGlvbj1BO3RoaXMuVG9vbHRpcD1BO3RoaXMuU3R5bGU9Mjt0aGlzLkVuYWJsZWQ9dHJ1ZTt0aGlzLkl0ZW1zPXt9O3RoaXMuX1BhbmVsPW5ldyBGQ0tQYW5lbChFfHx3aW5kb3cpO3RoaXMuX1BhbmVsLkFwcGVuZFN0eWxlU2hlZXQoRkNLQ29uZmlnLlNraW5FZGl0b3JDU1MpO3RoaXMuX1BhbmVsQm94PXRoaXMuX1BhbmVsLk1haW5Ob2RlLmFwcGVuZENoaWxkKHRoaXMuX1BhbmVsLkRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpKTt0aGlzLl9QYW5lbEJveC5jbGFzc05hbWU9J1NDX1BhbmVsJzt0aGlzLl9QYW5lbEJveC5zdHlsZS53aWR0aD10aGlzLlBhbmVsV2lkdGgrJ3B4Jzt0aGlzLl9QYW5lbEJveC5pbm5lckhUTUw9Jzx0YWJsZSBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIHdpZHRoPSIxMDAlIiBzdHlsZT0iVEFCTEUtTEFZT1VUOiBmaXhlZCI+PHRyPjx0ZCBub3dyYXA+PC90ZD48L3RyPjwvdGFibGU+Jzt0aGlzLl9JdGVtc0hvbGRlckVsPXRoaXMuX1BhbmVsQm94LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdURCcpWzBdO2lmIChGQ0suSUVDbGVhbnVwKSBGQ0suSUVDbGVhbnVwLkFkZEl0ZW0odGhpcyxGQ0tTcGVjaWFsQ29tYm9fQ2xlYW51cCk7fTtmdW5jdGlvbiBGQ0tTcGVjaWFsQ29tYm9fSXRlbU9uTW91c2VPdmVyKCl7dGhpcy5jbGFzc05hbWUrPScgU0NfSXRlbU92ZXInO307ZnVuY3Rpb24gRkNLU3BlY2lhbENvbWJvX0l0ZW1Pbk1vdXNlT3V0KCl7dGhpcy5jbGFzc05hbWU9dGhpcy5vcmlnaW5hbENsYXNzO307ZnVuY3Rpb24gRkNLU3BlY2lhbENvbWJvX0l0ZW1PbkNsaWNrKEEsQixDKXt0aGlzLmNsYXNzTmFtZT10aGlzLm9yaWdpbmFsQ2xhc3M7Qi5fUGFuZWwuSGlkZSgpO0IuU2V0TGFiZWwodGhpcy5GQ0tJdGVtTGFiZWwpO2lmICh0eXBlb2YoQi5PblNlbGVjdCk9PSdmdW5jdGlvbicpIEIuT25TZWxlY3QoQyx0aGlzKTt9O0ZDS1NwZWNpYWxDb21iby5wcm90b3R5cGUuQ2xlYXJJdGVtcz1mdW5jdGlvbiAoKXtpZiAodGhpcy5JdGVtcykgdGhpcy5JdGVtcz17fTt2YXIgQT10aGlzLl9JdGVtc0hvbGRlckVsO3doaWxlIChBLmZpcnN0Q2hpbGQpIEEucmVtb3ZlQ2hpbGQoQS5maXJzdENoaWxkKTt9O0ZDS1NwZWNpYWxDb21iby5wcm90b3R5cGUuQWRkSXRlbT1mdW5jdGlvbihBLEIsQyxEKXt2YXIgRT10aGlzLl9JdGVtc0hvbGRlckVsLmFwcGVuZENoaWxkKHRoaXMuX1BhbmVsLkRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpKTtFLmNsYXNzTmFtZT1FLm9yaWdpbmFsQ2xhc3M9J1NDX0l0ZW0nO0UuaW5uZXJIVE1MPUI7RS5GQ0tJdGVtTGFiZWw9Q3x8QTtFLlNlbGVjdGVkPWZhbHNlO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBFLnN0eWxlLndpZHRoPScxMDAlJztpZiAoRCkgRS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9RDtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoRSwnbW91c2VvdmVyJyxGQ0tTcGVjaWFsQ29tYm9fSXRlbU9uTW91c2VPdmVyKTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoRSwnbW91c2VvdXQnLEZDS1NwZWNpYWxDb21ib19JdGVtT25Nb3VzZU91dCk7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lckV4KEUsJ2NsaWNrJyxGQ0tTcGVjaWFsQ29tYm9fSXRlbU9uQ2xpY2ssW3RoaXMsQV0pO3RoaXMuSXRlbXNbQS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCldPUU7cmV0dXJuIEU7fTtGQ0tTcGVjaWFsQ29tYm8ucHJvdG90eXBlLlNlbGVjdEl0ZW09ZnVuY3Rpb24oQSl7aWYgKHR5cGVvZiBBPT0nc3RyaW5nJykgQT10aGlzLkl0ZW1zW0EudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpXTtpZiAoQSl7QS5jbGFzc05hbWU9QS5vcmlnaW5hbENsYXNzPSdTQ19JdGVtU2VsZWN0ZWQnO0EuU2VsZWN0ZWQ9dHJ1ZTt9fTtGQ0tTcGVjaWFsQ29tYm8ucHJvdG90eXBlLlNlbGVjdEl0ZW1CeUxhYmVsPWZ1bmN0aW9uKEEsQil7Zm9yICh2YXIgQyBpbiB0aGlzLkl0ZW1zKXt2YXIgRD10aGlzLkl0ZW1zW0NdO2lmIChELkZDS0l0ZW1MYWJlbD09QSl7RC5jbGFzc05hbWU9RC5vcmlnaW5hbENsYXNzPSdTQ19JdGVtU2VsZWN0ZWQnO0QuU2VsZWN0ZWQ9dHJ1ZTtpZiAoQikgdGhpcy5TZXRMYWJlbChBKTt9fX07RkNLU3BlY2lhbENvbWJvLnByb3RvdHlwZS5EZXNlbGVjdEFsbD1mdW5jdGlvbihBKXtmb3IgKHZhciBpIGluIHRoaXMuSXRlbXMpe2lmICghdGhpcy5JdGVtc1tpXSkgY29udGludWU7dGhpcy5JdGVtc1tpXS5jbGFzc05hbWU9dGhpcy5JdGVtc1tpXS5vcmlnaW5hbENsYXNzPSdTQ19JdGVtJzt0aGlzLkl0ZW1zW2ldLlNlbGVjdGVkPWZhbHNlO307aWYgKEEpIHRoaXMuU2V0TGFiZWwoJycpO307RkNLU3BlY2lhbENvbWJvLnByb3RvdHlwZS5TZXRMYWJlbEJ5SWQ9ZnVuY3Rpb24oQSl7QT1BP0EudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpOicnO3ZhciBCPXRoaXMuSXRlbXNbQV07dGhpcy5TZXRMYWJlbChCP0IuRkNLSXRlbUxhYmVsOicnKTt9O0ZDS1NwZWNpYWxDb21iby5wcm90b3R5cGUuU2V0TGFiZWw9ZnVuY3Rpb24oQSl7QT0oIUF8fEEubGVuZ3RoPT0wKT8nJm5ic3A7JzpBO2lmIChBPT10aGlzLkxhYmVsKSByZXR1cm47dGhpcy5MYWJlbD1BO3ZhciBCPXRoaXMuX0xhYmVsRWw7aWYgKEIpe0IuaW5uZXJIVE1MPUE7RkNLVG9vbHMuRGlzYWJsZVNlbGVjdGlvbihCKTt9fTtGQ0tTcGVjaWFsQ29tYm8ucHJvdG90eXBlLlNldEVuYWJsZWQ9ZnVuY3Rpb24oQSl7dGhpcy5FbmFibGVkPUE7aWYgKHRoaXMuX091dGVyVGFibGUpIHRoaXMuX091dGVyVGFibGUuY2xhc3NOYW1lPUE/Jyc6J1NDX0ZpZWxkRGlzYWJsZWQnO307RkNLU3BlY2lhbENvbWJvLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oQSl7dmFyIEI9RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEEpO3ZhciBDPXRoaXMuX091dGVyVGFibGU9QS5hcHBlbmRDaGlsZChCLmNyZWF0ZUVsZW1lbnQoJ1RBQkxFJykpO0MuY2VsbFBhZGRpbmc9MDtDLmNlbGxTcGFjaW5nPTA7Qy5pbnNlcnRSb3coLTEpO3ZhciBEO3ZhciBFO3N3aXRjaCAodGhpcy5TdHlsZSl7Y2FzZSAwOkQ9J1RCX0J1dHRvblR5cGVfSWNvbic7RT1mYWxzZTticmVhaztjYXNlIDE6RD0nVEJfQnV0dG9uVHlwZV9UZXh0JztFPWZhbHNlO2JyZWFrO2Nhc2UgMjpFPXRydWU7YnJlYWs7fTtpZiAodGhpcy5DYXB0aW9uJiZ0aGlzLkNhcHRpb24ubGVuZ3RoPjAmJkUpe3ZhciBGPUMucm93c1swXS5pbnNlcnRDZWxsKC0xKTtGLmlubmVySFRNTD10aGlzLkNhcHRpb247Ri5jbGFzc05hbWU9J1NDX0ZpZWxkQ2FwdGlvbic7fTt2YXIgRz1GQ0tUb29scy5BcHBlbmRFbGVtZW50KEMucm93c1swXS5pbnNlcnRDZWxsKC0xKSwnZGl2Jyk7aWYgKEUpe0cuY2xhc3NOYW1lPSdTQ19GaWVsZCc7Ry5zdHlsZS53aWR0aD10aGlzLkZpZWxkV2lkdGgrJ3B4JztHLmlubmVySFRNTD0nPHRhYmxlIHdpZHRoPSIxMDAlIiBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIHN0eWxlPSJUQUJMRS1MQVlPVVQ6IGZpeGVkOyI+PHRib2R5Pjx0cj48dGQgY2xhc3M9IlNDX0ZpZWxkTGFiZWwiPjxsYWJlbD4mbmJzcDs8L2xhYmVsPjwvdGQ+PHRkIGNsYXNzPSJTQ19GaWVsZEJ1dHRvbiI+Jm5ic3A7PC90ZD48L3RyPjwvdGJvZHk+PC90YWJsZT4nO3RoaXMuX0xhYmVsRWw9Ry5nZXRFbGVtZW50c0J5VGFnTmFtZSgnbGFiZWwnKVswXTt0aGlzLl9MYWJlbEVsLmlubmVySFRNTD10aGlzLkxhYmVsO31lbHNle0cuY2xhc3NOYW1lPSdUQl9CdXR0b25fT2ZmJztHLmlubmVySFRNTD0nPHRhYmxlIHRpdGxlPSInK3RoaXMuVG9vbHRpcCsnIiBjbGFzcz0iJytEKyciIGNlbGxzcGFjaW5nPSIwIiBjZWxscGFkZGluZz0iMCIgYm9yZGVyPSIwIj48dHI+PHRkPjxpbWcgY2xhc3M9IlRCX0J1dHRvbl9QYWRkaW5nIiBzcmM9IicrRkNLX1NQQUNFUl9QQVRIKyciIC8+PC90ZD48dGQgY2xhc3M9IlRCX1RleHQiPicrdGhpcy5DYXB0aW9uKyc8L3RkPjx0ZD48aW1nIGNsYXNzPSJUQl9CdXR0b25fUGFkZGluZyIgc3JjPSInK0ZDS19TUEFDRVJfUEFUSCsnIiAvPjwvdGQ+PHRkIGNsYXNzPSJUQl9CdXR0b25BcnJvdyI+PGltZyBzcmM9IicrRkNLQ29uZmlnLlNraW5QYXRoKydpbWFnZXMvdG9vbGJhci5idXR0b25hcnJvdy5naWYiIHdpZHRoPSI1IiBoZWlnaHQ9IjMiPjwvdGQ+PHRkPjxpbWcgY2xhc3M9IlRCX0J1dHRvbl9QYWRkaW5nIiBzcmM9IicrRkNLX1NQQUNFUl9QQVRIKyciIC8+PC90ZD48L3RyPjwvdGFibGU+Jzt9O0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChHLCdtb3VzZW92ZXInLEZDS1NwZWNpYWxDb21ib19Pbk1vdXNlT3Zlcix0aGlzKTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoRywnbW91c2VvdXQnLEZDS1NwZWNpYWxDb21ib19Pbk1vdXNlT3V0LHRoaXMpO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChHLCdjbGljaycsRkNLU3BlY2lhbENvbWJvX09uQ2xpY2ssdGhpcyk7RkNLVG9vbHMuRGlzYWJsZVNlbGVjdGlvbih0aGlzLl9QYW5lbC5Eb2N1bWVudC5ib2R5KTt9O2Z1bmN0aW9uIEZDS1NwZWNpYWxDb21ib19DbGVhbnVwKCl7dGhpcy5fTGFiZWxFbD1udWxsO3RoaXMuX091dGVyVGFibGU9bnVsbDt0aGlzLl9JdGVtc0hvbGRlckVsPW51bGw7dGhpcy5fUGFuZWxCb3g9bnVsbDtpZiAodGhpcy5JdGVtcyl7Zm9yICh2YXIgQSBpbiB0aGlzLkl0ZW1zKSB0aGlzLkl0ZW1zW0FdPW51bGw7fX07ZnVuY3Rpb24gRkNLU3BlY2lhbENvbWJvX09uTW91c2VPdmVyKEEsQil7aWYgKEIuRW5hYmxlZCl7c3dpdGNoIChCLlN0eWxlKXtjYXNlIDA6dGhpcy5jbGFzc05hbWU9J1RCX0J1dHRvbl9Pbl9PdmVyJzticmVhaztjYXNlIDE6dGhpcy5jbGFzc05hbWU9J1RCX0J1dHRvbl9Pbl9PdmVyJzticmVhaztjYXNlIDI6dGhpcy5jbGFzc05hbWU9J1NDX0ZpZWxkIFNDX0ZpZWxkT3Zlcic7YnJlYWs7fX19O2Z1bmN0aW9uIEZDS1NwZWNpYWxDb21ib19Pbk1vdXNlT3V0KEEsQil7c3dpdGNoIChCLlN0eWxlKXtjYXNlIDA6dGhpcy5jbGFzc05hbWU9J1RCX0J1dHRvbl9PZmYnO2JyZWFrO2Nhc2UgMTp0aGlzLmNsYXNzTmFtZT0nVEJfQnV0dG9uX09mZic7YnJlYWs7Y2FzZSAyOnRoaXMuY2xhc3NOYW1lPSdTQ19GaWVsZCc7YnJlYWs7fX07ZnVuY3Rpb24gRkNLU3BlY2lhbENvbWJvX09uQ2xpY2soZSxBKXtpZiAoQS5FbmFibGVkKXt2YXIgQj1BLl9QYW5lbDt2YXIgQz1BLl9QYW5lbEJveDt2YXIgRD1BLl9JdGVtc0hvbGRlckVsO3ZhciBFPUEuUGFuZWxNYXhIZWlnaHQ7aWYgKEEuT25CZWZvcmVDbGljaykgQS5PbkJlZm9yZUNsaWNrKEEpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBCLlByZWxvYWQoMCx0aGlzLm9mZnNldEhlaWdodCx0aGlzKTtpZiAoRC5vZmZzZXRIZWlnaHQ+RSkgQy5zdHlsZS5oZWlnaHQ9RSsncHgnO2Vsc2UgQy5zdHlsZS5oZWlnaHQ9Jyc7Qi5TaG93KDAsdGhpcy5vZmZzZXRIZWlnaHQsdGhpcyk7fX07CnZhciBGQ0tUb29sYmFyU3BlY2lhbENvbWJvPWZ1bmN0aW9uKCl7dGhpcy5Tb3VyY2VWaWV3PWZhbHNlO3RoaXMuQ29udGV4dFNlbnNpdGl2ZT10cnVlO3RoaXMuRmllbGRXaWR0aD1udWxsO3RoaXMuUGFuZWxXaWR0aD1udWxsO3RoaXMuUGFuZWxNYXhIZWlnaHQ9bnVsbDt9O0ZDS1Rvb2xiYXJTcGVjaWFsQ29tYm8ucHJvdG90eXBlLkRlZmF1bHRMYWJlbD0nJztmdW5jdGlvbiBGQ0tUb29sYmFyU3BlY2lhbENvbWJvX09uU2VsZWN0KEEsQil7RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLkNvbW1hbmRzLkdldENvbW1hbmQodGhpcy5Db21tYW5kTmFtZSkuRXhlY3V0ZShBLEIpO307RkNLVG9vbGJhclNwZWNpYWxDb21iby5wcm90b3R5cGUuQ3JlYXRlPWZ1bmN0aW9uKEEpe3RoaXMuX0NvbWJvPW5ldyBGQ0tTcGVjaWFsQ29tYm8odGhpcy5HZXRMYWJlbCgpLHRoaXMuRmllbGRXaWR0aCx0aGlzLlBhbmVsV2lkdGgsdGhpcy5QYW5lbE1heEhlaWdodCxGQ0tCcm93c2VySW5mby5Jc0lFP3dpbmRvdzpGQ0tUb29scy5HZXRFbGVtZW50V2luZG93KEEpLnBhcmVudCk7dGhpcy5fQ29tYm8uVG9vbHRpcD10aGlzLlRvb2x0aXA7dGhpcy5fQ29tYm8uU3R5bGU9dGhpcy5TdHlsZTt0aGlzLkNyZWF0ZUl0ZW1zKHRoaXMuX0NvbWJvKTt0aGlzLl9Db21iby5DcmVhdGUoQSk7dGhpcy5fQ29tYm8uQ29tbWFuZE5hbWU9dGhpcy5Db21tYW5kTmFtZTt0aGlzLl9Db21iby5PblNlbGVjdD1GQ0tUb29sYmFyU3BlY2lhbENvbWJvX09uU2VsZWN0O307ZnVuY3Rpb24gRkNLVG9vbGJhclNwZWNpYWxDb21ib19SZWZyZXNoQWN0aXZlSXRlbXMoQSxCKXtBLkRlc2VsZWN0QWxsKCk7QS5TZWxlY3RJdGVtKEIpO0EuU2V0TGFiZWxCeUlkKEIpO307RkNLVG9vbGJhclNwZWNpYWxDb21iby5wcm90b3R5cGUuUmVmcmVzaFN0YXRlPWZ1bmN0aW9uKCl7dmFyIEE7dmFyIEI9RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLkNvbW1hbmRzLkdldENvbW1hbmQodGhpcy5Db21tYW5kTmFtZSkuR2V0U3RhdGUoKTtpZiAoQiE9LTEpe0E9MTtpZiAodGhpcy5SZWZyZXNoQWN0aXZlSXRlbXMpIHRoaXMuUmVmcmVzaEFjdGl2ZUl0ZW1zKHRoaXMuX0NvbWJvLEIpO2Vsc2V7aWYgKHRoaXMuX0xhc3RWYWx1ZSE9PUIpe3RoaXMuX0xhc3RWYWx1ZT1CO2lmICghQnx8Qi5sZW5ndGg9PTApe3RoaXMuX0NvbWJvLkRlc2VsZWN0QWxsKCk7dGhpcy5fQ29tYm8uU2V0TGFiZWwodGhpcy5EZWZhdWx0TGFiZWwpO31lbHNlIEZDS1Rvb2xiYXJTcGVjaWFsQ29tYm9fUmVmcmVzaEFjdGl2ZUl0ZW1zKHRoaXMuX0NvbWJvLEIpO319fWVsc2UgQT0tMTtpZiAoQT09dGhpcy5TdGF0ZSkgcmV0dXJuO2lmIChBPT0tMSl7dGhpcy5fQ29tYm8uRGVzZWxlY3RBbGwoKTt0aGlzLl9Db21iby5TZXRMYWJlbCgnJyk7fTt0aGlzLlN0YXRlPUE7dGhpcy5fQ29tYm8uU2V0RW5hYmxlZChBIT0tMSk7fTtGQ0tUb29sYmFyU3BlY2lhbENvbWJvLnByb3RvdHlwZS5FbmFibGU9ZnVuY3Rpb24oKXt0aGlzLlJlZnJlc2hTdGF0ZSgpO307RkNLVG9vbGJhclNwZWNpYWxDb21iby5wcm90b3R5cGUuRGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuU3RhdGU9LTE7dGhpcy5fQ29tYm8uRGVzZWxlY3RBbGwoKTt0aGlzLl9Db21iby5TZXRMYWJlbCgnJyk7dGhpcy5fQ29tYm8uU2V0RW5hYmxlZChmYWxzZSk7fTsKdmFyIEZDS1Rvb2xiYXJTdHlsZUNvbWJvPWZ1bmN0aW9uKEEsQil7aWYgKEE9PT1mYWxzZSkgcmV0dXJuO3RoaXMuQ29tbWFuZE5hbWU9J1N0eWxlJzt0aGlzLkxhYmVsPXRoaXMuR2V0TGFiZWwoKTt0aGlzLlRvb2x0aXA9QT9BOnRoaXMuTGFiZWw7dGhpcy5TdHlsZT1CP0I6Mjt0aGlzLkRlZmF1bHRMYWJlbD1GQ0tDb25maWcuRGVmYXVsdFN0eWxlTGFiZWx8fCcnO307RkNLVG9vbGJhclN0eWxlQ29tYm8ucHJvdG90eXBlPW5ldyBGQ0tUb29sYmFyU3BlY2lhbENvbWJvO0ZDS1Rvb2xiYXJTdHlsZUNvbWJvLnByb3RvdHlwZS5HZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiBGQ0tMYW5nLlN0eWxlO307RkNLVG9vbGJhclN0eWxlQ29tYm8ucHJvdG90eXBlLkdldFN0eWxlcz1mdW5jdGlvbigpe3ZhciBBPXt9O3ZhciBCPUZDSy5Ub29sYmFyU2V0LkN1cnJlbnRJbnN0YW5jZS5TdHlsZXMuR2V0U3R5bGVzKCk7Zm9yICh2YXIgQyBpbiBCKXt2YXIgRD1CW0NdO2lmICghRC5Jc0NvcmUpIEFbQ109RDt9O3JldHVybiBBO307RkNLVG9vbGJhclN0eWxlQ29tYm8ucHJvdG90eXBlLkNyZWF0ZUl0ZW1zPWZ1bmN0aW9uKEEpe3ZhciBCPUEuX1BhbmVsLkRvY3VtZW50O0ZDS1Rvb2xzLkFwcGVuZFN0eWxlU2hlZXQoQixGQ0tDb25maWcuVG9vbGJhckNvbWJvUHJldmlld0NTUyk7RkNLVG9vbHMuQXBwZW5kU3R5bGVTdHJpbmcoQixGQ0tDb25maWcuRWRpdG9yQXJlYVN0eWxlcyk7Qi5ib2R5LmNsYXNzTmFtZSs9JyBGb3JjZUJhc2VGb250JztGQ0tDb25maWcuQXBwbHlCb2R5QXR0cmlidXRlcyhCLmJvZHkpO3ZhciBDPXRoaXMuR2V0U3R5bGVzKCk7Zm9yICh2YXIgRCBpbiBDKXt2YXIgRT1DW0RdO3ZhciBGPUUuR2V0VHlwZSgpPT0yP0Q6RkNLVG9vbGJhclN0eWxlQ29tYm9fQnVpbGRQcmV2aWV3KEUsRS5MYWJlbHx8RCk7dmFyIEc9QS5BZGRJdGVtKEQsRik7Ry5TdHlsZT1FO307QS5PbkJlZm9yZUNsaWNrPXRoaXMuU3R5bGVDb21ib19PbkJlZm9yZUNsaWNrO307RkNLVG9vbGJhclN0eWxlQ29tYm8ucHJvdG90eXBlLlJlZnJlc2hBY3RpdmVJdGVtcz1mdW5jdGlvbihBKXt2YXIgQj1GQ0suVG9vbGJhclNldC5DdXJyZW50SW5zdGFuY2UuU2VsZWN0aW9uLkdldEJvdW5kYXJ5UGFyZW50RWxlbWVudCh0cnVlKTtpZiAoQil7dmFyIEM9bmV3IEZDS0VsZW1lbnRQYXRoKEIpO3ZhciBEPUMuRWxlbWVudHM7Zm9yICh2YXIgZT0wO2U8RC5sZW5ndGg7ZSsrKXtmb3IgKHZhciBpIGluIEEuSXRlbXMpe3ZhciBFPUEuSXRlbXNbaV07dmFyIEY9RS5TdHlsZTtpZiAoRi5DaGVja0VsZW1lbnRSZW1vdmFibGUoRFtlXSx0cnVlKSl7QS5TZXRMYWJlbChGLkxhYmVsfHxGLk5hbWUpO3JldHVybjt9fX19O0EuU2V0TGFiZWwodGhpcy5EZWZhdWx0TGFiZWwpO307RkNLVG9vbGJhclN0eWxlQ29tYm8ucHJvdG90eXBlLlN0eWxlQ29tYm9fT25CZWZvcmVDbGljaz1mdW5jdGlvbihBKXtBLkRlc2VsZWN0QWxsKCk7dmFyIEI7dmFyIEM7dmFyIEQ7dmFyIEU9RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLlNlbGVjdGlvbjtpZiAoRS5HZXRUeXBlKCk9PSdDb250cm9sJyl7Qj1FLkdldFNlbGVjdGVkRWxlbWVudCgpO0Q9Qi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO31lbHNle0I9RS5HZXRCb3VuZGFyeVBhcmVudEVsZW1lbnQodHJ1ZSk7Qz1uZXcgRkNLRWxlbWVudFBhdGgoQik7fTtmb3IgKHZhciBpIGluIEEuSXRlbXMpe3ZhciBGPUEuSXRlbXNbaV07dmFyIEc9Ri5TdHlsZTtpZiAoKEQmJkcuRWxlbWVudD09RCl8fCghRCYmRy5HZXRUeXBlKCkhPTIpKXtGLnN0eWxlLmRpc3BsYXk9Jyc7aWYgKChDJiZHLkNoZWNrQWN0aXZlKEMpKXx8KCFDJiZHLkNoZWNrRWxlbWVudFJlbW92YWJsZShCLHRydWUpKSkgQS5TZWxlY3RJdGVtKEcuTmFtZSk7fWVsc2UgRi5zdHlsZS5kaXNwbGF5PSdub25lJzt9fTtmdW5jdGlvbiBGQ0tUb29sYmFyU3R5bGVDb21ib19CdWlsZFByZXZpZXcoQSxCKXt2YXIgQz1BLkdldFR5cGUoKTt2YXIgRD1bXTtpZiAoQz09MCkgRC5wdXNoKCc8ZGl2IGNsYXNzPSJCYXNlRm9udCI+Jyk7dmFyIEU9QS5FbGVtZW50O2lmIChFPT0nYmRvJykgRT0nc3Bhbic7RD1bJzwnLEVdO3ZhciBGPUEuX1N0eWxlRGVzYy5BdHRyaWJ1dGVzO2lmIChGKXtmb3IgKHZhciBHIGluIEYpe0QucHVzaCgnICcsRywnPSInLEEuR2V0RmluYWxBdHRyaWJ1dGVWYWx1ZShHKSwnIicpO319O2lmIChBLl9HZXRTdHlsZVRleHQoKS5sZW5ndGg+MCkgRC5wdXNoKCcgc3R5bGU9IicsQS5HZXRGaW5hbFN0eWxlVmFsdWUoKSwnIicpO0QucHVzaCgnPicsQiwnPC8nLEUsJz4nKTtpZiAoQz09MCkgRC5wdXNoKCc8L2Rpdj4nKTtyZXR1cm4gRC5qb2luKCcnKTt9Owp2YXIgRkNLVG9vbGJhckZvbnRGb3JtYXRDb21ibz1mdW5jdGlvbihBLEIpe2lmIChBPT09ZmFsc2UpIHJldHVybjt0aGlzLkNvbW1hbmROYW1lPSdGb250Rm9ybWF0Jzt0aGlzLkxhYmVsPXRoaXMuR2V0TGFiZWwoKTt0aGlzLlRvb2x0aXA9QT9BOnRoaXMuTGFiZWw7dGhpcy5TdHlsZT1CP0I6Mjt0aGlzLk5vcm1hbExhYmVsPSdOb3JtYWwnO3RoaXMuUGFuZWxXaWR0aD0xOTA7dGhpcy5EZWZhdWx0TGFiZWw9RkNLQ29uZmlnLkRlZmF1bHRGb250Rm9ybWF0TGFiZWx8fCcnO307RkNLVG9vbGJhckZvbnRGb3JtYXRDb21iby5wcm90b3R5cGU9bmV3IEZDS1Rvb2xiYXJTdHlsZUNvbWJvKGZhbHNlKTtGQ0tUb29sYmFyRm9udEZvcm1hdENvbWJvLnByb3RvdHlwZS5HZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiBGQ0tMYW5nLkZvbnRGb3JtYXQ7fTtGQ0tUb29sYmFyRm9udEZvcm1hdENvbWJvLnByb3RvdHlwZS5HZXRTdHlsZXM9ZnVuY3Rpb24oKXt2YXIgQT17fTt2YXIgQj1GQ0tMYW5nWydGb250Rm9ybWF0cyddLnNwbGl0KCc7Jyk7dmFyIEM9e3A6QlswXSxwcmU6QlsxXSxhZGRyZXNzOkJbMl0saDE6QlszXSxoMjpCWzRdLGgzOkJbNV0saDQ6Qls2XSxoNTpCWzddLGg2OkJbOF0sZGl2OkJbOV18fChCWzBdKycgKERJViknKX07dmFyIEQ9RkNLQ29uZmlnLkZvbnRGb3JtYXRzLnNwbGl0KCc7Jyk7Zm9yICh2YXIgaT0wO2k8RC5sZW5ndGg7aSsrKXt2YXIgRT1EW2ldO3ZhciBGPUZDS1N0eWxlcy5HZXRTdHlsZSgnX0ZDS18nK0UpO2lmIChGKXtGLkxhYmVsPUNbRV07QVsnX0ZDS18nK0VdPUY7fWVsc2UgYWxlcnQoIlRoZSBGQ0tDb25maWcuQ29yZVN0eWxlc1snIitFKyInXSBzZXR0aW5nIHdhcyBub3QgZm91bmQuIFBsZWFzZSBjaGVjayB0aGUgZmNrY29uZmlnLmpzIGZpbGUiKTt9O3JldHVybiBBO307RkNLVG9vbGJhckZvbnRGb3JtYXRDb21iby5wcm90b3R5cGUuUmVmcmVzaEFjdGl2ZUl0ZW1zPWZ1bmN0aW9uKEEpe3ZhciBCPUZDSy5Ub29sYmFyU2V0LkN1cnJlbnRJbnN0YW5jZS5TZWxlY3Rpb24uR2V0Qm91bmRhcnlQYXJlbnRFbGVtZW50KHRydWUpO2lmIChCKXt2YXIgQz1uZXcgRkNLRWxlbWVudFBhdGgoQik7dmFyIEQ9Qy5CbG9jaztpZiAoRCl7Zm9yICh2YXIgaSBpbiBBLkl0ZW1zKXt2YXIgRT1BLkl0ZW1zW2ldO3ZhciBGPUUuU3R5bGU7aWYgKEYuQ2hlY2tFbGVtZW50UmVtb3ZhYmxlKEQpKXtBLlNldExhYmVsKEYuTGFiZWwpO3JldHVybjt9fX19O0EuU2V0TGFiZWwodGhpcy5EZWZhdWx0TGFiZWwpO307RkNLVG9vbGJhckZvbnRGb3JtYXRDb21iby5wcm90b3R5cGUuU3R5bGVDb21ib19PbkJlZm9yZUNsaWNrPWZ1bmN0aW9uKEEpe0EuRGVzZWxlY3RBbGwoKTt2YXIgQj1GQ0suVG9vbGJhclNldC5DdXJyZW50SW5zdGFuY2UuU2VsZWN0aW9uLkdldEJvdW5kYXJ5UGFyZW50RWxlbWVudCh0cnVlKTtpZiAoQil7dmFyIEM9bmV3IEZDS0VsZW1lbnRQYXRoKEIpO3ZhciBEPUMuQmxvY2s7Zm9yICh2YXIgaSBpbiBBLkl0ZW1zKXt2YXIgRT1BLkl0ZW1zW2ldO3ZhciBGPUUuU3R5bGU7aWYgKEYuQ2hlY2tFbGVtZW50UmVtb3ZhYmxlKEQpKXtBLlNlbGVjdEl0ZW0oRSk7cmV0dXJuO319fX07CnZhciBGQ0tUb29sYmFyRm9udHNDb21ibz1mdW5jdGlvbihBLEIpe3RoaXMuQ29tbWFuZE5hbWU9J0ZvbnROYW1lJzt0aGlzLkxhYmVsPXRoaXMuR2V0TGFiZWwoKTt0aGlzLlRvb2x0aXA9QT9BOnRoaXMuTGFiZWw7dGhpcy5TdHlsZT1CP0I6Mjt0aGlzLkRlZmF1bHRMYWJlbD1GQ0tDb25maWcuRGVmYXVsdEZvbnRMYWJlbHx8Jyc7fTtGQ0tUb29sYmFyRm9udHNDb21iby5wcm90b3R5cGU9bmV3IEZDS1Rvb2xiYXJGb250Rm9ybWF0Q29tYm8oZmFsc2UpO0ZDS1Rvb2xiYXJGb250c0NvbWJvLnByb3RvdHlwZS5HZXRMYWJlbD1mdW5jdGlvbigpe3JldHVybiBGQ0tMYW5nLkZvbnQ7fTtGQ0tUb29sYmFyRm9udHNDb21iby5wcm90b3R5cGUuR2V0U3R5bGVzPWZ1bmN0aW9uKCl7dmFyIEE9RkNLU3R5bGVzLkdldFN0eWxlKCdfRkNLX0ZvbnRGYWNlJyk7aWYgKCFBKXthbGVydCgiVGhlIEZDS0NvbmZpZy5Db3JlU3R5bGVzWydTaXplJ10gc2V0dGluZyB3YXMgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGZja2NvbmZpZy5qcyBmaWxlIik7cmV0dXJuIHt9O307dmFyIEI9e307dmFyIEM9RkNLQ29uZmlnLkZvbnROYW1lcy5zcGxpdCgnOycpO2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIEQ9Q1tpXS5zcGxpdCgnLycpO3ZhciBFPURbMF07dmFyIEY9RFsxXXx8RTt2YXIgRz1GQ0tUb29scy5DbG9uZU9iamVjdChBKTtHLlNldFZhcmlhYmxlKCdGb250JyxFKTtHLkxhYmVsPUY7QltGXT1HO307cmV0dXJuIEI7fTtGQ0tUb29sYmFyRm9udHNDb21iby5wcm90b3R5cGUuUmVmcmVzaEFjdGl2ZUl0ZW1zPUZDS1Rvb2xiYXJTdHlsZUNvbWJvLnByb3RvdHlwZS5SZWZyZXNoQWN0aXZlSXRlbXM7RkNLVG9vbGJhckZvbnRzQ29tYm8ucHJvdG90eXBlLlN0eWxlQ29tYm9fT25CZWZvcmVDbGljaz1mdW5jdGlvbihBKXtBLkRlc2VsZWN0QWxsKCk7dmFyIEI9RkNLU2VsZWN0aW9uLkdldEJvdW5kYXJ5UGFyZW50RWxlbWVudCh0cnVlKTtpZiAoQil7dmFyIEM9bmV3IEZDS0VsZW1lbnRQYXRoKEIpO2ZvciAodmFyIGkgaW4gQS5JdGVtcyl7dmFyIEQ9QS5JdGVtc1tpXTt2YXIgRT1ELlN0eWxlO2lmIChFLkNoZWNrQWN0aXZlKEMpKXtBLlNlbGVjdEl0ZW0oRCk7cmV0dXJuO319fX07CnZhciBGQ0tUb29sYmFyRm9udFNpemVDb21ibz1mdW5jdGlvbihBLEIpe3RoaXMuQ29tbWFuZE5hbWU9J0ZvbnRTaXplJzt0aGlzLkxhYmVsPXRoaXMuR2V0TGFiZWwoKTt0aGlzLlRvb2x0aXA9QT9BOnRoaXMuTGFiZWw7dGhpcy5TdHlsZT1CP0I6Mjt0aGlzLkRlZmF1bHRMYWJlbD1GQ0tDb25maWcuRGVmYXVsdEZvbnRTaXplTGFiZWx8fCcnO3RoaXMuRmllbGRXaWR0aD03MDt9O0ZDS1Rvb2xiYXJGb250U2l6ZUNvbWJvLnByb3RvdHlwZT1uZXcgRkNLVG9vbGJhckZvbnRGb3JtYXRDb21ibyhmYWxzZSk7RkNLVG9vbGJhckZvbnRTaXplQ29tYm8ucHJvdG90eXBlLkdldExhYmVsPWZ1bmN0aW9uKCl7cmV0dXJuIEZDS0xhbmcuRm9udFNpemU7fTtGQ0tUb29sYmFyRm9udFNpemVDb21iby5wcm90b3R5cGUuR2V0U3R5bGVzPWZ1bmN0aW9uKCl7dmFyIEE9RkNLU3R5bGVzLkdldFN0eWxlKCdfRkNLX1NpemUnKTtpZiAoIUEpe2FsZXJ0KCJUaGUgRkNLQ29uZmlnLkNvcmVTdHlsZXNbJ0ZvbnRGYWNlJ10gc2V0dGluZyB3YXMgbm90IGZvdW5kLiBQbGVhc2UgY2hlY2sgdGhlIGZja2NvbmZpZy5qcyBmaWxlIik7cmV0dXJuIHt9O307dmFyIEI9e307dmFyIEM9RkNLQ29uZmlnLkZvbnRTaXplcy5zcGxpdCgnOycpO2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKyl7dmFyIEQ9Q1tpXS5zcGxpdCgnLycpO3ZhciBFPURbMF07dmFyIEY9RFsxXXx8RTt2YXIgRz1GQ0tUb29scy5DbG9uZU9iamVjdChBKTtHLlNldFZhcmlhYmxlKCdTaXplJyxFKTtHLkxhYmVsPUY7QltGXT1HO307cmV0dXJuIEI7fTtGQ0tUb29sYmFyRm9udFNpemVDb21iby5wcm90b3R5cGUuUmVmcmVzaEFjdGl2ZUl0ZW1zPUZDS1Rvb2xiYXJTdHlsZUNvbWJvLnByb3RvdHlwZS5SZWZyZXNoQWN0aXZlSXRlbXM7RkNLVG9vbGJhckZvbnRTaXplQ29tYm8ucHJvdG90eXBlLlN0eWxlQ29tYm9fT25CZWZvcmVDbGljaz1GQ0tUb29sYmFyRm9udHNDb21iby5wcm90b3R5cGUuU3R5bGVDb21ib19PbkJlZm9yZUNsaWNrOwp2YXIgRkNLVG9vbGJhclBhbmVsQnV0dG9uPWZ1bmN0aW9uKEEsQixDLEQsRSl7dGhpcy5Db21tYW5kTmFtZT1BO3ZhciBGO2lmIChFPT1udWxsKSBGPUZDS0NvbmZpZy5Ta2luUGF0aCsndG9vbGJhci8nK0EudG9Mb3dlckNhc2UoKSsnLmdpZic7ZWxzZSBpZiAodHlwZW9mKEUpPT0nbnVtYmVyJykgRj1bRkNLQ29uZmlnLlNraW5QYXRoKydmY2tfc3RyaXAuZ2lmJywxNixFXTt2YXIgRz10aGlzLl9VSUJ1dHRvbj1uZXcgRkNLVG9vbGJhckJ1dHRvblVJKEEsQixDLEYsRCk7Ry5fRkNLVG9vbGJhclBhbmVsQnV0dG9uPXRoaXM7Ry5TaG93QXJyb3c9dHJ1ZTtHLk9uQ2xpY2s9RkNLVG9vbGJhclBhbmVsQnV0dG9uX09uQnV0dG9uQ2xpY2s7fTtGQ0tUb29sYmFyUGFuZWxCdXR0b24ucHJvdG90eXBlLlR5cGVOYW1lPSdGQ0tUb29sYmFyUGFuZWxCdXR0b24nO0ZDS1Rvb2xiYXJQYW5lbEJ1dHRvbi5wcm90b3R5cGUuQ3JlYXRlPWZ1bmN0aW9uKEEpe0EuY2xhc3NOYW1lKz0nTWVudSc7dGhpcy5fVUlCdXR0b24uQ3JlYXRlKEEpO3ZhciBCPUZDSy5Ub29sYmFyU2V0LkN1cnJlbnRJbnN0YW5jZS5Db21tYW5kcy5HZXRDb21tYW5kKHRoaXMuQ29tbWFuZE5hbWUpLl9QYW5lbDt0aGlzLlJlZ2lzdGVyUGFuZWwoQik7fTtGQ0tUb29sYmFyUGFuZWxCdXR0b24ucHJvdG90eXBlLlJlZ2lzdGVyUGFuZWw9ZnVuY3Rpb24oQSl7aWYgKEEuX0ZDS1Rvb2xiYXJQYW5lbEJ1dHRvbikgcmV0dXJuO0EuX0ZDS1Rvb2xiYXJQYW5lbEJ1dHRvbj10aGlzO3ZhciBCPUEuRG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChBLkRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtCLnN0eWxlLnBvc2l0aW9uPSdhYnNvbHV0ZSc7Qi5zdHlsZS50b3A9JzBweCc7dmFyIEM9QS5fRkNLVG9vbGJhclBhbmVsQnV0dG9uTGluZURpdj1CLmFwcGVuZENoaWxkKEEuRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnSU1HJykpO0MuY2xhc3NOYW1lPSdUQl9Db25uZWN0aW9uTGluZSc7Qy5zdHlsZS5wb3NpdGlvbj0nYWJzb2x1dGUnO0Muc3JjPUZDS19TUEFDRVJfUEFUSDtBLk9uSGlkZT1GQ0tUb29sYmFyUGFuZWxCdXR0b25fT25QYW5lbEhpZGU7fTtmdW5jdGlvbiBGQ0tUb29sYmFyUGFuZWxCdXR0b25fT25CdXR0b25DbGljayhBKXt2YXIgQj10aGlzLl9GQ0tUb29sYmFyUGFuZWxCdXR0b247dmFyIGU9Qi5fVUlCdXR0b24uTWFpbkVsZW1lbnQ7Qi5fVUlCdXR0b24uQ2hhbmdlU3RhdGUoMSk7dmFyIEM9RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLkNvbW1hbmRzLkdldENvbW1hbmQoQi5Db21tYW5kTmFtZSk7dmFyIEQ9Qy5fUGFuZWw7RC5fRkNLVG9vbGJhclBhbmVsQnV0dG9uTGluZURpdi5zdHlsZS53aWR0aD0oZS5vZmZzZXRXaWR0aC0yKSsncHgnO0MuRXhlY3V0ZSgwLGUub2Zmc2V0SGVpZ2h0LTEsZSk7fTtmdW5jdGlvbiBGQ0tUb29sYmFyUGFuZWxCdXR0b25fT25QYW5lbEhpZGUoKXt2YXIgQT10aGlzLl9GQ0tUb29sYmFyUGFuZWxCdXR0b247QS5fVUlCdXR0b24uQ2hhbmdlU3RhdGUoMCk7fTtGQ0tUb29sYmFyUGFuZWxCdXR0b24ucHJvdG90eXBlLlJlZnJlc2hTdGF0ZT1GQ0tUb29sYmFyQnV0dG9uLnByb3RvdHlwZS5SZWZyZXNoU3RhdGU7RkNLVG9vbGJhclBhbmVsQnV0dG9uLnByb3RvdHlwZS5FbmFibGU9RkNLVG9vbGJhckJ1dHRvbi5wcm90b3R5cGUuRW5hYmxlO0ZDS1Rvb2xiYXJQYW5lbEJ1dHRvbi5wcm90b3R5cGUuRGlzYWJsZT1GQ0tUb29sYmFyQnV0dG9uLnByb3RvdHlwZS5EaXNhYmxlOwp2YXIgRkNLU2NheXQ7KGZ1bmN0aW9uKCl7dmFyIEE9W107dmFyIEI9KEZDSyYmRkNLLkVkaXRvcldpbmRvdyYmRkNLLkVkaXRvcldpbmRvdy5wYXJlbnQucGFyZW50LnNjYXl0KT90cnVlOmZhbHNlO3ZhciBDPWZhbHNlO3ZhciBEPWZhbHNlO2Z1bmN0aW9uIFNjYXl0RW5naW5lTG9hZChjYWxsYmFjayl7aWYgKEIpIHJldHVybjtCPXRydWU7dmFyIEU9RkNLLkVkaXRvcldpbmRvdy5wYXJlbnQucGFyZW50O3ZhciBGPWZ1bmN0aW9uICgpe3dpbmRvdy5zY2F5dD1FLnNjYXl0O0luaXRTY2F5dCgpO3ZhciBHPUZDS1Rvb2xiYXJJdGVtcy5Mb2FkZWRJdGVtc1snU2NheXRDb21ib2JveCddO0cmJkcuU2V0RW5hYmxlZChzY3l0X2NvbnRyb2wmJnNjeXRfY29udHJvbC5kaXNhYmxlZCk7SW5pdFNldHVwKCk7fTtpZiAoRS5zY2F5dCl7RigpO3JldHVybjt9O2lmIChGQ0suQ29uZmlnLlNjYXl0Q3VzdG9tVXJsKSBGQ0suQ29uZmlnLlNjYXl0Q3VzdG9tVXJsPW5ldyBTdHJpbmcoRkNLLkNvbmZpZy5TY2F5dEN1c3RvbVVybCkucmVwbGFjZShuZXcgUmVnRXhwKCJeaHR0cFtzXSo6XC9cLyIpLCIiKTt2YXIgSD1kb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbDt2YXIgST1GQ0suQ29uZmlnLlNjYXl0Q3VzdG9tVXJsfHwnc3ZjLnNwZWxsY2hlY2tlci5uZXQvc3BlbGxjaGVjazMvbGYvc2NheXQvc2NheXQ0LmpzJzt2YXIgSj1IKycvLycrSTt2YXIgSz1QYXJzZVVybChKKS5wYXRoKycvJzt2YXIgTD1FLndpbmRvdy5DS0VESVRPUnx8KEUud2luZG93LkNLRURJVE9SPXt9KTtMLl9kalNjYXl0Q29uZmlnPXtJOkssYWRkT25Mb2FkOmZ1bmN0aW9uKCl7RigpO30saXNEZWJ1ZzpmYWxzZX07aWYgKGNhbGxiYWNrKSBBLnB1c2goY2FsbGJhY2spO0RvTG9hZFNjcmlwdChKKTt9O2Z1bmN0aW9uIERvTG9hZFNjcmlwdCh1cmwpe2lmICghdXJsKSByZXR1cm4gZmFsc2U7dmFyIEU9RkNLLkVkaXRvcldpbmRvdy5wYXJlbnQucGFyZW50O3ZhciBzPUUuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7cy50eXBlPSd0ZXh0L2phdmFzY3JpcHQnO3Muc3JjPXVybDtFLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQocyk7cmV0dXJuIHRydWU7fTtmdW5jdGlvbiBQYXJzZVVybChkYXRhKXt2YXIgbT1kYXRhLm1hdGNoKC8oLiopW1wvXFxdKFteXC9cXF0rXC5cdyspJC8pO3JldHVybiBtP3sgcGF0aDptWzFdLGZpbGU6bVsyXSB9OmRhdGE7fTtmdW5jdGlvbiBjcmVhdGVTY2F5dENvbnRyb2wgKCl7dmFyIE49e307dmFyIEU9RkNLLkVkaXRvcldpbmRvdy5wYXJlbnQucGFyZW50O04uc3JjTm9kZVJlZj1GQ0suRWRpdGluZ0FyZWEuSUZyYW1lO04uY3VzdG9tZXJpZD1GQ0suQ29uZmlnLlNjYXl0Q3VzdG9tZXJpZDtOLmN1c3RvbURpY3Rpb25hcnlOYW1lPUZDSy5Db25maWcuU2NheXRDdXN0b21EaWN0aW9uYXJ5TmFtZTtOLnVzZXJEaWN0aW9uYXJ5TmFtZT1GQ0suQ29uZmlnLlNjYXl0VXNlckRpY3Rpb25hcnlOYW1lO04uZGVmTGFuZz1GQ0suQ29uZmlnLlNjYXl0RGVmTGFuZzt2YXIgUD1FLnNjYXl0O3ZhciBRPXdpbmRvdy5zY2F5dF9jb250cm9sPW5ldyBQKE4pO307ZnVuY3Rpb24gSW5pdFNjYXl0KCl7Y3JlYXRlU2NheXRDb250cm9sKCk7dmFyIFE9d2luZG93LnNjYXl0X2NvbnRyb2w7aWYgKFEpe1Euc2V0RGlzYWJsZWQoZmFsc2UpO0Q9dHJ1ZTtDPSFRLmRpc2FibGVkO3ZhciBHPUZDS1Rvb2xiYXJJdGVtcy5Mb2FkZWRJdGVtc1snU2NheXRDb21ib2JveCddO0cmJkcuRW5hYmxlKCk7U2hvd1NjYXl0U3RhdGUoKTt9O2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKyl7dHJ5e0FbaV0uY2FsbCh0aGlzKTt9Y2F0Y2goZXJyKXt9fX07dmFyIFQ9ZnVuY3Rpb24oKXtuYW1lPSdTY2F5dCc7fTtULnByb3RvdHlwZS5FeGVjdXRlPWZ1bmN0aW9uKGMpe3N3aXRjaCAoYyl7Y2FzZSAnT3B0aW9ucyc6Y2FzZSAnTGFuZ3MnOmNhc2UgJ0Fib3V0JzppZiAoQiYmRCYmIUMpe1NjYXl0TWVzc2FnZSgnU0NBWVQgaXMgbm90IGVuYWJsZWQnKTticmVhazt9O2lmIChCJiZEKSBGQ0tEaWFsb2cuT3BlbkRpYWxvZygnU2NheXQnLCdTQ0FZVCBTZXR0aW5ncycsJ2RpYWxvZy9mY2tfc2NheXQuaHRtbD8nK2MudG9Mb3dlckNhc2UoKSwzNDMsMzQzKTticmVhaztkZWZhdWx0OmlmICghQil7dmFyIFU9dGhpcztTY2F5dEVuZ2luZUxvYWQoZnVuY3Rpb24gKCl7VS5TZXRFbmFibGVkKCF3aW5kb3cuc2NheXRfY29udHJvbC5kaXNhYmxlZCk7fSk7cmV0dXJuIHRydWU7fWVsc2UgaWYgKEQpe2lmIChDKSB0aGlzLkRpc2FibGUoKTtlbHNlIHRoaXMuRW5hYmxlKCk7U2hvd1NjYXl0U3RhdGUoKTt9fTtpZiAoIUIpIHJldHVybiBTY2F5dE1lc3NhZ2UoJ1NDQVlUIGlzIG5vdCBsb2FkZWQnKXx8ZmFsc2U7aWYgKCFEKSByZXR1cm4gU2NheXRNZXNzYWdlKCdTQ0FZVCBpcyBub3QgcmVhZHknKXx8ZmFsc2U7cmV0dXJuIHRydWU7fTtULnByb3RvdHlwZS5FbmFibGU9ZnVuY3Rpb24oKXt3aW5kb3cuc2NheXRfY29udHJvbC5zZXREaXNhYmxlZChmYWxzZSk7Qz10cnVlO307VC5wcm90b3R5cGUuRGlzYWJsZT1mdW5jdGlvbigpe3dpbmRvdy5zY2F5dF9jb250cm9sLnNldERpc2FibGVkKHRydWUpO0M9ZmFsc2U7fTtULnByb3RvdHlwZS5TZXRFbmFibGVkPWZ1bmN0aW9uKHN0YXRlKXtpZiAoc3RhdGUpIHRoaXMuRW5hYmxlKCk7ZWxzZSB0aGlzLkRpc2FibGUoKTtTaG93U2NheXRTdGF0ZSgpO3JldHVybiB0cnVlO307VC5wcm90b3R5cGUuR2V0U3RhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gMDt9O2Z1bmN0aW9uIFNob3dTY2F5dFN0YXRlKCl7dmFyIFc9RkNLVG9vbGJhckl0ZW1zLkdldEl0ZW0oJ1NwZWxsQ2hlY2snKTtpZiAoIVd8fCFXLl9Db21ib3x8IVcuX0NvbWJvLl9PdXRlclRhYmxlKSByZXR1cm47dmFyIFg9Vy5fQ29tYm8uX091dGVyVGFibGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2ltZycpWzFdO3ZhciBZPVcuX0NvbWJvLkl0ZW1zWyd0cmlnZ2VyJ107aWYgKEMpe1guc3R5bGUub3BhY2l0eT0nMSc7WS5pbm5lckhUTUw9R2V0U3RhdHVzTGFiZWwoKTt9ZWxzZXtYLnN0eWxlLm9wYWNpdHk9JzAuNSc7WS5pbm5lckhUTUw9R2V0U3RhdHVzTGFiZWwoKTt9fTtmdW5jdGlvbiBHZXRTdGF0dXNMYWJlbCgpe2lmICghRCkgcmV0dXJuICAnPGI+RW5hYmxlIFNDQVlUPC9iPic7cmV0dXJuIEM/JzxiPkRpc2FibGUgU0NBWVQ8L2I+JzonPGI+RW5hYmxlIFNDQVlUPC9iPic7fTt2YXIgWj1mdW5jdGlvbih0b29sdGlwLHN0eWxlKXt0aGlzLkNvbW1hbmQ9RkNLQ29tbWFuZHMuR2V0Q29tbWFuZCgnU2NheXQnKTt0aGlzLkNvbW1hbmROYW1lPSdTY2F5dCc7dGhpcy5MYWJlbD10aGlzLkdldExhYmVsKCk7dGhpcy5Ub29sdGlwPUZDS0xhbmcuU2NheXRUaXRsZTt0aGlzLlN0eWxlPTE7fTtaLnByb3RvdHlwZT1uZXcgRkNLVG9vbGJhclNwZWNpYWxDb21ibztaLnByb3RvdHlwZS5DcmVhdGVJdGVtcz1mdW5jdGlvbigpe3RoaXMuX0NvbWJvLkFkZEl0ZW0oJ1RyaWdnZXInLCc8Yj5FbmFibGUgU0NBWVQ8L2I+Jyk7dGhpcy5fQ29tYm8uQWRkSXRlbSgnT3B0aW9ucycsRkNLTGFuZy5TY2F5dFRpdGxlT3B0aW9uc3x8Ik9wdGlvbnMiKTt0aGlzLl9Db21iby5BZGRJdGVtKCdMYW5ncycsRkNLTGFuZy5TY2F5dFRpdGxlTGFuZ3N8fCJMYW5ndWFnZXMiKTt0aGlzLl9Db21iby5BZGRJdGVtKCdBYm91dCcsRkNLTGFuZy5TY2F5dFRpdGxlQWJvdXR8fCJBYm91dCIpO307Wi5wcm90b3R5cGUuR2V0TGFiZWw9ZnVuY3Rpb24oKXt2YXIgYT1GQ0tDb25maWcuU2tpblBhdGgrJ2Zja19zdHJpcC5naWYnO3JldHVybiBGQ0tCcm93c2VySW5mby5Jc0lFPyc8ZGl2IGNsYXNzPSJUQl9CdXR0b25fSW1hZ2UiPjxpbWcgc3JjPSInK2ErJyIgc3R5bGU9InRvcDotMTkycHgiPjwvZGl2Pic6JzxpbWcgY2xhc3M9IlRCX0J1dHRvbl9JbWFnZSIgc3JjPSInK0ZDS19TUEFDRVJfUEFUSCsnIiBzdHlsZT0iYmFja2dyb3VuZC1wb3NpdGlvbjogMHB4IC0xOTJweDtiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJythKycpOyI+Jzt9O2Z1bmN0aW9uIFNjYXl0TWVzc2FnZShtKXttJiZhbGVydChtKTt9O3ZhciBiPWZ1bmN0aW9uKCl7bmFtZT0nU2NheXRDb250ZXh0Jzt9O2IucHJvdG90eXBlLkV4ZWN1dGU9ZnVuY3Rpb24oY29udGV4dEluZm8pe3ZhciBjPWNvbnRleHRJbmZvJiZjb250ZXh0SW5mby5hY3Rpb24sZz1jJiZjb250ZXh0SW5mby5ub2RlLFE9d2luZG93LnNjYXl0X2NvbnRyb2w7aWYgKGcpe3N3aXRjaCAoYyl7Y2FzZSAnU3VnZ2VzdGlvbic6US5yZXBsYWNlKGcsY29udGV4dEluZm8uc3VnZ2VzdGlvbik7YnJlYWs7Y2FzZSAnSWdub3JlJzpRLmlnbm9yZShnKTticmVhaztjYXNlICdJZ25vcmUgQWxsJzpRLmlnbm9yZUFsbChnKTticmVhaztjYXNlICdBZGQgV29yZCc6dmFyIEU9RkNLLkVkaXRvcldpbmRvdy5wYXJlbnQucGFyZW50O0Uuc2NheXQuYWRkV29yZFRvVXNlckRpY3Rpb25hcnkoZyk7YnJlYWs7fX19O2Z1bmN0aW9uIEluaXRTZXR1cCgpe0ZDSy5Db250ZXh0TWVudS5SZWdpc3Rlckxpc3RlbmVyKHtBZGRJdGVtczpmdW5jdGlvbihtZW51KXt2YXIgRT1GQ0suRWRpdG9yV2luZG93LnBhcmVudC5wYXJlbnQ7dmFyIFE9d2luZG93LnNjYXl0X2NvbnRyb2wsUD1FLnNjYXl0O2lmICghUSkgcmV0dXJuO3ZhciBnPVEuZ2V0U2NheXROb2RlKCk7aWYgKCFnKSByZXR1cm47dmFyIGg9UC5nZXRTdWdnZXN0aW9uKFEuZ2V0V29yZChnKSxRLmdldExhbmcoKSk7aWYgKCFofHwhaC5sZW5ndGgpIHJldHVybjttZW51LkFkZFNlcGFyYXRvcigpO3ZhciBqPUZDSy5Db25maWcuU2NheXRNYXhTdWdnZXN0aW9uc3x8NTt2YXIgaz0oaj09LTEpP2gubGVuZ3RoOmo7Zm9yICh2YXIgaT0wO2k8aztpKz0xKXtpZiAoaFtpXSl7bWVudS5BZGRJdGVtKCdTY2F5dENvbnRleHQnLGhbaV0sbnVsbCxmYWxzZSx7J2FjdGlvbic6J1N1Z2dlc3Rpb24nLCdub2RlJzpnLCdzdWdnZXN0aW9uJzpoW2ldIH0pO319O21lbnUuQWRkU2VwYXJhdG9yKCk7bWVudS5BZGRJdGVtKCdTY2F5dENvbnRleHQnLCdJZ25vcmUnLG51bGwsZmFsc2UseyAnYWN0aW9uJzonSWdub3JlJywnbm9kZSc6ZyB9KTttZW51LkFkZEl0ZW0oJ1NjYXl0Q29udGV4dCcsJ0lnbm9yZSBBbGwnLG51bGwsZmFsc2UseyAnYWN0aW9uJzonSWdub3JlIEFsbCcsJ25vZGUnOmcgfSk7bWVudS5BZGRJdGVtKCdTY2F5dENvbnRleHQnLCdBZGQgV29yZCcsbnVsbCxmYWxzZSx7ICdhY3Rpb24nOidBZGQgV29yZCcsJ25vZGUnOmcgfSk7dHJ5e2lmIChEJiZDKSBRLmZpcmVPbkNvbnRleHRNZW51KG51bGwsRkNLLkNvbnRleHRNZW51Ll9Jbm5lckNvbnRleHRNZW51KTt9Y2F0Y2goZXJyKSB7fX19KTtGQ0suRXZlbnRzLkF0dGFjaEV2ZW50KCdPblBhc3RlJyxmdW5jdGlvbigpe3dpbmRvdy5zY2F5dF9jb250cm9sLnJlZnJlc2goKTtyZXR1cm4gdHJ1ZTt9KTt9O0ZDSy5FdmVudHMuQXR0YWNoRXZlbnQoJ09uQWZ0ZXJTZXRIVE1MJyxmdW5jdGlvbigpe2lmIChGQ0tDb25maWcuU3BlbGxDaGVja2VyPT0nU0NBWVQnKXtpZiAoIUImJkZDSy5Db25maWcuU2NheXRBdXRvU3RhcnR1cCkgU2NheXRFbmdpbmVMb2FkKCk7aWYgKEZDSy5FZGl0TW9kZT09MCYmQiYmRCkgY3JlYXRlU2NheXRDb250cm9sKCk7U2hvd1NjYXl0U3RhdGUoKTt9fSk7RkNLLkV2ZW50cy5BdHRhY2hFdmVudCgnT25CZWZvcmVHZXREYXRhJyxmdW5jdGlvbigpe0QmJndpbmRvdy5zY2F5dF9jb250cm9sLnJlc2V0KCk7fSk7RkNLLkV2ZW50cy5BdHRhY2hFdmVudCgnT25BZnRlckdldERhdGEnLGZ1bmN0aW9uKCl7RCYmd2luZG93LnNjYXl0X2NvbnRyb2wucmVmcmVzaCgpO30pO0ZDS1NjYXl0PXtDcmVhdGVDb21tYW5kOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUKCk7fSxDcmVhdGVDb250ZXh0Q29tbWFuZDpmdW5jdGlvbigpe3JldHVybiBuZXcgYigpO30sQ3JlYXRlVG9vbGJhckl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFooKTt9fTt9KSgpOwp2YXIgRkNLVG9vbGJhckl0ZW1zPXt9O0ZDS1Rvb2xiYXJJdGVtcy5Mb2FkZWRJdGVtcz17fTtGQ0tUb29sYmFySXRlbXMuUmVnaXN0ZXJJdGVtPWZ1bmN0aW9uKEEsQil7dGhpcy5Mb2FkZWRJdGVtc1tBXT1CO307RkNLVG9vbGJhckl0ZW1zLkdldEl0ZW09ZnVuY3Rpb24oQSl7dmFyIEI9RkNLVG9vbGJhckl0ZW1zLkxvYWRlZEl0ZW1zW0FdO2lmIChCKSByZXR1cm4gQjtzd2l0Y2ggKEEpe2Nhc2UgJ1NvdXJjZSc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignU291cmNlJyxGQ0tMYW5nLlNvdXJjZSxudWxsLDIsdHJ1ZSx0cnVlLDEpO2JyZWFrO2Nhc2UgJ0RvY1Byb3BzJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdEb2NQcm9wcycsRkNLTGFuZy5Eb2NQcm9wcyxudWxsLG51bGwsbnVsbCxudWxsLDIpO2JyZWFrO2Nhc2UgJ1NhdmUnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1NhdmUnLEZDS0xhbmcuU2F2ZSxudWxsLG51bGwsdHJ1ZSxudWxsLDMpO2JyZWFrO2Nhc2UgJ05ld1BhZ2UnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ05ld1BhZ2UnLEZDS0xhbmcuTmV3UGFnZSxudWxsLG51bGwsdHJ1ZSxudWxsLDQpO2JyZWFrO2Nhc2UgJ1ByZXZpZXcnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1ByZXZpZXcnLEZDS0xhbmcuUHJldmlldyxudWxsLG51bGwsdHJ1ZSxudWxsLDUpO2JyZWFrO2Nhc2UgJ1RlbXBsYXRlcyc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignVGVtcGxhdGVzJyxGQ0tMYW5nLlRlbXBsYXRlcyxudWxsLG51bGwsbnVsbCxudWxsLDYpO2JyZWFrO2Nhc2UgJ0Fib3V0JzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdBYm91dCcsRkNLTGFuZy5BYm91dCxudWxsLG51bGwsdHJ1ZSxudWxsLDQ3KTticmVhaztjYXNlICdDdXQnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ0N1dCcsRkNLTGFuZy5DdXQsbnVsbCxudWxsLGZhbHNlLHRydWUsNyk7YnJlYWs7Y2FzZSAnQ29weSc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignQ29weScsRkNLTGFuZy5Db3B5LG51bGwsbnVsbCxmYWxzZSx0cnVlLDgpO2JyZWFrO2Nhc2UgJ1Bhc3RlJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdQYXN0ZScsRkNLTGFuZy5QYXN0ZSxudWxsLG51bGwsZmFsc2UsdHJ1ZSw5KTticmVhaztjYXNlICdQYXN0ZVRleHQnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1Bhc3RlVGV4dCcsRkNLTGFuZy5QYXN0ZVRleHQsbnVsbCxudWxsLGZhbHNlLHRydWUsMTApO2JyZWFrO2Nhc2UgJ1Bhc3RlV29yZCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignUGFzdGVXb3JkJyxGQ0tMYW5nLlBhc3RlV29yZCxudWxsLG51bGwsZmFsc2UsdHJ1ZSwxMSk7YnJlYWs7Y2FzZSAnUHJpbnQnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1ByaW50JyxGQ0tMYW5nLlByaW50LG51bGwsbnVsbCxmYWxzZSx0cnVlLDEyKTticmVhaztjYXNlICdVbmRvJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdVbmRvJyxGQ0tMYW5nLlVuZG8sbnVsbCxudWxsLGZhbHNlLHRydWUsMTQpO2JyZWFrO2Nhc2UgJ1JlZG8nOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1JlZG8nLEZDS0xhbmcuUmVkbyxudWxsLG51bGwsZmFsc2UsdHJ1ZSwxNSk7YnJlYWs7Y2FzZSAnU2VsZWN0QWxsJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdTZWxlY3RBbGwnLEZDS0xhbmcuU2VsZWN0QWxsLG51bGwsbnVsbCx0cnVlLG51bGwsMTgpO2JyZWFrO2Nhc2UgJ1JlbW92ZUZvcm1hdCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignUmVtb3ZlRm9ybWF0JyxGQ0tMYW5nLlJlbW92ZUZvcm1hdCxudWxsLG51bGwsZmFsc2UsdHJ1ZSwxOSk7YnJlYWs7Y2FzZSAnRml0V2luZG93JzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdGaXRXaW5kb3cnLEZDS0xhbmcuRml0V2luZG93LG51bGwsbnVsbCx0cnVlLHRydWUsNjYpO2JyZWFrO2Nhc2UgJ0JvbGQnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ0JvbGQnLEZDS0xhbmcuQm9sZCxudWxsLG51bGwsZmFsc2UsdHJ1ZSwyMCk7YnJlYWs7Y2FzZSAnSXRhbGljJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdJdGFsaWMnLEZDS0xhbmcuSXRhbGljLG51bGwsbnVsbCxmYWxzZSx0cnVlLDIxKTticmVhaztjYXNlICdVbmRlcmxpbmUnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1VuZGVybGluZScsRkNLTGFuZy5VbmRlcmxpbmUsbnVsbCxudWxsLGZhbHNlLHRydWUsMjIpO2JyZWFrO2Nhc2UgJ1N0cmlrZVRocm91Z2gnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1N0cmlrZVRocm91Z2gnLEZDS0xhbmcuU3RyaWtlVGhyb3VnaCxudWxsLG51bGwsZmFsc2UsdHJ1ZSwyMyk7YnJlYWs7Y2FzZSAnU3Vic2NyaXB0JzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdTdWJzY3JpcHQnLEZDS0xhbmcuU3Vic2NyaXB0LG51bGwsbnVsbCxmYWxzZSx0cnVlLDI0KTticmVhaztjYXNlICdTdXBlcnNjcmlwdCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignU3VwZXJzY3JpcHQnLEZDS0xhbmcuU3VwZXJzY3JpcHQsbnVsbCxudWxsLGZhbHNlLHRydWUsMjUpO2JyZWFrO2Nhc2UgJ09yZGVyZWRMaXN0JzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdJbnNlcnRPcmRlcmVkTGlzdCcsRkNLTGFuZy5OdW1iZXJlZExpc3RMYmwsRkNLTGFuZy5OdW1iZXJlZExpc3QsbnVsbCxmYWxzZSx0cnVlLDI2KTticmVhaztjYXNlICdVbm9yZGVyZWRMaXN0JzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdJbnNlcnRVbm9yZGVyZWRMaXN0JyxGQ0tMYW5nLkJ1bGxldGVkTGlzdExibCxGQ0tMYW5nLkJ1bGxldGVkTGlzdCxudWxsLGZhbHNlLHRydWUsMjcpO2JyZWFrO2Nhc2UgJ091dGRlbnQnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ091dGRlbnQnLEZDS0xhbmcuRGVjcmVhc2VJbmRlbnQsbnVsbCxudWxsLGZhbHNlLHRydWUsMjgpO2JyZWFrO2Nhc2UgJ0luZGVudCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignSW5kZW50JyxGQ0tMYW5nLkluY3JlYXNlSW5kZW50LG51bGwsbnVsbCxmYWxzZSx0cnVlLDI5KTticmVhaztjYXNlICdCbG9ja3F1b3RlJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdCbG9ja3F1b3RlJyxGQ0tMYW5nLkJsb2NrcXVvdGUsbnVsbCxudWxsLGZhbHNlLHRydWUsNzMpO2JyZWFrO2Nhc2UgJ0NyZWF0ZURpdic6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignQ3JlYXRlRGl2JyxGQ0tMYW5nLkNyZWF0ZURpdixudWxsLG51bGwsZmFsc2UsdHJ1ZSw3NCk7YnJlYWs7Y2FzZSAnTGluayc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignTGluaycsRkNLTGFuZy5JbnNlcnRMaW5rTGJsLEZDS0xhbmcuSW5zZXJ0TGluayxudWxsLGZhbHNlLHRydWUsMzQpO2JyZWFrO2Nhc2UgJ1VubGluayc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignVW5saW5rJyxGQ0tMYW5nLlJlbW92ZUxpbmssbnVsbCxudWxsLGZhbHNlLHRydWUsMzUpO2JyZWFrO2Nhc2UgJ0FuY2hvcic6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignQW5jaG9yJyxGQ0tMYW5nLkFuY2hvcixudWxsLG51bGwsbnVsbCxudWxsLDM2KTticmVhaztjYXNlICdJbWFnZSc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignSW1hZ2UnLEZDS0xhbmcuSW5zZXJ0SW1hZ2VMYmwsRkNLTGFuZy5JbnNlcnRJbWFnZSxudWxsLGZhbHNlLHRydWUsMzcpO2JyZWFrO2Nhc2UgJ0ZsYXNoJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdGbGFzaCcsRkNLTGFuZy5JbnNlcnRGbGFzaExibCxGQ0tMYW5nLkluc2VydEZsYXNoLG51bGwsZmFsc2UsdHJ1ZSwzOCk7YnJlYWs7Y2FzZSAnVGFibGUnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1RhYmxlJyxGQ0tMYW5nLkluc2VydFRhYmxlTGJsLEZDS0xhbmcuSW5zZXJ0VGFibGUsbnVsbCxmYWxzZSx0cnVlLDM5KTticmVhaztjYXNlICdTcGVjaWFsQ2hhcic6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignU3BlY2lhbENoYXInLEZDS0xhbmcuSW5zZXJ0U3BlY2lhbENoYXJMYmwsRkNLTGFuZy5JbnNlcnRTcGVjaWFsQ2hhcixudWxsLGZhbHNlLHRydWUsNDIpO2JyZWFrO2Nhc2UgJ1NtaWxleSc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignU21pbGV5JyxGQ0tMYW5nLkluc2VydFNtaWxleUxibCxGQ0tMYW5nLkluc2VydFNtaWxleSxudWxsLGZhbHNlLHRydWUsNDEpO2JyZWFrO2Nhc2UgJ1BhZ2VCcmVhayc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignUGFnZUJyZWFrJyxGQ0tMYW5nLlBhZ2VCcmVha0xibCxGQ0tMYW5nLlBhZ2VCcmVhayxudWxsLGZhbHNlLHRydWUsNDMpO2JyZWFrO2Nhc2UgJ1J1bGUnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1J1bGUnLEZDS0xhbmcuSW5zZXJ0TGluZUxibCxGQ0tMYW5nLkluc2VydExpbmUsbnVsbCxmYWxzZSx0cnVlLDQwKTticmVhaztjYXNlICdKdXN0aWZ5TGVmdCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignSnVzdGlmeUxlZnQnLEZDS0xhbmcuTGVmdEp1c3RpZnksbnVsbCxudWxsLGZhbHNlLHRydWUsMzApO2JyZWFrO2Nhc2UgJ0p1c3RpZnlDZW50ZXInOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ0p1c3RpZnlDZW50ZXInLEZDS0xhbmcuQ2VudGVySnVzdGlmeSxudWxsLG51bGwsZmFsc2UsdHJ1ZSwzMSk7YnJlYWs7Y2FzZSAnSnVzdGlmeVJpZ2h0JzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdKdXN0aWZ5UmlnaHQnLEZDS0xhbmcuUmlnaHRKdXN0aWZ5LG51bGwsbnVsbCxmYWxzZSx0cnVlLDMyKTticmVhaztjYXNlICdKdXN0aWZ5RnVsbCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignSnVzdGlmeUZ1bGwnLEZDS0xhbmcuQmxvY2tKdXN0aWZ5LG51bGwsbnVsbCxmYWxzZSx0cnVlLDMzKTticmVhaztjYXNlICdTdHlsZSc6Qj1uZXcgRkNLVG9vbGJhclN0eWxlQ29tYm8oKTticmVhaztjYXNlICdGb250TmFtZSc6Qj1uZXcgRkNLVG9vbGJhckZvbnRzQ29tYm8oKTticmVhaztjYXNlICdGb250U2l6ZSc6Qj1uZXcgRkNLVG9vbGJhckZvbnRTaXplQ29tYm8oKTticmVhaztjYXNlICdGb250Rm9ybWF0JzpCPW5ldyBGQ0tUb29sYmFyRm9udEZvcm1hdENvbWJvKCk7YnJlYWs7Y2FzZSAnVGV4dENvbG9yJzpCPW5ldyBGQ0tUb29sYmFyUGFuZWxCdXR0b24oJ1RleHRDb2xvcicsRkNLTGFuZy5UZXh0Q29sb3IsbnVsbCxudWxsLDQ1KTticmVhaztjYXNlICdCR0NvbG9yJzpCPW5ldyBGQ0tUb29sYmFyUGFuZWxCdXR0b24oJ0JHQ29sb3InLEZDS0xhbmcuQkdDb2xvcixudWxsLG51bGwsNDYpO2JyZWFrO2Nhc2UgJ0ZpbmQnOkI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ0ZpbmQnLEZDS0xhbmcuRmluZCxudWxsLG51bGwsbnVsbCxudWxsLDE2KTticmVhaztjYXNlICdSZXBsYWNlJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdSZXBsYWNlJyxGQ0tMYW5nLlJlcGxhY2UsbnVsbCxudWxsLG51bGwsbnVsbCwxNyk7YnJlYWs7Y2FzZSAnRm9ybSc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignRm9ybScsRkNLTGFuZy5Gb3JtLG51bGwsbnVsbCxudWxsLG51bGwsNDgpO2JyZWFrO2Nhc2UgJ0NoZWNrYm94JzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdDaGVja2JveCcsRkNLTGFuZy5DaGVja2JveCxudWxsLG51bGwsbnVsbCxudWxsLDQ5KTticmVhaztjYXNlICdSYWRpbyc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignUmFkaW8nLEZDS0xhbmcuUmFkaW9CdXR0b24sbnVsbCxudWxsLG51bGwsbnVsbCw1MCk7YnJlYWs7Y2FzZSAnVGV4dEZpZWxkJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdUZXh0RmllbGQnLEZDS0xhbmcuVGV4dEZpZWxkLG51bGwsbnVsbCxudWxsLG51bGwsNTEpO2JyZWFrO2Nhc2UgJ1RleHRhcmVhJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdUZXh0YXJlYScsRkNLTGFuZy5UZXh0YXJlYSxudWxsLG51bGwsbnVsbCxudWxsLDUyKTticmVhaztjYXNlICdIaWRkZW5GaWVsZCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignSGlkZGVuRmllbGQnLEZDS0xhbmcuSGlkZGVuRmllbGQsbnVsbCxudWxsLG51bGwsbnVsbCw1Nik7YnJlYWs7Y2FzZSAnQnV0dG9uJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdCdXR0b24nLEZDS0xhbmcuQnV0dG9uLG51bGwsbnVsbCxudWxsLG51bGwsNTQpO2JyZWFrO2Nhc2UgJ1NlbGVjdCc6Qj1uZXcgRkNLVG9vbGJhckJ1dHRvbignU2VsZWN0JyxGQ0tMYW5nLlNlbGVjdGlvbkZpZWxkLG51bGwsbnVsbCxudWxsLG51bGwsNTMpO2JyZWFrO2Nhc2UgJ0ltYWdlQnV0dG9uJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdJbWFnZUJ1dHRvbicsRkNLTGFuZy5JbWFnZUJ1dHRvbixudWxsLG51bGwsbnVsbCxudWxsLDU1KTticmVhaztjYXNlICdTaG93QmxvY2tzJzpCPW5ldyBGQ0tUb29sYmFyQnV0dG9uKCdTaG93QmxvY2tzJyxGQ0tMYW5nLlNob3dCbG9ja3MsbnVsbCxudWxsLG51bGwsdHJ1ZSw3Mik7YnJlYWs7Y2FzZSAnU3BlbGxDaGVjayc6aWYgKEZDS0NvbmZpZy5TcGVsbENoZWNrZXI9PSdTQ0FZVCcpIEI9RkNLU2NheXQuQ3JlYXRlVG9vbGJhckl0ZW0oKTtlbHNlIEI9bmV3IEZDS1Rvb2xiYXJCdXR0b24oJ1NwZWxsQ2hlY2snLEZDS0xhbmcuU3BlbGxDaGVjayxudWxsLG51bGwsbnVsbCxudWxsLDEzKTticmVhaztkZWZhdWx0OmFsZXJ0KEZDS0xhbmcuVW5rbm93blRvb2xiYXJJdGVtLnJlcGxhY2UoLyUxL2csQSkpO3JldHVybiBudWxsO307RkNLVG9vbGJhckl0ZW1zLkxvYWRlZEl0ZW1zW0FdPUI7cmV0dXJuIEI7fTsKdmFyIEZDS1Rvb2xiYXI9ZnVuY3Rpb24oKXt0aGlzLkl0ZW1zPVtdO307RkNLVG9vbGJhci5wcm90b3R5cGUuQWRkSXRlbT1mdW5jdGlvbihBKXtyZXR1cm4gdGhpcy5JdGVtc1t0aGlzLkl0ZW1zLmxlbmd0aF09QTt9O0ZDS1Rvb2xiYXIucHJvdG90eXBlLkFkZEJ1dHRvbj1mdW5jdGlvbihBLEIsQyxELEUsRil7aWYgKHR5cGVvZihEKT09J251bWJlcicpIEQ9W3RoaXMuRGVmYXVsdEljb25zU3RyaXAsdGhpcy5EZWZhdWx0SWNvblNpemUsRF07dmFyIEc9bmV3IEZDS1Rvb2xiYXJCdXR0b25VSShBLEIsQyxELEUsRik7Ry5fRkNLVG9vbGJhcj10aGlzO0cuT25DbGljaz1GQ0tUb29sYmFyX09uSXRlbUNsaWNrO3JldHVybiB0aGlzLkFkZEl0ZW0oRyk7fTtmdW5jdGlvbiBGQ0tUb29sYmFyX09uSXRlbUNsaWNrKEEpe3ZhciBCPUEuX0ZDS1Rvb2xiYXI7aWYgKEIuT25JdGVtQ2xpY2spIEIuT25JdGVtQ2xpY2soQixBKTt9O0ZDS1Rvb2xiYXIucHJvdG90eXBlLkFkZFNlcGFyYXRvcj1mdW5jdGlvbigpe3RoaXMuQWRkSXRlbShuZXcgRkNLVG9vbGJhclNlcGFyYXRvcigpKTt9O0ZDS1Rvb2xiYXIucHJvdG90eXBlLkNyZWF0ZT1mdW5jdGlvbihBKXt2YXIgQj1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoQSk7dmFyIGU9Qi5jcmVhdGVFbGVtZW50KCd0YWJsZScpO2UuY2xhc3NOYW1lPSdUQl9Ub29sYmFyJztlLnN0eWxlLnN0eWxlRmxvYXQ9ZS5zdHlsZS5jc3NGbG9hdD0oRkNLTGFuZy5EaXI9PSdsdHInPydsZWZ0JzoncmlnaHQnKTtlLmRpcj1GQ0tMYW5nLkRpcjtlLmNlbGxQYWRkaW5nPTA7ZS5jZWxsU3BhY2luZz0wO3ZhciBDPWUuaW5zZXJ0Um93KC0xKTt2YXIgRDtpZiAoIXRoaXMuSGlkZVN0YXJ0KXtEPUMuaW5zZXJ0Q2VsbCgtMSk7RC5hcHBlbmRDaGlsZChCLmNyZWF0ZUVsZW1lbnQoJ2RpdicpKS5jbGFzc05hbWU9J1RCX1N0YXJ0Jzt9O2ZvciAodmFyIGk9MDtpPHRoaXMuSXRlbXMubGVuZ3RoO2krKyl7dGhpcy5JdGVtc1tpXS5DcmVhdGUoQy5pbnNlcnRDZWxsKC0xKSk7fTtpZiAoIXRoaXMuSGlkZUVuZCl7RD1DLmluc2VydENlbGwoLTEpO0QuYXBwZW5kQ2hpbGQoQi5jcmVhdGVFbGVtZW50KCdkaXYnKSkuY2xhc3NOYW1lPSdUQl9FbmQnO307QS5hcHBlbmRDaGlsZChlKTt9O3ZhciBGQ0tUb29sYmFyU2VwYXJhdG9yPWZ1bmN0aW9uKCl7fTtGQ0tUb29sYmFyU2VwYXJhdG9yLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oQSl7RkNLVG9vbHMuQXBwZW5kRWxlbWVudChBLCdkaXYnKS5jbGFzc05hbWU9J1RCX1NlcGFyYXRvcic7fTsKdmFyIEZDS1Rvb2xiYXJCcmVhaz1mdW5jdGlvbigpe307RkNLVG9vbGJhckJyZWFrLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oQSl7dmFyIEI9RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEEpLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO0IuY2xhc3NOYW1lPSdUQl9CcmVhayc7Qi5zdHlsZS5jbGVhcj1GQ0tMYW5nLkRpcj09J3J0bCc/J2xlZnQnOidyaWdodCc7QS5hcHBlbmRDaGlsZChCKTt9OwpmdW5jdGlvbiBGQ0tUb29sYmFyU2V0X0NyZWF0ZShBKXt2YXIgQjt2YXIgQz1BfHxGQ0tDb25maWcuVG9vbGJhckxvY2F0aW9uO3N3aXRjaCAoQyl7Y2FzZSAnSW4nOmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd4VG9vbGJhclJvdycpLnN0eWxlLmRpc3BsYXk9Jyc7Qj1uZXcgRkNLVG9vbGJhclNldChkb2N1bWVudCk7YnJlYWs7Y2FzZSAnTm9uZSc6Qj1uZXcgRkNLVG9vbGJhclNldChkb2N1bWVudCk7YnJlYWs7ZGVmYXVsdDpGQ0suRXZlbnRzLkF0dGFjaEV2ZW50KCdPbkJsdXInLEZDS19PbkJsdXIpO0ZDSy5FdmVudHMuQXR0YWNoRXZlbnQoJ09uRm9jdXMnLEZDS19PbkZvY3VzKTt2YXIgRDt2YXIgRT1DLm1hdGNoKC9eT3V0OiguKylcKChcdyspXCkkLyk7aWYgKEUpe2lmIChGQ0tCcm93c2VySW5mby5Jc0FJUikgRkNLQWRvYmVBSVIuVG9vbGJhclNldF9HZXRPdXRFbGVtZW50KHdpbmRvdyxFKTtlbHNlIEQ9ZXZhbCgncGFyZW50LicrRVsxXSkuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRVsyXSk7fWVsc2V7RT1DLm1hdGNoKC9eT3V0OihcdyspJC8pO2lmIChFKSBEPXBhcmVudC5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChFWzFdKTt9O2lmICghRCl7YWxlcnQoJ0ludmFsaWQgdmFsdWUgZm9yICJUb29sYmFyTG9jYXRpb24iJyk7cmV0dXJuIGFyZ3VtZW50cy5jYWxsZWUoJ0luJyk7fTtCPUQuX19GQ0tUb29sYmFyU2V0O2lmIChCKSBicmVhazt2YXIgRj1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoRCkuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7Ri5zcmM9J2phdmFzY3JpcHQ6dm9pZCgwKSc7Ri5mcmFtZUJvcmRlcj0wO0Yud2lkdGg9JzEwMCUnO0YuaGVpZ2h0PScxMCc7RC5hcHBlbmRDaGlsZChGKTtGLnVuc2VsZWN0YWJsZT0nb24nO3ZhciBHPUYuY29udGVudFdpbmRvdy5kb2N1bWVudDt2YXIgSD0nJztpZiAoRkNLQnJvd3NlckluZm8uSXNTYWZhcmkpIEg9JzxiYXNlIGhyZWY9Iicrd2luZG93LmRvY3VtZW50LmxvY2F0aW9uKyciPic7Ry5vcGVuKCk7Ry53cml0ZSgnPGh0bWw+PGhlYWQ+JytIKyc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+IHZhciBhZGp1c3QgPSBmdW5jdGlvbigpIHsgd2luZG93LmZyYW1lRWxlbWVudC5oZWlnaHQgPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCA7IH07IHdpbmRvdy5vbnJlc2l6ZSA9IHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpe3ZhciB0aW1lciA9IG51bGw7dmFyIGxhc3RIZWlnaHQgPSAtMTt2YXIgbGFzdENoYW5nZSA9IDA7dmFyIHBvbGxlciA9IGZ1bmN0aW9uKCl7dmFyIGN1cnJlbnRIZWlnaHQgPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCB8fCAwO3ZhciBjdXJyZW50VGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7aWYgKGN1cnJlbnRIZWlnaHQgIT0gbGFzdEhlaWdodCl7bGFzdENoYW5nZSA9IGN1cnJlbnRUaW1lO2FkanVzdCgpO2xhc3RIZWlnaHQgPSBkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodDt9aWYgKGxhc3RDaGFuZ2UgPCBjdXJyZW50VGltZSAtIDEwMDApIGNsZWFySW50ZXJ2YWwodGltZXIpO307dGltZXIgPSBzZXRJbnRlcnZhbChwb2xsZXIsIDEwMCk7fTwvc2NyaXB0PjwvaGVhZD48Ym9keSBzdHlsZT0ib3ZlcmZsb3c6IGhpZGRlbiI+Jytkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneFRvb2xiYXJTcGFjZScpLmlubmVySFRNTCsnPC9ib2R5PjwvaHRtbD4nKTtHLmNsb3NlKCk7aWYoRkNLQnJvd3NlckluZm8uSXNBSVIpIEZDS0Fkb2JlQUlSLlRvb2xiYXJTZXRfSW5pdE91dEZyYW1lKEcpO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXIoRywnY29udGV4dG1lbnUnLEZDS1Rvb2xzLkNhbmNlbEV2ZW50KTtGQ0tUb29scy5BcHBlbmRTdHlsZVNoZWV0KEcsRkNLQ29uZmlnLlNraW5FZGl0b3JDU1MpO0I9RC5fX0ZDS1Rvb2xiYXJTZXQ9bmV3IEZDS1Rvb2xiYXJTZXQoRyk7Qi5fSUZyYW1lPUY7aWYgKEZDSy5JRUNsZWFudXApIEZDSy5JRUNsZWFudXAuQWRkSXRlbShELEZDS1Rvb2xiYXJTZXRfVGFyZ2V0X0NsZWFudXApO307Qi5DdXJyZW50SW5zdGFuY2U9RkNLO2lmICghQi5Ub29sYmFySXRlbXMpIEIuVG9vbGJhckl0ZW1zPUZDS1Rvb2xiYXJJdGVtcztGQ0suQXR0YWNoVG9PblNlbGVjdGlvbkNoYW5nZShCLlJlZnJlc2hJdGVtc1N0YXRlKTtyZXR1cm4gQjt9O2Z1bmN0aW9uIEZDS19PbkJsdXIoQSl7dmFyIEI9QS5Ub29sYmFyU2V0O2lmIChCLkN1cnJlbnRJbnN0YW5jZT09QSkgQi5EaXNhYmxlKCk7fTtmdW5jdGlvbiBGQ0tfT25Gb2N1cyhBKXt2YXIgQj1BLlRvb2xiYXJTZXQ7dmFyIEM9QXx8RkNLO0IuQ3VycmVudEluc3RhbmNlLkZvY3VzTWFuYWdlci5SZW1vdmVXaW5kb3coQi5fSUZyYW1lLmNvbnRlbnRXaW5kb3cpO0IuQ3VycmVudEluc3RhbmNlPUM7Qy5Gb2N1c01hbmFnZXIuQWRkV2luZG93KEIuX0lGcmFtZS5jb250ZW50V2luZG93LHRydWUpO0IuRW5hYmxlKCk7fTtmdW5jdGlvbiBGQ0tUb29sYmFyU2V0X0NsZWFudXAoKXt0aGlzLl9UYXJnZXRFbGVtZW50PW51bGw7dGhpcy5fSUZyYW1lPW51bGw7fTtmdW5jdGlvbiBGQ0tUb29sYmFyU2V0X1RhcmdldF9DbGVhbnVwKCl7dGhpcy5fX0ZDS1Rvb2xiYXJTZXQ9bnVsbDt9O3ZhciBGQ0tUb29sYmFyU2V0PWZ1bmN0aW9uKEEpe3RoaXMuX0RvY3VtZW50PUE7dGhpcy5fVGFyZ2V0RWxlbWVudD1BLmdldEVsZW1lbnRCeUlkKCd4VG9vbGJhcicpO3ZhciBCPUEuZ2V0RWxlbWVudEJ5SWQoJ3hFeHBhbmRIYW5kbGUnKTt2YXIgQz1BLmdldEVsZW1lbnRCeUlkKCd4Q29sbGFwc2VIYW5kbGUnKTtCLnRpdGxlPUZDS0xhbmcuVG9vbGJhckV4cGFuZDtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyKEIsJ2NsaWNrJyxGQ0tUb29sYmFyU2V0X0V4cGFuZF9PbkNsaWNrKTtDLnRpdGxlPUZDS0xhbmcuVG9vbGJhckNvbGxhcHNlO0ZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXIoQywnY2xpY2snLEZDS1Rvb2xiYXJTZXRfQ29sbGFwc2VfT25DbGljayk7aWYgKCFGQ0tDb25maWcuVG9vbGJhckNhbkNvbGxhcHNlfHxGQ0tDb25maWcuVG9vbGJhclN0YXJ0RXhwYW5kZWQpIHRoaXMuRXhwYW5kKCk7ZWxzZSB0aGlzLkNvbGxhcHNlKCk7Qy5zdHlsZS5kaXNwbGF5PUZDS0NvbmZpZy5Ub29sYmFyQ2FuQ29sbGFwc2U/Jyc6J25vbmUnO2lmIChGQ0tDb25maWcuVG9vbGJhckNhbkNvbGxhcHNlKSBDLnN0eWxlLmRpc3BsYXk9Jyc7ZWxzZSBBLmdldEVsZW1lbnRCeUlkKCd4VEJMZWZ0Qm9yZGVyJykuc3R5bGUuZGlzcGxheT0nJzt0aGlzLlRvb2xiYXJzPVtdO3RoaXMuSXNMb2FkZWQ9ZmFsc2U7aWYgKEZDSy5JRUNsZWFudXApIEZDSy5JRUNsZWFudXAuQWRkSXRlbSh0aGlzLEZDS1Rvb2xiYXJTZXRfQ2xlYW51cCk7fTtmdW5jdGlvbiBGQ0tUb29sYmFyU2V0X0V4cGFuZF9PbkNsaWNrKCl7RkNLLlRvb2xiYXJTZXQuRXhwYW5kKCk7fTtmdW5jdGlvbiBGQ0tUb29sYmFyU2V0X0NvbGxhcHNlX09uQ2xpY2soKXtGQ0suVG9vbGJhclNldC5Db2xsYXBzZSgpO307RkNLVG9vbGJhclNldC5wcm90b3R5cGUuRXhwYW5kPWZ1bmN0aW9uKCl7dGhpcy5fQ2hhbmdlVmlzaWJpbGl0eShmYWxzZSk7fTtGQ0tUb29sYmFyU2V0LnByb3RvdHlwZS5Db2xsYXBzZT1mdW5jdGlvbigpe3RoaXMuX0NoYW5nZVZpc2liaWxpdHkodHJ1ZSk7fTtGQ0tUb29sYmFyU2V0LnByb3RvdHlwZS5fQ2hhbmdlVmlzaWJpbGl0eT1mdW5jdGlvbihBKXt0aGlzLl9Eb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneENvbGxhcHNlZCcpLnN0eWxlLmRpc3BsYXk9QT8nJzonbm9uZSc7dGhpcy5fRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3hFeHBhbmRlZCcpLnN0eWxlLmRpc3BsYXk9QT8nbm9uZSc6Jyc7aWYgKHdpbmRvdy5vbnJlc2l6ZSl7RkNLVG9vbHMuUnVuRnVuY3Rpb24od2luZG93Lm9ucmVzaXplKTt9fTtGQ0tUb29sYmFyU2V0LnByb3RvdHlwZS5Mb2FkPWZ1bmN0aW9uKEEpe3RoaXMuTmFtZT1BO3RoaXMuSXRlbXM9W107dGhpcy5JdGVtc1d5c2l3eWdPbmx5PVtdO3RoaXMuSXRlbXNDb250ZXh0U2Vuc2l0aXZlPVtdO3RoaXMuX1RhcmdldEVsZW1lbnQuaW5uZXJIVE1MPScnO3ZhciBCPUZDS0NvbmZpZy5Ub29sYmFyU2V0c1tBXTtpZiAoIUIpe2FsZXJ0KEZDS0xhbmcuVW5rbm93blRvb2xiYXJTZXQucmVwbGFjZSgvJTEvZyxBKSk7cmV0dXJuO307dGhpcy5Ub29sYmFycz1bXTtmb3IgKHZhciB4PTA7eDxCLmxlbmd0aDt4Kyspe3ZhciBDPUJbeF07aWYgKCFDKSBjb250aW51ZTt2YXIgRDtpZiAodHlwZW9mKEMpPT0nc3RyaW5nJyl7aWYgKEM9PScvJykgRD1uZXcgRkNLVG9vbGJhckJyZWFrKCk7fWVsc2V7RD1uZXcgRkNLVG9vbGJhcigpO2ZvciAodmFyIGo9MDtqPEMubGVuZ3RoO2orKyl7dmFyIEU9Q1tqXTtpZiAoRT09Jy0nKSBELkFkZFNlcGFyYXRvcigpO2Vsc2V7dmFyIEY9RkNLVG9vbGJhckl0ZW1zLkdldEl0ZW0oRSk7aWYgKEYpe0QuQWRkSXRlbShGKTt0aGlzLkl0ZW1zLnB1c2goRik7aWYgKCFGLlNvdXJjZVZpZXcpIHRoaXMuSXRlbXNXeXNpd3lnT25seS5wdXNoKEYpO2lmIChGLkNvbnRleHRTZW5zaXRpdmUpIHRoaXMuSXRlbXNDb250ZXh0U2Vuc2l0aXZlLnB1c2goRik7fX19fTtELkNyZWF0ZSh0aGlzLl9UYXJnZXRFbGVtZW50KTt0aGlzLlRvb2xiYXJzW3RoaXMuVG9vbGJhcnMubGVuZ3RoXT1EO307RkNLVG9vbHMuRGlzYWJsZVNlbGVjdGlvbih0aGlzLl9Eb2N1bWVudC5nZXRFbGVtZW50QnlJZCgneENvbGxhcHNlSGFuZGxlJykucGFyZW50Tm9kZSk7aWYgKEZDSy5TdGF0dXMhPTIpIEZDSy5FdmVudHMuQXR0YWNoRXZlbnQoJ09uU3RhdHVzQ2hhbmdlJyx0aGlzLlJlZnJlc2hNb2RlU3RhdGUpO2Vsc2UgdGhpcy5SZWZyZXNoTW9kZVN0YXRlKCk7dGhpcy5Jc0xvYWRlZD10cnVlO3RoaXMuSXNFbmFibGVkPXRydWU7RkNLVG9vbHMuUnVuRnVuY3Rpb24odGhpcy5PbkxvYWQpO307RkNLVG9vbGJhclNldC5wcm90b3R5cGUuRW5hYmxlPWZ1bmN0aW9uKCl7aWYgKHRoaXMuSXNFbmFibGVkKSByZXR1cm47dGhpcy5Jc0VuYWJsZWQ9dHJ1ZTt2YXIgQT10aGlzLkl0ZW1zO2ZvciAodmFyIGk9MDtpPEEubGVuZ3RoO2krKykgQVtpXS5SZWZyZXNoU3RhdGUoKTt9O0ZDS1Rvb2xiYXJTZXQucHJvdG90eXBlLkRpc2FibGU9ZnVuY3Rpb24oKXtpZiAoIXRoaXMuSXNFbmFibGVkKSByZXR1cm47dGhpcy5Jc0VuYWJsZWQ9ZmFsc2U7dmFyIEE9dGhpcy5JdGVtcztmb3IgKHZhciBpPTA7aTxBLmxlbmd0aDtpKyspIEFbaV0uRGlzYWJsZSgpO307RkNLVG9vbGJhclNldC5wcm90b3R5cGUuUmVmcmVzaE1vZGVTdGF0ZT1mdW5jdGlvbihBKXtpZiAoRkNLLlN0YXR1cyE9MikgcmV0dXJuO3ZhciBCPUE/QS5Ub29sYmFyU2V0OnRoaXM7dmFyIEM9Qi5JdGVtc1d5c2l3eWdPbmx5O2lmIChGQ0suRWRpdE1vZGU9PTApe2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKykgQ1tpXS5FbmFibGUoKTtCLlJlZnJlc2hJdGVtc1N0YXRlKEEpO31lbHNle0IuUmVmcmVzaEl0ZW1zU3RhdGUoQSk7Zm9yICh2YXIgaj0wO2o8Qy5sZW5ndGg7aisrKSBDW2pdLkRpc2FibGUoKTt9fTtGQ0tUb29sYmFyU2V0LnByb3RvdHlwZS5SZWZyZXNoSXRlbXNTdGF0ZT1mdW5jdGlvbihBKXt2YXIgQj0oQT9BLlRvb2xiYXJTZXQ6dGhpcykuSXRlbXNDb250ZXh0U2Vuc2l0aXZlO2ZvciAodmFyIGk9MDtpPEIubGVuZ3RoO2krKykgQltpXS5SZWZyZXNoU3RhdGUoKTt9Owp2YXIgRkNLRGlhbG9nPShmdW5jdGlvbigpe3ZhciBBO3ZhciBCO3ZhciBDO3ZhciBEPXdpbmRvdy5wYXJlbnQ7d2hpbGUgKEQucGFyZW50JiZELnBhcmVudCE9RCl7dHJ5e2lmIChELnBhcmVudC5kb2N1bWVudC5kb21haW4hPWRvY3VtZW50LmRvbWFpbikgYnJlYWs7aWYgKEQucGFyZW50LmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdmcmFtZXNldCcpLmxlbmd0aD4wKSBicmVhazt9Y2F0Y2ggKGUpe2JyZWFrO307RD1ELnBhcmVudDt9O3ZhciBFPUQuZG9jdW1lbnQ7dmFyIEY9ZnVuY3Rpb24oKXtpZiAoIUIpIEI9RkNLQ29uZmlnLkZsb2F0aW5nUGFuZWxzWkluZGV4Kzk5OTtyZXR1cm4rK0I7fTt2YXIgRz1mdW5jdGlvbigpe2lmICghQykgcmV0dXJuO3ZhciBIPUZDS1Rvb2xzLklzU3RyaWN0TW9kZShFKT9FLmRvY3VtZW50RWxlbWVudDpFLmJvZHk7RkNLRG9tVG9vbHMuU2V0RWxlbWVudFN0eWxlcyhDLHsnd2lkdGgnOk1hdGgubWF4KEguc2Nyb2xsV2lkdGgsSC5jbGllbnRXaWR0aCxFLnNjcm9sbFdpZHRofHwwKS0xKydweCcsJ2hlaWdodCc6TWF0aC5tYXgoSC5zY3JvbGxIZWlnaHQsSC5jbGllbnRIZWlnaHQsRS5zY3JvbGxIZWlnaHR8fDApLTErJ3B4J30pO307cmV0dXJuIHtPcGVuRGlhbG9nOmZ1bmN0aW9uKGRpYWxvZ05hbWUsZGlhbG9nVGl0bGUsZGlhbG9nUGFnZSx3aWR0aCxoZWlnaHQsY3VzdG9tVmFsdWUscmVzaXphYmxlKXtpZiAoIUEpIHRoaXMuRGlzcGxheU1haW5Db3ZlcigpO3ZhciBJPXtUaXRsZTpkaWFsb2dUaXRsZSxQYWdlOmRpYWxvZ1BhZ2UsRWRpdG9yOndpbmRvdyxDdXN0b21WYWx1ZTpjdXN0b21WYWx1ZSxUb3BXaW5kb3c6RH07RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLlNlbGVjdGlvbi5TYXZlKHRydWUpO3ZhciBKPUZDS1Rvb2xzLkdldFZpZXdQYW5lU2l6ZShEKTt2YXIgSz17ICdYJzowLCdZJzowIH07dmFyIEw9RkNLQnJvd3NlckluZm8uSXNJRSYmKCFGQ0tCcm93c2VySW5mby5Jc0lFN3x8IUZDS1Rvb2xzLklzU3RyaWN0TW9kZShELmRvY3VtZW50KSk7aWYgKEwpIEs9RkNLVG9vbHMuR2V0U2Nyb2xsUG9zaXRpb24oRCk7dmFyIE09TWF0aC5tYXgoSy5ZKyhKLkhlaWdodC1oZWlnaHQtMjApLzIsMCk7dmFyIE49TWF0aC5tYXgoSy5YKyhKLldpZHRoLXdpZHRoLTIwKS8yLDApO3ZhciBPPUUuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7RkNLVG9vbHMuUmVzZXRTdHlsZXMoTyk7Ty5zcmM9RkNLQ29uZmlnLkJhc2VQYXRoKydmY2tkaWFsb2cuaHRtbCc7Ty5mcmFtZUJvcmRlcj0wO08uYWxsb3dUcmFuc3BhcmVuY3k9dHJ1ZTtGQ0tEb21Ub29scy5TZXRFbGVtZW50U3R5bGVzKE8seydwb3NpdGlvbic6KEwpPydhYnNvbHV0ZSc6J2ZpeGVkJywndG9wJzpNKydweCcsJ2xlZnQnOk4rJ3B4Jywnd2lkdGgnOndpZHRoKydweCcsJ2hlaWdodCc6aGVpZ2h0KydweCcsJ3pJbmRleCc6RigpfSk7Ty5fRGlhbG9nQXJndW1lbnRzPUk7RS5ib2R5LmFwcGVuZENoaWxkKE8pO08uX1BhcmVudERpYWxvZz1BO0E9Tzt9LE9uRGlhbG9nQ2xvc2U6ZnVuY3Rpb24oZGlhbG9nV2luZG93KXt2YXIgTz1kaWFsb2dXaW5kb3cuZnJhbWVFbGVtZW50O0ZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoTyk7aWYgKE8uX1BhcmVudERpYWxvZyl7QT1PLl9QYXJlbnREaWFsb2c7Ty5fUGFyZW50RGlhbG9nLmNvbnRlbnRXaW5kb3cuU2V0RW5hYmxlZCh0cnVlKTt9ZWxzZXtpZiAoIUZDS0Jyb3dzZXJJbmZvLklzSUUpIEZDSy5Gb2N1cygpO3RoaXMuSGlkZU1haW5Db3ZlcigpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXsgQT1udWxsO30sMCk7RkNLLlRvb2xiYXJTZXQuQ3VycmVudEluc3RhbmNlLlNlbGVjdGlvbi5SZWxlYXNlKCk7fX0sRGlzcGxheU1haW5Db3ZlcjpmdW5jdGlvbigpe0M9RS5jcmVhdGVFbGVtZW50KCdkaXYnKTtGQ0tUb29scy5SZXNldFN0eWxlcyhDKTtGQ0tEb21Ub29scy5TZXRFbGVtZW50U3R5bGVzKEMseydwb3NpdGlvbic6J2Fic29sdXRlJywnekluZGV4JzpGKCksJ3RvcCc6JzBweCcsJ2xlZnQnOicwcHgnLCdiYWNrZ3JvdW5kQ29sb3InOkZDS0NvbmZpZy5CYWNrZ3JvdW5kQmxvY2tlckNvbG9yfSk7RkNLRG9tVG9vbHMuU2V0T3BhY2l0eShDLEZDS0NvbmZpZy5CYWNrZ3JvdW5kQmxvY2tlck9wYWNpdHkpO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFJiYhRkNLQnJvd3NlckluZm8uSXNJRTcpe3ZhciBRPUUuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7RkNLVG9vbHMuUmVzZXRTdHlsZXMoUSk7US5oaWRlRm9jdXM9dHJ1ZTtRLmZyYW1lQm9yZGVyPTA7US5zcmM9RkNLVG9vbHMuR2V0Vm9pZFVybCgpO0ZDS0RvbVRvb2xzLlNldEVsZW1lbnRTdHlsZXMoUSx7J3dpZHRoJzonMTAwJScsJ2hlaWdodCc6JzEwMCUnLCdwb3NpdGlvbic6J2Fic29sdXRlJywnbGVmdCc6JzBweCcsJ3RvcCc6JzBweCcsJ2ZpbHRlcic6J3Byb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5BbHBoYShvcGFjaXR5PTApJ30pO0MuYXBwZW5kQ2hpbGQoUSk7fTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyKEQsJ3Jlc2l6ZScsRyk7RygpO0UuYm9keS5hcHBlbmRDaGlsZChDKTtGQ0tGb2N1c01hbmFnZXIuTG9jaygpO3ZhciBSPUZDSy5Ub29sYmFyU2V0LkN1cnJlbnRJbnN0YW5jZS5HZXRJbnN0YW5jZU9iamVjdCgnZnJhbWVFbGVtZW50Jyk7Ui5fZmNrX29yaWdpbmFsVGFiSW5kZXg9Ui50YWJJbmRleDtSLnRhYkluZGV4PS0xO30sSGlkZU1haW5Db3ZlcjpmdW5jdGlvbigpe0ZDS0RvbVRvb2xzLlJlbW92ZU5vZGUoQyk7RkNLRm9jdXNNYW5hZ2VyLlVubG9jaygpO3ZhciBSPUZDSy5Ub29sYmFyU2V0LkN1cnJlbnRJbnN0YW5jZS5HZXRJbnN0YW5jZU9iamVjdCgnZnJhbWVFbGVtZW50Jyk7Ui50YWJJbmRleD1SLl9mY2tfb3JpZ2luYWxUYWJJbmRleDtGQ0tEb21Ub29scy5DbGVhckVsZW1lbnRKU1Byb3BlcnR5KFIsJ19mY2tfb3JpZ2luYWxUYWJJbmRleCcpO30sR2V0Q292ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gQzt9fTt9KSgpOwp2YXIgRkNLTWVudUl0ZW09ZnVuY3Rpb24oQSxCLEMsRCxFLEYpe3RoaXMuTmFtZT1CO3RoaXMuTGFiZWw9Q3x8Qjt0aGlzLklzRGlzYWJsZWQ9RTt0aGlzLkljb249bmV3IEZDS0ljb24oRCk7dGhpcy5TdWJNZW51PW5ldyBGQ0tNZW51QmxvY2tQYW5lbCgpO3RoaXMuU3ViTWVudS5QYXJlbnQ9QTt0aGlzLlN1Yk1lbnUuT25DbGljaz1GQ0tUb29scy5DcmVhdGVFdmVudExpc3RlbmVyKEZDS01lbnVJdGVtX1N1Yk1lbnVfT25DbGljayx0aGlzKTt0aGlzLkN1c3RvbURhdGE9RjtpZiAoRkNLLklFQ2xlYW51cCkgRkNLLklFQ2xlYW51cC5BZGRJdGVtKHRoaXMsRkNLTWVudUl0ZW1fQ2xlYW51cCk7fTtGQ0tNZW51SXRlbS5wcm90b3R5cGUuQWRkSXRlbT1mdW5jdGlvbihBLEIsQyxELEUpe3RoaXMuSGFzU3ViTWVudT10cnVlO3JldHVybiB0aGlzLlN1Yk1lbnUuQWRkSXRlbShBLEIsQyxELEUpO307RkNLTWVudUl0ZW0ucHJvdG90eXBlLkFkZFNlcGFyYXRvcj1mdW5jdGlvbigpe3RoaXMuU3ViTWVudS5BZGRTZXBhcmF0b3IoKTt9O0ZDS01lbnVJdGVtLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oQSl7dmFyIEI9dGhpcy5IYXNTdWJNZW51O3ZhciBDPUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChBKTt2YXIgcj10aGlzLk1haW5FbGVtZW50PUEuaW5zZXJ0Um93KC0xKTtyLmNsYXNzTmFtZT10aGlzLklzRGlzYWJsZWQ/J01OX0l0ZW1fRGlzYWJsZWQnOidNTl9JdGVtJztpZiAoIXRoaXMuSXNEaXNhYmxlZCl7RkNLVG9vbHMuQWRkRXZlbnRMaXN0ZW5lckV4KHIsJ21vdXNlb3ZlcicsRkNLTWVudUl0ZW1fT25Nb3VzZU92ZXIsW3RoaXNdKTtGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgociwnY2xpY2snLEZDS01lbnVJdGVtX09uQ2xpY2ssW3RoaXNdKTtpZiAoIUIpIEZDS1Rvb2xzLkFkZEV2ZW50TGlzdGVuZXJFeChyLCdtb3VzZW91dCcsRkNLTWVudUl0ZW1fT25Nb3VzZU91dCxbdGhpc10pO307dmFyIEQ9ci5pbnNlcnRDZWxsKC0xKTtELmNsYXNzTmFtZT0nTU5fSWNvbic7RC5hcHBlbmRDaGlsZCh0aGlzLkljb24uQ3JlYXRlSWNvbkVsZW1lbnQoQykpO0Q9ci5pbnNlcnRDZWxsKC0xKTtELmNsYXNzTmFtZT0nTU5fTGFiZWwnO0Qubm9XcmFwPXRydWU7RC5hcHBlbmRDaGlsZChDLmNyZWF0ZVRleHROb2RlKHRoaXMuTGFiZWwpKTtEPXIuaW5zZXJ0Q2VsbCgtMSk7aWYgKEIpe0QuY2xhc3NOYW1lPSdNTl9BcnJvdyc7dmFyIEU9RC5hcHBlbmRDaGlsZChDLmNyZWF0ZUVsZW1lbnQoJ0lNRycpKTtFLnNyYz1GQ0tfSU1BR0VTX1BBVEgrJ2Fycm93XycrRkNLTGFuZy5EaXIrJy5naWYnO0Uud2lkdGg9NDtFLmhlaWdodD03O3RoaXMuU3ViTWVudS5DcmVhdGUoKTt0aGlzLlN1Yk1lbnUuUGFuZWwuT25IaWRlPUZDS1Rvb2xzLkNyZWF0ZUV2ZW50TGlzdGVuZXIoRkNLTWVudUl0ZW1fU3ViTWVudV9PbkhpZGUsdGhpcyk7fX07RkNLTWVudUl0ZW0ucHJvdG90eXBlLkFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5NYWluRWxlbWVudC5jbGFzc05hbWU9J01OX0l0ZW1fT3Zlcic7aWYgKHRoaXMuSGFzU3ViTWVudSl7dGhpcy5TdWJNZW51LlNob3codGhpcy5NYWluRWxlbWVudC5vZmZzZXRXaWR0aCsyLC0yLHRoaXMuTWFpbkVsZW1lbnQpO307RkNLVG9vbHMuUnVuRnVuY3Rpb24odGhpcy5PbkFjdGl2YXRlLHRoaXMpO307RkNLTWVudUl0ZW0ucHJvdG90eXBlLkRlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLk1haW5FbGVtZW50LmNsYXNzTmFtZT0nTU5fSXRlbSc7aWYgKHRoaXMuSGFzU3ViTWVudSkgdGhpcy5TdWJNZW51LkhpZGUoKTt9O2Z1bmN0aW9uIEZDS01lbnVJdGVtX1N1Yk1lbnVfT25DbGljayhBLEIpe0ZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKEIuT25DbGljayxCLFtBXSk7fTtmdW5jdGlvbiBGQ0tNZW51SXRlbV9TdWJNZW51X09uSGlkZShBKXtBLkRlYWN0aXZhdGUoKTt9O2Z1bmN0aW9uIEZDS01lbnVJdGVtX09uQ2xpY2soQSxCKXtpZiAoQi5IYXNTdWJNZW51KSBCLkFjdGl2YXRlKCk7ZWxzZXtCLkRlYWN0aXZhdGUoKTtGQ0tUb29scy5SdW5GdW5jdGlvbihCLk9uQ2xpY2ssQixbQl0pO319O2Z1bmN0aW9uIEZDS01lbnVJdGVtX09uTW91c2VPdmVyKEEsQil7Qi5BY3RpdmF0ZSgpO307ZnVuY3Rpb24gRkNLTWVudUl0ZW1fT25Nb3VzZU91dChBLEIpe0IuRGVhY3RpdmF0ZSgpO307ZnVuY3Rpb24gRkNLTWVudUl0ZW1fQ2xlYW51cCgpe3RoaXMuTWFpbkVsZW1lbnQ9bnVsbDt9Owp2YXIgRkNLTWVudUJsb2NrPWZ1bmN0aW9uKCl7dGhpcy5fSXRlbXM9W107fTtGQ0tNZW51QmxvY2sucHJvdG90eXBlLkNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX0l0ZW1zLmxlbmd0aDt9O0ZDS01lbnVCbG9jay5wcm90b3R5cGUuQWRkSXRlbT1mdW5jdGlvbihBLEIsQyxELEUpe3ZhciBGPW5ldyBGQ0tNZW51SXRlbSh0aGlzLEEsQixDLEQsRSk7Ri5PbkNsaWNrPUZDS1Rvb2xzLkNyZWF0ZUV2ZW50TGlzdGVuZXIoRkNLTWVudUJsb2NrX0l0ZW1fT25DbGljayx0aGlzKTtGLk9uQWN0aXZhdGU9RkNLVG9vbHMuQ3JlYXRlRXZlbnRMaXN0ZW5lcihGQ0tNZW51QmxvY2tfSXRlbV9PbkFjdGl2YXRlLHRoaXMpO3RoaXMuX0l0ZW1zLnB1c2goRik7cmV0dXJuIEY7fTtGQ0tNZW51QmxvY2sucHJvdG90eXBlLkFkZFNlcGFyYXRvcj1mdW5jdGlvbigpe3RoaXMuX0l0ZW1zLnB1c2gobmV3IEZDS01lbnVTZXBhcmF0b3IoKSk7fTtGQ0tNZW51QmxvY2sucHJvdG90eXBlLlJlbW92ZUFsbEl0ZW1zPWZ1bmN0aW9uKCl7dGhpcy5fSXRlbXM9W107dmFyIEE9dGhpcy5fSXRlbXNUYWJsZTtpZiAoQSl7d2hpbGUgKEEucm93cy5sZW5ndGg+MCkgQS5kZWxldGVSb3coMCk7fX07RkNLTWVudUJsb2NrLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oQSl7aWYgKCF0aGlzLl9JdGVtc1RhYmxlKXtpZiAoRkNLLklFQ2xlYW51cCkgRkNLLklFQ2xlYW51cC5BZGRJdGVtKHRoaXMsRkNLTWVudUJsb2NrX0NsZWFudXApO3RoaXMuX1dpbmRvdz1GQ0tUb29scy5HZXRFbGVtZW50V2luZG93KEEpO3ZhciBCPUZDS1Rvb2xzLkdldEVsZW1lbnREb2N1bWVudChBKTt2YXIgQz1BLmFwcGVuZENoaWxkKEIuY3JlYXRlRWxlbWVudCgndGFibGUnKSk7Qy5jZWxsUGFkZGluZz0wO0MuY2VsbFNwYWNpbmc9MDtGQ0tUb29scy5EaXNhYmxlU2VsZWN0aW9uKEMpO3ZhciBEPUMuaW5zZXJ0Um93KC0xKS5pbnNlcnRDZWxsKC0xKTtELmNsYXNzTmFtZT0nTU5fTWVudSc7dmFyIEU9dGhpcy5fSXRlbXNUYWJsZT1ELmFwcGVuZENoaWxkKEIuY3JlYXRlRWxlbWVudCgndGFibGUnKSk7RS5jZWxsUGFkZGluZz0wO0UuY2VsbFNwYWNpbmc9MDt9O2ZvciAodmFyIGk9MDtpPHRoaXMuX0l0ZW1zLmxlbmd0aDtpKyspIHRoaXMuX0l0ZW1zW2ldLkNyZWF0ZSh0aGlzLl9JdGVtc1RhYmxlKTt9O2Z1bmN0aW9uIEZDS01lbnVCbG9ja19JdGVtX09uQ2xpY2soQSxCKXtpZiAoQi5IaWRlKSBCLkhpZGUoKTtGQ0tUb29scy5SdW5GdW5jdGlvbihCLk9uQ2xpY2ssQixbQV0pO307ZnVuY3Rpb24gRkNLTWVudUJsb2NrX0l0ZW1fT25BY3RpdmF0ZShBKXt2YXIgQj1BLl9BY3RpdmVJdGVtO2lmIChCJiZCIT10aGlzKXtpZiAoIUZDS0Jyb3dzZXJJbmZvLklzSUUmJkIuSGFzU3ViTWVudSYmIXRoaXMuSGFzU3ViTWVudSl7QS5fV2luZG93LmZvY3VzKCk7QS5QYW5lbC5IYXNGb2N1cz10cnVlO307Qi5EZWFjdGl2YXRlKCk7fTtBLl9BY3RpdmVJdGVtPXRoaXM7fTtmdW5jdGlvbiBGQ0tNZW51QmxvY2tfQ2xlYW51cCgpe3RoaXMuX1dpbmRvdz1udWxsO3RoaXMuX0l0ZW1zVGFibGU9bnVsbDt9O3ZhciBGQ0tNZW51U2VwYXJhdG9yPWZ1bmN0aW9uKCl7fTtGQ0tNZW51U2VwYXJhdG9yLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oQSl7dmFyIEI9RkNLVG9vbHMuR2V0RWxlbWVudERvY3VtZW50KEEpO3ZhciByPUEuaW5zZXJ0Um93KC0xKTt2YXIgQz1yLmluc2VydENlbGwoLTEpO0MuY2xhc3NOYW1lPSdNTl9TZXBhcmF0b3IgTU5fSWNvbic7Qz1yLmluc2VydENlbGwoLTEpO0MuY2xhc3NOYW1lPSdNTl9TZXBhcmF0b3InO0MuYXBwZW5kQ2hpbGQoQi5jcmVhdGVFbGVtZW50KCdESVYnKSkuY2xhc3NOYW1lPSdNTl9TZXBhcmF0b3JfTGluZSc7Qz1yLmluc2VydENlbGwoLTEpO0MuY2xhc3NOYW1lPSdNTl9TZXBhcmF0b3InO0MuYXBwZW5kQ2hpbGQoQi5jcmVhdGVFbGVtZW50KCdESVYnKSkuY2xhc3NOYW1lPSdNTl9TZXBhcmF0b3JfTGluZSc7fTsKdmFyIEZDS01lbnVCbG9ja1BhbmVsPWZ1bmN0aW9uKCl7RkNLTWVudUJsb2NrLmNhbGwodGhpcyk7fTtGQ0tNZW51QmxvY2tQYW5lbC5wcm90b3R5cGU9bmV3IEZDS01lbnVCbG9jaygpO0ZDS01lbnVCbG9ja1BhbmVsLnByb3RvdHlwZS5DcmVhdGU9ZnVuY3Rpb24oKXt2YXIgQT10aGlzLlBhbmVsPSh0aGlzLlBhcmVudCYmdGhpcy5QYXJlbnQuUGFuZWw/dGhpcy5QYXJlbnQuUGFuZWwuQ3JlYXRlQ2hpbGRQYW5lbCgpOm5ldyBGQ0tQYW5lbCgpKTtBLkFwcGVuZFN0eWxlU2hlZXQoRkNLQ29uZmlnLlNraW5FZGl0b3JDU1MpO0ZDS01lbnVCbG9jay5wcm90b3R5cGUuQ3JlYXRlLmNhbGwodGhpcyxBLk1haW5Ob2RlKTt9O0ZDS01lbnVCbG9ja1BhbmVsLnByb3RvdHlwZS5TaG93PWZ1bmN0aW9uKHgseSxBKXtpZiAoIXRoaXMuUGFuZWwuQ2hlY2tJc09wZW5lZCgpKSB0aGlzLlBhbmVsLlNob3coeCx5LEEpO307RkNLTWVudUJsb2NrUGFuZWwucHJvdG90eXBlLkhpZGU9ZnVuY3Rpb24oKXtpZiAodGhpcy5QYW5lbC5DaGVja0lzT3BlbmVkKCkpIHRoaXMuUGFuZWwuSGlkZSgpO307CnZhciBGQ0tDb250ZXh0TWVudT1mdW5jdGlvbihBLEIpe3RoaXMuQ3RybERpc2FibGU9ZmFsc2U7dmFyIEM9dGhpcy5fUGFuZWw9bmV3IEZDS1BhbmVsKEEpO0MuQXBwZW5kU3R5bGVTaGVldChGQ0tDb25maWcuU2tpbkVkaXRvckNTUyk7Qy5Jc0NvbnRleHRNZW51PXRydWU7aWYgKEZDS0Jyb3dzZXJJbmZvLklzR2Vja28pIEMuRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZHJhZ2dlc3R1cmUnLGZ1bmN0aW9uKGUpIHtlLnByZXZlbnREZWZhdWx0KCk7cmV0dXJuIGZhbHNlO30sdHJ1ZSk7dmFyIEQ9dGhpcy5fTWVudUJsb2NrPW5ldyBGQ0tNZW51QmxvY2soKTtELlBhbmVsPUM7RC5PbkNsaWNrPUZDS1Rvb2xzLkNyZWF0ZUV2ZW50TGlzdGVuZXIoRkNLQ29udGV4dE1lbnVfTWVudUJsb2NrX09uQ2xpY2ssdGhpcyk7dGhpcy5fUmVkcmF3PXRydWU7fTtGQ0tDb250ZXh0TWVudS5wcm90b3R5cGUuU2V0TW91c2VDbGlja1dpbmRvdz1mdW5jdGlvbihBKXtpZiAoIUZDS0Jyb3dzZXJJbmZvLklzSUUpe3RoaXMuX0RvY3VtZW50PUEuZG9jdW1lbnQ7aWYgKEZDS0Jyb3dzZXJJbmZvLklzT3BlcmEmJiEoJ29uY29udGV4dG1lbnUnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ZvbycpKSl7dGhpcy5fRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJyxGQ0tDb250ZXh0TWVudV9Eb2N1bWVudF9Pbk1vdXNlRG93bixmYWxzZSk7dGhpcy5fRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsRkNLQ29udGV4dE1lbnVfRG9jdW1lbnRfT25Nb3VzZVVwLGZhbHNlKTt9O3RoaXMuX0RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JyxGQ0tDb250ZXh0TWVudV9Eb2N1bWVudF9PbkNvbnRleHRNZW51LGZhbHNlKTt9fTtGQ0tDb250ZXh0TWVudS5wcm90b3R5cGUuQWRkSXRlbT1mdW5jdGlvbihBLEIsQyxELEUpe3ZhciBGPXRoaXMuX01lbnVCbG9jay5BZGRJdGVtKEEsQixDLEQsRSk7dGhpcy5fUmVkcmF3PXRydWU7cmV0dXJuIEY7fTtGQ0tDb250ZXh0TWVudS5wcm90b3R5cGUuQWRkU2VwYXJhdG9yPWZ1bmN0aW9uKCl7dGhpcy5fTWVudUJsb2NrLkFkZFNlcGFyYXRvcigpO3RoaXMuX1JlZHJhdz10cnVlO307RkNLQ29udGV4dE1lbnUucHJvdG90eXBlLlJlbW92ZUFsbEl0ZW1zPWZ1bmN0aW9uKCl7dGhpcy5fTWVudUJsb2NrLlJlbW92ZUFsbEl0ZW1zKCk7dGhpcy5fUmVkcmF3PXRydWU7fTtGQ0tDb250ZXh0TWVudS5wcm90b3R5cGUuQXR0YWNoVG9FbGVtZW50PWZ1bmN0aW9uKEEpe2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKSBGQ0tUb29scy5BZGRFdmVudExpc3RlbmVyRXgoQSwnY29udGV4dG1lbnUnLEZDS0NvbnRleHRNZW51X0F0dGFjaGVkRWxlbWVudF9PbkNvbnRleHRNZW51LHRoaXMpO2Vsc2UgQS5fRkNLQ29udGV4dE1lbnU9dGhpczt9O2Z1bmN0aW9uIEZDS0NvbnRleHRNZW51X0RvY3VtZW50X09uQ29udGV4dE1lbnUoZSl7aWYgKEZDS0NvbmZpZy5Ccm93c2VyQ29udGV4dE1lbnUpIHJldHVybiB0cnVlO3ZhciBBPWUudGFyZ2V0O3doaWxlIChBKXtpZiAoQS5fRkNLQ29udGV4dE1lbnUpe2lmIChBLl9GQ0tDb250ZXh0TWVudS5DdHJsRGlzYWJsZSYmKGUuY3RybEtleXx8ZS5tZXRhS2V5KSkgcmV0dXJuIHRydWU7RkNLVG9vbHMuQ2FuY2VsRXZlbnQoZSk7RkNLQ29udGV4dE1lbnVfQXR0YWNoZWRFbGVtZW50X09uQ29udGV4dE1lbnUoZSxBLl9GQ0tDb250ZXh0TWVudSxBKTtyZXR1cm4gZmFsc2U7fTtBPUEucGFyZW50Tm9kZTt9O3JldHVybiB0cnVlO307dmFyIEZDS0NvbnRleHRNZW51X092ZXJyaWRlQnV0dG9uO2Z1bmN0aW9uIEZDS0NvbnRleHRNZW51X0RvY3VtZW50X09uTW91c2VEb3duKGUpe2lmKCFlfHxlLmJ1dHRvbiE9MikgcmV0dXJuIGZhbHNlO2lmIChGQ0tDb25maWcuQnJvd3NlckNvbnRleHRNZW51KSByZXR1cm4gdHJ1ZTt2YXIgQT1lLnRhcmdldDt3aGlsZSAoQSl7aWYgKEEuX0ZDS0NvbnRleHRNZW51KXtpZiAoQS5fRkNLQ29udGV4dE1lbnUuQ3RybERpc2FibGUmJihlLmN0cmxLZXl8fGUubWV0YUtleSkpIHJldHVybiB0cnVlO3ZhciBCPUZDS0NvbnRleHRNZW51X092ZXJyaWRlQnV0dG9uO2lmKCFCKXt2YXIgQz1GQ0tUb29scy5HZXRFbGVtZW50RG9jdW1lbnQoZS50YXJnZXQpO0I9RkNLQ29udGV4dE1lbnVfT3ZlcnJpZGVCdXR0b249Qy5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO0IudHlwZT0nYnV0dG9uJzt2YXIgRD1DLmNyZWF0ZUVsZW1lbnQoJ3AnKTtDLmJvZHkuYXBwZW5kQ2hpbGQoRCk7RC5hcHBlbmRDaGlsZChCKTt9O0Iuc3R5bGUuY3NzVGV4dD0ncG9zaXRpb246YWJzb2x1dGU7dG9wOicrKGUuY2xpZW50WS0yKSsncHg7bGVmdDonKyhlLmNsaWVudFgtMikrJ3B4O3dpZHRoOjVweDtoZWlnaHQ6NXB4O29wYWNpdHk6MC4wMSc7fTtBPUEucGFyZW50Tm9kZTt9O3JldHVybiBmYWxzZTt9O2Z1bmN0aW9uIEZDS0NvbnRleHRNZW51X0RvY3VtZW50X09uTW91c2VVcChlKXtpZiAoRkNLQ29uZmlnLkJyb3dzZXJDb250ZXh0TWVudSkgcmV0dXJuIHRydWU7dmFyIEE9RkNLQ29udGV4dE1lbnVfT3ZlcnJpZGVCdXR0b247aWYgKEEpe3ZhciBCPUEucGFyZW50Tm9kZTtCLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoQik7RkNLQ29udGV4dE1lbnVfT3ZlcnJpZGVCdXR0b249dW5kZWZpbmVkO2lmKGUmJmUuYnV0dG9uPT0yKXtGQ0tDb250ZXh0TWVudV9Eb2N1bWVudF9PbkNvbnRleHRNZW51KGUpO3JldHVybiBmYWxzZTt9fTtyZXR1cm4gdHJ1ZTt9O2Z1bmN0aW9uIEZDS0NvbnRleHRNZW51X0F0dGFjaGVkRWxlbWVudF9PbkNvbnRleHRNZW51KEEsQixDKXtpZiAoKEIuQ3RybERpc2FibGUmJihBLmN0cmxLZXl8fEEubWV0YUtleSkpfHxGQ0tDb25maWcuQnJvd3NlckNvbnRleHRNZW51KSByZXR1cm4gdHJ1ZTt2YXIgRD1DfHx0aGlzO2lmIChCLk9uQmVmb3JlT3BlbikgQi5PbkJlZm9yZU9wZW4uY2FsbChCLEQpO2lmIChCLl9NZW51QmxvY2suQ291bnQoKT09MCkgcmV0dXJuIGZhbHNlO2lmIChCLl9SZWRyYXcpe0IuX01lbnVCbG9jay5DcmVhdGUoQi5fUGFuZWwuTWFpbk5vZGUpO0IuX1JlZHJhdz1mYWxzZTt9O0ZDS1Rvb2xzLkRpc2FibGVTZWxlY3Rpb24oQi5fUGFuZWwuRG9jdW1lbnQuYm9keSk7dmFyIHg9MDt2YXIgeT0wO2lmIChGQ0tCcm93c2VySW5mby5Jc0lFKXt4PUEuc2NyZWVuWDt5PUEuc2NyZWVuWTt9ZWxzZSBpZiAoRkNLQnJvd3NlckluZm8uSXNTYWZhcmkpe3g9QS5jbGllbnRYO3k9QS5jbGllbnRZO31lbHNle3g9QS5wYWdlWDt5PUEucGFnZVk7fTtCLl9QYW5lbC5TaG93KHgseSxBLmN1cnJlbnRUYXJnZXR8fG51bGwpO3JldHVybiBmYWxzZTt9O2Z1bmN0aW9uIEZDS0NvbnRleHRNZW51X01lbnVCbG9ja19PbkNsaWNrKEEsQil7Qi5fUGFuZWwuSGlkZSgpO0ZDS1Rvb2xzLlJ1bkZ1bmN0aW9uKEIuT25JdGVtQ2xpY2ssQixBKTt9OwpGQ0suQ29udGV4dE1lbnU9e307RkNLLkNvbnRleHRNZW51Lkxpc3RlbmVycz1bXTtGQ0suQ29udGV4dE1lbnUuUmVnaXN0ZXJMaXN0ZW5lcj1mdW5jdGlvbihBKXtpZiAoQSkgdGhpcy5MaXN0ZW5lcnMucHVzaChBKTt9O2Z1bmN0aW9uIEZDS19Db250ZXh0TWVudV9Jbml0KCl7dmFyIEE9RkNLLkNvbnRleHRNZW51Ll9Jbm5lckNvbnRleHRNZW51PW5ldyBGQ0tDb250ZXh0TWVudShGQ0tCcm93c2VySW5mby5Jc0lFP3dpbmRvdzp3aW5kb3cucGFyZW50LEZDS0xhbmcuRGlyKTtBLkN0cmxEaXNhYmxlPUZDS0NvbmZpZy5Ccm93c2VyQ29udGV4dE1lbnVPbkN0cmw7QS5PbkJlZm9yZU9wZW49RkNLX0NvbnRleHRNZW51X09uQmVmb3JlT3BlbjtBLk9uSXRlbUNsaWNrPUZDS19Db250ZXh0TWVudV9Pbkl0ZW1DbGljazt2YXIgQj1GQ0suQ29udGV4dE1lbnU7Zm9yICh2YXIgaT0wO2k8RkNLQ29uZmlnLkNvbnRleHRNZW51Lmxlbmd0aDtpKyspIEIuUmVnaXN0ZXJMaXN0ZW5lcihGQ0tfQ29udGV4dE1lbnVfR2V0TGlzdGVuZXIoRkNLQ29uZmlnLkNvbnRleHRNZW51W2ldKSk7fTtmdW5jdGlvbiBGQ0tfQ29udGV4dE1lbnVfR2V0TGlzdGVuZXIoQSl7c3dpdGNoIChBKXtjYXNlICdHZW5lcmljJzpyZXR1cm4ge0FkZEl0ZW1zOmZ1bmN0aW9uKG1lbnUsdGFnLHRhZ05hbWUpe21lbnUuQWRkSXRlbSgnQ3V0JyxGQ0tMYW5nLkN1dCw3LEZDS0NvbW1hbmRzLkdldENvbW1hbmQoJ0N1dCcpLkdldFN0YXRlKCk9PS0xKTttZW51LkFkZEl0ZW0oJ0NvcHknLEZDS0xhbmcuQ29weSw4LEZDS0NvbW1hbmRzLkdldENvbW1hbmQoJ0NvcHknKS5HZXRTdGF0ZSgpPT0tMSk7bWVudS5BZGRJdGVtKCdQYXN0ZScsRkNLTGFuZy5QYXN0ZSw5LEZDS0NvbW1hbmRzLkdldENvbW1hbmQoJ1Bhc3RlJykuR2V0U3RhdGUoKT09LTEpO319O2Nhc2UgJ1RhYmxlJzpyZXR1cm4ge0FkZEl0ZW1zOmZ1bmN0aW9uKG1lbnUsdGFnLHRhZ05hbWUpe3ZhciBCPSh0YWdOYW1lPT0nVEFCTEUnKTt2YXIgQz0oIUImJkZDS1NlbGVjdGlvbi5IYXNBbmNlc3Rvck5vZGUoJ1RBQkxFJykpO2lmIChDKXttZW51LkFkZFNlcGFyYXRvcigpO3ZhciBEPW1lbnUuQWRkSXRlbSgnQ2VsbCcsRkNLTGFuZy5DZWxsQ00pO0QuQWRkSXRlbSgnVGFibGVJbnNlcnRDZWxsQmVmb3JlJyxGQ0tMYW5nLkluc2VydENlbGxCZWZvcmUsNjkpO0QuQWRkSXRlbSgnVGFibGVJbnNlcnRDZWxsQWZ0ZXInLEZDS0xhbmcuSW5zZXJ0Q2VsbEFmdGVyLDU4KTtELkFkZEl0ZW0oJ1RhYmxlRGVsZXRlQ2VsbHMnLEZDS0xhbmcuRGVsZXRlQ2VsbHMsNTkpO2lmIChGQ0tCcm93c2VySW5mby5Jc0dlY2tvKSBELkFkZEl0ZW0oJ1RhYmxlTWVyZ2VDZWxscycsRkNLTGFuZy5NZXJnZUNlbGxzLDYwLEZDS0NvbW1hbmRzLkdldENvbW1hbmQoJ1RhYmxlTWVyZ2VDZWxscycpLkdldFN0YXRlKCk9PS0xKTtlbHNle0QuQWRkSXRlbSgnVGFibGVNZXJnZVJpZ2h0JyxGQ0tMYW5nLk1lcmdlUmlnaHQsNjAsRkNLQ29tbWFuZHMuR2V0Q29tbWFuZCgnVGFibGVNZXJnZVJpZ2h0JykuR2V0U3RhdGUoKT09LTEpO0QuQWRkSXRlbSgnVGFibGVNZXJnZURvd24nLEZDS0xhbmcuTWVyZ2VEb3duLDYwLEZDS0NvbW1hbmRzLkdldENvbW1hbmQoJ1RhYmxlTWVyZ2VEb3duJykuR2V0U3RhdGUoKT09LTEpO307RC5BZGRJdGVtKCdUYWJsZUhvcml6b250YWxTcGxpdENlbGwnLEZDS0xhbmcuSG9yaXpvbnRhbFNwbGl0Q2VsbCw2MSxGQ0tDb21tYW5kcy5HZXRDb21tYW5kKCdUYWJsZUhvcml6b250YWxTcGxpdENlbGwnKS5HZXRTdGF0ZSgpPT0tMSk7RC5BZGRJdGVtKCdUYWJsZVZlcnRpY2FsU3BsaXRDZWxsJyxGQ0tMYW5nLlZlcnRpY2FsU3BsaXRDZWxsLDYxLEZDS0NvbW1hbmRzLkdldENvbW1hbmQoJ1RhYmxlVmVydGljYWxTcGxpdENlbGwnKS5HZXRTdGF0ZSgpPT0tMSk7RC5BZGRTZXBhcmF0b3IoKTtELkFkZEl0ZW0oJ1RhYmxlQ2VsbFByb3AnLEZDS0xhbmcuQ2VsbFByb3BlcnRpZXMsNTcsRkNLQ29tbWFuZHMuR2V0Q29tbWFuZCgnVGFibGVDZWxsUHJvcCcpLkdldFN0YXRlKCk9PS0xKTttZW51LkFkZFNlcGFyYXRvcigpO0Q9bWVudS5BZGRJdGVtKCdSb3cnLEZDS0xhbmcuUm93Q00pO0QuQWRkSXRlbSgnVGFibGVJbnNlcnRSb3dCZWZvcmUnLEZDS0xhbmcuSW5zZXJ0Um93QmVmb3JlLDcwKTtELkFkZEl0ZW0oJ1RhYmxlSW5zZXJ0Um93QWZ0ZXInLEZDS0xhbmcuSW5zZXJ0Um93QWZ0ZXIsNjIpO0QuQWRkSXRlbSgnVGFibGVEZWxldGVSb3dzJyxGQ0tMYW5nLkRlbGV0ZVJvd3MsNjMpO21lbnUuQWRkU2VwYXJhdG9yKCk7RD1tZW51LkFkZEl0ZW0oJ0NvbHVtbicsRkNLTGFuZy5Db2x1bW5DTSk7RC5BZGRJdGVtKCdUYWJsZUluc2VydENvbHVtbkJlZm9yZScsRkNLTGFuZy5JbnNlcnRDb2x1bW5CZWZvcmUsNzEpO0QuQWRkSXRlbSgnVGFibGVJbnNlcnRDb2x1bW5BZnRlcicsRkNLTGFuZy5JbnNlcnRDb2x1bW5BZnRlciw2NCk7RC5BZGRJdGVtKCdUYWJsZURlbGV0ZUNvbHVtbnMnLEZDS0xhbmcuRGVsZXRlQ29sdW1ucyw2NSk7fTtpZiAoQnx8Qyl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ1RhYmxlRGVsZXRlJyxGQ0tMYW5nLlRhYmxlRGVsZXRlKTttZW51LkFkZEl0ZW0oJ1RhYmxlUHJvcCcsRkNLTGFuZy5UYWJsZVByb3BlcnRpZXMsMzkpO319fTtjYXNlICdMaW5rJzpyZXR1cm4ge0FkZEl0ZW1zOmZ1bmN0aW9uKG1lbnUsdGFnLHRhZ05hbWUpe3ZhciBFPSh0YWdOYW1lPT0nQSd8fEZDS1NlbGVjdGlvbi5IYXNBbmNlc3Rvck5vZGUoJ0EnKSk7aWYgKEV8fEZDSy5HZXROYW1lZENvbW1hbmRTdGF0ZSgnVW5saW5rJykhPS0xKXt2YXIgRj1GQ0tTZWxlY3Rpb24uTW92ZVRvQW5jZXN0b3JOb2RlKCdBJyk7dmFyIEc9KEYmJkYubmFtZS5sZW5ndGg+MCYmRi5ocmVmLmxlbmd0aD09MCk7aWYgKEcpIHJldHVybjttZW51LkFkZFNlcGFyYXRvcigpO21lbnUuQWRkSXRlbSgnVmlzaXRMaW5rJyxGQ0tMYW5nLlZpc2l0TGluayk7bWVudS5BZGRTZXBhcmF0b3IoKTtpZiAoRSkgbWVudS5BZGRJdGVtKCdMaW5rJyxGQ0tMYW5nLkVkaXRMaW5rLDM0KTttZW51LkFkZEl0ZW0oJ1VubGluaycsRkNLTGFuZy5SZW1vdmVMaW5rLDM1KTt9fX07Y2FzZSAnSW1hZ2UnOnJldHVybiB7QWRkSXRlbXM6ZnVuY3Rpb24obWVudSx0YWcsdGFnTmFtZSl7aWYgKHRhZ05hbWU9PSdJTUcnJiYhdGFnLmdldEF0dHJpYnV0ZSgnX2Zja2Zha2VsZW1lbnQnKSl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ0ltYWdlJyxGQ0tMYW5nLkltYWdlUHJvcGVydGllcywzNyk7fX19O2Nhc2UgJ0FuY2hvcic6cmV0dXJuIHtBZGRJdGVtczpmdW5jdGlvbihtZW51LHRhZyx0YWdOYW1lKXt2YXIgRj1GQ0tTZWxlY3Rpb24uTW92ZVRvQW5jZXN0b3JOb2RlKCdBJyk7dmFyIEc9KEYmJkYubmFtZS5sZW5ndGg+MCk7aWYgKEd8fCh0YWdOYW1lPT0nSU1HJyYmdGFnLmdldEF0dHJpYnV0ZSgnX2Zja2FuY2hvcicpKSl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ0FuY2hvcicsRkNLTGFuZy5BbmNob3JQcm9wLDM2KTttZW51LkFkZEl0ZW0oJ0FuY2hvckRlbGV0ZScsRkNLTGFuZy5BbmNob3JEZWxldGUpO319fTtjYXNlICdGbGFzaCc6cmV0dXJuIHtBZGRJdGVtczpmdW5jdGlvbihtZW51LHRhZyx0YWdOYW1lKXtpZiAodGFnTmFtZT09J0lNRycmJnRhZy5nZXRBdHRyaWJ1dGUoJ19mY2tmbGFzaCcpKXttZW51LkFkZFNlcGFyYXRvcigpO21lbnUuQWRkSXRlbSgnRmxhc2gnLEZDS0xhbmcuRmxhc2hQcm9wZXJ0aWVzLDM4KTt9fX07Y2FzZSAnRm9ybSc6cmV0dXJuIHtBZGRJdGVtczpmdW5jdGlvbihtZW51LHRhZyx0YWdOYW1lKXtpZiAoRkNLU2VsZWN0aW9uLkhhc0FuY2VzdG9yTm9kZSgnRk9STScpKXttZW51LkFkZFNlcGFyYXRvcigpO21lbnUuQWRkSXRlbSgnRm9ybScsRkNLTGFuZy5Gb3JtUHJvcCw0OCk7fX19O2Nhc2UgJ0NoZWNrYm94JzpyZXR1cm4ge0FkZEl0ZW1zOmZ1bmN0aW9uKG1lbnUsdGFnLHRhZ05hbWUpe2lmICh0YWdOYW1lPT0nSU5QVVQnJiZ0YWcudHlwZT09J2NoZWNrYm94Jyl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ0NoZWNrYm94JyxGQ0tMYW5nLkNoZWNrYm94UHJvcCw0OSk7fX19O2Nhc2UgJ1JhZGlvJzpyZXR1cm4ge0FkZEl0ZW1zOmZ1bmN0aW9uKG1lbnUsdGFnLHRhZ05hbWUpe2lmICh0YWdOYW1lPT0nSU5QVVQnJiZ0YWcudHlwZT09J3JhZGlvJyl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ1JhZGlvJyxGQ0tMYW5nLlJhZGlvQnV0dG9uUHJvcCw1MCk7fX19O2Nhc2UgJ1RleHRGaWVsZCc6cmV0dXJuIHtBZGRJdGVtczpmdW5jdGlvbihtZW51LHRhZyx0YWdOYW1lKXtpZiAodGFnTmFtZT09J0lOUFVUJyYmKHRhZy50eXBlPT0ndGV4dCd8fHRhZy50eXBlPT0ncGFzc3dvcmQnKSl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ1RleHRGaWVsZCcsRkNLTGFuZy5UZXh0RmllbGRQcm9wLDUxKTt9fX07Y2FzZSAnSGlkZGVuRmllbGQnOnJldHVybiB7QWRkSXRlbXM6ZnVuY3Rpb24obWVudSx0YWcsdGFnTmFtZSl7aWYgKHRhZ05hbWU9PSdJTUcnJiZ0YWcuZ2V0QXR0cmlidXRlKCdfZmNraW5wdXRoaWRkZW4nKSl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ0hpZGRlbkZpZWxkJyxGQ0tMYW5nLkhpZGRlbkZpZWxkUHJvcCw1Nik7fX19O2Nhc2UgJ0ltYWdlQnV0dG9uJzpyZXR1cm4ge0FkZEl0ZW1zOmZ1bmN0aW9uKG1lbnUsdGFnLHRhZ05hbWUpe2lmICh0YWdOYW1lPT0nSU5QVVQnJiZ0YWcudHlwZT09J2ltYWdlJyl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ0ltYWdlQnV0dG9uJyxGQ0tMYW5nLkltYWdlQnV0dG9uUHJvcCw1NSk7fX19O2Nhc2UgJ0J1dHRvbic6cmV0dXJuIHtBZGRJdGVtczpmdW5jdGlvbihtZW51LHRhZyx0YWdOYW1lKXtpZiAodGFnTmFtZT09J0lOUFVUJyYmKHRhZy50eXBlPT0nYnV0dG9uJ3x8dGFnLnR5cGU9PSdzdWJtaXQnfHx0YWcudHlwZT09J3Jlc2V0Jykpe21lbnUuQWRkU2VwYXJhdG9yKCk7bWVudS5BZGRJdGVtKCdCdXR0b24nLEZDS0xhbmcuQnV0dG9uUHJvcCw1NCk7fX19O2Nhc2UgJ1NlbGVjdCc6cmV0dXJuIHtBZGRJdGVtczpmdW5jdGlvbihtZW51LHRhZyx0YWdOYW1lKXtpZiAodGFnTmFtZT09J1NFTEVDVCcpe21lbnUuQWRkU2VwYXJhdG9yKCk7bWVudS5BZGRJdGVtKCdTZWxlY3QnLEZDS0xhbmcuU2VsZWN0aW9uRmllbGRQcm9wLDUzKTt9fX07Y2FzZSAnVGV4dGFyZWEnOnJldHVybiB7QWRkSXRlbXM6ZnVuY3Rpb24obWVudSx0YWcsdGFnTmFtZSl7aWYgKHRhZ05hbWU9PSdURVhUQVJFQScpe21lbnUuQWRkU2VwYXJhdG9yKCk7bWVudS5BZGRJdGVtKCdUZXh0YXJlYScsRkNLTGFuZy5UZXh0YXJlYVByb3AsNTIpO319fTtjYXNlICdCdWxsZXRlZExpc3QnOnJldHVybiB7QWRkSXRlbXM6ZnVuY3Rpb24obWVudSx0YWcsdGFnTmFtZSl7aWYgKEZDS1NlbGVjdGlvbi5IYXNBbmNlc3Rvck5vZGUoJ1VMJykpe21lbnUuQWRkU2VwYXJhdG9yKCk7bWVudS5BZGRJdGVtKCdCdWxsZXRlZExpc3QnLEZDS0xhbmcuQnVsbGV0ZWRMaXN0UHJvcCwyNyk7fX19O2Nhc2UgJ051bWJlcmVkTGlzdCc6cmV0dXJuIHtBZGRJdGVtczpmdW5jdGlvbihtZW51LHRhZyx0YWdOYW1lKXtpZiAoRkNLU2VsZWN0aW9uLkhhc0FuY2VzdG9yTm9kZSgnT0wnKSl7bWVudS5BZGRTZXBhcmF0b3IoKTttZW51LkFkZEl0ZW0oJ051bWJlcmVkTGlzdCcsRkNLTGFuZy5OdW1iZXJlZExpc3RQcm9wLDI2KTt9fX07Y2FzZSAnRGl2Q29udGFpbmVyJzpyZXR1cm4ge0FkZEl0ZW1zOmZ1bmN0aW9uKG1lbnUsdGFnLHRhZ05hbWUpe3ZhciBKPUZDS0RvbVRvb2xzLkdldFNlbGVjdGVkRGl2Q29udGFpbmVycygpO2lmIChKLmxlbmd0aD4wKXttZW51LkFkZFNlcGFyYXRvcigpO21lbnUuQWRkSXRlbSgnRWRpdERpdicsRkNLTGFuZy5FZGl0RGl2LDc1KTttZW51LkFkZEl0ZW0oJ0RlbGV0ZURpdicsRkNLTGFuZy5EZWxldGVEaXYsNzYpO319fTt9O3JldHVybiBudWxsO307ZnVuY3Rpb24gRkNLX0NvbnRleHRNZW51X09uQmVmb3JlT3Blbigpe0ZDSy5FdmVudHMuRmlyZUV2ZW50KCdPblNlbGVjdGlvbkNoYW5nZScpO3ZhciBBLHNUYWdOYW1lO2lmICgoQT1GQ0tTZWxlY3Rpb24uR2V0U2VsZWN0ZWRFbGVtZW50KCkpKSBzVGFnTmFtZT1BLnRhZ05hbWU7dmFyIEI9RkNLLkNvbnRleHRNZW51Ll9Jbm5lckNvbnRleHRNZW51O0IuUmVtb3ZlQWxsSXRlbXMoKTt2YXIgQz1GQ0suQ29udGV4dE1lbnUuTGlzdGVuZXJzO2ZvciAodmFyIGk9MDtpPEMubGVuZ3RoO2krKykgQ1tpXS5BZGRJdGVtcyhCLEEsc1RhZ05hbWUpO307ZnVuY3Rpb24gRkNLX0NvbnRleHRNZW51X09uSXRlbUNsaWNrKEEpe2lmICghRkNLQnJvd3NlckluZm8uSXNJRSkgRkNLLkZvY3VzKCk7RkNLQ29tbWFuZHMuR2V0Q29tbWFuZChBLk5hbWUpLkV4ZWN1dGUoQS5DdXN0b21EYXRhKTt9Owp2YXIgRkNLSHRtbEl0ZXJhdG9yPWZ1bmN0aW9uKEEpe3RoaXMuX3NvdXJjZUh0bWw9QTt9O0ZDS0h0bWxJdGVyYXRvci5wcm90b3R5cGU9e05leHQ6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLl9zb3VyY2VIdG1sO2lmIChBPT1udWxsKSByZXR1cm4gbnVsbDt2YXIgQj1GQ0tSZWdleExpYi5IdG1sVGFnLmV4ZWMoQSk7dmFyIEM9ZmFsc2U7dmFyIEQ9IiI7aWYgKEIpe2lmIChCLmluZGV4PjApe0Q9QS5zdWJzdHIoMCxCLmluZGV4KTt0aGlzLl9zb3VyY2VIdG1sPUEuc3Vic3RyKEIuaW5kZXgpO31lbHNle0M9dHJ1ZTtEPUJbMF07dGhpcy5fc291cmNlSHRtbD1BLnN1YnN0cihCWzBdLmxlbmd0aCk7fX1lbHNle0Q9QTt0aGlzLl9zb3VyY2VIdG1sPW51bGw7fTtyZXR1cm4geyAnaXNUYWcnOkMsJ3ZhbHVlJzpEIH07fSxFYWNoOmZ1bmN0aW9uKEEpe3ZhciBCO3doaWxlICgoQj10aGlzLk5leHQoKSkpIEEoQi5pc1RhZyxCLnZhbHVlKTt9fTt2YXIgRkNLSHRtbEl0ZXJhdG9yPWZ1bmN0aW9uKEEpe3RoaXMuX3NvdXJjZUh0bWw9QTt9O0ZDS0h0bWxJdGVyYXRvci5wcm90b3R5cGU9e05leHQ6ZnVuY3Rpb24oKXt2YXIgQT10aGlzLl9zb3VyY2VIdG1sO2lmIChBPT1udWxsKSByZXR1cm4gbnVsbDt2YXIgQj1GQ0tSZWdleExpYi5IdG1sVGFnLmV4ZWMoQSk7dmFyIEM9ZmFsc2U7dmFyIEQ9IiI7aWYgKEIpe2lmIChCLmluZGV4PjApe0Q9QS5zdWJzdHIoMCxCLmluZGV4KTt0aGlzLl9zb3VyY2VIdG1sPUEuc3Vic3RyKEIuaW5kZXgpO31lbHNle0M9dHJ1ZTtEPUJbMF07dGhpcy5fc291cmNlSHRtbD1BLnN1YnN0cihCWzBdLmxlbmd0aCk7fX1lbHNle0Q9QTt0aGlzLl9zb3VyY2VIdG1sPW51bGw7fTtyZXR1cm4geyAnaXNUYWcnOkMsJ3ZhbHVlJzpEIH07fSxFYWNoOmZ1bmN0aW9uKEEpe3ZhciBCO3doaWxlICgoQj10aGlzLk5leHQoKSkpIEEoQi5pc1RhZyxCLnZhbHVlKTt9fTsKdmFyIEZDS1BsdWdpbj1mdW5jdGlvbihBLEIsQyl7dGhpcy5OYW1lPUE7dGhpcy5CYXNlUGF0aD1DP0M6RkNLQ29uZmlnLlBsdWdpbnNQYXRoO3RoaXMuUGF0aD10aGlzLkJhc2VQYXRoK0ErJy8nO2lmICghQnx8Qi5sZW5ndGg9PTApIHRoaXMuQXZhaWxhYmxlTGFuZ3M9W107ZWxzZSB0aGlzLkF2YWlsYWJsZUxhbmdzPUIuc3BsaXQoJywnKTt9O0ZDS1BsdWdpbi5wcm90b3R5cGUuTG9hZD1mdW5jdGlvbigpe2lmICh0aGlzLkF2YWlsYWJsZUxhbmdzLmxlbmd0aD4wKXt2YXIgQTtpZiAodGhpcy5BdmFpbGFibGVMYW5ncy5JbmRleE9mKEZDS0xhbmd1YWdlTWFuYWdlci5BY3RpdmVMYW5ndWFnZS5Db2RlKT49MCkgQT1GQ0tMYW5ndWFnZU1hbmFnZXIuQWN0aXZlTGFuZ3VhZ2UuQ29kZTtlbHNlIEE9dGhpcy5BdmFpbGFibGVMYW5nc1swXTtMb2FkU2NyaXB0KHRoaXMuUGF0aCsnbGFuZy8nK0ErJy5qcycpO307TG9hZFNjcmlwdCh0aGlzLlBhdGgrJ2Zja3BsdWdpbi5qcycpO307CnZhciBGQ0tQbHVnaW5zPUZDSy5QbHVnaW5zPXt9O0ZDS1BsdWdpbnMuSXRlbXNDb3VudD0wO0ZDS1BsdWdpbnMuSXRlbXM9e307RkNLUGx1Z2lucy5Mb2FkPWZ1bmN0aW9uKCl7dmFyIEE9RkNLUGx1Z2lucy5JdGVtcztmb3IgKHZhciBpPTA7aTxGQ0tDb25maWcuUGx1Z2lucy5JdGVtcy5sZW5ndGg7aSsrKXt2YXIgQj1GQ0tDb25maWcuUGx1Z2lucy5JdGVtc1tpXTt2YXIgQz1BW0JbMF1dPW5ldyBGQ0tQbHVnaW4oQlswXSxCWzFdLEJbMl0pO0ZDS1BsdWdpbnMuSXRlbXNDb3VudCsrO307Zm9yICh2YXIgcyBpbiBBKSBBW3NdLkxvYWQoKTtGQ0tQbHVnaW5zLkxvYWQ9bnVsbDt9Owo=</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>