<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="24">
  <HTTPTask id="65" hostname="192.168.0.106" path="/testlink/third_party/ext-js/ux/gridfilters/GridFilters.js" url="http://192.168.0.106/testlink/third_party/ext-js/ux/gridfilters/GridFilters.js" ip="192.168.0.106" port="80" connectionId="10" origin="Primary" frame="1" startTime="42107867" endTime="42107945">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovLzE5Mi4xNjguMC4xMDYvdGVzdGxpbmsvbGliL2dlbmVyYWwvbWFpblBhZ2UucGhw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>emgtQ04=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgOS4wOyBXaW5kb3dzIE5UIDYuMTsgVHJpZGVudC81LjAp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyLjE2OC4wLjEwNg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>UEhQU0VTU0lEPTdudDdrcTdqZ2tuNDh2aWJmbGRpZDRmdDMyOyBURVNUTElOS19VU0VSX0FVVEhfQ09PS0lFPTRjMGJkOGE0YTJkODQ4ZjE0NzZjYzQ1NjhlZjllN2IyN2EzYzNkMGMyNDBhZTU3YTZhYzc1OGRhZDk2MzdjZTk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC90ZXN0bGluay90aGlyZF9wYXJ0eS9leHQtanMvdXgvZ3JpZGZpbHRlcnMvR3JpZEZpbHRlcnMuanMgSFRUUC8xLjENCkFjY2VwdDogYXBwbGljYXRpb24vamF2YXNjcmlwdCwgKi8qO3E9MC44DQpSZWZlcmVyOiBodHRwOi8vMTkyLjE2OC4wLjEwNi90ZXN0bGluay9saWIvZ2VuZXJhbC9tYWluUGFnZS5waHANCkFjY2VwdC1MYW5ndWFnZTogemgtQ04NClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDkuMDsgV2luZG93cyBOVCA2LjE7IFRyaWRlbnQvNS4wKQ0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpIb3N0OiAxOTIuMTY4LjAuMTA2DQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpDb29raWU6IFBIUFNFU1NJRD03bnQ3a3E3amdrbjQ4dmliZmxkaWQ0ZnQzMjsgVEVTVExJTktfVVNFUl9BVVRIX0NPT0tJRT00YzBiZDhhNGEyZDg0OGYxNDc2Y2M0NTY4ZWY5ZTdiMjdhM2MzZDBjMjQwYWU1N2E2YWM3NThkYWQ5NjM3Y2U5DQoNCg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="PHPSESSID" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>N250N2txN2pna240OHZpYmZsZGlkNGZ0MzI=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="TESTLINK_USER_AUTH_COOKIE" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NGMwYmQ4YTRhMmQ4NDhmMTQ3NmNjNDU2OGVmOWU3YjI3YTNjM2QwYzI0MGFlNTdhNmFjNzU4ZGFkOTYzN2NlOQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Date" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U2F0LCAxMyBBdWcgMjAxNiAxMzozNjoyMyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLzIuNC4xMCAoVWJ1bnR1KQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>U2F0LCAwMSBTZXAgMjAxMiAxMzo1NTozMCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjVkNjMtNGM4YTQ0MmVmMTg4MC1nemlwIg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>NjQ4Nw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Keep-Alive" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGltZW91dD01LCBtYXg9OTU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpEYXRlOiBTYXQsIDEzIEF1ZyAyMDE2IDEzOjM2OjIzIEdNVA0KU2VydmVyOiBBcGFjaGUvMi40LjEwIChVYnVudHUpDQpMYXN0LU1vZGlmaWVkOiBTYXQsIDAxIFNlcCAyMDEyIDEzOjU1OjMwIEdNVA0KRVRhZzogIjVkNjMtNGM4YTQ0MmVmMTg4MC1nemlwIg0KQWNjZXB0LVJhbmdlczogYnl0ZXMNClZhcnk6IEFjY2VwdC1FbmNvZGluZw0KQ29udGVudC1FbmNvZGluZzogZ3ppcA0KQ29udGVudC1MZW5ndGg6IDY0ODcNCktlZXAtQWxpdmU6IHRpbWVvdXQ9NSwgbWF4PTk1DQpDb25uZWN0aW9uOiBLZWVwLUFsaXZlDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyohCiAqIEV4dCBKUyBMaWJyYXJ5IDMuMy4wCiAqIENvcHlyaWdodChjKSAyMDA2LTIwMTAgRXh0IEpTLCBJbmMuCiAqIGxpY2Vuc2luZ0BleHRqcy5jb20KICogaHR0cDovL3d3dy5leHRqcy5jb20vbGljZW5zZQogKi8KRXh0Lm5hbWVzcGFjZSgnRXh0LnV4LmdyaWQnKTsKCi8qKgogKiBAY2xhc3MgRXh0LnV4LmdyaWQuR3JpZEZpbHRlcnMKICogQGV4dGVuZHMgRXh0LnV0aWwuT2JzZXJ2YWJsZQogKiA8cD5HcmlkRmlsdGVyIGlzIGEgcGx1Z2luICg8Y29kZT5wdHlwZT0nZ3JpZGZpbHRlcnMnPC9jb2RlPikgZm9yIGdyaWRzIHRoYXQKICogYWxsb3cgZm9yIGEgc2xpZ2h0bHkgbW9yZSByb2J1c3QgcmVwcmVzZW50YXRpb24gb2YgZmlsdGVyaW5nIHRoYW4gd2hhdCBpcwogKiBwcm92aWRlZCBieSB0aGUgZGVmYXVsdCBzdG9yZS48L3A+CiAqIDxwPkZpbHRlcmluZyBpcyBhZGp1c3RlZCBieSB0aGUgdXNlciB1c2luZyB0aGUgZ3JpZCdzIGNvbHVtbiBoZWFkZXIgbWVudQogKiAodGhpcyBtZW51IGNhbiBiZSBkaXNhYmxlZCB0aHJvdWdoIGNvbmZpZ3VyYXRpb24pLiBUaHJvdWdoIHRoaXMgbWVudSB1c2VycwogKiBjYW4gY29uZmlndXJlLCBlbmFibGUsIGFuZCBkaXNhYmxlIGZpbHRlcnMgZm9yIGVhY2ggY29sdW1uLjwvcD4KICogPHA+PGI+PHU+RmVhdHVyZXM6PC91PjwvYj48L3A+CiAqIDxkaXYgY2xhc3M9Im1kZXRhaWwtcGFyYW1zIj48dWw+CiAqIDxsaT48Yj5GaWx0ZXJpbmcgaW1wbGVtZW50YXRpb25zPC9iPiA6CiAqIDxkaXYgY2xhc3M9InN1Yi1kZXNjIj4KICogRGVmYXVsdCBmaWx0ZXJpbmcgZm9yIFN0cmluZ3MsIE51bWVyaWMgUmFuZ2VzLCBEYXRlIFJhbmdlcywgTGlzdHMgKHdoaWNoIGNhbgogKiBiZSBiYWNrZWQgYnkgYSBFeHQuZGF0YS5TdG9yZSksIGFuZCBCb29sZWFuLiBBZGRpdGlvbmFsIGN1c3RvbSBmaWx0ZXIgdHlwZXMKICogYW5kIG1lbnVzIGFyZSBlYXNpbHkgY3JlYXRlZCBieSBleHRlbmRpbmcgRXh0LnV4LmdyaWQuZmlsdGVyLkZpbHRlci4KICogPC9kaXY+PC9saT4KICogPGxpPjxiPkdyYXBoaWNhbCBpbmRpY2F0b3JzPC9iPiA6CiAqIDxkaXYgY2xhc3M9InN1Yi1kZXNjIj4KICogQ29sdW1ucyB0aGF0IGFyZSBmaWx0ZXJlZCBoYXZlIHtAbGluayAjZmlsdGVyQ2xzIGEgY29uZmlndXJhYmxlIGNzcyBjbGFzc30KICogYXBwbGllZCB0byB0aGUgY29sdW1uIGhlYWRlcnMuCiAqIDwvZGl2PjwvbGk+CiAqIDxsaT48Yj5QYWdpbmc8L2I+IDoKICogPGRpdiBjbGFzcz0ic3ViLWRlc2MiPgogKiBJZiBzcGVjaWZpZWQgYXMgYSBwbHVnaW4gdG8gdGhlIGdyaWQncyBjb25maWd1cmVkIFBhZ2luZ1Rvb2xiYXIsIHRoZSBjdXJyZW50IHBhZ2UKICogd2lsbCBiZSByZXNldCB0byBwYWdlIDEgd2hlbmV2ZXIgeW91IHVwZGF0ZSB0aGUgZmlsdGVycy4KICogPC9kaXY+PC9saT4KICogPGxpPjxiPkF1dG9tYXRpYyBSZWNvbmZpZ3VyYXRpb248L2I+IDoKICogPGRpdiBjbGFzcz0ic3ViLWRlc2MiPgogKiBGaWx0ZXJzIGF1dG9tYXRpY2FsbHkgcmVjb25maWd1cmUgd2hlbiB0aGUgZ3JpZCAncmVjb25maWd1cmUnIGV2ZW50IGZpcmVzLgogKiA8L2Rpdj48L2xpPgogKiA8bGk+PGI+U3RhdGVmdWw8L2I+IDoKICogRmlsdGVyIGluZm9ybWF0aW9uIHdpbGwgYmUgcGVyc2lzdGVkIGFjcm9zcyBwYWdlIGxvYWRzIGJ5IHNwZWNpZnlpbmcgYQogKiA8Y29kZT5zdGF0ZUlkPC9jb2RlPiBpbiB0aGUgR3JpZCBjb25maWd1cmF0aW9uLgogKiA8ZGl2IGNsYXNzPSJzdWItZGVzYyI+CiAqIFRoZSBmaWx0ZXIgY29sbGVjdGlvbiBiaW5kcyB0byB0aGUKICogPGNvZGU+e0BsaW5rIEV4dC5ncmlkLkdyaWRQYW5lbCNiZWZvcmVzdGF0ZXJlc3RvcmUgYmVmb3Jlc3RhdGVyZXN0b3JlfTwvY29kZT4KICogYW5kIDxjb2RlPntAbGluayBFeHQuZ3JpZC5HcmlkUGFuZWwjYmVmb3Jlc3RhdGVzYXZlIGJlZm9yZXN0YXRlc2F2ZX08L2NvZGU+CiAqIGV2ZW50cyBpbiBvcmRlciB0byBiZSBzdGF0ZWZ1bC4KICogPC9kaXY+PC9saT4KICogPGxpPjxiPkdyaWQgQ2hhbmdlczwvYj4gOgogKiA8ZGl2IGNsYXNzPSJzdWItZGVzYyI+PHVsPgogKiA8bGk+QSA8Y29kZT5maWx0ZXJzPC9jb2RlPiA8aT5wcm9wZXJ0eTwvaT4gaXMgYWRkZWQgdG8gdGhlIGdyaWQgcG9pbnRpbmcgdG8KICogdGhpcyBwbHVnaW4uPC9saT4KICogPGxpPkEgPGNvZGU+ZmlsdGVydXBkYXRlPC9jb2RlPiA8aT5ldmVudDwvaT4gaXMgYWRkZWQgdG8gdGhlIGdyaWQgYW5kIGlzCiAqIGZpcmVkIHVwb24gb25TdGF0ZUNoYW5nZSBjb21wbGV0aW9uLjwvbGk+CiAqIDwvdWw+PC9kaXY+PC9saT4KICogPGxpPjxiPlNlcnZlciBzaWRlIGNvZGUgZXhhbXBsZXM8L2I+IDoKICogPGRpdiBjbGFzcz0ic3ViLWRlc2MiPjx1bD4KICogPGxpPjxhIGhyZWY9Imh0dHA6Ly93d3cudmlueWxmb3guY29tL2V4dGpzL2dyaWQtZmlsdGVyLXBocC1iYWNrZW5kLWNvZGUucGhwIj5QSFA8L2E+IC0gKFRoYW5rcyBWaW55bEZveCk8L2xpPgogKiA8bGk+PGEgaHJlZj0iaHR0cDovL2V4dGpzLmNvbS9mb3J1bS9zaG93dGhyZWFkLnBocD9wPTc3MzI2I3Bvc3Q3NzMyNiI+UnVieSBvbiBSYWlsczwvYT4gLSAoVGhhbmtzIFp5Y2xvcHMpPC9saT4KICogPGxpPjxhIGhyZWY9Imh0dHA6Ly9leHRqcy5jb20vZm9ydW0vc2hvd3RocmVhZC5waHA/cD0xNzY1OTYjcG9zdDE3NjU5NiI+UnVieSBvbiBSYWlsczwvYT4gLSAoVGhhbmtzIFJvdG9tYXVsKTwvbGk+CiAqIDxsaT48YSBocmVmPSJodHRwOi8vd3d3LmRlYmF0YWJseWJldGEuY29tL3Bvc3RzL3VzaW5nLWV4dGpzcy1ncmlkLWZpbHRlcmluZy13aXRoLWRqYW5nby8iPlB5dGhvbjwvYT4gLSAoVGhhbmtzIE1hdHQpPC9saT4KICogPGxpPjxhIGhyZWY9Imh0dHA6Ly9tY2FudHJlbGwud29yZHByZXNzLmNvbS8yMDA4LzA4LzIyL2V4dGpzLWdyaWRzLWFuZC1ncmFpbHMvIj5HcmFpbHM8L2E+IC0gKFRoYW5rcyBNaWtlKTwvbGk+CiAqIDwvdWw+PC9kaXY+PC9saT4KICogPC91bD48L2Rpdj4KICogPHA+PGI+PHU+RXhhbXBsZSB1c2FnZTo8L3U+PC9iPjwvcD4KICogPHByZT48Y29kZT4KdmFyIHN0b3JlID0gbmV3IEV4dC5kYXRhLkdyb3VwaW5nU3RvcmUoewogICAgLi4uCn0pOwoKdmFyIGZpbHRlcnMgPSBuZXcgRXh0LnV4LmdyaWQuR3JpZEZpbHRlcnMoewogICAgYXV0b1JlbG9hZDogZmFsc2UsIC8vZG9uJiMzOTt0IHJlbG9hZCBhdXRvbWF0aWNhbGx5CiAgICBsb2NhbDogdHJ1ZSwgLy9vbmx5IGZpbHRlciBsb2NhbGx5CiAgICAvLyBmaWx0ZXJzIG1heSBiZSBjb25maWd1cmVkIHRocm91Z2ggdGhlIHBsdWdpbiwKICAgIC8vIG9yIGluIHRoZSBjb2x1bW4gZGVmaW5pdGlvbiB3aXRoaW4gdGhlIGNvbHVtbiBtb2RlbCBjb25maWd1cmF0aW9uCiAgICBmaWx0ZXJzOiBbewogICAgICAgIHR5cGU6ICdudW1lcmljJywKICAgICAgICBkYXRhSW5kZXg6ICdpZCcKICAgIH0sIHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICBkYXRhSW5kZXg6ICduYW1lJwogICAgfSwgewogICAgICAgIHR5cGU6ICdudW1lcmljJywKICAgICAgICBkYXRhSW5kZXg6ICdwcmljZScKICAgIH0sIHsKICAgICAgICB0eXBlOiAnZGF0ZScsCiAgICAgICAgZGF0YUluZGV4OiAnZGF0ZUFkZGVkJwogICAgfSwgewogICAgICAgIHR5cGU6ICdsaXN0JywKICAgICAgICBkYXRhSW5kZXg6ICdzaXplJywKICAgICAgICBvcHRpb25zOiBbJ2V4dHJhIHNtYWxsJywgJ3NtYWxsJywgJ21lZGl1bScsICdsYXJnZScsICdleHRyYSBsYXJnZSddLAogICAgICAgIHBocE1vZGU6IHRydWUKICAgIH0sIHsKICAgICAgICB0eXBlOiAnYm9vbGVhbicsCiAgICAgICAgZGF0YUluZGV4OiAndmlzaWJsZScKICAgIH1dCn0pOwp2YXIgY20gPSBuZXcgRXh0LmdyaWQuQ29sdW1uTW9kZWwoW3sKICAgIC4uLgp9XSk7Cgp2YXIgZ3JpZCA9IG5ldyBFeHQuZ3JpZC5HcmlkUGFuZWwoewogICAgIGRzOiBzdG9yZSwKICAgICBjbTogY20sCiAgICAgdmlldzogbmV3IEV4dC5ncmlkLkdyb3VwaW5nVmlldygpLAogICAgIHBsdWdpbnM6IFtmaWx0ZXJzXSwKICAgICBoZWlnaHQ6IDQwMCwKICAgICB3aWR0aDogNzAwLAogICAgIGJiYXI6IG5ldyBFeHQuUGFnaW5nVG9vbGJhcih7CiAgICAgICAgIHN0b3JlOiBzdG9yZSwKICAgICAgICAgcGFnZVNpemU6IDE1LAogICAgICAgICBwbHVnaW5zOiBbZmlsdGVyc10gLy9yZXNldCBwYWdlIHRvIHBhZ2UgMSBpZiBmaWx0ZXJzIGNoYW5nZQogICAgIH0pCiB9KTsKCnN0b3JlLmxvYWQoe3BhcmFtczoge3N0YXJ0OiAwLCBsaW1pdDogMTV9fSk7CgovLyBhIGZpbHRlcnMgcHJvcGVydHkgaXMgYWRkZWQgdG8gdGhlIGdyaWQKZ3JpZC5maWx0ZXJzCiAqIDwvY29kZT48L3ByZT4KICovCkV4dC51eC5ncmlkLkdyaWRGaWx0ZXJzID0gRXh0LmV4dGVuZChFeHQudXRpbC5PYnNlcnZhYmxlLCB7CiAgICAvKioKICAgICAqIEBjZmcge0Jvb2xlYW59IGF1dG9SZWxvYWQKICAgICAqIERlZmF1bHRzIHRvIHRydWUsIHJlbG9hZGluZyB0aGUgZGF0YXNvdXJjZSB3aGVuIGEgZmlsdGVyIGNoYW5nZSBoYXBwZW5zLgogICAgICogU2V0IHRoaXMgdG8gZmFsc2UgdG8gcHJldmVudCB0aGUgZGF0YXN0b3JlIGZyb20gYmVpbmcgcmVsb2FkZWQgaWYgdGhlcmUKICAgICAqIGFyZSBjaGFuZ2VzIHRvIHRoZSBmaWx0ZXJzLiAgU2VlIDxjb2RlPntAbGluayB1cGRhdGVCdWZmZXJ9PC9jb2RlPi4KICAgICAqLwogICAgYXV0b1JlbG9hZCA6IHRydWUsCiAgICAvKioKICAgICAqIEBjZmcge0Jvb2xlYW59IGVuY29kZQogICAgICogU3BlY2lmeSB0cnVlIGZvciB7QGxpbmsgI2J1aWxkUXVlcnl9IHRvIHVzZSBFeHQudXRpbC5KU09OLmVuY29kZSB0bwogICAgICogZW5jb2RlIHRoZSBmaWx0ZXIgcXVlcnkgcGFyYW1ldGVyIHNlbnQgd2l0aCBhIHJlbW90ZSByZXF1ZXN0LgogICAgICogRGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKi8KICAgIC8qKgogICAgICogQGNmZyB7QXJyYXl9IGZpbHRlcnMKICAgICAqIEFuIEFycmF5IG9mIGZpbHRlcnMgY29uZmlnIG9iamVjdHMuIFJlZmVyIHRvIGVhY2ggZmlsdGVyIHR5cGUgY2xhc3MgZm9yCiAgICAgKiBjb25maWd1cmF0aW9uIGRldGFpbHMgc3BlY2lmaWMgdG8gZWFjaCBmaWx0ZXIgdHlwZS4gRmlsdGVycyBmb3IgU3RyaW5ncywKICAgICAqIE51bWVyaWMgUmFuZ2VzLCBEYXRlIFJhbmdlcywgTGlzdHMsIGFuZCBCb29sZWFuIGFyZSB0aGUgc3RhbmRhcmQgZmlsdGVycwogICAgICogYXZhaWxhYmxlLgogICAgICovCiAgICAvKioKICAgICAqIEBjZmcge1N0cmluZ30gZmlsdGVyQ2xzCiAgICAgKiBUaGUgY3NzIGNsYXNzIHRvIGJlIGFwcGxpZWQgdG8gY29sdW1uIGhlYWRlcnMgd2l0aCBhY3RpdmUgZmlsdGVycy4KICAgICAqIERlZmF1bHRzIHRvIDx0dD4ndXgtZmlsdGVyZC1jb2x1bW4nPC90dD4uCiAgICAgKi8KICAgIGZpbHRlckNscyA6ICd1eC1maWx0ZXJlZC1jb2x1bW4nLAogICAgLyoqCiAgICAgKiBAY2ZnIHtCb29sZWFufSBsb2NhbAogICAgICogPHR0PnRydWU8L3R0PiB0byB1c2UgRXh0LmRhdGEuU3RvcmUgZmlsdGVyIGZ1bmN0aW9ucyAobG9jYWwgZmlsdGVyaW5nKQogICAgICogaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCAoPHR0PmZhbHNlPC90dD4pIHNlcnZlciBzaWRlIGZpbHRlcmluZy4KICAgICAqLwogICAgbG9jYWwgOiBmYWxzZSwKICAgIC8qKgogICAgICogQGNmZyB7U3RyaW5nfSBtZW51RmlsdGVyVGV4dAogICAgICogZGVmYXVsdHMgdG8gPHR0PidGaWx0ZXJzJzwvdHQ+LgogICAgICovCiAgICBtZW51RmlsdGVyVGV4dCA6ICdGaWx0ZXJzJywKICAgIC8qKgogICAgICogQGNmZyB7U3RyaW5nfSBwYXJhbVByZWZpeAogICAgICogVGhlIHVybCBwYXJhbWV0ZXIgcHJlZml4IGZvciB0aGUgZmlsdGVycy4KICAgICAqIERlZmF1bHRzIHRvIDx0dD4nZmlsdGVyJzwvdHQ+LgogICAgICovCiAgICBwYXJhbVByZWZpeCA6ICdmaWx0ZXInLAogICAgLyoqCiAgICAgKiBAY2ZnIHtCb29sZWFufSBzaG93TWVudQogICAgICogRGVmYXVsdHMgdG8gdHJ1ZSwgaW5jbHVkaW5nIGEgZmlsdGVyIHN1Ym1lbnUgaW4gdGhlIGRlZmF1bHQgaGVhZGVyIG1lbnUuCiAgICAgKi8KICAgIHNob3dNZW51IDogdHJ1ZSwKICAgIC8qKgogICAgICogQGNmZyB7U3RyaW5nfSBzdGF0ZUlkCiAgICAgKiBOYW1lIG9mIHRoZSB2YWx1ZSB0byBiZSB1c2VkIHRvIHN0b3JlIHN0YXRlIGluZm9ybWF0aW9uLgogICAgICovCiAgICBzdGF0ZUlkIDogdW5kZWZpbmVkLAogICAgLyoqCiAgICAgKiBAY2ZnIHtJbnRlZ2VyfSB1cGRhdGVCdWZmZXIKICAgICAqIE51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVmZXIgc3RvcmUgdXBkYXRlcyBzaW5jZSB0aGUgbGFzdCBmaWx0ZXIgY2hhbmdlLgogICAgICovCiAgICB1cGRhdGVCdWZmZXIgOiA1MDAsCgogICAgLyoqIEBwcml2YXRlICovCiAgICBjb25zdHJ1Y3RvciA6IGZ1bmN0aW9uIChjb25maWcpIHsKICAgICAgICBjb25maWcgPSBjb25maWcgfHwge307CiAgICAgICAgdGhpcy5kZWZlcnJlZFVwZGF0ZSA9IG5ldyBFeHQudXRpbC5EZWxheWVkVGFzayh0aGlzLnJlbG9hZCwgdGhpcyk7CiAgICAgICAgdGhpcy5maWx0ZXJzID0gbmV3IEV4dC51dGlsLk1peGVkQ29sbGVjdGlvbigpOwogICAgICAgIHRoaXMuZmlsdGVycy5nZXRLZXkgPSBmdW5jdGlvbiAobykgewogICAgICAgICAgICByZXR1cm4gbyA/IG8uZGF0YUluZGV4IDogbnVsbDsKICAgICAgICB9OwogICAgICAgIHRoaXMuYWRkRmlsdGVycyhjb25maWcuZmlsdGVycyk7CiAgICAgICAgZGVsZXRlIGNvbmZpZy5maWx0ZXJzOwogICAgICAgIEV4dC5hcHBseSh0aGlzLCBjb25maWcpOwogICAgfSwKCiAgICAvKiogQHByaXZhdGUgKi8KICAgIGluaXQgOiBmdW5jdGlvbiAoZ3JpZCkgewogICAgICAgIGlmIChncmlkIGluc3RhbmNlb2YgRXh0LmdyaWQuR3JpZFBhbmVsKSB7CiAgICAgICAgICAgIHRoaXMuZ3JpZCA9IGdyaWQ7CgogICAgICAgICAgICB0aGlzLmJpbmRTdG9yZSh0aGlzLmdyaWQuZ2V0U3RvcmUoKSwgdHJ1ZSk7CiAgICAgICAgICAgIC8vIGFzc3VtZXMgbm8gZmlsdGVycyB3ZXJlIHBhc3NlZCBpbiB0aGUgY29uc3RydWN0b3IsIHNvIHRyeSBhbmQgdXNlIG9uZXMgZnJvbSB0aGUgY29sTW9kZWwKICAgICAgICAgICAgaWYodGhpcy5maWx0ZXJzLmdldENvdW50KCkgPT0gMCl7CiAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbHRlcnModGhpcy5ncmlkLmdldENvbHVtbk1vZGVsKCkpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmdyaWQuZmlsdGVycyA9IHRoaXM7CgogICAgICAgICAgICB0aGlzLmdyaWQuYWRkRXZlbnRzKHsnZmlsdGVydXBkYXRlJzogdHJ1ZX0pOwoKICAgICAgICAgICAgZ3JpZC5vbih7CiAgICAgICAgICAgICAgICBzY29wZTogdGhpcywKICAgICAgICAgICAgICAgIGJlZm9yZXN0YXRlcmVzdG9yZTogdGhpcy5hcHBseVN0YXRlLAogICAgICAgICAgICAgICAgYmVmb3Jlc3RhdGVzYXZlOiB0aGlzLnNhdmVTdGF0ZSwKICAgICAgICAgICAgICAgIGJlZm9yZWRlc3Ryb3k6IHRoaXMuZGVzdHJveSwKICAgICAgICAgICAgICAgIHJlY29uZmlndXJlOiB0aGlzLm9uUmVjb25maWd1cmUKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBpZiAoZ3JpZC5yZW5kZXJlZCl7CiAgICAgICAgICAgICAgICB0aGlzLm9uUmVuZGVyKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBncmlkLm9uKHsKICAgICAgICAgICAgICAgICAgICBzY29wZTogdGhpcywKICAgICAgICAgICAgICAgICAgICBzaW5nbGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgcmVuZGVyOiB0aGlzLm9uUmVuZGVyCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICB9IGVsc2UgaWYgKGdyaWQgaW5zdGFuY2VvZiBFeHQuUGFnaW5nVG9vbGJhcikgewogICAgICAgICAgICB0aGlzLnRvb2xiYXIgPSBncmlkOwogICAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogSGFuZGxlciBmb3IgdGhlIGdyaWQncyBiZWZvcmVzdGF0ZXJlc3RvcmUgZXZlbnQgKGZpcmVzIGJlZm9yZSB0aGUgc3RhdGUgb2YgdGhlCiAgICAgKiBncmlkIGlzIHJlc3RvcmVkKS4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBncmlkIFRoZSBncmlkIG9iamVjdAogICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIFRoZSBoYXNoIG9mIHN0YXRlIHZhbHVlcyByZXR1cm5lZCBmcm9tIHRoZSBTdGF0ZVByb3ZpZGVyLgogICAgICovCiAgICBhcHBseVN0YXRlIDogZnVuY3Rpb24gKGdyaWQsIHN0YXRlKSB7CiAgICAgICAgdmFyIGtleSwgZmlsdGVyOwogICAgICAgIHRoaXMuYXBwbHlpbmdTdGF0ZSA9IHRydWU7CiAgICAgICAgdGhpcy5jbGVhckZpbHRlcnMoKTsKICAgICAgICBpZiAoc3RhdGUuZmlsdGVycykgewogICAgICAgICAgICBmb3IgKGtleSBpbiBzdGF0ZS5maWx0ZXJzKSB7CiAgICAgICAgICAgICAgICBmaWx0ZXIgPSB0aGlzLmZpbHRlcnMuZ2V0KGtleSk7CiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLnNldFZhbHVlKHN0YXRlLmZpbHRlcnNba2V5XSk7CiAgICAgICAgICAgICAgICAgICAgZmlsdGVyLnNldEFjdGl2ZSh0cnVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLmRlZmVycmVkVXBkYXRlLmNhbmNlbCgpOwogICAgICAgIGlmICh0aGlzLmxvY2FsKSB7CiAgICAgICAgICAgIHRoaXMucmVsb2FkKCk7CiAgICAgICAgfQogICAgICAgIGRlbGV0ZSB0aGlzLmFwcGx5aW5nU3RhdGU7CiAgICAgICAgZGVsZXRlIHN0YXRlLmZpbHRlcnM7CiAgICB9LAoKICAgIC8qKgogICAgICogU2F2ZXMgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgZmlsdGVycwogICAgICogQHBhcmFtIHtPYmplY3R9IGdyaWQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZQogICAgICogQHJldHVybiB7Qm9vbGVhbn0KICAgICAqLwogICAgc2F2ZVN0YXRlIDogZnVuY3Rpb24gKGdyaWQsIHN0YXRlKSB7CiAgICAgICAgdmFyIGZpbHRlcnMgPSB7fTsKICAgICAgICB0aGlzLmZpbHRlcnMuZWFjaChmdW5jdGlvbiAoZmlsdGVyKSB7CiAgICAgICAgICAgIGlmIChmaWx0ZXIuYWN0aXZlKSB7CiAgICAgICAgICAgICAgICBmaWx0ZXJzW2ZpbHRlci5kYXRhSW5kZXhdID0gZmlsdGVyLmdldFZhbHVlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gKHN0YXRlLmZpbHRlcnMgPSBmaWx0ZXJzKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogSGFuZGxlciBjYWxsZWQgd2hlbiB0aGUgZ3JpZCBpcyByZW5kZXJlZAogICAgICovCiAgICBvblJlbmRlciA6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmdyaWQuZ2V0VmlldygpLm9uKCdyZWZyZXNoJywgdGhpcy5vblJlZnJlc2gsIHRoaXMpOwogICAgICAgIHRoaXMuY3JlYXRlTWVudSgpOwogICAgfSwKCiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKiBIYW5kbGVyIGNhbGxlZCBieSB0aGUgZ3JpZCAnYmVmb3JlZGVzdHJveScgZXZlbnQKICAgICAqLwogICAgZGVzdHJveSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLnJlbW92ZUFsbCgpOwogICAgICAgIHRoaXMucHVyZ2VMaXN0ZW5lcnMoKTsKCiAgICAgICAgaWYodGhpcy5maWx0ZXJNZW51KXsKICAgICAgICAgICAgRXh0Lm1lbnUuTWVudU1nci51bnJlZ2lzdGVyKHRoaXMuZmlsdGVyTWVudSk7CiAgICAgICAgICAgIHRoaXMuZmlsdGVyTWVudS5kZXN0cm95KCk7CiAgICAgICAgICAgICB0aGlzLmZpbHRlck1lbnUgPSB0aGlzLm1lbnUubWVudSA9IG51bGw7CiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIFJlbW92ZSBhbGwgZmlsdGVycywgcGVybWFuZW50bHkgZGVzdHJveWluZyB0aGVtLgogICAgICovCiAgICByZW1vdmVBbGwgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYodGhpcy5maWx0ZXJzKXsKICAgICAgICAgICAgRXh0LmRlc3Ryb3kuYXBwbHkoRXh0LCB0aGlzLmZpbHRlcnMuaXRlbXMpOwogICAgICAgICAgICAvLyByZW1vdmUgYWxsIGl0ZW1zIGZyb20gdGhlIGNvbGxlY3Rpb24KICAgICAgICAgICAgdGhpcy5maWx0ZXJzLmNsZWFyKCk7CiAgICAgICAgfQogICAgfSwKCgogICAgLyoqCiAgICAgKiBDaGFuZ2VzIHRoZSBkYXRhIHN0b3JlIGJvdW5kIHRvIHRoaXMgdmlldyBhbmQgcmVmcmVzaGVzIGl0LgogICAgICogQHBhcmFtIHtTdG9yZX0gc3RvcmUgVGhlIHN0b3JlIHRvIGJpbmQgdG8gdGhpcyB2aWV3CiAgICAgKi8KICAgIGJpbmRTdG9yZSA6IGZ1bmN0aW9uKHN0b3JlLCBpbml0aWFsKXsKICAgICAgICBpZighaW5pdGlhbCAmJiB0aGlzLnN0b3JlKXsKICAgICAgICAgICAgaWYgKHRoaXMubG9jYWwpIHsKICAgICAgICAgICAgICAgIHN0b3JlLnVuKCdsb2FkJywgdGhpcy5vbkxvYWQsIHRoaXMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgc3RvcmUudW4oJ2JlZm9yZWxvYWQnLCB0aGlzLm9uQmVmb3JlTG9hZCwgdGhpcyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYoc3RvcmUpewogICAgICAgICAgICBpZiAodGhpcy5sb2NhbCkgewogICAgICAgICAgICAgICAgc3RvcmUub24oJ2xvYWQnLCB0aGlzLm9uTG9hZCwgdGhpcyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBzdG9yZS5vbignYmVmb3JlbG9hZCcsIHRoaXMub25CZWZvcmVMb2FkLCB0aGlzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0aGlzLnN0b3JlID0gc3RvcmU7CiAgICB9LAoKICAgIC8qKgogICAgICogQHByaXZhdGUKICAgICAqIEhhbmRsZXIgY2FsbGVkIHdoZW4gdGhlIGdyaWQgcmVjb25maWd1cmUgZXZlbnQgZmlyZXMKICAgICAqLwogICAgb25SZWNvbmZpZ3VyZSA6IGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGlzLmJpbmRTdG9yZSh0aGlzLmdyaWQuZ2V0U3RvcmUoKSk7CiAgICAgICAgdGhpcy5zdG9yZS5jbGVhckZpbHRlcigpOwogICAgICAgIHRoaXMucmVtb3ZlQWxsKCk7CiAgICAgICAgdGhpcy5hZGRGaWx0ZXJzKHRoaXMuZ3JpZC5nZXRDb2x1bW5Nb2RlbCgpKTsKICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbkhlYWRpbmdzKCk7CiAgICB9LAoKICAgIGNyZWF0ZU1lbnUgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdyaWQuZ2V0VmlldygpLAogICAgICAgICAgICBobWVudSA9IHZpZXcuaG1lbnU7CgogICAgICAgIGlmICh0aGlzLnNob3dNZW51ICYmIGhtZW51KSB7CgogICAgICAgICAgICB0aGlzLnNlcCAgPSBobWVudS5hZGRTZXBhcmF0b3IoKTsKICAgICAgICAgICAgdGhpcy5maWx0ZXJNZW51ID0gbmV3IEV4dC5tZW51Lk1lbnUoewogICAgICAgICAgICAgICAgaWQ6IHRoaXMuZ3JpZC5pZCArICctZmlsdGVycy1tZW51JwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5tZW51ID0gaG1lbnUuYWRkKHsKICAgICAgICAgICAgICAgIGNoZWNrZWQ6IGZhbHNlLAogICAgICAgICAgICAgICAgaXRlbUlkOiAnZmlsdGVycycsCiAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLm1lbnVGaWx0ZXJUZXh0LAogICAgICAgICAgICAgICAgbWVudTogdGhpcy5maWx0ZXJNZW51CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgdGhpcy5tZW51Lm9uKHsKICAgICAgICAgICAgICAgIHNjb3BlOiB0aGlzLAogICAgICAgICAgICAgICAgY2hlY2tjaGFuZ2U6IHRoaXMub25DaGVja0NoYW5nZSwKICAgICAgICAgICAgICAgIGJlZm9yZWNoZWNrY2hhbmdlOiB0aGlzLm9uQmVmb3JlQ2hlY2sKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGhtZW51Lm9uKCdiZWZvcmVzaG93JywgdGhpcy5vbk1lbnUsIHRoaXMpOwogICAgICAgIH0KICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbkhlYWRpbmdzKCk7CiAgICB9LAoKICAgIC8qKgogICAgICogQHByaXZhdGUKICAgICAqIEdldCB0aGUgZmlsdGVyIG1lbnUgZnJvbSB0aGUgZmlsdGVycyBNaXhlZENvbGxlY3Rpb24gYmFzZWQgb24gdGhlIGNsaWNrZWQgaGVhZGVyCiAgICAgKi8KICAgIGdldE1lbnVGaWx0ZXIgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmdyaWQuZ2V0VmlldygpOwogICAgICAgIGlmICghdmlldyB8fCB2aWV3LmhkQ3R4SW5kZXggPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycy5nZXQoCiAgICAgICAgICAgIHZpZXcuY20uY29uZmlnW3ZpZXcuaGRDdHhJbmRleF0uZGF0YUluZGV4CiAgICAgICAgKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogSGFuZGxlciBjYWxsZWQgYnkgdGhlIGdyaWQncyBobWVudSBiZWZvcmVzaG93IGV2ZW50CiAgICAgKi8KICAgIG9uTWVudSA6IGZ1bmN0aW9uIChmaWx0ZXJNZW51KSB7CiAgICAgICAgdmFyIGZpbHRlciA9IHRoaXMuZ2V0TWVudUZpbHRlcigpOwoKICAgICAgICBpZiAoZmlsdGVyKSB7Ci8qClRPRE86IGxhenkgcmVuZGVyaW5nCiAgICAgICAgICAgIGlmICghZmlsdGVyLm1lbnUpIHsKICAgICAgICAgICAgICAgIGZpbHRlci5tZW51ID0gZmlsdGVyLmNyZWF0ZU1lbnUoKTsKICAgICAgICAgICAgfQoqLwogICAgICAgICAgICB0aGlzLm1lbnUubWVudSA9IGZpbHRlci5tZW51OwogICAgICAgICAgICB0aGlzLm1lbnUuc2V0Q2hlY2tlZChmaWx0ZXIuYWN0aXZlLCBmYWxzZSk7CiAgICAgICAgICAgIC8vIGRpc2FibGUgdGhlIG1lbnUgaWYgZmlsdGVyLmRpc2FibGVkIGV4cGxpY2l0bHkgc2V0IHRvIHRydWUKICAgICAgICAgICAgdGhpcy5tZW51LnNldERpc2FibGVkKGZpbHRlci5kaXNhYmxlZCA9PT0gdHJ1ZSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLm1lbnUuc2V0VmlzaWJsZShmaWx0ZXIgIT09IHVuZGVmaW5lZCk7CiAgICAgICAgdGhpcy5zZXAuc2V0VmlzaWJsZShmaWx0ZXIgIT09IHVuZGVmaW5lZCk7CiAgICB9LAoKICAgIC8qKiBAcHJpdmF0ZSAqLwogICAgb25DaGVja0NoYW5nZSA6IGZ1bmN0aW9uIChpdGVtLCB2YWx1ZSkgewogICAgICAgIHRoaXMuZ2V0TWVudUZpbHRlcigpLnNldEFjdGl2ZSh2YWx1ZSk7CiAgICB9LAoKICAgIC8qKiBAcHJpdmF0ZSAqLwogICAgb25CZWZvcmVDaGVjayA6IGZ1bmN0aW9uIChjaGVjaywgdmFsdWUpIHsKICAgICAgICByZXR1cm4gIXZhbHVlIHx8IHRoaXMuZ2V0TWVudUZpbHRlcigpLmlzQWN0aXZhdGFibGUoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogSGFuZGxlciBmb3IgYWxsIGV2ZW50cyBvbiBmaWx0ZXJzLgogICAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50IEV2ZW50IG5hbWUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXIgU3RhbmRhcmQgc2lnbmF0dXJlIG9mIHRoZSBldmVudCBiZWZvcmUgdGhlIGV2ZW50IGlzIGZpcmVkCiAgICAgKi8KICAgIG9uU3RhdGVDaGFuZ2UgOiBmdW5jdGlvbiAoZXZlbnQsIGZpbHRlcikgewogICAgICAgIGlmIChldmVudCA9PT0gJ3NlcmlhbGl6ZScpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGZpbHRlciA9PSB0aGlzLmdldE1lbnVGaWx0ZXIoKSkgewogICAgICAgICAgICB0aGlzLm1lbnUuc2V0Q2hlY2tlZChmaWx0ZXIuYWN0aXZlLCBmYWxzZSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoKHRoaXMuYXV0b1JlbG9hZCB8fCB0aGlzLmxvY2FsKSAmJiAhdGhpcy5hcHBseWluZ1N0YXRlKSB7CiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWRVcGRhdGUuZGVsYXkodGhpcy51cGRhdGVCdWZmZXIpOwogICAgICAgIH0KICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbkhlYWRpbmdzKCk7CgogICAgICAgIGlmICghdGhpcy5hcHBseWluZ1N0YXRlKSB7CiAgICAgICAgICAgIHRoaXMuZ3JpZC5zYXZlU3RhdGUoKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5ncmlkLmZpcmVFdmVudCgnZmlsdGVydXBkYXRlJywgdGhpcywgZmlsdGVyKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogSGFuZGxlciBmb3Igc3RvcmUncyBiZWZvcmVsb2FkIGV2ZW50IHdoZW4gY29uZmlndXJlZCBmb3IgcmVtb3RlIGZpbHRlcmluZwogICAgICogQHBhcmFtIHtPYmplY3R9IHN0b3JlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAgICovCiAgICBvbkJlZm9yZUxvYWQgOiBmdW5jdGlvbiAoc3RvcmUsIG9wdGlvbnMpIHsKICAgICAgICBvcHRpb25zLnBhcmFtcyA9IG9wdGlvbnMucGFyYW1zIHx8IHt9OwogICAgICAgIHRoaXMuY2xlYW5QYXJhbXMob3B0aW9ucy5wYXJhbXMpOwogICAgICAgIHZhciBwYXJhbXMgPSB0aGlzLmJ1aWxkUXVlcnkodGhpcy5nZXRGaWx0ZXJEYXRhKCkpOwogICAgICAgIEV4dC5hcHBseShvcHRpb25zLnBhcmFtcywgcGFyYW1zKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcHJpdmF0ZQogICAgICogSGFuZGxlciBmb3Igc3RvcmUncyBsb2FkIGV2ZW50IHdoZW4gY29uZmlndXJlZCBmb3IgbG9jYWwgZmlsdGVyaW5nCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RvcmUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zCiAgICAgKi8KICAgIG9uTG9hZCA6IGZ1bmN0aW9uIChzdG9yZSwgb3B0aW9ucykgewogICAgICAgIHN0b3JlLmZpbHRlckJ5KHRoaXMuZ2V0UmVjb3JkRmlsdGVyKCkpOwogICAgfSwKCiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKiBIYW5kbGVyIGNhbGxlZCB3aGVuIHRoZSBncmlkJ3MgdmlldyBpcyByZWZyZXNoZWQKICAgICAqLwogICAgb25SZWZyZXNoIDogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMudXBkYXRlQ29sdW1uSGVhZGluZ3MoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIHN0eWxlcyBmb3IgdGhlIGhlYWRlciByb3cgYmFzZWQgb24gdGhlIGFjdGl2ZSBmaWx0ZXJzCiAgICAgKi8KICAgIHVwZGF0ZUNvbHVtbkhlYWRpbmdzIDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB2aWV3ID0gdGhpcy5ncmlkLmdldFZpZXcoKSwKICAgICAgICAgICAgaSwgbGVuLCBmaWx0ZXI7CiAgICAgICAgaWYgKHZpZXcubWFpbkhkKSB7CiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHZpZXcuY20uY29uZmlnLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBmaWx0ZXIgPSB0aGlzLmdldEZpbHRlcih2aWV3LmNtLmNvbmZpZ1tpXS5kYXRhSW5kZXgpOwogICAgICAgICAgICAgICAgRXh0LmZseSh2aWV3LmdldEhlYWRlckNlbGwoaSkpW2ZpbHRlciAmJiBmaWx0ZXIuYWN0aXZlID8gJ2FkZENsYXNzJyA6ICdyZW1vdmVDbGFzcyddKHRoaXMuZmlsdGVyQ2xzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCgogICAgLyoqIEBwcml2YXRlICovCiAgICByZWxvYWQgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMubG9jYWwpIHsKICAgICAgICAgICAgdGhpcy5ncmlkLnN0b3JlLmNsZWFyRmlsdGVyKHRydWUpOwogICAgICAgICAgICB0aGlzLmdyaWQuc3RvcmUuZmlsdGVyQnkodGhpcy5nZXRSZWNvcmRGaWx0ZXIoKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHN0YXJ0LAogICAgICAgICAgICAgICAgc3RvcmUgPSB0aGlzLmdyaWQuc3RvcmU7CiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWRVcGRhdGUuY2FuY2VsKCk7CiAgICAgICAgICAgIGlmICh0aGlzLnRvb2xiYXIpIHsKICAgICAgICAgICAgICAgIHN0YXJ0ID0gc3RvcmUucGFyYW1OYW1lcy5zdGFydDsKICAgICAgICAgICAgICAgIGlmIChzdG9yZS5sYXN0T3B0aW9ucyAmJiBzdG9yZS5sYXN0T3B0aW9ucy5wYXJhbXMgJiYgc3RvcmUubGFzdE9wdGlvbnMucGFyYW1zW3N0YXJ0XSkgewogICAgICAgICAgICAgICAgICAgIHN0b3JlLmxhc3RPcHRpb25zLnBhcmFtc1tzdGFydF0gPSAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHN0b3JlLnJlbG9hZCgpOwogICAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBNZXRob2QgZmFjdG9yeSB0aGF0IGdlbmVyYXRlcyBhIHJlY29yZCB2YWxpZGF0b3IgZm9yIHRoZSBmaWx0ZXJzIGFjdGl2ZSBhdCB0aGUgdGltZQogICAgICogb2YgaW52b2thdGlvbi4KICAgICAqIEBwcml2YXRlCiAgICAgKi8KICAgIGdldFJlY29yZEZpbHRlciA6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgZiA9IFtdLCBsZW4sIGk7CiAgICAgICAgdGhpcy5maWx0ZXJzLmVhY2goZnVuY3Rpb24gKGZpbHRlcikgewogICAgICAgICAgICBpZiAoZmlsdGVyLmFjdGl2ZSkgewogICAgICAgICAgICAgICAgZi5wdXNoKGZpbHRlcik7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgbGVuID0gZi5sZW5ndGg7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoIWZbaV0udmFsaWRhdGVSZWNvcmQocmVjb3JkKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9OwogICAgfSwKCiAgICAvKioKICAgICAqIEFkZHMgYSBmaWx0ZXIgdG8gdGhlIGNvbGxlY3Rpb24gYW5kIG9ic2VydmVzIGl0IGZvciBzdGF0ZSBjaGFuZ2UuCiAgICAgKiBAcGFyYW0ge09iamVjdC9FeHQudXguZ3JpZC5maWx0ZXIuRmlsdGVyfSBjb25maWcgQSBmaWx0ZXIgY29uZmlndXJhdGlvbiBvciBhIGZpbHRlciBvYmplY3QuCiAgICAgKiBAcmV0dXJuIHtFeHQudXguZ3JpZC5maWx0ZXIuRmlsdGVyfSBUaGUgZXhpc3Rpbmcgb3IgbmV3bHkgY3JlYXRlZCBmaWx0ZXIgb2JqZWN0LgogICAgICovCiAgICBhZGRGaWx0ZXIgOiBmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgICAgdmFyIENscyA9IHRoaXMuZ2V0RmlsdGVyQ2xhc3MoY29uZmlnLnR5cGUpLAogICAgICAgICAgICBmaWx0ZXIgPSBjb25maWcubWVudSA/IGNvbmZpZyA6IChuZXcgQ2xzKGNvbmZpZykpOwogICAgICAgIHRoaXMuZmlsdGVycy5hZGQoZmlsdGVyKTsKCiAgICAgICAgRXh0LnV0aWwuT2JzZXJ2YWJsZS5jYXB0dXJlKGZpbHRlciwgdGhpcy5vblN0YXRlQ2hhbmdlLCB0aGlzKTsKICAgICAgICByZXR1cm4gZmlsdGVyOwogICAgfSwKCiAgICAvKioKICAgICAqIEFkZHMgZmlsdGVycyB0byB0aGUgY29sbGVjdGlvbi4KICAgICAqIEBwYXJhbSB7QXJyYXkvRXh0LmdyaWQuQ29sdW1uTW9kZWx9IGZpbHRlcnMgRWl0aGVyIGFuIEFycmF5IG9mCiAgICAgKiBmaWx0ZXIgY29uZmlndXJhdGlvbiBvYmplY3RzIG9yIGFuIEV4dC5ncmlkLkNvbHVtbk1vZGVsLiAgVGhlIGNvbHVtbnMKICAgICAqIG9mIGEgcGFzc2VkIEV4dC5ncmlkLkNvbHVtbk1vZGVsIHdpbGwgYmUgZXhhbWluZWQgZm9yIGEgPGNvZGU+ZmlsdGVyPC9jb2RlPgogICAgICogcHJvcGVydHkgYW5kLCBpZiBwcmVzZW50LCB3aWxsIGJlIHVzZWQgYXMgdGhlIGZpbHRlciBjb25maWd1cmF0aW9uIG9iamVjdC4KICAgICAqLwogICAgYWRkRmlsdGVycyA6IGZ1bmN0aW9uIChmaWx0ZXJzKSB7CiAgICAgICAgaWYgKGZpbHRlcnMpIHsKICAgICAgICAgICAgdmFyIGksIGxlbiwgZmlsdGVyLCBjbSA9IGZhbHNlLCBkSTsKICAgICAgICAgICAgaWYgKGZpbHRlcnMgaW5zdGFuY2VvZiBFeHQuZ3JpZC5Db2x1bW5Nb2RlbCkgewogICAgICAgICAgICAgICAgZmlsdGVycyA9IGZpbHRlcnMuY29uZmlnOwogICAgICAgICAgICAgICAgY20gPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgIGZpbHRlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgaWYgKGNtKSB7CiAgICAgICAgICAgICAgICAgICAgZEkgPSBmaWx0ZXJzW2ldLmRhdGFJbmRleDsKICAgICAgICAgICAgICAgICAgICBmaWx0ZXIgPSBmaWx0ZXJzW2ldLmZpbHRlciB8fCBmaWx0ZXJzW2ldLmZpbHRlcmFibGU7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlcil7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlciA9IChmaWx0ZXIgPT09IHRydWUpID8ge30gOiBmaWx0ZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIEV4dC5hcHBseShmaWx0ZXIsIHtkYXRhSW5kZXg6ZEl9KTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmlsdGVyIHR5cGUgaXMgc3BlY2lmaWVkIGluIG9yZGVyIG9mIHByZWZlcmVuY2U6CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBmaWx0ZXIgdHlwZSBzcGVjaWZpZWQgaW4gY29uZmlnCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB0eXBlIHNwZWNpZmllZCBpbiBzdG9yZSdzIGZpZWxkJ3MgdHlwZSBjb25maWcKICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyLnR5cGUgPSBmaWx0ZXIudHlwZSB8fCB0aGlzLnN0b3JlLmZpZWxkcy5nZXQoZEkpLnR5cGUudHlwZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZpbHRlciA9IGZpbHRlcnNbaV07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBpZiBmaWx0ZXIgY29uZmlnIGZvdW5kIGFkZCBmaWx0ZXIgZm9yIHRoZSBjb2x1bW4KICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEZpbHRlcihmaWx0ZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIFJldHVybnMgYSBmaWx0ZXIgZm9yIHRoZSBnaXZlbiBkYXRhSW5kZXgsIGlmIG9uZSBleGlzdHMuCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YUluZGV4IFRoZSBkYXRhSW5kZXggb2YgdGhlIGRlc2lyZWQgZmlsdGVyIG9iamVjdC4KICAgICAqIEByZXR1cm4ge0V4dC51eC5ncmlkLmZpbHRlci5GaWx0ZXJ9CiAgICAgKi8KICAgIGdldEZpbHRlciA6IGZ1bmN0aW9uIChkYXRhSW5kZXgpIHsKICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJzLmdldChkYXRhSW5kZXgpOwogICAgfSwKCiAgICAvKioKICAgICAqIFR1cm5zIGFsbCBmaWx0ZXJzIG9mZi4gVGhpcyBkb2VzIG5vdCBjbGVhciB0aGUgY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbgogICAgICogKHNlZSB7QGxpbmsgI3JlbW92ZUFsbH0pLgogICAgICovCiAgICBjbGVhckZpbHRlcnMgOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5maWx0ZXJzLmVhY2goZnVuY3Rpb24gKGZpbHRlcikgewogICAgICAgICAgICBmaWx0ZXIuc2V0QWN0aXZlKGZhbHNlKTsKICAgICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFuIEFycmF5IG9mIHRoZSBjdXJyZW50bHkgYWN0aXZlIGZpbHRlcnMuCiAgICAgKiBAcmV0dXJuIHtBcnJheX0gZmlsdGVycyBBcnJheSBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBmaWx0ZXJzLgogICAgICovCiAgICBnZXRGaWx0ZXJEYXRhIDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBmaWx0ZXJzID0gW10sIGksIGxlbjsKCiAgICAgICAgdGhpcy5maWx0ZXJzLmVhY2goZnVuY3Rpb24gKGYpIHsKICAgICAgICAgICAgaWYgKGYuYWN0aXZlKSB7CiAgICAgICAgICAgICAgICB2YXIgZCA9IFtdLmNvbmNhdChmLnNlcmlhbGl6ZSgpKTsKICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogZi5kYXRhSW5kZXgsCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRbaV0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmaWx0ZXJzOwogICAgfSwKCiAgICAvKioKICAgICAqIEZ1bmN0aW9uIHRvIHRha2UgdGhlIGFjdGl2ZSBmaWx0ZXJzIGRhdGEgYW5kIGJ1aWxkIGl0IGludG8gYSBxdWVyeS4KICAgICAqIFRoZSBmb3JtYXQgb2YgdGhlIHF1ZXJ5IGRlcGVuZHMgb24gdGhlIDxjb2RlPntAbGluayAjZW5jb2RlfTwvY29kZT4KICAgICAqIGNvbmZpZ3VyYXRpb246CiAgICAgKiA8ZGl2IGNsYXNzPSJtZGV0YWlsLXBhcmFtcyI+PHVsPgogICAgICoKICAgICAqIDxsaT48Yj48dHQ+ZmFsc2U8L3R0PjwvYj4gOiA8aT5EZWZhdWx0PC9pPgogICAgICogPGRpdiBjbGFzcz0ic3ViLWRlc2MiPgogICAgICogRmxhdHRlbiBpbnRvIHF1ZXJ5IHN0cmluZyBvZiB0aGUgZm9ybSAoYXNzdW1pbmcgPGNvZGU+e0BsaW5rICNwYXJhbVByZWZpeH09J2ZpbHRlcnMnPC9jb2RlPjoKICAgICAqIDxwcmU+PGNvZGU+CmZpbHRlcnNbMF1bZmllbGRdPSJzb21lRGF0YUluZGV4IiYKZmlsdGVyc1swXVtkYXRhXVtjb21wYXJpc29uXT0ic29tZVZhbHVlMSImCmZpbHRlcnNbMF1bZGF0YV1bdHlwZV09InNvbWVWYWx1ZTIiJgpmaWx0ZXJzWzBdW2RhdGFdW3ZhbHVlXT0ic29tZVZhbHVlMyImCiAgICAgKiA8L2NvZGU+PC9wcmU+CiAgICAgKiA8L2Rpdj48L2xpPgogICAgICogPGxpPjxiPjx0dD50cnVlPC90dD48L2I+IDoKICAgICAqIDxkaXYgY2xhc3M9InN1Yi1kZXNjIj4KICAgICAqIEpTT04gZW5jb2RlIHRoZSBmaWx0ZXIgZGF0YQogICAgICogPHByZT48Y29kZT4KZmlsdGVyc1swXVtmaWVsZF09InNvbWVEYXRhSW5kZXgiJgpmaWx0ZXJzWzBdW2RhdGFdW2NvbXBhcmlzb25dPSJzb21lVmFsdWUxIiYKZmlsdGVyc1swXVtkYXRhXVt0eXBlXT0ic29tZVZhbHVlMiImCmZpbHRlcnNbMF1bZGF0YV1bdmFsdWVdPSJzb21lVmFsdWUzIiYKICAgICAqIDwvY29kZT48L3ByZT4KICAgICAqIDwvZGl2PjwvbGk+CiAgICAgKiA8L3VsPjwvZGl2PgogICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY3VzdG9taXplIHRoZSBmb3JtYXQgb2YgdGhlIGZpbHRlciBxdWVyeSBmb3IgcmVtb3RlIHJlcXVlc3RzLgogICAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVycyBBIGNvbGxlY3Rpb24gb2Ygb2JqZWN0cyByZXByZXNlbnRpbmcgYWN0aXZlIGZpbHRlcnMgYW5kIHRoZWlyIGNvbmZpZ3VyYXRpb24uCiAgICAgKiAgICBFYWNoIGVsZW1lbnQgd2lsbCB0YWtlIHRoZSBmb3JtIG9mIHtmaWVsZDogZGF0YUluZGV4LCBkYXRhOiBmaWx0ZXJDb25mfS4gZGF0YUluZGV4IGlzIG5vdCBhc3N1cmVkCiAgICAgKiAgICB0byBiZSB1bmlxdWUgYXMgYW55IG9uZSBmaWx0ZXIgbWF5IGJlIGEgY29tcG9zaXRlIG9mIG1vcmUgYmFzaWMgZmlsdGVycyBmb3IgdGhlIHNhbWUgZGF0YUluZGV4LgogICAgICogQHJldHVybiB7T2JqZWN0fSBRdWVyeSBrZXlzIGFuZCB2YWx1ZXMKICAgICAqLwogICAgYnVpbGRRdWVyeSA6IGZ1bmN0aW9uIChmaWx0ZXJzKSB7CiAgICAgICAgdmFyIHAgPSB7fSwgaSwgZiwgcm9vdCwgZGF0YVByZWZpeCwga2V5LCB0bXAsCiAgICAgICAgICAgIGxlbiA9IGZpbHRlcnMubGVuZ3RoOwoKICAgICAgICBpZiAoIXRoaXMuZW5jb2RlKXsKICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBmID0gZmlsdGVyc1tpXTsKICAgICAgICAgICAgICAgIHJvb3QgPSBbdGhpcy5wYXJhbVByZWZpeCwgJ1snLCBpLCAnXSddLmpvaW4oJycpOwogICAgICAgICAgICAgICAgcFtyb290ICsgJ1tmaWVsZF0nXSA9IGYuZmllbGQ7CgogICAgICAgICAgICAgICAgZGF0YVByZWZpeCA9IHJvb3QgKyAnW2RhdGFdJzsKICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGYuZGF0YSkgewogICAgICAgICAgICAgICAgICAgIHBbW2RhdGFQcmVmaXgsICdbJywga2V5LCAnXSddLmpvaW4oJycpXSA9IGYuZGF0YVtrZXldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdG1wID0gW107CiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgewogICAgICAgICAgICAgICAgZiA9IGZpbHRlcnNbaV07CiAgICAgICAgICAgICAgICB0bXAucHVzaChFeHQuYXBwbHkoCiAgICAgICAgICAgICAgICAgICAge30sCiAgICAgICAgICAgICAgICAgICAge2ZpZWxkOiBmLmZpZWxkfSwKICAgICAgICAgICAgICAgICAgICBmLmRhdGEKICAgICAgICAgICAgICAgICkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIG9ubHkgYnVpbGQgaWYgdGhlcmUgaXMgYWN0aXZlIGZpbHRlcgogICAgICAgICAgICBpZiAodG1wLmxlbmd0aCA+IDApewogICAgICAgICAgICAgICAgcFt0aGlzLnBhcmFtUHJlZml4XSA9IEV4dC51dGlsLkpTT04uZW5jb2RlKHRtcCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIHA7CiAgICB9LAoKICAgIC8qKgogICAgICogUmVtb3ZlcyBmaWx0ZXIgcmVsYXRlZCBxdWVyeSBwYXJhbWV0ZXJzIGZyb20gdGhlIHByb3ZpZGVkIG9iamVjdC4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwIFF1ZXJ5IHBhcmFtZXRlcnMgdGhhdCBtYXkgY29udGFpbiBmaWx0ZXIgcmVsYXRlZCBmaWVsZHMuCiAgICAgKi8KICAgIGNsZWFuUGFyYW1zIDogZnVuY3Rpb24gKHApIHsKICAgICAgICAvLyBpZiBlbmNvZGluZyBqdXN0IGRlbGV0ZSB0aGUgcHJvcGVydHkKICAgICAgICBpZiAodGhpcy5lbmNvZGUpIHsKICAgICAgICAgICAgZGVsZXRlIHBbdGhpcy5wYXJhbVByZWZpeF07CiAgICAgICAgLy8gb3RoZXJ3aXNlIHNjcnViIHRoZSBvYmplY3Qgb2YgZmlsdGVyIGRhdGEKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgcmVnZXgsIGtleTsKICAgICAgICAgICAgcmVnZXggPSBuZXcgUmVnRXhwKCdeJyArIHRoaXMucGFyYW1QcmVmaXggKyAnXFtbMC05XStcXScpOwogICAgICAgICAgICBmb3IgKGtleSBpbiBwKSB7CiAgICAgICAgICAgICAgICBpZiAocmVnZXgudGVzdChrZXkpKSB7CiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBba2V5XTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBGdW5jdGlvbiBmb3IgbG9jYXRpbmcgZmlsdGVyIGNsYXNzZXMsIG92ZXJ3cml0ZSB0aGlzIHdpdGggeW91ciBmYXZvcml0ZQogICAgICogbG9hZGVyIHRvIHByb3ZpZGUgZHluYW1pYyBmaWx0ZXIgbG9hZGluZy4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIFRoZSB0eXBlIG9mIGZpbHRlciB0byBsb2FkICgnRmlsdGVyJyBpcyBhdXRvbWF0aWNhbGx5CiAgICAgKiBhcHBlbmRlZCB0byB0aGUgcGFzc2VkIHR5cGU7IGVnLCAnc3RyaW5nJyBiZWNvbWVzICdTdHJpbmdGaWx0ZXInKS4KICAgICAqIEByZXR1cm4ge0NsYXNzfSBUaGUgRXh0LnV4LmdyaWQuZmlsdGVyLkNsYXNzCiAgICAgKi8KICAgIGdldEZpbHRlckNsYXNzIDogZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICAvLyBtYXAgdGhlIHN1cHBvcnRlZCBFeHQuZGF0YS5GaWVsZCB0eXBlIHZhbHVlcyBpbnRvIGEgc3VwcG9ydGVkIGZpbHRlcgogICAgICAgIHN3aXRjaCh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ2F1dG8nOgogICAgICAgICAgICAgIHR5cGUgPSAnc3RyaW5nJzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnaW50JzoKICAgICAgICAgICAgY2FzZSAnZmxvYXQnOgogICAgICAgICAgICAgIHR5cGUgPSAnbnVtZXJpYyc7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2Jvb2wnOgogICAgICAgICAgICAgIHR5cGUgPSAnYm9vbGVhbic7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIHJldHVybiBFeHQudXguZ3JpZC5maWx0ZXJbdHlwZS5zdWJzdHIoMCwgMSkudG9VcHBlckNhc2UoKSArIHR5cGUuc3Vic3RyKDEpICsgJ0ZpbHRlciddOwogICAgfQp9KTsKCi8vIHJlZ2lzdGVyIHB0eXBlCkV4dC5wcmVnKCdncmlkZmlsdGVycycsIEV4dC51eC5ncmlkLkdyaWRGaWx0ZXJzKTsK</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>